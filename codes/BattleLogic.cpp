void __fastcall BattleLogic___cctor(const MethodInfo *method)
{
  __int64 v1; // x1
  __int64 v2; // x1
  __int64 v3; // x1
  __int64 v4; // x1
  __int64 v5; // x1
  __int64 v6; // x1
  __int64 v7; // x1
  __int64 v8; // x1
  __int64 v9; // x1
  __int64 v10; // x1
  struct BattleLogic_StaticFields *static_fields; // x0
  __int64 v12; // x1
  struct BattleLogic_StaticFields *v13; // x0
  __int64 v14; // x1
  struct BattleLogic_StaticFields *v15; // x0
  __int64 v16; // x1
  __int64 v17; // x2
  System_Array_o *v18; // x19
  struct BattleLogic_StaticFields *v19; // x0
  __int64 v20; // x2
  __int64 v21; // x0
  __int64 v22; // x2
  struct System_String_array *v23; // x19
  __int64 v24; // x0
  __int64 v25; // x1
  struct BattleLogic_StaticFields *v26; // x0
  struct BattleLogic_StaticFields *v27; // x0
  __int64 v28; // x1
  System_RuntimeFieldHandle_o v29; // 0:w1.4

  if ( (byte_40F740C & 1) == 0 )
  {
    sub_B16FFC(&BattleLogic_TypeInfo, v1);
    sub_B16FFC(&int___TypeInfo, v2);
    sub_B16FFC(&string___TypeInfo, v3);
    sub_B16FFC(
      &Field__PrivateImplementationDetails__A415B6039B5C703ADFDA790F447E81EE10EC946DF9D6F69DCF550EE69B386882,
      v4);
    sub_B16FFC(&StringLiteral_17781, v5);
    sub_B16FFC(&StringLiteral_18106, v6);
    sub_B16FFC(&StringLiteral_18107, v7);
    sub_B16FFC(&StringLiteral_903, v8);
    sub_B16FFC(&StringLiteral_904, v9);
    sub_B16FFC(&StringLiteral_4153, v10);
    byte_40F740C = 1;
  }
  static_fields = BattleLogic_TypeInfo->static_fields;
  v12 = StringLiteral_4153;
  static_fields->COMMAND_SPELL_EFFECT_ASSETNAME = (struct System_String_o *)StringLiteral_4153;
  sub_B16F98(&static_fields->COMMAND_SPELL_EFFECT_ASSETNAME, v12);
  v13 = BattleLogic_TypeInfo->static_fields;
  v14 = StringLiteral_18107;
  v13->COMMAND_SPELL_EFFECT_PREFABNAME = (struct System_String_o *)StringLiteral_18107;
  sub_B16F98(&v13->COMMAND_SPELL_EFFECT_PREFABNAME, v14);
  v15 = BattleLogic_TypeInfo->static_fields;
  v16 = StringLiteral_18106;
  v15->COMMAND_SPELL_EFFECT_ANIMNAME = (struct System_String_o *)StringLiteral_18106;
  sub_B16F98(&v15->COMMAND_SPELL_EFFECT_ANIMNAME, v16);
  v18 = (System_Array_o *)sub_B17014(int___TypeInfo, 5LL, v17);
  v29.fields.value = Field__PrivateImplementationDetails__A415B6039B5C703ADFDA790F447E81EE10EC946DF9D6F69DCF550EE69B386882;
  System_Runtime_CompilerServices_RuntimeHelpers__InitializeArray_42629164(v18, v29, 0LL);
  v19 = BattleLogic_TypeInfo->static_fields;
  v19->addStarWeight = (struct System_Int32_array *)v18;
  sub_B16F98(&v19->addStarWeight, v18);
  v21 = sub_B17014(string___TypeInfo, 2LL, v20);
  if ( !v21 )
    sub_B170D4();
  v23 = (struct System_String_array *)v21;
  v24 = StringLiteral_904;
  if ( StringLiteral_904 )
  {
    v24 = sub_B170BC(StringLiteral_904, v23->obj.klass->_1.element_class);
    if ( !v24 )
      goto LABEL_16;
    v25 = StringLiteral_904;
  }
  else
  {
    v25 = 0LL;
  }
  if ( !v23->max_length )
    goto LABEL_15;
  v23->m_Items[0] = (System_String_o *)v25;
  sub_B16F98(v23->m_Items, v25);
  v24 = StringLiteral_903;
  if ( StringLiteral_903 )
  {
    v24 = sub_B170BC(StringLiteral_903, v23->obj.klass->_1.element_class);
    if ( v24 )
    {
      v25 = StringLiteral_903;
      goto LABEL_13;
    }
LABEL_16:
    sub_B170F4();
    sub_B170A0();
  }
  v25 = 0LL;
LABEL_13:
  if ( v23->max_length <= 1 )
  {
LABEL_15:
    sub_B17100(v24, v25, v22);
    sub_B170A0();
  }
  v23->m_Items[1] = (System_String_o *)v25;
  sub_B16F98(&v23->m_Items[1], v25);
  v26 = BattleLogic_TypeInfo->static_fields;
  v26->unusedGameObjectNames = v23;
  sub_B16F98(&v26->unusedGameObjectNames, v23);
  v27 = BattleLogic_TypeInfo->static_fields;
  v28 = StringLiteral_17781;
  v27->CUTIN_FIRST_ID_LIST_KEY = (struct System_String_o *)StringLiteral_17781;
  sub_B16F98(&v27->CUTIN_FIRST_ID_LIST_KEY, v28);
}


void __fastcall BattleLogic___ctor(BattleLogic_o *this, const MethodInfo *method)
{
  __int64 v2; // x2
  __int64 v3; // x3
  __int64 v4; // x4
  __int64 v6; // x1
  __int64 v7; // x1
  __int64 v8; // x1
  __int64 v9; // x1
  __int64 v10; // x1
  __int64 v11; // x1
  __int64 v12; // x1
  __int64 v13; // x1
  __int64 v14; // x1
  __int64 v15; // x1
  __int64 v16; // x1
  __int64 v17; // x1
  System_Collections_Generic_LinkedList_WebOperation__o *v18; // x21
  __int64 v19; // x1
  __int64 v20; // x2
  __int64 v21; // x3
  __int64 v22; // x4
  System_Collections_Generic_Dictionary_int__WarBoardEvalValueSquare_EvalValueSquare__o *v23; // x21
  __int64 v24; // x1
  __int64 v25; // x2
  __int64 v26; // x3
  __int64 v27; // x4
  System_Collections_Generic_List_RegexCharClass_SingleRange__o *v28; // x21
  void *v29; // x1
  __int64 v35; // x1
  __int64 v36; // x2
  __int64 v37; // x3
  __int64 v38; // x4
  System_Collections_Generic_List_int__o *v39; // x21
  __int64 v40; // x2
  __int64 v41; // x0
  __int64 v42; // x2
  unsigned int v43; // w8
  __int64 v44; // x1
  __int64 v45; // x2
  __int64 v46; // x0
  __int64 v47; // x20
  float v48; // s4
  float v49; // s5
  float v50; // s6
  float v51; // s7
  float v52; // s4
  float v53; // s5
  float v54; // s6
  float v55; // s7
  float v56; // s4
  float v57; // s5
  float v58; // s6
  float v59; // s7
  __int64 v60; // x2
  struct BattleLogic_TutorialStringData_array *v61; // x20
  __int64 v62; // x1
  __int64 v63; // x2
  __int64 v64; // x3
  __int64 v65; // x4
  BattleLogic_TutorialStringData_o *v66; // x0
  BattleLogic_TutorialStringData_o *v67; // x21
  __int64 v68; // x1
  __int64 v69; // x2
  __int64 v70; // x3
  __int64 v71; // x4
  BattleLogic_TutorialStringData_o *v72; // x0
  BattleLogic_TutorialStringData_o *v73; // x21
  __int64 v74; // x1
  __int64 v75; // x2
  __int64 v76; // x3
  __int64 v77; // x4
  BattleLogic_TutorialStringData_o *v78; // x0
  BattleLogic_TutorialStringData_o *v79; // x21
  __int64 v80; // x1
  __int64 v81; // x2
  __int64 v82; // x3
  __int64 v83; // x4
  BattleLogic_TutorialStringData_o *v84; // x0
  BattleLogic_TutorialStringData_o *v85; // x21
  __int64 v86; // x1
  __int64 v87; // x2
  __int64 v88; // x3
  __int64 v89; // x4
  BattleLogic_TutorialStringData_o *v90; // x0
  BattleLogic_TutorialStringData_o *v91; // x21
  __int64 v92; // x1
  __int64 v93; // x2
  __int64 v94; // x3
  __int64 v95; // x4
  BattleLogic_TutorialStringData_o *v96; // x0
  BattleLogic_TutorialStringData_o *v97; // x21
  __int64 v98; // x1
  __int64 v99; // x2
  __int64 v100; // x3
  __int64 v101; // x4
  BattleLogic_TutorialStringData_o *v102; // x0
  BattleLogic_TutorialStringData_o *v103; // x21
  __int64 v104; // x1
  __int64 v105; // x2
  __int64 v106; // x3
  __int64 v107; // x4
  BattleLogic_TutorialStringData_o *v108; // x0
  BattleLogic_TutorialStringData_o *v109; // x21
  __int64 v110; // x1
  __int64 v111; // x2
  __int64 v112; // x3
  __int64 v113; // x4
  BattleLogic_TutorialStringData_o *v114; // x0
  BattleLogic_TutorialStringData_o *v115; // x21
  __int64 v116; // x1
  __int64 v117; // x2
  __int64 v118; // x3
  __int64 v119; // x4
  BattleLogic_TutorialStringData_o *v120; // x0
  BattleLogic_TutorialStringData_o *v121; // x21
  __int64 v122; // x1
  __int64 v123; // x2
  __int64 v124; // x3
  __int64 v125; // x4
  BattleLogic_TutorialStringData_o *v126; // x0
  BattleLogic_TutorialStringData_o *v127; // x21
  __int128 v128; // [xsp+0h] [xbp-50h] BYREF
  MethodInfo methoda; // [xsp+10h] [xbp-40h] BYREF
  UnityEngine_Vector2_o v130; // 0:s1.4,4:s2.4
  UnityEngine_Vector2_o v131; // 0:s1.4,4:s2.4
  UnityEngine_Vector2_o v132; // 0:s1.4,4:s2.4
  UnityEngine_Vector2_o v133; // 0:s1.4,4:s2.4
  UnityEngine_Vector2_o v134; // 0:s1.4,4:s2.4
  UnityEngine_Vector2_o v135; // 0:s1.4,4:s2.4
  UnityEngine_Vector2_o v136; // 0:s1.4,4:s2.4
  UnityEngine_Vector2_o v137; // 0:s1.4,4:s2.4
  UnityEngine_Vector2_o v138; // 0:s1.4,4:s2.4
  UnityEngine_Vector2_o v139; // 0:s1.4,4:s2.4
  UnityEngine_Vector2_o v140; // 0:s1.4,4:s2.4
  UnityEngine_Rect_o v141; // 0:s0.4,4:s1.4,8:s2.4,12:s3.4
  UnityEngine_Rect_o v142; // 0:s0.4,4:s1.4,8:s2.4,12:s3.4
  UnityEngine_Rect_o v143; // 0:s0.4,4:s1.4,8:s2.4,12:s3.4

  if ( (byte_40F740B & 1) == 0 )
  {
    sub_B16FFC(&Method_System_Collections_Generic_Dictionary_int__BattleCommandData___ctor__, method);
    sub_B16FFC(&System_Collections_Generic_Dictionary_int__BattleCommandData__TypeInfo, v6);
    sub_B16FFC(&Method_System_Collections_Generic_LinkedList_BattleLogicTask___ctor__, v7);
    sub_B16FFC(&System_Collections_Generic_LinkedList_BattleLogicTask__TypeInfo, v8);
    sub_B16FFC(&Method_System_Collections_Generic_List_GameObject___ctor___66735992, v9);
    sub_B16FFC(&Method_System_Collections_Generic_List_int___ctor__, v10);
    sub_B16FFC(&System_Collections_Generic_List_int__TypeInfo, v11);
    sub_B16FFC(&System_Collections_Generic_List_GameObject__TypeInfo, v12);
    sub_B16FFC(&UnityEngine_Rect___TypeInfo, v13);
    sub_B16FFC(&BattleLogic_TutorialStringData___TypeInfo, v14);
    sub_B16FFC(&BattleLogic_TutorialStringData_TypeInfo, v15);
    sub_B16FFC(&UnityEngine_Vector2___TypeInfo, v16);
    sub_B16FFC(&StringLiteral_1, v17);
    byte_40F740B = 1;
  }
  v18 = (System_Collections_Generic_LinkedList_WebOperation__o *)sub_B170CC(
                                                                   System_Collections_Generic_LinkedList_BattleLogicTask__TypeInfo,
                                                                   method,
                                                                   v2,
                                                                   v3,
                                                                   v4);
  System_Collections_Generic_LinkedList_WebOperation____ctor(
    v18,
    (const MethodInfo_23FD1A8 *)Method_System_Collections_Generic_LinkedList_BattleLogicTask___ctor__);
  this->fields.list_logic = (struct System_Collections_Generic_LinkedList_BattleLogicTask__o *)v18;
  sub_B16F98(&this->fields.list_logic, v18);
  v23 = (System_Collections_Generic_Dictionary_int__WarBoardEvalValueSquare_EvalValueSquare__o *)sub_B170CC(
                                                                                                   System_Collections_Generic_Dictionary_int__BattleCommandData__TypeInfo,
                                                                                                   v19,
                                                                                                   v20,
                                                                                                   v21,
                                                                                                   v22);
  System_Collections_Generic_Dictionary_int__WarBoardEvalValueSquare_EvalValueSquare____ctor(
    v23,
    (const MethodInfo_2DE8808 *)Method_System_Collections_Generic_Dictionary_int__BattleCommandData___ctor__);
  this->fields.deadAttackCommandDictionary = (struct System_Collections_Generic_Dictionary_int__BattleCommandData__o *)v23;
  sub_B16F98(&this->fields.deadAttackCommandDictionary, v23);
  v28 = (System_Collections_Generic_List_RegexCharClass_SingleRange__o *)sub_B170CC(
                                                                           System_Collections_Generic_List_GameObject__TypeInfo,
                                                                           v24,
                                                                           v25,
                                                                           v26,
                                                                           v27);
  System_Collections_Generic_List_RegexCharClass_SingleRange____ctor(
    v28,
    10,
    (const MethodInfo_2F250E4 *)Method_System_Collections_Generic_List_GameObject___ctor___66735992);
  this->fields.unusedGameobjects = (struct System_Collections_Generic_List_GameObject__o *)v28;
  sub_B16F98(&this->fields.unusedGameobjects, v28);
  v29 = StringLiteral_1;
  this->fields.resultstring = (struct System_String_o *)StringLiteral_1;
  sub_B16F98(&this->fields.resultstring, v29);
  __asm { FMOV            V0.2S, #1.0 }
  *(_QWORD *)&this->fields.prevScaleTime = _D0;
  *(_QWORD *)&this->fields.prevFixScaleTime = _D0;
  this->fields.prevPartActiontScaleTime = 1.0;
  v39 = (System_Collections_Generic_List_int__o *)sub_B170CC(
                                                    System_Collections_Generic_List_int__TypeInfo,
                                                    v35,
                                                    v36,
                                                    v37,
                                                    v38);
  System_Collections_Generic_List_int____ctor(
    v39,
    (const MethodInfo_2F0F794 *)Method_System_Collections_Generic_List_int___ctor__);
  this->fields.cutinFirstIdListThisTurn = v39;
  sub_B16F98(&this->fields.cutinFirstIdListThisTurn, v39);
  v41 = sub_B17014(UnityEngine_Vector2___TypeInfo, 3LL, v40);
  if ( !v41 )
    goto LABEL_48;
  v43 = *(_DWORD *)(v41 + 24);
  v44 = v41;
  if ( !v43 )
    goto LABEL_46;
  *(_QWORD *)(v41 + 32) = 0xC248000043C80000LL;
  if ( v43 == 1 )
    goto LABEL_46;
  *(_QWORD *)(v41 + 40) = 0xC31A0000C3BE0000LL;
  if ( v43 <= 2 )
    goto LABEL_46;
  *(_QWORD *)(v41 + 48) = 0x42FA0000C3898000LL;
  this->fields.TuArrow = (struct UnityEngine_Vector2_array *)v41;
  sub_B16F98(&this->fields.TuArrow, v41);
  v46 = sub_B17014(UnityEngine_Rect___TypeInfo, 3LL, v45);
  v141.fields.m_XMin = 242.75;
  v141.fields.m_YMin = -281.5;
  v141.fields.m_Width = 266.5;
  v141.fields.m_Height = 251.0;
  v47 = v46;
  methoda.name = 0LL;
  methoda.klass = 0LL;
  UnityEngine_Rect___ctor(v141, v48, v49, v50, v51, (const MethodInfo *)&methoda.name);
  if ( !v47 )
    goto LABEL_48;
  if ( !*(_DWORD *)(v47 + 24) )
    goto LABEL_46;
  v142.fields.m_Width = 120.0;
  *(_OWORD *)(v47 + 32) = *(_OWORD *)&methoda.name;
  v142.fields.m_XMin = -443.0;
  v142.fields.m_YMin = -232.0;
  v142.fields.m_Height = 120.0;
  methoda.methodPointer = 0LL;
  methoda.invoker_method = 0LL;
  UnityEngine_Rect___ctor(v142, v52, v53, v54, v55, &methoda);
  if ( *(_DWORD *)(v47 + 24) <= 1u )
    goto LABEL_46;
  *(_OWORD *)(v47 + 48) = *(_OWORD *)&methoda.methodPointer;
  v143.fields.m_XMin = -330.0;
  v143.fields.m_YMin = -70.0;
  v143.fields.m_Width = 270.0;
  v143.fields.m_Height = 200.0;
  v128 = 0uLL;
  UnityEngine_Rect___ctor(v143, v56, v57, v58, v59, (const MethodInfo *)&v128);
  if ( *(_DWORD *)(v47 + 24) <= 2u )
    goto LABEL_46;
  *(_OWORD *)(v47 + 64) = v128;
  this->fields.TuSquare = (struct UnityEngine_Rect_array *)v47;
  sub_B16F98(&this->fields.TuSquare, v47);
  v61 = (struct BattleLogic_TutorialStringData_array *)sub_B17014(BattleLogic_TutorialStringData___TypeInfo, 11LL, v60);
  v66 = (BattleLogic_TutorialStringData_o *)sub_B170CC(BattleLogic_TutorialStringData_TypeInfo, v62, v63, v64, v65);
  v130.fields.y = 24.0;
  v130.fields.x = 0.0;
  v67 = v66;
  BattleLogic_TutorialStringData___ctor(v66, 0.0, v130, 30, 0LL);
  if ( !v61 )
LABEL_48:
    sub_B170D4();
  if ( v67 )
  {
    v41 = sub_B170BC(v67, v61->obj.klass->_1.element_class);
    if ( !v41 )
      goto LABEL_47;
  }
  if ( !v61->max_length )
    goto LABEL_46;
  v61->m_Items[0] = v67;
  sub_B16F98(v61->m_Items, v67);
  v72 = (BattleLogic_TutorialStringData_o *)sub_B170CC(BattleLogic_TutorialStringData_TypeInfo, v68, v69, v70, v71);
  v131.fields.y = 24.0;
  v131.fields.x = 0.0;
  v73 = v72;
  BattleLogic_TutorialStringData___ctor(v72, 0.0, v131, 28, 0LL);
  if ( v73 )
  {
    v41 = sub_B170BC(v73, v61->obj.klass->_1.element_class);
    if ( !v41 )
      goto LABEL_47;
  }
  if ( v61->max_length <= 1 )
    goto LABEL_46;
  v61->m_Items[1] = v73;
  sub_B16F98(&v61->m_Items[1], v73);
  v78 = (BattleLogic_TutorialStringData_o *)sub_B170CC(BattleLogic_TutorialStringData_TypeInfo, v74, v75, v76, v77);
  v132.fields.y = 8.0;
  v132.fields.x = 0.0;
  v79 = v78;
  BattleLogic_TutorialStringData___ctor(v78, 0.0, v132, 28, 0LL);
  if ( v79 )
  {
    v41 = sub_B170BC(v79, v61->obj.klass->_1.element_class);
    if ( !v41 )
      goto LABEL_47;
  }
  if ( v61->max_length <= 2 )
    goto LABEL_46;
  v61->m_Items[2] = v79;
  sub_B16F98(&v61->m_Items[2], v79);
  v84 = (BattleLogic_TutorialStringData_o *)sub_B170CC(BattleLogic_TutorialStringData_TypeInfo, v80, v81, v82, v83);
  v133.fields.y = 24.0;
  v133.fields.x = 0.0;
  v85 = v84;
  BattleLogic_TutorialStringData___ctor(v84, 0.0, v133, 26, 0LL);
  if ( v85 )
  {
    v41 = sub_B170BC(v85, v61->obj.klass->_1.element_class);
    if ( !v41 )
      goto LABEL_47;
  }
  if ( v61->max_length <= 3 )
    goto LABEL_46;
  v61->m_Items[3] = v85;
  sub_B16F98(&v61->m_Items[3], v85);
  v90 = (BattleLogic_TutorialStringData_o *)sub_B170CC(BattleLogic_TutorialStringData_TypeInfo, v86, v87, v88, v89);
  v134.fields.y = 8.0;
  v134.fields.x = 0.0;
  v91 = v90;
  BattleLogic_TutorialStringData___ctor(v90, 0.0, v134, 26, 0LL);
  if ( v91 )
  {
    v41 = sub_B170BC(v91, v61->obj.klass->_1.element_class);
    if ( !v41 )
      goto LABEL_47;
  }
  if ( v61->max_length <= 4 )
    goto LABEL_46;
  v61->m_Items[4] = v91;
  sub_B16F98(&v61->m_Items[4], v91);
  v96 = (BattleLogic_TutorialStringData_o *)sub_B170CC(BattleLogic_TutorialStringData_TypeInfo, v92, v93, v94, v95);
  v135.fields.y = 24.0;
  v135.fields.x = 0.0;
  v97 = v96;
  BattleLogic_TutorialStringData___ctor(v96, 0.0, v135, 30, 0LL);
  if ( v97 )
  {
    v41 = sub_B170BC(v97, v61->obj.klass->_1.element_class);
    if ( !v41 )
      goto LABEL_47;
  }
  if ( v61->max_length <= 5 )
    goto LABEL_46;
  v61->m_Items[5] = v97;
  sub_B16F98(&v61->m_Items[5], v97);
  v102 = (BattleLogic_TutorialStringData_o *)sub_B170CC(BattleLogic_TutorialStringData_TypeInfo, v98, v99, v100, v101);
  v136.fields.y = 24.0;
  v136.fields.x = 0.0;
  v103 = v102;
  BattleLogic_TutorialStringData___ctor(v102, 0.0, v136, 30, 0LL);
  if ( v103 )
  {
    v41 = sub_B170BC(v103, v61->obj.klass->_1.element_class);
    if ( !v41 )
      goto LABEL_47;
  }
  if ( v61->max_length <= 6 )
    goto LABEL_46;
  v61->m_Items[6] = v103;
  sub_B16F98(&v61->m_Items[6], v103);
  v108 = (BattleLogic_TutorialStringData_o *)sub_B170CC(BattleLogic_TutorialStringData_TypeInfo, v104, v105, v106, v107);
  v137.fields.y = 24.0;
  v137.fields.x = 0.0;
  v109 = v108;
  BattleLogic_TutorialStringData___ctor(v108, 0.0, v137, 26, 0LL);
  if ( v109 )
  {
    v41 = sub_B170BC(v109, v61->obj.klass->_1.element_class);
    if ( !v41 )
      goto LABEL_47;
  }
  if ( v61->max_length <= 7 )
    goto LABEL_46;
  v61->m_Items[7] = v109;
  sub_B16F98(&v61->m_Items[7], v109);
  v114 = (BattleLogic_TutorialStringData_o *)sub_B170CC(BattleLogic_TutorialStringData_TypeInfo, v110, v111, v112, v113);
  v138.fields.x = 160.0;
  v138.fields.y = 80.0;
  v115 = v114;
  BattleLogic_TutorialStringData___ctor(v114, 0.0, v138, 26, 0LL);
  if ( v115 )
  {
    v41 = sub_B170BC(v115, v61->obj.klass->_1.element_class);
    if ( !v41 )
      goto LABEL_47;
  }
  if ( v61->max_length <= 8 )
    goto LABEL_46;
  v61->m_Items[8] = v115;
  sub_B16F98(&v61->m_Items[8], v115);
  v120 = (BattleLogic_TutorialStringData_o *)sub_B170CC(BattleLogic_TutorialStringData_TypeInfo, v116, v117, v118, v119);
  v139.fields.y = 24.0;
  v139.fields.x = 0.0;
  v121 = v120;
  BattleLogic_TutorialStringData___ctor(v120, 0.0, v139, 28, 0LL);
  if ( v121 )
  {
    v41 = sub_B170BC(v121, v61->obj.klass->_1.element_class);
    if ( !v41 )
      goto LABEL_47;
  }
  if ( v61->max_length <= 9 )
    goto LABEL_46;
  v61->m_Items[9] = v121;
  sub_B16F98(&v61->m_Items[9], v121);
  v126 = (BattleLogic_TutorialStringData_o *)sub_B170CC(BattleLogic_TutorialStringData_TypeInfo, v122, v123, v124, v125);
  v140.fields.y = -40.0;
  v140.fields.x = 0.0;
  v127 = v126;
  BattleLogic_TutorialStringData___ctor(v126, 0.0, v140, 26, 0LL);
  if ( v127 )
  {
    v41 = sub_B170BC(v127, v61->obj.klass->_1.element_class);
    if ( !v41 )
    {
LABEL_47:
      sub_B170F4();
      sub_B170A0();
    }
  }
  if ( v61->max_length <= 0xA )
  {
LABEL_46:
    sub_B17100(v41, v44, v42);
    sub_B170A0();
  }
  v61->m_Items[10] = v127;
  sub_B16F98(&v61->m_Items[10], v127);
  this->fields.TSD = v61;
  sub_B16F98(&this->fields.TSD, v61);
  BaseMonoBehaviour___ctor((BaseMonoBehaviour_o *)this, 0LL);
}


void __fastcall BattleLogic__AddBattleLogicTask(
        BattleLogic_o *this,
        BattleLogicTask_o *addTask,
        const MethodInfo *method)
{
  struct System_Collections_Generic_LinkedList_BattleLogicTask__o *list_logic; // x0

  if ( (byte_40F7381 & 1) == 0 )
  {
    sub_B16FFC(&Method_System_Collections_Generic_LinkedList_BattleLogicTask__AddLast__, addTask);
    byte_40F7381 = 1;
  }
  if ( addTask )
  {
    list_logic = this->fields.list_logic;
    if ( !list_logic )
      sub_B170D4();
    System_Collections_Generic_LinkedList_WebOperation___AddLast(
      (System_Collections_Generic_LinkedList_WebOperation__o *)list_logic,
      (System_Net_WebOperation_o *)addTask,
      (const MethodInfo_23FD6D4 *)Method_System_Collections_Generic_LinkedList_BattleLogicTask__AddLast__);
  }
}


void __fastcall BattleLogic__AddUnExecutedUpdateIntervalBuffActionData(BattleLogic_o *this, const MethodInfo *method)
{
  __int64 v2; // x2
  __int64 v3; // x3
  __int64 v4; // x4
  __int64 v6; // x1
  __int64 v7; // x1
  __int64 v8; // x1
  __int64 v9; // x1
  __int64 v10; // x1
  System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData__o *v11; // x20
  const MethodInfo *v12; // x3
  BattlePerformance_o *perf; // x20
  BattleActionData_o *v14; // x1
  System_Collections_Generic_List_Enumerator_T__o v15; // [xsp+8h] [xbp-38h] BYREF

  if ( (byte_40F7400 & 1) == 0 )
  {
    sub_B16FFC(&Method_System_Collections_Generic_List_Enumerator_BattleLogicTask__Dispose__, method);
    sub_B16FFC(&Method_System_Collections_Generic_List_Enumerator_BattleLogicTask__MoveNext__, v6);
    sub_B16FFC(&Method_System_Collections_Generic_List_Enumerator_BattleLogicTask__get_Current__, v7);
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleLogicTask__GetEnumerator__, v8);
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleLogicTask___ctor__, v9);
    sub_B16FFC(&System_Collections_Generic_List_BattleLogicTask__TypeInfo, v10);
    byte_40F7400 = 1;
  }
  memset(&v15, 0, sizeof(v15));
  v11 = (System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData__o *)sub_B170CC(
                                                                                                  System_Collections_Generic_List_BattleLogicTask__TypeInfo,
                                                                                                  method,
                                                                                                  v2,
                                                                                                  v3,
                                                                                                  v4);
  System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData____ctor(
    v11,
    (const MethodInfo_2F25014 *)Method_System_Collections_Generic_List_BattleLogicTask___ctor__);
  BattleLogic__AddUnExecutedUpdateIntervalBuffTasks(
    this,
    (System_Collections_Generic_List_BattleLogicTask__o *)v11,
    0,
    v12);
  if ( !v11 )
    sub_B170D4();
  System_Collections_Generic_List_BattleLogicBuff_ReduceHpProcess_BuffInfo___GetEnumerator(
    &v15,
    (System_Collections_Generic_List_BattleLogicBuff_ReduceHpProcess_BuffInfo__o *)v11,
    (const MethodInfo_2F26B54 *)Method_System_Collections_Generic_List_BattleLogicTask__GetEnumerator__);
  while ( System_Collections_Generic_List_Enumerator_BattleLogicBuff_ReduceHpProcess_BuffInfo___MoveNext(
            &v15,
            (const MethodInfo_2074054 *)Method_System_Collections_Generic_List_Enumerator_BattleLogicTask__MoveNext__) )
  {
    if ( !v15.fields.current )
      sub_B170D4();
    perf = this->fields.perf;
    v14 = (BattleActionData_o *)((__int64 (*)(void))v15.fields.current->klass->vtable[6].method)();
    if ( !perf )
      sub_B170D4();
    BattlePerformance__addActionData_18918748(perf, v14, 0LL);
  }
  System_Collections_Generic_List_Enumerator_BattleLogicBuff_ReduceHpProcess_BuffInfo___Dispose(
    &v15,
    (const MethodInfo_2074050 *)Method_System_Collections_Generic_List_Enumerator_BattleLogicTask__Dispose__);
}


// local variable allocation has failed, the output may be wrong!
void __fastcall BattleLogic__AddUnExecutedUpdateIntervalBuffTasks(
        BattleLogic_o *this,
        System_Collections_Generic_List_BattleLogicTask__o *taskList,
        bool isAddFirst,
        const MethodInfo *method)
{
  __int64 v4; // x4
  __int64 v8; // x1
  __int64 v9; // x1
  __int64 v10; // x1
  BattleActionData_o *v11; // x22
  __int64 v12; // x1
  __int64 v13; // x2
  __int64 v14; // x3
  __int64 v15; // x4
  UpdateIntervalBuffViewBattleLogicTask_o *v16; // x21

  if ( (byte_40F73FF & 1) == 0 )
  {
    sub_B16FFC(&BattleActionData_TypeInfo, taskList);
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleLogicTask__Add__, v8);
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleLogicTask__Insert__, v9);
    sub_B16FFC(&UpdateIntervalBuffViewBattleLogicTask_TypeInfo, v10);
    byte_40F73FF = 1;
  }
  v11 = (BattleActionData_o *)sub_B170CC(BattleActionData_TypeInfo, taskList, isAddFirst, method, v4);
  BattleActionData___ctor(v11, 0LL);
  if ( !v11 )
    goto LABEL_10;
  if ( !BattleActionData__AddFieldServantUpdateIntervalBuff(v11, this->fields.data, 0LL) )
    return;
  v16 = (UpdateIntervalBuffViewBattleLogicTask_o *)sub_B170CC(
                                                     UpdateIntervalBuffViewBattleLogicTask_TypeInfo,
                                                     v12,
                                                     v13,
                                                     v14,
                                                     v15);
  UpdateIntervalBuffViewBattleLogicTask___ctor(v16, v11, 0LL);
  if ( !taskList )
LABEL_10:
    sub_B170D4();
  if ( isAddFirst )
    System_Collections_Generic_List_XWeaponTrail_Element___Insert(
      (System_Collections_Generic_List_XWeaponTrail_Element__o *)taskList,
      0,
      (XWeaponTrail_Element_o *)v16,
      (const MethodInfo_2F26EEC *)Method_System_Collections_Generic_List_BattleLogicTask__Insert__);
  else
    System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData___Add(
      (System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData__o *)taskList,
      (EventMissionProgressRequest_Argument_ProgressData_o *)v16,
      (const MethodInfo_2F25CD8 *)Method_System_Collections_Generic_List_BattleLogicTask__Add__);
}


// local variable allocation has failed, the output may be wrong!
void __fastcall BattleLogic__CalcCritical(BattleLogic_o *this, bool isRefresh, const MethodInfo *method)
{
  __int64 v3; // x3
  __int64 v4; // x4
  __int64 v7; // x1
  __int64 v8; // x1
  __int64 v9; // x1
  __int64 v10; // x1
  __int64 v11; // x1
  __int64 v12; // x1
  __int64 v13; // x1
  __int64 v14; // x1
  __int64 v15; // x1
  __int64 v16; // x1
  __int64 v17; // x1
  __int64 v18; // x1
  __int64 v19; // x1
  __int64 v20; // x1
  System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData__o *v21; // x20
  __int64 v22; // x1
  __int64 v23; // x2
  __int64 v24; // x3
  __int64 v25; // x4
  WeightRate_int__o *v26; // x21
  __int64 v27; // x2
  BattleCommandData_o **v28; // x22
  BattleLogic_c *v29; // x8
  System_Int32_array *Shuffle_int; // x0
  __int64 v31; // x1
  __int64 v32; // x2
  struct BattleData_o *data; // x8
  __int64 v34; // x25
  BattleCommandData_o **v35; // x26
  struct BattleCommandData_array *draw_commandlist; // x8
  BattleCommandData_o *v37; // x27
  BattleData_o *v38; // x0
  BattleServantData_o *ServantData; // x0
  BattleServantData_o *v40; // x28
  int32_t type; // w0
  BattleBuffData_o *buffData; // x0
  BattleBuffData_o *v43; // x0
  BattleBuffData_o *v44; // x0
  int32_t v45; // w1
  int32_t OverCriticalStars; // w0
  struct BattleData_o *v47; // x8
  int32_t v48; // w0
  struct BattleData_o *v49; // x8
  struct BattlePerformance_o *perf; // x9
  int criticalstars; // w23
  int32_t v52; // w24
  BattleData_o *v53; // x0
  BattleData_o *v54; // x0
  BattleData_o *v55; // x0
  struct BattleData_o *v56; // x0
  BattleData_o *v57; // x0
  BattleData_o *v58; // x0
  int32_t v59; // w24
  BattleData_o *v60; // x0
  BattleData_o *v61; // x0
  BattleData_o *v62; // x0
  int v63; // w26
  int32_t Random; // w0
  unsigned int v65; // w24
  BattleCommandData_o **v66; // x28
  BattleCommandData_o *v67; // x25
  BattleCommandData_o **v68; // x28
  BattleCommandData_o *v69; // t1
  int32_t Value; // w0
  BattlePerformance_o *v71; // x0
  BattlePerformance_o *v72; // x0
  int32_t *v73; // [xsp+0h] [xbp-60h]
  System_Int32_array *v74; // [xsp+8h] [xbp-58h]

  if ( (byte_40F73AB & 1) == 0 )
  {
    sub_B16FFC(&BattleCommandData___TypeInfo, isRefresh);
    sub_B16FFC(&BattleLogic_TypeInfo, v7);
    sub_B16FFC(&Method_BattleRandom_getShuffle_int___, v8);
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleCommandData__Add__, v9);
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleCommandData___ctor__, v10);
    sub_B16FFC(&System_Collections_Generic_List_BattleCommandData__TypeInfo, v11);
    sub_B16FFC(&Method_WeightRate_int__SetAdjust__, v12);
    sub_B16FFC(&Method_WeightRate_int___ctor__, v13);
    sub_B16FFC(&Method_WeightRate_int__checkWeight__, v14);
    sub_B16FFC(&Method_WeightRate_int__getData__, v15);
    sub_B16FFC(&Method_WeightRate_int__getTotalWeight__, v16);
    sub_B16FFC(&Method_WeightRate_int__removeWeight__, v17);
    sub_B16FFC(&Method_WeightRate_int__setWeight__, v18);
    sub_B16FFC(&WeightRate_int__TypeInfo, v19);
    sub_B16FFC(&StringLiteral_3427, v20);
    byte_40F73AB = 1;
  }
  v21 = (System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData__o *)sub_B170CC(
                                                                                                  System_Collections_Generic_List_BattleCommandData__TypeInfo,
                                                                                                  isRefresh,
                                                                                                  method,
                                                                                                  v3,
                                                                                                  v4);
  System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData____ctor(
    v21,
    (const MethodInfo_2F25014 *)Method_System_Collections_Generic_List_BattleCommandData___ctor__);
  v26 = (WeightRate_int__o *)sub_B170CC(WeightRate_int__TypeInfo, v22, v23, v24, v25);
  WeightRate_int____ctor(v26, (const MethodInfo_2ADD274 *)Method_WeightRate_int___ctor__);
  v28 = (BattleCommandData_o **)sub_B17014(BattleCommandData___TypeInfo, 5LL, v27);
  v29 = BattleLogic_TypeInfo;
  if ( (BYTE3(BattleLogic_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0 && !BattleLogic_TypeInfo->_2.cctor_finished )
  {
    j_il2cpp_runtime_class_init_0(BattleLogic_TypeInfo);
    v29 = BattleLogic_TypeInfo;
  }
  Shuffle_int = BattleRandom__getShuffle_int_(
                  v29->static_fields->addStarWeight,
                  (const MethodInfo_18BA0D4 *)Method_BattleRandom_getShuffle_int___);
  data = this->fields.data;
  v74 = Shuffle_int;
  if ( !data )
    goto LABEL_75;
  v34 = 0LL;
  v35 = v28 + 4;
  v73 = &Shuffle_int->m_Items[1];
  while ( (unsigned int)v34 < 5 )
  {
    draw_commandlist = data->fields.draw_commandlist;
    if ( !draw_commandlist )
      goto LABEL_75;
    if ( (unsigned int)v34 >= draw_commandlist->max_length )
      goto LABEL_76;
    if ( !v21 )
      goto LABEL_75;
    v37 = draw_commandlist->m_Items[v34];
    System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData___Add(
      v21,
      (EventMissionProgressRequest_Argument_ProgressData_o *)v37,
      (const MethodInfo_2F25CD8 *)Method_System_Collections_Generic_List_BattleCommandData__Add__);
    if ( isRefresh )
    {
      if ( !v37 )
        goto LABEL_75;
      *(_QWORD *)&v37->fields.starBonus = 0LL;
    }
    else if ( !v37 )
    {
      goto LABEL_75;
    }
    Shuffle_int = (System_Int32_array *)BattleCommandData__checkCriticalMax(v37, 0LL);
    if ( ((unsigned __int8)Shuffle_int & 1) == 0 )
    {
      v38 = this->fields.data;
      if ( !v38 )
        goto LABEL_75;
      ServantData = BattleData__getServantData(v38, v37->fields.uniqueId, 0LL);
      if ( ServantData )
      {
        v40 = ServantData;
        type = BattleCommandData__get_type(v37, 0LL);
        if ( !BattleCommand__isBLANK(type, 0LL) )
        {
          buffData = v40->fields.buffData;
          if ( !buffData )
            goto LABEL_75;
          BattleBuffData__SetCommandCodeBuffActiveFlg(buffData, v37->fields.userCommandCodeId, 0LL, 0, 0LL);
          v43 = v40->fields.buffData;
          if ( !v43 )
            goto LABEL_75;
          BattleBuffData__SetCommandAssistBuffActiveFlg(
            v43,
            v37->fields.commandAssistId,
            0LL,
            0,
            v37->fields.servantCardIdsIndex,
            0LL);
          v44 = v40->fields.buffData;
          if ( !v44 )
            goto LABEL_75;
          BattleBuffData__SetCommandCardBuffActive(v44, v37, 0, 0LL);
          Shuffle_int = (System_Int32_array *)BattleServantData__getCriticalWeight(v40, v37, 0LL);
          if ( !v74 )
            goto LABEL_75;
          if ( (unsigned int)v34 >= v74->max_length )
            goto LABEL_76;
          if ( !v26 )
            goto LABEL_75;
          if ( v73[v34] + (int)Shuffle_int <= 1 )
            v45 = 1;
          else
            v45 = v73[v34] + (_DWORD)Shuffle_int;
          WeightRate_int___setWeight(v26, v45, v34, (const MethodInfo_2ADC43C *)Method_WeightRate_int__setWeight__);
        }
      }
      if ( !v28 )
        goto LABEL_75;
      Shuffle_int = (System_Int32_array *)sub_B170BC(v37, *(_QWORD *)&(*v28)->fields.passStarCount);
      if ( !Shuffle_int )
      {
        sub_B170F4();
        sub_B170A0();
      }
      if ( (unsigned int)v34 >= *((_DWORD *)v28 + 6) )
      {
LABEL_76:
        sub_B17100(Shuffle_int, v31, v32);
        sub_B170A0();
      }
      *v35 = v37;
      sub_B16F98(v35, v37);
    }
    data = this->fields.data;
    ++v35;
    ++v34;
    if ( !data )
      goto LABEL_75;
  }
  OverCriticalStars = BattleData__getOverCriticalStars(data, 0LL);
  v47 = this->fields.data;
  if ( !v47 )
    goto LABEL_75;
  if ( isRefresh )
  {
    v48 = BattleData__getOverCriticalStars(this->fields.data, 0LL);
    v49 = this->fields.data;
    if ( !v49 )
      goto LABEL_75;
    perf = this->fields.perf;
    if ( !perf )
      goto LABEL_75;
    criticalstars = v49->fields.criticalstars;
    v52 = v48;
    perf->fields.isCriticalPerformance = criticalstars > 0;
    v53 = this->fields.data;
    if ( !v53 )
      goto LABEL_75;
    if ( v52 >= 1 )
    {
      if ( BattleData__isValidViewStarMax(v53, 0LL) )
      {
        v54 = this->fields.data;
        if ( !v54 )
          goto LABEL_75;
        criticalstars = BattleData__getValidStarMax(v54, 0LL);
      }
      v55 = this->fields.data;
      if ( v55 )
      {
        BattleData__setCriticalStar(v55, v52, 0LL);
        v56 = this->fields.data;
        if ( v56 )
        {
          BattleData__addTotalCriticalStars(v56, v56->fields.addCriticalstars, 0LL);
          v57 = this->fields.data;
          if ( v57 )
          {
            BattleData__resetAddCriticalstars(v57, 0LL);
            v58 = this->fields.data;
            if ( v58 )
            {
              BattleData__resetSubCriticalstars(v58, 0LL);
              goto LABEL_58;
            }
          }
        }
      }
LABEL_75:
      sub_B170D4();
    }
    BattleData__resetCriticalPoint(v53, 0LL);
  }
  else
  {
    criticalstars = v47->fields.addCriticalstars;
    v59 = OverCriticalStars;
    if ( OverCriticalStars < 1 )
    {
      BattleData__setCriticalStar(this->fields.data, v47->fields.criticalstars - criticalstars, 0LL);
      v61 = this->fields.data;
      if ( !v61 )
        goto LABEL_75;
      BattleData__addTotalCriticalStars(v61, criticalstars, 0LL);
    }
    else
    {
      BattleData__addTotalCriticalStars(this->fields.data, criticalstars, 0LL);
      v60 = this->fields.data;
      if ( !v60 )
        goto LABEL_75;
      criticalstars -= v59;
      BattleData__setCriticalStar(v60, v59, 0LL);
    }
    v62 = this->fields.data;
    if ( !v62 )
      goto LABEL_75;
    BattleData__resetAddCriticalstars(v62, 0LL);
  }
LABEL_58:
  if ( criticalstars >= 1 )
  {
    if ( v26 )
    {
      v63 = 0;
      while ( 1 )
      {
        if ( WeightRate_int___checkWeight(v26, (const MethodInfo_2ADC7CC *)Method_WeightRate_int__checkWeight__) )
        {
          Random = BattleRandom__getRandom(0, v26->fields.totalweight, 0LL);
          Shuffle_int = (System_Int32_array *)WeightRate_int___getData(
                                                v26,
                                                Random,
                                                (const MethodInfo_2ADC8C0 *)Method_WeightRate_int__getData__);
          if ( !v28 )
            goto LABEL_75;
          v65 = (unsigned int)Shuffle_int;
          if ( (unsigned int)Shuffle_int >= *((_DWORD *)v28 + 6) )
            goto LABEL_76;
          v66 = &v28[(int)Shuffle_int];
          v69 = v66[4];
          v68 = v66 + 4;
          v67 = v69;
          Value = ConstantMaster__getValue((System_String_o *)StringLiteral_3427, 0LL);
          if ( !v69 )
            goto LABEL_75;
          BattleCommandData__addCriticalPoint(v67, Value, 1, 0LL);
          if ( v65 >= *((_DWORD *)v28 + 6) )
            goto LABEL_76;
          if ( !*v68 )
            goto LABEL_75;
          if ( BattleCommandData__checkCriticalMax(*v68, 0LL) )
            WeightRate_int___removeWeight(v26, v65, (const MethodInfo_2ADC558 *)Method_WeightRate_int__removeWeight__);
          if ( !WeightRate_int___checkWeight(v26, (const MethodInfo_2ADC7CC *)Method_WeightRate_int__checkWeight__) )
            WeightRate_int___SetAdjust(v26, (const MethodInfo_2ADC7FC *)Method_WeightRate_int__SetAdjust__);
        }
        if ( ++v63 >= criticalstars )
          goto LABEL_72;
      }
    }
    goto LABEL_75;
  }
LABEL_72:
  v71 = this->fields.perf;
  if ( !v71 )
    goto LABEL_75;
  BattlePerformance__SaveCriticalValue(v71, (System_Collections_Generic_List_BattleCommandData__o *)v21, 0LL);
  v72 = this->fields.perf;
  if ( !v72 )
    goto LABEL_75;
  BattlePerformance__SetBaseCommandCardData(v72, (System_Collections_Generic_List_BattleCommandData__o *)v21, 0LL);
}


void __fastcall BattleLogic__CalcDownCritical(BattleLogic_o *this, const MethodInfo *method)
{
  __int64 v2; // x2
  __int64 v3; // x3
  __int64 v4; // x4
  __int64 v6; // x1
  __int64 v7; // x1
  __int64 v8; // x1
  __int64 v9; // x1
  __int64 v10; // x1
  __int64 v11; // x1
  __int64 v12; // x1
  __int64 v13; // x1
  __int64 v14; // x1
  __int64 v15; // x1
  __int64 v16; // x1
  __int64 v17; // x1
  __int64 v18; // x1
  __int64 v19; // x1
  __int64 v20; // x1
  __int64 v21; // x1
  System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData__o *v22; // x20
  __int64 v23; // x1
  __int64 v24; // x2
  __int64 v25; // x3
  __int64 v26; // x4
  WeightRate_int__o *v27; // x21
  __int64 v28; // x1
  __int64 v29; // x2
  __int64 v30; // x3
  __int64 v31; // x4
  System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData__o *v32; // x22
  BattlePerformance_o *perf; // x0
  BattleCommandData_array *BaseCommandCardData; // x23
  BattleLogic_c *v35; // x8
  System_Int32_array *Shuffle_int; // x0
  __int64 v37; // x1
  __int64 v38; // x2
  int32_t *v39; // x27
  EventMissionProgressRequest_Argument_ProgressData_o **m_Items; // x28
  unsigned int v41; // w24
  BattleCommandData_o *v42; // x25
  BattleData_o *data; // x0
  BattleServantData_o *ServantData; // x0
  BattleServantData_o *v45; // x26
  int32_t type; // w0
  BattleBuffData_o *buffData; // x0
  BattleBuffData_o *v48; // x0
  BattleBuffData_o *v49; // x0
  int32_t v50; // w19
  int v51; // w26
  int32_t v52; // w0
  BattleLogic_o *v53; // x24
  BattleData_o *v54; // x0
  int v55; // w19
  int32_t Random; // w0
  int32_t v57; // w0
  int32_t v58; // w23
  BattleCommandData_o *v59; // x24
  int32_t Value; // w0
  BattleCommandData_o *v61; // x0
  BattlePerformance_o *v62; // x0
  BattlePerformance_o *v63; // x0
  System_Int32_array *v64; // [xsp+0h] [xbp-60h]
  BattleLogic_o *v65; // [xsp+8h] [xbp-58h]

  if ( (byte_40F73AA & 1) == 0 )
  {
    sub_B16FFC(&BattleLogic_TypeInfo, method);
    sub_B16FFC(&Method_BattleRandom_getShuffle_int___, v6);
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleCommandData__Add__, v7);
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleCommandData__IndexOf__, v8);
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleCommandData___ctor__, v9);
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleCommandData__get_Item__, v10);
    sub_B16FFC(&System_Collections_Generic_List_BattleCommandData__TypeInfo, v11);
    sub_B16FFC(&Method_WeightRate_int__ReverseWeight__, v12);
    sub_B16FFC(&Method_WeightRate_int__SetAdjust__, v13);
    sub_B16FFC(&Method_WeightRate_int___ctor__, v14);
    sub_B16FFC(&Method_WeightRate_int__checkWeight__, v15);
    sub_B16FFC(&Method_WeightRate_int__getData__, v16);
    sub_B16FFC(&Method_WeightRate_int__getTotalWeight__, v17);
    sub_B16FFC(&Method_WeightRate_int__removeWeight__, v18);
    sub_B16FFC(&Method_WeightRate_int__setWeight__, v19);
    sub_B16FFC(&WeightRate_int__TypeInfo, v20);
    sub_B16FFC(&StringLiteral_3427, v21);
    byte_40F73AA = 1;
  }
  v22 = (System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData__o *)sub_B170CC(
                                                                                                  System_Collections_Generic_List_BattleCommandData__TypeInfo,
                                                                                                  method,
                                                                                                  v2,
                                                                                                  v3,
                                                                                                  v4);
  System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData____ctor(
    v22,
    (const MethodInfo_2F25014 *)Method_System_Collections_Generic_List_BattleCommandData___ctor__);
  v27 = (WeightRate_int__o *)sub_B170CC(WeightRate_int__TypeInfo, v23, v24, v25, v26);
  WeightRate_int____ctor(v27, (const MethodInfo_2ADD274 *)Method_WeightRate_int___ctor__);
  v32 = (System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData__o *)sub_B170CC(
                                                                                                  System_Collections_Generic_List_BattleCommandData__TypeInfo,
                                                                                                  v28,
                                                                                                  v29,
                                                                                                  v30,
                                                                                                  v31);
  System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData____ctor(
    v32,
    (const MethodInfo_2F25014 *)Method_System_Collections_Generic_List_BattleCommandData___ctor__);
  perf = this->fields.perf;
  if ( !perf )
    goto LABEL_42;
  BaseCommandCardData = BattlePerformance__GetBaseCommandCardData(perf, 0LL);
  v35 = BattleLogic_TypeInfo;
  if ( (BYTE3(BattleLogic_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0 && !BattleLogic_TypeInfo->_2.cctor_finished )
  {
    j_il2cpp_runtime_class_init_0(BattleLogic_TypeInfo);
    v35 = BattleLogic_TypeInfo;
  }
  v65 = this;
  Shuffle_int = BattleRandom__getShuffle_int_(
                  v35->static_fields->addStarWeight,
                  (const MethodInfo_18BA0D4 *)Method_BattleRandom_getShuffle_int___);
  if ( !BaseCommandCardData )
    goto LABEL_42;
  v39 = &Shuffle_int->m_Items[1];
  m_Items = (EventMissionProgressRequest_Argument_ProgressData_o **)BaseCommandCardData->m_Items;
  v41 = -1;
  v64 = Shuffle_int;
  do
  {
    if ( v41 + 1 >= BaseCommandCardData->max_length )
    {
LABEL_46:
      sub_B17100(Shuffle_int, v37, v38);
      sub_B170A0();
    }
    if ( !v22 )
      goto LABEL_42;
    v42 = (BattleCommandData_o *)*m_Items;
    System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData___Add(
      v22,
      *m_Items,
      (const MethodInfo_2F25CD8 *)Method_System_Collections_Generic_List_BattleCommandData__Add__);
    if ( !v42 )
      goto LABEL_42;
    Shuffle_int = (System_Int32_array *)BattleCommandData__checkCriticalZero(v42, 0LL);
    if ( ((unsigned __int8)Shuffle_int & 1) == 0 )
    {
      data = v65->fields.data;
      if ( !data )
        goto LABEL_42;
      ServantData = BattleData__getServantData(data, v42->fields.uniqueId, 0LL);
      if ( !v32 )
        goto LABEL_42;
      v45 = ServantData;
      System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData___Add(
        v32,
        (EventMissionProgressRequest_Argument_ProgressData_o *)v42,
        (const MethodInfo_2F25CD8 *)Method_System_Collections_Generic_List_BattleCommandData__Add__);
      if ( v45 )
      {
        type = BattleCommandData__get_type(v42, 0LL);
        Shuffle_int = (System_Int32_array *)BattleCommand__isBLANK(type, 0LL);
        if ( ((unsigned __int8)Shuffle_int & 1) == 0 )
        {
          buffData = v45->fields.buffData;
          if ( !buffData )
            goto LABEL_42;
          BattleBuffData__SetCommandCodeBuffActiveFlg(buffData, v42->fields.userCommandCodeId, 0LL, 0, 0LL);
          v48 = v45->fields.buffData;
          if ( !v48 )
            goto LABEL_42;
          BattleBuffData__SetCommandAssistBuffActiveFlg(
            v48,
            v42->fields.commandAssistId,
            0LL,
            0,
            v42->fields.servantCardIdsIndex,
            0LL);
          v49 = v45->fields.buffData;
          if ( !v49 )
            goto LABEL_42;
          BattleBuffData__SetCommandCardBuffActive(v49, v42, 0, 0LL);
          Shuffle_int = (System_Int32_array *)BattleServantData__getCriticalWeight(v45, v42, 0LL);
          if ( !v64 )
            goto LABEL_42;
          if ( v41 + 1 >= v64->max_length )
            goto LABEL_46;
          v50 = *v39;
          v51 = (int)Shuffle_int;
          v52 = System_Collections_Generic_List_WarBoardManager_TaskList___IndexOf(
                  (System_Collections_Generic_List_WarBoardManager_TaskList__o *)v32,
                  (WarBoardManager_TaskList_o *)v42,
                  (const MethodInfo_2F26D88 *)Method_System_Collections_Generic_List_BattleCommandData__IndexOf__);
          if ( !v27 )
            goto LABEL_42;
          WeightRate_int___setWeight(
            v27,
            v50 + v51,
            v52,
            (const MethodInfo_2ADC43C *)Method_WeightRate_int__setWeight__);
        }
      }
    }
    ++v41;
    ++v39;
    ++m_Items;
  }
  while ( v41 < 4 );
  if ( !v27 )
    goto LABEL_42;
  WeightRate_int___ReverseWeight(v27, (const MethodInfo_2ADCF08 *)Method_WeightRate_int__ReverseWeight__);
  v53 = v65;
  v54 = v65->fields.data;
  if ( !v54 )
    goto LABEL_42;
  v55 = -1;
  while ( ++v55 < v54->fields.subCriticalCount )
  {
    if ( WeightRate_int___checkWeight(v27, (const MethodInfo_2ADC7CC *)Method_WeightRate_int__checkWeight__) )
    {
      Random = BattleRandom__getRandom(0, v27->fields.totalweight, 0LL);
      v57 = WeightRate_int___getData(v27, Random, (const MethodInfo_2ADC8C0 *)Method_WeightRate_int__getData__);
      if ( !v32 )
        goto LABEL_42;
      v58 = v57;
      if ( v32->fields._size <= (unsigned int)v57 )
        System_ThrowHelper__ThrowArgumentOutOfRangeException_41329284(0LL);
      v59 = (BattleCommandData_o *)v32->fields._items->m_Items[v57];
      Value = ConstantMaster__getValue((System_String_o *)StringLiteral_3427, 0LL);
      if ( !v59 )
        goto LABEL_42;
      BattleCommandData__removeCriticalPoint(v59, Value, 0LL);
      if ( v32->fields._size <= (unsigned int)v58 )
        System_ThrowHelper__ThrowArgumentOutOfRangeException_41329284(0LL);
      v61 = (BattleCommandData_o *)v32->fields._items->m_Items[v58];
      if ( !v61 )
        goto LABEL_42;
      v53 = v65;
      if ( BattleCommandData__checkCriticalZero(v61, 0LL) )
        WeightRate_int___removeWeight(v27, v58, (const MethodInfo_2ADC558 *)Method_WeightRate_int__removeWeight__);
      if ( !WeightRate_int___checkWeight(v27, (const MethodInfo_2ADC7CC *)Method_WeightRate_int__checkWeight__) )
        WeightRate_int___SetAdjust(v27, (const MethodInfo_2ADC7FC *)Method_WeightRate_int__SetAdjust__);
    }
    v54 = v53->fields.data;
    if ( !v54 )
      goto LABEL_42;
  }
  BattleData__resetSubCriticalstars(v54, 0LL);
  v62 = v53->fields.perf;
  if ( !v62
    || (BattlePerformance__SaveCriticalValue(v62, (System_Collections_Generic_List_BattleCommandData__o *)v22, 0LL),
        (v63 = v53->fields.perf) == 0LL) )
  {
LABEL_42:
    sub_B170D4();
  }
  BattlePerformance__SetBaseCommandCardData(v63, (System_Collections_Generic_List_BattleCommandData__o *)v22, 0LL);
}


void __fastcall BattleLogic__ChangePhase(BattleLogic_o *this, int32_t phase, const MethodInfo *method)
{
  struct BattleData_o *data; // x8
  ChangeBattlePhaseNotify_o *changePhaseNotify; // x0

  data = this->fields.data;
  if ( !data || (changePhaseNotify = data->fields.changePhaseNotify) == 0LL )
    sub_B170D4();
  ChangeBattlePhaseNotify__set_Phase(changePhaseNotify, phase, 0LL);
}


void __fastcall BattleLogic__CheckAssistSkill(BattleLogic_o *this, const MethodInfo *method)
{
  System_Collections_IEnumerator_o *v3; // x1

  v3 = BattleLogic__CoroutineCheckAssistSkill(this, method);
  UnityEngine_MonoBehaviour__StartCoroutine_34804316((UnityEngine_MonoBehaviour_o *)this, v3, 0LL);
}


void __fastcall BattleLogic__CheckBoostSkill(BattleLogic_o *this, const MethodInfo *method)
{
  __int64 v3; // x1
  __int64 v4; // x1
  __int64 v5; // x1
  __int64 v6; // x1
  __int64 v7; // x1
  __int64 v8; // x1
  __int64 v9; // x1
  __int64 v10; // x1
  __int64 v11; // x1
  __int64 v12; // x1
  BattleData_o *data; // x0
  BattleData_o *v14; // x0
  __int64 v15; // x1
  __int64 v16; // x2
  __int64 v17; // x3
  __int64 v18; // x4
  System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData__o *v19; // x20
  BattleData_o *v20; // x0
  struct BattleData_o *v21; // x8
  System_Collections_Generic_List_BattleLogicBuff_ReduceHpProcess_BuffInfo__o *boostInfoList; // x0
  Il2CppObject *current; // x21
  BattleData_o *v24; // x0
  BattleServantData_array *FieldPlayerServantList; // x0
  __int64 v26; // x1
  __int64 v27; // x2
  BattleServantData_array *v28; // x22
  int max_length; // w8
  unsigned int v30; // w28
  Il2CppClass **v31; // x8
  Il2CppClass *v32; // x23
  BattleLogicSkill_o *logicSkill; // x22
  System_Int32_array *v34; // x0
  __int64 v35; // x1
  System_Collections_Generic_IEnumerable_T__o *v36; // x1
  BattleLogicTask_array *v37; // x0
  const MethodInfo *v38; // x3
  System_Collections_IEnumerator_o *v39; // x0
  PlayMakerFSM_o *fsm; // x0
  System_Collections_Generic_List_Enumerator_T__o v41; // [xsp+8h] [xbp-88h] BYREF
  System_Collections_Generic_List_Enumerator_T__o v42; // [xsp+20h] [xbp-70h] BYREF

  if ( (byte_40F73B6 & 1) == 0 )
  {
    sub_B16FFC(&Method_System_Collections_Generic_List_Enumerator_BattleSkillInfoData__Dispose__, method);
    sub_B16FFC(&Method_System_Collections_Generic_List_Enumerator_BattleSkillInfoData__MoveNext__, v3);
    sub_B16FFC(&Method_System_Collections_Generic_List_Enumerator_BattleSkillInfoData__get_Current__, v4);
    sub_B16FFC(&int___TypeInfo, v5);
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleLogicTask__AddRange__, v6);
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleSkillInfoData__GetEnumerator__, v7);
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleLogicTask__ToArray__, v8);
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleLogicTask___ctor__, v9);
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleLogicTask__get_Count__, v10);
    sub_B16FFC(&System_Collections_Generic_List_BattleLogicTask__TypeInfo, v11);
    sub_B16FFC(&StringLiteral_12204, v12);
    byte_40F73B6 = 1;
  }
  memset(&v42, 0, sizeof(v42));
  data = this->fields.data;
  if ( !data )
    goto LABEL_39;
  if ( !BattleData__checkProgressflg(data, 256, 0LL) )
    goto LABEL_31;
  v14 = this->fields.data;
  if ( !v14 )
    goto LABEL_39;
  BattleData__offProgressflg(v14, 256, 0LL);
  v19 = (System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData__o *)sub_B170CC(
                                                                                                  System_Collections_Generic_List_BattleLogicTask__TypeInfo,
                                                                                                  v15,
                                                                                                  v16,
                                                                                                  v17,
                                                                                                  v18);
  System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData____ctor(
    v19,
    (const MethodInfo_2F25014 *)Method_System_Collections_Generic_List_BattleLogicTask___ctor__);
  v20 = this->fields.data;
  if ( !v20 )
    goto LABEL_39;
  if ( BattleData__isFirstStage(v20, 0LL) )
  {
    v21 = this->fields.data;
    if ( v21 )
    {
      boostInfoList = (System_Collections_Generic_List_BattleLogicBuff_ReduceHpProcess_BuffInfo__o *)v21->fields.boostInfoList;
      if ( boostInfoList )
      {
        System_Collections_Generic_List_BattleLogicBuff_ReduceHpProcess_BuffInfo___GetEnumerator(
          &v41,
          boostInfoList,
          (const MethodInfo_2F26B54 *)Method_System_Collections_Generic_List_BattleSkillInfoData__GetEnumerator__);
        v42 = v41;
LABEL_11:
        while ( System_Collections_Generic_List_Enumerator_BattleLogicBuff_ReduceHpProcess_BuffInfo___MoveNext(
                  &v42,
                  (const MethodInfo_2074054 *)Method_System_Collections_Generic_List_Enumerator_BattleSkillInfoData__MoveNext__) )
        {
          current = v42.fields.current;
          if ( !v42.fields.current )
            sub_B170D4();
          LODWORD(v42.fields.current[1].monitor) = -1;
          v24 = this->fields.data;
          if ( !v24 )
            sub_B170D4();
          FieldPlayerServantList = BattleData__getFieldPlayerServantList(v24, 0LL);
          v28 = FieldPlayerServantList;
          if ( !FieldPlayerServantList )
            sub_B170D4();
          max_length = FieldPlayerServantList->max_length;
          if ( max_length >= 1 )
          {
            v30 = 0;
            while ( 1 )
            {
              if ( v30 >= max_length )
              {
                sub_B17100(FieldPlayerServantList, v26, v27);
                sub_B170A0();
              }
              v31 = &v28->obj.klass + (int)v30;
              v32 = v31[4];
              if ( !v32 )
                sub_B170D4();
              FieldPlayerServantList = (BattleServantData_array *)BattleServantData__isAlive(
                                                                    (BattleServantData_o *)v31[4],
                                                                    0,
                                                                    0LL);
              if ( ((unsigned __int8)FieldPlayerServantList & 1) != 0 )
                break;
              max_length = v28->max_length;
              if ( (int)++v30 >= max_length )
                goto LABEL_11;
            }
            logicSkill = this->fields.logicSkill;
            v34 = (System_Int32_array *)sub_B17014(int___TypeInfo, 1LL, v27);
            if ( !v34 )
              sub_B170D4();
            if ( !v34->max_length )
            {
              sub_B17100(v34, v35, v34);
              sub_B170A0();
            }
            v34->m_Items[1] = (int32_t)v32->_1.namespaze;
            if ( !logicSkill )
              sub_B170D4();
            v36 = (System_Collections_Generic_IEnumerable_T__o *)BattleLogicSkill__taskSkill(
                                                                   logicSkill,
                                                                   (BattleSkillInfoData_o *)current,
                                                                   v34,
                                                                   0LL,
                                                                   0,
                                                                   0,
                                                                   0,
                                                                   0LL);
            if ( !v19 )
              sub_B170D4();
            System_Collections_Generic_List_TimeZoneInfo_AdjustmentRule___AddRange(
              (System_Collections_Generic_List_TimeZoneInfo_AdjustmentRule__o *)v19,
              v36,
              (const MethodInfo_2F25F28 *)Method_System_Collections_Generic_List_BattleLogicTask__AddRange__);
          }
        }
        System_Collections_Generic_List_Enumerator_BattleLogicBuff_ReduceHpProcess_BuffInfo___Dispose(
          &v42,
          (const MethodInfo_2074050 *)Method_System_Collections_Generic_List_Enumerator_BattleSkillInfoData__Dispose__);
        goto LABEL_28;
      }
    }
LABEL_39:
    sub_B170D4();
  }
LABEL_28:
  if ( !v19 )
    goto LABEL_39;
  if ( v19->fields._size >= 1 )
  {
    v37 = (BattleLogicTask_array *)System_Collections_Generic_List_WarBoardUiData_SaveData___ToArray(
                                     (System_Collections_Generic_List_WarBoardUiData_SaveData__o *)v19,
                                     (const MethodInfo_2F27E24 *)Method_System_Collections_Generic_List_BattleLogicTask__ToArray__);
    v39 = BattleLogic__waitWaveStep(this, v37, 256, v38);
    UnityEngine_MonoBehaviour__StartCoroutine_34804316((UnityEngine_MonoBehaviour_o *)this, v39, 0LL);
    return;
  }
LABEL_31:
  fsm = this->fields.fsm;
  if ( !fsm )
    goto LABEL_39;
  PlayMakerFSM__SendEvent(fsm, (System_String_o *)StringLiteral_12204, 0LL);
}


// local variable allocation has failed, the output may be wrong!
bool __fastcall BattleLogic__CheckCutinFirstId(BattleLogic_o *this, int32_t cutinFirstId, const MethodInfo *method)
{
  __int64 v5; // x1
  System_Collections_Generic_List_int__o *cutinFirstIdList; // x0
  struct System_Collections_Generic_List_int__o *v7; // x0
  System_Collections_Generic_List_int__o *cutinFirstIdListThisTurn; // x0
  System_Collections_Generic_List_int__o *v10; // x0

  if ( (byte_40F737B & 1) == 0 )
  {
    sub_B16FFC(&Method_System_Collections_Generic_List_int__Add__, *(_QWORD *)&cutinFirstId);
    sub_B16FFC(&Method_System_Collections_Generic_List_int__Contains__, v5);
    byte_40F737B = 1;
  }
  cutinFirstIdList = this->fields.cutinFirstIdList;
  if ( !cutinFirstIdList )
  {
    v7 = BattleLogic__LoadCutinFirstIdList(0LL, *(const MethodInfo **)&cutinFirstId);
    this->fields.cutinFirstIdList = v7;
    sub_B16F98(&this->fields.cutinFirstIdList, v7);
    cutinFirstIdList = this->fields.cutinFirstIdList;
    if ( !cutinFirstIdList )
      goto LABEL_12;
  }
  if ( System_Collections_Generic_List_int___Contains(
         cutinFirstIdList,
         cutinFirstId,
         (const MethodInfo_2F10944 *)Method_System_Collections_Generic_List_int__Contains__) )
  {
    return 0;
  }
  cutinFirstIdListThisTurn = this->fields.cutinFirstIdListThisTurn;
  if ( !cutinFirstIdListThisTurn )
    goto LABEL_12;
  if ( !System_Collections_Generic_List_int___Contains(
          cutinFirstIdListThisTurn,
          cutinFirstId,
          (const MethodInfo_2F10944 *)Method_System_Collections_Generic_List_int__Contains__) )
  {
    v10 = this->fields.cutinFirstIdListThisTurn;
    if ( v10 )
    {
      System_Collections_Generic_List_int___Add(
        v10,
        cutinFirstId,
        (const MethodInfo_2F104F0 *)Method_System_Collections_Generic_List_int__Add__);
      return 1;
    }
LABEL_12:
    sub_B170D4();
  }
  return 1;
}


bool __fastcall BattleLogic__CheckEnemyDropItem(
        BattleLogic_o *this,
        UnityEngine_GameObject_o *actorObj,
        BattleActorControl_o **actor,
        const MethodInfo *method)
{
  __int64 v7; // x1
  BattleActorControl_o *Component_srcLineSprite; // x0
  UnityEngine_Object_o *v9; // x21
  struct BattleData_o *data; // x8
  BattleServantData_o *battleSvtData; // x0
  struct BattleServantData_o *v12; // x8
  BattleDeckServantData_o *deckSvt; // x0

  if ( (byte_40F73A6 & 1) == 0 )
  {
    sub_B16FFC(&Method_UnityEngine_GameObject_GetComponent_BattleActorControl___, actorObj);
    sub_B16FFC(&UnityEngine_Object_TypeInfo, v7);
    byte_40F73A6 = 1;
  }
  *actor = 0LL;
  sub_B16F98(actor, 0LL);
  if ( (BYTE3(UnityEngine_Object_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0
    && !UnityEngine_Object_TypeInfo->_2.cctor_finished )
  {
    j_il2cpp_runtime_class_init_0(UnityEngine_Object_TypeInfo);
  }
  if ( UnityEngine_Object__op_Equality((UnityEngine_Object_o *)actorObj, 0LL, 0LL) )
    return 0;
  if ( !actorObj )
    goto LABEL_26;
  Component_srcLineSprite = (BattleActorControl_o *)UnityEngine_GameObject__GetComponent_srcLineSprite_(
                                                      actorObj,
                                                      (const MethodInfo_19D14E0 *)Method_UnityEngine_GameObject_GetComponent_BattleActorControl___);
  *actor = Component_srcLineSprite;
  sub_B16F98(actor, Component_srcLineSprite);
  v9 = (UnityEngine_Object_o *)*actor;
  if ( (BYTE3(UnityEngine_Object_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0
    && !UnityEngine_Object_TypeInfo->_2.cctor_finished )
  {
    j_il2cpp_runtime_class_init_0(UnityEngine_Object_TypeInfo);
  }
  if ( UnityEngine_Object__op_Equality(v9, 0LL, 0LL) )
    return 0;
  data = this->fields.data;
  if ( !data )
    goto LABEL_26;
  if ( !data->fields.endbattleFlg || data->fields.loseBattleFlg )
    return 0;
  if ( !*actor )
    goto LABEL_26;
  battleSvtData = (*actor)->fields.battleSvtData;
  if ( !battleSvtData )
    goto LABEL_26;
  if ( BattleServantData__isDead(battleSvtData, 0LL) )
    return 0;
  if ( !*actor || (v12 = (*actor)->fields.battleSvtData) == 0LL || (deckSvt = v12->fields.deckSvt) == 0LL )
LABEL_26:
    sub_B170D4();
  if ( !BattleDeckServantData__getIsForceDropItem(deckSvt, 0LL) )
    return 0;
  if ( !*actor )
    goto LABEL_26;
  return !BattleActorControl__IsAlreadyDrop(*actor, 0LL);
}


bool __fastcall BattleLogic__CheckEnemyDropItemAll(BattleLogic_o *this, const MethodInfo *method)
{
  __int64 v2; // x2
  const MethodInfo *v3; // x3
  struct BattlePerformance_o *perf; // x8
  BattleLogic_o *v5; // x19
  unsigned __int64 v6; // x20
  struct UnityEngine_GameObject_array *e_actorlist; // x8
  unsigned __int64 max_length; // x9
  BattleActorControl_o *actor; // [xsp+8h] [xbp-18h] BYREF

  actor = 0LL;
  perf = this->fields.perf;
  if ( !perf )
LABEL_8:
    sub_B170D4();
  v5 = this;
  v6 = 0LL;
  while ( 1 )
  {
    e_actorlist = perf->fields.e_actorlist;
    if ( !e_actorlist )
      goto LABEL_8;
    max_length = e_actorlist->max_length;
    if ( (__int64)v6 >= (int)max_length )
      return 0;
    actor = 0LL;
    if ( v6 >= max_length )
    {
      sub_B17100(this, method, v2);
      sub_B170A0();
    }
    this = (BattleLogic_o *)BattleLogic__CheckEnemyDropItem(v5, e_actorlist->m_Items[v6], &actor, v3);
    if ( ((unsigned __int8)this & 1) != 0 )
      return 1;
    perf = v5->fields.perf;
    ++v6;
    if ( !perf )
      goto LABEL_8;
  }
}


bool __fastcall BattleLogic__CheckEventDataLostBattle(
        BattleLogic_o *this,
        System_String_o *str,
        System_String_o *endEvent,
        const MethodInfo *method)
{
  __int64 v4; // x4
  __int64 v8; // x1
  __int64 v9; // x1
  __int64 v10; // x1
  __int64 v11; // x1
  __int64 v12; // x1
  __int64 v13; // x1
  __int64 v14; // x1
  __int64 v15; // x1
  __int64 v16; // x1
  __int64 v17; // x1
  __int64 v18; // x1
  __int64 v19; // x1
  __int64 v20; // x1
  __int64 v21; // x1
  __int64 v22; // x1
  __int64 v23; // x1
  __int64 v24; // x1
  BattleLogic___c__DisplayClass109_0_o *v25; // x19
  BattleData_o *data; // x0
  __int64 v27; // x1
  TerminalPramsManager_c *v28; // x0
  EventDataLostBattleMaster_o *Master_WarQuestSelectionMaster; // x0
  int32_t EventDataLostBattleId; // w0
  struct BattleData_o *v31; // x8
  int32_t v32; // w20
  QuestEntity_o *quest_ent; // x0
  __int64 v34; // x1
  TerminalPramsManager_c *v35; // x0
  Il2CppObject *v36; // x21
  System_String_o *v37; // x0
  __int64 v38; // x1
  __int64 v39; // x2
  _BYTE *monitor; // x8
  __int64 v41; // x1
  System_String_array *v42; // x21
  TerminalPramsManager_c *v43; // x0
  System_String_o *v44; // x22
  __int64 v45; // x1
  TerminalPramsManager_c *v46; // x0
  System_String_o *v47; // x22
  __int64 v48; // x1
  TerminalPramsManager_c *v49; // x0
  System_String_o *v50; // x22
  System_String_o *v51; // x22
  System_String_o *v52; // x0
  WarQuestSelectionMaster_o *v53; // x21
  int64_t UserId; // x0
  Il2CppObject *v55; // x0
  System_String_o *v56; // x20
  __int64 v57; // x1
  __int64 v58; // x2
  __int64 v59; // x3
  __int64 v60; // x4
  AssetLoader_LoadEndDataHandler_o *v61; // x21
  bool v62; // w19
  int32_t eventId; // [xsp+4h] [xbp-4Ch] BYREF
  char v65[4]; // [xsp+8h] [xbp-48h] BYREF
  int32_t QuestId_k__BackingField; // [xsp+Ch] [xbp-44h] BYREF
  UserEventDataLostEntity_o *entity; // [xsp+18h] [xbp-38h] BYREF

  if ( (byte_40F7374 & 1) == 0 )
  {
    sub_B16FFC(&AssetManager_TypeInfo, str);
    sub_B16FFC(&Method_DataManager_GetMaster_EventDataLostBattleMaster___, v8);
    sub_B16FFC(&Method_DataManager_GetMaster_UserEventDataLostMaster___, v9);
    sub_B16FFC(&DataManager_TypeInfo, v10);
    sub_B16FFC(&int_TypeInfo, v11);
    sub_B16FFC(&Method_JsonManager_DeserializeArray_BattleResultComponent_resultData___, v12);
    sub_B16FFC(&JsonManager_TypeInfo, v13);
    sub_B16FFC(&AssetLoader_LoadEndDataHandler_TypeInfo, v14);
    sub_B16FFC(&NetworkManager_TypeInfo, v15);
    sub_B16FFC(&string___TypeInfo, v16);
    sub_B16FFC(&TerminalPramsManager_TypeInfo, v17);
    sub_B16FFC(&Method_BattleLogic___c__DisplayClass109_0__CheckEventDataLostBattle_b__0__, v18);
    sub_B16FFC(&BattleLogic___c__DisplayClass109_0_TypeInfo, v19);
    sub_B16FFC(&StringLiteral_16222, v20);
    sub_B16FFC(&StringLiteral_6189, v21);
    sub_B16FFC(&StringLiteral_698, v22);
    sub_B16FFC(&StringLiteral_15571, v23);
    sub_B16FFC(&StringLiteral_15807, v24);
    byte_40F7374 = 1;
  }
  entity = 0LL;
  QuestId_k__BackingField = 0;
  v65[0] = 0;
  v25 = (BattleLogic___c__DisplayClass109_0_o *)sub_B170CC(
                                                  BattleLogic___c__DisplayClass109_0_TypeInfo,
                                                  str,
                                                  endEvent,
                                                  method,
                                                  v4);
  BattleLogic___c__DisplayClass109_0___ctor(v25, 0LL);
  if ( !v25 )
    goto LABEL_99;
  v25->fields.__4__this = this;
  sub_B16F98(&v25->fields.__4__this, this);
  v25->fields.endEvent = endEvent;
  sub_B16F98(&v25->fields.endEvent, endEvent);
  data = this->fields.data;
  if ( !data )
    goto LABEL_99;
  v25->fields.eventId = BattleData__get_eventId(data, 0LL);
  if ( (BYTE3(TerminalPramsManager_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0
    && !TerminalPramsManager_TypeInfo->_2.cctor_finished )
  {
    j_il2cpp_runtime_class_init_0(TerminalPramsManager_TypeInfo);
  }
  if ( !byte_40F6044 )
  {
    sub_B16FFC(&TerminalPramsManager_TypeInfo, v27);
    byte_40F6044 = 1;
  }
  v28 = TerminalPramsManager_TypeInfo;
  if ( (BYTE3(TerminalPramsManager_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0
    && !TerminalPramsManager_TypeInfo->_2.cctor_finished )
  {
    j_il2cpp_runtime_class_init_0(TerminalPramsManager_TypeInfo);
    v28 = TerminalPramsManager_TypeInfo;
  }
  v25->fields.warId = v28->static_fields->_WarId_k__BackingField;
  if ( (BYTE3(DataManager_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0 && !DataManager_TypeInfo->_2.cctor_finished )
    j_il2cpp_runtime_class_init_0(DataManager_TypeInfo);
  Master_WarQuestSelectionMaster = (EventDataLostBattleMaster_o *)DataManager__GetMaster_WarQuestSelectionMaster_((const MethodInfo_18C3224 *)Method_DataManager_GetMaster_EventDataLostBattleMaster___);
  if ( !Master_WarQuestSelectionMaster )
    goto LABEL_99;
  EventDataLostBattleId = EventDataLostBattleMaster__GetEventDataLostBattleId(
                            Master_WarQuestSelectionMaster,
                            v25->fields.warId,
                            v25->fields.eventId,
                            0LL);
  v31 = this->fields.data;
  if ( !v31 )
    goto LABEL_99;
  v32 = EventDataLostBattleId;
  if ( EventDataLostBattleId == -1 )
    return 0;
  quest_ent = v31->fields.quest_ent;
  if ( !quest_ent )
    goto LABEL_99;
  if ( !QuestEntity__HasFlag(quest_ent, 0x4000LL, 0LL) )
    return 0;
  if ( (BYTE3(TerminalPramsManager_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0
    && !TerminalPramsManager_TypeInfo->_2.cctor_finished )
  {
    j_il2cpp_runtime_class_init_0(TerminalPramsManager_TypeInfo);
  }
  if ( !byte_40F6086 )
  {
    sub_B16FFC(&TerminalPramsManager_TypeInfo, v34);
    byte_40F6086 = 1;
  }
  v35 = TerminalPramsManager_TypeInfo;
  if ( (BYTE3(TerminalPramsManager_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0
    && !TerminalPramsManager_TypeInfo->_2.cctor_finished )
  {
    j_il2cpp_runtime_class_init_0(TerminalPramsManager_TypeInfo);
    v35 = TerminalPramsManager_TypeInfo;
  }
  v35->static_fields->_isIncomingCall_k__BackingField = 1;
  v36 = (Il2CppObject *)System_String__Concat_43746016(
                          (System_String_o *)StringLiteral_15571,
                          str,
                          (System_String_o *)StringLiteral_15807,
                          0LL);
  if ( (BYTE3(JsonManager_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0 && !JsonManager_TypeInfo->_2.cctor_finished )
    j_il2cpp_runtime_class_init_0(JsonManager_TypeInfo);
  v37 = (System_String_o *)JsonManager__DeserializeArray_UserPresentBoxWindow_resData_(
                             v36,
                             (const MethodInfo_19D67B8 *)Method_JsonManager_DeserializeArray_BattleResultComponent_resultData___);
  if ( !v37 )
    goto LABEL_99;
  if ( !LODWORD(v37[1].klass) )
    goto LABEL_100;
  monitor = v37[1].monitor;
  if ( !monitor )
    goto LABEL_99;
  if ( monitor[401] )
  {
    v42 = (System_String_array *)sub_B17014(string___TypeInfo, 7LL, v39);
    if ( (BYTE3(TerminalPramsManager_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0
      && !TerminalPramsManager_TypeInfo->_2.cctor_finished )
    {
      j_il2cpp_runtime_class_init_0(TerminalPramsManager_TypeInfo);
    }
    if ( !byte_40F6057 )
    {
      sub_B16FFC(&TerminalPramsManager_TypeInfo, v41);
      byte_40F6057 = 1;
    }
    v43 = TerminalPramsManager_TypeInfo;
    if ( (BYTE3(TerminalPramsManager_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0
      && !TerminalPramsManager_TypeInfo->_2.cctor_finished )
    {
      j_il2cpp_runtime_class_init_0(TerminalPramsManager_TypeInfo);
      v43 = TerminalPramsManager_TypeInfo;
    }
    QuestId_k__BackingField = v43->static_fields->_QuestId_k__BackingField;
    v37 = System_Int32__ToString((int32_t)&QuestId_k__BackingField, 0LL);
    if ( v42 )
    {
      v44 = v37;
      if ( !v37 || (v37 = (System_String_o *)sub_B170BC(v37, v42->obj.klass->_1.element_class)) != 0LL )
      {
        if ( !v42->max_length )
          goto LABEL_100;
        v42->m_Items[0] = v44;
        sub_B16F98(v42->m_Items, v44);
        v37 = (System_String_o *)StringLiteral_698;
        if ( StringLiteral_698 )
        {
          v37 = (System_String_o *)sub_B170BC(StringLiteral_698, v42->obj.klass->_1.element_class);
          if ( !v37 )
            goto LABEL_101;
          v38 = StringLiteral_698;
        }
        else
        {
          v38 = 0LL;
        }
        if ( v42->max_length <= 1 )
          goto LABEL_100;
        v42->m_Items[1] = (System_String_o *)v38;
        sub_B16F98(&v42->m_Items[1], v38);
        if ( !byte_40F6058 )
        {
          sub_B16FFC(&TerminalPramsManager_TypeInfo, v45);
          byte_40F6058 = 1;
        }
        v46 = TerminalPramsManager_TypeInfo;
        if ( (BYTE3(TerminalPramsManager_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0
          && !TerminalPramsManager_TypeInfo->_2.cctor_finished )
        {
          j_il2cpp_runtime_class_init_0(TerminalPramsManager_TypeInfo);
          v46 = TerminalPramsManager_TypeInfo;
        }
        QuestId_k__BackingField = v46->static_fields->_PhaseCnt_k__BackingField;
        v37 = System_Int32__ToString((int32_t)&QuestId_k__BackingField, 0LL);
        v47 = v37;
        if ( !v37 || (v37 = (System_String_o *)sub_B170BC(v37, v42->obj.klass->_1.element_class)) != 0LL )
        {
          if ( v42->max_length <= 2 )
            goto LABEL_100;
          v42->m_Items[2] = v47;
          sub_B16F98(&v42->m_Items[2], v47);
          v37 = (System_String_o *)StringLiteral_698;
          if ( StringLiteral_698 )
          {
            v37 = (System_String_o *)sub_B170BC(StringLiteral_698, v42->obj.klass->_1.element_class);
            if ( !v37 )
              goto LABEL_101;
            v38 = StringLiteral_698;
          }
          else
          {
            v38 = 0LL;
          }
          if ( v42->max_length <= 3 )
            goto LABEL_100;
          v42->m_Items[3] = (System_String_o *)v38;
          sub_B16F98(&v42->m_Items[3], v38);
          if ( !byte_40F6069 )
          {
            sub_B16FFC(&TerminalPramsManager_TypeInfo, v48);
            byte_40F6069 = 1;
          }
          v49 = TerminalPramsManager_TypeInfo;
          if ( (BYTE3(TerminalPramsManager_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0
            && !TerminalPramsManager_TypeInfo->_2.cctor_finished )
          {
            j_il2cpp_runtime_class_init_0(TerminalPramsManager_TypeInfo);
            v49 = TerminalPramsManager_TypeInfo;
          }
          v65[0] = v49->static_fields->_IsQuestClear_k__BackingField;
          v37 = System_Boolean__ToString((bool)v65, 0LL);
          v50 = v37;
          if ( !v37 || (v37 = (System_String_o *)sub_B170BC(v37, v42->obj.klass->_1.element_class)) != 0LL )
          {
            if ( v42->max_length <= 4 )
              goto LABEL_100;
            v42->m_Items[4] = v50;
            sub_B16F98(&v42->m_Items[4], v50);
            v37 = (System_String_o *)StringLiteral_698;
            if ( StringLiteral_698 )
            {
              v37 = (System_String_o *)sub_B170BC(StringLiteral_698, v42->obj.klass->_1.element_class);
              if ( !v37 )
                goto LABEL_101;
              v38 = StringLiteral_698;
            }
            else
            {
              v38 = 0LL;
            }
            if ( v42->max_length <= 5 )
              goto LABEL_100;
            v42->m_Items[5] = (System_String_o *)v38;
            sub_B16F98(&v42->m_Items[5], v38);
            v65[0] = 1;
            v37 = System_Boolean__ToString((bool)v65, 0LL);
            v51 = v37;
            if ( !v37 || (v37 = (System_String_o *)sub_B170BC(v37, v42->obj.klass->_1.element_class)) != 0LL )
            {
              if ( v42->max_length > 6 )
              {
                v42->m_Items[6] = v51;
                sub_B16F98(&v42->m_Items[6], v51);
                v52 = System_String__Concat_43823856(v42, 0LL);
                UnityEngine_PlayerPrefs__SetString((System_String_o *)StringLiteral_16222, v52, 0LL);
                goto LABEL_83;
              }
LABEL_100:
              sub_B17100(v37, v38, v39);
              sub_B170A0();
            }
          }
        }
      }
LABEL_101:
      sub_B170F4();
      sub_B170A0();
    }
LABEL_99:
    sub_B170D4();
  }
LABEL_83:
  if ( (BYTE3(DataManager_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0 && !DataManager_TypeInfo->_2.cctor_finished )
    j_il2cpp_runtime_class_init_0(DataManager_TypeInfo);
  v53 = DataManager__GetMaster_WarQuestSelectionMaster_((const MethodInfo_18C3224 *)Method_DataManager_GetMaster_UserEventDataLostMaster___);
  if ( (BYTE3(NetworkManager_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0
    && !NetworkManager_TypeInfo->_2.cctor_finished )
  {
    j_il2cpp_runtime_class_init_0(NetworkManager_TypeInfo);
  }
  UserId = NetworkManager__get_UserId(0LL);
  if ( !v53 )
    goto LABEL_99;
  if ( !UserEventDataLostMaster__TryGetEntity((UserEventDataLostMaster_o *)v53, &entity, UserId, v32, 0LL) )
    return 0;
  if ( !entity )
    goto LABEL_99;
  if ( !UserEventDataLostEntity__IsAllServantDataLost(entity, 0LL) )
    return 0;
  eventId = v25->fields.eventId;
  v55 = (Il2CppObject *)j_il2cpp_value_box_0(int_TypeInfo, &eventId);
  v56 = System_String__Format((System_String_o *)StringLiteral_6189, v55, 0LL);
  v61 = (AssetLoader_LoadEndDataHandler_o *)sub_B170CC(AssetLoader_LoadEndDataHandler_TypeInfo, v57, v58, v59, v60);
  AssetLoader_LoadEndDataHandler___ctor(
    v61,
    (Il2CppObject *)v25,
    Method_BattleLogic___c__DisplayClass109_0__CheckEventDataLostBattle_b__0__,
    0LL);
  if ( (BYTE3(AssetManager_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0 && !AssetManager_TypeInfo->_2.cctor_finished )
    j_il2cpp_runtime_class_init_0(AssetManager_TypeInfo);
  v62 = 1;
  AssetManager__loadAssetStorage(v56, v61, 1, 0LL);
  return v62;
}


void __fastcall BattleLogic__CheckFieldAIBeforeMoveWave(BattleLogic_o *this, const MethodInfo *method)
{
  BattleData_o *data; // x0
  BattleData_o *v4; // x0
  BattleLogicFieldAi_o *logicFieldAi; // x0
  BattleLogicTask_array *v6; // x0
  const MethodInfo *v7; // x3
  System_Collections_IEnumerator_o *v8; // x1
  PlayMakerFSM_o *fsm; // x0

  if ( (byte_40F73B4 & 1) == 0 )
  {
    sub_B16FFC(&StringLiteral_12204, method);
    byte_40F73B4 = 1;
  }
  data = this->fields.data;
  if ( !data )
    goto LABEL_12;
  if ( !BattleData__checkProgressflg(data, 0x8000, 0LL) )
    goto LABEL_10;
  v4 = this->fields.data;
  if ( !v4
    || (BattleData__offProgressflg(v4, 0x8000, 0LL), (logicFieldAi = this->fields.logicFieldAi) == 0LL)
    || (v6 = BattleLogicFieldAi__CheckFieldAiBeforeMoveWave(logicFieldAi, 0LL)) == 0LL )
  {
LABEL_12:
    sub_B170D4();
  }
  if ( *(_QWORD *)&v6->max_length )
  {
    v8 = BattleLogic__waitWaveStep(this, v6, 0x8000, v7);
    UnityEngine_MonoBehaviour__StartCoroutine_34804316((UnityEngine_MonoBehaviour_o *)this, v8, 0LL);
    return;
  }
LABEL_10:
  fsm = this->fields.fsm;
  if ( !fsm )
    goto LABEL_12;
  PlayMakerFSM__SendEvent(fsm, (System_String_o *)StringLiteral_12204, 0LL);
}


void __fastcall BattleLogic__CheckPlayerSkillAfterTask(BattleLogic_o *this, const MethodInfo *method)
{
  __int64 v2; // x2
  __int64 v3; // x3
  __int64 v4; // x4
  __int64 v6; // x1
  __int64 v7; // x1
  __int64 v8; // x1
  __int64 v9; // x1
  __int64 v10; // x1
  __int64 v11; // x1
  __int64 v12; // x1
  struct BattleLogic_UseSkillObject_o *act_useSkill; // x8
  struct BattleSkillInfoData_o *skillInfo; // x8
  int32_t type; // w8
  System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData__o *v16; // x20
  BattleLogicFieldAi_o *logicFieldAi; // x0
  System_Collections_Generic_IEnumerable_T__o *ActionTasks; // x0
  BattleLogicEnemyAi_o *logicEnemyAi; // x0
  System_Collections_Generic_IEnumerable_T__o *PlayerSkillAfterTask; // x0
  BattleLogicFieldAi_o *v21; // x0
  System_Collections_Generic_IEnumerable_T__o *v22; // x0
  PlayMakerFSM_o *fsm; // x0
  BattlePerformance_o *perf; // x0
  BattleMotionSkipManager_o *MotionSkipManager; // x0
  BaseMotionSkip_o *Current; // x0
  BattlePerformance_o *v27; // x0
  BattleMotionSkipManager_o *v28; // x0
  __int64 v29; // x1
  __int64 v30; // x2
  __int64 v31; // x3
  __int64 v32; // x4
  BattleLogicTask_o *v33; // x21
  BattleLogicTask_array *v34; // x1
  const MethodInfo *v35; // x2

  if ( (byte_40F7408 & 1) == 0 )
  {
    sub_B16FFC(&BattleLogicTask_TypeInfo, method);
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleLogicTask__AddRange__, v6);
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleLogicTask__Add__, v7);
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleLogicTask__ToArray__, v8);
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleLogicTask___ctor__, v9);
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleLogicTask__get_Count__, v10);
    sub_B16FFC(&System_Collections_Generic_List_BattleLogicTask__TypeInfo, v11);
    sub_B16FFC(&StringLiteral_12204, v12);
    byte_40F7408 = 1;
  }
  act_useSkill = this->fields.act_useSkill;
  if ( !act_useSkill )
    goto LABEL_12;
  skillInfo = act_useSkill->fields.skillInfo;
  if ( !skillInfo )
    goto LABEL_12;
  type = skillInfo->fields.type;
  if ( type != 1 && type != 11 )
    goto LABEL_12;
  v16 = (System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData__o *)sub_B170CC(
                                                                                                  System_Collections_Generic_List_BattleLogicTask__TypeInfo,
                                                                                                  method,
                                                                                                  v2,
                                                                                                  v3,
                                                                                                  v4);
  System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData____ctor(
    v16,
    (const MethodInfo_2F25014 *)Method_System_Collections_Generic_List_BattleLogicTask___ctor__);
  logicFieldAi = this->fields.logicFieldAi;
  if ( !logicFieldAi )
    goto LABEL_23;
  ActionTasks = (System_Collections_Generic_IEnumerable_T__o *)BattleLogicFieldAi__CreateActionTasks(
                                                                 logicFieldAi,
                                                                 67,
                                                                 0LL);
  if ( !v16 )
    goto LABEL_23;
  System_Collections_Generic_List_TimeZoneInfo_AdjustmentRule___AddRange(
    (System_Collections_Generic_List_TimeZoneInfo_AdjustmentRule__o *)v16,
    ActionTasks,
    (const MethodInfo_2F25F28 *)Method_System_Collections_Generic_List_BattleLogicTask__AddRange__);
  logicEnemyAi = this->fields.logicEnemyAi;
  if ( !logicEnemyAi )
    goto LABEL_23;
  PlayerSkillAfterTask = (System_Collections_Generic_IEnumerable_T__o *)BattleLogicEnemyAi__GetPlayerSkillAfterTask(
                                                                          logicEnemyAi,
                                                                          0LL);
  System_Collections_Generic_List_TimeZoneInfo_AdjustmentRule___AddRange(
    (System_Collections_Generic_List_TimeZoneInfo_AdjustmentRule__o *)v16,
    PlayerSkillAfterTask,
    (const MethodInfo_2F25F28 *)Method_System_Collections_Generic_List_BattleLogicTask__AddRange__);
  v21 = this->fields.logicFieldAi;
  if ( !v21 )
    goto LABEL_23;
  v22 = (System_Collections_Generic_IEnumerable_T__o *)BattleLogicFieldAi__CreateActionTasks(v21, 66, 0LL);
  System_Collections_Generic_List_TimeZoneInfo_AdjustmentRule___AddRange(
    (System_Collections_Generic_List_TimeZoneInfo_AdjustmentRule__o *)v16,
    v22,
    (const MethodInfo_2F25F28 *)Method_System_Collections_Generic_List_BattleLogicTask__AddRange__);
  if ( BasicHelper__IsNullOrEmpty((System_Collections_ICollection_o *)v16, 0LL) )
  {
LABEL_12:
    fsm = this->fields.fsm;
    if ( fsm )
    {
      PlayMakerFSM__SendEvent(fsm, (System_String_o *)StringLiteral_12204, 0LL);
      return;
    }
LABEL_23:
    sub_B170D4();
  }
  perf = this->fields.perf;
  if ( !perf )
    goto LABEL_23;
  MotionSkipManager = BattlePerformance__get_MotionSkipManager(perf, 0LL);
  if ( !MotionSkipManager )
    goto LABEL_23;
  Current = BattleMotionSkipManager__get_Current(MotionSkipManager, 0LL);
  if ( !Current )
    goto LABEL_23;
  ((void (__fastcall *)(BaseMotionSkip_o *, Il2CppMethodPointer))Current->klass->vtable._8_ResetSkipTimeScale.method)(
    Current,
    Current->klass->vtable._9_MotionStart.methodPtr);
  v27 = this->fields.perf;
  if ( !v27 )
    goto LABEL_23;
  v28 = BattlePerformance__get_MotionSkipManager(v27, 0LL);
  if ( !v28 )
    goto LABEL_23;
  BattleMotionSkipManager__ReleaseMotionSkip(v28, 0LL);
  if ( v16->fields._size >= 1 )
  {
    v33 = (BattleLogicTask_o *)sub_B170CC(BattleLogicTask_TypeInfo, v29, v30, v31, v32);
    BattleLogicTask___ctor(v33, 0LL);
    if ( !v33 )
      goto LABEL_23;
    v33->fields.actiontype = 7;
    System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData___Add(
      v16,
      (EventMissionProgressRequest_Argument_ProgressData_o *)v33,
      (const MethodInfo_2F25CD8 *)Method_System_Collections_Generic_List_BattleLogicTask__Add__);
  }
  v34 = (BattleLogicTask_array *)System_Collections_Generic_List_WarBoardUiData_SaveData___ToArray(
                                   (System_Collections_Generic_List_WarBoardUiData_SaveData__o *)v16,
                                   (const MethodInfo_2F27E24 *)Method_System_Collections_Generic_List_BattleLogicTask__ToArray__);
  BattleLogic__actOneBattleTask(this, v34, v35);
}


void __fastcall BattleLogic__CheckRemainBattleEndWave(BattleLogic_o *this, const MethodInfo *method)
{
  __int64 v3; // x1
  struct BattleData_o *data; // x8
  struct BaseBattleEvent_o *battleEvent; // x0
  char v6; // w0
  __int64 *v7; // x9

  if ( (byte_40F73A1 & 1) == 0 )
  {
    sub_B16FFC(&StringLiteral_11037, method);
    sub_B16FFC(&StringLiteral_5486, v3);
    byte_40F73A1 = 1;
  }
  data = this->fields.data;
  if ( !data
    || (battleEvent = data->fields.battleEvent) == 0LL
    || (v6 = ((__int64 (__fastcall *)(struct BaseBattleEvent_o *, Il2CppMethodPointer))battleEvent->klass->vtable._29_IsRemainBattleEndWave.method)(
               battleEvent,
               battleEvent->klass->vtable._30_IsCommandAttackable.methodPtr),
        !this->fields.fsm) )
  {
    sub_B170D4();
  }
  if ( (v6 & 1) != 0 )
    v7 = &StringLiteral_11037;
  else
    v7 = &StringLiteral_5486;
  PlayMakerFSM__SendEvent(this->fields.fsm, (System_String_o *)*v7, 0LL);
}


void __fastcall BattleLogic__CheckServantAiBeforeMoveWave(BattleLogic_o *this, const MethodInfo *method)
{
  const MethodInfo *v2; // x3

  BattleLogic__CheckServantAiWaveBase(this, 0x4000, 21, v2);
}


void __fastcall BattleLogic__CheckServantAiTurnStart(BattleLogic_o *this, const MethodInfo *method)
{
  __int64 v3; // x1
  __int64 v4; // x1
  __int64 v5; // x1
  __int64 v6; // x1
  __int64 v7; // x1
  __int64 v8; // x1
  BattleData_o *data; // x0
  BattleData_o *v10; // x0
  BattleLogicReaction_o *logicReaction; // x0
  System_Collections_ICollection_o *v12; // x21
  __int64 v13; // x1
  __int64 v14; // x2
  __int64 v15; // x3
  __int64 v16; // x4
  PlayMakerFSM_o *fsm; // x0
  System_Collections_Generic_List_WarBoardAIRoute_RouteData__o *v18; // x20
  __int64 v19; // x1
  __int64 v20; // x2
  __int64 v21; // x3
  __int64 v22; // x4
  BattleLogicCameraTask_o *v23; // x21
  BattleLogicTask_array *v24; // x0
  const MethodInfo *v25; // x3
  System_Collections_IEnumerator_o *v26; // x1

  if ( (byte_40F73BC & 1) == 0 )
  {
    sub_B16FFC(&BattleLogicCameraTask_TypeInfo, method);
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleLogicTask__Add__, v3);
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleLogicTask__ToArray__, v4);
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleLogicTask___ctor___66726592, v5);
    sub_B16FFC(&System_Collections_Generic_List_BattleLogicTask__TypeInfo, v6);
    sub_B16FFC(&StringLiteral_11053, v7);
    sub_B16FFC(&StringLiteral_12204, v8);
    byte_40F73BC = 1;
  }
  data = this->fields.data;
  if ( !data )
    goto LABEL_12;
  if ( !BattleData__checkProgressflg(data, 4096, 0LL) )
    goto LABEL_8;
  v10 = this->fields.data;
  if ( !v10 )
    goto LABEL_12;
  BattleData__offProgressflg(v10, 4096, 0LL);
  logicReaction = this->fields.logicReaction;
  if ( !logicReaction )
    goto LABEL_12;
  v12 = (System_Collections_ICollection_o *)BattleLogicReaction__CheckServantAiTurnStart(logicReaction, 0LL);
  if ( BasicHelper__IsNullOrEmpty(v12, 0LL) )
  {
LABEL_8:
    fsm = this->fields.fsm;
    if ( fsm )
    {
      PlayMakerFSM__SendEvent(fsm, (System_String_o *)StringLiteral_12204, 0LL);
      return;
    }
LABEL_12:
    sub_B170D4();
  }
  v18 = (System_Collections_Generic_List_WarBoardAIRoute_RouteData__o *)sub_B170CC(
                                                                          System_Collections_Generic_List_BattleLogicTask__TypeInfo,
                                                                          v13,
                                                                          v14,
                                                                          v15,
                                                                          v16);
  System_Collections_Generic_List_WarBoardAIRoute_RouteData____ctor(
    v18,
    (System_Collections_Generic_IEnumerable_T__o *)v12,
    (const MethodInfo_2F2520C *)Method_System_Collections_Generic_List_BattleLogicTask___ctor___66726592);
  v23 = (BattleLogicCameraTask_o *)sub_B170CC(BattleLogicCameraTask_TypeInfo, v19, v20, v21, v22);
  BattleLogicCameraTask___ctor(v23, (System_String_o *)StringLiteral_11053, 0LL);
  if ( !v18 )
    goto LABEL_12;
  System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData___Add(
    (System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData__o *)v18,
    (EventMissionProgressRequest_Argument_ProgressData_o *)v23,
    (const MethodInfo_2F25CD8 *)Method_System_Collections_Generic_List_BattleLogicTask__Add__);
  v24 = (BattleLogicTask_array *)System_Collections_Generic_List_WarBoardUiData_SaveData___ToArray(
                                   (System_Collections_Generic_List_WarBoardUiData_SaveData__o *)v18,
                                   (const MethodInfo_2F27E24 *)Method_System_Collections_Generic_List_BattleLogicTask__ToArray__);
  v26 = BattleLogic__waitWaveStep(this, v24, 4096, v25);
  UnityEngine_MonoBehaviour__StartCoroutine_34804316((UnityEngine_MonoBehaviour_o *)this, v26, 0LL);
}


// local variable allocation has failed, the output may be wrong!
void __fastcall BattleLogic__CheckServantAiWaveBase(
        BattleLogic_o *this,
        int32_t progressFlg,
        int32_t procState,
        const MethodInfo *method)
{
  __int64 v7; // x1
  __int64 v8; // x1
  __int64 v9; // x1
  __int64 v10; // x1
  __int64 v11; // x1
  __int64 v12; // x1
  __int64 v13; // x1
  __int64 v14; // x1
  BattleData_o *data; // x0
  BattleData_o *v16; // x0
  __int64 v17; // x1
  __int64 v18; // x2
  __int64 v19; // x3
  __int64 v20; // x4
  System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData__o *v21; // x22
  BattleLogicReaction_o *logicReaction; // x0
  System_Collections_Generic_IEnumerable_T__o *v23; // x0
  __int64 v24; // x1
  __int64 v25; // x2
  __int64 v26; // x3
  __int64 v27; // x4
  BattleLogicCameraTask_o *v28; // x21
  BattleLogicTask_array *v29; // x0
  const MethodInfo *v30; // x3
  System_Collections_IEnumerator_o *v31; // x1
  PlayMakerFSM_o *fsm; // x0

  if ( (byte_40F73BB & 1) == 0 )
  {
    sub_B16FFC(&BattleLogicCameraTask_TypeInfo, *(_QWORD *)&progressFlg);
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleLogicTask__AddRange__, v7);
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleLogicTask__Add__, v8);
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleLogicTask__ToArray__, v9);
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleLogicTask___ctor__, v10);
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleLogicTask__get_Count__, v11);
    sub_B16FFC(&System_Collections_Generic_List_BattleLogicTask__TypeInfo, v12);
    sub_B16FFC(&StringLiteral_11053, v13);
    sub_B16FFC(&StringLiteral_12204, v14);
    byte_40F73BB = 1;
  }
  data = this->fields.data;
  if ( !data )
    goto LABEL_16;
  if ( !BattleData__checkProgressflg(data, progressFlg, 0LL) )
    goto LABEL_14;
  v16 = this->fields.data;
  if ( !v16
    || (BattleData__offProgressflg(v16, progressFlg, 0LL),
        v21 = (System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData__o *)sub_B170CC(System_Collections_Generic_List_BattleLogicTask__TypeInfo, v17, v18, v19, v20),
        System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData____ctor(
          v21,
          (const MethodInfo_2F25014 *)Method_System_Collections_Generic_List_BattleLogicTask___ctor__),
        (logicReaction = this->fields.logicReaction) == 0LL)
    || (v23 = (System_Collections_Generic_IEnumerable_T__o *)BattleLogicReaction__CheckServantAiWave(
                                                               logicReaction,
                                                               procState,
                                                               0LL)) == 0LL )
  {
LABEL_16:
    sub_B170D4();
  }
  if ( v23[1].monitor )
  {
    if ( !v21 )
      goto LABEL_16;
    System_Collections_Generic_List_TimeZoneInfo_AdjustmentRule___AddRange(
      (System_Collections_Generic_List_TimeZoneInfo_AdjustmentRule__o *)v21,
      v23,
      (const MethodInfo_2F25F28 *)Method_System_Collections_Generic_List_BattleLogicTask__AddRange__);
    v28 = (BattleLogicCameraTask_o *)sub_B170CC(BattleLogicCameraTask_TypeInfo, v24, v25, v26, v27);
    BattleLogicCameraTask___ctor(v28, (System_String_o *)StringLiteral_11053, 0LL);
    System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData___Add(
      v21,
      (EventMissionProgressRequest_Argument_ProgressData_o *)v28,
      (const MethodInfo_2F25CD8 *)Method_System_Collections_Generic_List_BattleLogicTask__Add__);
  }
  else if ( !v21 )
  {
    goto LABEL_16;
  }
  if ( v21->fields._size >= 1 )
  {
    v29 = (BattleLogicTask_array *)System_Collections_Generic_List_WarBoardUiData_SaveData___ToArray(
                                     (System_Collections_Generic_List_WarBoardUiData_SaveData__o *)v21,
                                     (const MethodInfo_2F27E24 *)Method_System_Collections_Generic_List_BattleLogicTask__ToArray__);
    v31 = BattleLogic__waitWaveStep(this, v29, progressFlg, v30);
    UnityEngine_MonoBehaviour__StartCoroutine_34804316((UnityEngine_MonoBehaviour_o *)this, v31, 0LL);
    return;
  }
LABEL_14:
  fsm = this->fields.fsm;
  if ( !fsm )
    goto LABEL_16;
  PlayMakerFSM__SendEvent(fsm, (System_String_o *)StringLiteral_12204, 0LL);
}


void __fastcall BattleLogic__CheckServantAiWaveStart(BattleLogic_o *this, const MethodInfo *method)
{
  const MethodInfo *v2; // x3

  BattleLogic__CheckServantAiWaveBase(this, 16, 6, v2);
}


void __fastcall BattleLogic__ClearDeadAttackCommand(BattleLogic_o *this, const MethodInfo *method)
{
  struct System_Collections_Generic_Dictionary_int__BattleCommandData__o *deadAttackCommandDictionary; // x0

  if ( (byte_40F7359 & 1) == 0 )
  {
    sub_B16FFC(&Method_System_Collections_Generic_Dictionary_int__BattleCommandData__Clear__, method);
    byte_40F7359 = 1;
  }
  if ( !BasicHelper__IsNullOrEmpty((System_Collections_ICollection_o *)this->fields.deadAttackCommandDictionary, 0LL) )
  {
    deadAttackCommandDictionary = this->fields.deadAttackCommandDictionary;
    if ( !deadAttackCommandDictionary )
      sub_B170D4();
    System_Collections_Generic_Dictionary_int__WarBoardAIRoute_PiecePersonality___Clear(
      (System_Collections_Generic_Dictionary_int__WarBoardAIRoute_PiecePersonality__o *)deadAttackCommandDictionary,
      (const MethodInfo_2DE9598 *)Method_System_Collections_Generic_Dictionary_int__BattleCommandData__Clear__);
  }
}


System_Collections_IEnumerator_o *__fastcall BattleLogic__CorCallServant(
        BattleLogic_o *this,
        BattleActionData_o *actionData,
        const MethodInfo *method)
{
  __int64 v3; // x3
  __int64 v4; // x4
  BattleLogic__CorCallServant_d__328_o *v7; // x21

  if ( (byte_40F73FB & 1) == 0 )
  {
    sub_B16FFC(&BattleLogic__CorCallServant_d__328_TypeInfo, actionData);
    byte_40F73FB = 1;
  }
  v7 = (BattleLogic__CorCallServant_d__328_o *)sub_B170CC(
                                                 BattleLogic__CorCallServant_d__328_TypeInfo,
                                                 actionData,
                                                 method,
                                                 v3,
                                                 v4);
  BattleLogic__CorCallServant_d__328___ctor(v7, 0, 0LL);
  if ( !v7 )
    sub_B170D4();
  v7->fields.__4__this = this;
  sub_B16F98(&v7->fields.__4__this, this);
  v7->fields.actionData = actionData;
  sub_B16F98(&v7->fields.actionData, actionData);
  return (System_Collections_IEnumerator_o *)v7;
}


System_Collections_IEnumerator_o *__fastcall BattleLogic__CorFieldCallServant(
        BattleLogic_o *this,
        BattleActionData_o *actionData,
        const MethodInfo *method)
{
  __int64 v3; // x3
  __int64 v4; // x4
  BattleLogic__CorFieldCallServant_d__331_o *v7; // x21

  if ( (byte_40F73FD & 1) == 0 )
  {
    sub_B16FFC(&BattleLogic__CorFieldCallServant_d__331_TypeInfo, actionData);
    byte_40F73FD = 1;
  }
  v7 = (BattleLogic__CorFieldCallServant_d__331_o *)sub_B170CC(
                                                      BattleLogic__CorFieldCallServant_d__331_TypeInfo,
                                                      actionData,
                                                      method,
                                                      v3,
                                                      v4);
  BattleLogic__CorFieldCallServant_d__331___ctor(v7, 0, 0LL);
  if ( !v7 )
    sub_B170D4();
  v7->fields.__4__this = this;
  sub_B16F98(&v7->fields.__4__this, this);
  v7->fields.actionData = actionData;
  sub_B16F98(&v7->fields.actionData, actionData);
  return (System_Collections_IEnumerator_o *)v7;
}


System_Collections_IEnumerator_o *__fastcall BattleLogic__CoroutineCheckAssistSkill(
        BattleLogic_o *this,
        const MethodInfo *method)
{
  __int64 v2; // x2
  __int64 v3; // x3
  __int64 v4; // x4
  BattleLogic__CoroutineCheckAssistSkill_d__346_o *v6; // x20

  if ( (byte_40F7401 & 1) == 0 )
  {
    sub_B16FFC(&BattleLogic__CoroutineCheckAssistSkill_d__346_TypeInfo, method);
    byte_40F7401 = 1;
  }
  v6 = (BattleLogic__CoroutineCheckAssistSkill_d__346_o *)sub_B170CC(
                                                            BattleLogic__CoroutineCheckAssistSkill_d__346_TypeInfo,
                                                            method,
                                                            v2,
                                                            v3,
                                                            v4);
  BattleLogic__CoroutineCheckAssistSkill_d__346___ctor(v6, 0, 0LL);
  if ( !v6 )
    sub_B170D4();
  v6->fields.__4__this = this;
  sub_B16F98(&v6->fields.__4__this, this);
  return (System_Collections_IEnumerator_o *)v6;
}


System_Collections_IEnumerator_o *__fastcall BattleLogic__CoroutineInitQuest(
        BattleLogic_o *this,
        System_Action_o *finishCallback,
        const MethodInfo *method)
{
  __int64 v3; // x3
  __int64 v4; // x4
  BattleLogic__CoroutineInitQuest_d__318_o *v7; // x21

  if ( (byte_40F73F6 & 1) == 0 )
  {
    sub_B16FFC(&BattleLogic__CoroutineInitQuest_d__318_TypeInfo, finishCallback);
    byte_40F73F6 = 1;
  }
  v7 = (BattleLogic__CoroutineInitQuest_d__318_o *)sub_B170CC(
                                                     BattleLogic__CoroutineInitQuest_d__318_TypeInfo,
                                                     finishCallback,
                                                     method,
                                                     v3,
                                                     v4);
  BattleLogic__CoroutineInitQuest_d__318___ctor(v7, 0, 0LL);
  if ( !v7 )
    sub_B170D4();
  v7->fields.__4__this = this;
  sub_B16F98(&v7->fields.__4__this, this);
  v7->fields.finishCallback = finishCallback;
  sub_B16F98(&v7->fields.finishCallback, finishCallback);
  return (System_Collections_IEnumerator_o *)v7;
}


BattleActionData_o *__fastcall BattleLogic__CreateActionDataTaskSide(
        BattleLogic_o *this,
        BattleLogicTask_o *task,
        const MethodInfo *method)
{
  if ( !task )
    sub_B170D4();
  return (BattleActionData_o *)((__int64 (__fastcall *)(BattleLogicTask_o *, BattleLogic_o *, Il2CppMethodPointer))task->klass->vtable._6_MakeActionData.method)(
                                 task,
                                 this,
                                 task->klass->vtable._7_AfterCreateAction.methodPtr);
}


BattleActionData_o *__fastcall BattleLogic__CreateCommonFieldPlayMotion(
        BattleLogic_o *this,
        BattleLogicTask_o *task,
        BattleActionData_o *actiondata,
        const MethodInfo *method)
{
  struct System_String_o *motionName; // x1
  struct System_String_o *motionMessage; // x1
  struct UnityEngine_GameObject_o *targetObject; // x1

  if ( !actiondata || (BattleActionData__setStateField(actiondata, 0LL), !task) )
    sub_B170D4();
  actiondata->fields.isForcedSpeedOne = task->fields.isForcedSpeedOne;
  motionName = task->fields.motionName;
  actiondata->fields.motionname = motionName;
  sub_B16F98(&actiondata->fields.motionname, motionName);
  motionMessage = task->fields.motionMessage;
  actiondata->fields.motionMessage = motionMessage;
  sub_B16F98(&actiondata->fields.motionMessage, motionMessage);
  targetObject = task->fields.targetObject;
  actiondata->fields.targetObject = targetObject;
  sub_B16F98(&actiondata->fields.targetObject, targetObject);
  return actiondata;
}


BattleActionData_o *__fastcall BattleLogic__CreateFieldPlayMotion(
        BattleLogic_o *this,
        BattleLogicTask_o *task,
        const MethodInfo *method)
{
  __int64 v3; // x3
  __int64 v4; // x4
  BattleActionData_o *v6; // x20
  BattleLogic_o *v7; // x0
  const MethodInfo *v8; // x3

  if ( (byte_40F7390 & 1) == 0 )
  {
    sub_B16FFC(&BattleActionData_TypeInfo, task);
    byte_40F7390 = 1;
  }
  v6 = (BattleActionData_o *)sub_B170CC(BattleActionData_TypeInfo, task, method, v3, v4);
  BattleActionData___ctor(v6, 0LL);
  return BattleLogic__CreateCommonFieldPlayMotion(v7, task, v6, v8);
}


void __fastcall BattleLogic__DelayForceResetTimeForSkip(BattleLogic_o *this, const MethodInfo *method)
{
  BattlePerformance_o *perf; // x0
  BaseMotionSkip_o *MotionSkip; // x0
  float v5; // s0

  if ( (byte_40F7378 & 1) == 0 )
  {
    sub_B16FFC(&StringLiteral_6723, method);
    byte_40F7378 = 1;
  }
  perf = this->fields.perf;
  if ( !perf || (MotionSkip = BattlePerformance__get_MotionSkip(perf, 0LL)) == 0LL )
    sub_B170D4();
  v5 = ((float (__fastcall *)(BaseMotionSkip_o *, Il2CppMethodPointer))MotionSkip->klass->vtable._5_get_ResetTimeScaleDelayTime.method)(
         MotionSkip,
         MotionSkip->klass->vtable._6_Init.methodPtr);
  UnityEngine_MonoBehaviour__Invoke((UnityEngine_MonoBehaviour_o *)this, (System_String_o *)StringLiteral_6723, v5, 0LL);
}


void __fastcall BattleLogic__DoUpdateFieldBuff(const MethodInfo *method)
{
  __int64 v1; // x1
  __int64 v2; // x1
  BattleLogic_c *inited; // x0
  UnityEngine_Object_o *Instance; // x19
  BattleLogic_c *v5; // x0
  BattleLogic_o *v6; // x0
  const MethodInfo *v7; // x1

  if ( (byte_40F7355 & 1) == 0 )
  {
    sub_B16FFC(&BattleLogic_TypeInfo, v1);
    sub_B16FFC(&UnityEngine_Object_TypeInfo, v2);
    byte_40F7355 = 1;
  }
  inited = BattleLogic_TypeInfo;
  if ( (BYTE3(BattleLogic_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0 && !BattleLogic_TypeInfo->_2.cctor_finished )
    inited = (BattleLogic_c *)j_il2cpp_runtime_class_init_0(BattleLogic_TypeInfo);
  Instance = (UnityEngine_Object_o *)BattleLogic__get_Instance((const MethodInfo *)inited);
  if ( (BYTE3(UnityEngine_Object_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0
    && !UnityEngine_Object_TypeInfo->_2.cctor_finished )
  {
    j_il2cpp_runtime_class_init_0(UnityEngine_Object_TypeInfo);
  }
  if ( !UnityEngine_Object__op_Equality(Instance, 0LL, 0LL) )
  {
    v5 = BattleLogic_TypeInfo;
    if ( (BYTE3(BattleLogic_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0 && !BattleLogic_TypeInfo->_2.cctor_finished )
      v5 = (BattleLogic_c *)j_il2cpp_runtime_class_init_0(BattleLogic_TypeInfo);
    v6 = BattleLogic__get_Instance((const MethodInfo *)v5);
    if ( !v6 )
      sub_B170D4();
    BattleLogic__updateFieldBuff(v6, v7);
  }
}


void __fastcall BattleLogic__DropItemCollection(BattleLogic_o *this, const MethodInfo *method)
{
  BattlePerformance_o *perf; // x0
  const MethodInfo *v4; // x1
  System_Collections_IEnumerator_o *v5; // x1
  PlayMakerFSM_o *fsm; // x0

  if ( (byte_40F736A & 1) == 0 )
  {
    sub_B16FFC(&StringLiteral_5481, method);
    byte_40F736A = 1;
  }
  perf = this->fields.perf;
  if ( !perf )
    goto LABEL_8;
  if ( BattlePerformance__IsItemDrop(perf, 0LL) )
  {
    v5 = BattleLogic__DropItemCollectionCoroutine(this, v4);
    UnityEngine_MonoBehaviour__StartCoroutine_34804316((UnityEngine_MonoBehaviour_o *)this, v5, 0LL);
    return;
  }
  fsm = this->fields.fsm;
  if ( !fsm )
LABEL_8:
    sub_B170D4();
  PlayMakerFSM__SendEvent(fsm, (System_String_o *)StringLiteral_5481, 0LL);
}


System_Collections_IEnumerator_o *__fastcall BattleLogic__DropItemCollectionCoroutine(
        BattleLogic_o *this,
        const MethodInfo *method)
{
  __int64 v2; // x2
  __int64 v3; // x3
  __int64 v4; // x4
  BattleLogic__DropItemCollectionCoroutine_d__94_o *v6; // x20

  if ( (byte_40F736B & 1) == 0 )
  {
    sub_B16FFC(&BattleLogic__DropItemCollectionCoroutine_d__94_TypeInfo, method);
    byte_40F736B = 1;
  }
  v6 = (BattleLogic__DropItemCollectionCoroutine_d__94_o *)sub_B170CC(
                                                             BattleLogic__DropItemCollectionCoroutine_d__94_TypeInfo,
                                                             method,
                                                             v2,
                                                             v3,
                                                             v4);
  BattleLogic__DropItemCollectionCoroutine_d__94___ctor(v6, 0, 0LL);
  if ( !v6 )
    sub_B170D4();
  v6->fields.__4__this = this;
  sub_B16F98(&v6->fields.__4__this, this);
  return (System_Collections_IEnumerator_o *)v6;
}


void __fastcall BattleLogic__EndRequestBattleUseItem(
        BattleLogic_o *this,
        System_String_o *result,
        const MethodInfo *method)
{
  __int64 v5; // x1
  __int64 v6; // x1
  __int64 v7; // x1
  __int64 v8; // x1
  __int64 v9; // x1
  __int64 v10; // x1
  __int64 v11; // x1
  __int64 v12; // x1
  __int64 v13; // x1
  __int64 v14; // x1
  CommonUI_o *Instance; // x20
  System_String_o *v16; // x21
  System_String_o *v17; // x22
  __int64 v18; // x1
  __int64 v19; // x2
  __int64 v20; // x3
  __int64 v21; // x4
  NotificationDialog_ClickDelegate_o *v22; // x23
  struct BattlePerformance_o *perf; // x8
  struct BattlePerformanceStatus_o *statusPerf; // x8
  BattlePerformanceMaster_o *masterPerf; // x0
  struct BattleData_o *data; // x8
  PlayMakerFSM_o *fsm; // x0
  __int64 *v28; // x8

  if ( (byte_40F73C6 & 1) == 0 )
  {
    sub_B16FFC(&BattleData_TypeInfo, result);
    sub_B16FFC(&Method_BattleLogic_requestBattleUseItemErrorDialog__, v5);
    sub_B16FFC(&NotificationDialog_ClickDelegate_TypeInfo, v6);
    sub_B16FFC(&LocalizationManager_TypeInfo, v7);
    sub_B16FFC(&Method_SingletonMonoBehaviour_CommonUI__get_Instance__, v8);
    sub_B16FFC(&StringLiteral_13402, v9);
    sub_B16FFC(&StringLiteral_2404, v10);
    sub_B16FFC(&StringLiteral_5481, v11);
    sub_B16FFC(&StringLiteral_20980, v12);
    sub_B16FFC(&StringLiteral_2403, v13);
    sub_B16FFC(&StringLiteral_1, v14);
    byte_40F73C6 = 1;
  }
  if ( System_String__op_Equality(result, (System_String_o *)StringLiteral_20980, 0LL) )
  {
    Instance = (CommonUI_o *)SingletonMonoBehaviour_WebViewManager___get_Instance((const MethodInfo_2A54F38 *)Method_SingletonMonoBehaviour_CommonUI__get_Instance__);
    if ( (BYTE3(LocalizationManager_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0
      && !LocalizationManager_TypeInfo->_2.cctor_finished )
    {
      j_il2cpp_runtime_class_init_0(LocalizationManager_TypeInfo);
    }
    v16 = LocalizationManager__Get((System_String_o *)StringLiteral_2404, 0LL);
    v17 = LocalizationManager__Get((System_String_o *)StringLiteral_2403, 0LL);
    v22 = (NotificationDialog_ClickDelegate_o *)sub_B170CC(
                                                  NotificationDialog_ClickDelegate_TypeInfo,
                                                  v18,
                                                  v19,
                                                  v20,
                                                  v21);
    NotificationDialog_ClickDelegate___ctor(
      v22,
      (Il2CppObject *)this,
      Method_BattleLogic_requestBattleUseItemErrorDialog__,
      0LL);
    if ( Instance )
    {
      CommonUI__OpenNotificationDialog_18239760(
        Instance,
        v16,
        v17,
        v22,
        -1,
        0,
        0,
        0,
        0,
        1,
        0LL,
        0LL,
        0,
        0,
        0LL,
        1,
        0LL,
        0LL,
        0LL,
        0LL);
      return;
    }
LABEL_23:
    sub_B170D4();
  }
  perf = this->fields.perf;
  if ( !perf )
    goto LABEL_23;
  statusPerf = perf->fields.statusPerf;
  if ( !statusPerf )
    goto LABEL_23;
  masterPerf = statusPerf->fields.masterPerf;
  if ( !masterPerf )
    goto LABEL_23;
  BattlePerformanceMaster__updateSkillIcon(masterPerf, 0LL);
  if ( (BYTE3(BattleData_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0 && !BattleData_TypeInfo->_2.cctor_finished )
    j_il2cpp_runtime_class_init_0(BattleData_TypeInfo);
  BattleData__SaveBattleUseItemParameter((System_String_o *)StringLiteral_1, 0, 0LL);
  BattleData__setContinueBattleFlg(0, 1, 0LL);
  data = this->fields.data;
  if ( !data )
    goto LABEL_23;
  if ( data->fields.tutorialId == 2 && data->fields.tutorialState == 5 )
  {
    data->fields.tutorialState = 10;
    fsm = this->fields.fsm;
    if ( !fsm )
      goto LABEL_23;
    v28 = &StringLiteral_13402;
  }
  else
  {
    fsm = this->fields.fsm;
    if ( !fsm )
      goto LABEL_23;
    v28 = &StringLiteral_5481;
  }
  PlayMakerFSM__SendEvent(fsm, (System_String_o *)*v28, 0LL);
}


void __fastcall BattleLogic__EnemyDropItem(BattleLogic_o *this, const MethodInfo *method)
{
  __int64 v2; // x2
  const MethodInfo *v3; // x3
  struct BattlePerformance_o *perf; // x8
  BattleLogic_o *v5; // x19
  unsigned __int64 v6; // x20
  struct UnityEngine_GameObject_array *e_actorlist; // x8
  unsigned __int64 max_length; // x9
  BattleActorControl_o *actor; // [xsp+8h] [xbp-18h] BYREF

  actor = 0LL;
  perf = this->fields.perf;
  if ( !perf )
LABEL_10:
    sub_B170D4();
  v5 = this;
  v6 = 0LL;
  while ( 1 )
  {
    e_actorlist = perf->fields.e_actorlist;
    if ( !e_actorlist )
      goto LABEL_10;
    max_length = e_actorlist->max_length;
    if ( (__int64)v6 >= (int)max_length )
      break;
    actor = 0LL;
    if ( v6 >= max_length )
    {
      sub_B17100(this, method, v2);
      sub_B170A0();
    }
    this = (BattleLogic_o *)BattleLogic__CheckEnemyDropItem(v5, e_actorlist->m_Items[v6], &actor, v3);
    if ( ((unsigned __int8)this & 1) != 0 )
    {
      if ( !actor )
        goto LABEL_10;
      BattleActorControl__startDropItem(actor, 0, 0LL);
    }
    perf = v5->fields.perf;
    ++v6;
    if ( !perf )
      goto LABEL_10;
  }
}


// local variable allocation has failed, the output may be wrong!
UnityEngine_Vector2_o __fastcall BattleLogic__FSTuArrow(BattleLogic_o *this, int32_t tuState, const MethodInfo *method)
{
  BattleLogic_o *v4; // x20
  struct UnityEngine_Vector2_array *TuArrow; // x8
  float *v6; // x8
  float v7; // s8
  float v8; // s9
  bool IsUnderVista; // w0
  float v10; // s0
  float v11; // s0
  float v12; // s1
  UnityEngine_Vector2_o result; // 0:s0.4,4:s1.4

  v4 = this;
  if ( (byte_40F73E9 & 1) == 0 )
  {
    this = (BattleLogic_o *)sub_B16FFC(&FSUtility_TypeInfo, *(_QWORD *)&tuState);
    byte_40F73E9 = 1;
  }
  TuArrow = v4->fields.TuArrow;
  if ( !TuArrow )
    sub_B170D4();
  if ( TuArrow->max_length <= tuState )
  {
    sub_B17100(this, *(_QWORD *)&tuState, method);
    sub_B170A0();
  }
  v6 = (float *)(&TuArrow->obj.klass + tuState);
  v8 = v6[8];
  v7 = v6[9];
  if ( tuState == 1 )
  {
    if ( (BYTE3(FSUtility_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0 && !FSUtility_TypeInfo->_2.cctor_finished )
      j_il2cpp_runtime_class_init_0(FSUtility_TypeInfo);
    v8 = v8 - FSUtility__GetOffsetX(40.0, 0, 0LL);
    IsUnderVista = FSUtility__IsUnderVista(0LL);
    v10 = 17.0;
    if ( IsUnderVista )
      v10 = 0.0;
    v7 = v7 + v10;
  }
  else if ( !tuState )
  {
    if ( (BYTE3(FSUtility_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0 && !FSUtility_TypeInfo->_2.cctor_finished )
      j_il2cpp_runtime_class_init_0(FSUtility_TypeInfo);
    v8 = v8 + FSUtility__GetOffsetX(68.0, 0, 0LL);
  }
  v11 = v8;
  v12 = v7;
  result.fields.y = v12;
  result.fields.x = v11;
  return result;
}


// local variable allocation has failed, the output may be wrong!
UnityEngine_Rect_o __fastcall BattleLogic__FSTuSquare(BattleLogic_o *this, int32_t tuState, const MethodInfo *method)
{
  int v3; // s1
  BattleLogic_o *v7; // x20
  struct UnityEngine_Rect_array *TuSquare; // x8
  __int128 v9; // q0
  float v10; // s8
  float v11; // s4
  float x; // s8
  float v13; // s4
  float y; // s8
  bool IsUnderVista; // w0
  float v18; // s4
  float v19; // s0
  int v20; // s1
  float v21; // s0
  float v22; // s0
  float v23; // s1
  float v24; // s2
  float v25; // s3
  __int128 v26; // [xsp+0h] [xbp-30h] BYREF
  UnityEngine_Rect_o v27; // 0:s0.4,4:s1.4,8:s2.4,12:s3.4
  UnityEngine_Rect_o v28; // 0:s0.4,4:s1.4,8:s2.4,12:s3.4
  UnityEngine_Rect_o v29; // 0:s0.4,4:s1.4,8:s2.4,12:s3.4
  UnityEngine_Rect_o result; // 0:s0.4,4:s1.4,8:s2.4,12:s3.4

  v7 = this;
  if ( (byte_40F73EA & 1) == 0 )
  {
    this = (BattleLogic_o *)sub_B16FFC(&FSUtility_TypeInfo, *(_QWORD *)&tuState);
    byte_40F73EA = 1;
  }
  v26 = 0uLL;
  TuSquare = v7->fields.TuSquare;
  if ( !TuSquare )
    sub_B170D4();
  if ( TuSquare->max_length <= tuState )
  {
    sub_B17100(this, *(_QWORD *)&tuState, method);
    sub_B170A0();
  }
  v9 = *(_OWORD *)&TuSquare->m_Items[tuState].fields.m_YMin;
  v26 = v9;
  if ( tuState == 1 )
  {
    x = UnityEngine_Rect__get_x(*(UnityEngine_Rect_o *)(&v3 - 1), (const MethodInfo *)&v26);
    if ( (BYTE3(FSUtility_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0 && !FSUtility_TypeInfo->_2.cctor_finished )
      j_il2cpp_runtime_class_init_0(FSUtility_TypeInfo);
    v28.fields.m_XMin = x - FSUtility__GetOffsetX(40.0, 0, 0LL);
    UnityEngine_Rect__set_x(v28, v13, (const MethodInfo *)&v26);
    y = UnityEngine_Rect__get_y(v29, (const MethodInfo *)&v26);
    IsUnderVista = FSUtility__IsUnderVista(0LL);
    v19 = 17.0;
    v20 = 0;
    if ( IsUnderVista )
      v19 = 0.0;
    v21 = y + v19;
    UnityEngine_Rect__set_y(*(UnityEngine_Rect_o *)(&v20 - 1), v18, (const MethodInfo *)&v26);
  }
  else if ( !tuState )
  {
    v10 = UnityEngine_Rect__get_x(*(UnityEngine_Rect_o *)(&v3 - 1), (const MethodInfo *)&v26);
    if ( (BYTE3(FSUtility_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0 && !FSUtility_TypeInfo->_2.cctor_finished )
      j_il2cpp_runtime_class_init_0(FSUtility_TypeInfo);
    v27.fields.m_XMin = v10 + FSUtility__GetOffsetX(68.0, 0, 0LL);
    UnityEngine_Rect__set_x(v27, v11, (const MethodInfo *)&v26);
  }
  v23 = *((float *)&v26 + 1);
  v22 = *(float *)&v26;
  v25 = *((float *)&v26 + 3);
  v24 = *((float *)&v26 + 2);
  result.fields.m_Height = v25;
  result.fields.m_Width = v24;
  result.fields.m_YMin = v23;
  result.fields.m_XMin = v22;
  return result;
}


void __fastcall BattleLogic__FieldCallServant(
        BattleLogic_o *this,
        BattleActionData_o *actionData,
        const MethodInfo *method)
{
  System_Collections_IEnumerator_o *v4; // x1

  v4 = BattleLogic__CorFieldCallServant(this, actionData, method);
  UnityEngine_MonoBehaviour__StartCoroutine_34804316((UnityEngine_MonoBehaviour_o *)this, v4, 0LL);
}


void __fastcall BattleLogic__ForceResetTimeAcceleration(BattleLogic_o *this, const MethodInfo *method)
{
  BattlePerformance_o *perf; // x0

  perf = this->fields.perf;
  if ( !perf )
    sub_B170D4();
  BattlePerformance__SetTimeScale(perf, 1.0, 0LL);
}


// local variable allocation has failed, the output may be wrong!
BattleLogicTask_array *__fastcall BattleLogic__GetBuffTaskArray(
        BattleLogic_o *this,
        BattleServantData_array *servantArray,
        int32_t actionType,
        const MethodInfo *method)
{
  __int64 v4; // x4
  int32_t v5; // w26
  __int64 v8; // x1
  __int64 v9; // x1
  __int64 v10; // x1
  __int64 v11; // x1
  __int64 v12; // x1
  __int64 v13; // x1
  System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData__o *v14; // x22
  __int64 isAlive; // x0
  __int64 v16; // x1
  __int64 v17; // x2
  const MethodInfo *v18; // x3
  signed int max_length; // w8
  unsigned int v20; // w27
  Il2CppClass **v21; // x8
  BattleServantData_o *v22; // x23
  __int64 v23; // x4
  BattleBuffData_o *buffData; // x24
  BattleBuffData_CheckIndividualitiesData_o *v25; // x25
  __int64 v26; // x4
  __int64 v27; // x8
  __int64 v28; // x24
  char v29; // w28
  __int64 v30; // x20
  __int64 v31; // x26
  BattleSkillInfoData_o *v32; // x25
  __int64 v33; // x8
  __int64 v34; // x8
  BattleLogicSkill_o *logicSkill; // x26
  System_Collections_ICollection_o *v36; // x0
  System_Collections_ICollection_o *v37; // x25
  char v38; // w26
  BattleLogicTask_o *klass; // x0
  BattleBuffData_o *v40; // x0
  int32_t v42; // [xsp+Ch] [xbp-54h]

  v5 = actionType;
  if ( (byte_40F7405 & 1) == 0 )
  {
    sub_B16FFC(&BattleSkillInfoData_TypeInfo, servantArray);
    sub_B16FFC(&BattleBuffData_CheckIndividualitiesData_TypeInfo, v8);
    sub_B16FFC(&int___TypeInfo, v9);
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleLogicTask__AddRange__, v10);
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleLogicTask__ToArray__, v11);
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleLogicTask___ctor__, v12);
    sub_B16FFC(&System_Collections_Generic_List_BattleLogicTask__TypeInfo, v13);
    byte_40F7405 = 1;
  }
  v14 = (System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData__o *)sub_B170CC(
                                                                                                  System_Collections_Generic_List_BattleLogicTask__TypeInfo,
                                                                                                  servantArray,
                                                                                                  *(_QWORD *)&actionType,
                                                                                                  method,
                                                                                                  v4);
  System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData____ctor(
    v14,
    (const MethodInfo_2F25014 *)Method_System_Collections_Generic_List_BattleLogicTask___ctor__);
  if ( !servantArray )
    goto LABEL_41;
  max_length = servantArray->max_length;
  if ( max_length >= 1 )
  {
    v20 = 0;
    v42 = v5;
    do
    {
      if ( v20 >= max_length )
      {
LABEL_42:
        sub_B17100(isAlive, v16, v17);
        sub_B170A0();
      }
      v21 = &servantArray->obj.klass + (int)v20;
      v22 = (BattleServantData_o *)v21[4];
      if ( !v22 )
        goto LABEL_41;
      isAlive = BattleServantData__isAlive((BattleServantData_o *)v21[4], 0, 0LL);
      if ( (isAlive & 1) != 0 )
      {
        buffData = v22->fields.buffData;
        v25 = (BattleBuffData_CheckIndividualitiesData_o *)sub_B170CC(
                                                             BattleBuffData_CheckIndividualitiesData_TypeInfo,
                                                             v16,
                                                             v17,
                                                             v18,
                                                             v23);
        BattleBuffData_CheckIndividualitiesData___ctor(v25, v22, 0LL, 0LL, 0LL, 0LL, 0LL);
        if ( !buffData )
          goto LABEL_41;
        isAlive = (__int64)BattleBuffData__getBuffList_31040328(buffData, v5, v25, 1, 0, 0LL);
        if ( isAlive )
        {
          v27 = *(_QWORD *)(isAlive + 24);
          v28 = isAlive;
          if ( v27 )
          {
            if ( (int)v27 >= 1 )
            {
              v29 = 1;
              v30 = 4LL;
              while ( 1 )
              {
                if ( (int)v30 - 4 >= (unsigned int)v27 )
                  goto LABEL_42;
                v31 = *(_QWORD *)(v28 + 8 * v30);
                if ( !v31 )
                  goto LABEL_41;
                if ( !*(_BYTE *)(v31 + 370) )
                  break;
LABEL_35:
                if ( (int)++v30 - 4 >= (int)v27 )
                  goto LABEL_36;
              }
              v32 = (BattleSkillInfoData_o *)sub_B170CC(BattleSkillInfoData_TypeInfo, v16, v17, v18, v26);
              BattleSkillInfoData___ctor(v32, 0LL);
              if ( !v32 )
                goto LABEL_41;
              v32->fields.svtUniqueId = v22->fields.uniqueId;
              v33 = *(_QWORD *)(v31 + 40);
              if ( !v33 )
                goto LABEL_41;
              if ( !*(_DWORD *)(v33 + 24) )
                goto LABEL_42;
              isAlive = ((__int64 (__fastcall *)(BattleSkillInfoData_o *, _QWORD, Il2CppMethodPointer))v32->klass->vtable._4_set_skillId.method)(
                          v32,
                          *(unsigned int *)(v33 + 32),
                          v32->klass->vtable._5_get_skillId.methodPtr);
              v34 = *(_QWORD *)(v31 + 40);
              if ( !v34 )
                goto LABEL_41;
              if ( *(_DWORD *)(v34 + 24) <= 1u )
                goto LABEL_42;
              v32->fields.skilllv = *(_DWORD *)(v34 + 36);
              logicSkill = this->fields.logicSkill;
              isAlive = sub_B17014(int___TypeInfo, 1LL, v17);
              if ( !isAlive )
                goto LABEL_41;
              v17 = isAlive;
              if ( !*(_DWORD *)(isAlive + 24) )
                goto LABEL_42;
              *(_DWORD *)(isAlive + 32) = v22->fields.uniqueId;
              if ( !logicSkill )
                goto LABEL_41;
              v36 = (System_Collections_ICollection_o *)BattleLogicSkill__taskSkill(
                                                          logicSkill,
                                                          v32,
                                                          (System_Int32_array *)isAlive,
                                                          0LL,
                                                          0,
                                                          0,
                                                          0,
                                                          0LL);
              v37 = v36;
              v38 = 0;
              if ( (v29 & 1) != 0 )
              {
                isAlive = BasicHelper__IsNullOrEmpty(v36, 0LL);
                if ( (isAlive & 1) != 0 )
                {
                  v38 = 1;
                  if ( !v14 )
                    goto LABEL_41;
LABEL_34:
                  System_Collections_Generic_List_TimeZoneInfo_AdjustmentRule___AddRange(
                    (System_Collections_Generic_List_TimeZoneInfo_AdjustmentRule__o *)v14,
                    (System_Collections_Generic_IEnumerable_T__o *)v37,
                    (const MethodInfo_2F25F28 *)Method_System_Collections_Generic_List_BattleLogicTask__AddRange__);
                  v27 = *(_QWORD *)(v28 + 24);
                  v29 = v38;
                  goto LABEL_35;
                }
                if ( !v37 )
                  goto LABEL_41;
                if ( !LODWORD(v37[1].monitor) )
                  goto LABEL_42;
                klass = (BattleLogicTask_o *)v37[2].klass;
                if ( !klass )
                  goto LABEL_41;
                BattleLogicTask__SetDisplayTriggerIntervalBuff(klass, v22, (BattleBuffData_BuffData_array *)v28, 0LL);
                v38 = 0;
              }
              if ( !v14 )
                goto LABEL_41;
              goto LABEL_34;
            }
LABEL_36:
            v40 = v22->fields.buffData;
            if ( !v40 )
              goto LABEL_41;
            isAlive = (__int64)BattleBuffData__usedProgressing(v40, 0LL);
            v5 = v42;
          }
        }
      }
      max_length = servantArray->max_length;
    }
    while ( (int)++v20 < max_length );
  }
  BattleLogic__AddUnExecutedUpdateIntervalBuffTasks(
    this,
    (System_Collections_Generic_List_BattleLogicTask__o *)v14,
    1,
    v18);
  if ( !v14 )
LABEL_41:
    sub_B170D4();
  return (BattleLogicTask_array *)System_Collections_Generic_List_WarBoardUiData_SaveData___ToArray(
                                    (System_Collections_Generic_List_WarBoardUiData_SaveData__o *)v14,
                                    (const MethodInfo_2F27E24 *)Method_System_Collections_Generic_List_BattleLogicTask__ToArray__);
}


// local variable allocation has failed, the output may be wrong!
System_String_o *__fastcall BattleLogic__GetCommandSpellAssetName(
        BattleLogic_o *this,
        int32_t id,
        const MethodInfo *method)
{
  __int64 v4; // x1
  BattleLogic_c *v5; // x0
  System_String_o *COMMAND_SPELL_EFFECT_ASSETNAME; // x20
  Il2CppObject *v7; // x0
  int32_t v9; // [xsp+Ch] [xbp-14h] BYREF

  if ( (byte_40F73D2 & 1) == 0 )
  {
    sub_B16FFC(&BattleLogic_TypeInfo, *(_QWORD *)&id);
    sub_B16FFC(&int_TypeInfo, v4);
    byte_40F73D2 = 1;
  }
  v5 = BattleLogic_TypeInfo;
  if ( (BYTE3(BattleLogic_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0 && !BattleLogic_TypeInfo->_2.cctor_finished )
  {
    j_il2cpp_runtime_class_init_0(BattleLogic_TypeInfo);
    v5 = BattleLogic_TypeInfo;
  }
  COMMAND_SPELL_EFFECT_ASSETNAME = v5->static_fields->COMMAND_SPELL_EFFECT_ASSETNAME;
  v9 = id;
  v7 = (Il2CppObject *)j_il2cpp_value_box_0(int_TypeInfo, &v9);
  return System_String__Format(COMMAND_SPELL_EFFECT_ASSETNAME, v7, 0LL);
}


// local variable allocation has failed, the output may be wrong!
System_String_o *__fastcall BattleLogic__GetCommandSpellPrefabName(
        BattleLogic_o *this,
        int32_t id,
        const MethodInfo *method)
{
  __int64 v4; // x1
  BattleLogic_c *v5; // x0
  System_String_o *COMMAND_SPELL_EFFECT_PREFABNAME; // x20
  Il2CppObject *v7; // x0
  int32_t v9; // [xsp+Ch] [xbp-14h] BYREF

  if ( (byte_40F73D3 & 1) == 0 )
  {
    sub_B16FFC(&BattleLogic_TypeInfo, *(_QWORD *)&id);
    sub_B16FFC(&int_TypeInfo, v4);
    byte_40F73D3 = 1;
  }
  v5 = BattleLogic_TypeInfo;
  if ( (BYTE3(BattleLogic_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0 && !BattleLogic_TypeInfo->_2.cctor_finished )
  {
    j_il2cpp_runtime_class_init_0(BattleLogic_TypeInfo);
    v5 = BattleLogic_TypeInfo;
  }
  COMMAND_SPELL_EFFECT_PREFABNAME = v5->static_fields->COMMAND_SPELL_EFFECT_PREFABNAME;
  v9 = id;
  v7 = (Il2CppObject *)j_il2cpp_value_box_0(int_TypeInfo, &v9);
  return System_String__Format(COMMAND_SPELL_EFFECT_PREFABNAME, v7, 0LL);
}


// local variable allocation has failed, the output may be wrong!
BattleCommandData_o *__fastcall BattleLogic__GetDeadAttackCommand(
        BattleLogic_o *this,
        int32_t targetUniqueId,
        const MethodInfo *method)
{
  struct System_Collections_Generic_Dictionary_int__BattleCommandData__o *deadAttackCommandDictionary; // x0
  WarBoardEvalValueSquare_CalcEval_o *value; // [xsp+8h] [xbp-18h] BYREF

  if ( (byte_40F7357 & 1) == 0 )
  {
    sub_B16FFC(
      &Method_System_Collections_Generic_Dictionary_int__BattleCommandData__TryGetValue__,
      *(_QWORD *)&targetUniqueId);
    byte_40F7357 = 1;
  }
  value = 0LL;
  deadAttackCommandDictionary = this->fields.deadAttackCommandDictionary;
  if ( !deadAttackCommandDictionary )
    sub_B170D4();
  if ( System_Collections_Generic_Dictionary_int__WarBoardEvalValueSquare_CalcEval___TryGetValue(
         (System_Collections_Generic_Dictionary_int__WarBoardEvalValueSquare_CalcEval__o *)deadAttackCommandDictionary,
         targetUniqueId,
         &value,
         (const MethodInfo_2DEB0E0 *)Method_System_Collections_Generic_Dictionary_int__BattleCommandData__TryGetValue__) )
  {
    return (BattleCommandData_o *)value;
  }
  else
  {
    return 0LL;
  }
}


System_String_o *__fastcall BattleLogic__GetDefaultBgmName(BattleLogic_o *this, const MethodInfo *method)
{
  __int64 v3; // x1
  __int64 v4; // x1
  __int64 v5; // x1
  struct BattleData_o *data; // x8
  BattleEntity_o *battle_ent; // x0
  StageEntity_o *StageEntityAtWave; // x0
  System_String_o *v9; // x19
  int32_t bgmId; // w20
  WebViewManager_o *Instance; // x0
  DataMasterBase_WarMaster__WarEntity__int__o *MasterData_WarQuestSelectionMaster; // x0
  WarEntity_o *entity; // [xsp+8h] [xbp-18h] BYREF

  if ( (byte_40F735D & 1) == 0 )
  {
    sub_B16FFC(&Method_DataManager_GetMasterData_BgmMaster___, method);
    sub_B16FFC(&Method_DataMasterBase_BgmMaster__BgmEntity__int__TryGetEntity__, v3);
    sub_B16FFC(&Method_SingletonMonoBehaviour_DataManager__get_Instance__, v4);
    sub_B16FFC(&StringLiteral_2539, v5);
    byte_40F735D = 1;
  }
  entity = 0LL;
  data = this->fields.data;
  if ( !data )
    goto LABEL_12;
  battle_ent = data->fields.battle_ent;
  if ( !battle_ent )
    goto LABEL_12;
  StageEntityAtWave = BattleEntity__GetStageEntityAtWave(battle_ent, data->fields.wavecount, 0LL);
  v9 = (System_String_o *)StringLiteral_2539;
  if ( StageEntityAtWave )
  {
    bgmId = StageEntityAtWave->fields.bgmId;
    Instance = SingletonMonoBehaviour_WebViewManager___get_Instance((const MethodInfo_2A54F38 *)Method_SingletonMonoBehaviour_DataManager__get_Instance__);
    if ( !Instance )
      goto LABEL_12;
    MasterData_WarQuestSelectionMaster = (DataMasterBase_WarMaster__WarEntity__int__o *)DataManager__GetMasterData_WarQuestSelectionMaster_(
                                                                                          (DataManager_o *)Instance,
                                                                                          (const MethodInfo_18C3284 *)Method_DataManager_GetMasterData_BgmMaster___);
    if ( !MasterData_WarQuestSelectionMaster )
      goto LABEL_12;
    if ( DataMasterBase_WarMaster__WarEntity__int___TryGetEntity(
           MasterData_WarQuestSelectionMaster,
           &entity,
           bgmId,
           (const MethodInfo_266F3E4 *)Method_DataMasterBase_BgmMaster__BgmEntity__int__TryGetEntity__) )
    {
      if ( entity )
        return entity->fields.age;
LABEL_12:
      sub_B170D4();
    }
  }
  return v9;
}


int32_t __fastcall BattleLogic__GetLogicType(BattleLogic_o *this, const MethodInfo *method)
{
  struct BattleData_o *data; // x8
  BattleAttackManager_o *battleAtkManager; // x8

  data = this->fields.data;
  if ( !data || (battleAtkManager = data->fields.battleAtkManager) == 0LL )
    sub_B170D4();
  return BattleAttackManager__GetLogicType(battleAtkManager, this->fields.logicindex, 0LL);
}


// local variable allocation has failed, the output may be wrong!
BattleLogicTask_array *__fastcall BattleLogic__GetTaskArrayByType(
        BattleLogic_o *this,
        int32_t type,
        const MethodInfo *method)
{
  __int64 v5; // x1
  __int64 v6; // x1
  struct System_Collections_Generic_Dictionary_BattleLogic_LOGICTYPE__BattleLogic_taskFunction__o *funclist; // x0
  __int64 v8; // x2
  struct System_Collections_Generic_Dictionary_BattleLogic_LOGICTYPE__BattleLogic_taskFunction__o *v9; // x0
  System_String_o *Item; // x0

  if ( (byte_40F7384 & 1) == 0 )
  {
    sub_B16FFC(&BattleLogicTask___TypeInfo, *(_QWORD *)&type);
    sub_B16FFC(
      &Method_System_Collections_Generic_Dictionary_BattleLogic_LOGICTYPE__BattleLogic_taskFunction__ContainsKey__,
      v5);
    sub_B16FFC(
      &Method_System_Collections_Generic_Dictionary_BattleLogic_LOGICTYPE__BattleLogic_taskFunction__get_Item__,
      v6);
    byte_40F7384 = 1;
  }
  funclist = this->fields.funclist;
  if ( !funclist )
    goto LABEL_9;
  if ( System_Collections_Generic_Dictionary_Voice_BATTLE__string___ContainsKey(
         (System_Collections_Generic_Dictionary_Voice_BATTLE__string__o *)funclist,
         type,
         (const MethodInfo_2DFFEC8 *)Method_System_Collections_Generic_Dictionary_BattleLogic_LOGICTYPE__BattleLogic_taskFunction__ContainsKey__) )
  {
    v9 = this->fields.funclist;
    if ( v9 )
    {
      Item = System_Collections_Generic_Dictionary_Voice_BATTLE__string___get_Item(
               (System_Collections_Generic_Dictionary_Voice_BATTLE__string__o *)v9,
               type,
               (const MethodInfo_2DFFB90 *)Method_System_Collections_Generic_Dictionary_BattleLogic_LOGICTYPE__BattleLogic_taskFunction__get_Item__);
      if ( Item )
        return BattleLogic_taskFunction__Invoke((BattleLogic_taskFunction_o *)Item, type, this->fields.data, 0LL);
    }
LABEL_9:
    sub_B170D4();
  }
  return (BattleLogicTask_array *)sub_B17014(BattleLogicTask___TypeInfo, 0LL, v8);
}


BattleLogicTask_array *__fastcall BattleLogic__GetTurnStartTaskArray(
        BattleLogic_o *this,
        bool isPlayer,
        const MethodInfo *method)
{
  BattleData_o *data; // x0
  BattleServantData_array *FieldPlayerServantList; // x0
  const MethodInfo *v6; // x3

  data = this->fields.data;
  if ( !data )
    sub_B170D4();
  if ( isPlayer )
    FieldPlayerServantList = BattleData__getFieldPlayerServantList(data, 0LL);
  else
    FieldPlayerServantList = BattleData__getFieldEnemyServantList(data, 0, 0LL);
  return BattleLogic__GetBuffTaskArray(this, FieldPlayerServantList, 108, v6);
}


void __fastcall BattleLogic__InitBuffProgress(BattleLogic_o *this, const MethodInfo *method)
{
  BattleData_o *data; // x0
  BattleServantData_array *PlayerServantList; // x0
  __int64 v5; // x1
  __int64 v6; // x2
  int max_length; // w9
  unsigned int v8; // w8
  BattleServantData_o *v9; // x9
  BattleData_o *v10; // x0
  int v11; // w9
  unsigned int v12; // w8
  BattleServantData_o *v13; // x9

  data = this->fields.data;
  if ( !data )
    goto LABEL_17;
  PlayerServantList = BattleData__getPlayerServantList(data, 0LL);
  if ( !PlayerServantList )
    goto LABEL_17;
  max_length = PlayerServantList->max_length;
  if ( max_length >= 1 )
  {
    v8 = 0;
    while ( v8 < max_length )
    {
      v9 = PlayerServantList->m_Items[v8];
      if ( !v9 )
        goto LABEL_17;
      v9->fields.isBuffProgressFlg = 0;
      max_length = PlayerServantList->max_length;
      if ( (int)++v8 >= max_length )
        goto LABEL_8;
    }
LABEL_16:
    sub_B17100(PlayerServantList, v5, v6);
    sub_B170A0();
  }
LABEL_8:
  v10 = this->fields.data;
  if ( !v10 || (PlayerServantList = BattleData__getEnemyServantList(v10, 0LL)) == 0LL )
LABEL_17:
    sub_B170D4();
  v11 = PlayerServantList->max_length;
  if ( v11 >= 1 )
  {
    v12 = 0;
    while ( v12 < v11 )
    {
      v13 = PlayerServantList->m_Items[v12];
      if ( !v13 )
        goto LABEL_17;
      v13->fields.isBuffProgressFlg = 0;
      v11 = PlayerServantList->max_length;
      if ( (int)++v12 >= v11 )
        return;
    }
    goto LABEL_16;
  }
}


void __fastcall BattleLogic__Initialize(BattleLogic_o *this, const MethodInfo *method)
{
  __int64 v2; // x2
  __int64 v3; // x3
  __int64 v4; // x4
  __int64 v6; // x1
  __int64 v7; // x1
  __int64 v8; // x1
  __int64 v9; // x1
  __int64 v10; // x1
  __int64 v11; // x1
  __int64 v12; // x1
  __int64 v13; // x1
  __int64 v14; // x1
  __int64 v15; // x1
  __int64 v16; // x1
  __int64 v17; // x1
  __int64 v18; // x1
  __int64 v19; // x1
  __int64 v20; // x1
  __int64 v21; // x1
  __int64 v22; // x1
  __int64 v23; // x1
  __int64 v24; // x1
  __int64 v25; // x1
  __int64 v26; // x1
  __int64 v27; // x1
  __int64 v28; // x1
  __int64 v29; // x1
  __int64 v30; // x1
  __int64 v31; // x1
  __int64 v32; // x1
  __int64 v33; // x1
  __int64 v34; // x1
  __int64 v35; // x1
  __int64 v36; // x1
  __int64 v37; // x1
  __int64 v38; // x1
  __int64 v39; // x1
  __int64 v40; // x1
  __int64 v41; // x1
  __int64 v42; // x1
  __int64 v43; // x1
  __int64 v44; // x1
  __int64 v45; // x1
  __int64 v46; // x1
  __int64 v47; // x1
  __int64 v48; // x1
  __int64 v49; // x1
  __int64 v50; // x1
  __int64 v51; // x1
  __int64 v52; // x1
  __int64 v53; // x1
  __int64 v54; // x1
  __int64 v55; // x1
  __int64 v56; // x1
  __int64 v57; // x1
  __int64 v58; // x1
  __int64 v59; // x1
  __int64 v60; // x1
  __int64 v61; // x1
  __int64 v62; // x1
  __int64 v63; // x1
  __int64 v64; // x1
  __int64 v65; // x1
  __int64 v66; // x1
  __int64 v67; // x1
  __int64 v68; // x1
  __int64 v69; // x1
  __int64 v70; // x1
  __int64 v71; // x1
  __int64 v72; // x1
  __int64 v73; // x1
  __int64 v74; // x1
  __int64 v75; // x1
  __int64 v76; // x1
  __int64 v77; // x1
  __int64 v78; // x1
  __int64 v79; // x1
  __int64 v80; // x1
  __int64 v81; // x1
  __int64 v82; // x1
  __int64 v83; // x1
  __int64 v84; // x1
  __int64 v85; // x1
  __int64 v86; // x1
  __int64 v87; // x1
  __int64 v88; // x1
  __int64 v89; // x1
  __int64 v90; // x1
  __int64 v91; // x1
  __int64 v92; // x1
  __int64 v93; // x1
  __int64 v94; // x1
  __int64 v95; // x1
  __int64 v96; // x1
  __int64 v97; // x1
  __int64 v98; // x1
  BattleLogicTarget_o *v99; // x20
  struct BattleLogicTarget_o **p_logictarget; // x23
  __int64 v101; // x1
  __int64 v102; // x2
  __int64 v103; // x3
  __int64 v104; // x4
  BattleLogicEnemyAi_o *v105; // x21
  __int64 v106; // x1
  __int64 v107; // x2
  __int64 v108; // x3
  __int64 v109; // x4
  BattleLogicFieldAi_o *v110; // x21
  __int64 v111; // x1
  __int64 v112; // x2
  __int64 v113; // x3
  __int64 v114; // x4
  BattleLogicFunction_o *v115; // x21
  __int64 v116; // x1
  __int64 v117; // x2
  __int64 v118; // x3
  __int64 v119; // x4
  BattleLogicNomal_o *v120; // x21
  __int64 v121; // x1
  __int64 v122; // x2
  __int64 v123; // x3
  __int64 v124; // x4
  BattleLogicSpecial_o *v125; // x21
  __int64 v126; // x1
  __int64 v127; // x2
  __int64 v128; // x3
  __int64 v129; // x4
  BattleLogicSkill_o *v130; // x21
  __int64 v131; // x1
  __int64 v132; // x2
  __int64 v133; // x3
  __int64 v134; // x4
  BattleLogicReaction_o *v135; // x21
  BattleLogicReaction_o **p_logicReaction; // x24
  __int64 v137; // x1
  __int64 v138; // x2
  __int64 v139; // x3
  __int64 v140; // x4
  BattleLogicClassRelation_o *v141; // x21
  __int64 v142; // x1
  __int64 v143; // x2
  __int64 v144; // x3
  __int64 v145; // x4
  BattleLogicNpcAi_o *v146; // x21
  __int64 v147; // x1
  __int64 v148; // x2
  __int64 v149; // x3
  __int64 v150; // x4
  BattleLogicPlayerAi_o *v151; // x21
  UnityEngine_GameObject_o *gameObject; // x0
  Firebase_Unity_UnitySynchronizationContext_SynchronizationContextBehavoir_o *v153; // x0
  __int64 v154; // x1
  __int64 v155; // x2
  __int64 v156; // x3
  __int64 v157; // x4
  System_Collections_Generic_Dictionary_Voice_BATTLE__string__o *v158; // x26
  Il2CppObject *logicnomal; // x27
  __int64 v160; // x1
  __int64 v161; // x2
  __int64 v162; // x3
  __int64 v163; // x4
  BattleLogic_taskFunction_o *v164; // x21
  Il2CppObject *v165; // x21
  __int64 v166; // x1
  __int64 v167; // x2
  __int64 v168; // x3
  __int64 v169; // x4
  BattleLogic_taskFunction_o *v170; // x27
  Il2CppObject *v171; // x21
  __int64 v172; // x1
  __int64 v173; // x2
  __int64 v174; // x3
  __int64 v175; // x4
  BattleLogic_taskFunction_o *v176; // x27
  Il2CppObject *v177; // x21
  __int64 v178; // x1
  __int64 v179; // x2
  __int64 v180; // x3
  __int64 v181; // x4
  BattleLogic_taskFunction_o *v182; // x27
  Il2CppObject *v183; // x21
  __int64 v184; // x1
  __int64 v185; // x2
  __int64 v186; // x3
  __int64 v187; // x4
  BattleLogic_taskFunction_o *v188; // x27
  Il2CppObject *v189; // x21
  __int64 v190; // x1
  __int64 v191; // x2
  __int64 v192; // x3
  __int64 v193; // x4
  BattleLogic_taskFunction_o *v194; // x27
  Il2CppObject *logicEnemyAi; // x21
  __int64 v196; // x1
  __int64 v197; // x2
  __int64 v198; // x3
  __int64 v199; // x4
  BattleLogic_taskFunction_o *v200; // x27
  Il2CppObject *v201; // x21
  __int64 v202; // x1
  __int64 v203; // x2
  __int64 v204; // x3
  __int64 v205; // x4
  BattleLogic_taskFunction_o *v206; // x27
  Il2CppObject *v207; // x21
  __int64 v208; // x1
  __int64 v209; // x2
  __int64 v210; // x3
  __int64 v211; // x4
  BattleLogic_taskFunction_o *v212; // x27
  Il2CppObject *logicspecial; // x21
  __int64 v214; // x1
  __int64 v215; // x2
  __int64 v216; // x3
  __int64 v217; // x4
  BattleLogic_taskFunction_o *v218; // x27
  Il2CppObject *v219; // x21
  __int64 v220; // x1
  __int64 v221; // x2
  __int64 v222; // x3
  __int64 v223; // x4
  BattleLogic_taskFunction_o *v224; // x27
  Il2CppObject *v225; // x21
  __int64 v226; // x1
  __int64 v227; // x2
  __int64 v228; // x3
  __int64 v229; // x4
  BattleLogic_taskFunction_o *v230; // x27
  Il2CppObject *v231; // x21
  __int64 v232; // x1
  __int64 v233; // x2
  __int64 v234; // x3
  __int64 v235; // x4
  BattleLogic_taskFunction_o *v236; // x27
  Il2CppObject *v237; // x21
  __int64 v238; // x1
  __int64 v239; // x2
  __int64 v240; // x3
  __int64 v241; // x4
  BattleLogic_taskFunction_o *v242; // x27
  Il2CppObject *v243; // x21
  __int64 v244; // x1
  __int64 v245; // x2
  __int64 v246; // x3
  __int64 v247; // x4
  BattleLogic_taskFunction_o *v248; // x27
  Il2CppObject *v249; // x21
  __int64 v250; // x1
  __int64 v251; // x2
  __int64 v252; // x3
  __int64 v253; // x4
  BattleLogic_taskFunction_o *v254; // x27
  Il2CppObject *v255; // x21
  __int64 v256; // x1
  __int64 v257; // x2
  __int64 v258; // x3
  __int64 v259; // x4
  BattleLogic_taskFunction_o *v260; // x27
  Il2CppObject *v261; // x21
  __int64 v262; // x1
  __int64 v263; // x2
  __int64 v264; // x3
  __int64 v265; // x4
  BattleLogic_taskFunction_o *v266; // x27
  Il2CppObject *v267; // x21
  __int64 v268; // x1
  __int64 v269; // x2
  __int64 v270; // x3
  __int64 v271; // x4
  BattleLogic_taskFunction_o *v272; // x27
  Il2CppObject *v273; // x21
  __int64 v274; // x1
  __int64 v275; // x2
  __int64 v276; // x3
  __int64 v277; // x4
  BattleLogic_taskFunction_o *v278; // x27
  Il2CppObject *v279; // x21
  __int64 v280; // x1
  __int64 v281; // x2
  __int64 v282; // x3
  __int64 v283; // x4
  BattleLogic_taskFunction_o *v284; // x27
  __int64 v285; // x1
  __int64 v286; // x2
  __int64 v287; // x3
  __int64 v288; // x4
  BattleLogic_taskFunction_o *v289; // x21
  __int64 v290; // x1
  __int64 v291; // x2
  __int64 v292; // x3
  __int64 v293; // x4
  BattleLogic_taskFunction_o *v294; // x21
  __int64 v295; // x1
  __int64 v296; // x2
  __int64 v297; // x3
  __int64 v298; // x4
  BattleLogic_taskFunction_o *v299; // x21
  __int64 v300; // x1
  __int64 v301; // x2
  __int64 v302; // x3
  __int64 v303; // x4
  BattleLogic_taskFunction_o *v304; // x21
  __int64 v305; // x1
  __int64 v306; // x2
  __int64 v307; // x3
  __int64 v308; // x4
  BattleLogic_taskFunction_o *v309; // x21
  __int64 v310; // x1
  __int64 v311; // x2
  __int64 v312; // x3
  __int64 v313; // x4
  BattleLogic_taskFunction_o *v314; // x21
  Il2CppObject *logicReaction; // x21
  __int64 v316; // x1
  __int64 v317; // x2
  __int64 v318; // x3
  __int64 v319; // x4
  BattleLogic_taskFunction_o *v320; // x27
  Il2CppObject *v321; // x21
  __int64 v322; // x1
  __int64 v323; // x2
  __int64 v324; // x3
  __int64 v325; // x4
  BattleLogic_taskFunction_o *v326; // x27
  Il2CppObject *v327; // x21
  __int64 v328; // x1
  __int64 v329; // x2
  __int64 v330; // x3
  __int64 v331; // x4
  BattleLogic_taskFunction_o *v332; // x27
  __int64 v333; // x1
  __int64 v334; // x2
  __int64 v335; // x3
  __int64 v336; // x4
  BattleLogic_taskFunction_o *v337; // x21
  __int64 v338; // x1
  __int64 v339; // x2
  __int64 v340; // x3
  __int64 v341; // x4
  BattleLogic_taskFunction_o *v342; // x21
  __int64 v343; // x1
  __int64 v344; // x2
  __int64 v345; // x3
  __int64 v346; // x4
  BattleLogic_taskFunction_o *v347; // x21
  Il2CppObject *v348; // x21
  __int64 v349; // x1
  __int64 v350; // x2
  __int64 v351; // x3
  __int64 v352; // x4
  BattleLogic_taskFunction_o *v353; // x27
  Il2CppObject *v354; // x21
  __int64 v355; // x1
  __int64 v356; // x2
  __int64 v357; // x3
  __int64 v358; // x4
  BattleLogic_taskFunction_o *v359; // x27
  Il2CppObject *v360; // x21
  __int64 v361; // x1
  __int64 v362; // x2
  __int64 v363; // x3
  __int64 v364; // x4
  BattleLogic_taskFunction_o *v365; // x27
  Il2CppObject *v366; // x21
  __int64 v367; // x1
  __int64 v368; // x2
  __int64 v369; // x3
  __int64 v370; // x4
  BattleLogic_taskFunction_o *v371; // x27
  Il2CppObject *v372; // x21
  __int64 v373; // x1
  __int64 v374; // x2
  __int64 v375; // x3
  __int64 v376; // x4
  BattleLogic_taskFunction_o *v377; // x27
  Il2CppObject *logicFieldAi; // x21
  __int64 v379; // x1
  __int64 v380; // x2
  __int64 v381; // x3
  __int64 v382; // x4
  BattleLogic_taskFunction_o *v383; // x27
  Il2CppObject *v384; // x21
  __int64 v385; // x1
  __int64 v386; // x2
  __int64 v387; // x3
  __int64 v388; // x4
  BattleLogic_taskFunction_o *v389; // x27
  Il2CppObject *v390; // x21
  __int64 v391; // x1
  __int64 v392; // x2
  __int64 v393; // x3
  __int64 v394; // x4
  BattleLogic_taskFunction_o *v395; // x27
  Il2CppObject *v396; // x21
  __int64 v397; // x1
  __int64 v398; // x2
  __int64 v399; // x3
  __int64 v400; // x4
  BattleLogic_taskFunction_o *v401; // x27
  Il2CppObject *v402; // x21
  __int64 v403; // x1
  __int64 v404; // x2
  __int64 v405; // x3
  __int64 v406; // x4
  BattleLogic_taskFunction_o *v407; // x27
  __int64 v408; // x1
  __int64 v409; // x2
  __int64 v410; // x3
  __int64 v411; // x4
  BattleLogic_taskFunction_o *v412; // x21
  __int64 v413; // x1
  __int64 v414; // x2
  __int64 v415; // x3
  __int64 v416; // x4
  BattleLogic_taskFunction_o *v417; // x21
  __int64 v418; // x1
  __int64 v419; // x2
  __int64 v420; // x3
  __int64 v421; // x4
  BattleLogic_taskFunction_o *v422; // x21
  __int64 v423; // x1
  __int64 v424; // x2
  __int64 v425; // x3
  __int64 v426; // x4
  BattleLogic_taskFunction_o *v427; // x21
  Il2CppObject *v428; // x21
  __int64 v429; // x1
  __int64 v430; // x2
  __int64 v431; // x3
  __int64 v432; // x4
  BattleLogic_taskFunction_o *v433; // x27
  Il2CppObject *v434; // x21
  __int64 v435; // x1
  __int64 v436; // x2
  __int64 v437; // x3
  __int64 v438; // x4
  BattleLogic_taskFunction_o *v439; // x27
  Il2CppObject *v440; // x21
  __int64 v441; // x1
  __int64 v442; // x2
  __int64 v443; // x3
  __int64 v444; // x4
  BattleLogic_taskFunction_o *v445; // x27
  Il2CppObject *v446; // x21
  __int64 v447; // x1
  __int64 v448; // x2
  __int64 v449; // x3
  __int64 v450; // x4
  BattleLogic_taskFunction_o *v451; // x27
  __int64 v452; // x1
  __int64 v453; // x2
  __int64 v454; // x3
  __int64 v455; // x4
  BattleLogic_taskFunction_o *v456; // x21
  __int64 v457; // x1
  __int64 v458; // x2
  __int64 v459; // x3
  __int64 v460; // x4
  BattleLogic_taskFunction_o *v461; // x21
  Il2CppObject *v462; // x21
  __int64 v463; // x1
  __int64 v464; // x2
  __int64 v465; // x3
  __int64 v466; // x4
  BattleLogic_taskFunction_o *v467; // x27
  Il2CppObject *v468; // x21
  __int64 v469; // x1
  __int64 v470; // x2
  __int64 v471; // x3
  __int64 v472; // x4
  BattleLogic_taskFunction_o *v473; // x27
  Il2CppObject *v474; // x21
  __int64 v475; // x1
  __int64 v476; // x2
  __int64 v477; // x3
  __int64 v478; // x4
  BattleLogic_taskFunction_o *v479; // x27
  Il2CppObject *v480; // x21
  __int64 v481; // x1
  __int64 v482; // x2
  __int64 v483; // x3
  __int64 v484; // x4
  BattleLogic_taskFunction_o *v485; // x27
  Il2CppObject *v486; // x21
  __int64 v487; // x1
  __int64 v488; // x2
  __int64 v489; // x3
  __int64 v490; // x4
  BattleLogic_taskFunction_o *v491; // x27
  Il2CppObject *v492; // x21
  __int64 v493; // x1
  __int64 v494; // x2
  __int64 v495; // x3
  __int64 v496; // x4
  BattleLogic_taskFunction_o *v497; // x27
  __int64 v498; // x1
  __int64 v499; // x2
  __int64 v500; // x3
  __int64 v501; // x4
  System_Collections_Generic_Dictionary_Voice_BATTLE__string__o *v502; // x26
  Il2CppObject *v503; // x27
  __int64 v504; // x1
  __int64 v505; // x2
  __int64 v506; // x3
  __int64 v507; // x4
  BattleLogic_createActionBattle_o *v508; // x21
  Il2CppObject *v509; // x21
  __int64 v510; // x1
  __int64 v511; // x2
  __int64 v512; // x3
  __int64 v513; // x4
  BattleLogic_createActionBattle_o *v514; // x27
  Il2CppObject *logicSkill; // x21
  __int64 v516; // x1
  __int64 v517; // x2
  __int64 v518; // x3
  __int64 v519; // x4
  BattleLogic_createActionBattle_o *v520; // x27
  Il2CppObject *v521; // x21
  __int64 v522; // x1
  __int64 v523; // x2
  __int64 v524; // x3
  __int64 v525; // x4
  BattleLogic_createActionBattle_o *v526; // x27
  Il2CppObject *v527; // x21
  __int64 v528; // x1
  __int64 v529; // x2
  __int64 v530; // x3
  __int64 v531; // x4
  BattleLogic_createActionBattle_o *v532; // x27
  __int64 v533; // x1
  __int64 v534; // x2
  __int64 v535; // x3
  __int64 v536; // x4
  BattleLogic_createActionBattle_o *v537; // x21
  __int64 v538; // x1
  __int64 v539; // x2
  __int64 v540; // x3
  __int64 v541; // x4
  BattleLogic_createActionBattle_o *v542; // x21
  Il2CppObject *v543; // x21
  __int64 v544; // x1
  __int64 v545; // x2
  __int64 v546; // x3
  __int64 v547; // x4
  BattleLogic_createActionBattle_o *v548; // x27
  Il2CppObject *v549; // x21
  __int64 v550; // x1
  __int64 v551; // x2
  __int64 v552; // x3
  __int64 v553; // x4
  BattleLogic_createActionBattle_o *v554; // x27
  Il2CppObject *v555; // x21
  __int64 v556; // x1
  __int64 v557; // x2
  __int64 v558; // x3
  __int64 v559; // x4
  BattleLogic_createActionBattle_o *v560; // x27
  Il2CppObject *v561; // x21
  __int64 v562; // x1
  __int64 v563; // x2
  __int64 v564; // x3
  __int64 v565; // x4
  BattleLogic_createActionBattle_o *v566; // x27
  Il2CppObject *v567; // x21
  __int64 v568; // x1
  __int64 v569; // x2
  __int64 v570; // x3
  __int64 v571; // x4
  BattleLogic_createActionBattle_o *v572; // x27
  Il2CppObject *v573; // x21
  __int64 v574; // x1
  __int64 v575; // x2
  __int64 v576; // x3
  __int64 v577; // x4
  BattleLogic_createActionBattle_o *v578; // x27
  Il2CppObject *v579; // x21
  __int64 v580; // x1
  __int64 v581; // x2
  __int64 v582; // x3
  __int64 v583; // x4
  BattleLogic_createActionBattle_o *v584; // x27
  Il2CppObject *v585; // x21
  __int64 v586; // x1
  __int64 v587; // x2
  __int64 v588; // x3
  __int64 v589; // x4
  BattleLogic_createActionBattle_o *v590; // x27
  Il2CppObject *v591; // x21
  __int64 v592; // x1
  __int64 v593; // x2
  __int64 v594; // x3
  __int64 v595; // x4
  BattleLogic_createActionBattle_o *v596; // x27
  Il2CppObject *v597; // x21
  __int64 v598; // x1
  __int64 v599; // x2
  __int64 v600; // x3
  __int64 v601; // x4
  BattleLogic_createActionBattle_o *v602; // x27
  Il2CppObject *v603; // x21
  __int64 v604; // x1
  __int64 v605; // x2
  __int64 v606; // x3
  __int64 v607; // x4
  BattleLogic_createActionBattle_o *v608; // x27
  __int64 v609; // x1
  __int64 v610; // x2
  __int64 v611; // x3
  __int64 v612; // x4
  BattleLogic_createActionBattle_o *v613; // x21
  __int64 v614; // x1
  __int64 v615; // x2
  __int64 v616; // x3
  __int64 v617; // x4
  BattleLogic_createActionBattle_o *v618; // x21
  Il2CppObject *v619; // x21
  __int64 v620; // x1
  __int64 v621; // x2
  __int64 v622; // x3
  __int64 v623; // x4
  BattleLogic_createActionBattle_o *v624; // x27
  Il2CppObject *v625; // x21
  __int64 v626; // x1
  __int64 v627; // x2
  __int64 v628; // x3
  __int64 v629; // x4
  BattleLogic_createActionBattle_o *v630; // x27
  Il2CppObject *v631; // x21
  __int64 v632; // x1
  __int64 v633; // x2
  __int64 v634; // x3
  __int64 v635; // x4
  BattleLogic_createActionBattle_o *v636; // x27
  __int64 v637; // x1
  __int64 v638; // x2
  __int64 v639; // x3
  __int64 v640; // x4
  BattleLogic_createActionBattle_o *v641; // x21
  __int64 v642; // x1
  __int64 v643; // x2
  __int64 v644; // x3
  __int64 v645; // x4
  BattleLogic_createActionBattle_o *v646; // x21
  __int64 v647; // x1
  __int64 v648; // x2
  __int64 v649; // x3
  __int64 v650; // x4
  BattleLogic_createActionBattle_o *v651; // x21
  __int64 v652; // x1
  __int64 v653; // x2
  __int64 v654; // x3
  __int64 v655; // x4
  BattleLogic_createActionBattle_o *v656; // x21
  __int64 v657; // x1
  __int64 v658; // x2
  __int64 v659; // x3
  __int64 v660; // x4
  BattleLogic_createActionBattle_o *v661; // x21
  __int64 v662; // x1
  __int64 v663; // x2
  __int64 v664; // x3
  __int64 v665; // x4
  BattleLogic_createActionBattle_o *v666; // x21
  Il2CppObject *v667; // x21
  __int64 v668; // x1
  __int64 v669; // x2
  __int64 v670; // x3
  __int64 v671; // x4
  BattleLogic_createActionBattle_o *v672; // x27
  Il2CppObject *v673; // x21
  __int64 v674; // x1
  __int64 v675; // x2
  __int64 v676; // x3
  __int64 v677; // x4
  BattleLogic_createActionBattle_o *v678; // x27
  __int64 v679; // x1
  __int64 v680; // x2
  __int64 v681; // x3
  __int64 v682; // x4
  System_Collections_Generic_Dictionary_Voice_BATTLE__string__o *v683; // x27
  System_Collections_Generic_Dictionary_BattleLogicTask_ACTIONTYPE__BattleLogic_reactionFunction__o **p_reactionlist; // x26
  BattleLogicNomal_o *v685; // x0
  __int64 v686; // x2
  System_Array_o *v687; // x21
  struct BattleData_o *data; // x20
  __int64 v689; // x1
  __int64 v690; // x2
  __int64 v691; // x3
  __int64 v692; // x4
  BattleAttackManager_o *v693; // x21
  __int64 v694; // x0
  struct BattleLogicTarget_o *logictarget; // x0
  struct BattleData_o *v696; // x1
  struct BattleLogicNomal_o *v697; // x0
  struct BattleLogicNomal_o *v698; // x0
  struct BattleData_o *v699; // x1
  struct BattleLogicNomal_o *v700; // x0
  struct BattleLogicTarget_o *v701; // x1
  struct BattleLogicNomal_o *v702; // x0
  struct BattleLogicFunction_o *v703; // x1
  struct BattleLogicNomal_o *v704; // x0
  struct BattleLogicSkill_o *v705; // x1
  struct BattleLogicEnemyAi_o *v706; // x0
  struct BattleLogicEnemyAi_o *v707; // x0
  struct BattleData_o *v708; // x1
  struct BattleLogicEnemyAi_o *v709; // x0
  struct BattleLogicTarget_o *v710; // x1
  struct BattleLogicEnemyAi_o *v711; // x0
  struct BattleLogicNomal_o *v712; // x1
  long double v713; // q0
  struct BattleLogicPlayerAi_o *logicPlayerAi; // x0
  struct BattleLogicFieldAi_o *v715; // x0
  struct BattleLogicFieldAi_o *v716; // x0
  struct BattleLogicNomal_o *v717; // x1
  BattleLogicFieldAi_o *v718; // x0
  struct AiLogic_o *aiLogic; // x1
  struct BattleLogicFunction_o *v720; // x0
  struct BattleLogicFunction_o *logicFunction; // x0
  struct BattleData_o *v722; // x1
  struct BattleLogicFunction_o *v723; // x0
  struct BattleLogicTarget_o *v724; // x1
  struct BattleLogicSkill_o *v725; // x0
  struct BattleLogicSkill_o *v726; // x0
  struct BattleData_o *v727; // x1
  struct BattleLogicSkill_o *v728; // x0
  struct BattleLogicTarget_o *v729; // x1
  struct BattleLogicSkill_o *v730; // x0
  struct BattleLogicFunction_o *v731; // x1
  struct BattleLogicSpecial_o *v732; // x0
  struct BattleLogicSpecial_o *v733; // x0
  struct BattleData_o *v734; // x1
  struct BattleLogicSpecial_o *v735; // x0
  struct BattleLogicTarget_o *v736; // x1
  struct BattleLogicSpecial_o *v737; // x0
  struct BattleLogicFunction_o *v738; // x1
  BattleLogicReaction_o *v739; // x0
  struct BattleLogicReaction_o *v740; // x0
  struct BattleData_o *v741; // x1
  struct BattleLogicReaction_o *v742; // x0
  struct BattlePerformance_o *perf; // x1
  BattleLogicReaction_o *v744; // x0
  struct BattleLogicSkill_o *v745; // x1
  BattleLogicReaction_o *v746; // x0
  struct BattleLogicFunction_o *v747; // x1
  BattleLogicReaction_o *v748; // x0
  struct BattleLogicEnemyAi_o *v749; // x1
  BattleLogicReaction_o *v750; // x0
  BattleLogicFieldAi_o *v751; // x1
  long double v752; // q0
  struct Spawner_o *Instance; // x0
  const MethodInfo *v754; // x2
  struct BattleLogicNomal_o **p_logicnomal; // [xsp+8h] [xbp-88h]
  struct BattleLogicSpecial_o **p_logicspecial; // [xsp+10h] [xbp-80h]
  BattleLogicNpcAi_o **p_logicNpcAi; // [xsp+18h] [xbp-78h]
  struct BattleLogicSkill_o **p_logicSkill; // [xsp+20h] [xbp-70h]
  struct BattleLogicFunction_o **p_logicFunction; // [xsp+28h] [xbp-68h]
  BattleLogicFieldAi_o **p_logicFieldAi; // [xsp+30h] [xbp-60h]
  struct BattleLogicEnemyAi_o **p_logicEnemyAi; // [xsp+38h] [xbp-58h]
  System_RuntimeFieldHandle_o v762; // 0:w1.4

  if ( (byte_40F735A & 1) == 0 )
  {
    sub_B16FFC(&BattleAttackManager_TypeInfo, method);
    sub_B16FFC(&BattleLogicClassRelation_TypeInfo, v6);
    sub_B16FFC(&Method_BattleLogicEnemyAi_TaskAIAttackEnd__, v7);
    sub_B16FFC(&Method_BattleLogicEnemyAi_TaskAIAttackPrecheck__, v8);
    sub_B16FFC(&Method_BattleLogicEnemyAi_TaskAIAttackStart__, v9);
    sub_B16FFC(&Method_BattleLogicEnemyAi_resetEnemyActList__, v10);
    sub_B16FFC(&BattleLogicEnemyAi_TypeInfo, v11);
    sub_B16FFC(&Method_BattleLogicEnemyAi_taskAIAttack__, v12);
    sub_B16FFC(&Method_BattleLogicFieldAi_checkFieldAiTask__, v13);
    sub_B16FFC(&BattleLogicFieldAi_TypeInfo, v14);
    sub_B16FFC(&BattleLogicFunction_TypeInfo, v15);
    sub_B16FFC(&Method_BattleLogicNomal_CreateProgressIntervalTurn__, v16);
    sub_B16FFC(&Method_BattleLogicNomal_checkReflectionTask__, v17);
    sub_B16FFC(&Method_BattleLogicNomal_createBuffAddEnemy__, v18);
    sub_B16FFC(&Method_BattleLogicNomal_createBuffAddPlayer__, v19);
    sub_B16FFC(&Method_BattleLogicNomal_createComboOrder__, v20);
    sub_B16FFC(&Method_BattleLogicNomal_createCommandBattle__, v21);
    sub_B16FFC(&Method_BattleLogicNomal_createEndTurnEnemy__, v22);
    sub_B16FFC(&Method_BattleLogicNomal_createEndTurnPlayer__, v23);
    sub_B16FFC(&Method_BattleLogicNomal_createPlayMotion__, v24);
    sub_B16FFC(&Method_BattleLogicNomal_createShiftGuts__, v25);
    sub_B16FFC(&Method_BattleLogicNomal_createShiftServant__, v26);
    sub_B16FFC(&Method_BattleLogicNomal_createStartEnemyTurn__, v27);
    sub_B16FFC(&Method_BattleLogicNomal_createStartTurn__, v28);
    sub_B16FFC(&BattleLogicNomal_TypeInfo, v29);
    sub_B16FFC(&Method_BattleLogicNomal_taskAddCommandAttack__, v30);
    sub_B16FFC(&Method_BattleLogicNomal_taskBuffAdd__, v31);
    sub_B16FFC(&Method_BattleLogicNomal_taskCheckShiftServants__, v32);
    sub_B16FFC(&Method_BattleLogicNomal_taskComboOrderAfter__, v33);
    sub_B16FFC(&Method_BattleLogicNomal_taskComboOrderBefore__, v34);
    sub_B16FFC(&Method_BattleLogicNomal_taskCommandAttack__, v35);
    sub_B16FFC(&Method_BattleLogicNomal_taskCounterFuncEnemy__, v36);
    sub_B16FFC(&Method_BattleLogicNomal_taskCounterFuncPlayer__, v37);
    sub_B16FFC(&BattleLogicNpcAi_TypeInfo, v38);
    sub_B16FFC(&BattleLogicPlayerAi_TypeInfo, v39);
    sub_B16FFC(&Method_BattleLogicReaction_CheckEnemyPlayerTurnEndAfter__, v40);
    sub_B16FFC(&Method_BattleLogicReaction_CheckEnemyShiftAfter__, v41);
    sub_B16FFC(&Method_BattleLogicReaction_CheckPlayerActionStart__, v42);
    sub_B16FFC(&Method_BattleLogicReaction_checkEnemyEndTurn__, v43);
    sub_B16FFC(&Method_BattleLogicReaction_checkEnemyStartTurn__, v44);
    sub_B16FFC(&Method_BattleLogicReaction_checkPlayerActionEnd__, v45);
    sub_B16FFC(&Method_BattleLogicReaction_createChangeApp__, v46);
    sub_B16FFC(&Method_BattleLogicReaction_createDeadMotion__, v47);
    sub_B16FFC(&Method_BattleLogicReaction_createResurrection__, v48);
    sub_B16FFC(&Method_BattleLogicReaction_createWithdraw__, v49);
    sub_B16FFC(&BattleLogicReaction_TypeInfo, v50);
    sub_B16FFC(&Method_BattleLogicSkill_createCommandSpell__, v51);
    sub_B16FFC(&Method_BattleLogicSkill_createSkillData__, v52);
    sub_B16FFC(&BattleLogicSkill_TypeInfo, v53);
    sub_B16FFC(&Method_BattleLogicSpecial_createCounterOverwriteSpecialData__, v54);
    sub_B16FFC(&Method_BattleLogicSpecial_createSpecialData__, v55);
    sub_B16FFC(&BattleLogicSpecial_TypeInfo, v56);
    sub_B16FFC(&Method_BattleLogicSpecial_taskEnemyTresureDvcAlways__, v57);
    sub_B16FFC(&Method_BattleLogicSpecial_taskEnemyTresureDvc__, v58);
    sub_B16FFC(&Method_BattleLogicSpecial_taskTresureDvcAlways__, v59);
    sub_B16FFC(&Method_BattleLogicSpecial_taskTresureDvc__, v60);
    sub_B16FFC(&BattleLogicTarget_TypeInfo, v61);
    sub_B16FFC(&Method_BattleLogic_CreateActionDataTaskSide__, v62);
    sub_B16FFC(&Method_BattleLogic_CreateFieldPlayMotion__, v63);
    sub_B16FFC(&Method_BattleLogic_afterImmediateEntry__, v64);
    sub_B16FFC(&Method_BattleLogic_breakOnBattle__, v65);
    sub_B16FFC(&Method_BattleLogic_checkImmediateEntry__, v66);
    sub_B16FFC(&Method_BattleLogic_checkOverKill__, v67);
    sub_B16FFC(&Method_BattleLogic_createCamera__, v68);
    sub_B16FFC(&Method_BattleLogic_createEnemyCutIn__, v69);
    sub_B16FFC(&Method_BattleLogic_createLastActorBackStep__, v70);
    sub_B16FFC(&Method_BattleLogic_createLoadImmediateEntryServant__, v71);
    sub_B16FFC(&Method_BattleLogic_createSystem__, v72);
    sub_B16FFC(&Method_BattleLogic_startImmediateEntry__, v73);
    sub_B16FFC(&Method_BattleLogic_taskCommandWait__, v74);
    sub_B16FFC(&Method_BattleLogic_taskEndEnemyTurn__, v75);
    sub_B16FFC(&Method_BattleLogic_taskEndPlayerTurn__, v76);
    sub_B16FFC(&Method_BattleLogic_taskEnemyAttackTerm__, v77);
    sub_B16FFC(&Method_BattleLogic_taskEnemyEndWait__, v78);
    sub_B16FFC(&Method_BattleLogic_taskGetCriticalPoint__, v79);
    sub_B16FFC(&Method_BattleLogic_taskLastActorBackStep__, v80);
    sub_B16FFC(&Method_BattleLogic_taskPlayerAttackTerm__, v81);
    sub_B16FFC(&Method_BattleLogic_taskStartEnemyTurn__, v82);
    sub_B16FFC(&Method_BattleLogic_taskStartPlayerTurn__, v83);
    sub_B16FFC(&Method_BattleLogic_taskStartTactical__, v84);
    sub_B16FFC(
      &Method_System_Collections_Generic_Dictionary_BattleLogic_LOGICTYPE__BattleLogic_taskFunction__Add__,
      v85);
    sub_B16FFC(
      &Method_System_Collections_Generic_Dictionary_BattleLogicTask_ACTIONTYPE__BattleLogic_createActionBattle__Add__,
      v86);
    sub_B16FFC(
      &Method_System_Collections_Generic_Dictionary_BattleLogicTask_ACTIONTYPE__BattleLogic_reactionFunction___ctor__,
      v87);
    sub_B16FFC(
      &Method_System_Collections_Generic_Dictionary_BattleLogicTask_ACTIONTYPE__BattleLogic_createActionBattle___ctor__,
      v88);
    sub_B16FFC(
      &Method_System_Collections_Generic_Dictionary_BattleLogic_LOGICTYPE__BattleLogic_taskFunction___ctor__,
      v89);
    sub_B16FFC(&System_Collections_Generic_Dictionary_BattleLogic_LOGICTYPE__BattleLogic_taskFunction__TypeInfo, v90);
    sub_B16FFC(
      &System_Collections_Generic_Dictionary_BattleLogicTask_ACTIONTYPE__BattleLogic_reactionFunction__TypeInfo,
      v91);
    sub_B16FFC(
      &System_Collections_Generic_Dictionary_BattleLogicTask_ACTIONTYPE__BattleLogic_createActionBattle__TypeInfo,
      v92);
    sub_B16FFC(&Method_UnityEngine_GameObject_AddComponent_BattleRandom___, v93);
    sub_B16FFC(&BattleLogic_LOGICTYPE___TypeInfo, v94);
    sub_B16FFC(&Method_SingletonMonoBehaviour_Spawner__get_Instance__, v95);
    sub_B16FFC(
      &Field__PrivateImplementationDetails__DB39FF3B88E189830F9C70F92523E675741F8CF01931BA55459EE4852D9A9451,
      v96);
    sub_B16FFC(&BattleLogic_createActionBattle_TypeInfo, v97);
    sub_B16FFC(&BattleLogic_taskFunction_TypeInfo, v98);
    byte_40F735A = 1;
  }
  v99 = (BattleLogicTarget_o *)sub_B170CC(BattleLogicTarget_TypeInfo, method, v2, v3, v4);
  BattleLogicTarget___ctor(v99, 0LL);
  this->fields.logictarget = v99;
  p_logictarget = &this->fields.logictarget;
  sub_B16F98(&this->fields.logictarget, v99);
  v105 = (BattleLogicEnemyAi_o *)sub_B170CC(BattleLogicEnemyAi_TypeInfo, v101, v102, v103, v104);
  BattleLogicEnemyAi___ctor(v105, 0LL);
  this->fields.logicEnemyAi = v105;
  sub_B16F98(&this->fields.logicEnemyAi, v105);
  v110 = (BattleLogicFieldAi_o *)sub_B170CC(BattleLogicFieldAi_TypeInfo, v106, v107, v108, v109);
  BattleLogicFieldAi___ctor(v110, 0LL);
  this->fields.logicFieldAi = v110;
  sub_B16F98(&this->fields.logicFieldAi, v110);
  v115 = (BattleLogicFunction_o *)sub_B170CC(BattleLogicFunction_TypeInfo, v111, v112, v113, v114);
  BattleLogicFunction___ctor(v115, 0LL);
  this->fields.logicFunction = v115;
  p_logicFunction = &this->fields.logicFunction;
  sub_B16F98(&this->fields.logicFunction, v115);
  v120 = (BattleLogicNomal_o *)sub_B170CC(BattleLogicNomal_TypeInfo, v116, v117, v118, v119);
  BattleLogicNomal___ctor(v120, 0LL);
  this->fields.logicnomal = v120;
  sub_B16F98(&this->fields.logicnomal, v120);
  v125 = (BattleLogicSpecial_o *)sub_B170CC(BattleLogicSpecial_TypeInfo, v121, v122, v123, v124);
  BattleLogicSpecial___ctor(v125, 0LL);
  this->fields.logicspecial = v125;
  p_logicspecial = &this->fields.logicspecial;
  sub_B16F98(&this->fields.logicspecial, v125);
  v130 = (BattleLogicSkill_o *)sub_B170CC(BattleLogicSkill_TypeInfo, v126, v127, v128, v129);
  BattleLogicSkill___ctor(v130, 0LL);
  this->fields.logicSkill = v130;
  p_logicSkill = &this->fields.logicSkill;
  sub_B16F98(&this->fields.logicSkill, v130);
  v135 = (BattleLogicReaction_o *)sub_B170CC(BattleLogicReaction_TypeInfo, v131, v132, v133, v134);
  BattleLogicReaction___ctor(v135, 0LL);
  p_logicReaction = &this->fields.logicReaction;
  this->fields.logicReaction = v135;
  sub_B16F98(&this->fields.logicReaction, v135);
  v141 = (BattleLogicClassRelation_o *)sub_B170CC(BattleLogicClassRelation_TypeInfo, v137, v138, v139, v140);
  BattleLogicClassRelation___ctor(v141, 0LL);
  this->fields.logicClassRelation = v141;
  sub_B16F98(&this->fields.logicClassRelation, v141);
  v146 = (BattleLogicNpcAi_o *)sub_B170CC(BattleLogicNpcAi_TypeInfo, v142, v143, v144, v145);
  BattleLogicNpcAi___ctor(v146, 0LL);
  this->fields.logicNpcAi = v146;
  sub_B16F98(&this->fields.logicNpcAi, v146);
  v151 = (BattleLogicPlayerAi_o *)sub_B170CC(BattleLogicPlayerAi_TypeInfo, v147, v148, v149, v150);
  BattleLogicPlayerAi___ctor(v151, 0LL);
  this->fields.logicPlayerAi = v151;
  sub_B16F98(&this->fields.logicPlayerAi, v151);
  gameObject = UnityEngine_Component__get_gameObject((UnityEngine_Component_o *)this, 0LL);
  if ( !gameObject )
    goto LABEL_48;
  p_logicnomal = &this->fields.logicnomal;
  p_logicNpcAi = &this->fields.logicNpcAi;
  p_logicFieldAi = &this->fields.logicFieldAi;
  p_logicEnemyAi = &this->fields.logicEnemyAi;
  v153 = UnityEngine_GameObject__AddComponent_UnitySynchronizationContext_SynchronizationContextBehavoir_(
           gameObject,
           (const MethodInfo_19D13E4 *)Method_UnityEngine_GameObject_AddComponent_BattleRandom___);
  this->fields.brandom = (struct BattleRandom_o *)v153;
  sub_B16F98(&this->fields.brandom, v153);
  v158 = (System_Collections_Generic_Dictionary_Voice_BATTLE__string__o *)sub_B170CC(
                                                                            System_Collections_Generic_Dictionary_BattleLogic_LOGICTYPE__BattleLogic_taskFunction__TypeInfo,
                                                                            v154,
                                                                            v155,
                                                                            v156,
                                                                            v157);
  System_Collections_Generic_Dictionary_Voice_BATTLE__string____ctor(
    v158,
    (const MethodInfo_2DFF0A0 *)Method_System_Collections_Generic_Dictionary_BattleLogic_LOGICTYPE__BattleLogic_taskFunction___ctor__);
  logicnomal = (Il2CppObject *)this->fields.logicnomal;
  v164 = (BattleLogic_taskFunction_o *)sub_B170CC(BattleLogic_taskFunction_TypeInfo, v160, v161, v162, v163);
  BattleLogic_taskFunction___ctor(v164, logicnomal, Method_BattleLogicNomal_taskComboOrderBefore__, 0LL);
  if ( !v158 )
    goto LABEL_48;
  System_Collections_Generic_Dictionary_Voice_BATTLE__string___Add(
    v158,
    0,
    (System_String_o *)v164,
    (const MethodInfo_2DFFC54 *)Method_System_Collections_Generic_Dictionary_BattleLogic_LOGICTYPE__BattleLogic_taskFunction__Add__);
  v165 = (Il2CppObject *)this->fields.logicnomal;
  v170 = (BattleLogic_taskFunction_o *)sub_B170CC(BattleLogic_taskFunction_TypeInfo, v166, v167, v168, v169);
  BattleLogic_taskFunction___ctor(v170, v165, Method_BattleLogicNomal_taskCommandAttack__, 0LL);
  System_Collections_Generic_Dictionary_Voice_BATTLE__string___Add(
    v158,
    1,
    (System_String_o *)v170,
    (const MethodInfo_2DFFC54 *)Method_System_Collections_Generic_Dictionary_BattleLogic_LOGICTYPE__BattleLogic_taskFunction__Add__);
  v171 = (Il2CppObject *)this->fields.logicnomal;
  v176 = (BattleLogic_taskFunction_o *)sub_B170CC(BattleLogic_taskFunction_TypeInfo, v172, v173, v174, v175);
  BattleLogic_taskFunction___ctor(v176, v171, Method_BattleLogicNomal_taskCommandAttack__, 0LL);
  System_Collections_Generic_Dictionary_Voice_BATTLE__string___Add(
    v158,
    2,
    (System_String_o *)v176,
    (const MethodInfo_2DFFC54 *)Method_System_Collections_Generic_Dictionary_BattleLogic_LOGICTYPE__BattleLogic_taskFunction__Add__);
  v177 = (Il2CppObject *)this->fields.logicnomal;
  v182 = (BattleLogic_taskFunction_o *)sub_B170CC(BattleLogic_taskFunction_TypeInfo, v178, v179, v180, v181);
  BattleLogic_taskFunction___ctor(v182, v177, Method_BattleLogicNomal_taskCommandAttack__, 0LL);
  System_Collections_Generic_Dictionary_Voice_BATTLE__string___Add(
    v158,
    3,
    (System_String_o *)v182,
    (const MethodInfo_2DFFC54 *)Method_System_Collections_Generic_Dictionary_BattleLogic_LOGICTYPE__BattleLogic_taskFunction__Add__);
  v183 = (Il2CppObject *)this->fields.logicnomal;
  v188 = (BattleLogic_taskFunction_o *)sub_B170CC(BattleLogic_taskFunction_TypeInfo, v184, v185, v186, v187);
  BattleLogic_taskFunction___ctor(v188, v183, Method_BattleLogicNomal_taskComboOrderAfter__, 0LL);
  System_Collections_Generic_Dictionary_Voice_BATTLE__string___Add(
    v158,
    5,
    (System_String_o *)v188,
    (const MethodInfo_2DFFC54 *)Method_System_Collections_Generic_Dictionary_BattleLogic_LOGICTYPE__BattleLogic_taskFunction__Add__);
  v189 = (Il2CppObject *)this->fields.logicnomal;
  v194 = (BattleLogic_taskFunction_o *)sub_B170CC(BattleLogic_taskFunction_TypeInfo, v190, v191, v192, v193);
  BattleLogic_taskFunction___ctor(v194, v189, Method_BattleLogicNomal_taskAddCommandAttack__, 0LL);
  System_Collections_Generic_Dictionary_Voice_BATTLE__string___Add(
    v158,
    4,
    (System_String_o *)v194,
    (const MethodInfo_2DFFC54 *)Method_System_Collections_Generic_Dictionary_BattleLogic_LOGICTYPE__BattleLogic_taskFunction__Add__);
  logicEnemyAi = (Il2CppObject *)this->fields.logicEnemyAi;
  v200 = (BattleLogic_taskFunction_o *)sub_B170CC(BattleLogic_taskFunction_TypeInfo, v196, v197, v198, v199);
  BattleLogic_taskFunction___ctor(v200, logicEnemyAi, Method_BattleLogicEnemyAi_taskAIAttack__, 0LL);
  System_Collections_Generic_Dictionary_Voice_BATTLE__string___Add(
    v158,
    10,
    (System_String_o *)v200,
    (const MethodInfo_2DFFC54 *)Method_System_Collections_Generic_Dictionary_BattleLogic_LOGICTYPE__BattleLogic_taskFunction__Add__);
  v201 = (Il2CppObject *)this->fields.logicEnemyAi;
  v206 = (BattleLogic_taskFunction_o *)sub_B170CC(BattleLogic_taskFunction_TypeInfo, v202, v203, v204, v205);
  BattleLogic_taskFunction___ctor(v206, v201, Method_BattleLogicEnemyAi_taskAIAttack__, 0LL);
  System_Collections_Generic_Dictionary_Voice_BATTLE__string___Add(
    v158,
    11,
    (System_String_o *)v206,
    (const MethodInfo_2DFFC54 *)Method_System_Collections_Generic_Dictionary_BattleLogic_LOGICTYPE__BattleLogic_taskFunction__Add__);
  v207 = (Il2CppObject *)this->fields.logicEnemyAi;
  v212 = (BattleLogic_taskFunction_o *)sub_B170CC(BattleLogic_taskFunction_TypeInfo, v208, v209, v210, v211);
  BattleLogic_taskFunction___ctor(v212, v207, Method_BattleLogicEnemyAi_taskAIAttack__, 0LL);
  System_Collections_Generic_Dictionary_Voice_BATTLE__string___Add(
    v158,
    12,
    (System_String_o *)v212,
    (const MethodInfo_2DFFC54 *)Method_System_Collections_Generic_Dictionary_BattleLogic_LOGICTYPE__BattleLogic_taskFunction__Add__);
  logicspecial = (Il2CppObject *)this->fields.logicspecial;
  v218 = (BattleLogic_taskFunction_o *)sub_B170CC(BattleLogic_taskFunction_TypeInfo, v214, v215, v216, v217);
  BattleLogic_taskFunction___ctor(v218, logicspecial, Method_BattleLogicSpecial_taskTresureDvc__, 0LL);
  System_Collections_Generic_Dictionary_Voice_BATTLE__string___Add(
    v158,
    6,
    (System_String_o *)v218,
    (const MethodInfo_2DFFC54 *)Method_System_Collections_Generic_Dictionary_BattleLogic_LOGICTYPE__BattleLogic_taskFunction__Add__);
  v219 = (Il2CppObject *)this->fields.logicspecial;
  v224 = (BattleLogic_taskFunction_o *)sub_B170CC(BattleLogic_taskFunction_TypeInfo, v220, v221, v222, v223);
  BattleLogic_taskFunction___ctor(v224, v219, Method_BattleLogicSpecial_taskTresureDvc__, 0LL);
  System_Collections_Generic_Dictionary_Voice_BATTLE__string___Add(
    v158,
    7,
    (System_String_o *)v224,
    (const MethodInfo_2DFFC54 *)Method_System_Collections_Generic_Dictionary_BattleLogic_LOGICTYPE__BattleLogic_taskFunction__Add__);
  v225 = (Il2CppObject *)this->fields.logicspecial;
  v230 = (BattleLogic_taskFunction_o *)sub_B170CC(BattleLogic_taskFunction_TypeInfo, v226, v227, v228, v229);
  BattleLogic_taskFunction___ctor(v230, v225, Method_BattleLogicSpecial_taskTresureDvc__, 0LL);
  System_Collections_Generic_Dictionary_Voice_BATTLE__string___Add(
    v158,
    8,
    (System_String_o *)v230,
    (const MethodInfo_2DFFC54 *)Method_System_Collections_Generic_Dictionary_BattleLogic_LOGICTYPE__BattleLogic_taskFunction__Add__);
  v231 = (Il2CppObject *)this->fields.logicspecial;
  v236 = (BattleLogic_taskFunction_o *)sub_B170CC(BattleLogic_taskFunction_TypeInfo, v232, v233, v234, v235);
  BattleLogic_taskFunction___ctor(v236, v231, Method_BattleLogicSpecial_taskEnemyTresureDvc__, 0LL);
  System_Collections_Generic_Dictionary_Voice_BATTLE__string___Add(
    v158,
    14,
    (System_String_o *)v236,
    (const MethodInfo_2DFFC54 *)Method_System_Collections_Generic_Dictionary_BattleLogic_LOGICTYPE__BattleLogic_taskFunction__Add__);
  v237 = (Il2CppObject *)this->fields.logicspecial;
  v242 = (BattleLogic_taskFunction_o *)sub_B170CC(BattleLogic_taskFunction_TypeInfo, v238, v239, v240, v241);
  BattleLogic_taskFunction___ctor(v242, v237, Method_BattleLogicSpecial_taskEnemyTresureDvc__, 0LL);
  System_Collections_Generic_Dictionary_Voice_BATTLE__string___Add(
    v158,
    15,
    (System_String_o *)v242,
    (const MethodInfo_2DFFC54 *)Method_System_Collections_Generic_Dictionary_BattleLogic_LOGICTYPE__BattleLogic_taskFunction__Add__);
  v243 = (Il2CppObject *)this->fields.logicspecial;
  v248 = (BattleLogic_taskFunction_o *)sub_B170CC(BattleLogic_taskFunction_TypeInfo, v244, v245, v246, v247);
  BattleLogic_taskFunction___ctor(v248, v243, Method_BattleLogicSpecial_taskEnemyTresureDvc__, 0LL);
  System_Collections_Generic_Dictionary_Voice_BATTLE__string___Add(
    v158,
    16,
    (System_String_o *)v248,
    (const MethodInfo_2DFFC54 *)Method_System_Collections_Generic_Dictionary_BattleLogic_LOGICTYPE__BattleLogic_taskFunction__Add__);
  v249 = (Il2CppObject *)this->fields.logicspecial;
  v254 = (BattleLogic_taskFunction_o *)sub_B170CC(BattleLogic_taskFunction_TypeInfo, v250, v251, v252, v253);
  BattleLogic_taskFunction___ctor(v254, v249, Method_BattleLogicSpecial_taskTresureDvcAlways__, 0LL);
  System_Collections_Generic_Dictionary_Voice_BATTLE__string___Add(
    v158,
    18,
    (System_String_o *)v254,
    (const MethodInfo_2DFFC54 *)Method_System_Collections_Generic_Dictionary_BattleLogic_LOGICTYPE__BattleLogic_taskFunction__Add__);
  v255 = (Il2CppObject *)this->fields.logicspecial;
  v260 = (BattleLogic_taskFunction_o *)sub_B170CC(BattleLogic_taskFunction_TypeInfo, v256, v257, v258, v259);
  BattleLogic_taskFunction___ctor(v260, v255, Method_BattleLogicSpecial_taskTresureDvcAlways__, 0LL);
  System_Collections_Generic_Dictionary_Voice_BATTLE__string___Add(
    v158,
    19,
    (System_String_o *)v260,
    (const MethodInfo_2DFFC54 *)Method_System_Collections_Generic_Dictionary_BattleLogic_LOGICTYPE__BattleLogic_taskFunction__Add__);
  v261 = (Il2CppObject *)this->fields.logicspecial;
  v266 = (BattleLogic_taskFunction_o *)sub_B170CC(BattleLogic_taskFunction_TypeInfo, v262, v263, v264, v265);
  BattleLogic_taskFunction___ctor(v266, v261, Method_BattleLogicSpecial_taskTresureDvcAlways__, 0LL);
  System_Collections_Generic_Dictionary_Voice_BATTLE__string___Add(
    v158,
    20,
    (System_String_o *)v266,
    (const MethodInfo_2DFFC54 *)Method_System_Collections_Generic_Dictionary_BattleLogic_LOGICTYPE__BattleLogic_taskFunction__Add__);
  v267 = (Il2CppObject *)this->fields.logicspecial;
  v272 = (BattleLogic_taskFunction_o *)sub_B170CC(BattleLogic_taskFunction_TypeInfo, v268, v269, v270, v271);
  BattleLogic_taskFunction___ctor(v272, v267, Method_BattleLogicSpecial_taskEnemyTresureDvcAlways__, 0LL);
  System_Collections_Generic_Dictionary_Voice_BATTLE__string___Add(
    v158,
    21,
    (System_String_o *)v272,
    (const MethodInfo_2DFFC54 *)Method_System_Collections_Generic_Dictionary_BattleLogic_LOGICTYPE__BattleLogic_taskFunction__Add__);
  v273 = (Il2CppObject *)this->fields.logicspecial;
  v278 = (BattleLogic_taskFunction_o *)sub_B170CC(BattleLogic_taskFunction_TypeInfo, v274, v275, v276, v277);
  BattleLogic_taskFunction___ctor(v278, v273, Method_BattleLogicSpecial_taskEnemyTresureDvcAlways__, 0LL);
  System_Collections_Generic_Dictionary_Voice_BATTLE__string___Add(
    v158,
    22,
    (System_String_o *)v278,
    (const MethodInfo_2DFFC54 *)Method_System_Collections_Generic_Dictionary_BattleLogic_LOGICTYPE__BattleLogic_taskFunction__Add__);
  v279 = (Il2CppObject *)this->fields.logicspecial;
  v284 = (BattleLogic_taskFunction_o *)sub_B170CC(BattleLogic_taskFunction_TypeInfo, v280, v281, v282, v283);
  BattleLogic_taskFunction___ctor(v284, v279, Method_BattleLogicSpecial_taskEnemyTresureDvcAlways__, 0LL);
  System_Collections_Generic_Dictionary_Voice_BATTLE__string___Add(
    v158,
    23,
    (System_String_o *)v284,
    (const MethodInfo_2DFFC54 *)Method_System_Collections_Generic_Dictionary_BattleLogic_LOGICTYPE__BattleLogic_taskFunction__Add__);
  v289 = (BattleLogic_taskFunction_o *)sub_B170CC(BattleLogic_taskFunction_TypeInfo, v285, v286, v287, v288);
  BattleLogic_taskFunction___ctor(v289, (Il2CppObject *)this, Method_BattleLogic_taskCommandWait__, 0LL);
  System_Collections_Generic_Dictionary_Voice_BATTLE__string___Add(
    v158,
    9,
    (System_String_o *)v289,
    (const MethodInfo_2DFFC54 *)Method_System_Collections_Generic_Dictionary_BattleLogic_LOGICTYPE__BattleLogic_taskFunction__Add__);
  v294 = (BattleLogic_taskFunction_o *)sub_B170CC(BattleLogic_taskFunction_TypeInfo, v290, v291, v292, v293);
  BattleLogic_taskFunction___ctor(v294, (Il2CppObject *)this, Method_BattleLogic_taskLastActorBackStep__, 0LL);
  System_Collections_Generic_Dictionary_Voice_BATTLE__string___Add(
    v158,
    13,
    (System_String_o *)v294,
    (const MethodInfo_2DFFC54 *)Method_System_Collections_Generic_Dictionary_BattleLogic_LOGICTYPE__BattleLogic_taskFunction__Add__);
  v299 = (BattleLogic_taskFunction_o *)sub_B170CC(BattleLogic_taskFunction_TypeInfo, v295, v296, v297, v298);
  BattleLogic_taskFunction___ctor(v299, (Il2CppObject *)this, Method_BattleLogic_taskGetCriticalPoint__, 0LL);
  System_Collections_Generic_Dictionary_Voice_BATTLE__string___Add(
    v158,
    24,
    (System_String_o *)v299,
    (const MethodInfo_2DFFC54 *)Method_System_Collections_Generic_Dictionary_BattleLogic_LOGICTYPE__BattleLogic_taskFunction__Add__);
  v304 = (BattleLogic_taskFunction_o *)sub_B170CC(BattleLogic_taskFunction_TypeInfo, v300, v301, v302, v303);
  BattleLogic_taskFunction___ctor(v304, (Il2CppObject *)this, Method_BattleLogic_taskEndPlayerTurn__, 0LL);
  System_Collections_Generic_Dictionary_Voice_BATTLE__string___Add(
    v158,
    25,
    (System_String_o *)v304,
    (const MethodInfo_2DFFC54 *)Method_System_Collections_Generic_Dictionary_BattleLogic_LOGICTYPE__BattleLogic_taskFunction__Add__);
  v309 = (BattleLogic_taskFunction_o *)sub_B170CC(BattleLogic_taskFunction_TypeInfo, v305, v306, v307, v308);
  BattleLogic_taskFunction___ctor(v309, (Il2CppObject *)this, Method_BattleLogic_taskEndEnemyTurn__, 0LL);
  System_Collections_Generic_Dictionary_Voice_BATTLE__string___Add(
    v158,
    26,
    (System_String_o *)v309,
    (const MethodInfo_2DFFC54 *)Method_System_Collections_Generic_Dictionary_BattleLogic_LOGICTYPE__BattleLogic_taskFunction__Add__);
  v314 = (BattleLogic_taskFunction_o *)sub_B170CC(BattleLogic_taskFunction_TypeInfo, v310, v311, v312, v313);
  BattleLogic_taskFunction___ctor(v314, (Il2CppObject *)this, Method_BattleLogic_taskEnemyEndWait__, 0LL);
  System_Collections_Generic_Dictionary_Voice_BATTLE__string___Add(
    v158,
    32,
    (System_String_o *)v314,
    (const MethodInfo_2DFFC54 *)Method_System_Collections_Generic_Dictionary_BattleLogic_LOGICTYPE__BattleLogic_taskFunction__Add__);
  logicReaction = (Il2CppObject *)this->fields.logicReaction;
  v320 = (BattleLogic_taskFunction_o *)sub_B170CC(BattleLogic_taskFunction_TypeInfo, v316, v317, v318, v319);
  BattleLogic_taskFunction___ctor(v320, logicReaction, Method_BattleLogicReaction_checkPlayerActionEnd__, 0LL);
  System_Collections_Generic_Dictionary_Voice_BATTLE__string___Add(
    v158,
    33,
    (System_String_o *)v320,
    (const MethodInfo_2DFFC54 *)Method_System_Collections_Generic_Dictionary_BattleLogic_LOGICTYPE__BattleLogic_taskFunction__Add__);
  v321 = (Il2CppObject *)this->fields.logicnomal;
  v326 = (BattleLogic_taskFunction_o *)sub_B170CC(BattleLogic_taskFunction_TypeInfo, v322, v323, v324, v325);
  BattleLogic_taskFunction___ctor(v326, v321, Method_BattleLogicNomal_taskBuffAdd__, 0LL);
  System_Collections_Generic_Dictionary_Voice_BATTLE__string___Add(
    v158,
    34,
    (System_String_o *)v326,
    (const MethodInfo_2DFFC54 *)Method_System_Collections_Generic_Dictionary_BattleLogic_LOGICTYPE__BattleLogic_taskFunction__Add__);
  v327 = (Il2CppObject *)this->fields.logicnomal;
  v332 = (BattleLogic_taskFunction_o *)sub_B170CC(BattleLogic_taskFunction_TypeInfo, v328, v329, v330, v331);
  BattleLogic_taskFunction___ctor(v332, v327, Method_BattleLogicNomal_taskBuffAdd__, 0LL);
  System_Collections_Generic_Dictionary_Voice_BATTLE__string___Add(
    v158,
    35,
    (System_String_o *)v332,
    (const MethodInfo_2DFFC54 *)Method_System_Collections_Generic_Dictionary_BattleLogic_LOGICTYPE__BattleLogic_taskFunction__Add__);
  v337 = (BattleLogic_taskFunction_o *)sub_B170CC(BattleLogic_taskFunction_TypeInfo, v333, v334, v335, v336);
  BattleLogic_taskFunction___ctor(v337, (Il2CppObject *)this, Method_BattleLogic_taskStartPlayerTurn__, 0LL);
  System_Collections_Generic_Dictionary_Voice_BATTLE__string___Add(
    v158,
    36,
    (System_String_o *)v337,
    (const MethodInfo_2DFFC54 *)Method_System_Collections_Generic_Dictionary_BattleLogic_LOGICTYPE__BattleLogic_taskFunction__Add__);
  v342 = (BattleLogic_taskFunction_o *)sub_B170CC(BattleLogic_taskFunction_TypeInfo, v338, v339, v340, v341);
  BattleLogic_taskFunction___ctor(v342, (Il2CppObject *)this, Method_BattleLogic_taskStartEnemyTurn__, 0LL);
  System_Collections_Generic_Dictionary_Voice_BATTLE__string___Add(
    v158,
    37,
    (System_String_o *)v342,
    (const MethodInfo_2DFFC54 *)Method_System_Collections_Generic_Dictionary_BattleLogic_LOGICTYPE__BattleLogic_taskFunction__Add__);
  v347 = (BattleLogic_taskFunction_o *)sub_B170CC(BattleLogic_taskFunction_TypeInfo, v343, v344, v345, v346);
  BattleLogic_taskFunction___ctor(v347, (Il2CppObject *)this, Method_BattleLogic_taskStartTactical__, 0LL);
  System_Collections_Generic_Dictionary_Voice_BATTLE__string___Add(
    v158,
    38,
    (System_String_o *)v347,
    (const MethodInfo_2DFFC54 *)Method_System_Collections_Generic_Dictionary_BattleLogic_LOGICTYPE__BattleLogic_taskFunction__Add__);
  v348 = (Il2CppObject *)this->fields.logicReaction;
  v353 = (BattleLogic_taskFunction_o *)sub_B170CC(BattleLogic_taskFunction_TypeInfo, v349, v350, v351, v352);
  BattleLogic_taskFunction___ctor(v353, v348, Method_BattleLogicReaction_checkEnemyStartTurn__, 0LL);
  System_Collections_Generic_Dictionary_Voice_BATTLE__string___Add(
    v158,
    30,
    (System_String_o *)v353,
    (const MethodInfo_2DFFC54 *)Method_System_Collections_Generic_Dictionary_BattleLogic_LOGICTYPE__BattleLogic_taskFunction__Add__);
  v354 = (Il2CppObject *)this->fields.logicReaction;
  v359 = (BattleLogic_taskFunction_o *)sub_B170CC(BattleLogic_taskFunction_TypeInfo, v355, v356, v357, v358);
  BattleLogic_taskFunction___ctor(v359, v354, Method_BattleLogicReaction_checkEnemyEndTurn__, 0LL);
  System_Collections_Generic_Dictionary_Voice_BATTLE__string___Add(
    v158,
    31,
    (System_String_o *)v359,
    (const MethodInfo_2DFFC54 *)Method_System_Collections_Generic_Dictionary_BattleLogic_LOGICTYPE__BattleLogic_taskFunction__Add__);
  v360 = (Il2CppObject *)this->fields.logicnomal;
  v365 = (BattleLogic_taskFunction_o *)sub_B170CC(BattleLogic_taskFunction_TypeInfo, v361, v362, v363, v364);
  BattleLogic_taskFunction___ctor(v365, v360, Method_BattleLogicNomal_checkReflectionTask__, 0LL);
  System_Collections_Generic_Dictionary_Voice_BATTLE__string___Add(
    v158,
    41,
    (System_String_o *)v365,
    (const MethodInfo_2DFFC54 *)Method_System_Collections_Generic_Dictionary_BattleLogic_LOGICTYPE__BattleLogic_taskFunction__Add__);
  v366 = (Il2CppObject *)this->fields.logicnomal;
  v371 = (BattleLogic_taskFunction_o *)sub_B170CC(BattleLogic_taskFunction_TypeInfo, v367, v368, v369, v370);
  BattleLogic_taskFunction___ctor(v371, v366, Method_BattleLogicNomal_checkReflectionTask__, 0LL);
  System_Collections_Generic_Dictionary_Voice_BATTLE__string___Add(
    v158,
    40,
    (System_String_o *)v371,
    (const MethodInfo_2DFFC54 *)Method_System_Collections_Generic_Dictionary_BattleLogic_LOGICTYPE__BattleLogic_taskFunction__Add__);
  v372 = (Il2CppObject *)this->fields.logicEnemyAi;
  v377 = (BattleLogic_taskFunction_o *)sub_B170CC(BattleLogic_taskFunction_TypeInfo, v373, v374, v375, v376);
  BattleLogic_taskFunction___ctor(v377, v372, Method_BattleLogicEnemyAi_taskAIAttack__, 0LL);
  System_Collections_Generic_Dictionary_Voice_BATTLE__string___Add(
    v158,
    42,
    (System_String_o *)v377,
    (const MethodInfo_2DFFC54 *)Method_System_Collections_Generic_Dictionary_BattleLogic_LOGICTYPE__BattleLogic_taskFunction__Add__);
  logicFieldAi = (Il2CppObject *)this->fields.logicFieldAi;
  v383 = (BattleLogic_taskFunction_o *)sub_B170CC(BattleLogic_taskFunction_TypeInfo, v379, v380, v381, v382);
  BattleLogic_taskFunction___ctor(v383, logicFieldAi, Method_BattleLogicFieldAi_checkFieldAiTask__, 0LL);
  System_Collections_Generic_Dictionary_Voice_BATTLE__string___Add(
    v158,
    48,
    (System_String_o *)v383,
    (const MethodInfo_2DFFC54 *)Method_System_Collections_Generic_Dictionary_BattleLogic_LOGICTYPE__BattleLogic_taskFunction__Add__);
  v384 = (Il2CppObject *)this->fields.logicFieldAi;
  v389 = (BattleLogic_taskFunction_o *)sub_B170CC(BattleLogic_taskFunction_TypeInfo, v385, v386, v387, v388);
  BattleLogic_taskFunction___ctor(v389, v384, Method_BattleLogicFieldAi_checkFieldAiTask__, 0LL);
  System_Collections_Generic_Dictionary_Voice_BATTLE__string___Add(
    v158,
    49,
    (System_String_o *)v389,
    (const MethodInfo_2DFFC54 *)Method_System_Collections_Generic_Dictionary_BattleLogic_LOGICTYPE__BattleLogic_taskFunction__Add__);
  v390 = (Il2CppObject *)this->fields.logicFieldAi;
  v395 = (BattleLogic_taskFunction_o *)sub_B170CC(BattleLogic_taskFunction_TypeInfo, v391, v392, v393, v394);
  BattleLogic_taskFunction___ctor(v395, v390, Method_BattleLogicFieldAi_checkFieldAiTask__, 0LL);
  System_Collections_Generic_Dictionary_Voice_BATTLE__string___Add(
    v158,
    46,
    (System_String_o *)v395,
    (const MethodInfo_2DFFC54 *)Method_System_Collections_Generic_Dictionary_BattleLogic_LOGICTYPE__BattleLogic_taskFunction__Add__);
  v396 = (Il2CppObject *)this->fields.logicFieldAi;
  v401 = (BattleLogic_taskFunction_o *)sub_B170CC(BattleLogic_taskFunction_TypeInfo, v397, v398, v399, v400);
  BattleLogic_taskFunction___ctor(v401, v396, Method_BattleLogicFieldAi_checkFieldAiTask__, 0LL);
  System_Collections_Generic_Dictionary_Voice_BATTLE__string___Add(
    v158,
    47,
    (System_String_o *)v401,
    (const MethodInfo_2DFFC54 *)Method_System_Collections_Generic_Dictionary_BattleLogic_LOGICTYPE__BattleLogic_taskFunction__Add__);
  v402 = (Il2CppObject *)this->fields.logicFieldAi;
  v407 = (BattleLogic_taskFunction_o *)sub_B170CC(BattleLogic_taskFunction_TypeInfo, v403, v404, v405, v406);
  BattleLogic_taskFunction___ctor(v407, v402, Method_BattleLogicFieldAi_checkFieldAiTask__, 0LL);
  System_Collections_Generic_Dictionary_Voice_BATTLE__string___Add(
    v158,
    44,
    (System_String_o *)v407,
    (const MethodInfo_2DFFC54 *)Method_System_Collections_Generic_Dictionary_BattleLogic_LOGICTYPE__BattleLogic_taskFunction__Add__);
  v412 = (BattleLogic_taskFunction_o *)sub_B170CC(BattleLogic_taskFunction_TypeInfo, v408, v409, v410, v411);
  BattleLogic_taskFunction___ctor(v412, (Il2CppObject *)this, Method_BattleLogic_checkOverKill__, 0LL);
  System_Collections_Generic_Dictionary_Voice_BATTLE__string___Add(
    v158,
    50,
    (System_String_o *)v412,
    (const MethodInfo_2DFFC54 *)Method_System_Collections_Generic_Dictionary_BattleLogic_LOGICTYPE__BattleLogic_taskFunction__Add__);
  v417 = (BattleLogic_taskFunction_o *)sub_B170CC(BattleLogic_taskFunction_TypeInfo, v413, v414, v415, v416);
  BattleLogic_taskFunction___ctor(v417, (Il2CppObject *)this, Method_BattleLogic_checkImmediateEntry__, 0LL);
  System_Collections_Generic_Dictionary_Voice_BATTLE__string___Add(
    v158,
    51,
    (System_String_o *)v417,
    (const MethodInfo_2DFFC54 *)Method_System_Collections_Generic_Dictionary_BattleLogic_LOGICTYPE__BattleLogic_taskFunction__Add__);
  v422 = (BattleLogic_taskFunction_o *)sub_B170CC(BattleLogic_taskFunction_TypeInfo, v418, v419, v420, v421);
  BattleLogic_taskFunction___ctor(v422, (Il2CppObject *)this, Method_BattleLogic_startImmediateEntry__, 0LL);
  System_Collections_Generic_Dictionary_Voice_BATTLE__string___Add(
    v158,
    52,
    (System_String_o *)v422,
    (const MethodInfo_2DFFC54 *)Method_System_Collections_Generic_Dictionary_BattleLogic_LOGICTYPE__BattleLogic_taskFunction__Add__);
  v427 = (BattleLogic_taskFunction_o *)sub_B170CC(BattleLogic_taskFunction_TypeInfo, v423, v424, v425, v426);
  BattleLogic_taskFunction___ctor(v427, (Il2CppObject *)this, Method_BattleLogic_afterImmediateEntry__, 0LL);
  System_Collections_Generic_Dictionary_Voice_BATTLE__string___Add(
    v158,
    53,
    (System_String_o *)v427,
    (const MethodInfo_2DFFC54 *)Method_System_Collections_Generic_Dictionary_BattleLogic_LOGICTYPE__BattleLogic_taskFunction__Add__);
  v428 = (Il2CppObject *)this->fields.logicEnemyAi;
  v433 = (BattleLogic_taskFunction_o *)sub_B170CC(BattleLogic_taskFunction_TypeInfo, v429, v430, v431, v432);
  BattleLogic_taskFunction___ctor(v433, v428, Method_BattleLogicEnemyAi_resetEnemyActList__, 0LL);
  System_Collections_Generic_Dictionary_Voice_BATTLE__string___Add(
    v158,
    54,
    (System_String_o *)v433,
    (const MethodInfo_2DFFC54 *)Method_System_Collections_Generic_Dictionary_BattleLogic_LOGICTYPE__BattleLogic_taskFunction__Add__);
  v434 = (Il2CppObject *)this->fields.logicnomal;
  v439 = (BattleLogic_taskFunction_o *)sub_B170CC(BattleLogic_taskFunction_TypeInfo, v435, v436, v437, v438);
  BattleLogic_taskFunction___ctor(v439, v434, Method_BattleLogicNomal_taskCheckShiftServants__, 0LL);
  System_Collections_Generic_Dictionary_Voice_BATTLE__string___Add(
    v158,
    55,
    (System_String_o *)v439,
    (const MethodInfo_2DFFC54 *)Method_System_Collections_Generic_Dictionary_BattleLogic_LOGICTYPE__BattleLogic_taskFunction__Add__);
  v440 = (Il2CppObject *)this->fields.logicReaction;
  v445 = (BattleLogic_taskFunction_o *)sub_B170CC(BattleLogic_taskFunction_TypeInfo, v441, v442, v443, v444);
  BattleLogic_taskFunction___ctor(v445, v440, Method_BattleLogicReaction_CheckEnemyShiftAfter__, 0LL);
  System_Collections_Generic_Dictionary_Voice_BATTLE__string___Add(
    v158,
    73,
    (System_String_o *)v445,
    (const MethodInfo_2DFFC54 *)Method_System_Collections_Generic_Dictionary_BattleLogic_LOGICTYPE__BattleLogic_taskFunction__Add__);
  v446 = (Il2CppObject *)this->fields.logicReaction;
  v451 = (BattleLogic_taskFunction_o *)sub_B170CC(BattleLogic_taskFunction_TypeInfo, v447, v448, v449, v450);
  BattleLogic_taskFunction___ctor(v451, v446, Method_BattleLogicReaction_CheckEnemyPlayerTurnEndAfter__, 0LL);
  System_Collections_Generic_Dictionary_Voice_BATTLE__string___Add(
    v158,
    57,
    (System_String_o *)v451,
    (const MethodInfo_2DFFC54 *)Method_System_Collections_Generic_Dictionary_BattleLogic_LOGICTYPE__BattleLogic_taskFunction__Add__);
  v456 = (BattleLogic_taskFunction_o *)sub_B170CC(BattleLogic_taskFunction_TypeInfo, v452, v453, v454, v455);
  BattleLogic_taskFunction___ctor(v456, (Il2CppObject *)this, Method_BattleLogic_taskPlayerAttackTerm__, 0LL);
  System_Collections_Generic_Dictionary_Voice_BATTLE__string___Add(
    v158,
    58,
    (System_String_o *)v456,
    (const MethodInfo_2DFFC54 *)Method_System_Collections_Generic_Dictionary_BattleLogic_LOGICTYPE__BattleLogic_taskFunction__Add__);
  v461 = (BattleLogic_taskFunction_o *)sub_B170CC(BattleLogic_taskFunction_TypeInfo, v457, v458, v459, v460);
  BattleLogic_taskFunction___ctor(v461, (Il2CppObject *)this, Method_BattleLogic_taskEnemyAttackTerm__, 0LL);
  System_Collections_Generic_Dictionary_Voice_BATTLE__string___Add(
    v158,
    59,
    (System_String_o *)v461,
    (const MethodInfo_2DFFC54 *)Method_System_Collections_Generic_Dictionary_BattleLogic_LOGICTYPE__BattleLogic_taskFunction__Add__);
  v462 = (Il2CppObject *)this->fields.logicnomal;
  v467 = (BattleLogic_taskFunction_o *)sub_B170CC(BattleLogic_taskFunction_TypeInfo, v463, v464, v465, v466);
  BattleLogic_taskFunction___ctor(v467, v462, Method_BattleLogicNomal_taskCounterFuncPlayer__, 0LL);
  System_Collections_Generic_Dictionary_Voice_BATTLE__string___Add(
    v158,
    67,
    (System_String_o *)v467,
    (const MethodInfo_2DFFC54 *)Method_System_Collections_Generic_Dictionary_BattleLogic_LOGICTYPE__BattleLogic_taskFunction__Add__);
  v468 = (Il2CppObject *)this->fields.logicnomal;
  v473 = (BattleLogic_taskFunction_o *)sub_B170CC(BattleLogic_taskFunction_TypeInfo, v469, v470, v471, v472);
  BattleLogic_taskFunction___ctor(v473, v468, Method_BattleLogicNomal_taskCounterFuncEnemy__, 0LL);
  System_Collections_Generic_Dictionary_Voice_BATTLE__string___Add(
    v158,
    68,
    (System_String_o *)v473,
    (const MethodInfo_2DFFC54 *)Method_System_Collections_Generic_Dictionary_BattleLogic_LOGICTYPE__BattleLogic_taskFunction__Add__);
  v474 = (Il2CppObject *)this->fields.logicEnemyAi;
  v479 = (BattleLogic_taskFunction_o *)sub_B170CC(BattleLogic_taskFunction_TypeInfo, v475, v476, v477, v478);
  BattleLogic_taskFunction___ctor(v479, v474, Method_BattleLogicEnemyAi_TaskAIAttackStart__, 0LL);
  System_Collections_Generic_Dictionary_Voice_BATTLE__string___Add(
    v158,
    69,
    (System_String_o *)v479,
    (const MethodInfo_2DFFC54 *)Method_System_Collections_Generic_Dictionary_BattleLogic_LOGICTYPE__BattleLogic_taskFunction__Add__);
  v480 = (Il2CppObject *)this->fields.logicEnemyAi;
  v485 = (BattleLogic_taskFunction_o *)sub_B170CC(BattleLogic_taskFunction_TypeInfo, v481, v482, v483, v484);
  BattleLogic_taskFunction___ctor(v485, v480, Method_BattleLogicEnemyAi_TaskAIAttackEnd__, 0LL);
  System_Collections_Generic_Dictionary_Voice_BATTLE__string___Add(
    v158,
    70,
    (System_String_o *)v485,
    (const MethodInfo_2DFFC54 *)Method_System_Collections_Generic_Dictionary_BattleLogic_LOGICTYPE__BattleLogic_taskFunction__Add__);
  v486 = (Il2CppObject *)this->fields.logicEnemyAi;
  v491 = (BattleLogic_taskFunction_o *)sub_B170CC(BattleLogic_taskFunction_TypeInfo, v487, v488, v489, v490);
  BattleLogic_taskFunction___ctor(v491, v486, Method_BattleLogicEnemyAi_TaskAIAttackPrecheck__, 0LL);
  System_Collections_Generic_Dictionary_Voice_BATTLE__string___Add(
    v158,
    71,
    (System_String_o *)v491,
    (const MethodInfo_2DFFC54 *)Method_System_Collections_Generic_Dictionary_BattleLogic_LOGICTYPE__BattleLogic_taskFunction__Add__);
  v492 = (Il2CppObject *)this->fields.logicReaction;
  v497 = (BattleLogic_taskFunction_o *)sub_B170CC(BattleLogic_taskFunction_TypeInfo, v493, v494, v495, v496);
  BattleLogic_taskFunction___ctor(v497, v492, Method_BattleLogicReaction_CheckPlayerActionStart__, 0LL);
  System_Collections_Generic_Dictionary_Voice_BATTLE__string___Add(
    v158,
    72,
    (System_String_o *)v497,
    (const MethodInfo_2DFFC54 *)Method_System_Collections_Generic_Dictionary_BattleLogic_LOGICTYPE__BattleLogic_taskFunction__Add__);
  this->fields.funclist = (struct System_Collections_Generic_Dictionary_BattleLogic_LOGICTYPE__BattleLogic_taskFunction__o *)v158;
  sub_B16F98(&this->fields.funclist, v158);
  v502 = (System_Collections_Generic_Dictionary_Voice_BATTLE__string__o *)sub_B170CC(
                                                                            System_Collections_Generic_Dictionary_BattleLogicTask_ACTIONTYPE__BattleLogic_createActionBattle__TypeInfo,
                                                                            v498,
                                                                            v499,
                                                                            v500,
                                                                            v501);
  System_Collections_Generic_Dictionary_Voice_BATTLE__string____ctor(
    v502,
    (const MethodInfo_2DFF0A0 *)Method_System_Collections_Generic_Dictionary_BattleLogicTask_ACTIONTYPE__BattleLogic_createActionBattle___ctor__);
  v503 = (Il2CppObject *)this->fields.logicnomal;
  v508 = (BattleLogic_createActionBattle_o *)sub_B170CC(BattleLogic_createActionBattle_TypeInfo, v504, v505, v506, v507);
  BattleLogic_createActionBattle___ctor(v508, v503, Method_BattleLogicNomal_createCommandBattle__, 0LL);
  if ( !v502 )
    goto LABEL_48;
  System_Collections_Generic_Dictionary_Voice_BATTLE__string___Add(
    v502,
    1,
    (System_String_o *)v508,
    (const MethodInfo_2DFFC54 *)Method_System_Collections_Generic_Dictionary_BattleLogicTask_ACTIONTYPE__BattleLogic_createActionBattle__Add__);
  v509 = (Il2CppObject *)this->fields.logicnomal;
  v514 = (BattleLogic_createActionBattle_o *)sub_B170CC(BattleLogic_createActionBattle_TypeInfo, v510, v511, v512, v513);
  BattleLogic_createActionBattle___ctor(v514, v509, Method_BattleLogicNomal_createCommandBattle__, 0LL);
  System_Collections_Generic_Dictionary_Voice_BATTLE__string___Add(
    v502,
    2,
    (System_String_o *)v514,
    (const MethodInfo_2DFFC54 *)Method_System_Collections_Generic_Dictionary_BattleLogicTask_ACTIONTYPE__BattleLogic_createActionBattle__Add__);
  logicSkill = (Il2CppObject *)this->fields.logicSkill;
  v520 = (BattleLogic_createActionBattle_o *)sub_B170CC(BattleLogic_createActionBattle_TypeInfo, v516, v517, v518, v519);
  BattleLogic_createActionBattle___ctor(v520, logicSkill, Method_BattleLogicSkill_createSkillData__, 0LL);
  System_Collections_Generic_Dictionary_Voice_BATTLE__string___Add(
    v502,
    3,
    (System_String_o *)v520,
    (const MethodInfo_2DFFC54 *)Method_System_Collections_Generic_Dictionary_BattleLogicTask_ACTIONTYPE__BattleLogic_createActionBattle__Add__);
  v521 = (Il2CppObject *)this->fields.logicspecial;
  v526 = (BattleLogic_createActionBattle_o *)sub_B170CC(BattleLogic_createActionBattle_TypeInfo, v522, v523, v524, v525);
  BattleLogic_createActionBattle___ctor(v526, v521, Method_BattleLogicSpecial_createSpecialData__, 0LL);
  System_Collections_Generic_Dictionary_Voice_BATTLE__string___Add(
    v502,
    4,
    (System_String_o *)v526,
    (const MethodInfo_2DFFC54 *)Method_System_Collections_Generic_Dictionary_BattleLogicTask_ACTIONTYPE__BattleLogic_createActionBattle__Add__);
  v527 = (Il2CppObject *)this->fields.logicspecial;
  v532 = (BattleLogic_createActionBattle_o *)sub_B170CC(BattleLogic_createActionBattle_TypeInfo, v528, v529, v530, v531);
  BattleLogic_createActionBattle___ctor(v532, v527, Method_BattleLogicSpecial_createCounterOverwriteSpecialData__, 0LL);
  System_Collections_Generic_Dictionary_Voice_BATTLE__string___Add(
    v502,
    5,
    (System_String_o *)v532,
    (const MethodInfo_2DFFC54 *)Method_System_Collections_Generic_Dictionary_BattleLogicTask_ACTIONTYPE__BattleLogic_createActionBattle__Add__);
  v537 = (BattleLogic_createActionBattle_o *)sub_B170CC(BattleLogic_createActionBattle_TypeInfo, v533, v534, v535, v536);
  BattleLogic_createActionBattle___ctor(v537, (Il2CppObject *)this, Method_BattleLogic_createLastActorBackStep__, 0LL);
  System_Collections_Generic_Dictionary_Voice_BATTLE__string___Add(
    v502,
    6,
    (System_String_o *)v537,
    (const MethodInfo_2DFFC54 *)Method_System_Collections_Generic_Dictionary_BattleLogicTask_ACTIONTYPE__BattleLogic_createActionBattle__Add__);
  v542 = (BattleLogic_createActionBattle_o *)sub_B170CC(BattleLogic_createActionBattle_TypeInfo, v538, v539, v540, v541);
  BattleLogic_createActionBattle___ctor(v542, (Il2CppObject *)this, Method_BattleLogic_createSystem__, 0LL);
  System_Collections_Generic_Dictionary_Voice_BATTLE__string___Add(
    v502,
    7,
    (System_String_o *)v542,
    (const MethodInfo_2DFFC54 *)Method_System_Collections_Generic_Dictionary_BattleLogicTask_ACTIONTYPE__BattleLogic_createActionBattle__Add__);
  v543 = (Il2CppObject *)this->fields.logicnomal;
  v548 = (BattleLogic_createActionBattle_o *)sub_B170CC(BattleLogic_createActionBattle_TypeInfo, v544, v545, v546, v547);
  BattleLogic_createActionBattle___ctor(v548, v543, Method_BattleLogicNomal_createComboOrder__, 0LL);
  System_Collections_Generic_Dictionary_Voice_BATTLE__string___Add(
    v502,
    8,
    (System_String_o *)v548,
    (const MethodInfo_2DFFC54 *)Method_System_Collections_Generic_Dictionary_BattleLogicTask_ACTIONTYPE__BattleLogic_createActionBattle__Add__);
  v549 = (Il2CppObject *)this->fields.logicSkill;
  v554 = (BattleLogic_createActionBattle_o *)sub_B170CC(BattleLogic_createActionBattle_TypeInfo, v550, v551, v552, v553);
  BattleLogic_createActionBattle___ctor(v554, v549, Method_BattleLogicSkill_createCommandSpell__, 0LL);
  System_Collections_Generic_Dictionary_Voice_BATTLE__string___Add(
    v502,
    9,
    (System_String_o *)v554,
    (const MethodInfo_2DFFC54 *)Method_System_Collections_Generic_Dictionary_BattleLogicTask_ACTIONTYPE__BattleLogic_createActionBattle__Add__);
  v555 = (Il2CppObject *)this->fields.logicnomal;
  v560 = (BattleLogic_createActionBattle_o *)sub_B170CC(BattleLogic_createActionBattle_TypeInfo, v556, v557, v558, v559);
  BattleLogic_createActionBattle___ctor(v560, v555, Method_BattleLogicNomal_createPlayMotion__, 0LL);
  System_Collections_Generic_Dictionary_Voice_BATTLE__string___Add(
    v502,
    10,
    (System_String_o *)v560,
    (const MethodInfo_2DFFC54 *)Method_System_Collections_Generic_Dictionary_BattleLogicTask_ACTIONTYPE__BattleLogic_createActionBattle__Add__);
  v561 = (Il2CppObject *)this->fields.logicnomal;
  v566 = (BattleLogic_createActionBattle_o *)sub_B170CC(BattleLogic_createActionBattle_TypeInfo, v562, v563, v564, v565);
  BattleLogic_createActionBattle___ctor(v566, v561, Method_BattleLogicNomal_createEndTurnPlayer__, 0LL);
  System_Collections_Generic_Dictionary_Voice_BATTLE__string___Add(
    v502,
    11,
    (System_String_o *)v566,
    (const MethodInfo_2DFFC54 *)Method_System_Collections_Generic_Dictionary_BattleLogicTask_ACTIONTYPE__BattleLogic_createActionBattle__Add__);
  v567 = (Il2CppObject *)this->fields.logicnomal;
  v572 = (BattleLogic_createActionBattle_o *)sub_B170CC(BattleLogic_createActionBattle_TypeInfo, v568, v569, v570, v571);
  BattleLogic_createActionBattle___ctor(v572, v567, Method_BattleLogicNomal_createEndTurnEnemy__, 0LL);
  System_Collections_Generic_Dictionary_Voice_BATTLE__string___Add(
    v502,
    12,
    (System_String_o *)v572,
    (const MethodInfo_2DFFC54 *)Method_System_Collections_Generic_Dictionary_BattleLogicTask_ACTIONTYPE__BattleLogic_createActionBattle__Add__);
  v573 = (Il2CppObject *)this->fields.logicReaction;
  v578 = (BattleLogic_createActionBattle_o *)sub_B170CC(BattleLogic_createActionBattle_TypeInfo, v574, v575, v576, v577);
  BattleLogic_createActionBattle___ctor(v578, v573, Method_BattleLogicReaction_createResurrection__, 0LL);
  System_Collections_Generic_Dictionary_Voice_BATTLE__string___Add(
    v502,
    13,
    (System_String_o *)v578,
    (const MethodInfo_2DFFC54 *)Method_System_Collections_Generic_Dictionary_BattleLogicTask_ACTIONTYPE__BattleLogic_createActionBattle__Add__);
  v579 = (Il2CppObject *)this->fields.logicReaction;
  v584 = (BattleLogic_createActionBattle_o *)sub_B170CC(BattleLogic_createActionBattle_TypeInfo, v580, v581, v582, v583);
  BattleLogic_createActionBattle___ctor(v584, v579, Method_BattleLogicReaction_createDeadMotion__, 0LL);
  System_Collections_Generic_Dictionary_Voice_BATTLE__string___Add(
    v502,
    14,
    (System_String_o *)v584,
    (const MethodInfo_2DFFC54 *)Method_System_Collections_Generic_Dictionary_BattleLogicTask_ACTIONTYPE__BattleLogic_createActionBattle__Add__);
  v585 = (Il2CppObject *)this->fields.logicnomal;
  v590 = (BattleLogic_createActionBattle_o *)sub_B170CC(BattleLogic_createActionBattle_TypeInfo, v586, v587, v588, v589);
  BattleLogic_createActionBattle___ctor(v590, v585, Method_BattleLogicNomal_createBuffAddPlayer__, 0LL);
  System_Collections_Generic_Dictionary_Voice_BATTLE__string___Add(
    v502,
    18,
    (System_String_o *)v590,
    (const MethodInfo_2DFFC54 *)Method_System_Collections_Generic_Dictionary_BattleLogicTask_ACTIONTYPE__BattleLogic_createActionBattle__Add__);
  v591 = (Il2CppObject *)this->fields.logicnomal;
  v596 = (BattleLogic_createActionBattle_o *)sub_B170CC(BattleLogic_createActionBattle_TypeInfo, v592, v593, v594, v595);
  BattleLogic_createActionBattle___ctor(v596, v591, Method_BattleLogicNomal_createBuffAddEnemy__, 0LL);
  System_Collections_Generic_Dictionary_Voice_BATTLE__string___Add(
    v502,
    19,
    (System_String_o *)v596,
    (const MethodInfo_2DFFC54 *)Method_System_Collections_Generic_Dictionary_BattleLogicTask_ACTIONTYPE__BattleLogic_createActionBattle__Add__);
  v597 = (Il2CppObject *)this->fields.logicnomal;
  v602 = (BattleLogic_createActionBattle_o *)sub_B170CC(BattleLogic_createActionBattle_TypeInfo, v598, v599, v600, v601);
  BattleLogic_createActionBattle___ctor(v602, v597, Method_BattleLogicNomal_createStartTurn__, 0LL);
  System_Collections_Generic_Dictionary_Voice_BATTLE__string___Add(
    v502,
    20,
    (System_String_o *)v602,
    (const MethodInfo_2DFFC54 *)Method_System_Collections_Generic_Dictionary_BattleLogicTask_ACTIONTYPE__BattleLogic_createActionBattle__Add__);
  v603 = (Il2CppObject *)this->fields.logicnomal;
  v608 = (BattleLogic_createActionBattle_o *)sub_B170CC(BattleLogic_createActionBattle_TypeInfo, v604, v605, v606, v607);
  BattleLogic_createActionBattle___ctor(v608, v603, Method_BattleLogicNomal_createStartEnemyTurn__, 0LL);
  System_Collections_Generic_Dictionary_Voice_BATTLE__string___Add(
    v502,
    21,
    (System_String_o *)v608,
    (const MethodInfo_2DFFC54 *)Method_System_Collections_Generic_Dictionary_BattleLogicTask_ACTIONTYPE__BattleLogic_createActionBattle__Add__);
  v613 = (BattleLogic_createActionBattle_o *)sub_B170CC(BattleLogic_createActionBattle_TypeInfo, v609, v610, v611, v612);
  BattleLogic_createActionBattle___ctor(v613, (Il2CppObject *)this, Method_BattleLogic_createCamera__, 0LL);
  System_Collections_Generic_Dictionary_Voice_BATTLE__string___Add(
    v502,
    27,
    (System_String_o *)v613,
    (const MethodInfo_2DFFC54 *)Method_System_Collections_Generic_Dictionary_BattleLogicTask_ACTIONTYPE__BattleLogic_createActionBattle__Add__);
  v618 = (BattleLogic_createActionBattle_o *)sub_B170CC(BattleLogic_createActionBattle_TypeInfo, v614, v615, v616, v617);
  BattleLogic_createActionBattle___ctor(v618, (Il2CppObject *)this, Method_BattleLogic_breakOnBattle__, 0LL);
  System_Collections_Generic_Dictionary_Voice_BATTLE__string___Add(
    v502,
    35,
    (System_String_o *)v618,
    (const MethodInfo_2DFFC54 *)Method_System_Collections_Generic_Dictionary_BattleLogicTask_ACTIONTYPE__BattleLogic_createActionBattle__Add__);
  v619 = (Il2CppObject *)this->fields.logicnomal;
  v624 = (BattleLogic_createActionBattle_o *)sub_B170CC(BattleLogic_createActionBattle_TypeInfo, v620, v621, v622, v623);
  BattleLogic_createActionBattle___ctor(v624, v619, Method_BattleLogicNomal_createShiftServant__, 0LL);
  System_Collections_Generic_Dictionary_Voice_BATTLE__string___Add(
    v502,
    37,
    (System_String_o *)v624,
    (const MethodInfo_2DFFC54 *)Method_System_Collections_Generic_Dictionary_BattleLogicTask_ACTIONTYPE__BattleLogic_createActionBattle__Add__);
  v625 = (Il2CppObject *)this->fields.logicReaction;
  v630 = (BattleLogic_createActionBattle_o *)sub_B170CC(BattleLogic_createActionBattle_TypeInfo, v626, v627, v628, v629);
  BattleLogic_createActionBattle___ctor(v630, v625, Method_BattleLogicReaction_createWithdraw__, 0LL);
  System_Collections_Generic_Dictionary_Voice_BATTLE__string___Add(
    v502,
    38,
    (System_String_o *)v630,
    (const MethodInfo_2DFFC54 *)Method_System_Collections_Generic_Dictionary_BattleLogicTask_ACTIONTYPE__BattleLogic_createActionBattle__Add__);
  v631 = (Il2CppObject *)this->fields.logicReaction;
  v636 = (BattleLogic_createActionBattle_o *)sub_B170CC(BattleLogic_createActionBattle_TypeInfo, v632, v633, v634, v635);
  BattleLogic_createActionBattle___ctor(v636, v631, Method_BattleLogicReaction_createChangeApp__, 0LL);
  System_Collections_Generic_Dictionary_Voice_BATTLE__string___Add(
    v502,
    40,
    (System_String_o *)v636,
    (const MethodInfo_2DFFC54 *)Method_System_Collections_Generic_Dictionary_BattleLogicTask_ACTIONTYPE__BattleLogic_createActionBattle__Add__);
  v641 = (BattleLogic_createActionBattle_o *)sub_B170CC(BattleLogic_createActionBattle_TypeInfo, v637, v638, v639, v640);
  BattleLogic_createActionBattle___ctor(v641, (Il2CppObject *)this, Method_BattleLogic_createEnemyCutIn__, 0LL);
  System_Collections_Generic_Dictionary_Voice_BATTLE__string___Add(
    v502,
    41,
    (System_String_o *)v641,
    (const MethodInfo_2DFFC54 *)Method_System_Collections_Generic_Dictionary_BattleLogicTask_ACTIONTYPE__BattleLogic_createActionBattle__Add__);
  v646 = (BattleLogic_createActionBattle_o *)sub_B170CC(BattleLogic_createActionBattle_TypeInfo, v642, v643, v644, v645);
  BattleLogic_createActionBattle___ctor(
    v646,
    (Il2CppObject *)this,
    Method_BattleLogic_createLoadImmediateEntryServant__,
    0LL);
  System_Collections_Generic_Dictionary_Voice_BATTLE__string___Add(
    v502,
    42,
    (System_String_o *)v646,
    (const MethodInfo_2DFFC54 *)Method_System_Collections_Generic_Dictionary_BattleLogicTask_ACTIONTYPE__BattleLogic_createActionBattle__Add__);
  v651 = (BattleLogic_createActionBattle_o *)sub_B170CC(BattleLogic_createActionBattle_TypeInfo, v647, v648, v649, v650);
  BattleLogic_createActionBattle___ctor(v651, (Il2CppObject *)this, Method_BattleLogic_CreateFieldPlayMotion__, 0LL);
  System_Collections_Generic_Dictionary_Voice_BATTLE__string___Add(
    v502,
    44,
    (System_String_o *)v651,
    (const MethodInfo_2DFFC54 *)Method_System_Collections_Generic_Dictionary_BattleLogicTask_ACTIONTYPE__BattleLogic_createActionBattle__Add__);
  v656 = (BattleLogic_createActionBattle_o *)sub_B170CC(BattleLogic_createActionBattle_TypeInfo, v652, v653, v654, v655);
  BattleLogic_createActionBattle___ctor(v656, (Il2CppObject *)this, Method_BattleLogic_CreateActionDataTaskSide__, 0LL);
  System_Collections_Generic_Dictionary_Voice_BATTLE__string___Add(
    v502,
    56,
    (System_String_o *)v656,
    (const MethodInfo_2DFFC54 *)Method_System_Collections_Generic_Dictionary_BattleLogicTask_ACTIONTYPE__BattleLogic_createActionBattle__Add__);
  v661 = (BattleLogic_createActionBattle_o *)sub_B170CC(BattleLogic_createActionBattle_TypeInfo, v657, v658, v659, v660);
  BattleLogic_createActionBattle___ctor(v661, (Il2CppObject *)this, Method_BattleLogic_CreateActionDataTaskSide__, 0LL);
  System_Collections_Generic_Dictionary_Voice_BATTLE__string___Add(
    v502,
    58,
    (System_String_o *)v661,
    (const MethodInfo_2DFFC54 *)Method_System_Collections_Generic_Dictionary_BattleLogicTask_ACTIONTYPE__BattleLogic_createActionBattle__Add__);
  v666 = (BattleLogic_createActionBattle_o *)sub_B170CC(BattleLogic_createActionBattle_TypeInfo, v662, v663, v664, v665);
  BattleLogic_createActionBattle___ctor(v666, (Il2CppObject *)this, Method_BattleLogic_CreateActionDataTaskSide__, 0LL);
  System_Collections_Generic_Dictionary_Voice_BATTLE__string___Add(
    v502,
    61,
    (System_String_o *)v666,
    (const MethodInfo_2DFFC54 *)Method_System_Collections_Generic_Dictionary_BattleLogicTask_ACTIONTYPE__BattleLogic_createActionBattle__Add__);
  v667 = (Il2CppObject *)this->fields.logicnomal;
  v672 = (BattleLogic_createActionBattle_o *)sub_B170CC(BattleLogic_createActionBattle_TypeInfo, v668, v669, v670, v671);
  BattleLogic_createActionBattle___ctor(v672, v667, Method_BattleLogicNomal_createShiftGuts__, 0LL);
  System_Collections_Generic_Dictionary_Voice_BATTLE__string___Add(
    v502,
    62,
    (System_String_o *)v672,
    (const MethodInfo_2DFFC54 *)Method_System_Collections_Generic_Dictionary_BattleLogicTask_ACTIONTYPE__BattleLogic_createActionBattle__Add__);
  v673 = (Il2CppObject *)this->fields.logicnomal;
  v678 = (BattleLogic_createActionBattle_o *)sub_B170CC(BattleLogic_createActionBattle_TypeInfo, v674, v675, v676, v677);
  BattleLogic_createActionBattle___ctor(v678, v673, Method_BattleLogicNomal_CreateProgressIntervalTurn__, 0LL);
  System_Collections_Generic_Dictionary_Voice_BATTLE__string___Add(
    v502,
    65,
    (System_String_o *)v678,
    (const MethodInfo_2DFFC54 *)Method_System_Collections_Generic_Dictionary_BattleLogicTask_ACTIONTYPE__BattleLogic_createActionBattle__Add__);
  this->fields.actionBattleList = (struct System_Collections_Generic_Dictionary_BattleLogicTask_ACTIONTYPE__BattleLogic_createActionBattle__o *)v502;
  sub_B16F98(&this->fields.actionBattleList, v502);
  v683 = (System_Collections_Generic_Dictionary_Voice_BATTLE__string__o *)sub_B170CC(
                                                                            System_Collections_Generic_Dictionary_BattleLogicTask_ACTIONTYPE__BattleLogic_reactionFunction__TypeInfo,
                                                                            v679,
                                                                            v680,
                                                                            v681,
                                                                            v682);
  System_Collections_Generic_Dictionary_Voice_BATTLE__string____ctor(
    v683,
    (const MethodInfo_2DFF0A0 *)Method_System_Collections_Generic_Dictionary_BattleLogicTask_ACTIONTYPE__BattleLogic_reactionFunction___ctor__);
  p_reactionlist = &this->fields.reactionlist;
  this->fields.reactionlist = (struct System_Collections_Generic_Dictionary_BattleLogicTask_ACTIONTYPE__BattleLogic_reactionFunction__o *)v683;
  sub_B16F98(&this->fields.reactionlist, v683);
  v685 = this->fields.logicnomal;
  if ( !v685 )
    goto LABEL_48;
  BattleLogicNomal__setReactionFunction(v685, *p_reactionlist, 0LL);
  if ( !*p_logicFieldAi )
    goto LABEL_48;
  BattleLogicFieldAi__setReactionFunction(*p_logicFieldAi, *p_reactionlist, 0LL);
  if ( !*p_logicNpcAi )
    goto LABEL_48;
  BattleLogicNpcAi__SetReactionFunction(*p_logicNpcAi, *p_reactionlist, 0LL);
  if ( !*p_logicReaction )
    goto LABEL_48;
  BattleLogicReaction__SetReactionFunction(*p_logicReaction, this->fields.reactionlist, 0LL);
  v687 = (System_Array_o *)sub_B17014(BattleLogic_LOGICTYPE___TypeInfo, 174LL, v686);
  v762.fields.value = Field__PrivateImplementationDetails__DB39FF3B88E189830F9C70F92523E675741F8CF01931BA55459EE4852D9A9451;
  System_Runtime_CompilerServices_RuntimeHelpers__InitializeArray_42629164(v687, v762, 0LL);
  this->fields.logiclist = (struct BattleLogic_LOGICTYPE_array *)v687;
  sub_B16F98(&this->fields.logiclist, v687);
  data = this->fields.data;
  v693 = (BattleAttackManager_o *)sub_B170CC(BattleAttackManager_TypeInfo, v689, v690, v691, v692);
  BattleAttackManager___ctor(v693, 0LL);
  if ( !v693 )
    goto LABEL_48;
  v694 = ((__int64 (__fastcall *)(BattleAttackManager_o *, struct BattleLogic_LOGICTYPE_array *, Il2CppMethodPointer))v693->klass->vtable._5_Init.method)(
           v693,
           this->fields.logiclist,
           v693->klass->vtable._6_Reset.methodPtr);
  if ( !data )
    goto LABEL_48;
  data->fields.battleAtkManager = (struct BattleAttackManager_o *)v694;
  sub_B16F98(&data->fields.battleAtkManager, v694);
  logictarget = this->fields.logictarget;
  if ( !logictarget )
    goto LABEL_48;
  v696 = this->fields.data;
  logictarget->fields.data = v696;
  sub_B16F98(&logictarget->fields, v696);
  v697 = *p_logicnomal;
  if ( !*p_logicnomal )
    goto LABEL_48;
  v697->fields.logic = this;
  sub_B16F98(&v697->fields.logic, this);
  v698 = this->fields.logicnomal;
  if ( !v698 )
    goto LABEL_48;
  v699 = this->fields.data;
  v698->fields.data = v699;
  sub_B16F98(&v698->fields, v699);
  v700 = *p_logicnomal;
  if ( !*p_logicnomal )
    goto LABEL_48;
  v701 = *p_logictarget;
  v700->fields.logictarget = *p_logictarget;
  sub_B16F98(&v700->fields.logictarget, v701);
  v702 = *p_logicnomal;
  if ( !*p_logicnomal )
    goto LABEL_48;
  v703 = *p_logicFunction;
  v702->fields.logicfunction = *p_logicFunction;
  sub_B16F98(&v702->fields.logicfunction, v703);
  v704 = *p_logicnomal;
  if ( !*p_logicnomal )
    goto LABEL_48;
  v705 = *p_logicSkill;
  v704->fields.logicskill = *p_logicSkill;
  sub_B16F98(&v704->fields.logicskill, v705);
  v706 = *p_logicEnemyAi;
  if ( !*p_logicEnemyAi )
    goto LABEL_48;
  v706->fields.logic = this;
  sub_B16F98(&v706->fields.logic, this);
  v707 = this->fields.logicEnemyAi;
  if ( !v707 )
    goto LABEL_48;
  v708 = this->fields.data;
  v707->fields.data = v708;
  sub_B16F98(&v707->fields, v708);
  v709 = *p_logicEnemyAi;
  if ( !*p_logicEnemyAi )
    goto LABEL_48;
  v710 = *p_logictarget;
  v709->fields.logictarget = *p_logictarget;
  sub_B16F98(&v709->fields.logictarget, v710);
  v711 = *p_logicEnemyAi;
  if ( !*p_logicEnemyAi )
    goto LABEL_48;
  v712 = *p_logicnomal;
  v711->fields.logicNomal = *p_logicnomal;
  *(__n128 *)&v713 = sub_B16F98(&v711->fields.logicNomal, v712);
  if ( !*p_logicEnemyAi )
    goto LABEL_48;
  ((void (__fastcall *)(struct BattleLogicEnemyAi_o *, struct BattleData_o *, Il2CppMethodPointer, long double))(*p_logicEnemyAi)->klass->vtable._7_Initialize.method)(
    *p_logicEnemyAi,
    this->fields.data,
    (*p_logicEnemyAi)->klass->vtable._8_InitAiActTaskFunction.methodPtr,
    v713);
  logicPlayerAi = this->fields.logicPlayerAi;
  if ( !logicPlayerAi )
    goto LABEL_48;
  ((void (__fastcall *)(struct BattleLogicPlayerAi_o *, struct BattleData_o *, Il2CppMethodPointer))logicPlayerAi->klass->vtable._7_Initialize.method)(
    logicPlayerAi,
    this->fields.data,
    logicPlayerAi->klass->vtable._8_InitAiActTaskFunction.methodPtr);
  v715 = this->fields.logicFieldAi;
  if ( !v715 )
    goto LABEL_48;
  ((void (__fastcall *)(struct BattleLogicFieldAi_o *, struct BattleData_o *, Il2CppMethodPointer))v715->klass->vtable._7_Initialize.method)(
    v715,
    this->fields.data,
    v715->klass->vtable._8_InitAiActTaskFunction.methodPtr);
  v716 = this->fields.logicFieldAi;
  if ( !v716 )
    goto LABEL_48;
  v717 = this->fields.logicnomal;
  v716->fields.logicNomal = v717;
  sub_B16F98(&v716->fields.logicNomal, v717);
  if ( !*p_logicEnemyAi )
    goto LABEL_48;
  v718 = *p_logicFieldAi;
  if ( !*p_logicFieldAi )
    goto LABEL_48;
  aiLogic = (*p_logicEnemyAi)->fields.aiLogic;
  v718->fields.aiLogic = aiLogic;
  sub_B16F98(&v718->fields.aiLogic, aiLogic);
  v720 = *p_logicFunction;
  if ( !*p_logicFunction )
    goto LABEL_48;
  v720->fields.logic = this;
  sub_B16F98(&v720->fields.logic, this);
  logicFunction = this->fields.logicFunction;
  if ( !logicFunction )
    goto LABEL_48;
  v722 = this->fields.data;
  logicFunction->fields.data = v722;
  sub_B16F98(&logicFunction->fields, v722);
  v723 = *p_logicFunction;
  if ( !*p_logicFunction )
    goto LABEL_48;
  v724 = *p_logictarget;
  v723->fields.logictarget = *p_logictarget;
  sub_B16F98(&v723->fields.logictarget, v724);
  v725 = *p_logicSkill;
  if ( !*p_logicSkill )
    goto LABEL_48;
  v725->fields.logic = this;
  sub_B16F98(&v725->fields.logic, this);
  v726 = this->fields.logicSkill;
  if ( !v726 )
    goto LABEL_48;
  v727 = this->fields.data;
  v726->fields.data = v727;
  sub_B16F98(&v726->fields, v727);
  v728 = *p_logicSkill;
  if ( !*p_logicSkill )
    goto LABEL_48;
  v729 = *p_logictarget;
  v728->fields.logictarget = *p_logictarget;
  sub_B16F98(&v728->fields.logictarget, v729);
  v730 = *p_logicSkill;
  if ( !*p_logicSkill )
    goto LABEL_48;
  v731 = *p_logicFunction;
  v730->fields.logicfunction = *p_logicFunction;
  sub_B16F98(&v730->fields.logicfunction, v731);
  v732 = *p_logicspecial;
  if ( !*p_logicspecial )
    goto LABEL_48;
  v732->fields.logic = this;
  sub_B16F98(&v732->fields.logic, this);
  v733 = this->fields.logicspecial;
  if ( !v733 )
    goto LABEL_48;
  v734 = this->fields.data;
  v733->fields.data = v734;
  sub_B16F98(&v733->fields, v734);
  v735 = *p_logicspecial;
  if ( !*p_logicspecial )
    goto LABEL_48;
  v736 = *p_logictarget;
  v735->fields.logictarget = *p_logictarget;
  sub_B16F98(&v735->fields.logictarget, v736);
  v737 = *p_logicspecial;
  if ( !*p_logicspecial )
    goto LABEL_48;
  v738 = *p_logicFunction;
  v737->fields.logicfunction = *p_logicFunction;
  sub_B16F98(&v737->fields.logicfunction, v738);
  v739 = *p_logicReaction;
  if ( !*p_logicReaction )
    goto LABEL_48;
  v739->fields.logic = this;
  sub_B16F98(&v739->fields.logic, this);
  v740 = this->fields.logicReaction;
  if ( !v740 )
    goto LABEL_48;
  v741 = this->fields.data;
  v740->fields.data = v741;
  sub_B16F98(&v740->fields, v741);
  v742 = this->fields.logicReaction;
  if ( !v742 )
    goto LABEL_48;
  perf = this->fields.perf;
  v742->fields.perf = perf;
  sub_B16F98(&v742->fields.perf, perf);
  v744 = *p_logicReaction;
  if ( !*p_logicReaction )
    goto LABEL_48;
  v745 = *p_logicSkill;
  v744->fields.logicskill = *p_logicSkill;
  sub_B16F98(&v744->fields.logicskill, v745);
  v746 = *p_logicReaction;
  if ( !*p_logicReaction )
    goto LABEL_48;
  v747 = *p_logicFunction;
  v746->fields.logicfunction = *p_logicFunction;
  sub_B16F98(&v746->fields.logicfunction, v747);
  v748 = *p_logicReaction;
  if ( !*p_logicReaction
    || (v749 = *p_logicEnemyAi,
        v748->fields.logicenemyai = *p_logicEnemyAi,
        sub_B16F98(&v748->fields.logicenemyai, v749),
        (v750 = *p_logicReaction) == 0LL)
    || (v751 = *p_logicFieldAi,
        v750->fields.logicfieldai = *p_logicFieldAi,
        *(__n128 *)&v752 = sub_B16F98(&v750->fields.logicfieldai, v751),
        !*p_logicNpcAi) )
  {
LABEL_48:
    sub_B170D4();
  }
  ((void (__fastcall *)(BattleLogicNpcAi_o *, struct BattleData_o *, Il2CppMethodPointer, long double))(*p_logicNpcAi)->klass->vtable._7_Initialize.method)(
    *p_logicNpcAi,
    this->fields.data,
    (*p_logicNpcAi)->klass->vtable._8_InitAiActTaskFunction.methodPtr,
    v752);
  Instance = (struct Spawner_o *)SingletonMonoBehaviour_WebViewManager___get_Instance((const MethodInfo_2A54F38 *)Method_SingletonMonoBehaviour_Spawner__get_Instance__);
  this->fields.spawner = Instance;
  sub_B16F98(&this->fields.spawner, Instance);
  BattleLogic__setActiviteUnusedGameobject(this, 0, v754);
}


bool __fastcall BattleLogic__IsBattleFinishByTurnExpiration(
        BattleLogic_o *this,
        bool isEndOfCurrentTurn,
        const MethodInfo *method)
{
  struct BattleData_o *data; // x8
  int32_t limitTurnCount; // w9
  int32_t turnCount; // w10
  struct BattleAttackManager_o *battleAtkManager; // x8
  bool IsTurnEnd_k__BackingField; // w8

  data = this->fields.data;
  if ( !data )
    goto LABEL_15;
  limitTurnCount = data->fields.limitTurnCount;
  if ( !limitTurnCount || !data->fields.limitAct )
    return 0;
  turnCount = data->fields.turnCount;
  if ( isEndOfCurrentTurn )
    turnCount -= data->fields.initturn == 1;
  if ( limitTurnCount < turnCount )
    return 1;
  if ( limitTurnCount == turnCount )
  {
    battleAtkManager = data->fields.battleAtkManager;
    if ( battleAtkManager )
    {
      IsTurnEnd_k__BackingField = battleAtkManager->fields._IsTurnEnd_k__BackingField;
      return IsTurnEnd_k__BackingField && isEndOfCurrentTurn;
    }
LABEL_15:
    sub_B170D4();
  }
  IsTurnEnd_k__BackingField = 0;
  return IsTurnEnd_k__BackingField && isEndOfCurrentTurn;
}


bool __fastcall BattleLogic__IsSafeCounterAttack(
        BattleLogic_o *this,
        BattleServantData_o *target,
        const MethodInfo *method)
{
  struct BattleData_o *data; // x8
  ChangeBattlePhaseNotify_o *changePhaseNotify; // x0

  if ( !target )
    goto LABEL_7;
  if ( target->fields.isEnemy )
    return BattleServantData__isShiftableServant(target, 0LL);
  data = this->fields.data;
  if ( !data || (changePhaseNotify = data->fields.changePhaseNotify) == 0LL )
LABEL_7:
    sub_B170D4();
  return ChangeBattlePhaseNotify__get_Phase(changePhaseNotify, 0LL) == 1;
}


bool __fastcall BattleLogic__IsTimeAccelerationFirst(BattleLogic_o *this, const MethodInfo *method)
{
  return UnityEngine_Time__get_timeScale(0LL) == 1.0;
}


System_Collections_Generic_List_int__o *__fastcall BattleLogic__LoadCutinFirstIdList(
        BattleLogic_o *this,
        const MethodInfo *method)
{
  __int64 v2; // x1
  __int64 v3; // x1
  __int64 v4; // x1
  __int64 v5; // x1
  __int64 v6; // x1
  __int64 v7; // x1
  __int64 v8; // x1
  __int64 v9; // x1
  __int64 v10; // x1
  __int64 v11; // x1
  BattleLogic_c *v12; // x0
  System_String_o *CUTIN_FIRST_ID_LIST_KEY; // x19
  System_String_o *String; // x19
  __int64 v15; // x1
  __int64 v16; // x2
  __int64 v17; // x3
  __int64 v18; // x4
  System_Collections_Generic_List_int__o *v19; // x19
  System_Char_array *v20; // x0
  __int64 v21; // x2
  __int64 v22; // x1
  __int64 v23; // x2
  __int64 v24; // x3
  __int64 v25; // x4
  System_Collections_Generic_IEnumerable_TSource__o *v26; // x19
  BattleLogic___c_c *v27; // x0
  struct BattleLogic___c_StaticFields *static_fields; // x8
  System_Func_BattleLogicBuff_ReduceHpProcess_BuffInfo__int__o *_9__135_0; // x20
  Il2CppObject *v30; // x21
  struct BattleLogic___c_StaticFields *v31; // x0
  System_Collections_Generic_IEnumerable_TSource__o *v32; // x0

  if ( (byte_40F737C & 1) == 0 )
  {
    sub_B16FFC(&BattleLogic_TypeInfo, method);
    sub_B16FFC(&char___TypeInfo, v2);
    sub_B16FFC(&EncryptedPlayerPrefs_TypeInfo, v3);
    sub_B16FFC(&Method_System_Linq_Enumerable_Select_string__int___, v4);
    sub_B16FFC(&Method_System_Linq_Enumerable_ToList_int___, v5);
    sub_B16FFC(&Method_System_Func_string__int___ctor__, v6);
    sub_B16FFC(&System_Func_string__int__TypeInfo, v7);
    sub_B16FFC(&Method_System_Collections_Generic_List_int___ctor__, v8);
    sub_B16FFC(&System_Collections_Generic_List_int__TypeInfo, v9);
    sub_B16FFC(&Method_BattleLogic___c__LoadCutinFirstIdList_b__135_0__, v10);
    sub_B16FFC(&BattleLogic___c_TypeInfo, v11);
    byte_40F737C = 1;
  }
  v12 = BattleLogic_TypeInfo;
  if ( (BYTE3(BattleLogic_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0 && !BattleLogic_TypeInfo->_2.cctor_finished )
  {
    j_il2cpp_runtime_class_init_0(BattleLogic_TypeInfo);
    v12 = BattleLogic_TypeInfo;
  }
  CUTIN_FIRST_ID_LIST_KEY = v12->static_fields->CUTIN_FIRST_ID_LIST_KEY;
  if ( (BYTE3(EncryptedPlayerPrefs_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0
    && !EncryptedPlayerPrefs_TypeInfo->_2.cctor_finished )
  {
    j_il2cpp_runtime_class_init_0(EncryptedPlayerPrefs_TypeInfo);
  }
  String = EncryptedPlayerPrefs__GetString(CUTIN_FIRST_ID_LIST_KEY, 0LL);
  if ( System_String__IsNullOrEmpty(String, 0LL) )
  {
    v19 = (System_Collections_Generic_List_int__o *)sub_B170CC(
                                                      System_Collections_Generic_List_int__TypeInfo,
                                                      v15,
                                                      v16,
                                                      v17,
                                                      v18);
    System_Collections_Generic_List_int____ctor(
      v19,
      (const MethodInfo_2F0F794 *)Method_System_Collections_Generic_List_int___ctor__);
  }
  else
  {
    v20 = (System_Char_array *)sub_B17014(char___TypeInfo, 1LL, v16);
    if ( !v20 )
      sub_B170D4();
    if ( !v20->max_length )
    {
      sub_B17100(v20, v20, v21);
      sub_B170A0();
    }
    v20->m_Items[2] = 44;
    if ( !String )
      sub_B170D4();
    v26 = (System_Collections_Generic_IEnumerable_TSource__o *)System_String__Split(String, v20, 0LL);
    v27 = BattleLogic___c_TypeInfo;
    if ( (BYTE3(BattleLogic___c_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0
      && !BattleLogic___c_TypeInfo->_2.cctor_finished )
    {
      j_il2cpp_runtime_class_init_0(BattleLogic___c_TypeInfo);
      v27 = BattleLogic___c_TypeInfo;
    }
    static_fields = v27->static_fields;
    _9__135_0 = (System_Func_BattleLogicBuff_ReduceHpProcess_BuffInfo__int__o *)static_fields->__9__135_0;
    if ( !_9__135_0 )
    {
      if ( (BYTE3(v27->vtable._0_Equals.methodPtr) & 4) != 0 && !v27->_2.cctor_finished )
      {
        j_il2cpp_runtime_class_init_0(v27);
        static_fields = BattleLogic___c_TypeInfo->static_fields;
      }
      v30 = (Il2CppObject *)static_fields->__9;
      _9__135_0 = (System_Func_BattleLogicBuff_ReduceHpProcess_BuffInfo__int__o *)sub_B170CC(
                                                                                    System_Func_string__int__TypeInfo,
                                                                                    v22,
                                                                                    v23,
                                                                                    v24,
                                                                                    v25);
      System_Func_BattleLogicBuff_ReduceHpProcess_BuffInfo__int____ctor(
        _9__135_0,
        v30,
        Method_BattleLogic___c__LoadCutinFirstIdList_b__135_0__,
        (const MethodInfo_2B6B6EC *)Method_System_Func_string__int___ctor__);
      v31 = BattleLogic___c_TypeInfo->static_fields;
      v31->__9__135_0 = (struct System_Func_string__int__o *)_9__135_0;
      sub_B16F98(&v31->__9__135_0, _9__135_0);
    }
    v32 = (System_Collections_Generic_IEnumerable_TSource__o *)System_Linq_Enumerable__Select_BattleLogicBuff_ReduceHpProcess_BuffInfo__int_(
                                                                 v26,
                                                                 (System_Func_TSource__TResult__o *)_9__135_0,
                                                                 (const MethodInfo_19C05C4 *)Method_System_Linq_Enumerable_Select_string__int___);
    return (System_Collections_Generic_List_int__o *)System_Linq_Enumerable__ToList_int_(
                                                       v32,
                                                       (const MethodInfo_19C78D8 *)Method_System_Linq_Enumerable_ToList_int___);
  }
  return v19;
}


void __fastcall BattleLogic__LoadNStagePlayer(BattleLogic_o *this, System_String_o *endproc, const MethodInfo *method)
{
  __int64 v3; // x3
  __int64 v4; // x4
  __int64 v7; // x1
  __int64 v8; // x1
  __int64 v9; // x1
  __int64 v10; // x1
  BattleLogic___c__DisplayClass355_0_o *v11; // x20
  BattleData_o *data; // x0
  CommonUI_o *Instance; // x0
  __int64 v14; // x1
  __int64 v15; // x2
  __int64 v16; // x3
  __int64 v17; // x4
  System_Action_o *v18; // x21
  struct BattlePerformance_o *perf; // x8
  BattlePerformanceCommandCard_o *commandPerf; // x0
  BattlePerformance_o *v21; // x21
  __int64 v22; // x1
  __int64 v23; // x2
  __int64 v24; // x3
  __int64 v25; // x4
  System_Action_o *v26; // x22
  System_Collections_IEnumerator_o *NStagePlayer; // x1
  PlayMakerFSM_o *fsm; // x0

  if ( (byte_40F7409 & 1) == 0 )
  {
    sub_B16FFC(&System_Action_TypeInfo, endproc);
    sub_B16FFC(&Method_SingletonMonoBehaviour_CommonUI__get_Instance__, v7);
    sub_B16FFC(&Method_BattleLogic___c__DisplayClass355_0__LoadNStagePlayer_b__0__, v8);
    sub_B16FFC(&Method_BattleLogic___c__DisplayClass355_0__LoadNStagePlayer_b__1__, v9);
    sub_B16FFC(&BattleLogic___c__DisplayClass355_0_TypeInfo, v10);
    byte_40F7409 = 1;
  }
  v11 = (BattleLogic___c__DisplayClass355_0_o *)sub_B170CC(
                                                  BattleLogic___c__DisplayClass355_0_TypeInfo,
                                                  endproc,
                                                  method,
                                                  v3,
                                                  v4);
  BattleLogic___c__DisplayClass355_0___ctor(v11, 0LL);
  if ( !v11 )
    goto LABEL_13;
  v11->fields.__4__this = this;
  sub_B16F98(&v11->fields, this);
  v11->fields.endproc = endproc;
  sub_B16F98(&v11->fields.endproc, endproc);
  data = this->fields.data;
  if ( !data )
    goto LABEL_13;
  if ( BattleData__LoadNStagePlayer(data, 0LL) )
  {
    Instance = (CommonUI_o *)SingletonMonoBehaviour_WebViewManager___get_Instance((const MethodInfo_2A54F38 *)Method_SingletonMonoBehaviour_CommonUI__get_Instance__);
    if ( Instance )
    {
      CommonUI__SetLoadMode(Instance, 1, 0LL);
      v18 = (System_Action_o *)sub_B170CC(System_Action_TypeInfo, v14, v15, v16, v17);
      System_Action___ctor(
        v18,
        (Il2CppObject *)v11,
        Method_BattleLogic___c__DisplayClass355_0__LoadNStagePlayer_b__0__,
        0LL);
      this->fields.loadingIconcallback = v18;
      sub_B16F98(&this->fields.loadingIconcallback, v18);
      perf = this->fields.perf;
      if ( perf )
      {
        commandPerf = perf->fields.commandPerf;
        if ( commandPerf )
        {
          BattlePerformanceCommandCard__ResetNoblePhantasmCard(commandPerf, 0LL);
          v21 = this->fields.perf;
          v26 = (System_Action_o *)sub_B170CC(System_Action_TypeInfo, v22, v23, v24, v25);
          System_Action___ctor(
            v26,
            (Il2CppObject *)v11,
            Method_BattleLogic___c__DisplayClass355_0__LoadNStagePlayer_b__1__,
            0LL);
          if ( v21 )
          {
            NStagePlayer = BattlePerformance__CoLoadNStagePlayer(v21, v26, 0LL);
            UnityEngine_MonoBehaviour__StartCoroutine_34804316((UnityEngine_MonoBehaviour_o *)this, NStagePlayer, 0LL);
            return;
          }
        }
      }
    }
LABEL_13:
    sub_B170D4();
  }
  fsm = this->fields.fsm;
  if ( !fsm )
    goto LABEL_13;
  PlayMakerFSM__SendEvent(fsm, v11->fields.endproc, 0LL);
}


void __fastcall BattleLogic__OnDestroy(BattleLogic_o *this, const MethodInfo *method)
{
  const MethodInfo *v2; // x2

  BattleLogic__setActiviteUnusedGameobject(this, 1, v2);
}


void __fastcall BattleLogic__OnPhaseTactical(BattleLogic_o *this, const MethodInfo *method)
{
  struct BattleData_o *data; // x8
  BattlePerformance_o *perf; // x0
  const MethodInfo *v5; // x2
  BattlePerformance_o *v6; // x0
  BattleMotionSkipManager_o *MotionSkipManager; // x0

  data = this->fields.data;
  if ( !data
    || (data->fields.isResumeWaveStart = 0, (perf = this->fields.perf) == 0LL)
    || (BattlePerformance__SetActiveTutorialDialogMask(perf, 0, 0LL),
        BattleLogic__ChangePhase(this, 1, v5),
        (v6 = this->fields.perf) == 0LL)
    || (MotionSkipManager = BattlePerformance__get_MotionSkipManager(v6, 0LL)) == 0LL )
  {
    sub_B170D4();
  }
  BattleMotionSkipManager__ReleaseMotionSkip(MotionSkipManager, 0LL);
}


void __fastcall BattleLogic__OnWaitTutorial(BattleLogic_o *this, const MethodInfo *method)
{
  BattlePerformance_o *perf; // x0
  BattleMotionSkipManager_o *MotionSkipManager; // x0

  perf = this->fields.perf;
  if ( !perf || (MotionSkipManager = BattlePerformance__get_MotionSkipManager(perf, 0LL)) == 0LL )
    sub_B170D4();
  BattleMotionSkipManager__ReleaseMotionSkip(MotionSkipManager, 0LL);
}


// local variable allocation has failed, the output may be wrong!
void __fastcall BattleLogic__OpenBattleLoseDlg(
        BattleLogic_o *this,
        bool isContinueable,
        bool isSelf,
        NotificationDialog_ClickDelegate_o *callback,
        bool isFromContinue,
        const MethodInfo *method)
{
  _BOOL4 v8; // w22
  _BOOL4 v9; // w24
  __int64 v11; // x1
  __int64 v12; // x1
  __int64 v13; // x1
  __int64 v14; // x1
  __int64 v15; // x1
  __int64 v16; // x1
  __int64 v17; // x1
  __int64 v18; // x1
  __int64 v19; // x1
  __int64 *v20; // x8
  System_String_o *v21; // x21
  System_String_o *v22; // x0
  System_String_o *v23; // x25
  __int64 v24; // x0
  Il2CppObject *v25; // x26
  Il2CppObject *v26; // x0
  System_String_o *v27; // x0
  int v28; // w26
  System_String_o *v29; // x24
  BattleData_o *data; // x0
  System_String_o *v31; // x0
  BattleData_o *v32; // x0
  System_String_o *v33; // x22
  const MethodInfo *v34; // x1
  Il2CppObject *v35; // x0
  ServantAssetLoadManager_o *Instance; // x0
  CommonUI_o *v37; // x0
  int32_t Phase; // [xsp+68h] [xbp-58h] BYREF
  int32_t QuestId; // [xsp+6Ch] [xbp-54h] BYREF

  v8 = isSelf;
  v9 = isContinueable;
  if ( (byte_40F7376 & 1) == 0 )
  {
    sub_B16FFC(&int_TypeInfo, isContinueable);
    sub_B16FFC(&LocalizationManager_TypeInfo, v11);
    sub_B16FFC(&Method_SingletonMonoBehaviour_ServantAssetLoadManager__get_Instance__, v12);
    sub_B16FFC(&Method_SingletonMonoBehaviour_CommonUI__get_Instance__, v13);
    sub_B16FFC(&StringLiteral_2459, v14);
    sub_B16FFC(&StringLiteral_2415, v15);
    sub_B16FFC(&StringLiteral_2458, v16);
    sub_B16FFC(&StringLiteral_2414, v17);
    sub_B16FFC(&StringLiteral_2413, v18);
    sub_B16FFC(&StringLiteral_2412, v19);
    byte_40F7376 = 1;
  }
  if ( v9 )
  {
    if ( (WORD1(LocalizationManager_TypeInfo->vtable._0_Equals.methodPtr) & 0x400) != 0
      && !LocalizationManager_TypeInfo->_2.cctor_finished )
    {
      j_il2cpp_runtime_class_init_0(LocalizationManager_TypeInfo);
    }
    v20 = &StringLiteral_2415;
  }
  else
  {
    if ( (WORD1(LocalizationManager_TypeInfo->vtable._0_Equals.methodPtr) & 0x400) != 0
      && !LocalizationManager_TypeInfo->_2.cctor_finished )
    {
      j_il2cpp_runtime_class_init_0(LocalizationManager_TypeInfo);
    }
    v20 = &StringLiteral_2459;
  }
  v21 = LocalizationManager__Get((System_String_o *)*v20, 0LL);
  if ( (BYTE3(LocalizationManager_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0
    && !LocalizationManager_TypeInfo->_2.cctor_finished )
  {
    j_il2cpp_runtime_class_init_0(LocalizationManager_TypeInfo);
  }
  v22 = LocalizationManager__Get((System_String_o *)StringLiteral_2412, 0LL);
  if ( !this->fields.data )
    goto LABEL_44;
  v23 = v22;
  QuestId = BattleData__getQuestId(this->fields.data, 0LL);
  v24 = j_il2cpp_value_box_0(int_TypeInfo, &QuestId);
  if ( !this->fields.data )
    goto LABEL_44;
  v25 = (Il2CppObject *)v24;
  Phase = BattleData__getPhase(this->fields.data, 0LL);
  v26 = (Il2CppObject *)j_il2cpp_value_box_0(int_TypeInfo, &Phase);
  v27 = System_String__Format_43739268((System_String_o *)StringLiteral_2413, v25, v26, 0LL);
  v28 = !v9;
  v29 = v27;
  if ( (v28 & 1) != 0 || isFromContinue )
  {
    if ( (BYTE3(LocalizationManager_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0
      && !LocalizationManager_TypeInfo->_2.cctor_finished )
    {
      j_il2cpp_runtime_class_init_0(LocalizationManager_TypeInfo);
    }
    if ( LocalizationManager__ContainsKey(v29, 0LL) )
    {
      if ( (BYTE3(LocalizationManager_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0
        && !LocalizationManager_TypeInfo->_2.cctor_finished )
      {
        j_il2cpp_runtime_class_init_0(LocalizationManager_TypeInfo);
      }
      v23 = LocalizationManager__Get(v29, 0LL);
    }
  }
  data = this->fields.data;
  if ( !data )
LABEL_44:
    sub_B170D4();
  if ( BattleData__IsDeckNoUserSvt(data, 0LL) )
  {
    if ( (BYTE3(LocalizationManager_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0
      && !LocalizationManager_TypeInfo->_2.cctor_finished )
    {
      j_il2cpp_runtime_class_init_0(LocalizationManager_TypeInfo);
    }
    v31 = LocalizationManager__Get((System_String_o *)StringLiteral_2414, 0LL);
LABEL_33:
    v23 = v31;
    goto LABEL_41;
  }
  if ( ((v28 | v8) & 1) != 0 )
  {
    v32 = this->fields.data;
    if ( !v32 )
      goto LABEL_44;
    if ( BattleData__isRaidBattle(v32, 0LL) )
    {
      if ( (BYTE3(LocalizationManager_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0
        && !LocalizationManager_TypeInfo->_2.cctor_finished )
      {
        j_il2cpp_runtime_class_init_0(LocalizationManager_TypeInfo);
      }
      v33 = LocalizationManager__Get((System_String_o *)StringLiteral_2458, 0LL);
      v35 = (Il2CppObject *)BattleLogic__raidBossName(this, v34);
      v31 = System_String__Format(v33, v35, 0LL);
      goto LABEL_33;
    }
  }
LABEL_41:
  Instance = (ServantAssetLoadManager_o *)SingletonMonoBehaviour_WebViewManager___get_Instance((const MethodInfo_2A54F38 *)Method_SingletonMonoBehaviour_ServantAssetLoadManager__get_Instance__);
  if ( !Instance )
    goto LABEL_44;
  ServantAssetLoadManager__EndRetryTransition(Instance, 0LL);
  v37 = (CommonUI_o *)SingletonMonoBehaviour_WebViewManager___get_Instance((const MethodInfo_2A54F38 *)Method_SingletonMonoBehaviour_CommonUI__get_Instance__);
  if ( !v37 )
    goto LABEL_44;
  CommonUI__OpenNotificationDialog_18239760(
    v37,
    v21,
    v23,
    callback,
    -1,
    0,
    0,
    0,
    0,
    0,
    0LL,
    0LL,
    0,
    0,
    0LL,
    1,
    0LL,
    0LL,
    0LL,
    0LL);
}


void __fastcall BattleLogic__PlayCurrentBgm(BattleLogic_o *this, float fadeTime, const MethodInfo *method)
{
  __int64 v5; // x1
  __int64 v6; // x1
  __int64 v7; // x1
  __int64 v8; // x1
  __int64 v9; // x1
  __int64 v10; // x1
  __int64 v11; // x1
  System_String_o *CurrentBgmName; // x20
  System_String_o *DefaultBgmName; // x0
  bool v14; // w0
  __int64 v15; // x1
  __int64 v16; // x2
  __int64 v17; // x3
  __int64 v18; // x4
  struct BattleData_o *data; // x8
  bool v20; // w21
  OverwriteBattleBgmData_o *overwriteBgmData_k__BackingField; // x0
  _BOOL4 v22; // w23
  System_String_o *v23; // x22
  MainBgmPlayArgs_o *v24; // x0
  MainBgmPlayArgs_o *v25; // x20
  __int64 v26; // x1
  __int64 v27; // x2
  __int64 v28; // x3
  __int64 v29; // x4
  BattlePerformance_o *perf; // x0
  BattleData_o *v31; // x21
  int32_t CurrentGroundNo; // w0
  BattlePerformance_o *v33; // x8
  int32_t v34; // w19
  int32_t CurrentGroundType; // w0
  SubBgmPlayArgs_array *SubBgmPlayArgsArray; // x21
  BgmPlayArgsGroup_o *v37; // x19
  System_Collections_Generic_IEnumerable_BgmPlayArgs__o *v38; // x0
  System_Collections_Generic_IEnumerable_BgmPlayArgs__c *klass; // x8
  System_Collections_Generic_IEnumerable_BgmPlayArgs__o *v40; // x20
  unsigned __int64 v41; // x10
  int32_t *p_offset; // x11
  __int64 p_method; // x0
  __int64 v44; // x20
  __int64 v45; // x8
  unsigned __int64 v46; // x10
  int *v47; // x11
  __int64 v48; // x0
  __int64 v49; // x8
  unsigned __int64 v50; // x10
  int *v51; // x11
  __int64 v52; // x0
  BgmPlayArgs_o *v53; // x21
  __int64 v54; // x8
  unsigned __int64 v55; // x10
  int *v56; // x11
  __int64 v57; // x0
  System_Nullable_float__o fadeTimea; // [xsp+8h] [xbp-48h] BYREF
  __int64 v59; // [xsp+18h] [xbp-38h]
  System_Nullable_float__o p_fadeTimea; // 0:x0.8
  System_Nullable_float__o v61; // 0:x1.8
  System_Nullable_float__o v62; // 0:x2.8
  System_Nullable_float__o v63; // 0:x2.8
  System_Nullable_long__o v64; // 0:x3.16

  if ( (byte_40F735E & 1) == 0 )
  {
    sub_B16FFC(&BgmManager_TypeInfo, method);
    sub_B16FFC(&BgmPlayArgsGroup_TypeInfo, v5);
    sub_B16FFC(&System_IDisposable_TypeInfo, v6);
    sub_B16FFC(&System_Collections_Generic_IEnumerable_BgmPlayArgs__TypeInfo, v7);
    sub_B16FFC(&System_Collections_Generic_IEnumerator_BgmPlayArgs__TypeInfo, v8);
    sub_B16FFC(&System_Collections_IEnumerator_TypeInfo, v9);
    sub_B16FFC(&MainBgmPlayArgs_TypeInfo, v10);
    sub_B16FFC(&Method_System_Nullable_float___ctor__, v11);
    byte_40F735E = 1;
  }
  HIDWORD(v59) = 0;
  CurrentBgmName = this->fields._CurrentBgmName;
  DefaultBgmName = BattleLogic__GetDefaultBgmName(this, method);
  v14 = System_String__op_Equality(CurrentBgmName, DefaultBgmName, 0LL);
  data = this->fields.data;
  if ( !data )
    goto LABEL_53;
  v20 = v14;
  overwriteBgmData_k__BackingField = data->fields._overwriteBgmData_k__BackingField;
  v22 = overwriteBgmData_k__BackingField
     && OverwriteBattleBgmData__get_allowSubBgmPlaying(overwriteBgmData_k__BackingField, 0LL);
  v23 = this->fields._CurrentBgmName;
  v24 = (MainBgmPlayArgs_o *)sub_B170CC(MainBgmPlayArgs_TypeInfo, v15, v16, v17, v18);
  v62 = 0LL;
  v25 = v24;
  MainBgmPlayArgs___ctor(v24, v23, v62, 0.0, 0LL, 0LL);
  if ( v22 || v20 )
  {
    perf = this->fields.perf;
    if ( !perf )
      goto LABEL_53;
    v31 = this->fields.data;
    CurrentGroundNo = BattlePerformance__get_CurrentGroundNo(perf, 0LL);
    v33 = this->fields.perf;
    if ( !v33 )
      goto LABEL_53;
    v34 = CurrentGroundNo;
    CurrentGroundType = BattlePerformance__get_CurrentGroundType(v33, 0LL);
    if ( !v31 )
      goto LABEL_53;
    SubBgmPlayArgsArray = BattleData__GetSubBgmPlayArgsArray(v31, v34, CurrentGroundType, 0LL);
  }
  else
  {
    SubBgmPlayArgsArray = 0LL;
  }
  v37 = (BgmPlayArgsGroup_o *)sub_B170CC(BgmPlayArgsGroup_TypeInfo, v26, v27, v28, v29);
  BgmPlayArgsGroup___ctor(v37, v25, (BgmPlayArgs_array *)SubBgmPlayArgsArray, 0LL);
  if ( fadeTime <= 0.0 )
    goto LABEL_48;
  if ( !v37 || (v38 = BgmPlayArgsGroup__AllArgsListNullExcluded(v37, 0LL)) == 0LL )
LABEL_53:
    sub_B170D4();
  klass = v38->klass;
  v40 = v38;
  if ( *(_WORD *)&v38->klass->_2.bitflags1 )
  {
    v41 = 0LL;
    p_offset = &klass->_1.interfaceOffsets->offset;
    while ( *((System_Collections_Generic_IEnumerable_BgmPlayArgs__c **)p_offset - 1) != System_Collections_Generic_IEnumerable_BgmPlayArgs__TypeInfo )
    {
      ++v41;
      p_offset += 4;
      if ( v41 >= *(unsigned __int16 *)&v38->klass->_2.bitflags1 )
        goto LABEL_20;
    }
    p_method = (__int64)&klass->vtable[*p_offset].method;
  }
  else
  {
LABEL_20:
    p_method = sub_AAFEF8(v38, System_Collections_Generic_IEnumerable_BgmPlayArgs__TypeInfo, 0LL);
  }
  v44 = (*(__int64 (__fastcall **)(System_Collections_Generic_IEnumerable_BgmPlayArgs__o *, _QWORD))p_method)(
          v40,
          *(_QWORD *)(p_method + 8));
  if ( !v44 )
    sub_B170D4();
  while ( 1 )
  {
    v45 = *(_QWORD *)v44;
    if ( *(_WORD *)(*(_QWORD *)v44 + 298LL) )
    {
      v46 = 0LL;
      v47 = (int *)(*(_QWORD *)(v45 + 176) + 8LL);
      while ( *((System_Collections_IEnumerator_c **)v47 - 1) != System_Collections_IEnumerator_TypeInfo )
      {
        ++v46;
        v47 += 4;
        if ( v46 >= *(unsigned __int16 *)(*(_QWORD *)v44 + 298LL) )
          goto LABEL_27;
      }
      v48 = v45 + 16LL * *v47 + 312;
    }
    else
    {
LABEL_27:
      v48 = sub_AAFEF8(v44, System_Collections_IEnumerator_TypeInfo, 0LL);
    }
    if ( ((*(__int64 (__fastcall **)(__int64, _QWORD))v48)(v44, *(_QWORD *)(v48 + 8)) & 1) == 0 )
      break;
    v49 = *(_QWORD *)v44;
    if ( *(_WORD *)(*(_QWORD *)v44 + 298LL) )
    {
      v50 = 0LL;
      v51 = (int *)(*(_QWORD *)(v49 + 176) + 8LL);
      while ( *((System_Collections_Generic_IEnumerator_BgmPlayArgs__c **)v51 - 1) != System_Collections_Generic_IEnumerator_BgmPlayArgs__TypeInfo )
      {
        ++v50;
        v51 += 4;
        if ( v50 >= *(unsigned __int16 *)(*(_QWORD *)v44 + 298LL) )
          goto LABEL_34;
      }
      v52 = v49 + 16LL * *v51 + 312;
    }
    else
    {
LABEL_34:
      v52 = sub_AAFEF8(v44, System_Collections_Generic_IEnumerator_BgmPlayArgs__TypeInfo, 0LL);
    }
    v53 = (BgmPlayArgs_o *)(*(__int64 (__fastcall **)(__int64, _QWORD))v52)(v44, *(_QWORD *)(v52 + 8));
    fadeTimea = 0LL;
    p_fadeTimea = (System_Nullable_float__o)&fadeTimea;
    System_Nullable_float____ctor(
      p_fadeTimea,
      fadeTime,
      (const MethodInfo_296A23C *)Method_System_Nullable_float___ctor__);
    if ( !v53 )
      sub_B170D4();
    v63 = fadeTimea;
    v61 = 0LL;
    v64.fields.value = 0LL;
    *(_QWORD *)&v64.fields.has_value = 0LL;
    BgmPlayArgs__Update(v53, v61, v63, v64, 0LL);
  }
  v59 = 0x1000000D4LL;
  v54 = *(_QWORD *)v44;
  if ( *(_WORD *)(*(_QWORD *)v44 + 298LL) )
  {
    v55 = 0LL;
    v56 = (int *)(*(_QWORD *)(v54 + 176) + 8LL);
    while ( *((System_IDisposable_c **)v56 - 1) != System_IDisposable_TypeInfo )
    {
      ++v55;
      v56 += 4;
      if ( v55 >= *(unsigned __int16 *)(*(_QWORD *)v44 + 298LL) )
        goto LABEL_43;
    }
    v57 = v54 + 16LL * *v56 + 312;
  }
  else
  {
LABEL_43:
    v57 = sub_AAFEF8(v44, System_IDisposable_TypeInfo, 0LL);
  }
  (*(void (__fastcall **)(__int64, _QWORD))v57)(v44, *(_QWORD *)(v57 + 8));
  if ( (_DWORD)v59 == 212 )
    v59 = 212LL;
LABEL_48:
  if ( (BYTE3(BgmManager_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0 && !BgmManager_TypeInfo->_2.cctor_finished )
    j_il2cpp_runtime_class_init_0(BgmManager_TypeInfo);
  BgmManager__PlayBgm_23393932(v37, 0LL, 0LL);
}


void __fastcall BattleLogic__PreLoadSummonServant(
        BattleLogic_o *this,
        BattleActionData_SummonServant_array *summonServantArray,
        System_Collections_Generic_List_BattleLogic_SummonInfo__o *summonInfoList,
        const MethodInfo *method)
{
  BattleActionData_SummonServant_array *v5; // x20
  BattleLogic_o *v6; // x21
  int max_length; // w8
  unsigned int v8; // w24
  BattleActionData_SummonServant_o *v9; // x26
  BattleData_o *data; // x0
  BattleServantData_o *ServantData; // x0
  BattleServantData_o *v12; // x22
  struct BattleData_o *v13; // x8
  unsigned __int64 v14; // x23
  struct System_Int32_array *e_entryid; // x8
  unsigned __int64 v16; // x9
  BattleData_o *v17; // x0
  BattleServantData_o *v18; // x0
  BattleLogic_SummonInfo_o v19; // 0:x1.8

  v5 = summonServantArray;
  v6 = this;
  if ( (byte_40F73FC & 1) == 0 )
  {
    this = (BattleLogic_o *)sub_B16FFC(
                              &Method_System_Collections_Generic_List_BattleLogic_SummonInfo__Add__,
                              summonServantArray);
    byte_40F73FC = 1;
  }
  if ( !v5 )
    goto LABEL_26;
  max_length = v5->max_length;
  if ( max_length >= 1 )
  {
    v8 = 0;
    while ( 1 )
    {
      if ( v8 >= max_length )
      {
LABEL_27:
        sub_B17100(this, summonServantArray, summonInfoList);
        sub_B170A0();
      }
      v9 = v5->m_Items[v8];
      if ( !v9 )
        break;
      data = v6->fields.data;
      if ( !data )
        break;
      ServantData = BattleData__getServantData(data, v9->fields.uniqueId, 0LL);
      if ( !v6->fields.perf )
        break;
      v12 = ServantData;
      BattlePerformance__preLoadServantSet(v6->fields.perf, ServantData, 0LL);
      v13 = v6->fields.data;
      if ( !v13 )
        break;
      v14 = 0LL;
      while ( 1 )
      {
        e_entryid = v13->fields.e_entryid;
        if ( !e_entryid )
          goto LABEL_26;
        v16 = e_entryid->max_length;
        if ( (__int64)v14 >= (int)v16 )
          break;
        if ( !v12 )
          goto LABEL_26;
        if ( v14 >= v16 )
          goto LABEL_27;
        if ( v12->fields.uniqueId == e_entryid->m_Items[v14 + 1] )
        {
          if ( !summonInfoList )
            goto LABEL_26;
          v19 = (BattleLogic_SummonInfo_o)(v14 | ((unsigned __int64)v9->fields.isEffectSummon << 32));
          System_Collections_Generic_List_BattleLogic_SummonInfo___Add(
            summonInfoList,
            v19,
            (const MethodInfo_2E61200 *)Method_System_Collections_Generic_List_BattleLogic_SummonInfo__Add__);
          summonServantArray = (BattleActionData_SummonServant_array *)(unsigned int)v9->fields.unloadUniqueId;
          if ( (_DWORD)summonServantArray != -1 )
          {
            v17 = v6->fields.data;
            if ( !v17 )
              goto LABEL_26;
            v18 = BattleData__getServantData(v17, (int32_t)summonServantArray, 0LL);
            if ( !v6->fields.perf )
              goto LABEL_26;
            BattlePerformance__unloadDeckActor(v6->fields.perf, v14, v18, 0LL);
          }
        }
        v13 = v6->fields.data;
        ++v14;
        if ( !v13 )
          goto LABEL_26;
      }
      max_length = v5->max_length;
      if ( (int)++v8 >= max_length )
        return;
    }
LABEL_26:
    sub_B170D4();
  }
}


void __fastcall BattleLogic__PreloadAndEntryServant(
        BattleLogic_o *this,
        int32_t deckIndex,
        BattleServantData_o *subdata,
        int32_t repopOrder,
        const MethodInfo *method)
{
  BattleData_o *data; // x0
  BattlePerformance_o *perf; // x0

  data = this->fields.data;
  if ( !data
    || (BattleData__SetEntry(data, subdata, deckIndex, 0LL), !subdata)
    || (subdata->fields.repopOrder = repopOrder, subdata->fields.isBuffProgressFlg = 1,
                                                 (perf = this->fields.perf) == 0LL) )
  {
    sub_B170D4();
  }
  BattlePerformance__preLoadServantSet(perf, subdata, 0LL);
}


BattleActionData_o *__fastcall BattleLogic__PrevReturnCreateActionData(
        BattleLogic_o *this,
        BattleActionData_o *resActData,
        BattleActionData_o *baseActData,
        const MethodInfo *method)
{
  BattleActionData_o *v5; // x20
  __int64 v7; // x1
  __int64 v8; // x2
  __int64 v9; // x3
  __int64 v10; // x4

  v5 = resActData;
  if ( (byte_40F73FE & 1) == 0 )
  {
    sub_B16FFC(&UpdateViewIntervalBuffActionData_TypeInfo, resActData);
    byte_40F73FE = 1;
  }
  if ( !baseActData )
    sub_B170D4();
  ((void (__fastcall *)(BattleActionData_o *, struct BattleData_o *, Il2CppMethodPointer, const MethodInfo *))baseActData->klass->vtable._8_FixDisplayWaitingIntervalBuff.method)(
    baseActData,
    this->fields.data,
    baseActData->klass->vtable._9_ExecAction.methodPtr,
    method);
  if ( !v5 )
  {
    if ( (((__int64 (__fastcall *)(BattleActionData_o *, Il2CppMethodPointer))baseActData->klass->vtable._5_get_ExistUpdateIntervalBuff.method)(
            baseActData,
            baseActData->klass->vtable._6_UpdateIntervalBuff.methodPtr) & 1) != 0 )
    {
      v5 = (BattleActionData_o *)sub_B170CC(UpdateViewIntervalBuffActionData_TypeInfo, v7, v8, v9, v10);
      UpdateViewIntervalBuffActionData___ctor((UpdateViewIntervalBuffActionData_o *)v5, baseActData, 0LL);
    }
    else
    {
      return 0LL;
    }
  }
  return v5;
}


void __fastcall BattleLogic__ProgressIntervalTurn(BattleLogic_o *this, const MethodInfo *method)
{
  __int64 v3; // x1
  __int64 v4; // x1
  BattleData_o *data; // x0
  BattleData_o *v6; // x0
  __int64 v7; // x2
  BattleLogicTask_array *v8; // x20
  __int64 v9; // x1
  __int64 v10; // x2
  __int64 v11; // x3
  __int64 v12; // x4
  BattleLogicTask_o *v13; // x21
  __int64 v14; // x0
  __int64 v15; // x1
  __int64 v16; // x2
  const MethodInfo *v17; // x3
  System_Collections_IEnumerator_o *v18; // x1
  PlayMakerFSM_o *fsm; // x0

  if ( (byte_40F7407 & 1) == 0 )
  {
    sub_B16FFC(&BattleLogicTask___TypeInfo, method);
    sub_B16FFC(&BattleLogicTask_TypeInfo, v3);
    sub_B16FFC(&StringLiteral_12204, v4);
    byte_40F7407 = 1;
  }
  data = this->fields.data;
  if ( !data )
    goto LABEL_13;
  if ( !BattleData__checkProgressflg(data, 0x10000, 0LL) )
  {
    fsm = this->fields.fsm;
    if ( fsm )
    {
      PlayMakerFSM__SendEvent(fsm, (System_String_o *)StringLiteral_12204, 0LL);
      return;
    }
LABEL_13:
    sub_B170D4();
  }
  v6 = this->fields.data;
  if ( !v6 )
    goto LABEL_13;
  BattleData__offProgressflg(v6, 0x10000, 0LL);
  v8 = (BattleLogicTask_array *)sub_B17014(BattleLogicTask___TypeInfo, 1LL, v7);
  v13 = (BattleLogicTask_o *)sub_B170CC(BattleLogicTask_TypeInfo, v9, v10, v11, v12);
  BattleLogicTask___ctor(v13, 0LL);
  if ( !v13 )
    goto LABEL_13;
  v13->fields.actiontype = 65;
  if ( !v8 )
    goto LABEL_13;
  v14 = sub_B170BC(v13, v8->obj.klass->_1.element_class);
  if ( !v14 )
  {
    sub_B170F4();
    sub_B170A0();
  }
  if ( !v8->max_length )
  {
    sub_B17100(v14, v15, v16);
    sub_B170A0();
  }
  v8->m_Items[0] = v13;
  sub_B16F98(v8->m_Items, v13);
  v18 = BattleLogic__waitWaveStep(this, v8, 0x10000, v17);
  UnityEngine_MonoBehaviour__StartCoroutine_34804316((UnityEngine_MonoBehaviour_o *)this, v18, 0LL);
}


// local variable allocation has failed, the output may be wrong!
void __fastcall BattleLogic__RemoveDeadAttackCommand(
        BattleLogic_o *this,
        int32_t targetUniqueId,
        const MethodInfo *method)
{
  struct System_Collections_Generic_Dictionary_int__BattleCommandData__o *deadAttackCommandDictionary; // x0

  if ( (byte_40F7358 & 1) == 0 )
  {
    sub_B16FFC(
      &Method_System_Collections_Generic_Dictionary_int__BattleCommandData__Remove__,
      *(_QWORD *)&targetUniqueId);
    byte_40F7358 = 1;
  }
  if ( !BasicHelper__IsNullOrEmpty((System_Collections_ICollection_o *)this->fields.deadAttackCommandDictionary, 0LL) )
  {
    deadAttackCommandDictionary = this->fields.deadAttackCommandDictionary;
    if ( !deadAttackCommandDictionary )
      sub_B170D4();
    System_Collections_Generic_Dictionary_int__WarBoardAIRoute_PiecePersonality___Remove(
      (System_Collections_Generic_Dictionary_int__WarBoardAIRoute_PiecePersonality__o *)deadAttackCommandDictionary,
      targetUniqueId,
      (const MethodInfo_2DEAD98 *)Method_System_Collections_Generic_Dictionary_int__BattleCommandData__Remove__);
  }
}


void __fastcall BattleLogic__RemoveLoadingIcon(BattleLogic_o *this, const MethodInfo *method)
{
  CommonUI_o *Instance; // x0

  if ( (byte_40F740A & 1) == 0 )
  {
    sub_B16FFC(&Method_SingletonMonoBehaviour_CommonUI__get_Instance__, method);
    byte_40F740A = 1;
  }
  Instance = (CommonUI_o *)SingletonMonoBehaviour_WebViewManager___get_Instance((const MethodInfo_2A54F38 *)Method_SingletonMonoBehaviour_CommonUI__get_Instance__);
  if ( !Instance )
    sub_B170D4();
  CommonUI__SetLoadMode(Instance, 0, 0LL);
}


void __fastcall BattleLogic__ResetPartActiontTimeAcceleration(BattleLogic_o *this, const MethodInfo *method)
{
  BattlePerformance_o *perf; // x0

  perf = this->fields.perf;
  if ( !perf )
    sub_B170D4();
  BattlePerformance__SetTimeScale(perf, this->fields.prevPartActiontScaleTime, 0LL);
}


void __fastcall BattleLogic__SaveCutinFirstIdList(BattleLogic_o *this, const MethodInfo *method)
{
  __int64 v3; // x1
  __int64 v4; // x1
  __int64 v5; // x1
  __int64 v6; // x1
  __int64 v7; // x1
  __int64 v8; // x1
  __int64 v9; // x1
  __int64 v10; // x1
  __int64 v11; // x1
  __int64 v12; // x1
  __int64 v13; // x1
  struct System_Collections_Generic_List_int__o *cutinFirstIdListThisTurn; // x0
  System_Collections_Generic_List_int__o **p_cutinFirstIdList; // x21
  struct System_Collections_Generic_List_int__o *CutinFirstIdList; // x0
  int32_t current; // w20
  __int64 v18; // x1
  __int64 v19; // x2
  __int64 v20; // x3
  __int64 v21; // x4
  System_Text_StringBuilder_o *v22; // x20
  int v23; // w21
  int32_t Length; // w0
  BattleLogic_c *v25; // x0
  System_String_o *CUTIN_FIRST_ID_LIST_KEY; // x21
  System_String_o *v27; // x20
  System_Collections_Generic_List_int__o *v28; // x0
  System_Collections_Generic_List_Enumerator_int__o v29; // [xsp+8h] [xbp-88h] BYREF
  int v30[2]; // [xsp+20h] [xbp-70h]
  int v31; // [xsp+28h] [xbp-68h]
  System_Collections_Generic_List_Enumerator_int__o v32; // [xsp+30h] [xbp-60h] BYREF

  if ( (byte_40F737D & 1) == 0 )
  {
    sub_B16FFC(&BattleLogic_TypeInfo, method);
    sub_B16FFC(&EncryptedPlayerPrefs_TypeInfo, v3);
    sub_B16FFC(&Method_System_Collections_Generic_List_Enumerator_int__Dispose__, v4);
    sub_B16FFC(&Method_System_Collections_Generic_List_Enumerator_int__MoveNext__, v5);
    sub_B16FFC(&Method_System_Collections_Generic_List_Enumerator_int__get_Current__, v6);
    sub_B16FFC(&Method_System_Collections_Generic_List_int__Add__, v7);
    sub_B16FFC(&Method_System_Collections_Generic_List_int__Clear__, v8);
    sub_B16FFC(&Method_System_Collections_Generic_List_int__Contains__, v9);
    sub_B16FFC(&Method_System_Collections_Generic_List_int__GetEnumerator__, v10);
    sub_B16FFC(&Method_System_Collections_Generic_List_int__get_Count__, v11);
    sub_B16FFC(&System_Text_StringBuilder_TypeInfo, v12);
    sub_B16FFC(&StringLiteral_698, v13);
    byte_40F737D = 1;
  }
  memset(&v32, 0, sizeof(v32));
  v31 = 0;
  cutinFirstIdListThisTurn = this->fields.cutinFirstIdListThisTurn;
  if ( !cutinFirstIdListThisTurn )
    goto LABEL_36;
  if ( !cutinFirstIdListThisTurn->fields._size )
    return;
  p_cutinFirstIdList = &this->fields.cutinFirstIdList;
  if ( !this->fields.cutinFirstIdList )
  {
    CutinFirstIdList = BattleLogic__LoadCutinFirstIdList((BattleLogic_o *)cutinFirstIdListThisTurn, method);
    this->fields.cutinFirstIdList = CutinFirstIdList;
    sub_B16F98(&this->fields.cutinFirstIdList, CutinFirstIdList);
    cutinFirstIdListThisTurn = this->fields.cutinFirstIdListThisTurn;
    if ( !cutinFirstIdListThisTurn )
      goto LABEL_36;
  }
  System_Collections_Generic_List_int___GetEnumerator(
    (System_Collections_Generic_List_Enumerator_T__o *)&v29,
    cutinFirstIdListThisTurn,
    (const MethodInfo_2F11334 *)Method_System_Collections_Generic_List_int__GetEnumerator__);
  v32 = v29;
  while ( System_Collections_Generic_List_Enumerator_int___MoveNext(
            &v32,
            (const MethodInfo_2071AE8 *)Method_System_Collections_Generic_List_Enumerator_int__MoveNext__) )
  {
    if ( !*p_cutinFirstIdList )
      sub_B170D4();
    current = v32.fields.current;
    if ( !System_Collections_Generic_List_int___Contains(
            *p_cutinFirstIdList,
            v32.fields.current,
            (const MethodInfo_2F10944 *)Method_System_Collections_Generic_List_int__Contains__) )
    {
      if ( !*p_cutinFirstIdList )
        sub_B170D4();
      System_Collections_Generic_List_int___Add(
        *p_cutinFirstIdList,
        current,
        (const MethodInfo_2F104F0 *)Method_System_Collections_Generic_List_int__Add__);
    }
  }
  v30[0] = 107;
  v31 = 1;
  System_Collections_Generic_List_Enumerator_int___Dispose(
    &v32,
    (const MethodInfo_2071AE4 *)Method_System_Collections_Generic_List_Enumerator_int__Dispose__);
  v31 = 0;
  v22 = (System_Text_StringBuilder_o *)sub_B170CC(System_Text_StringBuilder_TypeInfo, v18, v19, v20, v21);
  System_Text_StringBuilder___ctor(v22, 0LL);
  if ( !*p_cutinFirstIdList )
    goto LABEL_36;
  System_Collections_Generic_List_int___GetEnumerator(
    (System_Collections_Generic_List_Enumerator_T__o *)&v29,
    *p_cutinFirstIdList,
    (const MethodInfo_2F11334 *)Method_System_Collections_Generic_List_int__GetEnumerator__);
  v32 = v29;
  while ( System_Collections_Generic_List_Enumerator_int___MoveNext(
            &v32,
            (const MethodInfo_2071AE8 *)Method_System_Collections_Generic_List_Enumerator_int__MoveNext__) )
  {
    if ( !v22 )
      sub_B170D4();
    System_Text_StringBuilder__Append_41917580(v22, v32.fields.current, 0LL);
    System_Text_StringBuilder__Append_41914240(v22, (System_String_o *)StringLiteral_698, 0LL);
  }
  v30[0] = 180;
  v23 = ++v31;
  System_Collections_Generic_List_Enumerator_int___Dispose(
    &v32,
    (const MethodInfo_2071AE4 *)Method_System_Collections_Generic_List_Enumerator_int__Dispose__);
  if ( v23 && v30[v23 - 1] == 180 )
    v31 = v23 - 1;
  if ( !v22 )
    goto LABEL_36;
  if ( System_Text_StringBuilder__get_Length(v22, 0LL) >= 1 )
  {
    Length = System_Text_StringBuilder__get_Length(v22, 0LL);
    System_Text_StringBuilder__Remove(v22, Length - 1, 1, 0LL);
  }
  v25 = BattleLogic_TypeInfo;
  if ( (BYTE3(BattleLogic_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0 && !BattleLogic_TypeInfo->_2.cctor_finished )
  {
    j_il2cpp_runtime_class_init_0(BattleLogic_TypeInfo);
    v25 = BattleLogic_TypeInfo;
  }
  CUTIN_FIRST_ID_LIST_KEY = v25->static_fields->CUTIN_FIRST_ID_LIST_KEY;
  v27 = (System_String_o *)((__int64 (__fastcall *)(System_Text_StringBuilder_o *, Il2CppMethodPointer))v22->klass->vtable._3_ToString.method)(
                             v22,
                             v22->klass->vtable._4_System_Runtime_Serialization_ISerializable_GetObjectData.methodPtr);
  if ( (BYTE3(EncryptedPlayerPrefs_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0
    && !EncryptedPlayerPrefs_TypeInfo->_2.cctor_finished )
  {
    j_il2cpp_runtime_class_init_0(EncryptedPlayerPrefs_TypeInfo);
  }
  EncryptedPlayerPrefs__SetString(CUTIN_FIRST_ID_LIST_KEY, v27, 0LL);
  v28 = this->fields.cutinFirstIdListThisTurn;
  if ( !v28 )
LABEL_36:
    sub_B170D4();
  System_Collections_Generic_List_int___Clear(
    v28,
    (const MethodInfo_2F108FC *)Method_System_Collections_Generic_List_int__Clear__);
}


void __fastcall BattleLogic__SavePartActiontTimeAcceleration(BattleLogic_o *this, const MethodInfo *method)
{
  __int64 v3; // x1
  __int64 v4; // x1
  float timeScale; // s0
  _BOOL4 isEnableSkipAssistSkill; // w8
  struct BattlePerformance_o *perf; // x8
  struct BattleActionData_o *nowAction; // x20
  WarQuestSelectionMaster_o *Master_WarQuestSelectionMaster; // x0
  struct BattleSkillInfoData_o *skillInfo; // x8
  DataMasterBase_WarMaster__WarEntity__int__o *v11; // x20
  int32_t v12; // w0
  SkillEntity_o *Entity; // x0
  SkillEntity_o *v14; // x20
  int32_t CutinFirstId; // w0
  const MethodInfo *v16; // x2
  BattlePerformance_o *v17; // x0

  if ( (byte_40F737A & 1) == 0 )
  {
    sub_B16FFC(&Method_DataManager_GetMaster_SkillMaster___, method);
    sub_B16FFC(&DataManager_TypeInfo, v3);
    sub_B16FFC(&Method_DataMasterBase_SkillMaster__SkillEntity__int__GetEntity__, v4);
    byte_40F737A = 1;
  }
  timeScale = UnityEngine_Time__get_timeScale(0LL);
  isEnableSkipAssistSkill = this->fields.isEnableSkipAssistSkill;
  this->fields.prevPartActiontScaleTime = timeScale;
  if ( isEnableSkipAssistSkill )
  {
    this->fields.isEnableSkipAssistSkill = 0;
    return;
  }
  perf = this->fields.perf;
  if ( !perf )
LABEL_20:
    sub_B170D4();
  nowAction = perf->fields.nowAction;
  if ( !nowAction || !nowAction->fields.skillInfo )
    goto LABEL_18;
  if ( (BYTE3(DataManager_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0 && !DataManager_TypeInfo->_2.cctor_finished )
    j_il2cpp_runtime_class_init_0(DataManager_TypeInfo);
  Master_WarQuestSelectionMaster = DataManager__GetMaster_WarQuestSelectionMaster_((const MethodInfo_18C3224 *)Method_DataManager_GetMaster_SkillMaster___);
  skillInfo = nowAction->fields.skillInfo;
  if ( !skillInfo )
    goto LABEL_20;
  v11 = (DataMasterBase_WarMaster__WarEntity__int__o *)Master_WarQuestSelectionMaster;
  v12 = ((__int64 (__fastcall *)(struct BattleSkillInfoData_o *, Il2CppMethodPointer))skillInfo->klass->vtable._5_get_skillId.method)(
          skillInfo,
          skillInfo->klass->vtable._6_get_IndividualityArray.methodPtr);
  if ( !v11 )
    goto LABEL_20;
  Entity = (SkillEntity_o *)DataMasterBase_WarMaster__WarEntity__int___GetEntity(
                              v11,
                              v12,
                              (const MethodInfo_266F388 *)Method_DataMasterBase_SkillMaster__SkillEntity__int__GetEntity__);
  if ( !Entity
    || (v14 = Entity, !SkillEntity__getSkillCutInId(Entity, 0LL))
    || (CutinFirstId = SkillEntity__GetCutinFirstId(v14, 0LL)) == 0
    || BattleLogic__CheckCutinFirstId(this, CutinFirstId, v16) )
  {
LABEL_18:
    v17 = this->fields.perf;
    if ( v17 )
    {
      BattlePerformance__SetTimeScale(v17, 1.0, 0LL);
      return;
    }
    goto LABEL_20;
  }
}


void __fastcall BattleLogic__SendFsmEventForPreCheckEndBattle(BattleLogic_o *this, const MethodInfo *method)
{
  __int64 v3; // x1
  BattleData_o *data; // x0
  bool v5; // w0
  bool v6; // w20
  struct BattleData_o *v7; // x8
  PlayMakerFSM_o *fsm; // x0
  __int64 *v9; // x8

  if ( (byte_40F7403 & 1) == 0 )
  {
    sub_B16FFC(&StringLiteral_5481, method);
    sub_B16FFC(&StringLiteral_12204, v3);
    byte_40F7403 = 1;
  }
  data = this->fields.data;
  if ( !data )
    goto LABEL_12;
  v5 = BattleData__checkProgressflg(data, 2048, 0LL);
  if ( !this->fields.data )
    goto LABEL_12;
  v6 = v5;
  BattleData__offProgressflg(this->fields.data, 2048, 0LL);
  v7 = this->fields.data;
  if ( !v7 )
    goto LABEL_12;
  fsm = this->fields.fsm;
  if ( v7->fields.initturn != 1 || !v6 )
  {
    if ( fsm )
    {
      v9 = &StringLiteral_12204;
      goto LABEL_11;
    }
LABEL_12:
    sub_B170D4();
  }
  if ( !fsm )
    goto LABEL_12;
  v9 = &StringLiteral_5481;
LABEL_11:
  PlayMakerFSM__SendEvent(fsm, (System_String_o *)*v9, 0LL);
}


void __fastcall BattleLogic__SetFirstDisplayTriggerIntervalBuffArray(
        BattleLogic_o *this,
        bool *isFirstAdd,
        BattleServantData_o *svtData,
        BattleBuffData_BuffData_array *buffArray,
        BattleLogicTask_array *invokeTasks,
        const MethodInfo *method)
{
  _BOOL8 IsNullOrEmpty; // x0
  __int64 v11; // x1
  __int64 v12; // x2
  BattleLogicTask_o *v13; // x0

  if ( *isFirstAdd )
  {
    IsNullOrEmpty = BasicHelper__IsNullOrEmpty((System_Collections_ICollection_o *)invokeTasks, 0LL);
    if ( !IsNullOrEmpty )
    {
      *isFirstAdd = 0;
      if ( !invokeTasks )
        goto LABEL_8;
      if ( !invokeTasks->max_length )
      {
        sub_B17100(IsNullOrEmpty, v11, v12);
        sub_B170A0();
      }
      v13 = invokeTasks->m_Items[0];
      if ( !v13 )
LABEL_8:
        sub_B170D4();
      BattleLogicTask__SetDisplayTriggerIntervalBuff(v13, svtData, buffArray, 0LL);
    }
  }
}


// local variable allocation has failed, the output may be wrong!
void __fastcall BattleLogic__SetTimeAccelerationCheckDelayReset(
        BattleLogic_o *this,
        bool skip,
        const MethodInfo *method)
{
  const MethodInfo *v5; // x2
  const MethodInfo *v6; // x1

  if ( (byte_40F7377 & 1) == 0 )
  {
    sub_B16FFC(&StringLiteral_6723, skip);
    byte_40F7377 = 1;
  }
  if ( UnityEngine_MonoBehaviour__IsInvoking_34803724(
         (UnityEngine_MonoBehaviour_o *)this,
         (System_String_o *)StringLiteral_6723,
         0LL) )
  {
    UnityEngine_MonoBehaviour__CancelInvoke_34803564(
      (UnityEngine_MonoBehaviour_o *)this,
      (System_String_o *)StringLiteral_6723,
      0LL);
    BattleLogic__ForceResetTimeAcceleration(this, v6);
  }
  BattleLogic__setTimeAcceleration(this, skip, v5);
}


void __fastcall BattleLogic__SetTimeAccelerationDifferent(BattleLogic_o *this, bool skip, const MethodInfo *method)
{
  float timeScale; // s0
  BattleData_o *data; // x0
  const MethodInfo *v7; // x2

  timeScale = UnityEngine_Time__get_timeScale(0LL);
  data = this->fields.data;
  if ( !data )
    sub_B170D4();
  if ( timeScale != BattleData__get_AccelSystemTimeScale(data, 0LL) )
    BattleLogic__setTimeAcceleration(this, skip, v7);
}


void __fastcall BattleLogic__SetTimeAccelerationFirst(BattleLogic_o *this, const MethodInfo *method)
{
  BattlePerformance_o *perf; // x0
  BattleMotionSkipManager_o *MotionSkipManager; // x0
  BaseMotionSkip_o *Current; // x0
  float timeScale; // s0
  BattlePerformance_o *v7; // x0

  perf = this->fields.perf;
  if ( !perf
    || (MotionSkipManager = BattlePerformance__get_MotionSkipManager(perf, 0LL)) == 0LL
    || (Current = BattleMotionSkipManager__get_Current(MotionSkipManager, 0LL)) == 0LL
    || (((void (__fastcall *)(BaseMotionSkip_o *, Il2CppMethodPointer))Current->klass->vtable._8_ResetSkipTimeScale.method)(
          Current,
          Current->klass->vtable._9_MotionStart.methodPtr),
        timeScale = UnityEngine_Time__get_timeScale(0LL),
        v7 = this->fields.perf,
        this->fields.prevFirstScaleTime = timeScale,
        !v7) )
  {
    sub_B170D4();
  }
  BattlePerformance__SetTimeScale(v7, 1.0, 0LL);
}


void __fastcall BattleLogic__SetTimeAccelerationFix(BattleLogic_o *this, const MethodInfo *method)
{
  __int64 v3; // x1
  __int64 v4; // x1
  WebViewManager_o *Instance; // x0
  UnityEngine_Object_o *webView; // x20
  const MethodInfo *v7; // x2
  WebViewManager_o *v8; // x0
  UnityEngine_GameObject_o *v9; // x0
  srcLineSprite_o *Component_srcLineSprite; // x0
  srcLineSprite_o *v11; // x20
  BattleServantData_o *monitor; // x0
  BattleServantData_o *v13; // x0
  bool IsNpDoubleSpeed; // w0
  BattlePerformance_o *perf; // x8
  float v16; // s0

  if ( (byte_40F7379 & 1) == 0 )
  {
    sub_B16FFC(&Method_UnityEngine_GameObject_GetComponent_BattleActorControl___, method);
    sub_B16FFC(&UnityEngine_Object_TypeInfo, v3);
    sub_B16FFC(&Method_SingletonMonoBehaviour_BattleSequenceManager__get_Instance__, v4);
    byte_40F7379 = 1;
  }
  this->fields.prevFixScaleTime = UnityEngine_Time__get_timeScale(0LL);
  Instance = SingletonMonoBehaviour_WebViewManager___get_Instance((const MethodInfo_2A54F38 *)Method_SingletonMonoBehaviour_BattleSequenceManager__get_Instance__);
  if ( !Instance )
    goto LABEL_20;
  webView = (UnityEngine_Object_o *)Instance->fields.webView;
  if ( (BYTE3(UnityEngine_Object_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0
    && !UnityEngine_Object_TypeInfo->_2.cctor_finished )
  {
    j_il2cpp_runtime_class_init_0(UnityEngine_Object_TypeInfo);
  }
  if ( !UnityEngine_Object__op_Inequality(webView, 0LL, 0LL) )
    goto LABEL_17;
  v8 = SingletonMonoBehaviour_WebViewManager___get_Instance((const MethodInfo_2A54F38 *)Method_SingletonMonoBehaviour_BattleSequenceManager__get_Instance__);
  if ( !v8
    || (v9 = (UnityEngine_GameObject_o *)v8->fields.webView) == 0LL
    || (Component_srcLineSprite = UnityEngine_GameObject__GetComponent_srcLineSprite_(
                                    v9,
                                    (const MethodInfo_19D14E0 *)Method_UnityEngine_GameObject_GetComponent_BattleActorControl___)) == 0LL
    || (v11 = Component_srcLineSprite, (monitor = (BattleServantData_o *)Component_srcLineSprite[3].monitor) == 0LL) )
  {
LABEL_20:
    sub_B170D4();
  }
  if ( !BattleServantData__IsNpEffectSpeedFix(monitor, 0LL) )
  {
LABEL_17:
    BattleLogic__setTimeAcceleration(this, 0, v7);
    return;
  }
  v13 = (BattleServantData_o *)v11[3].monitor;
  if ( !v13 )
    goto LABEL_20;
  IsNpDoubleSpeed = BattleServantData__IsNpDoubleSpeed(v13, 0LL);
  perf = this->fields.perf;
  if ( !perf )
    goto LABEL_20;
  if ( IsNpDoubleSpeed )
    v16 = 2.0;
  else
    v16 = 1.0;
  BattlePerformance__SetTimeScale(perf, v16, 0LL);
}


// local variable allocation has failed, the output may be wrong!
void __fastcall BattleLogic__SkipCommandSpellRequest(
        BattleLogic_o *this,
        int32_t commandSpellId,
        const MethodInfo *method)
{
  __int64 v5; // x1
  __int64 v6; // x1
  __int64 v7; // x1
  __int64 v8; // x1
  WebViewManager_o *Instance; // x0
  DataMasterBase_WarMaster__WarEntity__int__o *MasterData_WarQuestSelectionMaster; // x0
  WarEntity_o *Entity; // x0
  PlayMakerFSM_o *fsm; // x0

  if ( (byte_40F7404 & 1) == 0 )
  {
    sub_B16FFC(&BattleData_TypeInfo, *(_QWORD *)&commandSpellId);
    sub_B16FFC(&Method_DataManager_GetMasterData_CommandSpellMaster___, v5);
    sub_B16FFC(&Method_DataMasterBase_CommandSpellMaster__CommandSpellEntity__int__GetEntity__, v6);
    sub_B16FFC(&Method_SingletonMonoBehaviour_DataManager__get_Instance__, v7);
    sub_B16FFC(&StringLiteral_9714, v8);
    byte_40F7404 = 1;
  }
  Instance = SingletonMonoBehaviour_WebViewManager___get_Instance((const MethodInfo_2A54F38 *)Method_SingletonMonoBehaviour_DataManager__get_Instance__);
  if ( !Instance )
    goto LABEL_12;
  MasterData_WarQuestSelectionMaster = (DataMasterBase_WarMaster__WarEntity__int__o *)DataManager__GetMasterData_WarQuestSelectionMaster_(
                                                                                        (DataManager_o *)Instance,
                                                                                        (const MethodInfo_18C3284 *)Method_DataManager_GetMasterData_CommandSpellMaster___);
  if ( !MasterData_WarQuestSelectionMaster )
    goto LABEL_12;
  Entity = DataMasterBase_WarMaster__WarEntity__int___GetEntity(
             MasterData_WarQuestSelectionMaster,
             commandSpellId,
             (const MethodInfo_266F388 *)Method_DataMasterBase_CommandSpellMaster__CommandSpellEntity__int__GetEntity__);
  if ( !Entity || !this->fields.data )
    goto LABEL_12;
  BattleData__LossTemporaryCommandSpell(this->fields.data, *(&Entity->fields.id + 1), 0LL);
  this->fields.connCammdSpellRetryFlg = 0;
  if ( (BYTE3(BattleData_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0 && !BattleData_TypeInfo->_2.cctor_finished )
    j_il2cpp_runtime_class_init_0(BattleData_TypeInfo);
  BattleData__setCommandSpellIdBattle(0, 0, 0LL);
  BattleData__setContinueBattleFlg(0, 1, 0LL);
  fsm = this->fields.fsm;
  if ( !fsm )
LABEL_12:
    sub_B170D4();
  PlayMakerFSM__SendEvent(fsm, (System_String_o *)StringLiteral_9714, 0LL);
}


void __fastcall BattleLogic__StartEnemyCommandSpellEffect(BattleLogic_o *this, const MethodInfo *method)
{
  const MethodInfo *v2; // x2
  Il2CppObject *v3; // x19
  __int64 v4; // x1
  __int64 v5; // x1
  Il2CppClass *klass; // x8
  Il2CppRuntimeInterfaceOffsetPair *interfaceOffsets; // x8
  System_String_o *CommandSpellAssetName; // x20
  __int64 v9; // x1
  __int64 v10; // x2
  __int64 v11; // x3
  __int64 v12; // x4
  AssetLoader_LoadEndDataHandler_o *v13; // x21

  v3 = (Il2CppObject *)this;
  if ( (byte_40F73D0 & 1) == 0 )
  {
    sub_B16FFC(&AssetManager_TypeInfo, method);
    sub_B16FFC(&Method_BattleLogic_endLoadEnemyCommandSpell__, v4);
    this = (BattleLogic_o *)sub_B16FFC(&AssetLoader_LoadEndDataHandler_TypeInfo, v5);
    byte_40F73D0 = 1;
  }
  klass = v3[2].klass;
  if ( !klass || (interfaceOffsets = klass->_1.interfaceOffsets) == 0LL )
    sub_B170D4();
  CommandSpellAssetName = BattleLogic__GetCommandSpellAssetName(this, *(&interfaceOffsets[1].offset + 1), v2);
  v13 = (AssetLoader_LoadEndDataHandler_o *)sub_B170CC(AssetLoader_LoadEndDataHandler_TypeInfo, v9, v10, v11, v12);
  AssetLoader_LoadEndDataHandler___ctor(v13, v3, Method_BattleLogic_endLoadEnemyCommandSpell__, 0LL);
  if ( (BYTE3(AssetManager_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0 && !AssetManager_TypeInfo->_2.cctor_finished )
    j_il2cpp_runtime_class_init_0(AssetManager_TypeInfo);
  AssetManager__loadAssetStorage(CommandSpellAssetName, v13, 1, 0LL);
}


void __fastcall BattleLogic__StartResultRequest(
        BattleLogic_o *this,
        System_String_o *endEvent,
        const MethodInfo *method)
{
  __int64 v4; // x1
  __int64 v5; // x1
  struct BattleData_o *data; // x8
  struct BattleEntity_o *battle_ent; // x8
  int32_t questId; // w20
  AdManager_o *Instance; // x0
  PlayMakerFSM_o *fsm; // x0

  if ( (byte_40F736E & 1) == 0 )
  {
    sub_B16FFC(&Method_SingletonMonoBehaviour_AdManager__get_Instance__, endEvent);
    sub_B16FFC(&StringLiteral_13472, v4);
    sub_B16FFC(&StringLiteral_5481, v5);
    byte_40F736E = 1;
  }
  data = this->fields.data;
  if ( !data )
    goto LABEL_10;
  battle_ent = data->fields.battle_ent;
  if ( !battle_ent )
    goto LABEL_10;
  questId = battle_ent->fields.questId;
  if ( questId == ConstantMaster__getValue((System_String_o *)StringLiteral_13472, 0LL) )
  {
    Instance = (AdManager_o *)SingletonMonoBehaviour_WebViewManager___get_Instance((const MethodInfo_2A54F38 *)Method_SingletonMonoBehaviour_AdManager__get_Instance__);
    if ( !Instance )
      goto LABEL_10;
    AdManager__TrackEvent(Instance, 2, 4, -1, -1, 0LL, 0LL);
  }
  fsm = this->fields.fsm;
  if ( !fsm )
LABEL_10:
    sub_B170D4();
  PlayMakerFSM__SendEvent(fsm, (System_String_o *)StringLiteral_5481, 0LL);
}


void __fastcall BattleLogic__StartShowResult(BattleLogic_o *this, System_String_o *endEvent, const MethodInfo *method)
{
  BattleData_o *data; // x0
  bool isTutorial; // w0
  struct BattleData_o *v7; // x8
  BattleData_o *v8; // x0
  const MethodInfo *v9; // x3
  BattlePerformance_o *perf; // x0
  BattlePerformance_o *v11; // x21
  System_String_o *resultstring; // x22
  UnityEngine_GameObject_o *gameObject; // x0
  BattlePerformance_o *v14; // x0
  System_Collections_IEnumerator_o *v15; // x1
  PlayMakerFSM_o *fsm; // x0

  data = this->fields.data;
  if ( !data )
    goto LABEL_17;
  isTutorial = BattleData__isTutorial(data, 0LL);
  v7 = this->fields.data;
  if ( !isTutorial )
  {
    if ( !v7 )
      goto LABEL_17;
LABEL_7:
    if ( !BattleData__isResultWin(this->fields.data, 0LL) )
    {
      v8 = this->fields.data;
      if ( !v8 )
        goto LABEL_17;
      if ( !BattleData__isDispLoseResult(v8, 0LL) )
      {
        if ( BattleLogic__CheckEventDataLostBattle(this, this->fields.resultstring, endEvent, v9) )
          return;
        goto LABEL_15;
      }
    }
    perf = this->fields.perf;
    if ( perf )
    {
      BattlePerformance__resetPopObject(perf, 0LL);
      v11 = this->fields.perf;
      resultstring = this->fields.resultstring;
      gameObject = UnityEngine_Component__get_gameObject((UnityEngine_Component_o *)this, 0LL);
      if ( v11 )
      {
        BattlePerformance__setResultData(v11, resultstring, gameObject, endEvent, 0LL);
        v14 = this->fields.perf;
        if ( v14 )
        {
          v15 = BattlePerformance__showBattleResultWait(v14, 0LL);
          UnityEngine_MonoBehaviour__StartCoroutine_34804316((UnityEngine_MonoBehaviour_o *)this, v15, 0LL);
          return;
        }
      }
    }
LABEL_17:
    sub_B170D4();
  }
  if ( !v7 )
    goto LABEL_17;
  if ( v7->fields.tutorialId != 1 )
    goto LABEL_7;
LABEL_15:
  fsm = this->fields.fsm;
  if ( !fsm )
    goto LABEL_17;
  PlayMakerFSM__SendEvent(fsm, endEvent, 0LL);
}


void __fastcall BattleLogic__TurnStartFunction(BattleLogic_o *this, const MethodInfo *method)
{
  BattleData_o *data; // x0
  BattleData_o *v4; // x0
  const MethodInfo *v5; // x2
  BattleLogicTask_array *TurnStartTaskArray; // x0
  const MethodInfo *v7; // x3
  System_Collections_IEnumerator_o *v8; // x1
  PlayMakerFSM_o *fsm; // x0

  if ( (byte_40F7406 & 1) == 0 )
  {
    sub_B16FFC(&StringLiteral_12204, method);
    byte_40F7406 = 1;
  }
  data = this->fields.data;
  if ( !data )
    goto LABEL_11;
  if ( BattleData__checkProgressflg(data, 0x2000, 0LL) )
  {
    v4 = this->fields.data;
    if ( !v4 )
      goto LABEL_11;
    BattleData__offProgressflg(v4, 0x2000, 0LL);
    TurnStartTaskArray = BattleLogic__GetTurnStartTaskArray(this, 1, v5);
    if ( TurnStartTaskArray && *(_QWORD *)&TurnStartTaskArray->max_length )
    {
      v8 = BattleLogic__waitWaveStep(this, TurnStartTaskArray, 0x2000, v7);
      UnityEngine_MonoBehaviour__StartCoroutine_34804316((UnityEngine_MonoBehaviour_o *)this, v8, 0LL);
      return;
    }
  }
  fsm = this->fields.fsm;
  if ( !fsm )
LABEL_11:
    sub_B170D4();
  PlayMakerFSM__SendEvent(fsm, (System_String_o *)StringLiteral_12204, 0LL);
}


// local variable allocation has failed, the output may be wrong!
BattleServantData_array *__fastcall BattleLogic__UnloadDeadDeckActorsAndFreeEntry(
        BattleLogic_o *this,
        bool isEnemy,
        const MethodInfo *method)
{
  __int64 v3; // x3
  __int64 v4; // x4
  __int64 v7; // x1
  __int64 v8; // x1
  __int64 v9; // x1
  __int64 v10; // x1
  __int64 v11; // x1
  __int64 v12; // x1
  __int64 v13; // x1
  BattleLogic___c__DisplayClass82_0_o *v14; // x20
  __int64 v15; // x1
  __int64 v16; // x2
  __int64 v17; // x3
  __int64 v18; // x4
  System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData__o *v19; // x21
  BattleData_o *data; // x0
  System_Collections_Generic_IEnumerable_T__o *EntryIdArray; // x19
  __int64 v22; // x1
  __int64 v23; // x2
  __int64 v24; // x3
  __int64 v25; // x4
  System_Action_int__int__o *v26; // x21
  System_Collections_Generic_List_WarBoardUiData_SaveData__o *v27; // x0

  if ( (byte_40F7363 & 1) == 0 )
  {
    sub_B16FFC(&Method_System_Action_int__int___ctor__, isEnemy);
    sub_B16FFC(&System_Action_int__int__TypeInfo, v7);
    sub_B16FFC(&Method_BasicHelper_ForEach_int____66806640, v8);
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleServantData__ToArray__, v9);
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleServantData___ctor__, v10);
    sub_B16FFC(&System_Collections_Generic_List_BattleServantData__TypeInfo, v11);
    sub_B16FFC(&Method_BattleLogic___c__DisplayClass82_0__UnloadDeadDeckActorsAndFreeEntry_b__0__, v12);
    sub_B16FFC(&BattleLogic___c__DisplayClass82_0_TypeInfo, v13);
    byte_40F7363 = 1;
  }
  v14 = (BattleLogic___c__DisplayClass82_0_o *)sub_B170CC(
                                                 BattleLogic___c__DisplayClass82_0_TypeInfo,
                                                 isEnemy,
                                                 method,
                                                 v3,
                                                 v4);
  BattleLogic___c__DisplayClass82_0___ctor(v14, 0LL);
  if ( !v14 )
    goto LABEL_7;
  v14->fields.__4__this = this;
  sub_B16F98(&v14->fields, this);
  v14->fields.isEnemy = isEnemy;
  v19 = (System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData__o *)sub_B170CC(
                                                                                                  System_Collections_Generic_List_BattleServantData__TypeInfo,
                                                                                                  v15,
                                                                                                  v16,
                                                                                                  v17,
                                                                                                  v18);
  System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData____ctor(
    v19,
    (const MethodInfo_2F25014 *)Method_System_Collections_Generic_List_BattleServantData___ctor__);
  v14->fields.result = (struct System_Collections_Generic_List_BattleServantData__o *)v19;
  sub_B16F98(&v14->fields.result, v19);
  data = this->fields.data;
  if ( !data
    || (EntryIdArray = (System_Collections_Generic_IEnumerable_T__o *)BattleData__getEntryIdArray(
                                                                        data,
                                                                        v14->fields.isEnemy,
                                                                        0LL),
        v26 = (System_Action_int__int__o *)sub_B170CC(System_Action_int__int__TypeInfo, v22, v23, v24, v25),
        System_Action_int__int____ctor(
          v26,
          (Il2CppObject *)v14,
          Method_BattleLogic___c__DisplayClass82_0__UnloadDeadDeckActorsAndFreeEntry_b__0__,
          (const MethodInfo_24C3654 *)Method_System_Action_int__int___ctor__),
        BasicHelper__ForEach_int__25915308(
          EntryIdArray,
          (System_Action_int__T__o *)v26,
          (const MethodInfo_18B6FAC *)Method_BasicHelper_ForEach_int____66806640),
        (v27 = (System_Collections_Generic_List_WarBoardUiData_SaveData__o *)v14->fields.result) == 0LL) )
  {
LABEL_7:
    sub_B170D4();
  }
  return (BattleServantData_array *)System_Collections_Generic_List_WarBoardUiData_SaveData___ToArray(
                                      v27,
                                      (const MethodInfo_2F27E24 *)Method_System_Collections_Generic_List_BattleServantData__ToArray__);
}


// local variable allocation has failed, the output may be wrong!
BattleServantData_array *__fastcall BattleLogic__UnloadMoveToSubMemberDeckActors(
        BattleLogic_o *this,
        bool isEnemy,
        const MethodInfo *method)
{
  __int64 v3; // x3
  __int64 v4; // x4
  __int64 v7; // x1
  __int64 v8; // x1
  __int64 v9; // x1
  __int64 v10; // x1
  __int64 v11; // x1
  __int64 v12; // x1
  __int64 v13; // x1
  __int64 v14; // x1
  __int64 v15; // x1
  __int64 v16; // x1
  __int64 v17; // x1
  __int64 v18; // x1
  __int64 v19; // x1
  BattleLogic___c__DisplayClass83_0_o *v20; // x21
  __int64 v21; // x1
  __int64 v22; // x2
  __int64 v23; // x3
  __int64 v24; // x4
  System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData__o *v25; // x19
  BattleData_o *data; // x0
  System_Collections_IEnumerable_o *RestockServantLogicList; // x0
  System_Collections_Generic_IEnumerable_TSource__o *v28; // x22
  __int64 v29; // x1
  __int64 v30; // x2
  __int64 v31; // x3
  __int64 v32; // x4
  System_Func_WarBoardManager_WarBoardOnboardSkillTarget__bool__o *v33; // x23
  System_Collections_Generic_IEnumerable_TSource__o *v34; // x0
  System_Collections_Generic_IEnumerable_TSource__c *klass; // x8
  System_Collections_Generic_IEnumerable_TSource__o *v36; // x21
  unsigned __int64 v37; // x10
  int32_t *p_offset; // x11
  __int64 p_method; // x0
  __int64 v40; // x21
  __int64 v41; // x8
  unsigned __int64 v42; // x10
  int *v43; // x11
  __int64 v44; // x0
  __int64 v45; // x8
  unsigned __int64 v46; // x10
  int *v47; // x11
  __int64 v48; // x0
  __int64 v49; // x22
  BattleData_o *v50; // x0
  BattleServantData_o *ServantData; // x0
  BattleServantData_o *v52; // x23
  BattlePerformance_o *perf; // x0
  __int64 v54; // x8
  unsigned __int64 v55; // x10
  int *v56; // x11
  __int64 v57; // x0

  if ( (byte_40F7364 & 1) == 0 )
  {
    sub_B16FFC(&Method_System_Linq_Enumerable_OfType_RestockServantLogicByMoveToSubMember___, isEnemy);
    sub_B16FFC(&Method_System_Linq_Enumerable_Where_RestockServantLogicByMoveToSubMember___, v7);
    sub_B16FFC(&Method_System_Func_RestockServantLogicByMoveToSubMember__bool___ctor__, v8);
    sub_B16FFC(&System_Func_RestockServantLogicByMoveToSubMember__bool__TypeInfo, v9);
    sub_B16FFC(&System_IDisposable_TypeInfo, v10);
    sub_B16FFC(&System_Collections_Generic_IEnumerable_RestockServantLogicByMoveToSubMember__TypeInfo, v11);
    sub_B16FFC(&System_Collections_Generic_IEnumerator_RestockServantLogicByMoveToSubMember__TypeInfo, v12);
    sub_B16FFC(&System_Collections_IEnumerator_TypeInfo, v13);
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleServantData__Add__, v14);
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleServantData__ToArray__, v15);
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleServantData___ctor__, v16);
    sub_B16FFC(&System_Collections_Generic_List_BattleServantData__TypeInfo, v17);
    sub_B16FFC(&Method_BattleLogic___c__DisplayClass83_0__UnloadMoveToSubMemberDeckActors_b__0__, v18);
    sub_B16FFC(&BattleLogic___c__DisplayClass83_0_TypeInfo, v19);
    byte_40F7364 = 1;
  }
  v20 = (BattleLogic___c__DisplayClass83_0_o *)sub_B170CC(
                                                 BattleLogic___c__DisplayClass83_0_TypeInfo,
                                                 isEnemy,
                                                 method,
                                                 v3,
                                                 v4);
  BattleLogic___c__DisplayClass83_0___ctor(v20, 0LL);
  if ( !v20 )
    goto LABEL_45;
  v20->fields.isEnemy = isEnemy;
  v25 = (System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData__o *)sub_B170CC(
                                                                                                  System_Collections_Generic_List_BattleServantData__TypeInfo,
                                                                                                  v21,
                                                                                                  v22,
                                                                                                  v23,
                                                                                                  v24);
  System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData____ctor(
    v25,
    (const MethodInfo_2F25014 *)Method_System_Collections_Generic_List_BattleServantData___ctor__);
  data = this->fields.data;
  if ( !data )
    goto LABEL_45;
  RestockServantLogicList = (System_Collections_IEnumerable_o *)BattleData__GetRestockServantLogicList(data, 0LL);
  v28 = (System_Collections_Generic_IEnumerable_TSource__o *)System_Linq_Enumerable__OfType_WarBoardPartySkillEntity_(
                                                               RestockServantLogicList,
                                                               (const MethodInfo_19BD52C *)Method_System_Linq_Enumerable_OfType_RestockServantLogicByMoveToSubMember___);
  v33 = (System_Func_WarBoardManager_WarBoardOnboardSkillTarget__bool__o *)sub_B170CC(
                                                                             System_Func_RestockServantLogicByMoveToSubMember__bool__TypeInfo,
                                                                             v29,
                                                                             v30,
                                                                             v31,
                                                                             v32);
  System_Func_WarBoardManager_WarBoardOnboardSkillTarget__bool____ctor(
    v33,
    (Il2CppObject *)v20,
    Method_BattleLogic___c__DisplayClass83_0__UnloadMoveToSubMemberDeckActors_b__0__,
    (const MethodInfo_2B6AB40 *)Method_System_Func_RestockServantLogicByMoveToSubMember__bool___ctor__);
  v34 = System_Linq_Enumerable__Where_WarBoardManager_WarBoardOnboardSkillTarget_(
          v28,
          (System_Func_TSource__bool__o *)v33,
          (const MethodInfo_19C8FE8 *)Method_System_Linq_Enumerable_Where_RestockServantLogicByMoveToSubMember___);
  if ( !v34 )
    goto LABEL_45;
  klass = v34->klass;
  v36 = v34;
  if ( *(_WORD *)&v34->klass->_2.bitflags1 )
  {
    v37 = 0LL;
    p_offset = &klass->_1.interfaceOffsets->offset;
    while ( *((System_Collections_Generic_IEnumerable_RestockServantLogicByMoveToSubMember__c **)p_offset - 1) != System_Collections_Generic_IEnumerable_RestockServantLogicByMoveToSubMember__TypeInfo )
    {
      ++v37;
      p_offset += 4;
      if ( v37 >= *(unsigned __int16 *)&v34->klass->_2.bitflags1 )
        goto LABEL_10;
    }
    p_method = (__int64)&klass->vtable[*p_offset].method;
  }
  else
  {
LABEL_10:
    p_method = sub_AAFEF8(
                 v34,
                 System_Collections_Generic_IEnumerable_RestockServantLogicByMoveToSubMember__TypeInfo,
                 0LL);
  }
  v40 = (*(__int64 (__fastcall **)(System_Collections_Generic_IEnumerable_TSource__o *, _QWORD))p_method)(
          v36,
          *(_QWORD *)(p_method + 8));
  if ( !v40 )
    sub_B170D4();
  while ( 1 )
  {
    v41 = *(_QWORD *)v40;
    if ( *(_WORD *)(*(_QWORD *)v40 + 298LL) )
    {
      v42 = 0LL;
      v43 = (int *)(*(_QWORD *)(v41 + 176) + 8LL);
      while ( *((System_Collections_IEnumerator_c **)v43 - 1) != System_Collections_IEnumerator_TypeInfo )
      {
        ++v42;
        v43 += 4;
        if ( v42 >= *(unsigned __int16 *)(*(_QWORD *)v40 + 298LL) )
          goto LABEL_17;
      }
      v44 = v41 + 16LL * *v43 + 312;
    }
    else
    {
LABEL_17:
      v44 = sub_AAFEF8(v40, System_Collections_IEnumerator_TypeInfo, 0LL);
    }
    if ( ((*(__int64 (__fastcall **)(__int64, _QWORD))v44)(v40, *(_QWORD *)(v44 + 8)) & 1) == 0 )
      break;
    v45 = *(_QWORD *)v40;
    if ( *(_WORD *)(*(_QWORD *)v40 + 298LL) )
    {
      v46 = 0LL;
      v47 = (int *)(*(_QWORD *)(v45 + 176) + 8LL);
      while ( *((System_Collections_Generic_IEnumerator_RestockServantLogicByMoveToSubMember__c **)v47 - 1) != System_Collections_Generic_IEnumerator_RestockServantLogicByMoveToSubMember__TypeInfo )
      {
        ++v46;
        v47 += 4;
        if ( v46 >= *(unsigned __int16 *)(*(_QWORD *)v40 + 298LL) )
          goto LABEL_24;
      }
      v48 = v45 + 16LL * *v47 + 312;
    }
    else
    {
LABEL_24:
      v48 = sub_AAFEF8(v40, System_Collections_Generic_IEnumerator_RestockServantLogicByMoveToSubMember__TypeInfo, 0LL);
    }
    v49 = (*(__int64 (__fastcall **)(__int64, _QWORD))v48)(v40, *(_QWORD *)(v48 + 8));
    if ( !v49 )
      sub_B170D4();
    v50 = this->fields.data;
    if ( !v50 )
      sub_B170D4();
    ServantData = BattleData__getServantData(v50, *(_DWORD *)(v49 + 28), 0LL);
    v52 = ServantData;
    if ( ServantData && !ServantData->fields.isEntry )
    {
      perf = this->fields.perf;
      if ( !perf )
        sub_B170D4();
      BattlePerformance__unloadDeckActor(perf, *(_DWORD *)(v49 + 20), v52, 0LL);
      if ( !v25 )
        sub_B170D4();
      System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData___Add(
        v25,
        (EventMissionProgressRequest_Argument_ProgressData_o *)v52,
        (const MethodInfo_2F25CD8 *)Method_System_Collections_Generic_List_BattleServantData__Add__);
    }
  }
  v54 = *(_QWORD *)v40;
  if ( *(_WORD *)(*(_QWORD *)v40 + 298LL) )
  {
    v55 = 0LL;
    v56 = (int *)(*(_QWORD *)(v54 + 176) + 8LL);
    while ( *((System_IDisposable_c **)v56 - 1) != System_IDisposable_TypeInfo )
    {
      ++v55;
      v56 += 4;
      if ( v55 >= *(unsigned __int16 *)(*(_QWORD *)v40 + 298LL) )
        goto LABEL_37;
    }
    v57 = v54 + 16LL * *v56 + 312;
  }
  else
  {
LABEL_37:
    v57 = sub_AAFEF8(v40, System_IDisposable_TypeInfo, 0LL);
  }
  (*(void (__fastcall **)(__int64, _QWORD))v57)(v40, *(_QWORD *)(v57 + 8));
  if ( !v25 )
LABEL_45:
    sub_B170D4();
  return (BattleServantData_array *)System_Collections_Generic_List_WarBoardUiData_SaveData___ToArray(
                                      (System_Collections_Generic_List_WarBoardUiData_SaveData__o *)v25,
                                      (const MethodInfo_2F27E24 *)Method_System_Collections_Generic_List_BattleServantData__ToArray__);
}


System_Collections_IEnumerator_o *__fastcall BattleLogic__UnloadUnusedAssetsAndWaitFinish(
        BattleLogic_o *this,
        const MethodInfo *method)
{
  __int64 v2; // x2
  __int64 v3; // x3
  __int64 v4; // x4
  BattleLogic__UnloadUnusedAssetsAndWaitFinish_d__78_o *v5; // x19

  if ( (byte_40F735F & 1) == 0 )
  {
    sub_B16FFC(&BattleLogic__UnloadUnusedAssetsAndWaitFinish_d__78_TypeInfo, method);
    byte_40F735F = 1;
  }
  v5 = (BattleLogic__UnloadUnusedAssetsAndWaitFinish_d__78_o *)sub_B170CC(
                                                                 BattleLogic__UnloadUnusedAssetsAndWaitFinish_d__78_TypeInfo,
                                                                 method,
                                                                 v2,
                                                                 v3,
                                                                 v4);
  BattleLogic__UnloadUnusedAssetsAndWaitFinish_d__78___ctor(v5, 0, 0LL);
  return (System_Collections_IEnumerator_o *)v5;
}


void __fastcall BattleLogic___checkEndBattle_b__185_0(BattleLogic_o *this, const MethodInfo *method)
{
  PlayMakerFSM_o *fsm; // x0

  if ( (byte_40F740D & 1) == 0 )
  {
    sub_B16FFC(&StringLiteral_5630, method);
    byte_40F740D = 1;
  }
  fsm = this->fields.fsm;
  if ( !fsm )
    sub_B170D4();
  PlayMakerFSM__SendEvent(fsm, (System_String_o *)StringLiteral_5630, 0LL);
}


void __fastcall BattleLogic___loadSaveBattle_b__317_0(BattleLogic_o *this, const MethodInfo *method)
{
  PlayMakerFSM_o *fsm; // x0

  if ( (byte_40F740E & 1) == 0 )
  {
    sub_B16FFC(&StringLiteral_5481, method);
    byte_40F740E = 1;
  }
  fsm = this->fields.fsm;
  if ( !fsm )
    sub_B170D4();
  PlayMakerFSM__SendEvent(fsm, (System_String_o *)StringLiteral_5481, 0LL);
}


void __fastcall BattleLogic__actBattleTask(BattleLogic_o *this, const MethodInfo *method)
{
  BattleData_o *data; // x0
  const MethodInfo *v4; // x1

  data = this->fields.data;
  if ( !data )
    sub_B170D4();
  BattleData__clearLastActionActor(data, 0LL);
  this->fields.acttype = 1;
  BattleLogic__checkBattleTask(this, v4);
}


// local variable allocation has failed, the output may be wrong!
void __fastcall BattleLogic__actClassPassiveSkill(BattleLogic_o *this, int32_t uniqueId, const MethodInfo *method)
{
  __int64 v3; // x3
  __int64 v4; // x4
  __int64 v7; // x1
  __int64 v8; // x1
  __int64 v9; // x1
  __int64 v10; // x1
  __int64 v11; // x1
  __int64 v12; // x1
  __int64 v13; // x1
  __int64 v14; // x1
  __int64 v15; // x1
  __int64 v16; // x1
  __int64 v17; // x1
  System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData__o *v18; // x20
  BattleData_o *data; // x0
  BattleServantData_o *ServantData; // x0
  BattleSkillInfoData_array *PassiveSkills; // x0
  EventMissionProgressRequest_Argument_ProgressData_o *v22; // x1
  __int64 v23; // x2
  __int64 v24; // x3
  __int64 v25; // x4
  int max_length; // w8
  BattleSkillInfoData_array *v27; // x21
  unsigned int v28; // w22
  BattleLogic___c_c *v29; // x0
  struct BattleLogic___c_StaticFields *static_fields; // x8
  System_Func_BattleLogicBuff_ReduceHpProcess_BuffInfo__int__o *_9__264_0; // x21
  Il2CppObject *v32; // x22
  struct BattleLogic___c_StaticFields *v33; // x0
  BattleLogicSkill_o *logicSkill; // x0
  System_Collections_Generic_List_Enumerator_T__o v35; // [xsp+8h] [xbp-48h] BYREF

  if ( (byte_40F73D7 & 1) == 0 )
  {
    sub_B16FFC(&Method_BasicHelper_StableSort_BattleSkillInfoData___, *(_QWORD *)&uniqueId);
    sub_B16FFC(&Method_System_Collections_Generic_List_Enumerator_BattleSkillInfoData__Dispose__, v7);
    sub_B16FFC(&Method_System_Collections_Generic_List_Enumerator_BattleSkillInfoData__MoveNext__, v8);
    sub_B16FFC(&Method_System_Collections_Generic_List_Enumerator_BattleSkillInfoData__get_Current__, v9);
    sub_B16FFC(&Method_System_Func_BattleSkillInfoData__int___ctor__, v10);
    sub_B16FFC(&System_Func_BattleSkillInfoData__int__TypeInfo, v11);
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleSkillInfoData__Add__, v12);
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleSkillInfoData__GetEnumerator__, v13);
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleSkillInfoData___ctor__, v14);
    sub_B16FFC(&System_Collections_Generic_List_BattleSkillInfoData__TypeInfo, v15);
    sub_B16FFC(&Method_BattleLogic___c__actClassPassiveSkill_b__264_0__, v16);
    sub_B16FFC(&BattleLogic___c_TypeInfo, v17);
    byte_40F73D7 = 1;
  }
  memset(&v35, 0, sizeof(v35));
  v18 = (System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData__o *)sub_B170CC(
                                                                                                  System_Collections_Generic_List_BattleSkillInfoData__TypeInfo,
                                                                                                  *(_QWORD *)&uniqueId,
                                                                                                  method,
                                                                                                  v3,
                                                                                                  v4);
  System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData____ctor(
    v18,
    (const MethodInfo_2F25014 *)Method_System_Collections_Generic_List_BattleSkillInfoData___ctor__);
  data = this->fields.data;
  if ( !data )
    goto LABEL_29;
  ServantData = BattleData__getServantData(data, uniqueId, 0LL);
  if ( ServantData )
  {
    PassiveSkills = BattleServantData__getPassiveSkills(ServantData, 0LL);
    if ( !PassiveSkills )
      goto LABEL_29;
    max_length = PassiveSkills->max_length;
    v27 = PassiveSkills;
    if ( max_length >= 1 )
    {
      v28 = 0;
      while ( 1 )
      {
        if ( v28 >= max_length )
        {
          sub_B17100(PassiveSkills, v22, v23);
          sub_B170A0();
        }
        v22 = (EventMissionProgressRequest_Argument_ProgressData_o *)v27->m_Items[v28];
        if ( !v22 )
          break;
        if ( v22->fields.missionTargetId == 10 )
        {
          if ( !v18 )
            break;
          System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData___Add(
            v18,
            v22,
            (const MethodInfo_2F25CD8 *)Method_System_Collections_Generic_List_BattleSkillInfoData__Add__);
        }
        max_length = v27->max_length;
        if ( (int)++v28 >= max_length )
          goto LABEL_14;
      }
LABEL_29:
      sub_B170D4();
    }
LABEL_14:
    v29 = BattleLogic___c_TypeInfo;
    if ( (BYTE3(BattleLogic___c_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0
      && !BattleLogic___c_TypeInfo->_2.cctor_finished )
    {
      j_il2cpp_runtime_class_init_0(BattleLogic___c_TypeInfo);
      v29 = BattleLogic___c_TypeInfo;
    }
    static_fields = v29->static_fields;
    _9__264_0 = (System_Func_BattleLogicBuff_ReduceHpProcess_BuffInfo__int__o *)static_fields->__9__264_0;
    if ( !_9__264_0 )
    {
      if ( (BYTE3(v29->vtable._0_Equals.methodPtr) & 4) != 0 && !v29->_2.cctor_finished )
      {
        j_il2cpp_runtime_class_init_0(v29);
        static_fields = BattleLogic___c_TypeInfo->static_fields;
      }
      v32 = (Il2CppObject *)static_fields->__9;
      _9__264_0 = (System_Func_BattleLogicBuff_ReduceHpProcess_BuffInfo__int__o *)sub_B170CC(
                                                                                    System_Func_BattleSkillInfoData__int__TypeInfo,
                                                                                    v22,
                                                                                    v23,
                                                                                    v24,
                                                                                    v25);
      System_Func_BattleLogicBuff_ReduceHpProcess_BuffInfo__int____ctor(
        _9__264_0,
        v32,
        Method_BattleLogic___c__actClassPassiveSkill_b__264_0__,
        (const MethodInfo_2B6B6EC *)Method_System_Func_BattleSkillInfoData__int___ctor__);
      v33 = BattleLogic___c_TypeInfo->static_fields;
      v33->__9__264_0 = (struct System_Func_BattleSkillInfoData__int__o *)_9__264_0;
      sub_B16F98(&v33->__9__264_0, _9__264_0);
    }
    BasicHelper__StableSort_QuestScriptMaterialOverwriteEntity_(
      (System_Collections_Generic_List_T__o *)v18,
      (System_Func_T__int__o *)_9__264_0,
      0,
      (const MethodInfo_18B8BF0 *)Method_BasicHelper_StableSort_BattleSkillInfoData___);
    if ( !v18 )
      goto LABEL_29;
    System_Collections_Generic_List_BattleLogicBuff_ReduceHpProcess_BuffInfo___GetEnumerator(
      &v35,
      (System_Collections_Generic_List_BattleLogicBuff_ReduceHpProcess_BuffInfo__o *)v18,
      (const MethodInfo_2F26B54 *)Method_System_Collections_Generic_List_BattleSkillInfoData__GetEnumerator__);
    while ( System_Collections_Generic_List_Enumerator_BattleLogicBuff_ReduceHpProcess_BuffInfo___MoveNext(
              &v35,
              (const MethodInfo_2074054 *)Method_System_Collections_Generic_List_Enumerator_BattleSkillInfoData__MoveNext__) )
    {
      logicSkill = this->fields.logicSkill;
      if ( !logicSkill )
        sub_B170D4();
      BattleLogicSkill__actPassiveSkill(logicSkill, (BattleSkillInfoData_o *)v35.fields.current, 0, 0, 0LL);
    }
    System_Collections_Generic_List_Enumerator_BattleLogicBuff_ReduceHpProcess_BuffInfo___Dispose(
      &v35,
      (const MethodInfo_2074050 *)Method_System_Collections_Generic_List_Enumerator_BattleSkillInfoData__Dispose__);
  }
}


void __fastcall BattleLogic__actCommandSpell(BattleLogic_o *this, const MethodInfo *method)
{
  struct BattleLogic_CommandSpellData_o *tmp_usecommandspell; // x1
  BattlePerformance_o *perf; // x0
  const MethodInfo *v5; // x1

  tmp_usecommandspell = this->fields.tmp_usecommandspell;
  this->fields.actData = tmp_usecommandspell;
  sub_B16F98(&this->fields.actData, tmp_usecommandspell);
  perf = this->fields.perf;
  if ( !perf )
    sub_B170D4();
  BattlePerformance__playActionSkill(perf, 0LL);
  BattleLogic__startCommandSpellEffect(this, v5);
}


// local variable allocation has failed, the output may be wrong!
void __fastcall BattleLogic__actEnemyPassiveSkill(BattleLogic_o *this, int32_t uniqueId, const MethodInfo *method)
{
  __int64 v3; // x3
  __int64 v4; // x4
  __int64 v7; // x1
  __int64 v8; // x1
  __int64 v9; // x1
  __int64 v10; // x1
  __int64 v11; // x1
  __int64 v12; // x1
  __int64 v13; // x1
  __int64 v14; // x1
  __int64 v15; // x1
  __int64 v16; // x1
  __int64 v17; // x1
  System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData__o *v18; // x20
  BattleData_o *data; // x0
  BattleServantData_o *ServantData; // x0
  System_Collections_Generic_IEnumerable_T__o *PassiveSkills; // x0
  __int64 v22; // x1
  __int64 v23; // x2
  __int64 v24; // x3
  __int64 v25; // x4
  BattleLogic___c_c *v26; // x0
  struct BattleLogic___c_StaticFields *static_fields; // x8
  System_Func_BattleLogicBuff_ReduceHpProcess_BuffInfo__int__o *_9__263_0; // x21
  Il2CppObject *v29; // x22
  struct BattleLogic___c_StaticFields *v30; // x0
  BattleLogicSkill_o *logicSkill; // x0
  System_Collections_Generic_List_Enumerator_T__o v32; // [xsp+8h] [xbp-48h] BYREF

  if ( (byte_40F73D6 & 1) == 0 )
  {
    sub_B16FFC(&Method_BasicHelper_StableSort_BattleSkillInfoData___, *(_QWORD *)&uniqueId);
    sub_B16FFC(&Method_System_Collections_Generic_List_Enumerator_BattleSkillInfoData__Dispose__, v7);
    sub_B16FFC(&Method_System_Collections_Generic_List_Enumerator_BattleSkillInfoData__MoveNext__, v8);
    sub_B16FFC(&Method_System_Collections_Generic_List_Enumerator_BattleSkillInfoData__get_Current__, v9);
    sub_B16FFC(&Method_System_Func_BattleSkillInfoData__int___ctor__, v10);
    sub_B16FFC(&System_Func_BattleSkillInfoData__int__TypeInfo, v11);
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleSkillInfoData__AddRange__, v12);
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleSkillInfoData__GetEnumerator__, v13);
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleSkillInfoData___ctor__, v14);
    sub_B16FFC(&System_Collections_Generic_List_BattleSkillInfoData__TypeInfo, v15);
    sub_B16FFC(&Method_BattleLogic___c__actEnemyPassiveSkill_b__263_0__, v16);
    sub_B16FFC(&BattleLogic___c_TypeInfo, v17);
    byte_40F73D6 = 1;
  }
  memset(&v32, 0, sizeof(v32));
  v18 = (System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData__o *)sub_B170CC(
                                                                                                  System_Collections_Generic_List_BattleSkillInfoData__TypeInfo,
                                                                                                  *(_QWORD *)&uniqueId,
                                                                                                  method,
                                                                                                  v3,
                                                                                                  v4);
  System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData____ctor(
    v18,
    (const MethodInfo_2F25014 *)Method_System_Collections_Generic_List_BattleSkillInfoData___ctor__);
  data = this->fields.data;
  if ( !data )
    goto LABEL_21;
  ServantData = BattleData__getServantData(data, uniqueId, 0LL);
  if ( !ServantData )
    return;
  PassiveSkills = (System_Collections_Generic_IEnumerable_T__o *)BattleServantData__getPassiveSkills(ServantData, 0LL);
  if ( !v18 )
LABEL_21:
    sub_B170D4();
  System_Collections_Generic_List_TimeZoneInfo_AdjustmentRule___AddRange(
    (System_Collections_Generic_List_TimeZoneInfo_AdjustmentRule__o *)v18,
    PassiveSkills,
    (const MethodInfo_2F25F28 *)Method_System_Collections_Generic_List_BattleSkillInfoData__AddRange__);
  v26 = BattleLogic___c_TypeInfo;
  if ( (BYTE3(BattleLogic___c_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0
    && !BattleLogic___c_TypeInfo->_2.cctor_finished )
  {
    j_il2cpp_runtime_class_init_0(BattleLogic___c_TypeInfo);
    v26 = BattleLogic___c_TypeInfo;
  }
  static_fields = v26->static_fields;
  _9__263_0 = (System_Func_BattleLogicBuff_ReduceHpProcess_BuffInfo__int__o *)static_fields->__9__263_0;
  if ( !_9__263_0 )
  {
    if ( (BYTE3(v26->vtable._0_Equals.methodPtr) & 4) != 0 && !v26->_2.cctor_finished )
    {
      j_il2cpp_runtime_class_init_0(v26);
      static_fields = BattleLogic___c_TypeInfo->static_fields;
    }
    v29 = (Il2CppObject *)static_fields->__9;
    _9__263_0 = (System_Func_BattleLogicBuff_ReduceHpProcess_BuffInfo__int__o *)sub_B170CC(
                                                                                  System_Func_BattleSkillInfoData__int__TypeInfo,
                                                                                  v22,
                                                                                  v23,
                                                                                  v24,
                                                                                  v25);
    System_Func_BattleLogicBuff_ReduceHpProcess_BuffInfo__int____ctor(
      _9__263_0,
      v29,
      Method_BattleLogic___c__actEnemyPassiveSkill_b__263_0__,
      (const MethodInfo_2B6B6EC *)Method_System_Func_BattleSkillInfoData__int___ctor__);
    v30 = BattleLogic___c_TypeInfo->static_fields;
    v30->__9__263_0 = (struct System_Func_BattleSkillInfoData__int__o *)_9__263_0;
    sub_B16F98(&v30->__9__263_0, _9__263_0);
  }
  BasicHelper__StableSort_QuestScriptMaterialOverwriteEntity_(
    (System_Collections_Generic_List_T__o *)v18,
    (System_Func_T__int__o *)_9__263_0,
    0,
    (const MethodInfo_18B8BF0 *)Method_BasicHelper_StableSort_BattleSkillInfoData___);
  System_Collections_Generic_List_BattleLogicBuff_ReduceHpProcess_BuffInfo___GetEnumerator(
    &v32,
    (System_Collections_Generic_List_BattleLogicBuff_ReduceHpProcess_BuffInfo__o *)v18,
    (const MethodInfo_2F26B54 *)Method_System_Collections_Generic_List_BattleSkillInfoData__GetEnumerator__);
  while ( System_Collections_Generic_List_Enumerator_BattleLogicBuff_ReduceHpProcess_BuffInfo___MoveNext(
            &v32,
            (const MethodInfo_2074054 *)Method_System_Collections_Generic_List_Enumerator_BattleSkillInfoData__MoveNext__) )
  {
    logicSkill = this->fields.logicSkill;
    if ( !logicSkill )
      sub_B170D4();
    BattleLogicSkill__actPassiveSkill(logicSkill, (BattleSkillInfoData_o *)v32.fields.current, 0, 0, 0LL);
  }
  System_Collections_Generic_List_Enumerator_BattleLogicBuff_ReduceHpProcess_BuffInfo___Dispose(
    &v32,
    (const MethodInfo_2074050 *)Method_System_Collections_Generic_List_Enumerator_BattleSkillInfoData__Dispose__);
}


// local variable allocation has failed, the output may be wrong!
void __fastcall BattleLogic__actEnemyPtPassiveSkill(
        BattleLogic_o *this,
        int32_t actUniqueId,
        bool isShift,
        bool isDataload,
        const MethodInfo *method)
{
  __int64 v9; // x1
  __int64 v10; // x1
  __int64 v11; // x1
  __int64 v12; // x1
  __int64 v13; // x1
  __int64 v14; // x1
  __int64 v15; // x1
  __int64 v16; // x1
  __int64 v17; // x1
  __int64 v18; // x1
  __int64 v19; // x1
  __int64 v20; // x1
  __int64 v21; // x1
  System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData__o *v22; // x23
  __int64 v23; // x2
  __int64 v24; // x0
  _DWORD *v25; // x20
  _DWORD *ServantData; // x0
  __int64 v27; // x1
  __int64 v28; // x2
  _DWORD *v29; // x24
  __int64 v30; // x3
  __int64 v31; // x4
  BattleData_o *data; // x0
  int v33; // w8
  unsigned int v34; // w24
  BattleServantData_o *v35; // x0
  System_Collections_Generic_IEnumerable_T__o *PassiveSkills; // x0
  BattleLogic___c_c *v37; // x0
  struct BattleLogic___c_StaticFields *static_fields; // x8
  System_Func_BattleLogicBuff_ReduceHpProcess_BuffInfo__int__o *_9__262_0; // x24
  Il2CppObject *v40; // x25
  struct BattleLogic___c_StaticFields *v41; // x0
  bool v42; // w22
  Il2CppObject *current; // x23
  struct BattleData_o *v44; // x8
  struct BaseBattleEvent_o *battleEvent; // x0
  BattleLogicSkill_o *logicSkill; // x0
  int v47; // w8
  __int64 v48; // x21
  __int64 v49; // x8
  __int64 v50; // x8
  System_Collections_Generic_List_int__o *v51; // x0
  BattleData_o *v52; // x0
  int v53; // w8
  _DWORD *v54; // x19
  unsigned int v55; // w20
  __int64 v56; // x8
  __int64 v57; // x8
  System_Collections_Generic_List_int__o *v58; // x0
  System_Collections_Generic_List_Enumerator_T__o v59; // [xsp+8h] [xbp-78h] BYREF
  System_Collections_Generic_List_Enumerator_T__o v60; // [xsp+20h] [xbp-60h] BYREF

  if ( (byte_40F73D5 & 1) == 0 )
  {
    sub_B16FFC(&Method_BasicHelper_StableSort_BattleSkillInfoData___, *(_QWORD *)&actUniqueId);
    sub_B16FFC(&BattleServantData___TypeInfo, v9);
    sub_B16FFC(&Method_System_Collections_Generic_List_Enumerator_BattleSkillInfoData__Dispose__, v10);
    sub_B16FFC(&Method_System_Collections_Generic_List_Enumerator_BattleSkillInfoData__MoveNext__, v11);
    sub_B16FFC(&Method_System_Collections_Generic_List_Enumerator_BattleSkillInfoData__get_Current__, v12);
    sub_B16FFC(&Method_System_Func_BattleSkillInfoData__int___ctor__, v13);
    sub_B16FFC(&System_Func_BattleSkillInfoData__int__TypeInfo, v14);
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleSkillInfoData__AddRange__, v15);
    sub_B16FFC(&Method_System_Collections_Generic_List_int__Clear__, v16);
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleSkillInfoData__GetEnumerator__, v17);
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleSkillInfoData___ctor__, v18);
    sub_B16FFC(&System_Collections_Generic_List_BattleSkillInfoData__TypeInfo, v19);
    sub_B16FFC(&Method_BattleLogic___c__actEnemyPtPassiveSkill_b__262_0__, v20);
    sub_B16FFC(&BattleLogic___c_TypeInfo, v21);
    byte_40F73D5 = 1;
  }
  memset(&v60, 0, sizeof(v60));
  v22 = (System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData__o *)sub_B170CC(
                                                                                                  System_Collections_Generic_List_BattleSkillInfoData__TypeInfo,
                                                                                                  *(_QWORD *)&actUniqueId,
                                                                                                  isShift,
                                                                                                  isDataload,
                                                                                                  method);
  System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData____ctor(
    v22,
    (const MethodInfo_2F25014 *)Method_System_Collections_Generic_List_BattleSkillInfoData___ctor__);
  if ( actUniqueId )
  {
    v24 = sub_B17014(BattleServantData___TypeInfo, 1LL, v23);
    if ( !this->fields.data )
      goto LABEL_52;
    v25 = (_DWORD *)v24;
    ServantData = BattleData__getServantData(this->fields.data, actUniqueId, 0LL);
    if ( !v25 )
      goto LABEL_52;
    v29 = ServantData;
    if ( ServantData )
    {
      ServantData = (_DWORD *)sub_B170BC(ServantData, *(_QWORD *)(*(_QWORD *)v25 + 64LL));
      if ( !ServantData )
      {
        sub_B170F4();
        sub_B170A0();
      }
    }
    if ( !v25[6] )
      goto LABEL_53;
    *((_QWORD *)v25 + 4) = v29;
    sub_B16F98(v25 + 8, v29);
  }
  else
  {
    data = this->fields.data;
    if ( !data )
      goto LABEL_52;
    ServantData = BattleData__getEnemyServantList(data, 0LL);
    v25 = ServantData;
    if ( !ServantData )
      goto LABEL_52;
  }
  v33 = v25[6];
  if ( v33 >= 1 )
  {
    v34 = 0;
    while ( v34 < v33 )
    {
      v35 = *(BattleServantData_o **)&v25[2 * v34 + 8];
      if ( !v35 )
        goto LABEL_52;
      PassiveSkills = (System_Collections_Generic_IEnumerable_T__o *)BattleServantData__getPassiveSkills(v35, 0LL);
      if ( !v22 )
        goto LABEL_52;
      System_Collections_Generic_List_TimeZoneInfo_AdjustmentRule___AddRange(
        (System_Collections_Generic_List_TimeZoneInfo_AdjustmentRule__o *)v22,
        PassiveSkills,
        (const MethodInfo_2F25F28 *)Method_System_Collections_Generic_List_BattleSkillInfoData__AddRange__);
      v33 = v25[6];
      if ( (int)++v34 >= v33 )
        goto LABEL_18;
    }
LABEL_53:
    sub_B17100(ServantData, v27, v28);
    sub_B170A0();
  }
LABEL_18:
  v37 = BattleLogic___c_TypeInfo;
  if ( (BYTE3(BattleLogic___c_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0
    && !BattleLogic___c_TypeInfo->_2.cctor_finished )
  {
    j_il2cpp_runtime_class_init_0(BattleLogic___c_TypeInfo);
    v37 = BattleLogic___c_TypeInfo;
  }
  static_fields = v37->static_fields;
  _9__262_0 = (System_Func_BattleLogicBuff_ReduceHpProcess_BuffInfo__int__o *)static_fields->__9__262_0;
  if ( !_9__262_0 )
  {
    if ( (BYTE3(v37->vtable._0_Equals.methodPtr) & 4) != 0 && !v37->_2.cctor_finished )
    {
      j_il2cpp_runtime_class_init_0(v37);
      static_fields = BattleLogic___c_TypeInfo->static_fields;
    }
    v40 = (Il2CppObject *)static_fields->__9;
    _9__262_0 = (System_Func_BattleLogicBuff_ReduceHpProcess_BuffInfo__int__o *)sub_B170CC(
                                                                                  System_Func_BattleSkillInfoData__int__TypeInfo,
                                                                                  v27,
                                                                                  v28,
                                                                                  v30,
                                                                                  v31);
    System_Func_BattleLogicBuff_ReduceHpProcess_BuffInfo__int____ctor(
      _9__262_0,
      v40,
      Method_BattleLogic___c__actEnemyPtPassiveSkill_b__262_0__,
      (const MethodInfo_2B6B6EC *)Method_System_Func_BattleSkillInfoData__int___ctor__);
    v41 = BattleLogic___c_TypeInfo->static_fields;
    v41->__9__262_0 = (struct System_Func_BattleSkillInfoData__int__o *)_9__262_0;
    sub_B16F98(&v41->__9__262_0, _9__262_0);
  }
  BasicHelper__StableSort_QuestScriptMaterialOverwriteEntity_(
    (System_Collections_Generic_List_T__o *)v22,
    (System_Func_T__int__o *)_9__262_0,
    0,
    (const MethodInfo_18B8BF0 *)Method_BasicHelper_StableSort_BattleSkillInfoData___);
  if ( !v22 )
    goto LABEL_52;
  System_Collections_Generic_List_BattleLogicBuff_ReduceHpProcess_BuffInfo___GetEnumerator(
    &v59,
    (System_Collections_Generic_List_BattleLogicBuff_ReduceHpProcess_BuffInfo__o *)v22,
    (const MethodInfo_2F26B54 *)Method_System_Collections_Generic_List_BattleSkillInfoData__GetEnumerator__);
  v60 = v59;
  v42 = isShift;
  while ( System_Collections_Generic_List_Enumerator_BattleLogicBuff_ReduceHpProcess_BuffInfo___MoveNext(
            &v60,
            (const MethodInfo_2074054 *)Method_System_Collections_Generic_List_Enumerator_BattleSkillInfoData__MoveNext__) )
  {
    current = v60.fields.current;
    if ( isDataload )
    {
      v44 = this->fields.data;
      if ( !v44 )
        sub_B170D4();
      battleEvent = v44->fields.battleEvent;
      if ( !battleEvent )
        sub_B170D4();
      if ( (((__int64 (__fastcall *)(struct BaseBattleEvent_o *, Il2CppObject *, Il2CppMethodPointer))battleEvent->klass->vtable._22_IsActionPassiveSkillOnBattle.method)(
              battleEvent,
              v60.fields.current,
              battleEvent->klass->vtable._23_SetServantDataAfterPassiveAdded.methodPtr) & 1) == 0 )
        continue;
    }
    logicSkill = this->fields.logicSkill;
    if ( !logicSkill )
      sub_B170D4();
    BattleLogicSkill__actPassiveSkill(logicSkill, (BattleSkillInfoData_o *)current, v42, isDataload, 0LL);
  }
  System_Collections_Generic_List_Enumerator_BattleLogicBuff_ReduceHpProcess_BuffInfo___Dispose(
    &v60,
    (const MethodInfo_2074050 *)Method_System_Collections_Generic_List_Enumerator_BattleSkillInfoData__Dispose__);
  v47 = v25[6];
  if ( v47 >= 1 )
  {
    v48 = 0LL;
    while ( (unsigned int)v48 < v47 )
    {
      v49 = *(_QWORD *)&v25[2 * v48 + 8];
      if ( !v49 )
        goto LABEL_52;
      v50 = *(_QWORD *)(v49 + 736);
      if ( !v50 )
        goto LABEL_52;
      v51 = *(System_Collections_Generic_List_int__o **)(v50 + 72);
      if ( !v51 )
        goto LABEL_52;
      System_Collections_Generic_List_int___Clear(
        v51,
        (const MethodInfo_2F108FC *)Method_System_Collections_Generic_List_int__Clear__);
      v47 = v25[6];
      if ( (int)++v48 >= v47 )
        goto LABEL_42;
    }
    goto LABEL_53;
  }
LABEL_42:
  v52 = this->fields.data;
  if ( !v52 || (ServantData = BattleData__getPlayerServantList(v52, 0LL)) == 0LL )
LABEL_52:
    sub_B170D4();
  v53 = ServantData[6];
  v54 = ServantData;
  if ( v53 >= 1 )
  {
    v55 = 0;
    while ( v55 < v53 )
    {
      v56 = *(_QWORD *)&v54[2 * v55 + 8];
      if ( !v56 )
        goto LABEL_52;
      v57 = *(_QWORD *)(v56 + 736);
      if ( !v57 )
        goto LABEL_52;
      v58 = *(System_Collections_Generic_List_int__o **)(v57 + 72);
      if ( !v58 )
        goto LABEL_52;
      System_Collections_Generic_List_int___Clear(
        v58,
        (const MethodInfo_2F108FC *)Method_System_Collections_Generic_List_int__Clear__);
      v53 = v54[6];
      if ( (int)++v55 >= v53 )
        return;
    }
    goto LABEL_53;
  }
}


void __fastcall BattleLogic__actOneBattleTask(
        BattleLogic_o *this,
        BattleLogicTask_array *tasklist,
        const MethodInfo *method)
{
  __int64 v5; // x1
  __int64 v6; // x1
  __int64 v7; // x8
  System_Collections_Generic_LinkedList_WebOperation__o *list_logic; // x0
  unsigned __int64 v9; // x21
  PlayMakerFSM_o *fsm; // x0

  if ( (byte_40F737F & 1) == 0 )
  {
    sub_B16FFC(&Method_System_Collections_Generic_LinkedList_BattleLogicTask__AddLast__, tasklist);
    sub_B16FFC(&Method_System_Collections_Generic_LinkedList_BattleLogicTask__get_Count__, v5);
    sub_B16FFC(&StringLiteral_5481, v6);
    byte_40F737F = 1;
  }
  this->fields.acttype = 2;
  if ( !tasklist )
    goto LABEL_14;
  v7 = *(_QWORD *)&tasklist->max_length;
  list_logic = (System_Collections_Generic_LinkedList_WebOperation__o *)this->fields.list_logic;
  if ( (int)v7 >= 1 )
  {
    v9 = 0LL;
    while ( 1 )
    {
      if ( v9 >= (unsigned int)v7 )
      {
        sub_B17100(list_logic, tasklist, method);
        sub_B170A0();
      }
      if ( !list_logic )
        break;
      System_Collections_Generic_LinkedList_WebOperation___AddLast(
        list_logic,
        (System_Net_WebOperation_o *)tasklist->m_Items[v9],
        (const MethodInfo_23FD6D4 *)Method_System_Collections_Generic_LinkedList_BattleLogicTask__AddLast__);
      LODWORD(v7) = tasklist->max_length;
      list_logic = (System_Collections_Generic_LinkedList_WebOperation__o *)this->fields.list_logic;
      if ( (__int64)++v9 >= (int)v7 )
        goto LABEL_9;
    }
LABEL_14:
    sub_B170D4();
  }
LABEL_9:
  if ( !list_logic )
    goto LABEL_14;
  if ( list_logic->fields.count >= 1 )
  {
    fsm = this->fields.fsm;
    if ( !fsm )
      goto LABEL_14;
    PlayMakerFSM__SendEvent(fsm, (System_String_o *)StringLiteral_5481, 0LL);
  }
  BattleLogic__playTaskBattle(this, (const MethodInfo *)tasklist);
}


// local variable allocation has failed, the output may be wrong!
void __fastcall BattleLogic__actPtPassiveSkill(BattleLogic_o *this, bool isAddAiNpc, const MethodInfo *method)
{
  __int64 v3; // x3
  __int64 v4; // x4
  __int64 v7; // x1
  __int64 v8; // x1
  __int64 v9; // x1
  __int64 v10; // x1
  __int64 v11; // x1
  __int64 v12; // x1
  __int64 v13; // x1
  __int64 v14; // x1
  __int64 v15; // x1
  __int64 v16; // x1
  __int64 v17; // x1
  __int64 v18; // x1
  __int64 v19; // x1
  __int64 v20; // x1
  __int64 v21; // x1
  __int64 v22; // x1
  __int64 v23; // x1
  __int64 v24; // x1
  __int64 v25; // x1
  __int64 v26; // x1
  System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData__o *v27; // x21
  BattleData_o *data; // x0
  System_Collections_Generic_IEnumerable_T__o *PlayerServantList; // x23
  __int64 v30; // x1
  __int64 v31; // x2
  __int64 v32; // x3
  __int64 v33; // x4
  System_Collections_Generic_List_WarBoardAIRoute_RouteData__o *v34; // x20
  struct BattleData_o *v35; // x8
  System_Collections_Generic_List_WarBoardUiData_SaveData__o *aiNpcDataList; // x0
  System_Collections_Generic_IEnumerable_T__o *v37; // x0
  System_Collections_Generic_IEnumerable_T__o *PassiveSkills; // x1
  __int64 v39; // x1
  __int64 v40; // x2
  __int64 v41; // x3
  __int64 v42; // x4
  BattleLogic___c_c *v43; // x0
  struct BattleLogic___c_StaticFields *static_fields; // x8
  System_Func_BattleLogicBuff_ReduceHpProcess_BuffInfo__int__o *_9__261_0; // x22
  Il2CppObject *v46; // x23
  struct BattleLogic___c_StaticFields *v47; // x0
  struct BattleData_o *v48; // x8
  struct BaseBattleEvent_o *battleEvent; // x0
  Il2CppObject *current; // x21
  BattleLogicSkill_o *logicSkill; // x0
  int v52; // w22
  int v53; // w8
  Il2CppClass *klass; // x8
  System_Collections_Generic_List_int__o *castClass; // x0
  int v56; // w22
  BattleData_o *v57; // x0
  BattleServantData_array *EnemyServantList; // x0
  __int64 v59; // x1
  __int64 v60; // x2
  int max_length; // w8
  BattleServantData_array *v62; // x19
  unsigned int v63; // w20
  BattleServantData_o *v64; // x8
  struct BattleBuffData_o *buffData; // x8
  System_Collections_Generic_List_int__o *unfixedBuffList; // x0
  System_Collections_Generic_List_Enumerator_T__o v67; // [xsp+8h] [xbp-A8h] BYREF
  int v68[3]; // [xsp+20h] [xbp-90h]
  int v69; // [xsp+2Ch] [xbp-84h]
  System_Collections_Generic_List_Enumerator_T__o v70; // [xsp+30h] [xbp-80h] BYREF
  System_Collections_Generic_List_Enumerator_T__o v71; // [xsp+50h] [xbp-60h] BYREF

  if ( (byte_40F73D4 & 1) == 0 )
  {
    sub_B16FFC(&Method_BasicHelper_StableSort_BattleSkillInfoData___, isAddAiNpc);
    sub_B16FFC(&Method_System_Collections_Generic_List_Enumerator_BattleServantData__Dispose__, v7);
    sub_B16FFC(&Method_System_Collections_Generic_List_Enumerator_BattleSkillInfoData__Dispose__, v8);
    sub_B16FFC(&Method_System_Collections_Generic_List_Enumerator_BattleServantData__MoveNext__, v9);
    sub_B16FFC(&Method_System_Collections_Generic_List_Enumerator_BattleSkillInfoData__MoveNext__, v10);
    sub_B16FFC(&Method_System_Collections_Generic_List_Enumerator_BattleSkillInfoData__get_Current__, v11);
    sub_B16FFC(&Method_System_Collections_Generic_List_Enumerator_BattleServantData__get_Current__, v12);
    sub_B16FFC(&Method_System_Func_BattleSkillInfoData__int___ctor__, v13);
    sub_B16FFC(&System_Func_BattleSkillInfoData__int__TypeInfo, v14);
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleSkillInfoData__AddRange__, v15);
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleServantData__AddRange__, v16);
    sub_B16FFC(&Method_System_Collections_Generic_List_int__Clear__, v17);
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleSkillInfoData__GetEnumerator__, v18);
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleServantData__GetEnumerator__, v19);
    sub_B16FFC(&Method_System_Collections_Generic_List_AiNpcBattleServantData__ToArray__, v20);
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleServantData___ctor___66726784, v21);
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleSkillInfoData___ctor__, v22);
    sub_B16FFC(&System_Collections_Generic_List_BattleServantData__TypeInfo, v23);
    sub_B16FFC(&System_Collections_Generic_List_BattleSkillInfoData__TypeInfo, v24);
    sub_B16FFC(&Method_BattleLogic___c__actPtPassiveSkill_b__261_0__, v25);
    sub_B16FFC(&BattleLogic___c_TypeInfo, v26);
    byte_40F73D4 = 1;
  }
  memset(&v71, 0, sizeof(v71));
  memset(&v70, 0, sizeof(v70));
  v69 = 0;
  v27 = (System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData__o *)sub_B170CC(
                                                                                                  System_Collections_Generic_List_BattleSkillInfoData__TypeInfo,
                                                                                                  isAddAiNpc,
                                                                                                  method,
                                                                                                  v3,
                                                                                                  v4);
  System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData____ctor(
    v27,
    (const MethodInfo_2F25014 *)Method_System_Collections_Generic_List_BattleSkillInfoData___ctor__);
  data = this->fields.data;
  if ( !data )
    goto LABEL_53;
  PlayerServantList = (System_Collections_Generic_IEnumerable_T__o *)BattleData__getPlayerServantList(data, 0LL);
  v34 = (System_Collections_Generic_List_WarBoardAIRoute_RouteData__o *)sub_B170CC(
                                                                          System_Collections_Generic_List_BattleServantData__TypeInfo,
                                                                          v30,
                                                                          v31,
                                                                          v32,
                                                                          v33);
  System_Collections_Generic_List_WarBoardAIRoute_RouteData____ctor(
    v34,
    PlayerServantList,
    (const MethodInfo_2F2520C *)Method_System_Collections_Generic_List_BattleServantData___ctor___66726784);
  if ( isAddAiNpc )
  {
    v35 = this->fields.data;
    if ( !v35 )
      goto LABEL_53;
    aiNpcDataList = (System_Collections_Generic_List_WarBoardUiData_SaveData__o *)v35->fields.aiNpcDataList;
    if ( !aiNpcDataList )
      goto LABEL_53;
    v37 = (System_Collections_Generic_IEnumerable_T__o *)System_Collections_Generic_List_WarBoardUiData_SaveData___ToArray(
                                                           aiNpcDataList,
                                                           (const MethodInfo_2F27E24 *)Method_System_Collections_Generic_List_AiNpcBattleServantData__ToArray__);
    if ( !v34 )
      goto LABEL_53;
    System_Collections_Generic_List_TimeZoneInfo_AdjustmentRule___AddRange(
      (System_Collections_Generic_List_TimeZoneInfo_AdjustmentRule__o *)v34,
      v37,
      (const MethodInfo_2F25F28 *)Method_System_Collections_Generic_List_BattleServantData__AddRange__);
  }
  else if ( !v34 )
  {
    goto LABEL_53;
  }
  System_Collections_Generic_List_BattleLogicBuff_ReduceHpProcess_BuffInfo___GetEnumerator(
    &v67,
    (System_Collections_Generic_List_BattleLogicBuff_ReduceHpProcess_BuffInfo__o *)v34,
    (const MethodInfo_2F26B54 *)Method_System_Collections_Generic_List_BattleServantData__GetEnumerator__);
  v71 = v67;
  while ( System_Collections_Generic_List_Enumerator_BattleLogicBuff_ReduceHpProcess_BuffInfo___MoveNext(
            &v71,
            (const MethodInfo_2074054 *)Method_System_Collections_Generic_List_Enumerator_BattleServantData__MoveNext__) )
  {
    if ( !v71.fields.current )
      sub_B170D4();
    PassiveSkills = (System_Collections_Generic_IEnumerable_T__o *)BattleServantData__getPassiveSkills(
                                                                     (BattleServantData_o *)v71.fields.current,
                                                                     0LL);
    if ( !v27 )
      sub_B170D4();
    System_Collections_Generic_List_TimeZoneInfo_AdjustmentRule___AddRange(
      (System_Collections_Generic_List_TimeZoneInfo_AdjustmentRule__o *)v27,
      PassiveSkills,
      (const MethodInfo_2F25F28 *)Method_System_Collections_Generic_List_BattleSkillInfoData__AddRange__);
  }
  v68[0] = 102;
  v69 = 1;
  System_Collections_Generic_List_Enumerator_BattleLogicBuff_ReduceHpProcess_BuffInfo___Dispose(
    &v71,
    (const MethodInfo_2074050 *)Method_System_Collections_Generic_List_Enumerator_BattleServantData__Dispose__);
  v69 = 0;
  v43 = BattleLogic___c_TypeInfo;
  if ( (BYTE3(BattleLogic___c_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0
    && !BattleLogic___c_TypeInfo->_2.cctor_finished )
  {
    j_il2cpp_runtime_class_init_0(BattleLogic___c_TypeInfo);
    v43 = BattleLogic___c_TypeInfo;
  }
  static_fields = v43->static_fields;
  _9__261_0 = (System_Func_BattleLogicBuff_ReduceHpProcess_BuffInfo__int__o *)static_fields->__9__261_0;
  if ( !_9__261_0 )
  {
    if ( (BYTE3(v43->vtable._0_Equals.methodPtr) & 4) != 0 && !v43->_2.cctor_finished )
    {
      j_il2cpp_runtime_class_init_0(v43);
      static_fields = BattleLogic___c_TypeInfo->static_fields;
    }
    v46 = (Il2CppObject *)static_fields->__9;
    _9__261_0 = (System_Func_BattleLogicBuff_ReduceHpProcess_BuffInfo__int__o *)sub_B170CC(
                                                                                  System_Func_BattleSkillInfoData__int__TypeInfo,
                                                                                  v39,
                                                                                  v40,
                                                                                  v41,
                                                                                  v42);
    System_Func_BattleLogicBuff_ReduceHpProcess_BuffInfo__int____ctor(
      _9__261_0,
      v46,
      Method_BattleLogic___c__actPtPassiveSkill_b__261_0__,
      (const MethodInfo_2B6B6EC *)Method_System_Func_BattleSkillInfoData__int___ctor__);
    v47 = BattleLogic___c_TypeInfo->static_fields;
    v47->__9__261_0 = (struct System_Func_BattleSkillInfoData__int__o *)_9__261_0;
    sub_B16F98(&v47->__9__261_0, _9__261_0);
  }
  BasicHelper__StableSort_QuestScriptMaterialOverwriteEntity_(
    (System_Collections_Generic_List_T__o *)v27,
    (System_Func_T__int__o *)_9__261_0,
    0,
    (const MethodInfo_18B8BF0 *)Method_BasicHelper_StableSort_BattleSkillInfoData___);
  if ( !v27 )
    goto LABEL_53;
  System_Collections_Generic_List_BattleLogicBuff_ReduceHpProcess_BuffInfo___GetEnumerator(
    &v67,
    (System_Collections_Generic_List_BattleLogicBuff_ReduceHpProcess_BuffInfo__o *)v27,
    (const MethodInfo_2F26B54 *)Method_System_Collections_Generic_List_BattleSkillInfoData__GetEnumerator__);
  v70 = v67;
  while ( System_Collections_Generic_List_Enumerator_BattleLogicBuff_ReduceHpProcess_BuffInfo___MoveNext(
            &v70,
            (const MethodInfo_2074054 *)Method_System_Collections_Generic_List_Enumerator_BattleSkillInfoData__MoveNext__) )
  {
    v48 = this->fields.data;
    if ( !v48 )
      sub_B170D4();
    battleEvent = v48->fields.battleEvent;
    if ( !battleEvent )
      sub_B170D4();
    current = v70.fields.current;
    if ( (((__int64 (__fastcall *)(struct BaseBattleEvent_o *, Il2CppObject *, Il2CppMethodPointer))battleEvent->klass->vtable._22_IsActionPassiveSkillOnBattle.method)(
            battleEvent,
            v70.fields.current,
            battleEvent->klass->vtable._23_SetServantDataAfterPassiveAdded.methodPtr) & 1) != 0 )
    {
      logicSkill = this->fields.logicSkill;
      if ( !logicSkill )
        sub_B170D4();
      BattleLogicSkill__actPassiveSkill(logicSkill, (BattleSkillInfoData_o *)current, 0, 1, 0LL);
    }
  }
  v68[0] = 220;
  v52 = ++v69;
  System_Collections_Generic_List_Enumerator_BattleLogicBuff_ReduceHpProcess_BuffInfo___Dispose(
    &v70,
    (const MethodInfo_2074050 *)Method_System_Collections_Generic_List_Enumerator_BattleSkillInfoData__Dispose__);
  if ( v52 )
  {
    v53 = v52 - 1;
    if ( v68[v52 - 1] == 220 )
    {
      --v52;
      v69 = v53;
    }
  }
  System_Collections_Generic_List_BattleLogicBuff_ReduceHpProcess_BuffInfo___GetEnumerator(
    &v67,
    (System_Collections_Generic_List_BattleLogicBuff_ReduceHpProcess_BuffInfo__o *)v34,
    (const MethodInfo_2F26B54 *)Method_System_Collections_Generic_List_BattleServantData__GetEnumerator__);
  v71 = v67;
  while ( System_Collections_Generic_List_Enumerator_BattleLogicBuff_ReduceHpProcess_BuffInfo___MoveNext(
            &v71,
            (const MethodInfo_2074054 *)Method_System_Collections_Generic_List_Enumerator_BattleServantData__MoveNext__) )
  {
    if ( !v71.fields.current )
      sub_B170D4();
    klass = v71.fields.current[46].klass;
    if ( !klass )
      sub_B170D4();
    castClass = (System_Collections_Generic_List_int__o *)klass->_1.castClass;
    if ( !castClass )
      sub_B170D4();
    System_Collections_Generic_List_int___Clear(
      castClass,
      (const MethodInfo_2F108FC *)Method_System_Collections_Generic_List_int__Clear__);
  }
  v68[v52] = 276;
  v56 = ++v69;
  System_Collections_Generic_List_Enumerator_BattleLogicBuff_ReduceHpProcess_BuffInfo___Dispose(
    &v71,
    (const MethodInfo_2074050 *)Method_System_Collections_Generic_List_Enumerator_BattleServantData__Dispose__);
  if ( v56 && v68[v56 - 1] == 276 )
    v69 = v56 - 1;
  v57 = this->fields.data;
  if ( !v57 || (EnemyServantList = BattleData__getEnemyServantList(v57, 0LL)) == 0LL )
LABEL_53:
    sub_B170D4();
  max_length = EnemyServantList->max_length;
  v62 = EnemyServantList;
  if ( max_length >= 1 )
  {
    v63 = 0;
    while ( 1 )
    {
      if ( v63 >= max_length )
      {
        sub_B17100(EnemyServantList, v59, v60);
        sub_B170A0();
      }
      v64 = v62->m_Items[v63];
      if ( !v64 )
        break;
      buffData = v64->fields.buffData;
      if ( !buffData )
        break;
      unfixedBuffList = buffData->fields.unfixedBuffList;
      if ( !unfixedBuffList )
        break;
      System_Collections_Generic_List_int___Clear(
        unfixedBuffList,
        (const MethodInfo_2F108FC *)Method_System_Collections_Generic_List_int__Clear__);
      max_length = v62->max_length;
      if ( (int)++v63 >= max_length )
        return;
    }
    goto LABEL_53;
  }
}


// local variable allocation has failed, the output may be wrong!
void __fastcall BattleLogic__addBackStepActionData(
        BattleLogic_o *this,
        int32_t actorId,
        float waitTime,
        const MethodInfo *method)
{
  BattleLogicNomal_o *logicnomal; // x0
  BattlePerformance_o *perf; // x21
  BattleActionData_o *BackStep; // x0
  BattlePerformance_o *v10; // x19
  __int64 v11; // x1
  __int64 v12; // x2
  __int64 v13; // x3
  __int64 v14; // x4
  BattleLogicTask_o *v15; // x20
  BattleLogic_o *v16; // x0
  const MethodInfo *v17; // x2
  BattleActionData_o *System; // x0

  if ( (byte_40F738D & 1) == 0 )
  {
    sub_B16FFC(&BattleLogicTask_TypeInfo, *(_QWORD *)&actorId);
    byte_40F738D = 1;
  }
  logicnomal = this->fields.logicnomal;
  if ( !logicnomal )
    goto LABEL_8;
  perf = this->fields.perf;
  BackStep = BattleLogicNomal__createBackStep(logicnomal, actorId, 0LL);
  if ( !perf
    || (BattlePerformance__addActionData_18918748(perf, BackStep, 0LL),
        v10 = this->fields.perf,
        v15 = (BattleLogicTask_o *)sub_B170CC(BattleLogicTask_TypeInfo, v11, v12, v13, v14),
        BattleLogicTask___ctor(v15, 0LL),
        !v15)
    || (v15->fields.systemTime = waitTime, System = BattleLogic__createSystem(v16, v15, v17), !v10) )
  {
LABEL_8:
    sub_B170D4();
  }
  BattlePerformance__addActionData_18918748(v10, System, 0LL);
}


void __fastcall BattleLogic__addBattleLogicTask(
        BattleLogic_o *this,
        BattleLogicTask_array *tasklist,
        const MethodInfo *method)
{
  BattleLogic_o *v4; // x20
  __int64 v5; // x8
  unsigned __int64 v6; // x21
  System_Collections_Generic_LinkedList_WebOperation__o *list_logic; // x0

  v4 = this;
  if ( (byte_40F7382 & 1) == 0 )
  {
    this = (BattleLogic_o *)sub_B16FFC(
                              &Method_System_Collections_Generic_LinkedList_BattleLogicTask__AddLast__,
                              tasklist);
    byte_40F7382 = 1;
  }
  if ( !tasklist )
    goto LABEL_11;
  v5 = *(_QWORD *)&tasklist->max_length;
  if ( (int)v5 >= 1 )
  {
    v6 = 0LL;
    while ( 1 )
    {
      if ( v6 >= (unsigned int)v5 )
      {
        sub_B17100(this, tasklist, method);
        sub_B170A0();
      }
      list_logic = (System_Collections_Generic_LinkedList_WebOperation__o *)v4->fields.list_logic;
      if ( !list_logic )
        break;
      this = (BattleLogic_o *)System_Collections_Generic_LinkedList_WebOperation___AddLast(
                                list_logic,
                                (System_Net_WebOperation_o *)tasklist->m_Items[v6],
                                (const MethodInfo_23FD6D4 *)Method_System_Collections_Generic_LinkedList_BattleLogicTask__AddLast__);
      LODWORD(v5) = tasklist->max_length;
      if ( (__int64)++v6 >= (int)v5 )
        return;
    }
LABEL_11:
    sub_B170D4();
  }
}


void __fastcall BattleLogic__addEnemyActPriorityList(
        BattleLogic_o *this,
        BattleServantData_o *svtData,
        const MethodInfo *method)
{
  BattleLogicEnemyAi_o *logicEnemyAi; // x0

  logicEnemyAi = this->fields.logicEnemyAi;
  if ( !logicEnemyAi )
    sub_B170D4();
  BattleLogicEnemyAi__addEnemyActPriorityList(logicEnemyAi, svtData, 0LL);
}


// local variable allocation has failed, the output may be wrong!
BattleLogicTask_array *__fastcall BattleLogic__afterImmediateEntry(
        BattleLogic_o *this,
        int32_t ltype,
        BattleData_o *data,
        const MethodInfo *method)
{
  __int64 v5; // x1
  __int64 v6; // x1
  __int64 v7; // x1
  struct BattleData_o *v8; // x8
  QuestEntity_o *quest_ent; // x0
  __int64 v10; // x1
  __int64 v11; // x2
  __int64 v12; // x3
  __int64 v13; // x4
  System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData__o *v14; // x20
  BattlePerformance_o *perf; // x0

  if ( (byte_40F739D & 1) == 0 )
  {
    sub_B16FFC(&BattleLogicTask___TypeInfo, *(_QWORD *)&ltype);
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleLogicTask__ToArray__, v5);
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleLogicTask___ctor__, v6);
    sub_B16FFC(&System_Collections_Generic_List_BattleLogicTask__TypeInfo, v7);
    byte_40F739D = 1;
  }
  v8 = this->fields.data;
  if ( !v8 )
    goto LABEL_11;
  quest_ent = v8->fields.quest_ent;
  if ( !quest_ent )
    goto LABEL_11;
  if ( QuestEntity__HasFlag(quest_ent, 0x40000000000000LL, 0LL) && this->fields.isPlayImmediateEntry )
  {
    this->fields.isPlayImmediateEntry = 0;
    v14 = (System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData__o *)sub_B170CC(
                                                                                                    System_Collections_Generic_List_BattleLogicTask__TypeInfo,
                                                                                                    v10,
                                                                                                    v11,
                                                                                                    v12,
                                                                                                    v13);
    System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData____ctor(
      v14,
      (const MethodInfo_2F25014 *)Method_System_Collections_Generic_List_BattleLogicTask___ctor__);
    perf = this->fields.perf;
    if ( perf )
    {
      BattlePerformance__setImmidianteEntryPos(perf, 0LL);
      if ( v14 )
        return (BattleLogicTask_array *)System_Collections_Generic_List_WarBoardUiData_SaveData___ToArray(
                                          (System_Collections_Generic_List_WarBoardUiData_SaveData__o *)v14,
                                          (const MethodInfo_2F27E24 *)Method_System_Collections_Generic_List_BattleLogicTask__ToArray__);
    }
LABEL_11:
    sub_B170D4();
  }
  return (BattleLogicTask_array *)sub_B17014(BattleLogicTask___TypeInfo, 0LL, v11);
}


BattleActionData_o *__fastcall BattleLogic__breakOnBattle(
        BattleLogic_o *this,
        BattleLogicTask_o *task,
        const MethodInfo *method)
{
  __int64 v5; // x1
  __int64 v6; // x1
  BattlePerformance_o *perf; // x21
  int32_t ActorId; // w0
  UnityEngine_GameObject_o *ServantGameObject; // x20
  __int64 v10; // x21
  BattleActorControl_o *Component_srcLineSprite; // x20
  struct BattlePerformance_o *v12; // x8
  FieldMotionManager_o *fmManager_k__BackingField; // x0
  UnityEngine_Component_o *Transform; // x0
  UnityEngine_GameObject_o *gameObject; // x0
  __int64 v16; // x1
  __int64 v17; // x2
  __int64 v18; // x3
  __int64 v19; // x4

  if ( (byte_40F7391 & 1) == 0 )
  {
    sub_B16FFC(&BattleActionData_TypeInfo, task);
    sub_B16FFC(&Method_UnityEngine_GameObject_GetComponent_BattleActorControl___, v5);
    sub_B16FFC(&UnityEngine_Object_TypeInfo, v6);
    byte_40F7391 = 1;
  }
  if ( !task )
    goto LABEL_23;
  perf = this->fields.perf;
  ActorId = BattleLogicTask__getActorId(task, 0LL);
  if ( !perf )
    goto LABEL_23;
  ServantGameObject = BattlePerformance__getServantGameObject(perf, ActorId, 0LL);
  if ( (BYTE3(UnityEngine_Object_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0
    && !UnityEngine_Object_TypeInfo->_2.cctor_finished )
  {
    j_il2cpp_runtime_class_init_0(UnityEngine_Object_TypeInfo);
  }
  v10 = 0LL;
  if ( UnityEngine_Object__op_Inequality((UnityEngine_Object_o *)ServantGameObject, 0LL, 0LL) )
  {
    if ( !ServantGameObject )
      goto LABEL_23;
    Component_srcLineSprite = (BattleActorControl_o *)UnityEngine_GameObject__GetComponent_srcLineSprite_(
                                                        ServantGameObject,
                                                        (const MethodInfo_19D14E0 *)Method_UnityEngine_GameObject_GetComponent_BattleActorControl___);
    if ( (BYTE3(UnityEngine_Object_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0
      && !UnityEngine_Object_TypeInfo->_2.cctor_finished )
    {
      j_il2cpp_runtime_class_init_0(UnityEngine_Object_TypeInfo);
    }
    v10 = 0LL;
    if ( UnityEngine_Object__op_Inequality((UnityEngine_Object_o *)Component_srcLineSprite, 0LL, 0LL) )
    {
      if ( Component_srcLineSprite )
      {
        if ( !Component_srcLineSprite->fields.isEnemy )
          return 0LL;
        v12 = this->fields.perf;
        if ( v12 )
        {
          fmManager_k__BackingField = v12->fields._fmManager_k__BackingField;
          if ( fmManager_k__BackingField )
          {
            Transform = (UnityEngine_Component_o *)FieldMotionManager__GetTransform(
                                                     fmManager_k__BackingField,
                                                     1,
                                                     -1,
                                                     0LL);
            if ( Transform )
            {
              gameObject = UnityEngine_Component__get_gameObject(Transform, 0LL);
              BattleActorControl__motion_BackStep(Component_srcLineSprite, gameObject, 0.5, 0.15, 2, 0LL, 0LL, 0LL, 0LL);
              v10 = sub_B170CC(BattleActionData_TypeInfo, v16, v17, v18, v19);
              BattleActionData___ctor((BattleActionData_o *)v10, 0LL);
              if ( v10 )
              {
                *(_DWORD *)(v10 + 16) = 1;
                *(_DWORD *)(v10 + 116) = 1041865114;
                return (BattleActionData_o *)v10;
              }
            }
          }
        }
      }
LABEL_23:
      sub_B170D4();
    }
  }
  return (BattleActionData_o *)v10;
}


void __fastcall BattleLogic__callBackCommandSpell(BattleLogic_o *this, System_String_o *ret, const MethodInfo *method)
{
  __int64 v5; // x1
  __int64 v6; // x1
  __int64 v7; // x1
  __int64 v8; // x1
  PlayMakerFSM_o *fsm; // x0
  __int64 *v10; // x8

  if ( (byte_40F73CC & 1) == 0 )
  {
    sub_B16FFC(&BattleData_TypeInfo, ret);
    sub_B16FFC(&StringLiteral_9714, v5);
    sub_B16FFC(&StringLiteral_21129, v6);
    sub_B16FFC(&StringLiteral_20980, v7);
    sub_B16FFC(&StringLiteral_9271, v8);
    byte_40F73CC = 1;
  }
  if ( !ret )
    goto LABEL_15;
  if ( System_String__Equals_43731072(ret, (System_String_o *)StringLiteral_21129, 0LL) )
  {
    this->fields.connCammdSpellRetryFlg = 0;
    if ( (BYTE3(BattleData_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0 && !BattleData_TypeInfo->_2.cctor_finished )
      j_il2cpp_runtime_class_init_0(BattleData_TypeInfo);
    BattleData__setCommandSpellIdBattle(0, 0, 0LL);
    BattleData__setContinueBattleFlg(0, 1, 0LL);
    fsm = this->fields.fsm;
    if ( fsm )
    {
      v10 = &StringLiteral_9714;
LABEL_13:
      PlayMakerFSM__SendEvent(fsm, (System_String_o *)*v10, 0LL);
      return;
    }
    goto LABEL_15;
  }
  if ( System_String__Equals_43731072(ret, (System_String_o *)StringLiteral_20980, 0LL) )
  {
    fsm = this->fields.fsm;
    this->fields.connCammdSpellRetryFlg = 1;
    if ( fsm )
    {
      v10 = &StringLiteral_9271;
      goto LABEL_13;
    }
LABEL_15:
    sub_B170D4();
  }
}


// local variable allocation has failed, the output may be wrong!
void __fastcall BattleLogic__callBackNoEntity(BattleLogic_o *this, bool flg, const MethodInfo *method)
{
  ManagementManager_o *Instance; // x0

  if ( (byte_40F73EE & 1) == 0 )
  {
    sub_B16FFC(&Method_SingletonMonoBehaviour_ManagementManager__get_Instance__, flg);
    byte_40F73EE = 1;
  }
  Instance = (ManagementManager_o *)SingletonMonoBehaviour_WebViewManager___get_Instance((const MethodInfo_2A54F38 *)Method_SingletonMonoBehaviour_ManagementManager__get_Instance__);
  if ( !Instance )
    sub_B170D4();
  ManagementManager__reboot(Instance, 0, 0LL);
}


void __fastcall BattleLogic__callServant(BattleLogic_o *this, BattleActionData_o *actionData, const MethodInfo *method)
{
  System_Collections_IEnumerator_o *v4; // x1

  v4 = BattleLogic__CorCallServant(this, actionData, method);
  UnityEngine_MonoBehaviour__StartCoroutine_34804316((UnityEngine_MonoBehaviour_o *)this, v4, 0LL);
}


void __fastcall BattleLogic__callbackContinueCommandSpell(
        BattleLogic_o *this,
        System_String_o *ret,
        const MethodInfo *method)
{
  BattleData_o *data; // x0
  const MethodInfo *v6; // x2

  data = this->fields.data;
  if ( !data )
    sub_B170D4();
  BattleData__SuccessContinue(data, 0LL);
  BattleLogic__callBackCommandSpell(this, ret, v6);
}


void __fastcall BattleLogic__callbackEventTutorialBase(BattleLogic_o *this, const MethodInfo *method)
{
  BattlePerformance_o *perf; // x0
  PlayMakerFSM_o *fsm; // x0

  if ( (byte_40F73F2 & 1) == 0 )
  {
    sub_B16FFC(&StringLiteral_5481, method);
    byte_40F73F2 = 1;
  }
  perf = this->fields.perf;
  if ( !perf || (BattlePerformance__SetActiveTutorialDialogMask(perf, 0, 0LL), (fsm = this->fields.fsm) == 0LL) )
    sub_B170D4();
  PlayMakerFSM__SendEvent(fsm, (System_String_o *)StringLiteral_5481, 0LL);
}


void __fastcall BattleLogic__callbackRequest(BattleLogic_o *this, System_String_o *result, const MethodInfo *method)
{
  __int64 v5; // x1
  __int64 v6; // x1
  PlayMakerFSM_o *fsm; // x0
  __int64 *v8; // x8

  if ( (byte_40F7370 & 1) == 0 )
  {
    sub_B16FFC(&StringLiteral_9714, result);
    sub_B16FFC(&StringLiteral_20980, v5);
    sub_B16FFC(&StringLiteral_9271, v6);
    byte_40F7370 = 1;
  }
  if ( !result )
    goto LABEL_10;
  if ( !System_String__Equals_43731072(result, (System_String_o *)StringLiteral_20980, 0LL) )
  {
    this->fields.resultstring = result;
    sub_B16F98(&this->fields.resultstring, result);
    fsm = this->fields.fsm;
    if ( fsm )
    {
      v8 = &StringLiteral_9714;
      goto LABEL_9;
    }
LABEL_10:
    sub_B170D4();
  }
  fsm = this->fields.fsm;
  if ( !fsm )
    goto LABEL_10;
  v8 = &StringLiteral_9271;
LABEL_9:
  PlayMakerFSM__SendEvent(fsm, (System_String_o *)*v8, 0LL);
}


void __fastcall BattleLogic__callbackResumeLimitTurnEffect(BattleLogic_o *this, const MethodInfo *method)
{
  __int64 v3; // x1
  __int64 v4; // x1
  struct BattlePerformance_o *perf; // x8
  UnityEngine_Object_o *objLimitTurnEffect; // x20
  struct BattlePerformance_o *v7; // x8
  UnityEngine_GameObject_o *v8; // x0
  srcLineSprite_o *Component_srcLineSprite; // x20
  BattlePerformance_o *v10; // x0
  PlayMakerFSM_o *fsm; // x0

  if ( (byte_40F73F1 & 1) == 0 )
  {
    sub_B16FFC(&Method_UnityEngine_GameObject_GetComponent_BattleRaidTurnStartEffect___, method);
    sub_B16FFC(&UnityEngine_Object_TypeInfo, v3);
    sub_B16FFC(&StringLiteral_5481, v4);
    byte_40F73F1 = 1;
  }
  perf = this->fields.perf;
  if ( !perf )
    goto LABEL_19;
  objLimitTurnEffect = (UnityEngine_Object_o *)perf->fields.objLimitTurnEffect;
  if ( (BYTE3(UnityEngine_Object_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0
    && !UnityEngine_Object_TypeInfo->_2.cctor_finished )
  {
    j_il2cpp_runtime_class_init_0(UnityEngine_Object_TypeInfo);
  }
  if ( !UnityEngine_Object__op_Inequality(objLimitTurnEffect, 0LL, 0LL) )
    goto LABEL_16;
  v7 = this->fields.perf;
  if ( !v7 || (v8 = v7->fields.objLimitTurnEffect) == 0LL )
LABEL_19:
    sub_B170D4();
  Component_srcLineSprite = UnityEngine_GameObject__GetComponent_srcLineSprite_(
                              v8,
                              (const MethodInfo_19D14E0 *)Method_UnityEngine_GameObject_GetComponent_BattleRaidTurnStartEffect___);
  if ( (BYTE3(UnityEngine_Object_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0
    && !UnityEngine_Object_TypeInfo->_2.cctor_finished )
  {
    j_il2cpp_runtime_class_init_0(UnityEngine_Object_TypeInfo);
  }
  if ( UnityEngine_Object__op_Inequality((UnityEngine_Object_o *)Component_srcLineSprite, 0LL, 0LL) )
  {
    if ( !Component_srcLineSprite )
      goto LABEL_19;
    LOBYTE(Component_srcLineSprite->fields.mFSM) = 0;
    BattleRaidTurnStartEffect__resumeLimitTurnEffect((BattleRaidTurnStartEffect_o *)Component_srcLineSprite, 0LL);
  }
LABEL_16:
  v10 = this->fields.perf;
  if ( !v10 )
    goto LABEL_19;
  BattlePerformance__SetActiveTutorialDialogMask(v10, 0, 0LL);
  fsm = this->fields.fsm;
  if ( !fsm )
    goto LABEL_19;
  PlayMakerFSM__SendEvent(fsm, (System_String_o *)StringLiteral_5481, 0LL);
}


void __fastcall BattleLogic__callbackTutorialAttack02(BattleLogic_o *this, const MethodInfo *method)
{
  BattleData_o *data; // x0
  BattleServantData_array *FieldPlayerServantList; // x0
  __int64 v5; // x1
  __int64 v6; // x2
  BattleServantData_o *v7; // x20
  int32_t Value; // w0
  struct BattleData_o *v9; // x8

  if ( (byte_40F73ED & 1) == 0 )
  {
    sub_B16FFC(&StringLiteral_6512, method);
    byte_40F73ED = 1;
  }
  data = this->fields.data;
  if ( !data )
    goto LABEL_9;
  FieldPlayerServantList = BattleData__getFieldPlayerServantList(data, 0LL);
  if ( !FieldPlayerServantList )
    goto LABEL_9;
  if ( !FieldPlayerServantList->max_length )
  {
    sub_B17100(FieldPlayerServantList, v5, v6);
    sub_B170A0();
  }
  v7 = FieldPlayerServantList->m_Items[0];
  Value = ConstantMaster__getValue((System_String_o *)StringLiteral_6512, 0LL);
  if ( !v7 || (BattleServantData__addNp(v7, Value, 1, 0LL), (v9 = this->fields.data) == 0LL) )
LABEL_9:
    sub_B170D4();
  v9->fields.tutorialState = 10;
}


// local variable allocation has failed, the output may be wrong!
void __fastcall BattleLogic__callbackTutorialSelectEnemyNext(BattleLogic_o *this, const MethodInfo *method)
{
  __int64 v3; // x1
  CommonUI_o *Instance; // x19
  const MethodInfo *v5; // x2
  UnityEngine_Vector2_o v6; // kr00_8
  const MethodInfo *v7; // x2
  float v8; // s0
  float v9; // s1
  float v10; // s2
  float v11; // s3
  float v12; // s7
  float v13; // s16
  UnityEngine_Rect_o v14; // 0:s2.4,4:s3.4,8:s4.4,12:s5.4

  if ( (byte_40F73F0 & 1) == 0 )
  {
    sub_B16FFC(&Method_SingletonMonoBehaviour_CommonUI__get_Instance__, method);
    sub_B16FFC(&StringLiteral_1, v3);
    byte_40F73F0 = 1;
  }
  Instance = (CommonUI_o *)SingletonMonoBehaviour_WebViewManager___get_Instance((const MethodInfo_2A54F38 *)Method_SingletonMonoBehaviour_CommonUI__get_Instance__);
  v6 = BattleLogic__FSTuArrow(this, 0, v5);
  *(UnityEngine_Rect_o *)&v8 = BattleLogic__FSTuSquare(this, 0, v7);
  if ( !Instance )
    sub_B170D4();
  v12 = v10;
  v13 = v11;
  v14.fields.m_XMin = v8;
  v14.fields.m_YMin = v9;
  v14.fields.m_Width = v12;
  v14.fields.m_Height = v13;
  CommonUI__OpenTutorialNotificationDialogArrow(
    Instance,
    (System_String_o *)StringLiteral_1,
    v6,
    v14,
    0.0,
    0LL,
    -1,
    0LL,
    0LL);
}


void __fastcall BattleLogic__checkBattleTask(BattleLogic_o *this, const MethodInfo *method)
{
  struct BattleData_o *data; // x8
  BattleAttackManager_o *battleAtkManager; // x0
  int32_t LogicType; // w0
  int32_t v6; // w25
  struct System_Collections_Generic_Dictionary_BattleLogic_LOGICTYPE__BattleLogic_taskFunction__o *funclist; // x0
  struct System_Collections_Generic_Dictionary_BattleLogic_LOGICTYPE__BattleLogic_taskFunction__o *v8; // x0
  System_String_o *Item; // x0
  _QWORD *v10; // x0
  __int64 v11; // x2
  __int64 v12; // x8
  _QWORD *v13; // x25
  unsigned __int64 v14; // x28
  struct System_Collections_Generic_LinkedList_BattleLogicTask__o *v15; // x0
  __int64 v16; // x1
  __int64 v17; // x1
  __int64 v18; // x1
  __int64 v19; // x1
  struct System_Collections_Generic_LinkedList_BattleLogicTask__o *list_logic; // x8
  struct BattleData_o *v21; // x8
  BattleAttackManager_o *v22; // x0
  PlayMakerFSM_o *fsm; // x0

  while ( 1 )
  {
    if ( (byte_40F7383 & 1) == 0 )
    {
      sub_B16FFC(
        &Method_System_Collections_Generic_Dictionary_BattleLogic_LOGICTYPE__BattleLogic_taskFunction__ContainsKey__,
        method);
      sub_B16FFC(
        &Method_System_Collections_Generic_Dictionary_BattleLogic_LOGICTYPE__BattleLogic_taskFunction__get_Item__,
        v16);
      sub_B16FFC(&Method_System_Collections_Generic_LinkedList_BattleLogicTask__AddLast__, v17);
      sub_B16FFC(&Method_System_Collections_Generic_LinkedList_BattleLogicTask__get_Count__, v18);
      sub_B16FFC(&StringLiteral_5486, v19);
      byte_40F7383 = 1;
    }
    list_logic = this->fields.list_logic;
    if ( !list_logic )
      goto LABEL_25;
    if ( list_logic->fields.count > 0 )
    {
      BattleLogic__playTaskBattle(this, method);
      return;
    }
    data = this->fields.data;
    if ( !data )
      goto LABEL_25;
    battleAtkManager = data->fields.battleAtkManager;
    if ( !battleAtkManager )
      goto LABEL_25;
    LogicType = BattleAttackManager__GetLogicType(battleAtkManager, this->fields.logicindex, 0LL);
    if ( LogicType == 76 )
      break;
    v6 = LogicType;
    funclist = this->fields.funclist;
    if ( !funclist )
      goto LABEL_25;
    if ( System_Collections_Generic_Dictionary_Voice_BATTLE__string___ContainsKey(
           (System_Collections_Generic_Dictionary_Voice_BATTLE__string__o *)funclist,
           v6,
           (const MethodInfo_2DFFEC8 *)Method_System_Collections_Generic_Dictionary_BattleLogic_LOGICTYPE__BattleLogic_taskFunction__ContainsKey__) )
    {
      v8 = this->fields.funclist;
      if ( !v8 )
        goto LABEL_25;
      Item = System_Collections_Generic_Dictionary_Voice_BATTLE__string___get_Item(
               (System_Collections_Generic_Dictionary_Voice_BATTLE__string__o *)v8,
               v6,
               (const MethodInfo_2DFFB90 *)Method_System_Collections_Generic_Dictionary_BattleLogic_LOGICTYPE__BattleLogic_taskFunction__get_Item__);
      if ( !Item )
        goto LABEL_25;
      v10 = BattleLogic_taskFunction__Invoke((BattleLogic_taskFunction_o *)Item, v6, this->fields.data, 0LL);
      if ( v10 )
      {
        v12 = v10[3];
        v13 = v10;
        if ( (int)v12 >= 1 )
        {
          v14 = 0LL;
          while ( 1 )
          {
            if ( v14 >= (unsigned int)v12 )
            {
              sub_B17100(v10, method, v11);
              sub_B170A0();
            }
            v15 = this->fields.list_logic;
            if ( !v15 )
              break;
            v10 = System_Collections_Generic_LinkedList_WebOperation___AddLast(
                    (System_Collections_Generic_LinkedList_WebOperation__o *)v15,
                    (System_Net_WebOperation_o *)v13[v14 + 4],
                    (const MethodInfo_23FD6D4 *)Method_System_Collections_Generic_LinkedList_BattleLogicTask__AddLast__);
            LODWORD(v12) = *((_DWORD *)v13 + 6);
            if ( (__int64)++v14 >= (int)v12 )
              goto LABEL_15;
          }
LABEL_25:
          sub_B170D4();
        }
      }
    }
LABEL_15:
    ++this->fields.logicindex;
  }
  v21 = this->fields.data;
  if ( !v21 )
    goto LABEL_25;
  v22 = v21->fields.battleAtkManager;
  if ( !v22 )
    goto LABEL_25;
  BattleAttackManager__Next(v22, 0LL);
  fsm = this->fields.fsm;
  if ( !fsm )
    goto LABEL_25;
  PlayMakerFSM__SendEvent(fsm, (System_String_o *)StringLiteral_5486, 0LL);
}


void __fastcall BattleLogic__checkBoostItem(BattleLogic_o *this, const MethodInfo *method)
{
  __int64 v3; // x1
  BattleData_o *data; // x0
  BattleData_o *v5; // x0
  BattleData_o *v6; // x0
  BattleData_o *v7; // x0
  BattleSkillInfoData_o *BoostSkillInfo; // x0
  BattleSkillInfoData_o *v9; // x20
  BattleData_o *v10; // x0
  BattleServantData_array *FieldServantList; // x0
  __int64 v12; // x1
  BattleServantData_array *v13; // x2
  int max_length; // w8
  BattleServantData_array *v15; // x21
  unsigned int v16; // w23
  Il2CppClass **v17; // x8
  Il2CppClass *v18; // x22
  BattleLogicSkill_o *logicSkill; // x21
  BattleLogicTask_array *v20; // x0
  const MethodInfo *v21; // x3
  System_Collections_IEnumerator_o *v22; // x1
  PlayMakerFSM_o *fsm; // x0

  if ( (byte_40F73B5 & 1) == 0 )
  {
    sub_B16FFC(&int___TypeInfo, method);
    sub_B16FFC(&StringLiteral_12204, v3);
    byte_40F73B5 = 1;
  }
  data = this->fields.data;
  if ( !data )
    goto LABEL_27;
  if ( !BattleData__checkProgressflg(data, 2, 0LL) )
    goto LABEL_25;
  v5 = this->fields.data;
  if ( !v5 )
    goto LABEL_27;
  BattleData__offProgressflg(v5, 2, 0LL);
  v6 = this->fields.data;
  if ( !v6 )
    goto LABEL_27;
  if ( BattleData__isFirstStage(v6, 0LL) )
  {
    v7 = this->fields.data;
    if ( !v7 )
      goto LABEL_27;
    BoostSkillInfo = BattleData__getBoostSkillInfo(v7, 0, 0LL);
    if ( BoostSkillInfo )
    {
      BoostSkillInfo->fields.svtUniqueId = -1;
      v9 = BoostSkillInfo;
      v10 = this->fields.data;
      if ( v10 )
      {
        FieldServantList = BattleData__getFieldServantList(v10, 0, 0LL);
        if ( FieldServantList )
        {
          max_length = FieldServantList->max_length;
          v15 = FieldServantList;
          if ( max_length < 1 )
            goto LABEL_25;
          v16 = 0;
          while ( 1 )
          {
            if ( v16 >= max_length )
              goto LABEL_28;
            v17 = &v15->obj.klass + (int)v16;
            v18 = v17[4];
            if ( !v18 )
              goto LABEL_27;
            FieldServantList = (BattleServantData_array *)BattleServantData__isAlive(
                                                            (BattleServantData_o *)v17[4],
                                                            0,
                                                            0LL);
            if ( ((unsigned __int8)FieldServantList & 1) != 0 )
              break;
            max_length = v15->max_length;
            if ( (int)++v16 >= max_length )
              goto LABEL_25;
          }
          logicSkill = this->fields.logicSkill;
          FieldServantList = (BattleServantData_array *)sub_B17014(int___TypeInfo, 1LL, v13);
          if ( FieldServantList )
          {
            v13 = FieldServantList;
            if ( !FieldServantList->max_length )
            {
LABEL_28:
              sub_B17100(FieldServantList, v12, v13);
              sub_B170A0();
            }
            LODWORD(FieldServantList->m_Items[0]) = v18->_1.namespaze;
            if ( logicSkill )
            {
              v20 = BattleLogicSkill__taskSkill(
                      logicSkill,
                      v9,
                      (System_Int32_array *)FieldServantList,
                      0LL,
                      0,
                      0,
                      0,
                      0LL);
              if ( v20 && *(_QWORD *)&v20->max_length )
              {
                v22 = BattleLogic__waitWaveStep(this, v20, 2, v21);
                UnityEngine_MonoBehaviour__StartCoroutine_34804316((UnityEngine_MonoBehaviour_o *)this, v22, 0LL);
                return;
              }
              goto LABEL_25;
            }
          }
        }
      }
LABEL_27:
      sub_B170D4();
    }
  }
LABEL_25:
  fsm = this->fields.fsm;
  if ( !fsm )
    goto LABEL_27;
  PlayMakerFSM__SendEvent(fsm, (System_String_o *)StringLiteral_12204, 0LL);
}


void __fastcall BattleLogic__checkCombo(BattleLogic_o *this, const MethodInfo *method)
{
  __int64 v2; // x2
  __int64 v3; // x1
  struct BattleData_o *data; // x8
  struct BattleCommandData_array *selectcommandlist; // x24
  System_Int32_array *v6; // x20
  __int64 v7; // x2
  __int64 v8; // x19
  __int64 v9; // x2
  System_Boolean_array *CommandType; // x0
  __int64 v11; // x1
  __int64 v12; // x2
  System_Boolean_array *v13; // x22
  char v14; // w23
  bool *v15; // x25
  _DWORD *v16; // x26
  int32_t *v17; // x27
  BattleCommandData_o **m_Items; // x28
  unsigned int v19; // w19
  il2cpp_array_size_t v20; // w21
  const MethodInfo *v21; // x5
  BattleData_o *v22; // x0
  BattleServantData_o *ServantData; // x0
  BattleServantData_o *v24; // x23
  _BOOL4 v25; // w8
  BattleComboData_o *v26; // x0
  struct BattleData_o *v27; // x8
  System_Int32_array *typeid; // [xsp+8h] [xbp-58h]

  if ( (byte_40F73AF & 1) == 0 )
  {
    sub_B16FFC(&bool___TypeInfo, method);
    sub_B16FFC(&int___TypeInfo, v3);
    byte_40F73AF = 1;
  }
  data = this->fields.data;
  if ( !data )
    goto LABEL_32;
  selectcommandlist = data->fields.selectcommandlist;
  v6 = (System_Int32_array *)sub_B17014(int___TypeInfo, 3LL, v2);
  v8 = sub_B17014(int___TypeInfo, 3LL, v7);
  CommandType = (System_Boolean_array *)sub_B17014(bool___TypeInfo, 3LL, v9);
  if ( !selectcommandlist )
    goto LABEL_32;
  v13 = CommandType;
  v14 = 0;
  v15 = &CommandType->m_Items[4];
  typeid = (System_Int32_array *)v8;
  v16 = (_DWORD *)(v8 + 32);
  v17 = &v6->m_Items[1];
  m_Items = selectcommandlist->m_Items;
  v19 = -1;
  do
  {
    v20 = v19 + 1;
    if ( v19 + 1 >= selectcommandlist->max_length )
    {
LABEL_31:
      sub_B17100(CommandType, v11, v12);
      sub_B170A0();
    }
    if ( !*m_Items || !v6 )
      goto LABEL_32;
    if ( v20 >= v6->max_length )
      goto LABEL_31;
    *v17 = (*m_Items)->fields.uniqueId;
    if ( v20 >= selectcommandlist->max_length )
      goto LABEL_31;
    if ( !*m_Items )
      goto LABEL_32;
    CommandType = (System_Boolean_array *)BattleCommandData__getCommandType(*m_Items, 0LL);
    if ( !typeid )
      goto LABEL_32;
    if ( v20 >= typeid->max_length )
      goto LABEL_31;
    *v16 = (_DWORD)CommandType;
    if ( v20 >= selectcommandlist->max_length )
      goto LABEL_31;
    if ( !*m_Items )
      goto LABEL_32;
    CommandType = (System_Boolean_array *)BattleCommandData__isTreasureDvc(*m_Items, 0LL);
    if ( !v13 )
      goto LABEL_32;
    if ( v20 >= v13->max_length )
      goto LABEL_31;
    *v15 = (unsigned __int8)CommandType & 1;
    if ( (v14 & 1) != 0 )
    {
      v14 = 1;
    }
    else
    {
      if ( v20 >= v6->max_length )
        goto LABEL_31;
      v22 = this->fields.data;
      if ( !v22 )
        goto LABEL_32;
      ServantData = BattleData__getServantData(v22, *v17, 0LL);
      if ( !ServantData )
        goto LABEL_32;
      v24 = ServantData;
      CommandType = (System_Boolean_array *)BattleServantData__isAction(ServantData, 0LL);
      if ( ((unsigned __int8)CommandType & 1) != 0 )
      {
        if ( v20 >= selectcommandlist->max_length )
          goto LABEL_31;
        CommandType = (System_Boolean_array *)BattleServantData__isCardTypeAction(v24, *m_Items, 0LL);
        v25 = ((unsigned __int8)CommandType & 1) == 0;
      }
      else
      {
        v25 = 1;
      }
      v14 = v25;
    }
    ++v19;
    ++v15;
    ++v16;
    ++v17;
    ++m_Items;
  }
  while ( v19 < 2 );
  v26 = BattleLogic__checkCommandCombo((BattleLogic_o *)CommandType, v6, typeid, v13, v14, v21);
  v27 = this->fields.data;
  if ( !v27 )
LABEL_32:
    sub_B170D4();
  v27->fields.combodata = v26;
  sub_B16F98(&v27->fields.combodata, v26);
}


// local variable allocation has failed, the output may be wrong!
BattleComboData_o *__fastcall BattleLogic__checkCommandCombo(
        BattleLogic_o *this,
        System_Int32_array *svtid,
        System_Int32_array *typeid,
        System_Boolean_array *isTreasureDvc,
        bool withSealedCard,
        const MethodInfo *method)
{
  BattleComboData_o *v10; // x19
  _BOOL8 isBLANK; // x0
  __int64 v12; // x1
  __int64 v13; // x2
  il2cpp_array_size_t max_length; // w8
  unsigned __int64 v15; // x25
  int32_t v16; // w9
  il2cpp_array_size_t v17; // w9
  int32_t v18; // w8
  int32_t v19; // w10
  struct System_Boolean_array *v20; // x8
  struct System_Boolean_array *v21; // x8
  int32_t v22; // w9
  struct System_Boolean_array *v23; // x8
  bool *v24; // x8
  struct System_Boolean_array *sameflg; // x8
  struct System_Boolean_array *v26; // x8
  il2cpp_array_size_t v27; // w8
  int32_t v28; // w9
  int32_t v29; // w10
  int32_t v30; // w8
  il2cpp_array_size_t v31; // w8
  bool v32; // w8
  struct System_Boolean_array *v33; // x8
  __int64 v34; // x1
  __int64 v35; // x2
  __int64 v36; // x3
  __int64 v37; // x4

  if ( (byte_40F73D8 & 1) == 0 )
  {
    sub_B16FFC(&BattleComboData_TypeInfo, svtid);
    byte_40F73D8 = 1;
  }
  v10 = (BattleComboData_o *)sub_B170CC(BattleComboData_TypeInfo, svtid, typeid, isTreasureDvc, withSealedCard);
  BattleComboData___ctor(v10, 0LL);
  if ( !typeid )
    goto LABEL_67;
  max_length = *(_QWORD *)&typeid->max_length;
  if ( (int)max_length >= 1 )
  {
    v15 = 0LL;
    while ( v15 < max_length )
    {
      isBLANK = BattleCommand__isBLANK(typeid->m_Items[v15 + 1], 0LL);
      if ( isBLANK )
        return v10;
      max_length = typeid->max_length;
      if ( (__int64)++v15 >= (int)max_length )
        goto LABEL_9;
    }
LABEL_66:
    sub_B17100(isBLANK, v12, v13);
    sub_B170A0();
  }
LABEL_9:
  if ( max_length < 2 )
    goto LABEL_66;
  v16 = typeid->m_Items[1];
  if ( v16 != typeid->m_Items[2] )
    goto LABEL_16;
  if ( max_length <= 2 )
    goto LABEL_66;
  if ( v16 == typeid->m_Items[3] )
  {
    if ( !v10 )
      goto LABEL_67;
    v10->fields.flash = 1;
    if ( !typeid->max_length )
      goto LABEL_66;
    v10->fields.flashtype = typeid->m_Items[1];
  }
  else
  {
LABEL_16:
    if ( !v10 )
      goto LABEL_67;
  }
  v10->fields.samecount = 1;
  if ( !svtid )
LABEL_67:
    sub_B170D4();
  v17 = svtid->max_length;
  if ( v17 < 2 )
    goto LABEL_66;
  v18 = svtid->m_Items[1];
  v19 = svtid->m_Items[2];
  if ( v18 == v19 )
  {
    if ( v17 <= 2 )
      goto LABEL_66;
    if ( v18 != svtid->m_Items[3] )
    {
      sameflg = v10->fields.sameflg;
      v10->fields.samecount = 2;
      if ( !sameflg )
        goto LABEL_67;
      if ( !sameflg->max_length )
        goto LABEL_66;
      sameflg->m_Items[4] = 1;
      v26 = v10->fields.sameflg;
      if ( !v26 )
        goto LABEL_67;
      if ( v26->max_length <= 1 )
        goto LABEL_66;
      v24 = &v26->m_Items[5];
      goto LABEL_39;
    }
    v20 = v10->fields.sameflg;
    v10->fields.samecount = 3;
    if ( !v20 )
      goto LABEL_67;
    if ( !v20->max_length )
      goto LABEL_66;
    v20->m_Items[4] = 1;
    v21 = v10->fields.sameflg;
    if ( !v21 )
      goto LABEL_67;
    goto LABEL_29;
  }
  if ( v17 <= 2 )
    goto LABEL_66;
  v22 = svtid->m_Items[3];
  if ( v19 == v22 )
  {
    v21 = v10->fields.sameflg;
    v10->fields.samecount = 2;
    if ( !v21 )
      goto LABEL_67;
LABEL_29:
    if ( v21->max_length <= 1 )
      goto LABEL_66;
    v21->m_Items[5] = 1;
LABEL_31:
    v23 = v10->fields.sameflg;
    if ( !v23 )
      goto LABEL_67;
    if ( v23->max_length <= 2 )
      goto LABEL_66;
    v24 = &v23->m_Items[6];
LABEL_39:
    *v24 = 1;
    goto LABEL_40;
  }
  if ( v18 == v22 )
  {
    v33 = v10->fields.sameflg;
    v10->fields.samecount = 2;
    if ( !v33 )
      goto LABEL_67;
    if ( !v33->max_length )
      goto LABEL_66;
    v33->m_Items[4] = 1;
    goto LABEL_31;
  }
LABEL_40:
  v27 = typeid->max_length;
  if ( v27 < 2 )
    goto LABEL_66;
  v29 = typeid->m_Items[1];
  v28 = typeid->m_Items[2];
  if ( v29 != v28 )
  {
    if ( v27 <= 2 )
      goto LABEL_66;
    v30 = typeid->m_Items[3];
    if ( v29 != v30 && v28 != v30 )
      v10->fields.isMighty = 1;
  }
  if ( !isTreasureDvc )
    goto LABEL_67;
  v31 = isTreasureDvc->max_length;
  if ( !v31 )
    goto LABEL_66;
  if ( isTreasureDvc->m_Items[4] )
  {
    if ( v31 == 1 )
      goto LABEL_66;
    if ( isTreasureDvc->m_Items[5] )
    {
      v32 = 1;
      goto LABEL_61;
    }
  }
  else if ( v31 == 1 )
  {
    goto LABEL_66;
  }
  if ( isTreasureDvc->m_Items[5] )
  {
    if ( v31 <= 2 )
      goto LABEL_66;
    v32 = isTreasureDvc->m_Items[6];
  }
  else
  {
    v32 = 0;
  }
LABEL_61:
  v10->fields.isTreasureDvc = v32;
  if ( BattleComboData__AchieveAnyChain(v10, 0LL) && withSealedCard )
  {
    v10 = (BattleComboData_o *)sub_B170CC(BattleComboData_TypeInfo, v34, v35, v36, v37);
    BattleComboData___ctor(v10, 0LL);
    if ( !v10 )
      goto LABEL_67;
    v10->fields.chainError = 1;
  }
  return v10;
}


void __fastcall BattleLogic__checkEndBattle(
        BattleLogic_o *this,
        System_String_o *endproc,
        bool isEndOfCurrentTurn,
        const MethodInfo *method)
{
  __int64 v7; // x1
  __int64 v8; // x1
  __int64 v9; // x1
  __int64 v10; // x1
  BattlePerformance_o *perf; // x0
  const MethodInfo *v12; // x2
  struct BattlePerformance_o *v13; // x8
  WebViewManager_o *Instance; // x0
  const MethodInfo *v15; // x1
  BattlePerformance_o *v16; // x0
  AvalonSceneManager_o *v17; // x0
  struct BattleData_o *data; // x0
  int32_t ForceEndWinReason; // w1
  const MethodInfo *v20; // x2
  bool v21; // w0
  struct BattleData_o *v22; // x0
  const MethodInfo *v23; // x1
  BattleData_o *v24; // x0
  __int64 v25; // x1
  __int64 v26; // x2
  __int64 v27; // x3
  __int64 v28; // x4
  System_Action_o *v29; // x20
  const MethodInfo *v30; // x2
  System_Collections_IEnumerator_o *v31; // x1
  BattleData_o *v32; // x0
  const MethodInfo *v33; // x1
  struct BattleData_o *v34; // x8
  struct BattleData_o *v35; // x8
  int32_t limitAct; // w8
  PlayMakerFSM_o *fsm; // x0
  System_String_o *v38; // x1
  BattlePerformance_o *v39; // x0

  if ( (byte_40F73A0 & 1) == 0 )
  {
    sub_B16FFC(&System_Action_TypeInfo, endproc);
    sub_B16FFC(&Method_BattleLogic__checkEndBattle_b__185_0__, v7);
    sub_B16FFC(&Method_SingletonMonoBehaviour_AvalonSceneManager__get_Instance__, v8);
    sub_B16FFC(&Method_SingletonMonoBehaviour_BattleSequenceManager__get_Instance__, v9);
    sub_B16FFC(&StringLiteral_5630, v10);
    byte_40F73A0 = 1;
  }
  perf = this->fields.perf;
  if ( !perf )
    goto LABEL_43;
  BattlePerformance__SetActiveTutorialDialogMask(perf, 0, 0LL);
  BattleLogic__resetTimeAcceleration(this, 0, v12);
  v13 = this->fields.perf;
  if ( !v13 )
    goto LABEL_43;
  v13->fields.isTargetChange = 1;
  Instance = SingletonMonoBehaviour_WebViewManager___get_Instance((const MethodInfo_2A54F38 *)Method_SingletonMonoBehaviour_BattleSequenceManager__get_Instance__);
  if ( !Instance )
    goto LABEL_43;
  if ( BYTE5(Instance->fields.webViewBase) )
  {
    v16 = this->fields.perf;
    if ( v16 )
    {
      BattlePerformance__procEndQuest(v16, 0LL);
      v17 = (AvalonSceneManager_o *)SingletonMonoBehaviour_WebViewManager___get_Instance((const MethodInfo_2A54F38 *)Method_SingletonMonoBehaviour_AvalonSceneManager__get_Instance__);
      if ( v17 )
      {
        AvalonSceneManager__transitionSceneRefresh(v17, 4, 1, 0LL, 0, 0LL);
        return;
      }
    }
LABEL_43:
    sub_B170D4();
  }
  data = this->fields.data;
  if ( !data )
    goto LABEL_43;
  if ( data->fields.winBattleNotRelatedSurvivalStatus )
    goto LABEL_12;
  v21 = BattleData__checkAlivePlayers(data, 0LL);
  if ( !this->fields.data )
    goto LABEL_43;
  if ( !v21 )
  {
    if ( BattleData__checkAliveEnemys(this->fields.data, 0LL) )
      goto LABEL_24;
    v24 = this->fields.data;
    if ( !v24 )
      goto LABEL_43;
    if ( !BattleData__isSuperBossBattle(v24, 0LL) )
    {
LABEL_24:
      if ( BattleLogic__CheckEnemyDropItemAll(this, v23) )
      {
        v29 = (System_Action_o *)sub_B170CC(System_Action_TypeInfo, v25, v26, v27, v28);
        System_Action___ctor(v29, (Il2CppObject *)this, Method_BattleLogic__checkEndBattle_b__185_0__, 0LL);
        v31 = BattleLogic__dropItemCoroutine(this, v29, v30);
        UnityEngine_MonoBehaviour__StartCoroutine_34804316((UnityEngine_MonoBehaviour_o *)this, v31, 0LL);
        return;
      }
      v32 = this->fields.data;
      if ( !v32 )
        goto LABEL_43;
      if ( BattleData__isBattleResultLoseQuestClear(v32, 0LL) )
      {
        BattleLogic__sendLoseRetireClearEvent(this, v33);
        return;
      }
      goto LABEL_36;
    }
    goto LABEL_39;
  }
  if ( BattleData__CheckDefenceTargetBroken(this->fields.data, 0LL) )
    goto LABEL_36;
  v22 = this->fields.data;
  if ( !v22 )
    goto LABEL_43;
  if ( v22->fields.endbattleFlg )
  {
    if ( !v22->fields.loseBattleFlg )
    {
LABEL_12:
      ForceEndWinReason = BattleLogic__getForceEndWinReason(this, v15);
LABEL_13:
      BattleLogic__sendWinBattleEvent(this, ForceEndWinReason, v20);
      return;
    }
    goto LABEL_36;
  }
  if ( !BattleData__checkAliveEnemys(v22, 0LL) )
  {
LABEL_39:
    ForceEndWinReason = 1;
    goto LABEL_13;
  }
  if ( !BattleLogic__IsBattleFinishByTurnExpiration(this, isEndOfCurrentTurn, v20) )
  {
LABEL_40:
    v39 = this->fields.perf;
    if ( !v39 )
      goto LABEL_43;
    BattlePerformance__SetActiveTutorialDialogMask(v39, 1, 0LL);
    fsm = this->fields.fsm;
    if ( !fsm )
      goto LABEL_43;
    v38 = endproc;
    goto LABEL_38;
  }
  v34 = this->fields.data;
  if ( !v34 )
    goto LABEL_43;
  v34->fields.isTurnElapsedEndBattle = v34->fields.turnElapsedEndBattleFlag;
  v35 = this->fields.data;
  if ( !v35 )
    goto LABEL_43;
  limitAct = v35->fields.limitAct;
  if ( limitAct != 2 )
  {
    if ( limitAct == 1 )
    {
      ForceEndWinReason = 2;
      goto LABEL_13;
    }
    goto LABEL_40;
  }
LABEL_36:
  fsm = this->fields.fsm;
  if ( !fsm )
    goto LABEL_43;
  v38 = (System_String_o *)StringLiteral_5630;
LABEL_38:
  PlayMakerFSM__SendEvent(fsm, v38, 0LL);
}


bool __fastcall BattleLogic__checkEnemyTargetFunction(
        BattleLogic_o *this,
        System_Int32_array *funclist,
        DataVals_array *dataValsArray,
        const MethodInfo *method)
{
  __int64 v7; // x1
  __int64 v8; // x1
  WebViewManager_o *Instance; // x0
  WarQuestSelectionMaster_o *MasterData_WarQuestSelectionMaster; // x0
  __int64 v11; // x1
  __int64 v12; // x2
  __int64 v13; // x8
  DataMasterBase_WarMaster__WarEntity__int__o *v14; // x22
  unsigned __int64 v15; // x25
  WarEntity_o *Entity; // x0
  WarEntity_o *v17; // x23
  DataVals_o *v18; // x24
  System_Int32_array *DependFuncIdArray; // x0
  const MethodInfo *v20; // x3

  if ( (byte_40F73E3 & 1) == 0 )
  {
    sub_B16FFC(&Method_DataManager_GetMasterData_FunctionMaster___, funclist);
    sub_B16FFC(&Method_DataMasterBase_FunctionMaster__FunctionEntity__int__GetEntity__, v7);
    sub_B16FFC(&Method_SingletonMonoBehaviour_DataManager__get_Instance__, v8);
    byte_40F73E3 = 1;
  }
  Instance = SingletonMonoBehaviour_WebViewManager___get_Instance((const MethodInfo_2A54F38 *)Method_SingletonMonoBehaviour_DataManager__get_Instance__);
  if ( !Instance
    || (MasterData_WarQuestSelectionMaster = DataManager__GetMasterData_WarQuestSelectionMaster_(
                                               (DataManager_o *)Instance,
                                               (const MethodInfo_18C3284 *)Method_DataManager_GetMasterData_FunctionMaster___),
        !funclist) )
  {
LABEL_18:
    sub_B170D4();
  }
  v13 = *(_QWORD *)&funclist->max_length;
  if ( (int)v13 < 1 )
    return 0;
  v14 = (DataMasterBase_WarMaster__WarEntity__int__o *)MasterData_WarQuestSelectionMaster;
  v15 = 0LL;
  while ( 1 )
  {
    if ( v15 >= (unsigned int)v13 )
    {
LABEL_19:
      sub_B17100(MasterData_WarQuestSelectionMaster, v11, v12);
      sub_B170A0();
    }
    if ( !v14 )
      goto LABEL_18;
    Entity = DataMasterBase_WarMaster__WarEntity__int___GetEntity(
               v14,
               funclist->m_Items[v15 + 1],
               (const MethodInfo_266F388 *)Method_DataMasterBase_FunctionMaster__FunctionEntity__int__GetEntity__);
    if ( !Entity )
      goto LABEL_18;
    v17 = Entity;
    MasterData_WarQuestSelectionMaster = (WarQuestSelectionMaster_o *)Target__isEnemy(HIDWORD(Entity->fields.age), 0LL);
    if ( ((unsigned __int8)MasterData_WarQuestSelectionMaster & 1) != 0 )
      return 1;
    if ( dataValsArray )
    {
      if ( v15 >= dataValsArray->max_length )
        goto LABEL_19;
      v18 = dataValsArray->m_Items[v15];
      if ( !v18 )
        goto LABEL_18;
      DataVals__SetTempType(dataValsArray->m_Items[v15], (FunctionMaster_o *)v14, (int32_t)v17->fields.age, 0LL);
      DependFuncIdArray = DataVals__GetDependFuncIdArray(v18, 0LL);
      MasterData_WarQuestSelectionMaster = (WarQuestSelectionMaster_o *)BattleLogic__checkEnemyTargetFunction(
                                                                          this,
                                                                          DependFuncIdArray,
                                                                          0LL,
                                                                          v20);
      if ( ((unsigned __int8)MasterData_WarQuestSelectionMaster & 1) != 0 )
        return 1;
    }
    LODWORD(v13) = funclist->max_length;
    if ( (__int64)++v15 >= (int)v13 )
      return 0;
  }
}


void __fastcall BattleLogic__checkEntryMember(
        BattleLogic_o *this,
        System_String_o *endproc,
        bool isTactical,
        bool isEventBonusCheck,
        const MethodInfo *method)
{
  System_Collections_IEnumerator_o *v6; // x1

  v6 = BattleLogic__coroutineEntrySubMember(this, endproc, isTactical, isEventBonusCheck, method);
  UnityEngine_MonoBehaviour__StartCoroutine_34804316((UnityEngine_MonoBehaviour_o *)this, v6, 0LL);
}


void __fastcall BattleLogic__checkFieldAIEntry(BattleLogic_o *this, const MethodInfo *method)
{
  BattleData_o *data; // x0
  BattleData_o *v4; // x0
  BattleLogicFieldAi_o *logicFieldAi; // x0
  BattleLogicTask_array *v6; // x0
  const MethodInfo *v7; // x3
  System_Collections_IEnumerator_o *v8; // x1
  PlayMakerFSM_o *fsm; // x0

  if ( (byte_40F7402 & 1) == 0 )
  {
    sub_B16FFC(&StringLiteral_12204, method);
    byte_40F7402 = 1;
  }
  data = this->fields.data;
  if ( !data )
    goto LABEL_12;
  if ( !BattleData__checkProgressflg(data, 1024, 0LL) )
    goto LABEL_10;
  v4 = this->fields.data;
  if ( !v4
    || (BattleData__offProgressflg(v4, 1024, 0LL), (logicFieldAi = this->fields.logicFieldAi) == 0LL)
    || (v6 = BattleLogicFieldAi__checkFieldAiEntry(logicFieldAi, 0LL)) == 0LL )
  {
LABEL_12:
    sub_B170D4();
  }
  if ( *(_QWORD *)&v6->max_length )
  {
    v8 = BattleLogic__waitWaveStep(this, v6, 1024, v7);
    UnityEngine_MonoBehaviour__StartCoroutine_34804316((UnityEngine_MonoBehaviour_o *)this, v8, 0LL);
    return;
  }
LABEL_10:
  fsm = this->fields.fsm;
  if ( !fsm )
    goto LABEL_12;
  PlayMakerFSM__SendEvent(fsm, (System_String_o *)StringLiteral_12204, 0LL);
}


void __fastcall BattleLogic__checkFieldAIStartTurn(BattleLogic_o *this, const MethodInfo *method)
{
  BattleData_o *data; // x0
  BattleData_o *v4; // x0
  BattleLogicFieldAi_o *logicFieldAi; // x0
  BattleLogicTask_array *v6; // x0
  const MethodInfo *v7; // x3
  System_Collections_IEnumerator_o *v8; // x1
  PlayMakerFSM_o *fsm; // x0

  if ( (byte_40F73B2 & 1) == 0 )
  {
    sub_B16FFC(&StringLiteral_12204, method);
    byte_40F73B2 = 1;
  }
  data = this->fields.data;
  if ( !data )
    goto LABEL_12;
  if ( !BattleData__checkProgressflg(data, 32, 0LL) )
    goto LABEL_10;
  v4 = this->fields.data;
  if ( !v4
    || (BattleData__offProgressflg(v4, 32, 0LL), (logicFieldAi = this->fields.logicFieldAi) == 0LL)
    || (v6 = BattleLogicFieldAi__checkFieldAiStartTurn(logicFieldAi, 0LL)) == 0LL )
  {
LABEL_12:
    sub_B170D4();
  }
  if ( *(_QWORD *)&v6->max_length )
  {
    v8 = BattleLogic__waitWaveStep(this, v6, 32, v7);
    UnityEngine_MonoBehaviour__StartCoroutine_34804316((UnityEngine_MonoBehaviour_o *)this, v8, 0LL);
    return;
  }
LABEL_10:
  fsm = this->fields.fsm;
  if ( !fsm )
    goto LABEL_12;
  PlayMakerFSM__SendEvent(fsm, (System_String_o *)StringLiteral_12204, 0LL);
}


void __fastcall BattleLogic__checkFieldAIStartWave(BattleLogic_o *this, const MethodInfo *method)
{
  BattleData_o *data; // x0
  BattleData_o *v4; // x0
  BattleLogicFieldAi_o *logicFieldAi; // x0
  BattleLogicTask_array *v6; // x0
  const MethodInfo *v7; // x3
  System_Collections_IEnumerator_o *v8; // x1
  PlayMakerFSM_o *fsm; // x0

  if ( (byte_40F73B3 & 1) == 0 )
  {
    sub_B16FFC(&StringLiteral_12204, method);
    byte_40F73B3 = 1;
  }
  data = this->fields.data;
  if ( !data )
    goto LABEL_12;
  if ( !BattleData__checkProgressflg(data, 1, 0LL) )
    goto LABEL_10;
  v4 = this->fields.data;
  if ( !v4
    || (BattleData__offProgressflg(v4, 1, 0LL), (logicFieldAi = this->fields.logicFieldAi) == 0LL)
    || (v6 = BattleLogicFieldAi__checkFieldAiStartWave(logicFieldAi, 0LL)) == 0LL )
  {
LABEL_12:
    sub_B170D4();
  }
  if ( *(_QWORD *)&v6->max_length )
  {
    v8 = BattleLogic__waitWaveStep(this, v6, 1, v7);
    UnityEngine_MonoBehaviour__StartCoroutine_34804316((UnityEngine_MonoBehaviour_o *)this, v8, 0LL);
    return;
  }
LABEL_10:
  fsm = this->fields.fsm;
  if ( !fsm )
    goto LABEL_12;
  PlayMakerFSM__SendEvent(fsm, (System_String_o *)StringLiteral_12204, 0LL);
}


void __fastcall BattleLogic__checkFirstEntry(BattleLogic_o *this, const MethodInfo *method)
{
  __int64 v3; // x1
  __int64 v4; // x1
  __int64 v5; // x1
  __int64 v6; // x1
  __int64 v7; // x1
  __int64 v8; // x1
  __int64 v9; // x1
  __int64 v10; // x1
  BattleData_o *data; // x0
  BattleData_o *v12; // x0
  __int64 v13; // x1
  __int64 v14; // x2
  __int64 v15; // x3
  __int64 v16; // x4
  System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData__o *v17; // x20
  BattleData_o *v18; // x0
  __int64 FieldServantList; // x0
  __int64 v20; // x1
  __int64 v21; // x2
  int v22; // w8
  __int64 v23; // x25
  unsigned int v24; // w26
  __int64 v25; // x8
  BattleServantData_o *v26; // x22
  __int64 v27; // x3
  __int64 v28; // x4
  BattleBuffData_o *buffData; // x23
  BattleBuffData_CheckIndividualitiesData_o *v30; // x24
  __int64 v31; // x3
  __int64 v32; // x4
  int v33; // w8
  __int64 v34; // x23
  unsigned int v35; // w28
  __int64 v36; // x25
  BattleSkillInfoData_o *v37; // x24
  __int64 v38; // x8
  __int64 v39; // x8
  BattleLogicSkill_o *logicSkill; // x25
  System_Collections_Generic_IEnumerable_T__o *v41; // x0
  BattleBuffData_o *v42; // x0
  BattleLogicTask_array *v43; // x0
  const MethodInfo *v44; // x3
  System_Collections_IEnumerator_o *v45; // x1
  PlayMakerFSM_o *fsm; // x0
  __int64 v47; // [xsp+8h] [xbp-58h]

  if ( (byte_40F73BA & 1) == 0 )
  {
    sub_B16FFC(&BattleSkillInfoData_TypeInfo, method);
    sub_B16FFC(&BattleBuffData_CheckIndividualitiesData_TypeInfo, v3);
    sub_B16FFC(&int___TypeInfo, v4);
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleLogicTask__AddRange__, v5);
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleLogicTask__ToArray__, v6);
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleLogicTask___ctor__, v7);
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleLogicTask__get_Count__, v8);
    sub_B16FFC(&System_Collections_Generic_List_BattleLogicTask__TypeInfo, v9);
    sub_B16FFC(&StringLiteral_12204, v10);
    byte_40F73BA = 1;
  }
  data = this->fields.data;
  if ( !data )
    goto LABEL_38;
  if ( !BattleData__checkProgressflg(data, 8, 0LL) )
    goto LABEL_36;
  v12 = this->fields.data;
  if ( !v12 )
    goto LABEL_38;
  BattleData__offProgressflg(v12, 8, 0LL);
  v17 = (System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData__o *)sub_B170CC(
                                                                                                  System_Collections_Generic_List_BattleLogicTask__TypeInfo,
                                                                                                  v13,
                                                                                                  v14,
                                                                                                  v15,
                                                                                                  v16);
  System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData____ctor(
    v17,
    (const MethodInfo_2F25014 *)Method_System_Collections_Generic_List_BattleLogicTask___ctor__);
  v18 = this->fields.data;
  if ( !v18 )
    goto LABEL_38;
  FieldServantList = (__int64)BattleData__getFieldServantList(v18, 0, 0LL);
  if ( !FieldServantList )
    goto LABEL_38;
  v22 = *(_DWORD *)(FieldServantList + 24);
  v23 = FieldServantList;
  if ( v22 >= 1 )
  {
    v24 = 0;
    v47 = FieldServantList;
    do
    {
      if ( v24 >= v22 )
        goto LABEL_39;
      v25 = v23 + 8LL * (int)v24;
      v26 = *(BattleServantData_o **)(v25 + 32);
      if ( !v26 )
        goto LABEL_38;
      FieldServantList = BattleServantData__isAlive(*(BattleServantData_o **)(v25 + 32), 0, 0LL);
      if ( (FieldServantList & 1) != 0 && v26->fields.flgEntryFunction )
      {
        v26->fields.flgEntryFunction = 0;
        buffData = v26->fields.buffData;
        v30 = (BattleBuffData_CheckIndividualitiesData_o *)sub_B170CC(
                                                             BattleBuffData_CheckIndividualitiesData_TypeInfo,
                                                             v20,
                                                             v21,
                                                             v27,
                                                             v28);
        BattleBuffData_CheckIndividualitiesData___ctor(v30, v26, 0LL, 0LL, 0LL, 0LL, 0LL);
        if ( !buffData )
          goto LABEL_38;
        FieldServantList = (__int64)BattleBuffData__getBuffList_31040328(buffData, 59, v30, 1, 0, 0LL);
        if ( !FieldServantList )
          goto LABEL_38;
        v33 = *(_DWORD *)(FieldServantList + 24);
        v34 = FieldServantList;
        if ( v33 >= 1 )
        {
          v35 = 0;
          while ( v35 < v33 )
          {
            v36 = *(_QWORD *)(v34 + 8LL * (int)v35 + 32);
            v37 = (BattleSkillInfoData_o *)sub_B170CC(BattleSkillInfoData_TypeInfo, v20, v21, v31, v32);
            BattleSkillInfoData___ctor(v37, 0LL);
            if ( !v37 )
              goto LABEL_38;
            v37->fields.svtUniqueId = v26->fields.uniqueId;
            if ( !v36 )
              goto LABEL_38;
            v38 = *(_QWORD *)(v36 + 40);
            if ( !v38 )
              goto LABEL_38;
            if ( !*(_DWORD *)(v38 + 24) )
              break;
            FieldServantList = ((__int64 (__fastcall *)(BattleSkillInfoData_o *, _QWORD, Il2CppMethodPointer))v37->klass->vtable._4_set_skillId.method)(
                                 v37,
                                 *(unsigned int *)(v38 + 32),
                                 v37->klass->vtable._5_get_skillId.methodPtr);
            v39 = *(_QWORD *)(v36 + 40);
            if ( !v39 )
              goto LABEL_38;
            if ( *(_DWORD *)(v39 + 24) <= 1u )
              break;
            v37->fields.skilllv = *(_DWORD *)(v39 + 36);
            logicSkill = this->fields.logicSkill;
            FieldServantList = sub_B17014(int___TypeInfo, 1LL, v21);
            if ( !FieldServantList )
              goto LABEL_38;
            v21 = FieldServantList;
            if ( !*(_DWORD *)(FieldServantList + 24) )
              break;
            *(_DWORD *)(FieldServantList + 32) = v26->fields.uniqueId;
            if ( !logicSkill )
              goto LABEL_38;
            v41 = (System_Collections_Generic_IEnumerable_T__o *)BattleLogicSkill__taskSkill(
                                                                   logicSkill,
                                                                   v37,
                                                                   (System_Int32_array *)FieldServantList,
                                                                   0LL,
                                                                   0,
                                                                   0,
                                                                   0,
                                                                   0LL);
            if ( !v17 )
              goto LABEL_38;
            System_Collections_Generic_List_TimeZoneInfo_AdjustmentRule___AddRange(
              (System_Collections_Generic_List_TimeZoneInfo_AdjustmentRule__o *)v17,
              v41,
              (const MethodInfo_2F25F28 *)Method_System_Collections_Generic_List_BattleLogicTask__AddRange__);
            v33 = *(_DWORD *)(v34 + 24);
            if ( (int)++v35 >= v33 )
              goto LABEL_30;
          }
LABEL_39:
          sub_B17100(FieldServantList, v20, v21);
          sub_B170A0();
        }
LABEL_30:
        v42 = v26->fields.buffData;
        if ( !v42 )
          goto LABEL_38;
        FieldServantList = (__int64)BattleBuffData__usedProgressing(v42, 0LL);
        v23 = v47;
      }
      v22 = *(_DWORD *)(v23 + 24);
    }
    while ( (int)++v24 < v22 );
  }
  if ( !v17 )
LABEL_38:
    sub_B170D4();
  if ( v17->fields._size >= 1 )
  {
    v43 = (BattleLogicTask_array *)System_Collections_Generic_List_WarBoardUiData_SaveData___ToArray(
                                     (System_Collections_Generic_List_WarBoardUiData_SaveData__o *)v17,
                                     (const MethodInfo_2F27E24 *)Method_System_Collections_Generic_List_BattleLogicTask__ToArray__);
    v45 = BattleLogic__waitWaveStep(this, v43, 8, v44);
    UnityEngine_MonoBehaviour__StartCoroutine_34804316((UnityEngine_MonoBehaviour_o *)this, v45, 0LL);
    return;
  }
LABEL_36:
  fsm = this->fields.fsm;
  if ( !fsm )
    goto LABEL_38;
  PlayMakerFSM__SendEvent(fsm, (System_String_o *)StringLiteral_12204, 0LL);
}


bool __fastcall BattleLogic__checkFunctionTargetsAvailable(
        BattleLogic_o *this,
        System_Int32_array *funclist,
        int32_t actorUniqueId,
        const MethodInfo *method)
{
  __int64 v5; // x1
  __int64 v6; // x1
  WebViewManager_o *Instance; // x0
  WarQuestSelectionMaster_o *MasterData_WarQuestSelectionMaster; // x0
  __int64 v9; // x1
  __int64 v10; // x2
  __int64 v11; // x8
  DataMasterBase_WarMaster__WarEntity__int__o *v12; // x22
  int v13; // w26
  unsigned __int64 v14; // x27
  char v15; // w24
  int v16; // w25
  int v17; // w28
  int v18; // w19
  WarEntity_o *Entity; // x0
  WarEntity_o *v20; // x23
  BattleLogicFunction_o *logicFunction; // x0
  BattleLogicFunctionProcess_BaseFunctionTypeProcess_o *FunctionTypeProcess; // x0
  BattleData_o *data; // x0
  System_Int32_array *AliveFieldPlayerServantIDList; // x0
  BattleData_o *v25; // x0
  BattleData_o *v26; // x0
  System_Int32_array *AliveFieldEnemyServantIDList; // x0
  BattleData_o *v28; // x0

  if ( (byte_40F73E5 & 1) == 0 )
  {
    sub_B16FFC(&Method_DataManager_GetMasterData_FunctionMaster___, funclist);
    sub_B16FFC(&Method_DataMasterBase_FunctionMaster__FunctionEntity__int__GetEntity__, v5);
    sub_B16FFC(&Method_SingletonMonoBehaviour_DataManager__get_Instance__, v6);
    byte_40F73E5 = 1;
  }
  Instance = SingletonMonoBehaviour_WebViewManager___get_Instance((const MethodInfo_2A54F38 *)Method_SingletonMonoBehaviour_DataManager__get_Instance__);
  if ( !Instance )
    goto LABEL_33;
  MasterData_WarQuestSelectionMaster = DataManager__GetMasterData_WarQuestSelectionMaster_(
                                         (DataManager_o *)Instance,
                                         (const MethodInfo_18C3284 *)Method_DataManager_GetMasterData_FunctionMaster___);
  if ( !funclist )
    goto LABEL_33;
  v11 = *(_QWORD *)&funclist->max_length;
  if ( (int)v11 < 1 )
    return 1;
  v12 = (DataMasterBase_WarMaster__WarEntity__int__o *)MasterData_WarQuestSelectionMaster;
  v13 = 0;
  v14 = 0LL;
  v15 = 1;
  v16 = 1;
  v17 = 1;
  v18 = 1;
  do
  {
    if ( v14 >= (unsigned int)v11 )
    {
      sub_B17100(MasterData_WarQuestSelectionMaster, v9, v10);
      sub_B170A0();
    }
    if ( !v12 )
      goto LABEL_33;
    Entity = DataMasterBase_WarMaster__WarEntity__int___GetEntity(
               v12,
               funclist->m_Items[v14 + 1],
               (const MethodInfo_266F388 *)Method_DataMasterBase_FunctionMaster__FunctionEntity__int__GetEntity__);
    if ( !Entity )
      goto LABEL_33;
    v20 = Entity;
    logicFunction = this->fields.logicFunction;
    if ( !logicFunction )
      goto LABEL_33;
    FunctionTypeProcess = BattleLogicFunction__getFunctionTypeProcess(logicFunction, (int32_t)v20->fields.age, 0LL);
    if ( !FunctionTypeProcess )
      goto LABEL_33;
    v13 |= ((__int64 (__fastcall *)(BattleLogicFunctionProcess_BaseFunctionTypeProcess_o *, WarEntity_o *, _QWORD, Il2CppMethodPointer))FunctionTypeProcess->klass->vtable._5_IsPreCheckTargetsAvailable.method)(
             FunctionTypeProcess,
             v20,
             (unsigned int)actorUniqueId,
             FunctionTypeProcess->klass->vtable._6_checkCommonCondition.methodPtr);
    v18 &= Target__isFieldPlayer(HIDWORD(v20->fields.age), 0LL);
    v17 &= Target__isPlayer(HIDWORD(v20->fields.age), 0LL);
    v16 &= Target__isFieldEnemy(HIDWORD(v20->fields.age), 0LL);
    MasterData_WarQuestSelectionMaster = (WarQuestSelectionMaster_o *)Target__isEnemy(HIDWORD(v20->fields.age), 0LL);
    LODWORD(v11) = funclist->max_length;
    ++v14;
    v15 &= (unsigned __int8)MasterData_WarQuestSelectionMaster;
  }
  while ( (__int64)v14 < (int)v11 );
  if ( (v13 & 1) == 0 )
    return 1;
  if ( (v18 & 1) != 0 )
  {
    data = this->fields.data;
    if ( !data )
      goto LABEL_33;
    AliveFieldPlayerServantIDList = BattleData__getAliveFieldPlayerServantIDList(data, 0LL, 0LL);
    if ( !AliveFieldPlayerServantIDList )
      goto LABEL_33;
    if ( !*(_QWORD *)&AliveFieldPlayerServantIDList->max_length )
      return 0;
  }
  else if ( (v17 & 1) != 0 )
  {
    v25 = this->fields.data;
    if ( !v25 )
      goto LABEL_33;
    if ( !BattleData__checkAlivePlayers(v25, 0LL) )
      return 0;
  }
  if ( (v16 & 1) != 0 )
  {
    v26 = this->fields.data;
    if ( v26 )
    {
      AliveFieldEnemyServantIDList = BattleData__getAliveFieldEnemyServantIDList(v26, 1, 0LL);
      if ( AliveFieldEnemyServantIDList )
        return *(_QWORD *)&AliveFieldEnemyServantIDList->max_length != 0;
    }
    goto LABEL_33;
  }
  if ( (v15 & 1) == 0 )
    return 1;
  v28 = this->fields.data;
  if ( !v28 )
LABEL_33:
    sub_B170D4();
  return BattleData__checkAliveEnemys(v28, 0LL);
}


void __fastcall BattleLogic__checkGimmick(BattleLogic_o *this, const MethodInfo *method)
{
  BattleData_o *data; // x0
  BattleData_o *v4; // x0
  BattleData_o *v5; // x0
  BattleLogicSkill_o *logicSkill; // x0
  BattleLogicTask_array *GimmickTask; // x0
  const MethodInfo *v8; // x3
  System_Collections_IEnumerator_o *v9; // x1
  PlayMakerFSM_o *fsm; // x0

  if ( (byte_40F73B8 & 1) == 0 )
  {
    sub_B16FFC(&StringLiteral_12204, method);
    byte_40F73B8 = 1;
  }
  data = this->fields.data;
  if ( !data )
    goto LABEL_14;
  if ( !BattleData__checkProgressflg(data, 128, 0LL) )
    goto LABEL_12;
  v4 = this->fields.data;
  if ( !v4 || (BattleData__offProgressflg(v4, 128, 0LL), (v5 = this->fields.data) == 0LL) )
LABEL_14:
    sub_B170D4();
  if ( BattleData__isFirstStage(v5, 0LL) )
  {
    logicSkill = this->fields.logicSkill;
    if ( !logicSkill )
      goto LABEL_14;
    GimmickTask = BattleLogicSkill__getGimmickTask(logicSkill, 0LL);
    if ( GimmickTask && *(_QWORD *)&GimmickTask->max_length )
    {
      v9 = BattleLogic__waitWaveStep(this, GimmickTask, 128, v8);
      UnityEngine_MonoBehaviour__StartCoroutine_34804316((UnityEngine_MonoBehaviour_o *)this, v9, 0LL);
      return;
    }
  }
LABEL_12:
  fsm = this->fields.fsm;
  if ( !fsm )
    goto LABEL_14;
  PlayMakerFSM__SendEvent(fsm, (System_String_o *)StringLiteral_12204, 0LL);
}


// local variable allocation has failed, the output may be wrong!
BattleLogicTask_array *__fastcall BattleLogic__checkImmediateEntry(
        BattleLogic_o *this,
        int32_t ltype,
        BattleData_o *data,
        const MethodInfo *method)
{
  __int64 v5; // x1
  __int64 v6; // x1
  __int64 v7; // x1
  __int64 v8; // x1
  struct BattleData_o *v9; // x8
  QuestEntity_o *quest_ent; // x0
  __int64 v11; // x1
  __int64 v12; // x2
  __int64 v13; // x3
  __int64 v14; // x4
  System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData__o *v15; // x20
  const MethodInfo *v16; // x1
  const MethodInfo *v17; // x3
  _BOOL8 v18; // x0
  const MethodInfo *v19; // x1
  System_Collections_Generic_IEnumerable_T__o *ImmediateEntryMember; // x0

  if ( (byte_40F739B & 1) == 0 )
  {
    sub_B16FFC(&BattleLogicTask___TypeInfo, *(_QWORD *)&ltype);
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleLogicTask__AddRange__, v5);
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleLogicTask__ToArray__, v6);
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleLogicTask___ctor__, v7);
    sub_B16FFC(&System_Collections_Generic_List_BattleLogicTask__TypeInfo, v8);
    byte_40F739B = 1;
  }
  v9 = this->fields.data;
  this->fields.isPlayImmediateEntry = 0;
  if ( !v9 )
    goto LABEL_13;
  quest_ent = v9->fields.quest_ent;
  if ( !quest_ent )
    goto LABEL_13;
  if ( !QuestEntity__HasFlag(quest_ent, 0x40000000000000LL, 0LL) )
    return (BattleLogicTask_array *)sub_B17014(BattleLogicTask___TypeInfo, 0LL, v12);
  v15 = (System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData__o *)sub_B170CC(
                                                                                                  System_Collections_Generic_List_BattleLogicTask__TypeInfo,
                                                                                                  v11,
                                                                                                  v12,
                                                                                                  v13,
                                                                                                  v14);
  System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData____ctor(
    v15,
    (const MethodInfo_2F25014 *)Method_System_Collections_Generic_List_BattleLogicTask___ctor__);
  if ( BattleLogic__existOverKillTarget(this, v16)
    || !(v18 = BattleLogic__checkImmediateEntrySubMember(this, 0, 0, v17)) )
  {
    if ( v15 )
      return (BattleLogicTask_array *)System_Collections_Generic_List_WarBoardUiData_SaveData___ToArray(
                                        (System_Collections_Generic_List_WarBoardUiData_SaveData__o *)v15,
                                        (const MethodInfo_2F27E24 *)Method_System_Collections_Generic_List_BattleLogicTask__ToArray__);
LABEL_13:
    sub_B170D4();
  }
  ImmediateEntryMember = (System_Collections_Generic_IEnumerable_T__o *)BattleLogic__loadImmediateEntryMember(
                                                                          (BattleLogic_o *)v18,
                                                                          v19);
  if ( !v15 )
    goto LABEL_13;
  System_Collections_Generic_List_TimeZoneInfo_AdjustmentRule___AddRange(
    (System_Collections_Generic_List_TimeZoneInfo_AdjustmentRule__o *)v15,
    ImmediateEntryMember,
    (const MethodInfo_2F25F28 *)Method_System_Collections_Generic_List_BattleLogicTask__AddRange__);
  return (BattleLogicTask_array *)System_Collections_Generic_List_WarBoardUiData_SaveData___ToArray(
                                    (System_Collections_Generic_List_WarBoardUiData_SaveData__o *)v15,
                                    (const MethodInfo_2F27E24 *)Method_System_Collections_Generic_List_BattleLogicTask__ToArray__);
}


// local variable allocation has failed, the output may be wrong!
bool __fastcall BattleLogic__checkImmediateEntrySubMember(
        BattleLogic_o *this,
        bool isTactical,
        bool isEventBonusCheck,
        const MethodInfo *method)
{
  __int64 v5; // x1
  __int64 v6; // x1
  __int64 v7; // x1
  __int64 v8; // x1
  BattleData_o *data; // x0
  unsigned __int64 v10; // x21
  struct System_Int32_array *e_entryid; // x8
  unsigned __int64 max_length; // x9
  BattleServantData_o *EnemyServantData; // x0
  __int64 v14; // x1
  __int64 v15; // x2
  __int64 v16; // x3
  __int64 v17; // x4
  BattleLogic___c_c *v18; // x8
  Il2CppObject *v19; // x22
  struct BattleLogic___c_StaticFields *static_fields; // x9
  System_Predicate_peRenderTexture_ChangeLayerObject__o *_9__80_0; // x23
  Il2CppObject *v22; // x24
  struct BattleLogic___c_StaticFields *v23; // x0
  __int64 v24; // x8
  BattleServantData_o *ImmediateRestockServant; // x0
  bool v27; // [xsp+Ch] [xbp-54h]

  v27 = isEventBonusCheck;
  if ( (byte_40F7361 & 1) == 0 )
  {
    sub_B16FFC(&Method_BasicHelper_TakeIf_BattleServantData___, isTactical);
    sub_B16FFC(&Method_System_Predicate_BattleServantData___ctor__, v5);
    sub_B16FFC(&System_Predicate_BattleServantData__TypeInfo, v6);
    sub_B16FFC(&Method_BattleLogic___c__checkImmediateEntrySubMember_b__80_0__, v7);
    sub_B16FFC(&BattleLogic___c_TypeInfo, v8);
    byte_40F7361 = 1;
  }
  data = this->fields.data;
  if ( !data )
LABEL_28:
    sub_B170D4();
  v10 = 0LL;
  while ( 1 )
  {
    e_entryid = data->fields.e_entryid;
    if ( !e_entryid )
      goto LABEL_28;
    max_length = e_entryid->max_length;
    if ( (__int64)v10 >= (int)max_length )
      return 0;
    if ( v10 >= max_length )
      goto LABEL_29;
    EnemyServantData = BattleData__getEnemyServantData(data, e_entryid->m_Items[v10 + 1], 0LL);
    v18 = BattleLogic___c_TypeInfo;
    v19 = (Il2CppObject *)EnemyServantData;
    if ( (BYTE3(BattleLogic___c_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0
      && !BattleLogic___c_TypeInfo->_2.cctor_finished )
    {
      j_il2cpp_runtime_class_init_0(BattleLogic___c_TypeInfo);
      v18 = BattleLogic___c_TypeInfo;
    }
    static_fields = v18->static_fields;
    _9__80_0 = (System_Predicate_peRenderTexture_ChangeLayerObject__o *)static_fields->__9__80_0;
    if ( !_9__80_0 )
    {
      if ( (BYTE3(v18->vtable._0_Equals.methodPtr) & 4) != 0 && !v18->_2.cctor_finished )
      {
        j_il2cpp_runtime_class_init_0(v18);
        static_fields = BattleLogic___c_TypeInfo->static_fields;
      }
      v22 = (Il2CppObject *)static_fields->__9;
      _9__80_0 = (System_Predicate_peRenderTexture_ChangeLayerObject__o *)sub_B170CC(
                                                                            System_Predicate_BattleServantData__TypeInfo,
                                                                            v14,
                                                                            v15,
                                                                            v16,
                                                                            v17);
      System_Predicate_peRenderTexture_ChangeLayerObject____ctor(
        _9__80_0,
        v22,
        Method_BattleLogic___c__checkImmediateEntrySubMember_b__80_0__,
        (const MethodInfo_2B0B204 *)Method_System_Predicate_BattleServantData___ctor__);
      v23 = BattleLogic___c_TypeInfo->static_fields;
      v23->__9__80_0 = (struct System_Predicate_BattleServantData__o *)_9__80_0;
      sub_B16F98(&v23->__9__80_0, _9__80_0);
    }
    data = (BattleData_o *)BasicHelper__TakeIf_object_(
                             v19,
                             (System_Predicate_T__o *)_9__80_0,
                             (const MethodInfo_18B8DB8 *)Method_BasicHelper_TakeIf_BattleServantData___);
    if ( !data )
    {
      *(_QWORD *)&isEventBonusCheck = this->fields.data;
      if ( !isEventBonusCheck )
        goto LABEL_28;
      v24 = *(_QWORD *)(isEventBonusCheck + 336LL);
      if ( !v24 )
        goto LABEL_28;
      if ( v10 >= *(unsigned int *)(v24 + 24) )
      {
LABEL_29:
        sub_B17100(data, isTactical, isEventBonusCheck);
        sub_B170A0();
      }
      if ( *(_BYTE *)(v24 + v10 + 32) )
      {
        ImmediateRestockServant = RestockServantLogic__GetImmediateRestockServant(
                                    v10,
                                    1,
                                    (BattleData_o *)isEventBonusCheck,
                                    0LL);
        if ( ImmediateRestockServant )
        {
          if ( !v27 || ImmediateRestockServant->fields.isAddition )
            return 1;
        }
      }
    }
    data = this->fields.data;
    ++v10;
    if ( !data )
      goto LABEL_28;
  }
}


bool __fastcall BattleLogic__checkInField(BattleLogic_o *this, int32_t uniqueId, const MethodInfo *method)
{
  BattleData_o *data; // x0
  BattleServantData_array *FieldServantList; // x0
  __int64 v6; // x1
  __int64 v7; // x2
  int max_length; // w8
  BattleServantData_array *v9; // x20
  unsigned int v10; // w22
  Il2CppClass **v11; // x8
  Il2CppClass *v12; // x21

  data = this->fields.data;
  if ( !data || (FieldServantList = BattleData__getFieldServantList(data, 0, 0LL)) == 0LL )
LABEL_12:
    sub_B170D4();
  max_length = FieldServantList->max_length;
  v9 = FieldServantList;
  if ( max_length < 1 )
    return 0;
  v10 = 0;
  while ( 1 )
  {
    if ( v10 >= max_length )
    {
      sub_B17100(FieldServantList, v6, v7);
      sub_B170A0();
    }
    v11 = &v9->obj.klass + (int)v10;
    v12 = v11[4];
    if ( !v12 )
      goto LABEL_12;
    FieldServantList = (BattleServantData_array *)BattleServantData__isAlive((BattleServantData_o *)v11[4], 0, 0LL);
    if ( ((unsigned __int8)FieldServantList & 1) != 0 && LODWORD(v12->_1.namespaze) == uniqueId )
      return 1;
    max_length = v9->max_length;
    if ( (int)++v10 >= max_length )
      return 0;
  }
}


void __fastcall BattleLogic__checkNextBattle(BattleLogic_o *this, System_String_o *endproc, const MethodInfo *method)
{
  __int64 v4; // x1
  BattleData_o *data; // x0
  BattleData_o *v6; // x0
  bool exists; // w0
  __int64 *v8; // x9

  if ( (byte_40F73A7 & 1) == 0 )
  {
    sub_B16FFC(&StringLiteral_5610, endproc);
    sub_B16FFC(&StringLiteral_5632, v4);
    byte_40F73A7 = 1;
  }
  data = this->fields.data;
  if ( !data
    || (BattleData__saveKnockdownEachWave(data, 0LL), (v6 = this->fields.data) == 0LL)
    || (exists = BattleData__existsNextBattle(v6, 0LL), !this->fields.fsm) )
  {
    sub_B170D4();
  }
  if ( exists )
    v8 = &StringLiteral_5632;
  else
    v8 = &StringLiteral_5610;
  PlayMakerFSM__SendEvent(this->fields.fsm, (System_String_o *)*v8, 0LL);
}


// local variable allocation has failed, the output may be wrong!
BattleLogicTask_array *__fastcall BattleLogic__checkOverKill(
        BattleLogic_o *this,
        int32_t ltype,
        BattleData_o *data,
        const MethodInfo *method)
{
  __int64 v4; // x4
  __int64 v6; // x1
  __int64 v7; // x1
  __int64 v8; // x1
  __int64 v9; // x1
  System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData__o *v10; // x19
  struct BattleData_o *v11; // x8
  struct BaseBattleEvent_o *battleEvent; // x0
  BattleLogicNomal_o *logicnomal; // x0
  const MethodInfo *v14; // x1
  __int64 v15; // x1
  __int64 v16; // x2
  __int64 v17; // x3
  __int64 v18; // x4
  __int64 v19; // x20

  if ( (byte_40F739A & 1) == 0 )
  {
    sub_B16FFC(&BattleLogicTask_TypeInfo, *(_QWORD *)&ltype);
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleLogicTask__Add__, v6);
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleLogicTask__ToArray__, v7);
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleLogicTask___ctor__, v8);
    sub_B16FFC(&System_Collections_Generic_List_BattleLogicTask__TypeInfo, v9);
    byte_40F739A = 1;
  }
  v10 = (System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData__o *)sub_B170CC(
                                                                                                  System_Collections_Generic_List_BattleLogicTask__TypeInfo,
                                                                                                  *(_QWORD *)&ltype,
                                                                                                  data,
                                                                                                  method,
                                                                                                  v4);
  System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData____ctor(
    v10,
    (const MethodInfo_2F25014 *)Method_System_Collections_Generic_List_BattleLogicTask___ctor__);
  v11 = this->fields.data;
  if ( !v11 )
    goto LABEL_14;
  battleEvent = v11->fields.battleEvent;
  if ( !battleEvent )
    goto LABEL_14;
  if ( (((__int64 (__fastcall *)(struct BaseBattleEvent_o *, Il2CppMethodPointer))battleEvent->klass->vtable._30_IsCommandAttackable.method)(
          battleEvent,
          battleEvent->klass->vtable._31_CheckBuffCommonProgressTurn.methodPtr) & 1) != 0 )
  {
    logicnomal = this->fields.logicnomal;
    if ( !logicnomal )
      goto LABEL_14;
    if ( !BattleLogicNomal__checkOverKill(logicnomal, 0LL) )
    {
      BattleLogic__resetOverKill(this, v14);
      v19 = sub_B170CC(BattleLogicTask_TypeInfo, v15, v16, v17, v18);
      BattleLogicTask___ctor((BattleLogicTask_o *)v19, 0LL);
      if ( v19 )
      {
        *(_BYTE *)(v19 + 181) = 1;
        BattleLogicTask__setSystem((BattleLogicTask_o *)v19, 0LL);
        *(_DWORD *)(v19 + 124) = 0;
        if ( v10 )
        {
          System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData___Add(
            v10,
            (EventMissionProgressRequest_Argument_ProgressData_o *)v19,
            (const MethodInfo_2F25CD8 *)Method_System_Collections_Generic_List_BattleLogicTask__Add__);
          return (BattleLogicTask_array *)System_Collections_Generic_List_WarBoardUiData_SaveData___ToArray(
                                            (System_Collections_Generic_List_WarBoardUiData_SaveData__o *)v10,
                                            (const MethodInfo_2F27E24 *)Method_System_Collections_Generic_List_BattleLogicTask__ToArray__);
        }
      }
LABEL_14:
      sub_B170D4();
    }
  }
  if ( !v10 )
    goto LABEL_14;
  return (BattleLogicTask_array *)System_Collections_Generic_List_WarBoardUiData_SaveData___ToArray(
                                    (System_Collections_Generic_List_WarBoardUiData_SaveData__o *)v10,
                                    (const MethodInfo_2F27E24 *)Method_System_Collections_Generic_List_BattleLogicTask__ToArray__);
}


bool __fastcall BattleLogic__checkPtTargetFunction(
        BattleLogic_o *this,
        System_Int32_array *funclist,
        const MethodInfo *method)
{
  __int64 v4; // x1
  __int64 v5; // x1
  WebViewManager_o *Instance; // x0
  WarQuestSelectionMaster_o *MasterData_WarQuestSelectionMaster; // x0
  __int64 v8; // x1
  __int64 v9; // x2
  __int64 v10; // x8
  DataMasterBase_WarMaster__WarEntity__int__o *v11; // x20
  unsigned __int64 v12; // x21
  WarEntity_o *Entity; // x0

  if ( (byte_40F73E4 & 1) == 0 )
  {
    sub_B16FFC(&Method_DataManager_GetMasterData_FunctionMaster___, funclist);
    sub_B16FFC(&Method_DataMasterBase_FunctionMaster__FunctionEntity__int__GetEntity__, v4);
    sub_B16FFC(&Method_SingletonMonoBehaviour_DataManager__get_Instance__, v5);
    byte_40F73E4 = 1;
  }
  Instance = SingletonMonoBehaviour_WebViewManager___get_Instance((const MethodInfo_2A54F38 *)Method_SingletonMonoBehaviour_DataManager__get_Instance__);
  if ( !Instance
    || (MasterData_WarQuestSelectionMaster = DataManager__GetMasterData_WarQuestSelectionMaster_(
                                               (DataManager_o *)Instance,
                                               (const MethodInfo_18C3284 *)Method_DataManager_GetMasterData_FunctionMaster___),
        !funclist) )
  {
LABEL_14:
    sub_B170D4();
  }
  v10 = *(_QWORD *)&funclist->max_length;
  if ( (int)v10 < 1 )
    return 0;
  v11 = (DataMasterBase_WarMaster__WarEntity__int__o *)MasterData_WarQuestSelectionMaster;
  v12 = 0LL;
  while ( 1 )
  {
    if ( v12 >= (unsigned int)v10 )
    {
      sub_B17100(MasterData_WarQuestSelectionMaster, v8, v9);
      sub_B170A0();
    }
    if ( !v11 )
      goto LABEL_14;
    Entity = DataMasterBase_WarMaster__WarEntity__int___GetEntity(
               v11,
               funclist->m_Items[v12 + 1],
               (const MethodInfo_266F388 *)Method_DataMasterBase_FunctionMaster__FunctionEntity__int__GetEntity__);
    if ( !Entity )
      goto LABEL_14;
    MasterData_WarQuestSelectionMaster = (WarQuestSelectionMaster_o *)Target__isPlayer(HIDWORD(Entity->fields.age), 0LL);
    if ( ((unsigned __int8)MasterData_WarQuestSelectionMaster & 1) != 0 )
      return 1;
    LODWORD(v10) = funclist->max_length;
    if ( (__int64)++v12 >= (int)v10 )
      return 0;
  }
}


void __fastcall BattleLogic__checkQuestBehavior(BattleLogic_o *this, const MethodInfo *method)
{
  BattleData_o *data; // x0
  BattleData_o *v4; // x0
  BattleData_o *v5; // x0
  BattleLogicSkill_o *logicSkill; // x0
  BattleLogicTask_array *QuestBehaviorSkillTask; // x0
  const MethodInfo *v8; // x3
  System_Collections_IEnumerator_o *v9; // x1
  PlayMakerFSM_o *fsm; // x0

  if ( (byte_40F73B7 & 1) == 0 )
  {
    sub_B16FFC(&StringLiteral_12204, method);
    byte_40F73B7 = 1;
  }
  data = this->fields.data;
  if ( !data )
    goto LABEL_14;
  if ( !BattleData__checkProgressflg(data, 64, 0LL) )
    goto LABEL_12;
  v4 = this->fields.data;
  if ( !v4 || (BattleData__offProgressflg(v4, 64, 0LL), (v5 = this->fields.data) == 0LL) )
LABEL_14:
    sub_B170D4();
  if ( BattleData__isFirstStage(v5, 0LL) )
  {
    logicSkill = this->fields.logicSkill;
    if ( !logicSkill )
      goto LABEL_14;
    QuestBehaviorSkillTask = BattleLogicSkill__getQuestBehaviorSkillTask(logicSkill, 0LL);
    if ( QuestBehaviorSkillTask && *(_QWORD *)&QuestBehaviorSkillTask->max_length )
    {
      v9 = BattleLogic__waitWaveStep(this, QuestBehaviorSkillTask, 64, v8);
      UnityEngine_MonoBehaviour__StartCoroutine_34804316((UnityEngine_MonoBehaviour_o *)this, v9, 0LL);
      return;
    }
  }
LABEL_12:
  fsm = this->fields.fsm;
  if ( !fsm )
    goto LABEL_14;
  PlayMakerFSM__SendEvent(fsm, (System_String_o *)StringLiteral_12204, 0LL);
}


bool __fastcall BattleLogic__checkRelationTask(BattleLogic_o *this, BattleLogicTask_o *task, const MethodInfo *method)
{
  __int64 v3; // x3
  __int64 v4; // x4
  __int64 v7; // x1
  __int64 v8; // x1
  __int64 v9; // x1
  __int64 v10; // x1
  __int64 v11; // x1
  __int64 v12; // x1
  __int64 v13; // x1
  System_Collections_Generic_Stack_DtdParser_ParseElementOnlyContent_LocalFrame__o *v14; // x20
  BattleLogicReaction_o *logicReaction; // x0
  BattleLogicTask_array *v16; // x0
  __int64 v17; // x1
  const MethodInfo *v18; // x2
  __int64 v19; // x8
  BattleLogicTask_array *v20; // x22
  unsigned __int64 v21; // x23
  BattleLogicReaction_o *v22; // x0
  __int64 v23; // x8
  BattleLogicTask_array *v24; // x22
  unsigned __int64 v25; // x23
  BattleLogicReaction_o *v26; // x0
  __int64 v27; // x8
  BattleLogicTask_array *v28; // x22
  unsigned __int64 v29; // x23
  BattleLogicReaction_o *v30; // x0
  __int64 v31; // x8
  BattleLogicTask_array *v32; // x22
  unsigned __int64 v33; // x23
  bool v34; // w0
  BattleLogicTask_o *prevTask; // x1
  BattleLogicTask_o *v36; // x0
  BattlePerformance_o *perf; // x22
  BattleLogicNomal_o *logicnomal; // x23
  int32_t ActorId; // w0
  BattleActionData_o *BackStep; // x0
  BattlePerformance_o *v41; // x22
  __int64 v42; // x1
  __int64 v43; // x2
  __int64 v44; // x3
  __int64 v45; // x4
  BattleLogicTask_o *v46; // x23
  const MethodInfo *v47; // x2
  BattlePerformance_c *inited; // x0
  BattleActionData_o *System; // x0
  BattlePerformance_o *v50; // x22
  int32_t v51; // w0
  BattlePerformance_o *v52; // x0
  struct BattleLogicTask_o **p_prevTask; // x22
  struct BattleLogicTask_o **v54; // x0
  BattleLogicTask_o *v55; // x1
  __int64 v56; // x8
  BattleLogicTask_array *v57; // x21
  unsigned __int64 v58; // x22
  struct System_Collections_Generic_LinkedList_BattleLogicTask__o *list_logic; // x21
  System_Xml_DtdParser_ParseElementOnlyContent_LocalFrame_o *v60; // x0

  if ( (byte_40F7386 & 1) == 0 )
  {
    sub_B16FFC(&BattleLogicTask_TypeInfo, task);
    sub_B16FFC(&BattlePerformance_TypeInfo, v7);
    sub_B16FFC(&Method_System_Collections_Generic_LinkedList_BattleLogicTask__AddFirst__, v8);
    sub_B16FFC(&Method_System_Collections_Generic_Stack_BattleLogicTask__Pop__, v9);
    sub_B16FFC(&Method_System_Collections_Generic_Stack_BattleLogicTask__Push__, v10);
    sub_B16FFC(&Method_System_Collections_Generic_Stack_BattleLogicTask___ctor__, v11);
    sub_B16FFC(&Method_System_Collections_Generic_Stack_BattleLogicTask__get_Count__, v12);
    sub_B16FFC(&System_Collections_Generic_Stack_BattleLogicTask__TypeInfo, v13);
    byte_40F7386 = 1;
  }
  v14 = (System_Collections_Generic_Stack_DtdParser_ParseElementOnlyContent_LocalFrame__o *)sub_B170CC(
                                                                                              System_Collections_Generic_Stack_BattleLogicTask__TypeInfo,
                                                                                              task,
                                                                                              method,
                                                                                              v3,
                                                                                              v4);
  System_Collections_Generic_Stack_DtdParser_ParseElementOnlyContent_LocalFrame____ctor(
    v14,
    (const MethodInfo_2BCD288 *)Method_System_Collections_Generic_Stack_BattleLogicTask___ctor__);
  logicReaction = this->fields.logicReaction;
  if ( !logicReaction )
    goto LABEL_71;
  v16 = BattleLogicReaction__checkChangeApp(logicReaction, 0LL);
  if ( !v16 )
    goto LABEL_71;
  v19 = *(_QWORD *)&v16->max_length;
  v20 = v16;
  if ( v19 && (int)v19 >= 1 )
  {
    v21 = 0LL;
    while ( v21 < (unsigned int)v19 )
    {
      if ( !v14 )
        goto LABEL_71;
      System_Collections_Generic_Stack_DtdParser_ParseElementOnlyContent_LocalFrame___Push(
        v14,
        (System_Xml_DtdParser_ParseElementOnlyContent_LocalFrame_o *)v20->m_Items[v21],
        (const MethodInfo_2BCD91C *)Method_System_Collections_Generic_Stack_BattleLogicTask__Push__);
      LODWORD(v19) = v20->max_length;
      if ( (__int64)++v21 >= (int)v19 )
        goto LABEL_11;
    }
LABEL_72:
    sub_B17100(v16, v17, v18);
    sub_B170A0();
  }
LABEL_11:
  v22 = this->fields.logicReaction;
  if ( !v22 )
    goto LABEL_71;
  v16 = BattleLogicReaction__checkResurrection(v22, 0LL);
  if ( !v16 )
    goto LABEL_71;
  v23 = *(_QWORD *)&v16->max_length;
  v24 = v16;
  if ( v23 && (int)v23 >= 1 )
  {
    v25 = 0LL;
    while ( v25 < (unsigned int)v23 )
    {
      if ( !v14 )
        goto LABEL_71;
      System_Collections_Generic_Stack_DtdParser_ParseElementOnlyContent_LocalFrame___Push(
        v14,
        (System_Xml_DtdParser_ParseElementOnlyContent_LocalFrame_o *)v24->m_Items[v25],
        (const MethodInfo_2BCD91C *)Method_System_Collections_Generic_Stack_BattleLogicTask__Push__);
      LODWORD(v23) = v24->max_length;
      if ( (__int64)++v25 >= (int)v23 )
        goto LABEL_19;
    }
    goto LABEL_72;
  }
LABEL_19:
  v26 = this->fields.logicReaction;
  if ( !v26 )
    goto LABEL_71;
  v16 = BattleLogicReaction__checkWithdraw(v26, 0LL);
  if ( !v16 )
    goto LABEL_71;
  v27 = *(_QWORD *)&v16->max_length;
  v28 = v16;
  if ( v27 && (int)v27 >= 1 )
  {
    v29 = 0LL;
    while ( v29 < (unsigned int)v27 )
    {
      if ( !v14 )
        goto LABEL_71;
      System_Collections_Generic_Stack_DtdParser_ParseElementOnlyContent_LocalFrame___Push(
        v14,
        (System_Xml_DtdParser_ParseElementOnlyContent_LocalFrame_o *)v28->m_Items[v29],
        (const MethodInfo_2BCD91C *)Method_System_Collections_Generic_Stack_BattleLogicTask__Push__);
      LODWORD(v27) = v28->max_length;
      if ( (__int64)++v29 >= (int)v27 )
        goto LABEL_27;
    }
    goto LABEL_72;
  }
LABEL_27:
  v30 = this->fields.logicReaction;
  if ( !v30 )
    goto LABEL_71;
  v16 = BattleLogicReaction__checkDead(v30, 0LL);
  if ( !v16 )
    goto LABEL_71;
  v31 = *(_QWORD *)&v16->max_length;
  v32 = v16;
  if ( v31 && (int)v31 >= 1 )
  {
    v33 = 0LL;
    while ( v33 < (unsigned int)v31 )
    {
      if ( !v14 )
        goto LABEL_71;
      System_Collections_Generic_Stack_DtdParser_ParseElementOnlyContent_LocalFrame___Push(
        v14,
        (System_Xml_DtdParser_ParseElementOnlyContent_LocalFrame_o *)v32->m_Items[v33],
        (const MethodInfo_2BCD91C *)Method_System_Collections_Generic_Stack_BattleLogicTask__Push__);
      LODWORD(v31) = v32->max_length;
      if ( (__int64)++v33 >= (int)v31 )
        goto LABEL_35;
    }
    goto LABEL_72;
  }
LABEL_35:
  if ( !task )
    goto LABEL_71;
  if ( task->fields.isSkipStep )
    goto LABEL_58;
  v34 = BattleLogicTask__checkActorId(task, this->fields.prevTask, 0LL);
  prevTask = this->fields.prevTask;
  if ( v34 )
  {
    if ( BattleLogicTask__checkTargetId(task, prevTask, 0LL) )
      goto LABEL_53;
    v36 = this->fields.prevTask;
    if ( v36 )
    {
      perf = this->fields.perf;
      logicnomal = this->fields.logicnomal;
      ActorId = BattleLogicTask__getActorId(v36, 0LL);
      if ( logicnomal )
      {
        BackStep = BattleLogicNomal__createBackStep(logicnomal, ActorId, 0LL);
        if ( perf )
        {
          BattlePerformance__addActionData_18918748(perf, BackStep, 0LL);
          v41 = this->fields.perf;
          v46 = (BattleLogicTask_o *)sub_B170CC(BattleLogicTask_TypeInfo, v42, v43, v44, v45);
          BattleLogicTask___ctor(v46, 0LL);
          inited = BattlePerformance_TypeInfo;
          if ( (BYTE3(BattlePerformance_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0
            && !BattlePerformance_TypeInfo->_2.cctor_finished )
          {
            inited = (BattlePerformance_c *)j_il2cpp_runtime_class_init_0(BattlePerformance_TypeInfo);
          }
          if ( v46 )
          {
            v46->fields.systemTime = BattlePerformance_TypeInfo->static_fields->AFTER_BACK_STEP_INTERVAL;
            System = BattleLogic__createSystem((BattleLogic_o *)inited, v46, v47);
            if ( v41 )
            {
              BattlePerformance__addActionData_18918748(v41, System, 0LL);
              goto LABEL_53;
            }
          }
        }
      }
    }
LABEL_71:
    sub_B170D4();
  }
  if ( prevTask )
  {
    v50 = this->fields.perf;
    v51 = BattleLogicTask__getActorId(this->fields.prevTask, 0LL);
    if ( !v50 )
      goto LABEL_71;
    BattlePerformance__playBackStepMotion(v50, v51, 0LL);
  }
  v52 = this->fields.perf;
  if ( !v52 )
    goto LABEL_71;
  BattlePerformance__hideOverKillMessage(v52, 0LL);
LABEL_53:
  p_prevTask = &this->fields.prevTask;
  if ( BattleLogicTask__isCommandAction(task, 0LL) || BattleLogicTask__isAddAttack(task, 0LL) )
  {
    *p_prevTask = task;
    v54 = &this->fields.prevTask;
    v55 = task;
  }
  else
  {
    v54 = &this->fields.prevTask;
    v55 = 0LL;
    *p_prevTask = 0LL;
  }
  sub_B16F98(v54, v55);
LABEL_58:
  if ( !v14 )
    goto LABEL_71;
  if ( v14->fields._size > 0 )
    goto LABEL_67;
  v16 = BattleLogic__taskReaction(this, task, v18);
  if ( v16 )
  {
    v56 = *(_QWORD *)&v16->max_length;
    v57 = v16;
    if ( v56 )
    {
      if ( (int)v56 >= 1 )
      {
        v58 = 0LL;
        while ( v58 < (unsigned int)v56 )
        {
          System_Collections_Generic_Stack_DtdParser_ParseElementOnlyContent_LocalFrame___Push(
            v14,
            (System_Xml_DtdParser_ParseElementOnlyContent_LocalFrame_o *)v57->m_Items[v58],
            (const MethodInfo_2BCD91C *)Method_System_Collections_Generic_Stack_BattleLogicTask__Push__);
          LODWORD(v56) = v57->max_length;
          if ( (__int64)++v58 >= (int)v56 )
            goto LABEL_66;
        }
        goto LABEL_72;
      }
    }
  }
LABEL_66:
  if ( v14->fields._size < 1 )
    return 0;
  do
  {
LABEL_67:
    list_logic = this->fields.list_logic;
    v60 = System_Collections_Generic_Stack_DtdParser_ParseElementOnlyContent_LocalFrame___Pop(
            v14,
            (const MethodInfo_2BCD890 *)Method_System_Collections_Generic_Stack_BattleLogicTask__Pop__);
    if ( !list_logic )
      goto LABEL_71;
    System_Collections_Generic_LinkedList_WebConnection___AddFirst(
      (System_Collections_Generic_LinkedList_WebConnection__o *)list_logic,
      (System_Net_WebConnection_o *)v60,
      (const MethodInfo_23FD568 *)Method_System_Collections_Generic_LinkedList_BattleLogicTask__AddFirst__);
  }
  while ( v14->fields._size > 0 );
  return 1;
}


// local variable allocation has failed, the output may be wrong!
void __fastcall BattleLogic__checkSelectEnemyClick(BattleLogic_o *this, int32_t index, const MethodInfo *method)
{
  __int64 v5; // x1
  __int64 v6; // x1
  struct BattleData_o *data; // x8
  CommonUI_o *Instance; // x20
  __int64 v9; // x1
  __int64 v10; // x2
  __int64 v11; // x3
  __int64 v12; // x4
  System_Action_o *v13; // x21

  if ( (byte_40F73EF & 1) == 0 )
  {
    sub_B16FFC(&System_Action_TypeInfo, *(_QWORD *)&index);
    sub_B16FFC(&Method_BattleLogic_callbackTutorialSelectEnemyNext__, v5);
    sub_B16FFC(&Method_SingletonMonoBehaviour_CommonUI__get_Instance__, v6);
    byte_40F73EF = 1;
  }
  data = this->fields.data;
  if ( !data )
    goto LABEL_12;
  if ( data->fields.tutorialId == 3
    && data->fields.wavecount == 1
    && data->fields.turnCount == 1
    && index == 1
    && !data->fields.tutorialState )
  {
    data->fields.tutorialState = 1;
    Instance = (CommonUI_o *)SingletonMonoBehaviour_WebViewManager___get_Instance((const MethodInfo_2A54F38 *)Method_SingletonMonoBehaviour_CommonUI__get_Instance__);
    v13 = (System_Action_o *)sub_B170CC(System_Action_TypeInfo, v9, v10, v11, v12);
    System_Action___ctor(v13, (Il2CppObject *)this, Method_BattleLogic_callbackTutorialSelectEnemyNext__, 0LL);
    if ( Instance )
    {
      CommonUI__CloseTutorialNotificationDialogArrow_18262716(Instance, v13, 0LL);
      return;
    }
LABEL_12:
    sub_B170D4();
  }
}


bool __fastcall BattleLogic__checkSelectFunctionTarget(
        BattleLogic_o *this,
        System_Int32_array *funclist,
        bool isCheckCommandType,
        const MethodInfo *method)
{
  __int64 v6; // x1
  __int64 v7; // x1
  WebViewManager_o *Instance; // x0
  WarQuestSelectionMaster_o *MasterData_WarQuestSelectionMaster; // x0
  __int64 v10; // x1
  __int64 v11; // x2
  __int64 v12; // x8
  DataMasterBase_WarMaster__WarEntity__int__o *v13; // x21
  unsigned __int64 v14; // x22
  WarEntity_o *Entity; // x0
  int32_t age_high; // w0

  if ( (byte_40F73E2 & 1) == 0 )
  {
    sub_B16FFC(&Method_DataManager_GetMasterData_FunctionMaster___, funclist);
    sub_B16FFC(&Method_DataMasterBase_FunctionMaster__FunctionEntity__int__GetEntity__, v6);
    sub_B16FFC(&Method_SingletonMonoBehaviour_DataManager__get_Instance__, v7);
    byte_40F73E2 = 1;
  }
  Instance = SingletonMonoBehaviour_WebViewManager___get_Instance((const MethodInfo_2A54F38 *)Method_SingletonMonoBehaviour_DataManager__get_Instance__);
  if ( !Instance
    || (MasterData_WarQuestSelectionMaster = DataManager__GetMasterData_WarQuestSelectionMaster_(
                                               (DataManager_o *)Instance,
                                               (const MethodInfo_18C3284 *)Method_DataManager_GetMasterData_FunctionMaster___),
        !funclist) )
  {
LABEL_17:
    sub_B170D4();
  }
  v12 = *(_QWORD *)&funclist->max_length;
  if ( (int)v12 < 1 )
    return 0;
  v13 = (DataMasterBase_WarMaster__WarEntity__int__o *)MasterData_WarQuestSelectionMaster;
  v14 = 0LL;
  while ( 1 )
  {
    if ( v14 >= (unsigned int)v12 )
    {
      sub_B17100(MasterData_WarQuestSelectionMaster, v10, v11);
      sub_B170A0();
    }
    if ( !v13 )
      goto LABEL_17;
    Entity = DataMasterBase_WarMaster__WarEntity__int___GetEntity(
               v13,
               funclist->m_Items[v14 + 1],
               (const MethodInfo_266F388 *)Method_DataMasterBase_FunctionMaster__FunctionEntity__int__GetEntity__);
    if ( !Entity )
      goto LABEL_17;
    age_high = HIDWORD(Entity->fields.age);
    if ( isCheckCommandType )
    {
      MasterData_WarQuestSelectionMaster = (WarQuestSelectionMaster_o *)Target__isCommandType(age_high, 0LL);
      if ( ((unsigned __int8)MasterData_WarQuestSelectionMaster & 1) != 0 )
        return 1;
      goto LABEL_14;
    }
    MasterData_WarQuestSelectionMaster = (WarQuestSelectionMaster_o *)Target__isChoose(age_high, 0LL);
    if ( ((unsigned __int8)MasterData_WarQuestSelectionMaster & 1) != 0 )
      return 1;
LABEL_14:
    LODWORD(v12) = funclist->max_length;
    if ( (__int64)++v14 >= (int)v12 )
      return 0;
  }
}


void __fastcall BattleLogic__checkSkillTarget(BattleLogic_o *this, const MethodInfo *method)
{
  struct BattleLogic_UseSkillObject_o *tmp_useSkill; // x1
  struct BattleLogic_UseSkillObject_o **p_act_useSkill; // x20
  BattlePerformance_o *perf; // x0
  BattleMotionSkipManager_o *MotionSkipManager; // x0
  BattleData_o *data; // x0
  BattleData_o *v8; // x0
  PlayMakerFSM_o *fsm; // x0

  if ( (byte_40F73C2 & 1) == 0 )
  {
    sub_B16FFC(&StringLiteral_5481, method);
    byte_40F73C2 = 1;
  }
  tmp_useSkill = this->fields.tmp_useSkill;
  p_act_useSkill = &this->fields.act_useSkill;
  this->fields.act_useSkill = tmp_useSkill;
  sub_B16F98(&this->fields.act_useSkill, tmp_useSkill);
  perf = this->fields.perf;
  if ( !perf
    || (MotionSkipManager = BattlePerformance__get_MotionSkipManager(perf, 0LL), !*p_act_useSkill)
    || !MotionSkipManager
    || (BattleMotionSkipManager__SetMotionSkip(MotionSkipManager, (*p_act_useSkill)->fields.skillInfo, 0LL),
        (data = this->fields.data) == 0LL)
    || (BattleData__ResetPerformedVals(data, 0LL), (v8 = this->fields.data) == 0LL)
    || (BattleData__ResetFreshBuffList(v8, 0LL), (fsm = this->fields.fsm) == 0LL) )
  {
    sub_B170D4();
  }
  PlayMakerFSM__SendEvent(fsm, (System_String_o *)StringLiteral_5481, 0LL);
}


void __fastcall BattleLogic__checkStarDirection(BattleLogic_o *this, const MethodInfo *method)
{
  __int64 v3; // x1
  __int64 v4; // x1
  __int64 v5; // x1
  __int64 v6; // x1
  __int64 v7; // x1
  __int64 v8; // x1
  __int64 v9; // x1
  __int64 v10; // x1
  __int64 v11; // x1
  struct BattleLogic_UseSkillObject_o *act_useSkill; // x8
  struct BattleSkillInfoData_o *skillInfo; // x20
  WebViewManager_o *Instance; // x0
  WarQuestSelectionMaster_o *MasterData_WarQuestSelectionMaster; // x0
  DataMasterBase_WarMaster__WarEntity__int__o *v16; // x21
  int32_t v17; // w0
  System_String_o *Value; // x20
  __int64 v19; // x2
  __int64 v20; // x0
  __int64 v21; // x2
  __int64 v22; // x1
  System_String_array *v23; // x0
  __int64 v24; // x2
  System_String_array *v25; // x21
  __int64 v26; // x8
  System_Int32_array *v27; // x20
  unsigned __int64 v28; // x23
  int32_t *v29; // x22
  BattleData_o *data; // x0
  BattleData_o *v31; // x0
  BattleData_o *v32; // x0
  BattleData_o *v33; // x0
  BattlePerformance_o *v34; // x0
  PlayMakerFSM_o *fsm; // x0
  __int64 *v36; // x8
  BattleData_o *v37; // x0
  BattlePerformance_o *perf; // x0
  BattleData_o *v39; // x0
  BattlePerformance_o *v40; // x0
  WarEntity_o *entity; // [xsp+8h] [xbp-38h] BYREF

  if ( (byte_40F73C4 & 1) == 0 )
  {
    sub_B16FFC(&char___TypeInfo, method);
    sub_B16FFC(&Method_DataManager_GetMasterData_SkillMaster___, v3);
    sub_B16FFC(&Method_DataMasterBase_SkillMaster__SkillEntity__int__TryGetEntity__, v4);
    sub_B16FFC(&int___TypeInfo, v5);
    sub_B16FFC(&Method_SingletonMonoBehaviour_DataManager__get_Instance__, v6);
    sub_B16FFC(&StringLiteral_1655, v7);
    sub_B16FFC(&StringLiteral_12311, v8);
    sub_B16FFC(&StringLiteral_12204, v9);
    sub_B16FFC(&StringLiteral_11026, v10);
    sub_B16FFC(&StringLiteral_11028, v11);
    byte_40F73C4 = 1;
  }
  entity = 0LL;
  act_useSkill = this->fields.act_useSkill;
  if ( !act_useSkill )
    goto LABEL_43;
  skillInfo = act_useSkill->fields.skillInfo;
  entity = 0LL;
  Instance = SingletonMonoBehaviour_WebViewManager___get_Instance((const MethodInfo_2A54F38 *)Method_SingletonMonoBehaviour_DataManager__get_Instance__);
  if ( !Instance )
    goto LABEL_43;
  MasterData_WarQuestSelectionMaster = DataManager__GetMasterData_WarQuestSelectionMaster_(
                                         (DataManager_o *)Instance,
                                         (const MethodInfo_18C3284 *)Method_DataManager_GetMasterData_SkillMaster___);
  if ( !skillInfo )
    goto LABEL_43;
  v16 = (DataMasterBase_WarMaster__WarEntity__int__o *)MasterData_WarQuestSelectionMaster;
  v17 = ((__int64 (__fastcall *)(struct BattleSkillInfoData_o *, Il2CppMethodPointer))skillInfo->klass->vtable._5_get_skillId.method)(
          skillInfo,
          skillInfo->klass->vtable._6_get_IndividualityArray.methodPtr);
  if ( !v16 )
    goto LABEL_43;
  if ( !DataMasterBase_WarMaster__WarEntity__int___TryGetEntity(
          v16,
          &entity,
          v17,
          (const MethodInfo_266F3E4 *)Method_DataMasterBase_SkillMaster__SkillEntity__int__TryGetEntity__) )
    goto LABEL_39;
  Value = ConstantStrMaster__getValue((System_String_o *)StringLiteral_12311, 0LL);
  v20 = sub_B17014(char___TypeInfo, 1LL, v19);
  if ( !v20 )
    goto LABEL_43;
  v22 = v20;
  if ( !*(_DWORD *)(v20 + 24) )
    goto LABEL_42;
  *(_WORD *)(v20 + 32) = 44;
  if ( !Value )
    goto LABEL_43;
  v23 = System_String__Split(Value, (System_Char_array *)v20, 0LL);
  if ( !v23 )
    goto LABEL_43;
  v25 = v23;
  v20 = sub_B17014(int___TypeInfo, v23->max_length, v24);
  v26 = *(_QWORD *)&v25->max_length;
  v27 = (System_Int32_array *)v20;
  if ( (int)v26 >= 1 )
  {
    v28 = 0LL;
    v29 = (int32_t *)(v20 + 32);
    while ( v28 < (unsigned int)v26 )
    {
      if ( !v27 )
        goto LABEL_43;
      if ( v28 >= v27->max_length )
        break;
      v20 = System_Int32__TryParse(v25->m_Items[v28], v29, 0LL);
      LODWORD(v26) = v25->max_length;
      ++v28;
      ++v29;
      if ( (__int64)v28 >= (int)v26 )
        goto LABEL_18;
    }
LABEL_42:
    sub_B17100(v20, v22, v21);
    sub_B170A0();
  }
LABEL_18:
  data = this->fields.data;
  if ( !data )
    goto LABEL_43;
  if ( !BattleData__CheckPerformedFuncType(data, 24, 0LL) )
  {
    v31 = this->fields.data;
    if ( !v31 )
      goto LABEL_43;
    if ( !BattleData__CheckPerformedFuncType(v31, 30, 0LL) )
    {
      v32 = this->fields.data;
      if ( !v32 )
        goto LABEL_43;
      if ( !BattleData__CheckPerformedFuncType(v32, 23, 0LL) )
      {
        v33 = this->fields.data;
        if ( !v33 )
          goto LABEL_43;
        if ( !BattleData__CheckFreshBuffDataList(v33, v27, 0LL) )
        {
          v37 = this->fields.data;
          if ( !v37 )
            goto LABEL_43;
          if ( BattleData__CheckPerformedFuncType(v37, 5, 0LL) )
          {
            perf = this->fields.perf;
            if ( perf )
            {
              BattlePerformance__setRefreshStarsFlg(perf, 0, 0LL);
              fsm = this->fields.fsm;
              if ( fsm )
              {
                v36 = &StringLiteral_1655;
                goto LABEL_41;
              }
            }
LABEL_43:
            sub_B170D4();
          }
          v39 = this->fields.data;
          if ( !v39 )
            goto LABEL_43;
          if ( BattleData__CheckPerformedFuncType(v39, 31, 0LL) )
          {
            v40 = this->fields.perf;
            if ( v40 )
            {
              BattlePerformance__setRefreshStarsFlg(v40, 0, 0LL);
              fsm = this->fields.fsm;
              if ( fsm )
              {
                v36 = &StringLiteral_11026;
                goto LABEL_41;
              }
            }
            goto LABEL_43;
          }
LABEL_39:
          fsm = this->fields.fsm;
          if ( fsm )
          {
            v36 = &StringLiteral_12204;
            goto LABEL_41;
          }
          goto LABEL_43;
        }
      }
    }
  }
  v34 = this->fields.perf;
  if ( !v34 )
    goto LABEL_43;
  BattlePerformance__setRefreshStarsFlg(v34, 0, 0LL);
  fsm = this->fields.fsm;
  if ( !fsm )
    goto LABEL_43;
  v36 = &StringLiteral_11028;
LABEL_41:
  PlayMakerFSM__SendEvent(fsm, (System_String_o *)*v36, 0LL);
}


// local variable allocation has failed, the output may be wrong!
void __fastcall BattleLogic__checkTurnStart(BattleLogic_o *this, const MethodInfo *method)
{
  __int64 v3; // x1
  __int64 v4; // x1
  __int64 v5; // x1
  __int64 v6; // x1
  __int64 v7; // x1
  __int64 v8; // x1
  __int64 v9; // x1
  __int64 v10; // x1
  __int64 v11; // x1
  __int64 v12; // x1
  __int64 v13; // x1
  __int64 v14; // x1
  __int64 v15; // x1
  __int64 v16; // x1
  __int64 v17; // x1
  BattlePerformance_o *perf; // x0
  BattleEventTutorial_o *eventTutorial; // x0
  bool isTacticalPhase; // w0
  struct BattleData_o *data; // x8
  int32_t tutorialId; // w9
  CommonUI_o *Instance; // x20
  System_String_o *v24; // x21
  const MethodInfo *v25; // x2
  float x; // s8
  float y; // s9
  UnityEngine_Vector2_o v28; // kr00_8
  const MethodInfo *v29; // x2
  __int64 v30; // x0
  __int64 v31; // x1
  __int64 v32; // x2
  float v33; // s0
  float v34; // s1
  float v35; // s2
  float v36; // s3
  struct BattleLogic_TutorialStringData_array *v37; // x8
  BattleLogic_TutorialStringData_o *v38; // x8
  int32_t turnCount; // w9
  const MethodInfo *v40; // x2
  UnityEngine_Vector2_o v41; // kr08_8
  const MethodInfo *v42; // x2
  struct BattleLogic_TutorialStringData_array *v43; // x8
  const MethodInfo *v44; // x2
  UnityEngine_Vector2_o v45; // kr10_8
  const MethodInfo *v46; // x2
  struct BattleLogic_TutorialStringData_array *TSD; // x8
  BattlePerformance_o *v48; // x0
  BattleEventTutorial_o *v49; // x0
  bool isStart; // w0
  __int64 v51; // x1
  __int64 v52; // x2
  __int64 v53; // x3
  __int64 v54; // x4
  BattleEventTutorial_o *v55; // x20
  System_Action_o *v56; // x21
  PlayMakerFSM_o *fsm; // x0
  __int64 *v58; // x8
  bool isWave; // w0
  __int64 v60; // x1
  __int64 v61; // x2
  __int64 v62; // x3
  __int64 v63; // x4
  BattleEventTutorial_o *v64; // x20
  System_Action_o *v65; // x21
  int32_t tutorialState; // w8
  const MethodInfo *v67; // x2
  UnityEngine_Vector2_o v68; // kr18_8
  const MethodInfo *v69; // x2
  struct BattleLogic_TutorialStringData_array *v70; // x8
  const MethodInfo *v71; // x1
  System_Collections_IEnumerator_o *started; // x0
  CommonUI_o *v73; // x20
  System_String_o *v74; // x21
  const MethodInfo *v75; // x2
  UnityEngine_Vector2_o v76; // kr20_8
  const MethodInfo *v77; // x2
  __int64 v78; // x3
  __int64 v79; // x4
  float v80; // s0
  float v81; // s1
  float v82; // s2
  float v83; // s3
  struct BattleLogic_TutorialStringData_array *v84; // x8
  float *v85; // x8
  float v86; // s14
  unsigned int v87; // s15
  unsigned int v88; // s8
  int32_t v89; // w22
  float v90; // s13
  float v91; // s12
  float v92; // s11
  System_Action_o *v93; // x23
  const MethodInfo *v94; // x2
  UnityEngine_Vector2_o v95; // kr28_8
  const MethodInfo *v96; // x2
  struct BattleLogic_TutorialStringData_array *v97; // x8
  const MethodInfo *v98; // x2
  UnityEngine_Vector2_o v99; // kr30_8
  const MethodInfo *v100; // x2
  struct BattleLogic_TutorialStringData_array *v101; // x8
  const MethodInfo *v102; // x2
  UnityEngine_Vector2_o v103; // kr38_8
  const MethodInfo *v104; // x2
  struct BattleLogic_TutorialStringData_array *v105; // x8
  BattleEventTutorial_o *v106; // x0
  __int64 v107; // x1
  __int64 v108; // x2
  __int64 v109; // x3
  __int64 v110; // x4
  BattleEventTutorial_o *v111; // x20
  System_Action_o *v112; // x21
  PlayMakerFSM_o *v113; // x0
  const MethodInfo *v114; // x2
  UnityEngine_Vector2_o v115; // kr40_8
  const MethodInfo *v116; // x2
  struct BattleLogic_TutorialStringData_array *v117; // x8
  float v118; // s4
  float v119; // s5
  float v120; // s16
  float v121; // s7
  float v122; // [xsp+5Ch] [xbp-24h]
  UnityEngine_Vector2_o v123; // 0:s0.4,4:s1.4
  UnityEngine_Rect_o v124; // 0:s2.4,4:s3.4,8:s4.4,12:s5.4
  UnityEngine_Rect_o v125; // 0:s2.4,4:s3.4,8:s4.4,12:s5.4

  if ( (byte_40F73EB & 1) == 0 )
  {
    sub_B16FFC(&System_Action_TypeInfo, method);
    sub_B16FFC(&Method_BattleLogic_callbackEventTutorialBase__, v3);
    sub_B16FFC(&Method_BattleLogic_callbackTutorialAttack02__, v4);
    sub_B16FFC(&LocalizationManager_TypeInfo, v5);
    sub_B16FFC(&Method_SingletonMonoBehaviour_CommonUI__get_Instance__, v6);
    sub_B16FFC(&StringLiteral_13438, v7);
    sub_B16FFC(&StringLiteral_13442, v8);
    sub_B16FFC(&StringLiteral_9714, v9);
    sub_B16FFC(&StringLiteral_13441, v10);
    sub_B16FFC(&StringLiteral_13436, v11);
    sub_B16FFC(&StringLiteral_13430, v12);
    sub_B16FFC(&StringLiteral_5481, v13);
    sub_B16FFC(&StringLiteral_13434, v14);
    sub_B16FFC(&StringLiteral_13432, v15);
    sub_B16FFC(&StringLiteral_13445, v16);
    sub_B16FFC(&StringLiteral_13440, v17);
    byte_40F73EB = 1;
  }
  perf = this->fields.perf;
  if ( !perf )
    goto LABEL_108;
  BattlePerformance__SetActiveTutorialDialogMask(perf, 0, 0LL);
  eventTutorial = this->fields.eventTutorial;
  if ( !eventTutorial )
    goto LABEL_108;
  isTacticalPhase = BattleEventTutorial__isTacticalPhase(eventTutorial, 0LL);
  data = this->fields.data;
  if ( isTacticalPhase )
  {
    if ( !data )
      goto LABEL_108;
  }
  else
  {
    if ( !data )
      goto LABEL_108;
    if ( data->fields.tutorialId == -1 )
    {
      fsm = this->fields.fsm;
      if ( !fsm )
        goto LABEL_108;
      v58 = &StringLiteral_5481;
      goto LABEL_107;
    }
  }
  tutorialId = data->fields.tutorialId;
  switch ( tutorialId )
  {
    case 3:
      if ( data->fields.wavecount != 1 || data->fields.turnCount != 1 )
        goto LABEL_95;
      data->fields.tutorialState = 0;
      Instance = (CommonUI_o *)SingletonMonoBehaviour_WebViewManager___get_Instance((const MethodInfo_2A54F38 *)Method_SingletonMonoBehaviour_CommonUI__get_Instance__);
      if ( (BYTE3(LocalizationManager_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0
        && !LocalizationManager_TypeInfo->_2.cctor_finished )
      {
        j_il2cpp_runtime_class_init_0(LocalizationManager_TypeInfo);
      }
      v24 = LocalizationManager__Get((System_String_o *)StringLiteral_13445, 0LL);
      v45 = BattleLogic__FSTuArrow(this, 2, v44);
      y = v45.fields.y;
      x = v45.fields.x;
      *(UnityEngine_Rect_o *)&v33 = BattleLogic__FSTuSquare(this, 2, v46);
      TSD = this->fields.TSD;
      if ( !TSD )
        goto LABEL_108;
      if ( TSD->max_length <= 8 )
        goto LABEL_109;
      v38 = TSD->m_Items[8];
      if ( !v38 )
        goto LABEL_108;
      goto LABEL_103;
    case 2:
      turnCount = data->fields.turnCount;
      if ( turnCount != 2 )
      {
        if ( turnCount != 1 )
          goto LABEL_95;
        Instance = (CommonUI_o *)SingletonMonoBehaviour_WebViewManager___get_Instance((const MethodInfo_2A54F38 *)Method_SingletonMonoBehaviour_CommonUI__get_Instance__);
        if ( (BYTE3(LocalizationManager_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0
          && !LocalizationManager_TypeInfo->_2.cctor_finished )
        {
          j_il2cpp_runtime_class_init_0(LocalizationManager_TypeInfo);
        }
        v24 = LocalizationManager__Get((System_String_o *)StringLiteral_13440, 0LL);
        v41 = BattleLogic__FSTuArrow(this, 0, v40);
        y = v41.fields.y;
        x = v41.fields.x;
        *(UnityEngine_Rect_o *)&v33 = BattleLogic__FSTuSquare(this, 0, v42);
        v43 = this->fields.TSD;
        if ( v43 )
        {
          if ( v43->max_length > 5 )
          {
            v38 = v43->m_Items[5];
            if ( !v38 )
              goto LABEL_108;
            goto LABEL_103;
          }
LABEL_109:
          sub_B17100(v30, v31, v32);
          sub_B170A0();
        }
        goto LABEL_108;
      }
      tutorialState = data->fields.tutorialState;
      if ( tutorialState == 10 )
      {
        Instance = (CommonUI_o *)SingletonMonoBehaviour_WebViewManager___get_Instance((const MethodInfo_2A54F38 *)Method_SingletonMonoBehaviour_CommonUI__get_Instance__);
        if ( (BYTE3(LocalizationManager_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0
          && !LocalizationManager_TypeInfo->_2.cctor_finished )
        {
          j_il2cpp_runtime_class_init_0(LocalizationManager_TypeInfo);
        }
        v24 = LocalizationManager__Get((System_String_o *)StringLiteral_13442, 0LL);
        v115 = BattleLogic__FSTuArrow(this, 0, v114);
        y = v115.fields.y;
        x = v115.fields.x;
        *(UnityEngine_Rect_o *)&v33 = BattleLogic__FSTuSquare(this, 0, v116);
        v117 = this->fields.TSD;
        if ( !v117 )
          goto LABEL_108;
        if ( v117->max_length > 7 )
        {
          v38 = v117->m_Items[7];
          if ( !v38 )
            goto LABEL_108;
          goto LABEL_103;
        }
        goto LABEL_109;
      }
      if ( tutorialState != -1 )
        goto LABEL_95;
      Instance = (CommonUI_o *)SingletonMonoBehaviour_WebViewManager___get_Instance((const MethodInfo_2A54F38 *)Method_SingletonMonoBehaviour_CommonUI__get_Instance__);
      if ( (BYTE3(LocalizationManager_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0
        && !LocalizationManager_TypeInfo->_2.cctor_finished )
      {
        j_il2cpp_runtime_class_init_0(LocalizationManager_TypeInfo);
      }
      v24 = LocalizationManager__Get((System_String_o *)StringLiteral_13441, 0LL);
      v68 = BattleLogic__FSTuArrow(this, 1, v67);
      y = v68.fields.y;
      x = v68.fields.x;
      *(UnityEngine_Rect_o *)&v33 = BattleLogic__FSTuSquare(this, 1, v69);
      v70 = this->fields.TSD;
      if ( !v70 )
LABEL_108:
        sub_B170D4();
      if ( v70->max_length <= 6 )
        goto LABEL_109;
      v38 = v70->m_Items[6];
      if ( !v38 )
        goto LABEL_108;
LABEL_103:
      if ( !Instance )
        goto LABEL_108;
      v118 = v33;
      v119 = v34;
      v120 = v35;
      v121 = v36;
      v123.fields.x = x;
      v123.fields.y = y;
      v125.fields.m_XMin = v118;
      v125.fields.m_YMin = v119;
      v125.fields.m_Width = v120;
      v125.fields.m_Height = v121;
      CommonUI__OpenTutorialNotificationDialogArrow(
        Instance,
        v24,
        v123,
        v125,
        v38->fields.way,
        v38->fields.pos,
        v38->fields.size,
        0LL,
        0LL);
      goto LABEL_105;
    case 1:
      switch ( data->fields.turnCount )
      {
        case 1:
          Instance = (CommonUI_o *)SingletonMonoBehaviour_WebViewManager___get_Instance((const MethodInfo_2A54F38 *)Method_SingletonMonoBehaviour_CommonUI__get_Instance__);
          if ( (BYTE3(LocalizationManager_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0
            && !LocalizationManager_TypeInfo->_2.cctor_finished )
          {
            j_il2cpp_runtime_class_init_0(LocalizationManager_TypeInfo);
          }
          v24 = LocalizationManager__Get((System_String_o *)StringLiteral_13430, 0LL);
          v28 = BattleLogic__FSTuArrow(this, 0, v25);
          y = v28.fields.y;
          x = v28.fields.x;
          *(UnityEngine_Rect_o *)&v33 = BattleLogic__FSTuSquare(this, 0, v29);
          v37 = this->fields.TSD;
          if ( !v37 )
            goto LABEL_108;
          if ( !v37->max_length )
            goto LABEL_109;
          v38 = v37->m_Items[0];
          if ( !v38 )
            goto LABEL_108;
          goto LABEL_103;
        case 2:
          Instance = (CommonUI_o *)SingletonMonoBehaviour_WebViewManager___get_Instance((const MethodInfo_2A54F38 *)Method_SingletonMonoBehaviour_CommonUI__get_Instance__);
          if ( (BYTE3(LocalizationManager_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0
            && !LocalizationManager_TypeInfo->_2.cctor_finished )
          {
            j_il2cpp_runtime_class_init_0(LocalizationManager_TypeInfo);
          }
          v24 = LocalizationManager__Get((System_String_o *)StringLiteral_13432, 0LL);
          v99 = BattleLogic__FSTuArrow(this, 0, v98);
          y = v99.fields.y;
          x = v99.fields.x;
          *(UnityEngine_Rect_o *)&v33 = BattleLogic__FSTuSquare(this, 0, v100);
          v101 = this->fields.TSD;
          if ( !v101 )
            goto LABEL_108;
          if ( v101->max_length <= 1 )
            goto LABEL_109;
          v38 = v101->m_Items[1];
          if ( !v38 )
            goto LABEL_108;
          goto LABEL_103;
        case 3:
          Instance = (CommonUI_o *)SingletonMonoBehaviour_WebViewManager___get_Instance((const MethodInfo_2A54F38 *)Method_SingletonMonoBehaviour_CommonUI__get_Instance__);
          if ( (BYTE3(LocalizationManager_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0
            && !LocalizationManager_TypeInfo->_2.cctor_finished )
          {
            j_il2cpp_runtime_class_init_0(LocalizationManager_TypeInfo);
          }
          v24 = LocalizationManager__Get((System_String_o *)StringLiteral_13434, 0LL);
          v95 = BattleLogic__FSTuArrow(this, 0, v94);
          y = v95.fields.y;
          x = v95.fields.x;
          *(UnityEngine_Rect_o *)&v33 = BattleLogic__FSTuSquare(this, 0, v96);
          v97 = this->fields.TSD;
          if ( !v97 )
            goto LABEL_108;
          if ( v97->max_length <= 2 )
            goto LABEL_109;
          v38 = v97->m_Items[2];
          if ( !v38 )
            goto LABEL_108;
          goto LABEL_103;
        case 4:
          Instance = (CommonUI_o *)SingletonMonoBehaviour_WebViewManager___get_Instance((const MethodInfo_2A54F38 *)Method_SingletonMonoBehaviour_CommonUI__get_Instance__);
          if ( (BYTE3(LocalizationManager_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0
            && !LocalizationManager_TypeInfo->_2.cctor_finished )
          {
            j_il2cpp_runtime_class_init_0(LocalizationManager_TypeInfo);
          }
          v24 = LocalizationManager__Get((System_String_o *)StringLiteral_13436, 0LL);
          v103 = BattleLogic__FSTuArrow(this, 0, v102);
          y = v103.fields.y;
          x = v103.fields.x;
          *(UnityEngine_Rect_o *)&v33 = BattleLogic__FSTuSquare(this, 0, v104);
          v105 = this->fields.TSD;
          if ( !v105 )
            goto LABEL_108;
          if ( v105->max_length <= 3 )
            goto LABEL_109;
          v38 = v105->m_Items[3];
          if ( !v38 )
            goto LABEL_108;
          goto LABEL_103;
        case 5:
          v73 = (CommonUI_o *)SingletonMonoBehaviour_WebViewManager___get_Instance((const MethodInfo_2A54F38 *)Method_SingletonMonoBehaviour_CommonUI__get_Instance__);
          if ( (BYTE3(LocalizationManager_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0
            && !LocalizationManager_TypeInfo->_2.cctor_finished )
          {
            j_il2cpp_runtime_class_init_0(LocalizationManager_TypeInfo);
          }
          v74 = LocalizationManager__Get((System_String_o *)StringLiteral_13438, 0LL);
          v76 = BattleLogic__FSTuArrow(this, 0, v75);
          *(UnityEngine_Rect_o *)&v80 = BattleLogic__FSTuSquare(this, 0, v77);
          v84 = this->fields.TSD;
          if ( !v84 )
            goto LABEL_108;
          if ( v84->max_length <= 4 )
            goto LABEL_109;
          v85 = (float *)v84->m_Items[4];
          v122 = v83;
          if ( !v85 )
            goto LABEL_108;
          v86 = v85[4];
          v87 = *((_DWORD *)v85 + 5);
          v88 = *((_DWORD *)v85 + 6);
          v89 = *((_DWORD *)v85 + 7);
          v90 = v82;
          v91 = v81;
          v92 = v80;
          v93 = (System_Action_o *)sub_B170CC(System_Action_TypeInfo, v31, v32, v78, v79);
          System_Action___ctor(v93, (Il2CppObject *)this, Method_BattleLogic_callbackTutorialAttack02__, 0LL);
          if ( !v73 )
            goto LABEL_108;
          v124.fields.m_Height = v122;
          v124.fields.m_XMin = v92;
          v124.fields.m_YMin = v91;
          v124.fields.m_Width = v90;
          CommonUI__OpenTutorialNotificationDialogArrow(
            v73,
            v74,
            v76,
            v124,
            v86,
            (UnityEngine_Vector2_o)__PAIR64__(v88, v87),
            v89,
            v93,
            0LL);
          break;
        default:
          goto LABEL_105;
      }
      goto LABEL_105;
  }
  v48 = this->fields.perf;
  if ( !v48 )
    goto LABEL_108;
  BattlePerformance__SetActiveTutorialDialogMask(v48, 1, 0LL);
  v49 = this->fields.eventTutorial;
  if ( !v49 )
    goto LABEL_108;
  isStart = BattleEventTutorial__isStart(v49, 0LL);
  v55 = this->fields.eventTutorial;
  if ( isStart )
  {
    v56 = (System_Action_o *)sub_B170CC(System_Action_TypeInfo, v51, v52, v53, v54);
    System_Action___ctor(v56, (Il2CppObject *)this, Method_BattleLogic_callbackEventTutorialBase__, 0LL);
    if ( !v55 )
      goto LABEL_108;
    BattleEventTutorial__callStart(v55, v56, 0LL);
    goto LABEL_105;
  }
  if ( !v55 )
    goto LABEL_108;
  isWave = BattleEventTutorial__isWave(this->fields.eventTutorial, 0LL);
  v64 = this->fields.eventTutorial;
  if ( isWave )
  {
    v65 = (System_Action_o *)sub_B170CC(System_Action_TypeInfo, v60, v61, v62, v63);
    System_Action___ctor(v65, (Il2CppObject *)this, Method_BattleLogic_callbackEventTutorialBase__, 0LL);
    if ( !v64 )
      goto LABEL_108;
    BattleEventTutorial__callWave(v64, v65, 0LL);
    goto LABEL_105;
  }
  if ( !v64 )
    goto LABEL_108;
  if ( !BattleEventTutorial__isTurn(this->fields.eventTutorial, 0LL) )
  {
    v106 = this->fields.eventTutorial;
    if ( !v106 )
      goto LABEL_108;
    if ( BattleEventTutorial__isBreakGauge(v106, 0LL) )
    {
      v111 = this->fields.eventTutorial;
      v112 = (System_Action_o *)sub_B170CC(System_Action_TypeInfo, v107, v108, v109, v110);
      System_Action___ctor(v112, (Il2CppObject *)this, Method_BattleLogic_callbackEventTutorialBase__, 0LL);
      if ( !v111 )
        goto LABEL_108;
      BattleEventTutorial__callBreakGauge(v111, v112, 0LL);
      goto LABEL_105;
    }
LABEL_95:
    v113 = this->fields.fsm;
    if ( !v113 )
      goto LABEL_108;
    PlayMakerFSM__SendEvent(v113, (System_String_o *)StringLiteral_5481, 0LL);
    goto LABEL_105;
  }
  started = BattleLogic__coroutineStartLimitTurnTutorial(this, v71);
  UnityEngine_MonoBehaviour__StartCoroutine_34804316((UnityEngine_MonoBehaviour_o *)this, started, 0LL);
LABEL_105:
  fsm = this->fields.fsm;
  if ( !fsm )
    goto LABEL_108;
  v58 = &StringLiteral_9714;
LABEL_107:
  PlayMakerFSM__SendEvent(fsm, (System_String_o *)*v58, 0LL);
}


bool __fastcall BattleLogic__checkUsableTD(BattleLogic_o *this, BattleLogicTask_o *task, const MethodInfo *method)
{
  BattleData_o *data; // x20
  int32_t ActorId; // w0
  BattleServantData_o *ServantData; // x0
  BattleServantData_o *v7; // x20

  if ( !task
    || (data = this->fields.data, ActorId = BattleLogicTask__getActorId(task, 0LL), !data)
    || (ServantData = BattleData__getServantData(data, ActorId, 0LL)) == 0LL )
  {
    sub_B170D4();
  }
  v7 = ServantData;
  return !ServantData->fields.isEnemy
      || !BattleServantData__isTDSeraled(ServantData, 0LL)
      && BattleServantData__checkUseTDvc(v7, this->fields.data, 1, 0LL);
}


void __fastcall BattleLogic__checkUsedBuff(BattleLogic_o *this, const MethodInfo *method)
{
  BattleData_o *data; // x0
  _DWORD *FieldServantList; // x0
  __int64 v4; // x1
  __int64 v5; // x2
  int v6; // w8
  _DWORD *v7; // x19
  unsigned int v8; // w20
  __int64 v9; // x8
  BattleBuffData_o *v10; // x0

  data = this->fields.data;
  if ( !data )
    goto LABEL_10;
  FieldServantList = BattleData__getFieldServantList(data, 0, 0LL);
  if ( !FieldServantList )
    goto LABEL_10;
  v6 = FieldServantList[6];
  v7 = FieldServantList;
  if ( v6 >= 1 )
  {
    v8 = 0;
    while ( 1 )
    {
      if ( v8 >= v6 )
      {
        sub_B17100(FieldServantList, v4, v5);
        sub_B170A0();
      }
      v9 = *(_QWORD *)&v7[2 * v8 + 8];
      if ( !v9 )
        break;
      v10 = *(BattleBuffData_o **)(v9 + 736);
      if ( !v10 )
        break;
      FieldServantList = BattleBuffData__usedProgressing(v10, 0LL);
      v6 = v7[6];
      if ( (int)++v8 >= v6 )
        return;
    }
LABEL_10:
    sub_B170D4();
  }
}


void __fastcall BattleLogic__checkUsedGutsBuff(BattleLogic_o *this, int32_t targetId, const MethodInfo *method)
{
  BattleData_o *data; // x0
  BattleServantData_o *ServantData; // x0
  BattleBuffData_o *buffData; // x0

  data = this->fields.data;
  if ( !data )
    goto LABEL_6;
  ServantData = BattleData__getServantData(data, targetId, 0LL);
  if ( ServantData )
  {
    buffData = ServantData->fields.buffData;
    if ( buffData )
    {
      BattleBuffData__usedProgressingGuts(buffData, 0LL);
      return;
    }
LABEL_6:
    sub_B170D4();
  }
}


void __fastcall BattleLogic__checkWaveBuff(BattleLogic_o *this, const MethodInfo *method)
{
  __int64 v3; // x1
  __int64 v4; // x1
  __int64 v5; // x1
  __int64 v6; // x1
  __int64 v7; // x1
  __int64 v8; // x1
  __int64 v9; // x1
  BattleData_o *data; // x0
  BattleData_o *v11; // x0
  __int64 v12; // x1
  __int64 v13; // x2
  __int64 v14; // x3
  __int64 v15; // x4
  System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData__o *v16; // x20
  BattleData_o *v17; // x0
  __int64 FieldServantList; // x0
  __int64 v19; // x1
  __int64 v20; // x2
  const MethodInfo *v21; // x3
  int v22; // w8
  __int64 v23; // x23
  unsigned int v24; // w26
  __int64 v25; // x8
  BattleServantData_o *v26; // x22
  __int64 v27; // x3
  __int64 v28; // x4
  int max_length; // w8
  BattleBuffData_BuffData_array *v30; // x23
  unsigned int v31; // w28
  BattleBuffData_BuffData_o *v32; // x25
  BattleSkillInfoData_o *v33; // x24
  struct System_Int32_array *vals; // x8
  struct System_Int32_array *v35; // x8
  BattleLogicSkill_o *logicSkill; // x25
  BattleLogic_o *v37; // x24
  const MethodInfo *v38; // x5
  BattleBuffData_o *buffData; // x0
  BattleLogicTask_array *v40; // x0
  const MethodInfo *v41; // x3
  System_Collections_IEnumerator_o *v42; // x0
  PlayMakerFSM_o *fsm; // x0
  __int64 v44; // [xsp+0h] [xbp-60h]
  bool isFirstAdd; // [xsp+Ch] [xbp-54h] BYREF

  if ( (byte_40F73B9 & 1) == 0 )
  {
    sub_B16FFC(&BattleSkillInfoData_TypeInfo, method);
    sub_B16FFC(&int___TypeInfo, v3);
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleLogicTask__AddRange__, v4);
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleLogicTask__ToArray__, v5);
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleLogicTask___ctor__, v6);
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleLogicTask__get_Count__, v7);
    sub_B16FFC(&System_Collections_Generic_List_BattleLogicTask__TypeInfo, v8);
    sub_B16FFC(&StringLiteral_12204, v9);
    byte_40F73B9 = 1;
  }
  isFirstAdd = 0;
  data = this->fields.data;
  if ( !data )
    goto LABEL_37;
  if ( !BattleData__checkProgressflg(data, 4, 0LL) )
    goto LABEL_34;
  v11 = this->fields.data;
  if ( !v11 )
    goto LABEL_37;
  BattleData__offProgressflg(v11, 4, 0LL);
  v16 = (System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData__o *)sub_B170CC(
                                                                                                  System_Collections_Generic_List_BattleLogicTask__TypeInfo,
                                                                                                  v12,
                                                                                                  v13,
                                                                                                  v14,
                                                                                                  v15);
  System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData____ctor(
    v16,
    (const MethodInfo_2F25014 *)Method_System_Collections_Generic_List_BattleLogicTask___ctor__);
  v17 = this->fields.data;
  if ( !v17 )
    goto LABEL_37;
  FieldServantList = (__int64)BattleData__getFieldServantList(v17, 0, 0LL);
  if ( !FieldServantList )
    goto LABEL_37;
  v22 = *(_DWORD *)(FieldServantList + 24);
  v23 = FieldServantList;
  if ( v22 >= 1 )
  {
    v24 = 0;
    v44 = FieldServantList;
    do
    {
      if ( v24 >= v22 )
        goto LABEL_38;
      v25 = v23 + 8LL * (int)v24;
      v26 = *(BattleServantData_o **)(v25 + 32);
      if ( !v26 )
        goto LABEL_37;
      FieldServantList = BattleServantData__isAlive(*(BattleServantData_o **)(v25 + 32), 0, 0LL);
      if ( (FieldServantList & 1) != 0 )
      {
        isFirstAdd = 1;
        FieldServantList = (__int64)BattleServantData__getStartWaveBuff(v26, 0LL);
        if ( !FieldServantList )
          goto LABEL_37;
        max_length = *(_DWORD *)(FieldServantList + 24);
        v30 = (BattleBuffData_BuffData_array *)FieldServantList;
        if ( max_length >= 1 )
        {
          v31 = 0;
          while ( v31 < max_length )
          {
            v32 = v30->m_Items[v31];
            v33 = (BattleSkillInfoData_o *)sub_B170CC(BattleSkillInfoData_TypeInfo, v19, v20, v27, v28);
            BattleSkillInfoData___ctor(v33, 0LL);
            if ( !v33 )
              goto LABEL_37;
            v33->fields.svtUniqueId = v26->fields.uniqueId;
            if ( !v32 )
              goto LABEL_37;
            vals = v32->fields.vals;
            if ( !vals )
              goto LABEL_37;
            if ( !vals->max_length )
              break;
            FieldServantList = ((__int64 (__fastcall *)(BattleSkillInfoData_o *, _QWORD, Il2CppMethodPointer))v33->klass->vtable._4_set_skillId.method)(
                                 v33,
                                 (unsigned int)vals->m_Items[1],
                                 v33->klass->vtable._5_get_skillId.methodPtr);
            v35 = v32->fields.vals;
            if ( !v35 )
              goto LABEL_37;
            if ( v35->max_length <= 1 )
              break;
            v33->fields.skilllv = v35->m_Items[2];
            logicSkill = this->fields.logicSkill;
            FieldServantList = sub_B17014(int___TypeInfo, 1LL, v20);
            if ( !FieldServantList )
              goto LABEL_37;
            v20 = FieldServantList;
            if ( !*(_DWORD *)(FieldServantList + 24) )
              break;
            *(_DWORD *)(FieldServantList + 32) = v26->fields.uniqueId;
            if ( !logicSkill )
              goto LABEL_37;
            v37 = (BattleLogic_o *)BattleLogicSkill__taskSkill(
                                     logicSkill,
                                     v33,
                                     (System_Int32_array *)FieldServantList,
                                     0LL,
                                     0,
                                     0,
                                     0,
                                     0LL);
            BattleLogic__SetFirstDisplayTriggerIntervalBuffArray(
              v37,
              &isFirstAdd,
              v26,
              v30,
              (BattleLogicTask_array *)v37,
              v38);
            if ( !v16 )
              goto LABEL_37;
            System_Collections_Generic_List_TimeZoneInfo_AdjustmentRule___AddRange(
              (System_Collections_Generic_List_TimeZoneInfo_AdjustmentRule__o *)v16,
              (System_Collections_Generic_IEnumerable_T__o *)v37,
              (const MethodInfo_2F25F28 *)Method_System_Collections_Generic_List_BattleLogicTask__AddRange__);
            max_length = v30->max_length;
            if ( (int)++v31 >= max_length )
              goto LABEL_28;
          }
LABEL_38:
          sub_B17100(FieldServantList, v19, v20);
          sub_B170A0();
        }
LABEL_28:
        buffData = v26->fields.buffData;
        if ( !buffData )
          goto LABEL_37;
        FieldServantList = (__int64)BattleBuffData__usedProgressing(buffData, 0LL);
        v23 = v44;
      }
      v22 = *(_DWORD *)(v23 + 24);
    }
    while ( (int)++v24 < v22 );
  }
  BattleLogic__AddUnExecutedUpdateIntervalBuffTasks(
    this,
    (System_Collections_Generic_List_BattleLogicTask__o *)v16,
    1,
    v21);
  if ( !v16 )
LABEL_37:
    sub_B170D4();
  if ( v16->fields._size >= 1 )
  {
    v40 = (BattleLogicTask_array *)System_Collections_Generic_List_WarBoardUiData_SaveData___ToArray(
                                     (System_Collections_Generic_List_WarBoardUiData_SaveData__o *)v16,
                                     (const MethodInfo_2F27E24 *)Method_System_Collections_Generic_List_BattleLogicTask__ToArray__);
    v42 = BattleLogic__waitWaveStep(this, v40, 4, v41);
    UnityEngine_MonoBehaviour__StartCoroutine_34804316((UnityEngine_MonoBehaviour_o *)this, v42, 0LL);
    return;
  }
LABEL_34:
  fsm = this->fields.fsm;
  if ( !fsm )
    goto LABEL_37;
  PlayMakerFSM__SendEvent(fsm, (System_String_o *)StringLiteral_12204, 0LL);
}


System_Collections_IEnumerator_o *__fastcall BattleLogic__colReplaceMember(
        BattleLogic_o *this,
        BattleActionData_ReplaceMember_o *replaceData,
        System_Action_o *endCallBack,
        const MethodInfo *method)
{
  __int64 v4; // x4
  BattleLogic__colReplaceMember_d__88_o *v8; // x22

  if ( (byte_40F7366 & 1) == 0 )
  {
    sub_B16FFC(&BattleLogic__colReplaceMember_d__88_TypeInfo, replaceData);
    byte_40F7366 = 1;
  }
  v8 = (BattleLogic__colReplaceMember_d__88_o *)sub_B170CC(
                                                  BattleLogic__colReplaceMember_d__88_TypeInfo,
                                                  replaceData,
                                                  endCallBack,
                                                  method,
                                                  v4);
  BattleLogic__colReplaceMember_d__88___ctor(v8, 0, 0LL);
  if ( !v8 )
    sub_B170D4();
  v8->fields.__4__this = this;
  sub_B16F98(&v8->fields.__4__this, this);
  v8->fields.replaceData = replaceData;
  sub_B16F98(&v8->fields.replaceData, replaceData);
  v8->fields.endCallBack = endCallBack;
  sub_B16F98(&v8->fields.endCallBack, endCallBack);
  return (System_Collections_IEnumerator_o *)v8;
}


void __fastcall BattleLogic__connectBattleResult(BattleLogic_o *this, const MethodInfo *method)
{
  __int64 v3; // x1
  __int64 v4; // x1
  __int64 v5; // x1
  __int64 v6; // x1
  __int64 v7; // x1
  __int64 v8; // x1
  __int64 v9; // x1
  __int64 v10; // x1
  __int64 v11; // x1
  __int64 v12; // x1
  __int64 v13; // x1
  __int64 v14; // x1
  __int64 v15; // x1
  __int64 v16; // x1
  __int64 v17; // x1
  __int64 v18; // x1
  __int64 v19; // x1
  __int64 v20; // x1
  __int64 v21; // x1
  __int64 v22; // x1
  __int64 v23; // x1
  __int64 v24; // x1
  __int64 v25; // x1
  __int64 v26; // x1
  __int64 v27; // x1
  __int64 v28; // x1
  __int64 v29; // x1
  __int64 v30; // x1
  __int64 v31; // x1
  struct BattleData_o *data; // x0
  BattleData_o **p_data; // x28
  struct BattleEntity_o *battle_ent; // x23
  int32_t WinResult; // w25
  int32_t WarIdByQuestId; // w0
  int32_t questPhase; // w20
  int32_t questId; // w21
  int32_t v39; // w24
  __int64 v40; // x1
  __int64 v41; // x2
  __int64 v42; // x3
  __int64 v43; // x4
  BattleScriptRootComponent_TalkScriptInfo_o *v44; // x19
  __int64 v45; // x1
  __int64 v46; // x2
  __int64 v47; // x3
  __int64 v48; // x4
  WebViewManager_o *Instance; // x0
  QuestPhaseMaster_o *MasterData_WarQuestSelectionMaster; // x0
  BattleServantData_array *PlayerServantList; // x0
  __int64 v52; // x1
  const MethodInfo *v53; // x2
  int max_length; // w8
  BattleServantData_array *v55; // x19
  unsigned int v56; // w20
  Il2CppClass **v57; // x8
  Il2CppClass *v58; // x21
  BattleServantData_array *EnemyServantList; // x25
  __int64 v60; // x1
  __int64 v61; // x2
  __int64 v62; // x3
  __int64 v63; // x4
  __int64 v64; // x1
  __int64 v65; // x2
  __int64 v66; // x3
  __int64 v67; // x4
  System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData__o *v68; // x24
  int v69; // w8
  unsigned int v70; // w22
  BattleServantData_o *v71; // x26
  int32_t uniqueId; // w21
  BattleData_o **v73; // x24
  int32_t RaidDay; // w27
  int32_t MaxHp; // w28
  int32_t NowHp; // w20
  __int64 v77; // x1
  __int64 v78; // x2
  __int64 v79; // x3
  __int64 v80; // x4
  BattleResultRequest_RaidResult_o *v81; // x19
  int32_t v82; // w19
  int32_t v83; // w19
  __int64 v84; // x3
  __int64 v85; // x4
  BattleInfoData_o *v86; // x0
  __int64 lowLimitShift; // x20
  bool i; // cc
  struct System_Int32_array *v89; // x8
  BattleInfoData_o *v90; // x0
  int32_t v91; // w20
  int32_t sendDamageForSuperBossId; // w26
  BattleResultRequest_SuperBossResult_o *v93; // x21
  System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData__o *v94; // x0
  EventMissionProgressRequest_Argument_ProgressData_o *v95; // x1
  BattleInfoData_o *battle_info; // x0
  int64_t SuperBossNokoriHp; // x21
  int32_t v98; // w27
  __int64 v99; // x3
  __int64 v100; // x4
  struct System_Int32_array *shiftDeckList; // x8
  __int64 shiftDeckIndex; // x19
  __int64 v103; // x20
  int v104; // w9
  BattleInfoData_o *battleInfo; // x0
  int32_t v106; // w20
  int32_t superBossId; // w27
  int32_t v108; // w26
  __int64 v109; // x1
  __int64 v110; // x2
  __int64 v111; // x3
  __int64 v112; // x4
  BattleResultRequest_SuperBossResult_o *v113; // x0
  BattleResultRequest_SuperBossResult_o *v114; // x19
  int32_t v115; // w3
  int32_t v116; // w1
  int32_t v117; // w2
  int32_t v118; // w20
  int32_t v119; // w26
  int32_t v120; // w19
  __int64 v121; // x1
  __int64 v122; // x2
  __int64 v123; // x3
  __int64 v124; // x4
  BattleResultRequest_Argument_o *v125; // x25
  void *v126; // x1
  System_String_o *ActionList; // x0
  System_Int32_array_array *VoicePlayedList; // x0
  WarBoardUiData_SaveData_array *v129; // x0
  WarBoardUiData_SaveData_array *v130; // x0
  struct System_Int32_array *waveClearNeedTurn; // x1
  System_Collections_Generic_Dictionary_string__object__o *QuestRecordJson; // x0
  struct System_Collections_Generic_List_Dictionary_string__object___o *v133; // x1
  struct PlayerServantNoblePhantasmUsageData_o *v134; // x1
  struct System_Collections_Generic_Dictionary_int__int__o *usedEventMasterSkillDict; // x1
  System_Collections_Generic_Dictionary_int__int__o *SavedServantCommonFlagDict; // x0
  System_Int32_array *ItemDroppedSkillShiftUniqueIdArray; // x0
  System_Int64_array *ItemDroppedSkillShiftNpcSvtIdArray; // x0
  System_Int32_array *QuestRouteIdArray; // x0
  __int64 v140; // x1
  __int64 v141; // x2
  __int64 v142; // x3
  __int64 v143; // x4
  struct BaseBattleEvent_o *battleEvent; // x19
  NetworkManager_ResultCallbackFunc_o *v145; // x21
  __int64 v146; // x1
  __int64 v147; // x2
  __int64 v148; // x3
  __int64 v149; // x4
  NetworkManager_ResultCallbackFunc_o *v150; // x19
  WarBoardWallAttackRequest_o *Request_WarBoardWallAttackRequest; // x0
  BattleData_o *v152; // x8
  int64_t id; // x19
  int32_t win_lose; // w20
  System_String_o *v155; // x0
  System_String_o *v156; // x23
  System_Int32_array_array *v157; // x24
  WarBoardUiData_SaveData_array *v158; // x22
  WarBoardUiData_SaveData_array *v159; // x0
  BattleData_o *v160; // x8
  int32_t turnCount; // w25
  System_Int32_array *v162; // x26
  BattleResultRequest_SuperBossResult_array *v163; // x21
  System_Collections_Generic_Dictionary_string__object__o *v164; // x0
  BattleData_o *v165; // x8
  System_Collections_Generic_List_Dictionary_string__object___o *v166; // x27
  System_Collections_Generic_Dictionary_int__int__o *v167; // x0
  System_Collections_Generic_Dictionary_int__int__o *v168; // x25
  System_Int32_array *v169; // x0
  System_Int32_array *skillShiftUniqueIdArray; // x26
  BattleResultRequest_RaidResult_array *v171; // x21
  System_Int64_array *v172; // x0
  System_Int64_array *v173; // x27
  System_String_o *v174; // x22
  System_Int32_array *v175; // x0
  BattleData_o *v176; // x8
  System_Int32_array *calledEnemyUniqueIdArray; // x28
  System_Int32_array *v178; // x23
  System_Int32_array *dataLostUniqueIdArray; // x0
  System_Collections_Generic_Dictionary_int__int__o *usedEquipSkillDict; // [xsp+80h] [xbp-C0h]
  PlayerServantNoblePhantasmUsageData_o *playerServantNoblePhantasmUsageData; // [xsp+88h] [xbp-B8h]
  System_Collections_Generic_List_Dictionary_string__object___o *firstNpPlayList; // [xsp+90h] [xbp-B0h]
  System_Collections_Generic_Dictionary_string__object__o *recordJson; // [xsp+98h] [xbp-A8h]
  int32_t recordType; // [xsp+A4h] [xbp-9Ch]
  System_Int32_array *usedTurnArray; // [xsp+A8h] [xbp-98h]
  System_Int32_array *AliveEnemys; // [xsp+B0h] [xbp-90h]
  Il2CppObject *v187; // [xsp+B8h] [xbp-88h]
  BattleResultRequest_o *v188; // [xsp+B8h] [xbp-88h]
  int32_t v189; // [xsp+C4h] [xbp-7Ch]
  int32_t v190; // [xsp+C4h] [xbp-7Ch]
  System_Collections_Generic_List_int__o *v191; // [xsp+C8h] [xbp-78h]
  System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData__o *v192; // [xsp+D0h] [xbp-70h]
  int32_t elapsedTurn; // [xsp+D0h] [xbp-70h]
  System_Collections_Generic_List_WarBoardUiData_SaveData__o *v194; // [xsp+D8h] [xbp-68h]
  BattleResultRequest_SuperBossResult_array *superBossResult; // [xsp+D8h] [xbp-68h]
  QuestPhaseEntity_o *entity; // [xsp+E0h] [xbp-60h] BYREF

  if ( (byte_40F736F & 1) == 0 )
  {
    sub_B16FFC(&BattleResultRequest_Argument_TypeInfo, method);
    sub_B16FFC(&BattleData_TypeInfo, v3);
    sub_B16FFC(&Method_BattleLogic_callbackRequest__, v4);
    sub_B16FFC(&Method_DataManager_GetMasterData_QuestPhaseMaster___, v5);
    sub_B16FFC(&EncryptedPlayerPrefs_TypeInfo, v6);
    sub_B16FFC(&Method_System_Linq_Enumerable_ToArray_int___, v7);
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleResultRequest_SuperBossResult__Add__, v8);
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleResultRequest_RaidResult__Add__, v9);
    sub_B16FFC(&Method_System_Collections_Generic_List_int__Add__, v10);
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleResultRequest_SuperBossResult__ToArray__, v11);
    sub_B16FFC(&Method_System_Collections_Generic_List_int__ToArray__, v12);
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleResultRequest_RaidResult__ToArray__, v13);
    sub_B16FFC(&Method_System_Collections_Generic_List_int___ctor__, v14);
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleResultRequest_RaidResult___ctor__, v15);
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleResultRequest_SuperBossResult___ctor__, v16);
    sub_B16FFC(&System_Collections_Generic_List_int__TypeInfo, v17);
    sub_B16FFC(&System_Collections_Generic_List_BattleResultRequest_SuperBossResult__TypeInfo, v18);
    sub_B16FFC(&System_Collections_Generic_List_BattleResultRequest_RaidResult__TypeInfo, v19);
    sub_B16FFC(&Method_NetworkManager_getRequest_BattleResultRequest___, v20);
    sub_B16FFC(&NetworkManager_TypeInfo, v21);
    sub_B16FFC(&BattleResultRequest_RaidResult_TypeInfo, v22);
    sub_B16FFC(&NetworkManager_ResultCallbackFunc_TypeInfo, v23);
    sub_B16FFC(&ScriptManager_TypeInfo, v24);
    sub_B16FFC(&Method_SingletonMonoBehaviour_DataManager__get_Instance__, v25);
    sub_B16FFC(&BattleResultRequest_SuperBossResult_TypeInfo, v26);
    sub_B16FFC(&BattleScriptRootComponent_TalkScriptInfo_TypeInfo, v27);
    sub_B16FFC(&StringLiteral_17805, v28);
    sub_B16FFC(&StringLiteral_21402, v29);
    sub_B16FFC(&StringLiteral_21623, v30);
    sub_B16FFC(&StringLiteral_1, v31);
    byte_40F736F = 1;
  }
  entity = 0LL;
  p_data = &this->fields.data;
  data = this->fields.data;
  if ( !data )
    goto LABEL_122;
  battle_ent = data->fields.battle_ent;
  WinResult = BattleData__getWinResult(data, 0LL);
  if ( (BYTE3(EncryptedPlayerPrefs_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0
    && !EncryptedPlayerPrefs_TypeInfo->_2.cctor_finished )
  {
    j_il2cpp_runtime_class_init_0(EncryptedPlayerPrefs_TypeInfo);
  }
  EncryptedPlayerPrefs__DeleteKey((System_String_o *)StringLiteral_21623, 0LL);
  EncryptedPlayerPrefs__DeleteKey((System_String_o *)StringLiteral_21402, 0LL);
  if ( !*p_data )
    goto LABEL_122;
  if ( BattleData__isResultWin(*p_data, 0LL) )
  {
    if ( !*p_data )
      goto LABEL_122;
    if ( !BattleData__IsWarBoard(*p_data, 0LL) )
    {
      if ( !battle_ent )
        goto LABEL_122;
      WarIdByQuestId = QuestMaster__GetWarIdByQuestId(battle_ent->fields.questId, 0LL);
      questId = battle_ent->fields.questId;
      questPhase = battle_ent->fields.questPhase;
      v39 = WarIdByQuestId;
      v44 = (BattleScriptRootComponent_TalkScriptInfo_o *)sub_B170CC(
                                                            BattleScriptRootComponent_TalkScriptInfo_TypeInfo,
                                                            v40,
                                                            v41,
                                                            v42,
                                                            v43);
      BattleScriptRootComponent_TalkScriptInfo___ctor_19546052(v44, v39, questId, questPhase, 4, 6, 1, WinResult, 0LL);
      if ( (BYTE3(ScriptManager_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0
        && !ScriptManager_TypeInfo->_2.cctor_finished )
      {
        j_il2cpp_runtime_class_init_0(ScriptManager_TypeInfo);
      }
      ScriptManager__SaveTalkResumeInfo(v44, 0LL);
    }
  }
  if ( !*p_data )
    goto LABEL_122;
  AliveEnemys = BattleData__getAliveEnemys(*p_data, 0LL);
  v191 = (System_Collections_Generic_List_int__o *)sub_B170CC(
                                                     System_Collections_Generic_List_int__TypeInfo,
                                                     v45,
                                                     v46,
                                                     v47,
                                                     v48);
  System_Collections_Generic_List_int____ctor(
    v191,
    (const MethodInfo_2F0F794 *)Method_System_Collections_Generic_List_int___ctor__);
  Instance = SingletonMonoBehaviour_WebViewManager___get_Instance((const MethodInfo_2A54F38 *)Method_SingletonMonoBehaviour_DataManager__get_Instance__);
  if ( !Instance )
    goto LABEL_122;
  MasterData_WarQuestSelectionMaster = (QuestPhaseMaster_o *)DataManager__GetMasterData_WarQuestSelectionMaster_(
                                                               (DataManager_o *)Instance,
                                                               (const MethodInfo_18C3284 *)Method_DataManager_GetMasterData_QuestPhaseMaster___);
  if ( !battle_ent || !MasterData_WarQuestSelectionMaster )
    goto LABEL_122;
  if ( QuestPhaseMaster__TryGetEntity(
         MasterData_WarQuestSelectionMaster,
         &entity,
         battle_ent->fields.questId,
         battle_ent->fields.questPhase,
         0LL) )
  {
    if ( !entity )
      goto LABEL_122;
    if ( (QuestPhaseEntity__getScriptIntParam(entity, (System_String_o *)StringLiteral_17805, -1, 0LL) & 0x80000000) == 0 )
    {
      if ( !*p_data )
        goto LABEL_122;
      PlayerServantList = BattleData__getPlayerServantList(*p_data, 0LL);
      if ( !PlayerServantList )
        goto LABEL_122;
      max_length = PlayerServantList->max_length;
      v55 = PlayerServantList;
      if ( max_length >= 1 )
      {
        v56 = 0;
        do
        {
          if ( v56 >= max_length )
          {
LABEL_123:
            sub_B17100(PlayerServantList, v52, v53);
            sub_B170A0();
          }
          v57 = &v55->obj.klass + (int)v56;
          v58 = v57[4];
          if ( !v58 )
            goto LABEL_122;
          PlayerServantList = (BattleServantData_array *)BattleServantData__isDead((BattleServantData_o *)v57[4], 0LL);
          if ( ((unsigned __int8)PlayerServantList & 1) != 0 )
          {
            if ( !v191 )
              goto LABEL_122;
            System_Collections_Generic_List_int___Add(
              v191,
              (int32_t)v58->_1.namespaze,
              (const MethodInfo_2F104F0 *)Method_System_Collections_Generic_List_int__Add__);
          }
          max_length = v55->max_length;
        }
        while ( (int)++v56 < max_length );
      }
    }
  }
  if ( !*p_data )
    goto LABEL_122;
  v187 = (Il2CppObject *)this;
  v189 = WinResult;
  EnemyServantList = BattleData__getEnemyServantList(*p_data, 0LL);
  v192 = (System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData__o *)sub_B170CC(
                                                                                                   System_Collections_Generic_List_BattleResultRequest_RaidResult__TypeInfo,
                                                                                                   v60,
                                                                                                   v61,
                                                                                                   v62,
                                                                                                   v63);
  System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData____ctor(
    v192,
    (const MethodInfo_2F25014 *)Method_System_Collections_Generic_List_BattleResultRequest_RaidResult___ctor__);
  v68 = (System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData__o *)sub_B170CC(
                                                                                                  System_Collections_Generic_List_BattleResultRequest_SuperBossResult__TypeInfo,
                                                                                                  v64,
                                                                                                  v65,
                                                                                                  v66,
                                                                                                  v67);
  System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData____ctor(
    v68,
    (const MethodInfo_2F25014 *)Method_System_Collections_Generic_List_BattleResultRequest_SuperBossResult___ctor__);
  if ( !EnemyServantList )
    goto LABEL_122;
  v69 = EnemyServantList->max_length;
  v194 = (System_Collections_Generic_List_WarBoardUiData_SaveData__o *)v68;
  if ( v69 >= 1 )
  {
    v70 = 0;
    while ( 1 )
    {
      if ( v70 >= v69 )
        goto LABEL_123;
      v71 = EnemyServantList->m_Items[v70];
      if ( !v71 )
        goto LABEL_122;
      if ( v71->fields.isRaid )
      {
        if ( !*p_data )
          goto LABEL_122;
        uniqueId = v71->fields.uniqueId;
        v73 = p_data;
        RaidDay = BattleData__getRaidDay(*p_data, uniqueId, 0LL);
        MaxHp = BattleServantData__getMaxHp(v71, 0LL);
        NowHp = BattleServantData__getNowHp(v71, 0LL);
        v81 = (BattleResultRequest_RaidResult_o *)sub_B170CC(
                                                    BattleResultRequest_RaidResult_TypeInfo,
                                                    v77,
                                                    v78,
                                                    v79,
                                                    v80);
        BattleResultRequest_RaidResult___ctor(v81, uniqueId, RaidDay, MaxHp - NowHp, 0LL);
        if ( !v192 )
          goto LABEL_122;
        System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData___Add(
          v192,
          (EventMissionProgressRequest_Argument_ProgressData_o *)v81,
          (const MethodInfo_2F25CD8 *)Method_System_Collections_Generic_List_BattleResultRequest_RaidResult__Add__);
        p_data = v73;
        v68 = (System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData__o *)v194;
      }
      if ( v71->fields.isSendDamageForSuperBossId )
        break;
      if ( v71->fields.isSuperBoss )
      {
        if ( !*p_data )
          goto LABEL_122;
        battle_info = (*p_data)->fields.battle_info;
        if ( !battle_info )
          goto LABEL_122;
        SuperBossNokoriHp = BattleInfoData__getSuperBossNokoriHp(battle_info, v71->fields.superBossId, v53);
        if ( SuperBossNokoriHp <= BattleServantData__getMaxHp(v71, 0LL) )
        {
          v106 = v71->fields.uniqueId;
          superBossId = v71->fields.superBossId;
          v108 = BattleServantData__getNowHp(v71, 0LL);
          v113 = (BattleResultRequest_SuperBossResult_o *)sub_B170CC(
                                                            BattleResultRequest_SuperBossResult_TypeInfo,
                                                            v109,
                                                            v110,
                                                            v111,
                                                            v112);
          v114 = v113;
          v115 = SuperBossNokoriHp - v108;
          v116 = v106;
          v117 = superBossId;
        }
        else
        {
          v98 = BattleServantData__getNowHp(v71, 0LL);
          PlayerServantList = (BattleServantData_array *)BattleServantData__GetMaxShiftIconCount(v71, 0LL);
          if ( (int)PlayerServantList < 1 )
          {
            LODWORD(SuperBossNokoriHp) = BattleServantData__getMaxHp(v71, 0LL);
          }
          else
          {
            shiftDeckList = v71->fields.shiftDeckList;
            if ( !shiftDeckList )
              goto LABEL_122;
            shiftDeckIndex = v71->fields.shiftDeckIndex;
            v103 = 4 * shiftDeckIndex + 32;
            while ( 1 )
            {
              v104 = shiftDeckList->max_length;
              if ( (int)shiftDeckIndex >= v104 )
                break;
              if ( (unsigned int)shiftDeckIndex >= v104 )
                goto LABEL_123;
              battleInfo = battle_ent->fields.battleInfo;
              if ( battleInfo )
              {
                PlayerServantList = (BattleServantData_array *)BattleInfoData__GetShiftDeckHp(
                                                                 battleInfo,
                                                                 *(_DWORD *)((char *)&shiftDeckList->obj.klass + v103),
                                                                 v53);
                shiftDeckList = v71->fields.shiftDeckList;
                v98 += (int)PlayerServantList;
                LODWORD(shiftDeckIndex) = shiftDeckIndex + 1;
                v103 += 4LL;
                if ( shiftDeckList )
                  continue;
              }
              goto LABEL_122;
            }
          }
          v118 = v71->fields.uniqueId;
          v119 = v71->fields.superBossId;
          v113 = (BattleResultRequest_SuperBossResult_o *)sub_B170CC(
                                                            BattleResultRequest_SuperBossResult_TypeInfo,
                                                            v52,
                                                            v53,
                                                            v99,
                                                            v100);
          v114 = v113;
          v115 = SuperBossNokoriHp - v98;
          v116 = v118;
          v117 = v119;
        }
        BattleResultRequest_SuperBossResult___ctor(v113, v116, v117, v115, 0LL);
        v68 = (System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData__o *)v194;
        if ( !v194 )
          goto LABEL_122;
        v94 = (System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData__o *)v194;
        v95 = (EventMissionProgressRequest_Argument_ProgressData_o *)v114;
        goto LABEL_72;
      }
LABEL_73:
      v69 = EnemyServantList->max_length;
      if ( (int)++v70 >= v69 )
        goto LABEL_74;
    }
    v82 = v71->fields.maxhp;
    v83 = v82 - BattleServantData__getNowHp(v71, 0LL);
    if ( BattleServantData__GetMaxShiftIconCount(v71, 0LL) >= 1
      && v71->fields.lowLimitShift < v71->fields.shiftDeckIndex )
    {
      v86 = battle_ent->fields.battleInfo;
      if ( !v86 )
        goto LABEL_122;
      PlayerServantList = (BattleServantData_array *)BattleInfoData__GetEnemyDeckHp(v86, v71->fields.uniqueId, v53);
      lowLimitShift = v71->fields.lowLimitShift;
      for ( i = (int)lowLimitShift < v71->fields.shiftDeckIndex - 1; ; i = lowLimitShift < v71->fields.shiftDeckIndex
                                                                                         - 1 )
      {
        v83 += (int)PlayerServantList;
        if ( !i )
          break;
        v89 = v71->fields.shiftDeckList;
        if ( !v89 )
          goto LABEL_122;
        if ( (unsigned int)lowLimitShift >= v89->max_length )
          goto LABEL_123;
        v90 = battle_ent->fields.battleInfo;
        if ( !v90 )
          goto LABEL_122;
        PlayerServantList = (BattleServantData_array *)BattleInfoData__GetShiftDeckHp(
                                                         v90,
                                                         v89->m_Items[++lowLimitShift],
                                                         v53);
      }
    }
    v91 = v71->fields.uniqueId;
    sendDamageForSuperBossId = v71->fields.sendDamageForSuperBossId;
    v93 = (BattleResultRequest_SuperBossResult_o *)sub_B170CC(
                                                     BattleResultRequest_SuperBossResult_TypeInfo,
                                                     v52,
                                                     v53,
                                                     v84,
                                                     v85);
    BattleResultRequest_SuperBossResult___ctor(v93, v91, sendDamageForSuperBossId, v83, 0LL);
    if ( !v68 )
      goto LABEL_122;
    v94 = v68;
    v95 = (EventMissionProgressRequest_Argument_ProgressData_o *)v93;
LABEL_72:
    System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData___Add(
      v94,
      v95,
      (const MethodInfo_2F25CD8 *)Method_System_Collections_Generic_List_BattleResultRequest_SuperBossResult__Add__);
    goto LABEL_73;
  }
LABEL_74:
  if ( !*p_data )
    goto LABEL_122;
  v120 = v189;
  if ( BattleData__isBattleResultLoseQuestClear(*p_data, 0LL) )
    goto LABEL_78;
  if ( !*p_data )
    goto LABEL_122;
  if ( BattleData__isBattleRetreatQuestClear(*p_data, 0LL) )
  {
LABEL_78:
    if ( !*p_data )
      goto LABEL_122;
    if ( ((v189 == 3) & BattleData__isResultWin(*p_data, 0LL)) != 0 )
      v120 = 0;
  }
  v125 = (BattleResultRequest_Argument_o *)sub_B170CC(BattleResultRequest_Argument_TypeInfo, v121, v122, v123, v124);
  BattleResultRequest_Argument___ctor(v125, 0LL);
  if ( !v125 )
    goto LABEL_122;
  v125->fields.battleId = battle_ent->fields.id;
  if ( !*p_data )
    goto LABEL_122;
  v125->fields.battleResult = (*p_data)->fields.win_lose;
  v125->fields.winResult = v120;
  v126 = StringLiteral_1;
  v125->fields.scores = (struct System_String_o *)StringLiteral_1;
  sub_B16F98(&v125->fields.scores, v126);
  if ( !*p_data )
    goto LABEL_122;
  ActionList = BattleData__getActionList(*p_data, 0LL);
  v125->fields.action = ActionList;
  sub_B16F98(&v125->fields.action, ActionList);
  if ( !*p_data )
    goto LABEL_122;
  VoicePlayedList = BattleData__get_VoicePlayedList(*p_data, 0LL);
  v125->fields.voicePlayedArray = VoicePlayedList;
  sub_B16F98(&v125->fields.voicePlayedArray, VoicePlayedList);
  v125->fields.aliveUniqueIds = AliveEnemys;
  sub_B16F98(&v125->fields.aliveUniqueIds, AliveEnemys);
  if ( !v192 )
    goto LABEL_122;
  v190 = v120;
  v129 = System_Collections_Generic_List_WarBoardUiData_SaveData___ToArray(
           (System_Collections_Generic_List_WarBoardUiData_SaveData__o *)v192,
           (const MethodInfo_2F27E24 *)Method_System_Collections_Generic_List_BattleResultRequest_RaidResult__ToArray__);
  v125->fields.raidResult = (struct BattleResultRequest_RaidResult_array *)v129;
  sub_B16F98(&v125->fields.raidResult, v129);
  if ( !v68 )
    goto LABEL_122;
  v130 = System_Collections_Generic_List_WarBoardUiData_SaveData___ToArray(
           (System_Collections_Generic_List_WarBoardUiData_SaveData__o *)v68,
           (const MethodInfo_2F27E24 *)Method_System_Collections_Generic_List_BattleResultRequest_SuperBossResult__ToArray__);
  v125->fields.superBossResult = (struct BattleResultRequest_SuperBossResult_array *)v130;
  sub_B16F98(&v125->fields.superBossResult, v130);
  if ( !*p_data )
    goto LABEL_122;
  v125->fields.elapsedTurn = (*p_data)->fields.turnCount;
  if ( !*p_data )
    goto LABEL_122;
  waveClearNeedTurn = (*p_data)->fields.waveClearNeedTurn;
  v125->fields.usedTurnArray = waveClearNeedTurn;
  sub_B16F98(&v125->fields.usedTurnArray, waveClearNeedTurn);
  if ( !*p_data )
    goto LABEL_122;
  v125->fields.recordType = BattleData__getQuestRecordType(*p_data, 0LL);
  if ( !*p_data )
    goto LABEL_122;
  QuestRecordJson = BattleData__getQuestRecordJson(*p_data, 0LL);
  v125->fields.recordJson = QuestRecordJson;
  sub_B16F98(&v125->fields.recordJson, QuestRecordJson);
  if ( !*p_data )
    goto LABEL_122;
  v133 = (*p_data)->fields.firstNpPlayList;
  v125->fields.firstNpPlayList = v133;
  sub_B16F98(&v125->fields.firstNpPlayList, v133);
  if ( !*p_data )
    goto LABEL_122;
  v134 = (*p_data)->fields.playerServantNoblePhantasmUsageData;
  v125->fields.playerServantNoblePhantasmUsageData = v134;
  sub_B16F98(&v125->fields.playerServantNoblePhantasmUsageData, v134);
  if ( !*p_data )
    goto LABEL_122;
  usedEventMasterSkillDict = (*p_data)->fields.usedEventMasterSkillDict;
  v125->fields.usedEquipSkillDict = usedEventMasterSkillDict;
  sub_B16F98(&v125->fields.usedEquipSkillDict, usedEventMasterSkillDict);
  if ( (BYTE3(BattleData_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0 && !BattleData_TypeInfo->_2.cctor_finished )
    j_il2cpp_runtime_class_init_0(BattleData_TypeInfo);
  SavedServantCommonFlagDict = BattleData__GetSavedServantCommonFlagDict(0LL);
  v125->fields.svtCommonFlagDict = SavedServantCommonFlagDict;
  sub_B16F98(&v125->fields.svtCommonFlagDict, SavedServantCommonFlagDict);
  if ( !*p_data )
    goto LABEL_122;
  ItemDroppedSkillShiftUniqueIdArray = BattleData__GetItemDroppedSkillShiftUniqueIdArray(*p_data, 0LL);
  v125->fields.skillShiftUniqueIds = ItemDroppedSkillShiftUniqueIdArray;
  sub_B16F98(&v125->fields.skillShiftUniqueIds, ItemDroppedSkillShiftUniqueIdArray);
  if ( !*p_data )
    goto LABEL_122;
  ItemDroppedSkillShiftNpcSvtIdArray = BattleData__GetItemDroppedSkillShiftNpcSvtIdArray(*p_data, 0LL);
  v125->fields.skillShiftNpcSvtIds = ItemDroppedSkillShiftNpcSvtIdArray;
  sub_B16F98(&v125->fields.skillShiftNpcSvtIds, ItemDroppedSkillShiftNpcSvtIdArray);
  if ( !*p_data
    || (QuestRouteIdArray = BattleData__GetQuestRouteIdArray(*p_data, 0LL),
        v125->fields.routeSelect = QuestRouteIdArray,
        sub_B16F98(&v125->fields.routeSelect, QuestRouteIdArray),
        !*p_data)
    || (battleEvent = (*p_data)->fields.battleEvent,
        v145 = (NetworkManager_ResultCallbackFunc_o *)sub_B170CC(
                                                        NetworkManager_ResultCallbackFunc_TypeInfo,
                                                        v140,
                                                        v141,
                                                        v142,
                                                        v143),
        NetworkManager_ResultCallbackFunc___ctor(v145, v187, Method_BattleLogic_callbackRequest__, 0LL),
        !battleEvent) )
  {
LABEL_122:
    sub_B170D4();
  }
  if ( (((__int64 (__fastcall *)(struct BaseBattleEvent_o *, BattleResultRequest_Argument_o *, NetworkManager_ResultCallbackFunc_o *, Il2CppMethodPointer))battleEvent->klass->vtable._14_SendBattleResult.method)(
          battleEvent,
          v125,
          v145,
          battleEvent->klass->vtable._15_InitStartResult.methodPtr) & 1) == 0 )
  {
    v150 = (NetworkManager_ResultCallbackFunc_o *)sub_B170CC(
                                                    NetworkManager_ResultCallbackFunc_TypeInfo,
                                                    v146,
                                                    v147,
                                                    v148,
                                                    v149);
    NetworkManager_ResultCallbackFunc___ctor(v150, v187, Method_BattleLogic_callbackRequest__, 0LL);
    if ( (BYTE3(NetworkManager_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0
      && !NetworkManager_TypeInfo->_2.cctor_finished )
    {
      j_il2cpp_runtime_class_init_0(NetworkManager_TypeInfo);
    }
    Request_WarBoardWallAttackRequest = NetworkManager__getRequest_WarBoardWallAttackRequest_(
                                          v150,
                                          (const MethodInfo_19DD960 *)Method_NetworkManager_getRequest_BattleResultRequest___);
    v152 = *p_data;
    v188 = (BattleResultRequest_o *)Request_WarBoardWallAttackRequest;
    if ( !*p_data )
      goto LABEL_122;
    id = battle_ent->fields.id;
    win_lose = v152->fields.win_lose;
    v155 = BattleData__getActionList(v152, 0LL);
    if ( !*p_data )
      goto LABEL_122;
    v156 = v155;
    v157 = BattleData__get_VoicePlayedList(*p_data, 0LL);
    v158 = System_Collections_Generic_List_WarBoardUiData_SaveData___ToArray(
             (System_Collections_Generic_List_WarBoardUiData_SaveData__o *)v192,
             (const MethodInfo_2F27E24 *)Method_System_Collections_Generic_List_BattleResultRequest_RaidResult__ToArray__);
    v159 = System_Collections_Generic_List_WarBoardUiData_SaveData___ToArray(
             v194,
             (const MethodInfo_2F27E24 *)Method_System_Collections_Generic_List_BattleResultRequest_SuperBossResult__ToArray__);
    v160 = *p_data;
    if ( !*p_data )
      goto LABEL_122;
    turnCount = v160->fields.turnCount;
    v162 = v160->fields.waveClearNeedTurn;
    v163 = (BattleResultRequest_SuperBossResult_array *)v159;
    recordType = BattleData__getQuestRecordType(*p_data, 0LL);
    if ( !*p_data )
      goto LABEL_122;
    v164 = BattleData__getQuestRecordJson(*p_data, 0LL);
    v165 = *p_data;
    recordJson = v164;
    if ( !*p_data )
      goto LABEL_122;
    elapsedTurn = turnCount;
    v166 = v165->fields.firstNpPlayList;
    playerServantNoblePhantasmUsageData = v165->fields.playerServantNoblePhantasmUsageData;
    usedEquipSkillDict = v165->fields.usedEventMasterSkillDict;
    if ( (BYTE3(BattleData_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0 && !BattleData_TypeInfo->_2.cctor_finished )
      j_il2cpp_runtime_class_init_0(BattleData_TypeInfo);
    usedTurnArray = v162;
    v167 = BattleData__GetSavedServantCommonFlagDict(0LL);
    if ( !*p_data )
      goto LABEL_122;
    v168 = v167;
    firstNpPlayList = v166;
    superBossResult = v163;
    v169 = BattleData__GetItemDroppedSkillShiftUniqueIdArray(*p_data, 0LL);
    if ( !*p_data )
      goto LABEL_122;
    skillShiftUniqueIdArray = v169;
    v171 = (BattleResultRequest_RaidResult_array *)v158;
    v172 = BattleData__GetItemDroppedSkillShiftNpcSvtIdArray(*p_data, 0LL);
    if ( !*p_data )
      goto LABEL_122;
    v173 = v172;
    v174 = v156;
    v175 = System_Linq_Enumerable__ToArray_int_(
             (System_Collections_Generic_IEnumerable_TSource__o *)(*p_data)->fields.calledEnemyUniqueIdHash,
             (const MethodInfo_19C4A28 *)Method_System_Linq_Enumerable_ToArray_int___);
    v176 = *p_data;
    if ( !*p_data )
      goto LABEL_122;
    calledEnemyUniqueIdArray = v175;
    v178 = BattleData__GetQuestRouteIdArray(v176, 0LL);
    if ( !v191 )
      goto LABEL_122;
    dataLostUniqueIdArray = System_Collections_Generic_List_int___ToArray(
                              v191,
                              (const MethodInfo_2F125FC *)Method_System_Collections_Generic_List_int__ToArray__);
    if ( !v188 )
      goto LABEL_122;
    BattleResultRequest__beginRequest(
      v188,
      id,
      win_lose,
      v190,
      (System_String_o *)StringLiteral_1,
      v174,
      v157,
      AliveEnemys,
      v171,
      superBossResult,
      elapsedTurn,
      usedTurnArray,
      recordType,
      recordJson,
      firstNpPlayList,
      playerServantNoblePhantasmUsageData,
      usedEquipSkillDict,
      v168,
      skillShiftUniqueIdArray,
      v173,
      calledEnemyUniqueIdArray,
      v178,
      dataLostUniqueIdArray,
      0LL);
  }
}


void __fastcall BattleLogic__connectCommandSpell(BattleLogic_o *this, const MethodInfo *method)
{
  const MethodInfo *v2; // x2
  __int64 v4; // x1
  __int64 v5; // x1
  __int64 v6; // x1
  __int64 v7; // x1
  __int64 v8; // x1
  struct BattleLogic_CommandSpellData_o *actData; // x8
  BattleData_o *data; // x0
  BattleData_o *v11; // x0
  __int64 v12; // x1
  const MethodInfo *v13; // x2
  __int64 v14; // x3
  __int64 v15; // x4
  struct BattleLogic_CommandSpellData_o *v16; // x8
  _BOOL4 connCammdSpellRetryFlg; // w21
  NetworkManager_ResultCallbackFunc_o *v18; // x0
  NetworkManager_ResultCallbackFunc_o *v19; // x20
  RequestBase_o *Request_WarBoardWallAttackRequest; // x0
  BattleCommandSpellRequest_o *v21; // x0
  struct BattleData_o *v22; // x8
  struct BattleEntity_o *battle_ent; // x9
  struct BattleLogic_CommandSpellData_o *v24; // x10

  if ( (byte_40F73CB & 1) == 0 )
  {
    sub_B16FFC(&BattleData_TypeInfo, method);
    sub_B16FFC(&Method_BattleLogic_callBackCommandSpell__, v4);
    sub_B16FFC(&Method_BattleLogic_callbackContinueCommandSpell__, v5);
    sub_B16FFC(&Method_NetworkManager_getRequest_BattleCommandSpellRequest___, v6);
    sub_B16FFC(&NetworkManager_TypeInfo, v7);
    sub_B16FFC(&NetworkManager_ResultCallbackFunc_TypeInfo, v8);
    byte_40F73CB = 1;
  }
  BattleLogic__resetTimeAcceleration(this, 0, v2);
  if ( (BYTE3(BattleData_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0 && !BattleData_TypeInfo->_2.cctor_finished )
    j_il2cpp_runtime_class_init_0(BattleData_TypeInfo);
  BattleData__setContinueBattleFlg(3, 0, 0LL);
  actData = this->fields.actData;
  if ( !actData )
    goto LABEL_26;
  BattleData__setCommandSpellIdBattle(actData->fields.commandSkillId, 0, 0LL);
  data = this->fields.data;
  if ( !data )
    goto LABEL_26;
  BattleData__SaveTurnData(data, 0LL);
  v11 = this->fields.data;
  if ( !v11 )
    goto LABEL_26;
  if ( BattleData__IsUseTemporaryCommandSpell(v11, 0LL) )
  {
    v16 = this->fields.actData;
    if ( v16 )
    {
      BattleLogic__SkipCommandSpellRequest(this, v16->fields.commandSkillId, v13);
      return;
    }
LABEL_26:
    sub_B170D4();
  }
  connCammdSpellRetryFlg = this->fields.connCammdSpellRetryFlg;
  v18 = (NetworkManager_ResultCallbackFunc_o *)sub_B170CC(
                                                 NetworkManager_ResultCallbackFunc_TypeInfo,
                                                 v12,
                                                 v13,
                                                 v14,
                                                 v15);
  v19 = v18;
  if ( connCammdSpellRetryFlg )
  {
    NetworkManager_ResultCallbackFunc___ctor(v18, (Il2CppObject *)this, Method_BattleLogic_callBackCommandSpell__, 0LL);
    if ( (BYTE3(NetworkManager_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0
      && !NetworkManager_TypeInfo->_2.cctor_finished )
    {
      j_il2cpp_runtime_class_init_0(NetworkManager_TypeInfo);
    }
    Request_WarBoardWallAttackRequest = (RequestBase_o *)NetworkManager__getRequest_WarBoardWallAttackRequest_(
                                                           v19,
                                                           (const MethodInfo_19DD960 *)Method_NetworkManager_getRequest_BattleCommandSpellRequest___);
    if ( !Request_WarBoardWallAttackRequest )
      goto LABEL_26;
    RequestBase__beginRetryRequest(Request_WarBoardWallAttackRequest, 0, 0LL);
  }
  else
  {
    NetworkManager_ResultCallbackFunc___ctor(
      v18,
      (Il2CppObject *)this,
      Method_BattleLogic_callbackContinueCommandSpell__,
      0LL);
    if ( (BYTE3(NetworkManager_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0
      && !NetworkManager_TypeInfo->_2.cctor_finished )
    {
      j_il2cpp_runtime_class_init_0(NetworkManager_TypeInfo);
    }
    v21 = (BattleCommandSpellRequest_o *)NetworkManager__getRequest_WarBoardWallAttackRequest_(
                                           v19,
                                           (const MethodInfo_19DD960 *)Method_NetworkManager_getRequest_BattleCommandSpellRequest___);
    v22 = this->fields.data;
    if ( !v22 )
      goto LABEL_26;
    battle_ent = v22->fields.battle_ent;
    if ( !battle_ent )
      goto LABEL_26;
    v24 = this->fields.actData;
    if ( !v24 || !v21 )
      goto LABEL_26;
    BattleCommandSpellRequest__beginRequest(
      v21,
      battle_ent->fields.id,
      v24->fields.commandSkillId,
      v22->fields.waveClearNeedTurn,
      v22->fields.continueCount,
      1,
      0LL);
  }
}


void __fastcall BattleLogic__connectResultErrorDialog(BattleLogic_o *this, const MethodInfo *method)
{
  __int64 v3; // x1
  __int64 v4; // x1
  __int64 v5; // x1
  __int64 v6; // x1
  __int64 v7; // x1
  CommonUI_o *Instance; // x20
  System_String_o *v9; // x21
  System_String_o *v10; // x22
  __int64 v11; // x1
  __int64 v12; // x2
  __int64 v13; // x3
  __int64 v14; // x4
  NotificationDialog_ClickDelegate_o *v15; // x23

  if ( (byte_40F7371 & 1) == 0 )
  {
    sub_B16FFC(&Method_BattleLogic_requestResultErrorDialog__, method);
    sub_B16FFC(&NotificationDialog_ClickDelegate_TypeInfo, v3);
    sub_B16FFC(&LocalizationManager_TypeInfo, v4);
    sub_B16FFC(&Method_SingletonMonoBehaviour_CommonUI__get_Instance__, v5);
    sub_B16FFC(&StringLiteral_2411, v6);
    sub_B16FFC(&StringLiteral_2410, v7);
    byte_40F7371 = 1;
  }
  Instance = (CommonUI_o *)SingletonMonoBehaviour_WebViewManager___get_Instance((const MethodInfo_2A54F38 *)Method_SingletonMonoBehaviour_CommonUI__get_Instance__);
  if ( (BYTE3(LocalizationManager_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0
    && !LocalizationManager_TypeInfo->_2.cctor_finished )
  {
    j_il2cpp_runtime_class_init_0(LocalizationManager_TypeInfo);
  }
  v9 = LocalizationManager__Get((System_String_o *)StringLiteral_2411, 0LL);
  v10 = LocalizationManager__Get((System_String_o *)StringLiteral_2410, 0LL);
  v15 = (NotificationDialog_ClickDelegate_o *)sub_B170CC(NotificationDialog_ClickDelegate_TypeInfo, v11, v12, v13, v14);
  NotificationDialog_ClickDelegate___ctor(v15, (Il2CppObject *)this, Method_BattleLogic_requestResultErrorDialog__, 0LL);
  if ( !Instance )
    sub_B170D4();
  CommonUI__OpenNotificationDialog_18239760(
    Instance,
    v9,
    v10,
    v15,
    -1,
    0,
    0,
    0,
    0,
    1,
    0LL,
    0LL,
    0,
    0,
    0LL,
    1,
    0LL,
    0LL,
    0LL,
    0LL);
}


// local variable allocation has failed, the output may be wrong!
System_Collections_IEnumerator_o *__fastcall BattleLogic__coroutineContinueMember(
        BattleLogic_o *this,
        System_String_o *endproc,
        bool isTactical,
        const MethodInfo *method)
{
  __int64 v4; // x4
  BattleLogic__coroutineContinueMember_d__92_o *v8; // x22

  if ( (byte_40F7369 & 1) == 0 )
  {
    sub_B16FFC(&BattleLogic__coroutineContinueMember_d__92_TypeInfo, endproc);
    byte_40F7369 = 1;
  }
  v8 = (BattleLogic__coroutineContinueMember_d__92_o *)sub_B170CC(
                                                         BattleLogic__coroutineContinueMember_d__92_TypeInfo,
                                                         endproc,
                                                         isTactical,
                                                         method,
                                                         v4);
  BattleLogic__coroutineContinueMember_d__92___ctor(v8, 0, 0LL);
  if ( !v8 )
    sub_B170D4();
  v8->fields.__4__this = this;
  sub_B16F98(&v8->fields.__4__this, this);
  v8->fields.endproc = endproc;
  sub_B16F98(&v8->fields.endproc, endproc);
  v8->fields.isTactical = isTactical;
  return (System_Collections_IEnumerator_o *)v8;
}


// local variable allocation has failed, the output may be wrong!
System_Collections_IEnumerator_o *__fastcall BattleLogic__coroutineEntrySubMember(
        BattleLogic_o *this,
        System_String_o *endproc,
        bool isTactical,
        bool isEventBonusCheck,
        const MethodInfo *method)
{
  BattleLogic__coroutineEntrySubMember_d__79_o *v9; // x23

  if ( (byte_40F7360 & 1) == 0 )
  {
    sub_B16FFC(&BattleLogic__coroutineEntrySubMember_d__79_TypeInfo, endproc);
    byte_40F7360 = 1;
  }
  v9 = (BattleLogic__coroutineEntrySubMember_d__79_o *)sub_B170CC(
                                                         BattleLogic__coroutineEntrySubMember_d__79_TypeInfo,
                                                         endproc,
                                                         isTactical,
                                                         isEventBonusCheck,
                                                         method);
  BattleLogic__coroutineEntrySubMember_d__79___ctor(v9, 0, 0LL);
  if ( !v9 )
    sub_B170D4();
  v9->fields.__4__this = this;
  sub_B16F98(&v9->fields.__4__this, this);
  v9->fields.endproc = endproc;
  sub_B16F98(&v9->fields.endproc, endproc);
  v9->fields.isTactical = isTactical;
  v9->fields.isEventBonusCheck = isEventBonusCheck;
  return (System_Collections_IEnumerator_o *)v9;
}


// local variable allocation has failed, the output may be wrong!
System_Collections_IEnumerator_o *__fastcall BattleLogic__coroutineImmediateEntrySubMember(
        BattleLogic_o *this,
        bool isEventBonusCheck,
        const MethodInfo *method)
{
  __int64 v3; // x3
  __int64 v4; // x4
  BattleLogic__coroutineImmediateEntrySubMember_d__81_o *v7; // x21

  if ( (byte_40F7362 & 1) == 0 )
  {
    sub_B16FFC(&BattleLogic__coroutineImmediateEntrySubMember_d__81_TypeInfo, isEventBonusCheck);
    byte_40F7362 = 1;
  }
  v7 = (BattleLogic__coroutineImmediateEntrySubMember_d__81_o *)sub_B170CC(
                                                                  BattleLogic__coroutineImmediateEntrySubMember_d__81_TypeInfo,
                                                                  isEventBonusCheck,
                                                                  method,
                                                                  v3,
                                                                  v4);
  BattleLogic__coroutineImmediateEntrySubMember_d__81___ctor(v7, 0, 0LL);
  if ( !v7 )
    sub_B170D4();
  v7->fields.__4__this = this;
  sub_B16F98(&v7->fields.__4__this, this);
  v7->fields.isEventBonusCheck = isEventBonusCheck;
  return (System_Collections_IEnumerator_o *)v7;
}


System_Collections_IEnumerator_o *__fastcall BattleLogic__coroutineInitQuest(
        BattleLogic_o *this,
        System_String_o *endproc,
        const MethodInfo *method)
{
  __int64 v3; // x3
  __int64 v4; // x4
  BattleLogic__coroutineInitQuest_d__316_o *v7; // x21

  if ( (byte_40F73F4 & 1) == 0 )
  {
    sub_B16FFC(&BattleLogic__coroutineInitQuest_d__316_TypeInfo, endproc);
    byte_40F73F4 = 1;
  }
  v7 = (BattleLogic__coroutineInitQuest_d__316_o *)sub_B170CC(
                                                     BattleLogic__coroutineInitQuest_d__316_TypeInfo,
                                                     endproc,
                                                     method,
                                                     v3,
                                                     v4);
  BattleLogic__coroutineInitQuest_d__316___ctor(v7, 0, 0LL);
  if ( !v7 )
    sub_B170D4();
  v7->fields.__4__this = this;
  sub_B16F98(&v7->fields.__4__this, this);
  v7->fields.endproc = endproc;
  sub_B16F98(&v7->fields.endproc, endproc);
  return (System_Collections_IEnumerator_o *)v7;
}


System_Collections_IEnumerator_o *__fastcall BattleLogic__coroutineLoadNstage(
        BattleLogic_o *this,
        System_Action_o *finishCallback,
        const MethodInfo *method)
{
  __int64 v3; // x3
  __int64 v4; // x4
  BattleLogic__coroutineLoadNstage_d__321_o *v7; // x21

  if ( (byte_40F73F8 & 1) == 0 )
  {
    sub_B16FFC(&BattleLogic__coroutineLoadNstage_d__321_TypeInfo, finishCallback);
    byte_40F73F8 = 1;
  }
  v7 = (BattleLogic__coroutineLoadNstage_d__321_o *)sub_B170CC(
                                                      BattleLogic__coroutineLoadNstage_d__321_TypeInfo,
                                                      finishCallback,
                                                      method,
                                                      v3,
                                                      v4);
  BattleLogic__coroutineLoadNstage_d__321___ctor(v7, 0, 0LL);
  if ( !v7 )
    sub_B170D4();
  v7->fields.__4__this = this;
  sub_B16F98(&v7->fields.__4__this, this);
  v7->fields.finishCallback = finishCallback;
  sub_B16F98(&v7->fields.finishCallback, finishCallback);
  return (System_Collections_IEnumerator_o *)v7;
}


System_Collections_IEnumerator_o *__fastcall BattleLogic__coroutineLoadSaveWave(
        BattleLogic_o *this,
        const MethodInfo *method)
{
  __int64 v2; // x2
  __int64 v3; // x3
  __int64 v4; // x4
  BattleLogic__coroutineLoadSaveWave_d__323_o *v6; // x20

  if ( (byte_40F73F9 & 1) == 0 )
  {
    sub_B16FFC(&BattleLogic__coroutineLoadSaveWave_d__323_TypeInfo, method);
    byte_40F73F9 = 1;
  }
  v6 = (BattleLogic__coroutineLoadSaveWave_d__323_o *)sub_B170CC(
                                                        BattleLogic__coroutineLoadSaveWave_d__323_TypeInfo,
                                                        method,
                                                        v2,
                                                        v3,
                                                        v4);
  BattleLogic__coroutineLoadSaveWave_d__323___ctor(v6, 0, 0LL);
  if ( !v6 )
    sub_B170D4();
  v6->fields.__4__this = this;
  sub_B16F98(&v6->fields.__4__this, this);
  return (System_Collections_IEnumerator_o *)v6;
}


System_Collections_IEnumerator_o *__fastcall BattleLogic__coroutineStartLimitTurnTutorial(
        BattleLogic_o *this,
        const MethodInfo *method)
{
  __int64 v2; // x2
  __int64 v3; // x3
  __int64 v4; // x4
  BattleLogic__coroutineStartLimitTurnTutorial_d__308_o *v6; // x20

  if ( (byte_40F73EC & 1) == 0 )
  {
    sub_B16FFC(&BattleLogic__coroutineStartLimitTurnTutorial_d__308_TypeInfo, method);
    byte_40F73EC = 1;
  }
  v6 = (BattleLogic__coroutineStartLimitTurnTutorial_d__308_o *)sub_B170CC(
                                                                  BattleLogic__coroutineStartLimitTurnTutorial_d__308_TypeInfo,
                                                                  method,
                                                                  v2,
                                                                  v3,
                                                                  v4);
  BattleLogic__coroutineStartLimitTurnTutorial_d__308___ctor(v6, 0, 0LL);
  if ( !v6 )
    sub_B170D4();
  v6->fields.__4__this = this;
  sub_B16F98(&v6->fields.__4__this, this);
  return (System_Collections_IEnumerator_o *)v6;
}


BattleActionData_o *__fastcall BattleLogic__createCamera(
        BattleLogic_o *this,
        BattleLogicTask_o *task,
        const MethodInfo *method)
{
  __int64 v3; // x3
  __int64 v4; // x4
  __int64 v6; // x20
  struct System_String_o *endCameraName; // x1

  if ( (byte_40F738B & 1) == 0 )
  {
    sub_B16FFC(&BattleActionData_TypeInfo, task);
    byte_40F738B = 1;
  }
  v6 = sub_B170CC(BattleActionData_TypeInfo, task, method, v3, v4);
  BattleActionData___ctor((BattleActionData_o *)v6, 0LL);
  if ( !v6 || (*(_DWORD *)(v6 + 16) = 1, *(_DWORD *)(v6 + 116) = 0, !task) )
    sub_B170D4();
  endCameraName = task->fields.endCameraName;
  *(_QWORD *)(v6 + 24) = endCameraName;
  sub_B16F98(v6 + 24, endCameraName);
  return (BattleActionData_o *)v6;
}


BattleLogicTask_o *__fastcall BattleLogic__createCommandTask(
        BattleLogic_o *this,
        BattleLogicTask_o *task,
        const MethodInfo *method)
{
  BattleData_o *data; // x21
  int32_t ActorId; // w0
  BattleServantData_o *ServantData; // x0
  BattleServantData_o *v8; // x21
  int32_t TargetBase; // w0
  int32_t v10; // w2
  struct BattleCommandData_o *command; // x8
  BattleLogicEnemyAi_o *logicEnemyAi; // x0

  if ( !task )
    goto LABEL_11;
  data = this->fields.data;
  ActorId = BattleLogicTask__getActorId(task, 0LL);
  if ( !data )
    goto LABEL_11;
  ServantData = BattleData__getServantData(data, ActorId, 0LL);
  if ( !this->fields.logictarget )
    goto LABEL_11;
  v8 = ServantData;
  TargetBase = BattleLogicTarget__getTargetBase(this->fields.logictarget, task->fields.targetIdlist, 0, 1, 0LL);
  if ( !v8 )
    goto LABEL_11;
  v10 = TargetBase;
  if ( TargetBase >= 1 && v8->fields.isEnemy )
  {
    command = task->fields.command;
    if ( command )
    {
      logicEnemyAi = this->fields.logicEnemyAi;
      if ( logicEnemyAi )
        return BattleLogicEnemyAi__createCommandRandomTask(logicEnemyAi, v8, v10, command->fields.actionIndex, 0LL);
    }
LABEL_11:
    sub_B170D4();
  }
  return task;
}


BattleActionData_o *__fastcall BattleLogic__createEnemyCutIn(
        BattleLogic_o *this,
        BattleLogicTask_o *task,
        const MethodInfo *method)
{
  __int64 v3; // x3
  __int64 v4; // x4
  BattleActionData_o *v6; // x20
  struct System_String_o *motionName; // x1
  float cutinAdditionalTime; // s0
  struct System_String_o *motionMessage; // x1

  if ( (byte_40F738E & 1) == 0 )
  {
    sub_B16FFC(&BattleActionData_TypeInfo, task);
    byte_40F738E = 1;
  }
  v6 = (BattleActionData_o *)sub_B170CC(BattleActionData_TypeInfo, task, method, v3, v4);
  BattleActionData___ctor(v6, 0LL);
  if ( !task || !v6 )
    sub_B170D4();
  BattleActionData__SetTypeEnemyCutIn(v6, task->fields.status, 0LL);
  motionName = task->fields.motionName;
  v6->fields.motionname = motionName;
  sub_B16F98(&v6->fields.motionname, motionName);
  v6->fields.isForcedSpeedOne = task->fields.isForcedSpeedOne;
  cutinAdditionalTime = task->fields.cutinAdditionalTime;
  v6->fields.cutinAdditionalTime = cutinAdditionalTime;
  if ( cutinAdditionalTime > 0.0 )
  {
    motionMessage = task->fields.motionMessage;
    v6->fields.motionMessage = motionMessage;
    sub_B16F98(&v6->fields.motionMessage, motionMessage);
  }
  return v6;
}


BattleActionData_o *__fastcall BattleLogic__createLastActorBackStep(
        BattleLogic_o *this,
        BattleLogicTask_o *task,
        const MethodInfo *method)
{
  struct BattleData_o *data; // x0
  int32_t lastactorId; // w19
  BattleServantData_o *ServantData; // x0
  BattleLogicNomal_o *logicnomal; // x0

  data = this->fields.data;
  if ( !data )
    goto LABEL_7;
  lastactorId = data->fields.lastactorId;
  ServantData = BattleData__getServantData(data, lastactorId, 0LL);
  if ( ServantData && BattleServantData__isAlive(ServantData, 0, 0LL) )
  {
    logicnomal = this->fields.logicnomal;
    if ( logicnomal )
      return BattleLogicNomal__createBackStep(logicnomal, lastactorId, 0LL);
LABEL_7:
    sub_B170D4();
  }
  return 0LL;
}


BattleActionData_o *__fastcall BattleLogic__createLoadImmediateEntryServant(
        BattleLogic_o *this,
        BattleLogicTask_o *task,
        const MethodInfo *method)
{
  __int64 v3; // x3
  __int64 v4; // x4
  BattleActionData_o *v5; // x19

  if ( (byte_40F738F & 1) == 0 )
  {
    sub_B16FFC(&BattleActionData_TypeInfo, task);
    byte_40F738F = 1;
  }
  v5 = (BattleActionData_o *)sub_B170CC(BattleActionData_TypeInfo, task, method, v3, v4);
  BattleActionData___ctor(v5, 0LL);
  if ( !v5 )
    sub_B170D4();
  v5->fields.state = 5;
  return v5;
}


BattleActionData_o *__fastcall BattleLogic__createSystem(
        BattleLogic_o *this,
        BattleLogicTask_o *task,
        const MethodInfo *method)
{
  __int64 v3; // x3
  __int64 v4; // x4
  BattleActionData_o *v6; // x20
  BattleActionData_o *result; // x0

  if ( (byte_40F738A & 1) == 0 )
  {
    sub_B16FFC(&BattleActionData_TypeInfo, task);
    byte_40F738A = 1;
  }
  v6 = (BattleActionData_o *)sub_B170CC(BattleActionData_TypeInfo, task, method, v3, v4);
  BattleActionData___ctor(v6, 0LL);
  if ( !v6 || (v6->fields.state = 1, !task) )
    sub_B170D4();
  result = v6;
  v6->fields.systemTime = task->fields.systemTime;
  return result;
}


void __fastcall BattleLogic__drawCommand(BattleLogic_o *this, const MethodInfo *method)
{
  __int64 v2; // x2
  __int64 v3; // x3
  __int64 v4; // x4
  __int64 v6; // x1
  __int64 v7; // x1
  __int64 v8; // x1
  __int64 v9; // x1
  __int64 v10; // x1
  __int64 v11; // x1
  System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData__o *v12; // x20
  BattleData_o *data; // x0
  const MethodInfo *v14; // x1
  BattleCommandData_array *TutorialCommandCards; // x0
  System_Collections_Generic_IEnumerable_T__o *fixedCommands; // x1
  BattleData_o *v17; // x0
  bool IsFixedCommandData; // w0
  struct BattleData_o *v19; // x8
  int size; // w8
  unsigned int v21; // w21
  BattleCommandData_o *v22; // x0
  struct BattleData_o *v23; // x21
  WarBoardUiData_SaveData_array *v24; // x0
  struct BattleData_o *v25; // x8
  int v26; // w21
  BattleData_o *v27; // x0
  EventMissionProgressRequest_Argument_ProgressData_o *ShuffleSelectedCommand; // x0
  BattleData_o *v29; // x0
  EventMissionProgressRequest_Argument_ProgressData_o *ShuffleCommand; // x0

  if ( (byte_40F73A9 & 1) == 0 )
  {
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleCommandData__AddRange__, method);
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleCommandData__Add__, v6);
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleCommandData__ToArray__, v7);
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleCommandData___ctor__, v8);
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleCommandData__get_Count__, v9);
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleCommandData__get_Item__, v10);
    sub_B16FFC(&System_Collections_Generic_List_BattleCommandData__TypeInfo, v11);
    byte_40F73A9 = 1;
  }
  v12 = (System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData__o *)sub_B170CC(
                                                                                                  System_Collections_Generic_List_BattleCommandData__TypeInfo,
                                                                                                  method,
                                                                                                  v2,
                                                                                                  v3,
                                                                                                  v4);
  System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData____ctor(
    v12,
    (const MethodInfo_2F25014 *)Method_System_Collections_Generic_List_BattleCommandData___ctor__);
  data = this->fields.data;
  if ( !data )
    goto LABEL_31;
  if ( BattleData__isTutorialCard(data, 0LL) )
  {
    TutorialCommandCards = BattleLogic__getTutorialCommandCards(this, v14);
    if ( !v12 )
      goto LABEL_31;
    fixedCommands = (System_Collections_Generic_IEnumerable_T__o *)TutorialCommandCards;
  }
  else
  {
    v17 = this->fields.data;
    if ( !v17 )
      goto LABEL_31;
    IsFixedCommandData = BattleData__IsFixedCommandData(v17, 0LL);
    v19 = this->fields.data;
    if ( !v19 )
      goto LABEL_31;
    if ( !IsFixedCommandData )
    {
      v26 = -1;
      if ( BattleData__CheckDoNotSelectCommandCard(this->fields.data, 0LL) )
      {
        while ( 1 )
        {
          v27 = this->fields.data;
          if ( !v27 )
            break;
          ShuffleSelectedCommand = (EventMissionProgressRequest_Argument_ProgressData_o *)BattleData__getShuffleSelectedCommand(
                                                                                            v27,
                                                                                            0LL);
          if ( !v12 )
            break;
          System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData___Add(
            v12,
            ShuffleSelectedCommand,
            (const MethodInfo_2F25CD8 *)Method_System_Collections_Generic_List_BattleCommandData__Add__);
          if ( (unsigned int)++v26 > 3 )
            goto LABEL_13;
        }
      }
      else
      {
        while ( 1 )
        {
          v29 = this->fields.data;
          if ( !v29 )
            break;
          ShuffleCommand = (EventMissionProgressRequest_Argument_ProgressData_o *)BattleData__getShuffleCommand(
                                                                                    v29,
                                                                                    0LL);
          if ( !v12 )
            break;
          System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData___Add(
            v12,
            ShuffleCommand,
            (const MethodInfo_2F25CD8 *)Method_System_Collections_Generic_List_BattleCommandData__Add__);
          if ( (unsigned int)++v26 >= 4 )
            goto LABEL_13;
        }
      }
LABEL_31:
      sub_B170D4();
    }
    if ( !v12 )
      goto LABEL_31;
    fixedCommands = (System_Collections_Generic_IEnumerable_T__o *)v19->fields.fixedCommands;
  }
  System_Collections_Generic_List_TimeZoneInfo_AdjustmentRule___AddRange(
    (System_Collections_Generic_List_TimeZoneInfo_AdjustmentRule__o *)v12,
    fixedCommands,
    (const MethodInfo_2F25F28 *)Method_System_Collections_Generic_List_BattleCommandData__AddRange__);
LABEL_13:
  size = v12->fields._size;
  if ( size >= 1 )
  {
    v21 = 0;
    do
    {
      if ( size <= v21 )
        System_ThrowHelper__ThrowArgumentOutOfRangeException_41329284(0LL);
      v22 = (BattleCommandData_o *)v12->fields._items->m_Items[v21];
      if ( !v22 )
        goto LABEL_31;
      BattleCommandData__ResetSelectedType(v22, 0LL);
      size = v12->fields._size;
    }
    while ( (int)++v21 < size );
  }
  v23 = this->fields.data;
  v24 = System_Collections_Generic_List_WarBoardUiData_SaveData___ToArray(
          (System_Collections_Generic_List_WarBoardUiData_SaveData__o *)v12,
          (const MethodInfo_2F27E24 *)Method_System_Collections_Generic_List_BattleCommandData__ToArray__);
  if ( !v23 )
    goto LABEL_31;
  v23->fields.draw_commandlist = (struct BattleCommandData_array *)v24;
  sub_B16F98(&v23->fields.draw_commandlist, v24);
  v25 = this->fields.data;
  if ( !v25 )
    goto LABEL_31;
  v25->fields.isWaitDrawCard = 0;
}


System_Collections_IEnumerator_o *__fastcall BattleLogic__dropItemCoroutine(
        BattleLogic_o *this,
        System_Action_o *callback,
        const MethodInfo *method)
{
  __int64 v3; // x3
  __int64 v4; // x4
  BattleLogic__dropItemCoroutine_d__192_o *v7; // x21

  if ( (byte_40F73A5 & 1) == 0 )
  {
    sub_B16FFC(&BattleLogic__dropItemCoroutine_d__192_TypeInfo, callback);
    byte_40F73A5 = 1;
  }
  v7 = (BattleLogic__dropItemCoroutine_d__192_o *)sub_B170CC(
                                                    BattleLogic__dropItemCoroutine_d__192_TypeInfo,
                                                    callback,
                                                    method,
                                                    v3,
                                                    v4);
  BattleLogic__dropItemCoroutine_d__192___ctor(v7, 0, 0LL);
  if ( !v7 )
    sub_B170D4();
  v7->fields.__4__this = this;
  sub_B16F98(&v7->fields.__4__this, this);
  v7->fields.callback = callback;
  sub_B16F98(&v7->fields.callback, callback);
  return (System_Collections_IEnumerator_o *)v7;
}


void __fastcall BattleLogic__endActionData(BattleLogic_o *this, const MethodInfo *method)
{
  __int64 v3; // x1
  int32_t acttype; // w8
  struct System_Collections_Generic_LinkedList_BattleLogicTask__o *list_logic; // x8
  PlayMakerFSM_o *fsm; // x0

  if ( (byte_40F7380 & 1) == 0 )
  {
    sub_B16FFC(&Method_System_Collections_Generic_LinkedList_BattleLogicTask__get_Count__, method);
    sub_B16FFC(&StringLiteral_5481, v3);
    byte_40F7380 = 1;
  }
  acttype = this->fields.acttype;
  if ( acttype == 2 )
  {
    list_logic = this->fields.list_logic;
    if ( !list_logic )
      goto LABEL_12;
    if ( list_logic->fields.count >= 1 )
    {
      BattleLogic__playTaskBattle(this, method);
      return;
    }
    fsm = this->fields.fsm;
    if ( !fsm )
LABEL_12:
      sub_B170D4();
    PlayMakerFSM__SendEvent(fsm, (System_String_o *)StringLiteral_5481, 0LL);
  }
  else if ( acttype == 1 )
  {
    BattleLogic__checkBattleTask(this, method);
  }
}


void __fastcall BattleLogic__endCommandSpell(BattleLogic_o *this, const MethodInfo *method)
{
  System_Collections_IEnumerator_o *v3; // x1

  v3 = BattleLogic__endCommandSpellCoroutine(this, method);
  UnityEngine_MonoBehaviour__StartCoroutine_34804316((UnityEngine_MonoBehaviour_o *)this, v3, 0LL);
}


System_Collections_IEnumerator_o *__fastcall BattleLogic__endCommandSpellCoroutine(
        BattleLogic_o *this,
        const MethodInfo *method)
{
  __int64 v2; // x2
  __int64 v3; // x3
  __int64 v4; // x4
  BattleLogic__endCommandSpellCoroutine_d__256_o *v6; // x20

  if ( (byte_40F73CF & 1) == 0 )
  {
    sub_B16FFC(&BattleLogic__endCommandSpellCoroutine_d__256_TypeInfo, method);
    byte_40F73CF = 1;
  }
  v6 = (BattleLogic__endCommandSpellCoroutine_d__256_o *)sub_B170CC(
                                                           BattleLogic__endCommandSpellCoroutine_d__256_TypeInfo,
                                                           method,
                                                           v2,
                                                           v3,
                                                           v4);
  BattleLogic__endCommandSpellCoroutine_d__256___ctor(v6, 0, 0LL);
  if ( !v6 )
    sub_B170D4();
  v6->fields.__4__this = this;
  sub_B16F98(&v6->fields.__4__this, this);
  return (System_Collections_IEnumerator_o *)v6;
}


void __fastcall BattleLogic__endLoadCommandSPell(BattleLogic_o *this, AssetData_o *data, const MethodInfo *method)
{
  __int64 v5; // x1
  __int64 v6; // x1
  __int64 v7; // x1
  __int64 v8; // x1
  __int64 v9; // x1
  __int64 v10; // x1
  UserGameEntity_o *SelfUserGame; // x0
  UserGameEntity_o *v12; // x21
  int32_t SpellImageIdBattle; // w0
  int32_t v14; // w22
  BattleLogic_o *v15; // x0
  int v16; // w21
  const MethodInfo *v17; // x2
  System_String_o *CommandSpellPrefabName; // x0
  UnityEngine_GameObject_o *Object_WarBoardWaitTimeSetting; // x0
  struct BattlePerformance_o *perf; // x8
  UnityEngine_GameObject_o *Object; // x0
  UnityEngine_GameObject_o *v22; // x20
  SimpleAnimation_o *Component_srcLineSprite; // x22
  UnityEngine_Animation_o *v24; // x20
  BattleLogic_c *v25; // x8
  System_String_o *COMMAND_SPELL_EFFECT_ANIMNAME; // x23
  Il2CppObject *v27; // x0
  System_String_o *v28; // x21
  BattlePerformance_o *v29; // x0
  const MethodInfo *v30; // x2
  __int64 v31; // x2
  struct BattlePerformance_o *v32; // x8
  struct BattleLogic_CommandSpellData_o *actData; // x8
  int32_t commandSkillId; // w21
  BattleLogicSkill_o *logicSkill; // x20
  System_Int32_array *v36; // x0
  __int64 v37; // x1
  __int64 v38; // x2
  struct BattleLogic_CommandSpellData_o *v39; // x8
  BattleLogicTask_array *v40; // x0
  const MethodInfo *v41; // x2
  int v42; // [xsp+Ch] [xbp-24h] BYREF

  if ( (byte_40F73CA & 1) == 0 )
  {
    sub_B16FFC(&Method_AssetData_GetObject_GameObject____66802784, data);
    sub_B16FFC(&BattleLogic_TypeInfo, v5);
    sub_B16FFC(&Method_UnityEngine_GameObject_GetComponent_Animation___, v6);
    sub_B16FFC(&Method_UnityEngine_GameObject_GetComponent_SimpleAnimation___, v7);
    sub_B16FFC(&int___TypeInfo, v8);
    sub_B16FFC(&int_TypeInfo, v9);
    sub_B16FFC(&UnityEngine_Object_TypeInfo, v10);
    byte_40F73CA = 1;
  }
  SelfUserGame = UserGameMaster__getSelfUserGame(0LL);
  if ( !SelfUserGame )
    goto LABEL_31;
  v12 = SelfUserGame;
  SpellImageIdBattle = UserGameEntity__get_SpellImageIdBattle(SelfUserGame, 0LL);
  if ( !this->fields.data )
    goto LABEL_31;
  v14 = SpellImageIdBattle;
  v15 = (BattleLogic_o *)BattleData__CheckCurrentTemporaryCommandSpell(this->fields.data, v12, 0LL);
  v16 = (int)v15;
  CommandSpellPrefabName = BattleLogic__GetCommandSpellPrefabName(v15, v14, v17);
  if ( !data )
    goto LABEL_31;
  Object_WarBoardWaitTimeSetting = (UnityEngine_GameObject_o *)AssetData__GetObject_WarBoardWaitTimeSetting_(
                                                                 data,
                                                                 CommandSpellPrefabName,
                                                                 (const MethodInfo_18AFC60 *)Method_AssetData_GetObject_GameObject____66802784);
  perf = this->fields.perf;
  if ( !perf )
    goto LABEL_31;
  Object = BaseMonoBehaviour__createObject(
             (BaseMonoBehaviour_o *)this,
             Object_WarBoardWaitTimeSetting,
             perf->fields.popupTr,
             0LL,
             0LL);
  if ( !Object )
    goto LABEL_31;
  v22 = Object;
  Component_srcLineSprite = (SimpleAnimation_o *)UnityEngine_GameObject__GetComponent_srcLineSprite_(
                                                   Object,
                                                   (const MethodInfo_19D14E0 *)Method_UnityEngine_GameObject_GetComponent_SimpleAnimation___);
  v24 = (UnityEngine_Animation_o *)UnityEngine_GameObject__GetComponent_srcLineSprite_(
                                     v22,
                                     (const MethodInfo_19D14E0 *)Method_UnityEngine_GameObject_GetComponent_Animation___);
  v25 = BattleLogic_TypeInfo;
  if ( (BYTE3(BattleLogic_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0 && !BattleLogic_TypeInfo->_2.cctor_finished )
  {
    j_il2cpp_runtime_class_init_0(BattleLogic_TypeInfo);
    v25 = BattleLogic_TypeInfo;
  }
  COMMAND_SPELL_EFFECT_ANIMNAME = v25->static_fields->COMMAND_SPELL_EFFECT_ANIMNAME;
  v42 = v16;
  v27 = (Il2CppObject *)j_il2cpp_value_box_0(int_TypeInfo, &v42);
  v28 = System_String__Format(COMMAND_SPELL_EFFECT_ANIMNAME, v27, 0LL);
  if ( (BYTE3(UnityEngine_Object_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0
    && !UnityEngine_Object_TypeInfo->_2.cctor_finished )
  {
    j_il2cpp_runtime_class_init_0(UnityEngine_Object_TypeInfo);
  }
  if ( UnityEngine_Object__op_Inequality((UnityEngine_Object_o *)Component_srcLineSprite, 0LL, 0LL) )
  {
    if ( !Component_srcLineSprite )
      goto LABEL_31;
    SimpleAnimation__Play_16380456(Component_srcLineSprite, v28, 0LL);
  }
  else
  {
    if ( (BYTE3(UnityEngine_Object_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0
      && !UnityEngine_Object_TypeInfo->_2.cctor_finished )
    {
      j_il2cpp_runtime_class_init_0(UnityEngine_Object_TypeInfo);
    }
    if ( UnityEngine_Object__op_Inequality((UnityEngine_Object_o *)v24, 0LL, 0LL) )
    {
      if ( !v24 )
        goto LABEL_31;
      UnityEngine_Animation__Play_49744236(v24, v28, 0LL);
    }
  }
  v29 = this->fields.perf;
  if ( !v29 )
    goto LABEL_31;
  BattlePerformance__playMasterCommandSpellCutIn(v29, 0LL);
  BattleLogic__SetTimeAccelerationCheckDelayReset(this, 0, v30);
  v32 = this->fields.perf;
  if ( !v32 )
    goto LABEL_31;
  v32->fields.isTargetChange = 0;
  actData = this->fields.actData;
  if ( !actData )
    goto LABEL_31;
  commandSkillId = actData->fields.commandSkillId;
  logicSkill = this->fields.logicSkill;
  v36 = (System_Int32_array *)sub_B17014(int___TypeInfo, 1LL, v31);
  v39 = this->fields.actData;
  if ( !v39 || !v36 )
    goto LABEL_31;
  if ( !v36->max_length )
  {
    sub_B17100(v36, v37, v38);
    sub_B170A0();
  }
  v36->m_Items[1] = v39->fields.ptTargetId;
  if ( !logicSkill )
LABEL_31:
    sub_B170D4();
  v40 = BattleLogicSkill__taskCommandSpell(logicSkill, commandSkillId, 1, v36, 0LL);
  BattleLogic__actOneBattleTask(this, v40, v41);
}


void __fastcall BattleLogic__endLoadEnemyCommandSpell(
        BattleLogic_o *this,
        AssetData_o *aData,
        const MethodInfo *method)
{
  BaseMonoBehaviour_o *v4; // x19
  __int64 v5; // x1
  __int64 v6; // x1
  __int64 v7; // x1
  __int64 v8; // x1
  __int64 v9; // x1
  _QWORD *monitor; // x8
  __int64 v11; // x8
  System_String_o *CommandSpellPrefabName; // x0
  UnityEngine_GameObject_o *Object_WarBoardWaitTimeSetting; // x0
  BaseMonoBehaviour_c *klass; // x8
  UnityEngine_GameObject_o *Object; // x0
  UnityEngine_GameObject_o *v16; // x20
  SimpleAnimation_o *Component_srcLineSprite; // x21
  UnityEngine_Animation_o *v18; // x20
  BattleData_o *v19; // x0
  System_String_o *COMMAND_SPELL_EFFECT_ANIMNAME; // x22
  Il2CppObject *v21; // x0
  System_String_o *v22; // x22
  _DWORD *v23; // x8
  BattlePerformance_o *v24; // x0
  int32_t EnemyMasterCommandSpellCnt; // [xsp+Ch] [xbp-24h] BYREF

  v4 = (BaseMonoBehaviour_o *)this;
  if ( (byte_40F73D1 & 1) == 0 )
  {
    sub_B16FFC(&Method_AssetData_GetObject_GameObject____66802784, aData);
    sub_B16FFC(&BattleLogic_TypeInfo, v5);
    sub_B16FFC(&Method_UnityEngine_GameObject_GetComponent_Animation___, v6);
    sub_B16FFC(&Method_UnityEngine_GameObject_GetComponent_SimpleAnimation___, v7);
    sub_B16FFC(&int_TypeInfo, v8);
    this = (BattleLogic_o *)sub_B16FFC(&UnityEngine_Object_TypeInfo, v9);
    byte_40F73D1 = 1;
  }
  monitor = v4[1].monitor;
  if ( !monitor )
    goto LABEL_27;
  v11 = monitor[22];
  if ( !v11 )
    goto LABEL_27;
  CommandSpellPrefabName = BattleLogic__GetCommandSpellPrefabName(this, *(_DWORD *)(v11 + 28), method);
  if ( !aData )
    goto LABEL_27;
  Object_WarBoardWaitTimeSetting = (UnityEngine_GameObject_o *)AssetData__GetObject_WarBoardWaitTimeSetting_(
                                                                 aData,
                                                                 CommandSpellPrefabName,
                                                                 (const MethodInfo_18AFC60 *)Method_AssetData_GetObject_GameObject____66802784);
  klass = v4[2].klass;
  if ( !klass )
    goto LABEL_27;
  Object = BaseMonoBehaviour__createObject(
             v4,
             Object_WarBoardWaitTimeSetting,
             (UnityEngine_Transform_o *)klass->_1.implementedInterfaces,
             0LL,
             0LL);
  if ( !Object )
    goto LABEL_27;
  v16 = Object;
  Component_srcLineSprite = (SimpleAnimation_o *)UnityEngine_GameObject__GetComponent_srcLineSprite_(
                                                   Object,
                                                   (const MethodInfo_19D14E0 *)Method_UnityEngine_GameObject_GetComponent_SimpleAnimation___);
  v18 = (UnityEngine_Animation_o *)UnityEngine_GameObject__GetComponent_srcLineSprite_(
                                     v16,
                                     (const MethodInfo_19D14E0 *)Method_UnityEngine_GameObject_GetComponent_Animation___);
  if ( (BYTE3(BattleLogic_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0 && !BattleLogic_TypeInfo->_2.cctor_finished )
    j_il2cpp_runtime_class_init_0(BattleLogic_TypeInfo);
  v19 = (BattleData_o *)v4[1].monitor;
  if ( !v19 )
    goto LABEL_27;
  COMMAND_SPELL_EFFECT_ANIMNAME = BattleLogic_TypeInfo->static_fields->COMMAND_SPELL_EFFECT_ANIMNAME;
  EnemyMasterCommandSpellCnt = BattleData__getEnemyMasterCommandSpellCnt(v19, 0LL);
  v21 = (Il2CppObject *)j_il2cpp_value_box_0(int_TypeInfo, &EnemyMasterCommandSpellCnt);
  v22 = System_String__Format(COMMAND_SPELL_EFFECT_ANIMNAME, v21, 0LL);
  if ( (BYTE3(UnityEngine_Object_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0
    && !UnityEngine_Object_TypeInfo->_2.cctor_finished )
  {
    j_il2cpp_runtime_class_init_0(UnityEngine_Object_TypeInfo);
  }
  if ( UnityEngine_Object__op_Inequality((UnityEngine_Object_o *)Component_srcLineSprite, 0LL, 0LL) )
  {
    if ( !Component_srcLineSprite )
      goto LABEL_27;
    SimpleAnimation__Play_16380456(Component_srcLineSprite, v22, 0LL);
  }
  else
  {
    if ( (BYTE3(UnityEngine_Object_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0
      && !UnityEngine_Object_TypeInfo->_2.cctor_finished )
    {
      j_il2cpp_runtime_class_init_0(UnityEngine_Object_TypeInfo);
    }
    if ( UnityEngine_Object__op_Inequality((UnityEngine_Object_o *)v18, 0LL, 0LL) )
    {
      if ( !v18 )
        goto LABEL_27;
      UnityEngine_Animation__Play_49744236(v18, v22, 0LL);
    }
  }
  v23 = v4[1].monitor;
  if ( !v23 || (++v23[86], (v24 = (BattlePerformance_o *)v4[2].klass) == 0LL) )
LABEL_27:
    sub_B170D4();
  BattlePerformance__playEnemyMasterCutIn(v24, 0LL);
}


void __fastcall BattleLogic__endSelectCommand(BattleLogic_o *this, const MethodInfo *method)
{
  BattleData_o *data; // x0
  BattleData_o *v4; // x0
  PlayMakerFSM_o *fsm; // x0

  if ( (byte_40F73AE & 1) == 0 )
  {
    sub_B16FFC(&StringLiteral_5482, method);
    byte_40F73AE = 1;
  }
  BattleLogic__checkCombo(this, method);
  data = this->fields.data;
  if ( !data
    || (BattleData__addLogCommand(data, 0LL), (v4 = this->fields.data) == 0LL)
    || (BattleData__AddChainCount(v4, 0LL), (fsm = this->fields.fsm) == 0LL) )
  {
    sub_B170D4();
  }
  PlayMakerFSM__SendEvent(fsm, (System_String_o *)StringLiteral_5482, 0LL);
}


void __fastcall BattleLogic__endSelectSkillFaze(BattleLogic_o *this, const MethodInfo *method)
{
  __int64 v3; // x1
  __int64 v4; // x1
  struct BattleData_o *data; // x8
  int32_t tutorialId; // w9
  WebViewManager_o *Instance; // x0
  WebViewManager_o *v8; // x8
  PlayMakerFSM_o *fsm; // x0
  __int64 *v10; // x8

  if ( (byte_40F73BF & 1) == 0 )
  {
    sub_B16FFC(&Method_SingletonMonoBehaviour_BattleSequenceManager__get_Instance__, method);
    sub_B16FFC(&StringLiteral_10423, v3);
    sub_B16FFC(&StringLiteral_5460, v4);
    byte_40F73BF = 1;
  }
  data = this->fields.data;
  if ( !data )
LABEL_21:
    sub_B170D4();
  tutorialId = data->fields.tutorialId;
  if ( tutorialId == 3 )
  {
    if ( data->fields.wavecount == 1 && data->fields.turnCount == 1 && !data->fields.tutorialState )
      return;
  }
  else
  {
    if ( tutorialId == 2 )
    {
      if ( data->fields.turnCount != 2 )
        goto LABEL_15;
    }
    else if ( tutorialId != 1 || data->fields.turnCount != 5 )
    {
      goto LABEL_15;
    }
    if ( data->fields.tutorialState == -1 )
      return;
  }
LABEL_15:
  Instance = SingletonMonoBehaviour_WebViewManager___get_Instance((const MethodInfo_2A54F38 *)Method_SingletonMonoBehaviour_BattleSequenceManager__get_Instance__);
  if ( !Instance )
    goto LABEL_21;
  v8 = Instance;
  fsm = this->fields.fsm;
  if ( !fsm )
    goto LABEL_21;
  if ( BYTE4(v8->fields.webViewBase) )
    v10 = &StringLiteral_10423;
  else
    v10 = &StringLiteral_5460;
  PlayMakerFSM__SendEvent(fsm, (System_String_o *)*v10, 0LL);
}


void __fastcall BattleLogic__endSkill(BattleLogic_o *this, const MethodInfo *method)
{
  const MethodInfo *v2; // x2
  __int64 v4; // x1
  __int64 v5; // x1
  __int64 v6; // x1
  __int64 v7; // x1
  __int64 v8; // x1
  __int64 v9; // x1
  __int64 v10; // x1
  __int64 v11; // x1
  BattlePerformance_o *perf; // x0
  BattlePerformance_o *v13; // x0
  BattlePerformance_o *v14; // x0
  const MethodInfo *v15; // x1
  struct BattlePerformance_o *v16; // x8
  BattleData_o *data; // x0
  struct BattleLogic_UseSkillObject_o *act_useSkill; // x8
  BattleSkillInfoData_o *skillInfo; // x0
  struct BattleLogic_UseSkillObject_o *v20; // x8
  BattleSkillInfoData_o *v21; // x0
  __int64 v22; // x0
  struct BattleLogic_UseSkillObject_o *v23; // x8
  Il2CppObject *v24; // x20
  BattleSkillInfoData_o *v25; // x0
  __int64 v26; // x0
  Il2CppObject *v27; // x21
  Il2CppObject *v28; // x0
  System_String_o *v29; // x20
  __int64 v30; // x1
  __int64 v31; // x2
  __int64 v32; // x3
  __int64 v33; // x4
  NetworkManager_ResultCallbackFunc_o *v34; // x20
  WarBoardWallAttackRequest_o *Request_WarBoardWallAttackRequest; // x0
  struct BattleLogic_UseSkillObject_o *v36; // x8
  BattleUseItemRequest_o *v37; // x20
  BattleSkillInfoData_o *v38; // x0
  int32_t v39; // w0
  struct BattleLogic_UseSkillObject_o *v40; // x8
  int32_t v41; // w21
  BattleSkillInfoData_o *v42; // x0
  int32_t v43; // w0
  BattleData_o *v44; // x8
  int32_t v45; // w19
  int32_t v46; // w0
  struct BattleData_o *v47; // x8
  PlayMakerFSM_o *fsm; // x0
  __int64 *v49; // x8
  int32_t eventId; // [xsp+4h] [xbp-2Ch] BYREF
  int32_t CondItemNumber; // [xsp+8h] [xbp-28h] BYREF
  int32_t CondItemId; // [xsp+Ch] [xbp-24h] BYREF

  if ( (byte_40F73C5 & 1) == 0 )
  {
    sub_B16FFC(&BattleData_TypeInfo, method);
    sub_B16FFC(&Method_BattleLogic_EndRequestBattleUseItem__, v4);
    sub_B16FFC(&int_TypeInfo, v5);
    sub_B16FFC(&Method_NetworkManager_getRequest_BattleUseItemRequest___, v6);
    sub_B16FFC(&NetworkManager_TypeInfo, v7);
    sub_B16FFC(&NetworkManager_ResultCallbackFunc_TypeInfo, v8);
    sub_B16FFC(&StringLiteral_13402, v9);
    sub_B16FFC(&StringLiteral_5481, v10);
    sub_B16FFC(&StringLiteral_23494, v11);
    byte_40F73C5 = 1;
  }
  BattleLogic__updateEnemyTarget(this, 0, v2);
  perf = this->fields.perf;
  if ( !perf )
    goto LABEL_37;
  BattlePerformance__updateCommandCard(perf, 0LL);
  v13 = this->fields.perf;
  if ( !v13 )
    goto LABEL_37;
  BattlePerformance__checkRedrawCommandCard(v13, 0LL);
  v14 = this->fields.perf;
  if ( !v14 )
    goto LABEL_37;
  BattlePerformance__endActionSkill(v14, 0LL);
  BattleLogic__DelayForceResetTimeForSkip(this, v15);
  v16 = this->fields.perf;
  if ( !v16 )
    goto LABEL_37;
  v16->fields.isTargetChange = 1;
  data = this->fields.data;
  if ( !data )
    goto LABEL_37;
  BattleData__SaveTurnData(data, 0LL);
  act_useSkill = this->fields.act_useSkill;
  if ( !act_useSkill )
    goto LABEL_37;
  skillInfo = act_useSkill->fields.skillInfo;
  if ( !skillInfo )
    goto LABEL_37;
  if ( BattleSkillInfoData__HasCond(skillInfo, 0LL) )
  {
    v20 = this->fields.act_useSkill;
    if ( v20 )
    {
      v21 = v20->fields.skillInfo;
      if ( v21 )
      {
        CondItemId = BattleSkillInfoData__GetCondItemId(v21, 0LL);
        v22 = j_il2cpp_value_box_0(int_TypeInfo, &CondItemId);
        v23 = this->fields.act_useSkill;
        if ( v23 )
        {
          v24 = (Il2CppObject *)v22;
          v25 = v23->fields.skillInfo;
          if ( v25 )
          {
            CondItemNumber = BattleSkillInfoData__GetCondItemNumber(v25, 0LL);
            v26 = j_il2cpp_value_box_0(int_TypeInfo, &CondItemNumber);
            if ( this->fields.data )
            {
              v27 = (Il2CppObject *)v26;
              eventId = BattleData__get_eventId(this->fields.data, 0LL);
              v28 = (Il2CppObject *)j_il2cpp_value_box_0(int_TypeInfo, &eventId);
              v29 = System_String__Format_43744796((System_String_o *)StringLiteral_23494, v24, v27, v28, 0LL);
              if ( (BYTE3(BattleData_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0
                && !BattleData_TypeInfo->_2.cctor_finished )
              {
                j_il2cpp_runtime_class_init_0(BattleData_TypeInfo);
              }
              BattleData__SaveBattleUseItemParameter(v29, 0, 0LL);
              BattleData__setContinueBattleFlg(5, 1, 0LL);
              v34 = (NetworkManager_ResultCallbackFunc_o *)sub_B170CC(
                                                             NetworkManager_ResultCallbackFunc_TypeInfo,
                                                             v30,
                                                             v31,
                                                             v32,
                                                             v33);
              NetworkManager_ResultCallbackFunc___ctor(
                v34,
                (Il2CppObject *)this,
                Method_BattleLogic_EndRequestBattleUseItem__,
                0LL);
              if ( (BYTE3(NetworkManager_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0
                && !NetworkManager_TypeInfo->_2.cctor_finished )
              {
                j_il2cpp_runtime_class_init_0(NetworkManager_TypeInfo);
              }
              Request_WarBoardWallAttackRequest = NetworkManager__getRequest_WarBoardWallAttackRequest_(
                                                    v34,
                                                    (const MethodInfo_19DD960 *)Method_NetworkManager_getRequest_BattleUseItemRequest___);
              v36 = this->fields.act_useSkill;
              if ( v36 )
              {
                v37 = (BattleUseItemRequest_o *)Request_WarBoardWallAttackRequest;
                v38 = v36->fields.skillInfo;
                if ( v38 )
                {
                  v39 = BattleSkillInfoData__GetCondItemId(v38, 0LL);
                  v40 = this->fields.act_useSkill;
                  if ( v40 )
                  {
                    v41 = v39;
                    v42 = v40->fields.skillInfo;
                    if ( v42 )
                    {
                      v43 = BattleSkillInfoData__GetCondItemNumber(v42, 0LL);
                      v44 = this->fields.data;
                      if ( v44 )
                      {
                        v45 = v43;
                        v46 = BattleData__get_eventId(v44, 0LL);
                        if ( v37 )
                        {
                          BattleUseItemRequest__beginRequest(v37, v41, v45, v46, 0LL);
                          return;
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    }
LABEL_37:
    sub_B170D4();
  }
  v47 = this->fields.data;
  if ( !v47 )
    goto LABEL_37;
  if ( v47->fields.tutorialId == 2 && v47->fields.tutorialState == 5 )
  {
    v47->fields.tutorialState = 10;
    fsm = this->fields.fsm;
    if ( !fsm )
      goto LABEL_37;
    v49 = &StringLiteral_13402;
  }
  else
  {
    fsm = this->fields.fsm;
    if ( !fsm )
      goto LABEL_37;
    v49 = &StringLiteral_5481;
  }
  PlayMakerFSM__SendEvent(fsm, (System_String_o *)*v49, 0LL);
}


void __fastcall BattleLogic__endStartWaveAction(BattleLogic_o *this, const MethodInfo *method)
{
  BattlePerformance_o *perf; // x0

  BattleLogic__ForceResetTimeAcceleration(this, method);
  perf = this->fields.perf;
  if ( !perf )
    sub_B170D4();
  BattlePerformance__setFadeAnimationSpeed(perf, 0LL);
}


bool __fastcall BattleLogic__existOverKillTarget(BattleLogic_o *this, const MethodInfo *method)
{
  BattleData_o *data; // x0
  BattleServantData_array *FieldPlayerServantList; // x0
  __int64 v5; // x1
  __int64 v6; // x2
  int max_length; // w8
  unsigned int v8; // w9
  BattleServantData_o *v9; // x10
  BattleData_o *v10; // x0
  int v11; // w8
  unsigned int v12; // w9
  BattleServantData_o *v13; // x10

  data = this->fields.data;
  if ( !data )
    goto LABEL_19;
  FieldPlayerServantList = BattleData__getFieldPlayerServantList(data, 0LL);
  if ( !FieldPlayerServantList )
    goto LABEL_19;
  max_length = FieldPlayerServantList->max_length;
  if ( max_length >= 1 )
  {
    v8 = 0;
    do
    {
      if ( v8 >= max_length )
        goto LABEL_20;
      v9 = FieldPlayerServantList->m_Items[v8];
      if ( !v9 )
        goto LABEL_19;
      if ( (v9->fields.overkillTargetId & 0x80000000) == 0 )
        return 1;
    }
    while ( (int)++v8 < max_length );
  }
  v10 = this->fields.data;
  if ( !v10 || (FieldPlayerServantList = BattleData__getFieldEnemyServantList(v10, 0, 0LL)) == 0LL )
LABEL_19:
    sub_B170D4();
  v11 = FieldPlayerServantList->max_length;
  if ( v11 >= 1 )
  {
    v12 = 0;
    while ( v12 < v11 )
    {
      v13 = FieldPlayerServantList->m_Items[v12];
      if ( !v13 )
        goto LABEL_19;
      if ( (v13->fields.overkillTargetId & 0x80000000) == 0 )
        return 1;
      if ( (int)++v12 >= v11 )
        return 0;
    }
LABEL_20:
    sub_B17100(FieldPlayerServantList, v5, v6);
    sub_B170A0();
  }
  return 0;
}


void __fastcall BattleLogic__finishActionBattle(
        BattleLogic_o *this,
        System_String_o *endproc,
        const MethodInfo *method)
{
  struct BattleData_o *data; // x0
  System_String_o *v5; // x19
  unsigned __int64 v6; // x21
  struct System_Int32_array *p_entryid; // x8
  unsigned __int64 max_length; // x9
  BattleServantData_o *PlayerServantData; // x0
  BattlePerformance_o *perf; // x0
  BattlePerformance_o *v11; // x0
  struct BattleData_o *v12; // x8
  PlayMakerFSM_o *fsm; // x0

  data = this->fields.data;
  if ( !data )
    goto LABEL_10;
  v5 = endproc;
  v6 = 0LL;
  while ( 1 )
  {
    p_entryid = data->fields.p_entryid;
    if ( !p_entryid )
      goto LABEL_10;
    max_length = p_entryid->max_length;
    if ( (__int64)v6 >= (int)max_length )
      break;
    if ( v6 >= max_length )
    {
      sub_B17100(data, endproc, method);
      sub_B170A0();
    }
    endproc = (System_String_o *)(unsigned int)p_entryid->m_Items[v6 + 1];
    if ( (int)endproc >= 1 )
    {
      PlayerServantData = BattleData__getPlayerServantData(data, (int32_t)endproc, 0LL);
      if ( !PlayerServantData )
        goto LABEL_10;
      BattleServantData__refreshActionBattle(PlayerServantData, 0LL);
      data = this->fields.data;
    }
    ++v6;
    if ( !data )
      goto LABEL_10;
  }
  perf = this->fields.perf;
  if ( !perf
    || (BattlePerformance__updateStatus(perf, 0LL), (v11 = this->fields.perf) == 0LL)
    || (BattlePerformance__SetDefenceTargetBattlePhaseEnd(v11, 1, 0LL), (v12 = this->fields.data) == 0LL)
    || (v12->fields.isCommandSelected = 0, (fsm = this->fields.fsm) == 0LL) )
  {
LABEL_10:
    sub_B170D4();
  }
  PlayMakerFSM__SendEvent(fsm, v5, 0LL);
}


void __fastcall BattleLogic__forceDropItem(BattleLogic_o *this, const MethodInfo *method)
{
  __int64 v3; // x1
  const MethodInfo *v4; // x2
  System_Collections_IEnumerator_o *v5; // x0
  PlayMakerFSM_o *fsm; // x0
  __int64 *v7; // x8

  if ( (byte_40F73A4 & 1) == 0 )
  {
    sub_B16FFC(&StringLiteral_9714, method);
    sub_B16FFC(&StringLiteral_9271, v3);
    byte_40F73A4 = 1;
  }
  if ( !BattleLogic__CheckEnemyDropItemAll(this, method) )
  {
    fsm = this->fields.fsm;
    if ( fsm )
    {
      v7 = &StringLiteral_9271;
      goto LABEL_8;
    }
LABEL_9:
    sub_B170D4();
  }
  v5 = BattleLogic__dropItemCoroutine(this, 0LL, v4);
  UnityEngine_MonoBehaviour__StartCoroutine_34804316((UnityEngine_MonoBehaviour_o *)this, v5, 0LL);
  fsm = this->fields.fsm;
  if ( !fsm )
    goto LABEL_9;
  v7 = &StringLiteral_9714;
LABEL_8:
  PlayMakerFSM__SendEvent(fsm, (System_String_o *)*v7, 0LL);
}


int32_t __fastcall BattleLogic__getAttackNp(
        BattleLogic_o *this,
        BattleServantData_o *atkSvt,
        BattleServantData_o *defSvt,
        BattleCommandData_o *command,
        bool critical,
        bool isNoble,
        BattleLogic_DamageProcessArgs_o *processArgs,
        const MethodInfo *method)
{
  int32_t AttackBaseNp; // w24
  float CommandCardNP; // s0
  float v16; // s8
  float v17; // s8

  if ( (byte_40F73DD & 1) == 0 )
  {
    sub_B16FFC(&StringLiteral_3429, atkSvt);
    byte_40F73DD = 1;
  }
  if ( !atkSvt )
    goto LABEL_12;
  AttackBaseNp = BattleServantData__getAttackBaseNp(atkSvt, command, isNoble, 0LL);
  CommandCardNP = BattleServantData__getCommandCardNP(atkSvt, command, defSvt, 0LL);
  if ( !defSvt )
    goto LABEL_12;
  v16 = (float)(CommandCardNP * (float)AttackBaseNp) * BattleServantData__getTdRate(defSvt, 0LL);
  v17 = v16 * BattleServantData__getUpDownDropNp(atkSvt, command, defSvt, 1, 0LL);
  if ( critical )
    v17 = v17 * ConstantMaster__getRateValue((System_String_o *)StringLiteral_3429, 0LL);
  if ( !processArgs )
    goto LABEL_12;
  if ( processArgs->fields._IsNormalAttack_k__BackingField )
  {
    if ( command )
    {
      v17 = v17 * BattleCommandData__GetAttackNpRate(command, 0LL);
      return BattleUtility__FloorToInt(fmaxf(v17, 0.0), 0LL);
    }
LABEL_12:
    sub_B170D4();
  }
  return BattleUtility__FloorToInt(fmaxf(v17, 0.0), 0LL);
}


int32_t __fastcall BattleLogic__getAttackStar(
        BattleLogic_o *this,
        BattleServantData_o *atkSvt,
        BattleServantData_o *defSvt,
        BattleCommandData_o *command,
        bool critical,
        BattleLogic_DamageProcessArgs_o *processArgs,
        const MethodInfo *method)
{
  int32_t BaseStarRate; // w24
  float CommandStar; // s0
  float v14; // s10
  float UpdownDropStar; // s0
  float v16; // s8

  if ( (byte_40F73DE & 1) == 0 )
  {
    sub_B16FFC(&StringLiteral_3428, atkSvt);
    byte_40F73DE = 1;
  }
  if ( !atkSvt )
    goto LABEL_12;
  BaseStarRate = BattleServantData__getBaseStarRate(atkSvt, 0LL);
  CommandStar = BattleServantData__getCommandStar(atkSvt, command, defSvt, 0LL);
  if ( !defSvt )
    goto LABEL_12;
  v14 = (float)(CommandStar + (float)((float)((float)BaseStarRate / 1000.0) + 0.0))
      + (float)((float)defSvt->fields.downstarrate / 1000.0);
  UpdownDropStar = BattleServantData__getUpdownDropStar(atkSvt, command, defSvt, 1, 0LL);
  v16 = BattleServantData__GetUpDownDropStarDamageTaken(defSvt, command, atkSvt, 0LL) + (float)(UpdownDropStar + v14);
  if ( critical )
    v16 = v16 + (float)((float)ConstantMaster__getValue((System_String_o *)StringLiteral_3428, 0LL) / 1000.0);
  if ( !processArgs )
    goto LABEL_12;
  if ( processArgs->fields._IsNormalAttack_k__BackingField )
  {
    if ( command )
    {
      v16 = v16 * BattleCommandData__GetDropStarRate(command, 0LL);
      return BattleUtility__FloorToInt(fmaxf(v16, 0.0) * 1000.0, 0LL);
    }
LABEL_12:
    sub_B170D4();
  }
  return BattleUtility__FloorToInt(fmaxf(v16, 0.0) * 1000.0, 0LL);
}


System_String_o *__fastcall BattleLogic__getBattleBgmName(BattleLogic_o *this, const MethodInfo *method)
{
  BattleData_o *data; // x0
  const MethodInfo *v4; // x1
  System_String_o *bgmName; // [xsp+8h] [xbp-8h] BYREF

  bgmName = 0LL;
  data = this->fields.data;
  if ( !data )
    sub_B170D4();
  if ( BattleData__checkAndGetOverrideBgm(data, &bgmName, 0LL) )
    return bgmName;
  else
    return BattleLogic__GetDefaultBgmName(this, v4);
}


// local variable allocation has failed, the output may be wrong!
float __fastcall BattleLogic__getClassMagnification(
        BattleLogic_o *this,
        BattleCommandData_o *command,
        BattleServantData_o *selfSvt,
        BattleServantData_o *opSvt,
        bool isAct,
        int32_t *atkClassRelationBuffShowState,
        int32_t *defClassRelationBuffShowState,
        const MethodInfo *method)
{
  BattleLogicClassRelation_o *logicClassRelation; // x25
  BattleLogicClassRelation_Argument_o *v16; // x26
  BattleLogicClassRelation_ResultData_o *v17; // x0
  BattleLogicClassRelation_ResultData_o *v18; // x21

  if ( (byte_40F73DF & 1) == 0 )
  {
    sub_B16FFC(&BattleLogicClassRelation_Argument_TypeInfo, command);
    byte_40F73DF = 1;
  }
  logicClassRelation = this->fields.logicClassRelation;
  v16 = (BattleLogicClassRelation_Argument_o *)sub_B170CC(
                                                 BattleLogicClassRelation_Argument_TypeInfo,
                                                 command,
                                                 selfSvt,
                                                 opSvt,
                                                 isAct);
  BattleLogicClassRelation_Argument___ctor(v16, command, selfSvt, opSvt, isAct, 0LL);
  if ( !logicClassRelation || (v17 = BattleLogicClassRelation__proc(logicClassRelation, v16, 0LL)) == 0LL )
    sub_B170D4();
  v18 = v17;
  BattleLogicClassRelation_ResultData__getBuffShowState(
    v17,
    v17->fields._AtkRateData_k__BackingField,
    v17->fields._DefRateData_k__BackingField,
    1,
    atkClassRelationBuffShowState,
    0LL);
  BattleLogicClassRelation_ResultData__getBuffShowState(
    v18,
    v18->fields._DefRateData_k__BackingField,
    v18->fields._AtkRateData_k__BackingField,
    0,
    defClassRelationBuffShowState,
    0LL);
  return v18->fields._FixRate_k__BackingField;
}


float __fastcall BattleLogic__getClassMagnification_19840008(
        BattleLogic_o *this,
        BattleCommandData_o *command,
        BattleServantData_o *selfSvt,
        BattleServantData_o *opSvt,
        bool isAct,
        const MethodInfo *method)
{
  const MethodInfo *v6; // x7
  int32_t defClassRelationBuffShowState; // [xsp+Ch] [xbp-4h] BYREF

  defClassRelationBuffShowState = 0;
  return BattleLogic__getClassMagnification(
           this,
           command,
           selfSvt,
           opSvt,
           isAct,
           &defClassRelationBuffShowState,
           &defClassRelationBuffShowState,
           v6);
}


// local variable allocation has failed, the output may be wrong!
BattleCommandData_o *__fastcall BattleLogic__getCommandData(
        BattleLogic_o *this,
        BattleServantData_o *svtData,
        int32_t type,
        const MethodInfo *method)
{
  __int64 v4; // x4
  __int64 v7; // x1
  BattleCommandData_o *v8; // x20
  __int64 v9; // x21
  __int64 v10; // x22
  BattleCommandData_o *result; // x0
  CodeStage_AntiCheat_ObscuredTypes_ObscuredInt_o v12; // 0:x0.16

  if ( (byte_40F73E7 & 1) == 0 )
  {
    sub_B16FFC(&BattleCommandData_TypeInfo, svtData);
    sub_B16FFC(&CodeStage_AntiCheat_ObscuredTypes_ObscuredInt_TypeInfo, v7);
    byte_40F73E7 = 1;
  }
  v8 = (BattleCommandData_o *)sub_B170CC(BattleCommandData_TypeInfo, svtData, *(_QWORD *)&type, method, v4);
  BattleCommandData___ctor(v8, 0LL);
  if ( !v8 || (v8->fields._type = type, !svtData) )
    sub_B170D4();
  v10 = *(_QWORD *)&svtData->fields.svtId.fields.currentCryptoKey;
  v9 = *(_QWORD *)&svtData->fields.svtId.fields.fakeValue;
  if ( (BYTE3(CodeStage_AntiCheat_ObscuredTypes_ObscuredInt_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0
    && !CodeStage_AntiCheat_ObscuredTypes_ObscuredInt_TypeInfo->_2.cctor_finished )
  {
    j_il2cpp_runtime_class_init_0(CodeStage_AntiCheat_ObscuredTypes_ObscuredInt_TypeInfo);
  }
  *(_QWORD *)&v12.fields.currentCryptoKey = v10;
  *(_QWORD *)&v12.fields.fakeValue = v9;
  v8->fields.svtId = CodeStage_AntiCheat_ObscuredTypes_ObscuredInt__op_Implicit_44068536(v12, 0LL);
  v8->fields.imageSvtId = BattleServantData__GetCommandImageSvtId(svtData, 0LL);
  v8->fields.svtlimit = BattleServantData__getCommandDispLimitCount(svtData, 0LL);
  v8->fields._loadsvtLimit = BattleServantData__getDispLimitCount(svtData, 1, 0LL);
  v8->fields.uniqueId = svtData->fields.uniqueId;
  v8->fields.attri = BattleServantData__getAttri(svtData, 0LL);
  result = v8;
  v8->fields.follower = svtData->fields.followerType;
  return result;
}


BattleActionData_DamageData_o *__fastcall BattleLogic__getDamagelist(
        BattleLogic_o *this,
        BattleServantData_o *actor,
        BattleServantData_o *target,
        BattleCommandData_o *command,
        BattleLogic_DamageProcessArgs_o *processArgs,
        const MethodInfo *method)
{
  System_Int32_array *v11; // x0
  __int64 v12; // x1
  __int64 v13; // x2
  const MethodInfo *v15; // [xsp+30h] [xbp-40h]

  if ( (byte_40F73D9 & 1) == 0 )
  {
    sub_B16FFC(&int___TypeInfo, actor);
    byte_40F73D9 = 1;
  }
  v11 = (System_Int32_array *)sub_B17014(int___TypeInfo, 1LL, target);
  if ( !v11 )
    sub_B170D4();
  if ( !v11->max_length )
  {
    sub_B17100(v11, v12, v13);
    sub_B170A0();
  }
  v11->m_Items[1] = 1000;
  return BattleLogic__getDamagelist_19833396(
           this,
           actor,
           target,
           command,
           0,
           0,
           v11,
           0LL,
           0LL,
           0LL,
           0,
           0,
           0,
           processArgs,
           v15);
}


// local variable allocation has failed, the output may be wrong!
BattleActionData_DamageData_o *__fastcall BattleLogic__getDamagelist_19833396(
        BattleLogic_o *this,
        BattleServantData_o *actor,
        BattleServantData_o *target,
        BattleCommandData_o *command,
        int32_t nobleType,
        int32_t funcIndex,
        System_Int32_array *perlist,
        System_Int32_array *svtIndv,
        System_Int32_array *buffIndv,
        System_Int32_array *rarityList,
        bool IsIncludeIgnoreIndividuality,
        bool isSafe,
        bool isIgnoreIndivUnreleaseable,
        BattleLogic_DamageProcessArgs_o *processArgs,
        const MethodInfo *method)
{
  BattleLogic_DamageProcessArgs_o *v15; // x26
  BattleCommandData_o *v19; // x21
  __int64 v22; // x1
  __int64 v23; // x1
  __int64 v24; // x1
  __int64 v25; // x1
  __int64 v26; // x1
  __int64 v27; // x1
  __int64 v28; // x1
  __int64 v29; // x1
  __int64 v30; // x1
  __int64 v31; // x1
  __int64 v32; // x1
  __int64 v33; // x1
  __int64 v34; // x1
  __int64 v35; // x1
  __int64 v36; // x1
  __int64 v37; // x1
  __int64 v38; // x1
  __int64 v39; // x1
  __int64 v40; // x1
  __int64 v41; // x1
  __int64 v42; // x1
  __int64 v43; // x1
  BattleActionData_DamageData_o *v44; // x22
  __int64 v45; // x1
  __int64 v46; // x2
  __int64 v47; // x3
  __int64 v48; // x4
  System_Collections_Generic_List_int__o *v49; // x25
  __int64 v50; // x1
  __int64 v51; // x2
  __int64 v52; // x3
  __int64 v53; // x4
  struct BattleBuffData_o *buffData; // x8
  System_Int32_array *AttackRaito; // x0
  __int64 v56; // x1
  __int64 v57; // x2
  const MethodInfo *v58; // x3
  System_Int32_array *v59; // x28
  __int64 v60; // x8
  int v61; // w20
  unsigned __int64 v62; // x10
  int32_t v63; // w13
  unsigned __int64 max_length; // x8
  unsigned __int64 v65; // x9
  unsigned __int64 v66; // x8
  int v67; // w9
  unsigned __int64 v68; // x10
  int32_t v69; // w13
  float atk; // s0
  float v71; // s0
  BattleLogic_o *v72; // x0
  const MethodInfo *v73; // x3
  float v74; // s8
  int32_t v75; // w20
  float v76; // s0
  float v77; // s0
  int32_t v78; // w20
  float WkHpRatio; // s0
  float v80; // s8
  const MethodInfo *v81; // x7
  float ClassMagnification; // s0
  float v83; // s10
  float v84; // s8
  int32_t Attri; // w20
  int32_t v86; // w0
  int32_t Value; // w20
  int32_t v88; // w0
  float UpDownAtk; // s8
  float UpDownDef; // s0
  float v91; // s8
  _BOOL4 v92; // w23
  float UpDownSpecialDef; // s0
  float v94; // s8
  float v95; // s8
  BattleLogic_o *v96; // x0
  const MethodInfo *v97; // x3
  float UpdownPowerSpecial; // s0
  BattleCommandData_o *v99; // x26
  _BOOL8 isTargetRarity; // x0
  const MethodInfo *v101; // x3
  float v102; // s8
  float v103; // s8
  int32_t v104; // s9
  int commandCardParam; // s10
  float v106; // s0
  int v107; // w0
  struct BattleData_o *data; // x1
  int32_t v109; // w22
  _BOOL8 isGainNp; // x0
  const MethodInfo *v111; // x7
  BattleLogic_o *DefenseNp; // x0
  const MethodInfo *v113; // x5
  const MethodInfo *v114; // x6
  __int64 v115; // x8
  __int64 v116; // x21
  int v117; // w24
  __int64 v118; // x20
  int32_t v119; // w1
  int32_t uniqueId; // w8
  struct BattleBuffData_o *v121; // x8
  BattleBuffData_ShowBuffData_array *RecBuffList; // x0
  BattleBuffData_ShowBuffData_array *v123; // x0
  System_Int32_array *v124; // x0
  __int64 v125; // x2
  __int64 v126; // x0
  __int64 v127; // x2
  __int64 v128; // x0
  __int64 v129; // x2
  __int64 v130; // x0
  struct System_Int32_array **p_starlist; // x22
  bool isLogicResultAlive; // w0
  signed __int64 size; // x8
  char v134; // w27
  unsigned __int64 v135; // x28
  int32_t v136; // w21
  bool v137; // w20
  char v138; // w8
  struct BattleData_o *v139; // x8
  struct System_Int32_array *v140; // x8
  int32_t v141; // w20
  int v142; // w20
  struct System_Int32_array *v143; // x8
  __int64 v144; // x21
  int v145; // w24
  int v146; // w8
  bool v147; // cc
  int32_t v148; // w20
  int32_t v149; // w26
  struct System_Collections_Generic_Dictionary_int__BattleCommandData__o *deadAttackCommandDictionary; // x0
  float RateValue; // s0
  float v152; // s0
  struct System_Int32_array *v153; // x8
  float v154; // s0
  int32_t v155; // w21
  int32_t v156; // w24
  int32_t v157; // w21
  int v158; // w24
  struct System_Int32_array *v159; // x8
  __int64 v160; // x21
  int v161; // w23
  int v162; // w8
  bool v163; // vf
  struct System_Int32_array *atknplist; // x21
  struct System_Int32_array *defnplist; // x21
  struct BattleData_o *v166; // x0
  int32_t wavecount; // w21
  int32_t v168; // w20
  int32_t v169; // w22
  bool IsOpponentPTUniqueID; // w0
  BattleServantData_o *v172; // x21
  int32_t SameIndiualityBuffSum; // w20
  BattleLogic_o *SameIndiualityServantSum; // x0
  const MethodInfo *v175; // x3
  int v176; // w20
  BattleLogic_o *inited; // x0
  const MethodInfo *v178; // x3
  BattleDataDefine_c *v179; // x8
  float PERMILLAGE_DENOMINATOR; // s8
  BattleLogic_o *v181; // x0
  int v182; // w21
  const MethodInfo *v183; // x3
  BattleLogic_o *v184; // x0
  int32_t v185; // w23
  const MethodInfo *v186; // x3
  int v187; // w0
  int v188; // w8
  float v189; // s8
  float v190; // s9
  BattleDataDefine_c *v191; // x0
  float v192; // s0
  int32_t v193; // [xsp+10h] [xbp-F0h]
  char v194; // [xsp+14h] [xbp-ECh]
  char v195; // [xsp+18h] [xbp-E8h]
  int32_t v196; // [xsp+1Ch] [xbp-E4h]
  BattleCommandData_o *commanda; // [xsp+20h] [xbp-E0h]
  BattleActionData_DamageData_o *damageData; // [xsp+28h] [xbp-D8h]
  int val1; // [xsp+34h] [xbp-CCh]
  BattleLogic_DamageProcessArgs_o *v201; // [xsp+40h] [xbp-C0h]
  int v202; // [xsp+40h] [xbp-C0h]
  System_Int32_array *indv; // [xsp+48h] [xbp-B8h]
  int32_t indva; // [xsp+48h] [xbp-B8h]
  int indvb; // [xsp+48h] [xbp-B8h]
  bool v206; // [xsp+50h] [xbp-B0h]
  __int64 v207; // [xsp+58h] [xbp-A8h]
  BattleServantData_o *lista; // [xsp+60h] [xbp-A0h]
  int32_t effectId; // [xsp+6Ch] [xbp-94h] BYREF
  int32_t defClassRelationBuffShowState[2]; // [xsp+70h] [xbp-90h] BYREF
  bool minimumDamageFlg; // [xsp+78h] [xbp-88h] BYREF
  float damage; // [xsp+7Ch] [xbp-84h] BYREF
  int32_t multiatk; // [xsp+80h] [xbp-80h] BYREF
  int32_t hitStat[3]; // [xsp+84h] [xbp-7Ch] BYREF

  v15 = processArgs;
  v19 = command;
  if ( (byte_40F73DA & 1) == 0 )
  {
    sub_B16FFC(&BattleDataDefine_TypeInfo, actor);
    sub_B16FFC(&BattleActionData_DamageData_TypeInfo, v22);
    sub_B16FFC(&BattleLogic_DamageProcessArgs_TypeInfo, v23);
    sub_B16FFC(&Method_System_Collections_Generic_Dictionary_int__BattleCommandData__set_Item__, v24);
    sub_B16FFC(&int___TypeInfo, v25);
    sub_B16FFC(&Method_System_Collections_Generic_List_int__Add__, v26);
    sub_B16FFC(&Method_System_Collections_Generic_List_int__ToArray__, v27);
    sub_B16FFC(&Method_System_Collections_Generic_List_int___ctor__, v28);
    sub_B16FFC(&Method_System_Collections_Generic_List_int__get_Count__, v29);
    sub_B16FFC(&Method_System_Collections_Generic_List_int__get_Item__, v30);
    sub_B16FFC(&System_Collections_Generic_List_int__TypeInfo, v31);
    sub_B16FFC(&System_Math_TypeInfo, v32);
    sub_B16FFC(&StringLiteral_12310, v33);
    sub_B16FFC(&StringLiteral_5781, v34);
    sub_B16FFC(&StringLiteral_3425, v35);
    sub_B16FFC(&StringLiteral_9828, v36);
    sub_B16FFC(&StringLiteral_1748, v37);
    sub_B16FFC(&StringLiteral_1747, v38);
    sub_B16FFC(&StringLiteral_1749, v39);
    sub_B16FFC(&StringLiteral_5780, v40);
    sub_B16FFC(&StringLiteral_9827, v41);
    sub_B16FFC(&StringLiteral_2938, v42);
    sub_B16FFC(&StringLiteral_9826, v43);
    byte_40F73DA = 1;
  }
  hitStat[0] = 0;
  damage = 0.0;
  multiatk = 0;
  minimumDamageFlg = 0;
  *(_QWORD *)defClassRelationBuffShowState = 0LL;
  effectId = 0;
  v44 = (BattleActionData_DamageData_o *)sub_B170CC(
                                           BattleActionData_DamageData_TypeInfo,
                                           actor,
                                           target,
                                           command,
                                           *(_QWORD *)&nobleType);
  BattleActionData_DamageData___ctor(v44, 0LL);
  v49 = (System_Collections_Generic_List_int__o *)sub_B170CC(
                                                    System_Collections_Generic_List_int__TypeInfo,
                                                    v45,
                                                    v46,
                                                    v47,
                                                    v48);
  System_Collections_Generic_List_int____ctor(
    v49,
    (const MethodInfo_2F0F794 *)Method_System_Collections_Generic_List_int___ctor__);
  if ( !processArgs )
  {
    v15 = (BattleLogic_DamageProcessArgs_o *)sub_B170CC(BattleLogic_DamageProcessArgs_TypeInfo, v50, v51, v52, v53);
    BattleLogic_DamageProcessArgs___ctor(v15, 0, 0LL);
  }
  hitStat[0] = 0;
  multiatk = 1;
  if ( !actor )
    goto LABEL_174;
  BattleServantData__setBuffState(actor, 0LL);
  if ( !target )
    goto LABEL_174;
  indv = svtIndv;
  v196 = funcIndex;
  BattleServantData__setBuffState(target, 0LL);
  buffData = target->fields.buffData;
  if ( !buffData )
    goto LABEL_174;
  buffData->fields.isNoDamage = 0;
  BattleServantData__CheckNoDamageBuff(target, this->fields.data, actor, v19, v44, 0LL, 0LL);
  BattleServantData__recordUse(actor, 0LL);
  BattleServantData__recordUse(target, 0LL);
  AttackRaito = BattleServantData__getAttackRaito(actor, v19, target, &multiatk, 0LL);
  if ( nobleType )
    AttackRaito = BattleServantData__getTreasureDvcHitRaito(actor, 0LL);
  v59 = AttackRaito;
  if ( !AttackRaito )
    goto LABEL_174;
  v60 = *(_QWORD *)&AttackRaito->max_length;
  if ( (__int64)((unsigned __int64)(unsigned int)v60 << 32) >= 1 )
  {
    v61 = 0;
    v62 = 0LL;
    while ( v62 < (unsigned int)v60 )
    {
      v63 = AttackRaito->m_Items[++v62];
      v61 += v63;
      if ( (__int64)v62 >= (int)v60 )
        goto LABEL_17;
    }
LABEL_173:
    sub_B17100(AttackRaito, v56, v57);
    sub_B170A0();
  }
  v61 = 0;
LABEL_17:
  if ( multiatk >= 2 )
  {
    AttackRaito = (System_Int32_array *)sub_B17014(int___TypeInfo, (unsigned int)(multiatk * v60), v57);
    if ( !AttackRaito )
      goto LABEL_174;
    max_length = AttackRaito->max_length;
    if ( (__int64)(max_length << 32) >= 1 )
    {
      v65 = 0LL;
      while ( (int)v65 / multiatk < v59->max_length && v65 < max_length )
      {
        AttackRaito->m_Items[v65 + 1] = v59->m_Items[(int)v65 / multiatk + 1];
        if ( (__int64)++v65 >= (int)max_length )
          goto LABEL_24;
      }
      goto LABEL_173;
    }
LABEL_24:
    v59 = AttackRaito;
  }
  v66 = v59->max_length;
  if ( (__int64)(v66 << 32) < 1 )
  {
    v207 = 0LL;
  }
  else
  {
    v67 = 0;
    v68 = 0LL;
    do
    {
      if ( v68 >= v66 )
        goto LABEL_173;
      v69 = v59->m_Items[++v68];
      v67 += v69;
    }
    while ( (__int64)v68 < (int)v66 );
    v207 = v67;
  }
  minimumDamageFlg = 0;
  atk = (float)actor->fields.atk;
  damage = atk;
  if ( !v19 )
    goto LABEL_174;
  v71 = (double)v61 * (float)(atk + (float)v19->fields.commandCardParam) / 100.0;
  damage = v71;
  v72 = (BattleLogic_o *)BattleLogic__getPerlist((BattleLogic_o *)AttackRaito, perlist, 0, v58);
  v74 = (float)(int)v72;
  if ( nobleType == 6 )
  {
    v78 = BattleLogic__getPerlist(v72, perlist, 1, v73);
    WkHpRatio = BattleServantData__GetWkHpRatio(actor, 0LL);
    v77 = (float)(1.0 - WkHpRatio) * (float)v78;
    goto LABEL_36;
  }
  if ( nobleType == 5 )
  {
    v75 = BattleLogic__getPerlist(v72, perlist, 1, v73);
    v76 = BattleServantData__GetWkHpRatio(actor, 0LL);
    v77 = (float)v75 * v76;
LABEL_36:
    v74 = v77 + v74;
  }
  v80 = (float)(damage * (float)(v74 / 1000.0)) * BattleServantData__getCommandCardATK(actor, v19, target, 0LL);
  damage = v80;
  if ( !v15 )
    goto LABEL_174;
  if ( v15->fields._IsNormalAttack_k__BackingField )
  {
    v80 = v80 * BattleCommandData__GetNormalAttackDamageRate(v19, 0LL);
    damage = v80;
  }
  *(_QWORD *)defClassRelationBuffShowState = 0LL;
  damage = v80 * BattleServantData__getClassAtk(actor, 0LL);
  ClassMagnification = BattleLogic__getClassMagnification(
                         this,
                         v19,
                         actor,
                         target,
                         1,
                         &defClassRelationBuffShowState[1],
                         defClassRelationBuffShowState,
                         v81);
  v83 = 1.0;
  if ( ClassMagnification <= 1.0 )
  {
    if ( ClassMagnification < 1.0 )
    {
      v194 = 1;
      v195 = 0;
    }
    else
    {
      v194 = 0;
      v195 = 0;
    }
  }
  else
  {
    v194 = 0;
    v195 = 1;
  }
  damage = ClassMagnification * damage;
  v84 = damage;
  Attri = BattleServantData__getAttri(actor, 0LL);
  v86 = BattleServantData__getAttri(target, 0LL);
  damage = v84 * SvtAttri__getMagnification(Attri, v86, 0LL);
  Value = ConstantMaster__getValue((System_String_o *)StringLiteral_1749, 0LL);
  v88 = ConstantMaster__getValue((System_String_o *)StringLiteral_1748, 0LL);
  damage = damage * (float)((float)BattleRandom__getRandom(Value, v88, 0LL) / 1000.0);
  damage = damage * (float)((float)ConstantMaster__getValue((System_String_o *)StringLiteral_1747, 0LL) / 1000.0);
  UpDownAtk = BattleServantData__getUpDownAtk(actor, v19, target, 0LL);
  UpDownDef = BattleServantData__getUpDownDef(target, v19, actor, nobleType == 2, 0LL);
  if ( !v44 )
    goto LABEL_174;
  v44->fields.isCriticalMiss = v19->fields.isCriticalMiss;
  v91 = fmaxf((float)(UpDownAtk + 1.0) - UpDownDef, 0.0);
  if ( v19->fields.critical )
  {
    v91 = v91 * (float)((float)ConstantMaster__getValue((System_String_o *)StringLiteral_3425, 0LL) / 1000.0);
    v92 = 1;
  }
  else
  {
    v92 = 0;
  }
  if ( BattleCommandData__isAddAttack(v19, 0LL) && BattleCommandData__isSingle(v19, 0LL) )
    v91 = v91 * (float)((float)ConstantMaster__getValue((System_String_o *)StringLiteral_5781, 0LL) / 1000.0);
  if ( BattleCommandData__isAddAttack(v19, 0LL) && BattleCommandData__isGrand(v19, 0LL) )
    v91 = v91 * (float)((float)ConstantMaster__getValue((System_String_o *)StringLiteral_5780, 0LL) / 1000.0);
  UpDownSpecialDef = BattleServantData__getUpDownSpecialDef(target, v19, actor, 0LL);
  damage = damage * (float)(v91 * fmaxf(1.0 - UpDownSpecialDef, 0.0));
  v94 = BattleServantData__getUpdownPower(actor, v19, target, 0LL) + 1.0;
  v95 = v94 + BattleServantData__getUpdownSelfDamage(target, v19, actor, 0LL);
  if ( v92 )
    v95 = v95 + BattleServantData__getUpdownCriticalAtk(actor, v19, target, 0LL);
  damageData = v44;
  if ( nobleType )
    v95 = v95 + BattleServantData__getUpdownNpAtk(actor, v19, target, 0LL);
  damage = damage * fmaxf(v95, 0.001);
  UpdownPowerSpecial = BattleServantData__getUpdownPowerSpecial(actor, v19, target, 0LL);
  v206 = v92;
  damage = damage * fmaxf(UpdownPowerSpecial + 1.0, 0.001);
  if ( nobleType )
  {
    v201 = v15;
    v99 = v19;
    switch ( nobleType )
    {
      case 3:
        isTargetRarity = BattleServantData__checkIndividualities(target, indv, 0LL);
        if ( isTargetRarity )
          goto LABEL_68;
        break;
      case 4:
      case 7:
        isTargetRarity = BattleServantData__checkBuffIndividualities(
                           target,
                           buffIndv,
                           0,
                           IsIncludeIgnoreIndividuality,
                           isIgnoreIndivUnreleaseable,
                           0LL);
        if ( isTargetRarity )
          goto LABEL_68;
        break;
      case 9:
        isTargetRarity = BattleServantData__isTargetRarity(target, rarityList, 0LL);
        if ( isTargetRarity )
        {
          v44->fields.isNobleRareAtk = 1;
          goto LABEL_69;
        }
        break;
      case 10:
        isTargetRarity = BattleServantData__checkAllIndividualities(target, indv, 0LL);
        if ( isTargetRarity )
        {
LABEL_68:
          v44->fields.isNobleIndividualAtk = 1;
LABEL_69:
          v83 = (float)BattleLogic__getPerlist((BattleLogic_o *)isTargetRarity, perlist, 1, v101) / 1000.0;
        }
        break;
      case 11:
        if ( BattleLogic__getPerlist(v96, perlist, 5, v97) <= 0 )
          v172 = actor;
        else
          v172 = target;
        SameIndiualityBuffSum = BattleServantData__getSameIndiualityBuffSum(
                                  v172,
                                  buffIndv,
                                  0,
                                  IsIncludeIgnoreIndividuality,
                                  isIgnoreIndivUnreleaseable,
                                  0LL);
        SameIndiualityServantSum = (BattleLogic_o *)BattleServantData__getSameIndiualityServantSum(v172, indv, 0LL);
        v176 = (_DWORD)SameIndiualityServantSum + SameIndiualityBuffSum;
        if ( v176 >= 1 )
        {
          inited = (BattleLogic_o *)BattleLogic__getPerlist(SameIndiualityServantSum, perlist, 4, v175);
          indvb = (int)inited;
          v179 = BattleDataDefine_TypeInfo;
          if ( (BYTE3(BattleDataDefine_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0
            && !BattleDataDefine_TypeInfo->_2.cctor_finished )
          {
            inited = (BattleLogic_o *)j_il2cpp_runtime_class_init_0(BattleDataDefine_TypeInfo);
            v179 = BattleDataDefine_TypeInfo;
          }
          PERMILLAGE_DENOMINATOR = v179->static_fields->PERMILLAGE_DENOMINATOR;
          v181 = (BattleLogic_o *)BattleLogic__getPerlist(inited, perlist, 1, v178);
          v182 = (int)v181;
          v184 = (BattleLogic_o *)BattleLogic__getPerlist(v181, perlist, 2, v183);
          v185 = (int)v184;
          v187 = BattleLogic__getPerlist(v184, perlist, 3, v186);
          if ( v187 >= 1 )
            v176 = UnityEngine_Mathf__Min_40727532(v176, v187, 0LL);
          v188 = v176 * v182;
          if ( v185 >= 1 )
            v188 = UnityEngine_Mathf__Min_40727532(v188, v185, 0LL);
          v189 = (float)indvb / PERMILLAGE_DENOMINATOR;
          v190 = (float)v188;
          v191 = BattleDataDefine_TypeInfo;
          if ( (BYTE3(BattleDataDefine_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0
            && !BattleDataDefine_TypeInfo->_2.cctor_finished )
          {
            j_il2cpp_runtime_class_init_0(BattleDataDefine_TypeInfo);
            v191 = BattleDataDefine_TypeInfo;
          }
          v192 = v191->static_fields->PERMILLAGE_DENOMINATOR;
          v44->fields.isNobleIndividualAtk = 1;
          v83 = v189 + (float)(v190 / v192);
        }
        break;
      default:
        break;
    }
    v19 = v99;
    v15 = v201;
    LOBYTE(v92) = v206;
    damage = v83 * damage;
  }
  v102 = BattleServantData__getBuffDamageValue(actor, v19, target, 0LL) + 0.0;
  v103 = v102 + BattleServantData__getBuffSelfDamageValue(target, v19, actor, 0LL);
  if ( BattleCommandData__isBusterChain(v19, 0LL) )
  {
    v104 = actor->fields.atk;
    commandCardParam = v19->fields.commandCardParam;
    v103 = v103
         + (float)((float)((float)v104 + (float)commandCardParam)
                 * ConstantMaster__getRateValue((System_String_o *)StringLiteral_2938, 0LL));
  }
  v106 = v103 + damage;
  damage = v103 + damage;
  if ( nobleType == 8 || isSafe )
  {
    if ( ((__int64 (__fastcall *)(BattleServantData_o *, Il2CppMethodPointer))target->klass->vtable._9_get_hp.method)(
           target,
           target->klass->vtable._10_set_hp.methodPtr) < 1 )
    {
      v106 = damage;
    }
    else
    {
      v107 = ((__int64 (__fastcall *)(BattleServantData_o *, Il2CppMethodPointer))target->klass->vtable._9_get_hp.method)(
               target,
               target->klass->vtable._10_set_hp.methodPtr);
      v106 = damage;
      if ( damage >= (float)v107 )
      {
        v106 = (float)(int)(((__int64 (__fastcall *)(BattleServantData_o *, Il2CppMethodPointer, float))target->klass->vtable._9_get_hp.method)(
                              target,
                              target->klass->vtable._10_set_hp.methodPtr,
                              damage)
                          - 1);
        damage = v106;
      }
    }
  }
  if ( v106 <= 0.0 )
    damage = 0.0;
  else
    minimumDamageFlg = 1;
  data = this->fields.data;
  if ( !data )
    goto LABEL_174;
  if ( data->fields.tutorialId == 1 && nobleType )
  {
    damage = (float)((__int64 (__fastcall *)(BattleServantData_o *, Il2CppMethodPointer))target->klass->vtable._9_get_hp.method)(
                      target,
                      target->klass->vtable._10_set_hp.methodPtr);
    data = this->fields.data;
  }
  commanda = v19;
  BattleServantData__CheckInvincibleAvoidanceBuff(
    target,
    data,
    actor,
    v19,
    v44,
    &damage,
    &minimumDamageFlg,
    hitStat,
    0LL,
    0LL);
  v109 = BattleUtility__FloorToInt(damage, 0LL);
  isGainNp = BattleServantData__isGainNp(actor, 0, 0LL);
  indva = 0;
  if ( isGainNp )
    indva = BattleLogic__getAttackNp((BattleLogic_o *)isGainNp, actor, target, v19, v92, nobleType != 0, v15, v111);
  DefenseNp = (BattleLogic_o *)BattleServantData__isGainNp(target, 0, 0LL);
  v202 = 0;
  if ( ((unsigned __int8)DefenseNp & 1) != 0 )
  {
    DefenseNp = (BattleLogic_o *)BattleLogic__getDefenseNp(DefenseNp, actor, target, v19, v15, v113);
    v202 = (int)DefenseNp;
  }
  v193 = nobleType;
  lista = actor;
  AttackRaito = (System_Int32_array *)BattleLogic__getAttackStar(DefenseNp, actor, target, v19, v92, v15, v114);
  v115 = *(_QWORD *)&v59->max_length;
  val1 = (int)AttackRaito;
  if ( (int)v115 - 1 >= 1 )
  {
    v116 = 0LL;
    v117 = v109;
    while ( v116 < (unsigned __int64)(unsigned int)v115 )
    {
      v118 = v59->m_Items[v116 + 1] * (__int64)v117 / v207;
      if ( (int)v118 < 1 && minimumDamageFlg )
      {
        v117 = (v117 - 1) & ~((v117 - 1) >> 31);
        LODWORD(v118) = 1;
      }
      if ( !v49 )
        goto LABEL_174;
      System_Collections_Generic_List_int___Add(
        v49,
        v118,
        (const MethodInfo_2F104F0 *)Method_System_Collections_Generic_List_int__Add__);
      v115 = v59->max_length;
      ++v116;
      v109 = (v109 - v118) & ~((v109 - (int)v118) >> 31);
      if ( v116 >= ((v115 << 32) - 0x100000000LL) >> 32 )
        goto LABEL_99;
    }
    goto LABEL_173;
  }
  if ( !v49 )
    goto LABEL_174;
LABEL_99:
  if ( minimumDamageFlg && v109 < 1 )
    v119 = 1;
  else
    v119 = v109;
  System_Collections_Generic_List_int___Add(
    v49,
    v119,
    (const MethodInfo_2F104F0 *)Method_System_Collections_Generic_List_int__Add__);
  uniqueId = target->fields.uniqueId;
  damageData->fields.functionIndex = v196;
  damageData->fields.targetId = uniqueId;
  damageData->fields.critical = v206;
  damageData->fields.regist = v194;
  damageData->fields.weak = v195;
  damageData->fields.hitStates = hitStat[0];
  damageData->fields.multiatk = multiatk;
  v121 = target->fields.buffData;
  if ( !v121 )
    goto LABEL_174;
  damageData->fields.noDamage = v121->fields.isNoDamage;
  effectId = 0;
  damageData->fields.sphit = BattleServantData__isSphitBuff(actor, &effectId, 0LL);
  damageData->fields.sphitEffectId = effectId;
  RecBuffList = BattleServantData__getRecBuffList(
                  actor,
                  1,
                  defClassRelationBuffShowState[1] != 1,
                  defClassRelationBuffShowState[1] == 2,
                  0LL);
  damageData->fields.atkbufflist = RecBuffList;
  sub_B16F98(&damageData->fields.atkbufflist, RecBuffList);
  v123 = BattleServantData__getRecBuffList(
           target,
           0,
           defClassRelationBuffShowState[0] != 1,
           defClassRelationBuffShowState[0] == 2,
           0LL);
  damageData->fields.defbufflist = v123;
  sub_B16F98(&damageData->fields.defbufflist, v123);
  v124 = System_Collections_Generic_List_int___ToArray(
           v49,
           (const MethodInfo_2F125FC *)Method_System_Collections_Generic_List_int__ToArray__);
  damageData->fields.damagelist = v124;
  sub_B16F98(&damageData->fields.damagelist, v124);
  v126 = sub_B17014(int___TypeInfo, (unsigned int)v49->fields._size, v125);
  damageData->fields.atknplist = (struct System_Int32_array *)v126;
  sub_B16F98(&damageData->fields.atknplist, v126);
  v128 = sub_B17014(int___TypeInfo, (unsigned int)v49->fields._size, v127);
  damageData->fields.defnplist = (struct System_Int32_array *)v128;
  sub_B16F98(&damageData->fields.defnplist, v128);
  v130 = sub_B17014(int___TypeInfo, (unsigned int)v49->fields._size, v129);
  p_starlist = &damageData->fields.starlist;
  damageData->fields.starlist = (struct System_Int32_array *)v130;
  sub_B16F98(&damageData->fields.starlist, v130);
  if ( actor->fields.uniqueId == target->fields.uniqueId )
    damageData->fields.noAccumulation = 1;
  isLogicResultAlive = BattleServantData__isLogicResultAlive(target, 0LL);
  LODWORD(size) = v49->fields._size;
  if ( (int)size >= 1 )
  {
    v134 = isLogicResultAlive;
    v135 = 0LL;
    while ( 1 )
    {
      if ( v135 >= (unsigned int)size )
        System_ThrowHelper__ThrowArgumentOutOfRangeException_41329284(0LL);
      v136 = v49->fields._items->m_Items[v135 + 1];
      v137 = BattleServantData__provisionalDamage(target, v136, 0LL);
      AttackRaito = (System_Int32_array *)BattleServantData__resultDamage(target, v136, 0, 0LL);
      v138 = 0;
      if ( (v134 & 1) == 0 )
        goto LABEL_116;
      AttackRaito = (System_Int32_array *)BattleServantData__isLogicResultAlive(target, 0LL);
      if ( ((unsigned __int8)AttackRaito & 1) != 0 )
        break;
      damageData->fields.overkillIndex = v135;
      v139 = this->fields.data;
      if ( !v139 )
        goto LABEL_174;
      target->fields.deadTurn = v139->fields.typeTurn;
      AttackRaito = (System_Int32_array *)BattleServantData__isGuts(target, 0LL);
      if ( ((unsigned __int8)AttackRaito & 1) != 0
        || (AttackRaito = (System_Int32_array *)BattleServantData__isShiftableServant(target, 0LL),
            ((unsigned __int8)AttackRaito & 1) != 0) )
      {
        v138 = 0;
LABEL_116:
        v134 = v138;
        if ( v137 )
          goto LABEL_117;
        goto LABEL_134;
      }
      deadAttackCommandDictionary = this->fields.deadAttackCommandDictionary;
      if ( !deadAttackCommandDictionary )
        goto LABEL_174;
      System_Collections_Generic_Dictionary_int__WarBoardAIRoute_RouteData___set_Item(
        (System_Collections_Generic_Dictionary_int__WarBoardAIRoute_RouteData__o *)deadAttackCommandDictionary,
        target->fields.uniqueId,
        (WarBoardAIRoute_RouteData_o *)commanda,
        (const MethodInfo_2DE9394 *)Method_System_Collections_Generic_Dictionary_int__BattleCommandData__set_Item__);
      v134 = 0;
      if ( v137 )
      {
LABEL_117:
        v140 = *p_starlist;
        if ( !*p_starlist )
          goto LABEL_174;
        if ( v135 >= v140->max_length )
          goto LABEL_173;
        v140->m_Items[v135 + 1] = 0;
        v141 = ConstantMaster__getValue((System_String_o *)StringLiteral_12310, 0LL);
        if ( (BYTE3(System_Math_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0
          && !System_Math_TypeInfo->_2.cctor_finished )
        {
          j_il2cpp_runtime_class_init_0(System_Math_TypeInfo);
        }
        AttackRaito = (System_Int32_array *)System_Math__Min_44418752(val1, v141, 0LL);
        if ( (int)AttackRaito >= 1 )
        {
          v142 = (int)AttackRaito;
          do
          {
            v143 = *p_starlist;
            if ( !*p_starlist )
              goto LABEL_174;
            if ( v135 >= v143->max_length )
              goto LABEL_173;
            v144 = (__int64)v143 + 4 * v135;
            v145 = *(_DWORD *)(v144 + 32);
            AttackRaito = (System_Int32_array *)BattleRandom__getNext(1000, 0LL);
            if ( (int)AttackRaito >= v142 )
              v146 = v145;
            else
              v146 = v145 + 1;
            v147 = v142 < 1001;
            v142 -= 1000;
            *(_DWORD *)(v144 + 32) = v146;
          }
          while ( !v147 );
        }
        v148 = v202;
        v149 = indva;
        goto LABEL_148;
      }
LABEL_134:
      RateValue = ConstantMaster__getRateValue((System_String_o *)StringLiteral_9826, 0LL);
      v149 = BattleUtility__FloorToInt(RateValue * (float)indva, 0LL);
      v152 = ConstantMaster__getRateValue((System_String_o *)StringLiteral_9826, 0LL);
      AttackRaito = (System_Int32_array *)BattleUtility__FloorToInt(v152 * (float)v202, 0LL);
      v153 = *p_starlist;
      if ( !*p_starlist )
        goto LABEL_174;
      if ( v135 >= v153->max_length )
        goto LABEL_173;
      v153->m_Items[v135 + 1] = 0;
      v148 = (int)AttackRaito;
      v154 = ConstantMaster__getRateValue((System_String_o *)StringLiteral_9828, 0LL);
      v155 = BattleUtility__FloorToInt(v154 * (float)val1, 0LL);
      v156 = ConstantMaster__getValue((System_String_o *)StringLiteral_9827, 0LL) + v155;
      v157 = ConstantMaster__getValue((System_String_o *)StringLiteral_12310, 0LL);
      if ( (BYTE3(System_Math_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0
        && !System_Math_TypeInfo->_2.cctor_finished )
      {
        j_il2cpp_runtime_class_init_0(System_Math_TypeInfo);
      }
      AttackRaito = (System_Int32_array *)System_Math__Min_44418752(v156, v157, 0LL);
      if ( (int)AttackRaito >= 1 )
      {
        v158 = (int)AttackRaito;
        while ( 1 )
        {
          v159 = *p_starlist;
          if ( !*p_starlist )
            break;
          if ( v135 >= v159->max_length )
            goto LABEL_173;
          v160 = (__int64)v159 + 4 * v135;
          v161 = *(_DWORD *)(v160 + 32);
          AttackRaito = (System_Int32_array *)BattleRandom__getNext(1000, 0LL);
          if ( (int)AttackRaito >= v158 )
            v162 = v161;
          else
            v162 = v161 + 1;
          v163 = __OFSUB__(v158, 1000);
          v158 -= 1000;
          *(_DWORD *)(v160 + 32) = v162;
          if ( (v158 < 0) ^ v163 | (v158 == 0) )
            goto LABEL_148;
        }
LABEL_174:
        sub_B170D4();
      }
LABEL_148:
      atknplist = damageData->fields.atknplist;
      AttackRaito = (System_Int32_array *)BattleServantData__addNp(lista, v149, 0, 0LL);
      if ( !atknplist )
        goto LABEL_174;
      if ( v135 >= atknplist->max_length )
        goto LABEL_173;
      atknplist->m_Items[v135 + 1] = (int)AttackRaito;
      defnplist = damageData->fields.defnplist;
      AttackRaito = (System_Int32_array *)BattleServantData__addNp(target, v148, 0, 0LL);
      if ( !defnplist )
        goto LABEL_174;
      if ( v135 >= defnplist->max_length )
        goto LABEL_173;
      defnplist->m_Items[v135 + 1] = (int)AttackRaito;
      size = v49->fields._size;
      if ( (__int64)++v135 >= size )
        goto LABEL_153;
    }
    v138 = 1;
    goto LABEL_116;
  }
LABEL_153:
  v166 = this->fields.data;
  if ( !v166 )
    goto LABEL_174;
  wavecount = v166->fields.wavecount;
  v168 = lista->fields.uniqueId;
  if ( v193 )
    v169 = 2;
  else
    v169 = 1;
  IsOpponentPTUniqueID = BattleData__IsOpponentPTUniqueID(v166, target->fields.uniqueId, lista->fields.uniqueId, 0LL);
  BattleServantData__setActionHistory(target, v168, v169, wavecount, IsOpponentPTUniqueID, 0LL);
  return damageData;
}


int32_t __fastcall BattleLogic__getDefenseNp(
        BattleLogic_o *this,
        BattleServantData_o *atkSvt,
        BattleServantData_o *defSvt,
        BattleCommandData_o *command,
        BattleLogic_DamageProcessArgs_o *processArgs,
        const MethodInfo *method)
{
  int32_t DefenceBaseNp; // w0
  int v11; // w23
  float AtkTdRate; // s8
  float UpDownDropNp; // s9
  float UpDownDamageDropNp; // s10
  float UpDownGiveNp; // s0
  float v16; // s8

  if ( !defSvt )
    goto LABEL_8;
  DefenceBaseNp = BattleServantData__getDefenceBaseNp(defSvt, 0LL);
  if ( !atkSvt )
    goto LABEL_8;
  v11 = DefenceBaseNp;
  AtkTdRate = BattleServantData__getAtkTdRate(atkSvt, 0LL);
  UpDownDropNp = BattleServantData__getUpDownDropNp(defSvt, command, atkSvt, 0, 0LL);
  UpDownDamageDropNp = BattleServantData__getUpDownDamageDropNp(defSvt, command, atkSvt, 0LL);
  UpDownGiveNp = BattleServantData__getUpDownGiveNp(atkSvt, command, defSvt, 0LL);
  if ( !processArgs )
    goto LABEL_8;
  v16 = (float)((float)((float)(AtkTdRate * (float)v11) * UpDownDropNp) * UpDownDamageDropNp) * UpDownGiveNp;
  if ( processArgs->fields._IsNormalAttack_k__BackingField )
  {
    if ( command )
    {
      v16 = v16 * BattleCommandData__GetDefenseNpRate(command, 0LL);
      return BattleUtility__FloorToInt(fmaxf(v16, 0.0), 0LL);
    }
LABEL_8:
    sub_B170D4();
  }
  return BattleUtility__FloorToInt(fmaxf(v16, 0.0), 0LL);
}


int32_t __fastcall BattleLogic__getForceEndWinReason(BattleLogic_o *this, const MethodInfo *method)
{
  struct BattleData_o *data; // x0
  struct BattleData_o *v4; // x0

  data = this->fields.data;
  if ( !data )
    goto LABEL_9;
  if ( data->fields.leaderDown || !BattleData__checkAliveAllEnemy(data, 0LL) )
    return 1;
  v4 = this->fields.data;
  if ( !v4 )
LABEL_9:
    sub_B170D4();
  if ( BattleData__isAliveEntriesByForcedFlag(v4, v4->fields.p_entryid, 0LL) )
    return 3;
  else
    return 2;
}


// local variable allocation has failed, the output may be wrong!
BattleActionData_DamageData_o *__fastcall BattleLogic__getFunctionDamagelist(
        BattleLogic_o *this,
        BattleServantData_o *actor,
        BattleServantData_o *target,
        int32_t per,
        int32_t funcIndex,
        BattleActionData_o *action,
        bool isSafe,
        const MethodInfo *method)
{
  __int64 v15; // x1
  BattleCommandData_o *v16; // x24
  const MethodInfo *v17; // x2
  _BOOL4 isCounter; // w8
  bool IsSafeCounterAttack; // w26
  System_Int32_array *v20; // x0
  __int64 v21; // x1
  __int64 v22; // x2
  const MethodInfo *v24; // [xsp+30h] [xbp-50h]

  if ( (byte_40F73DB & 1) == 0 )
  {
    sub_B16FFC(&BattleCommandData_TypeInfo, actor);
    sub_B16FFC(&int___TypeInfo, v15);
    byte_40F73DB = 1;
  }
  v16 = (BattleCommandData_o *)sub_B170CC(
                                 BattleCommandData_TypeInfo,
                                 actor,
                                 target,
                                 *(_QWORD *)&per,
                                 *(_QWORD *)&funcIndex);
  BattleCommandData___ctor(v16, 0LL);
  if ( !v16 )
    goto LABEL_11;
  v16->fields._type = 3;
  if ( !action )
    goto LABEL_11;
  isCounter = action->fields.isCounter;
  IsSafeCounterAttack = !action->fields.isCounter && isSafe;
  if ( isCounter && isSafe )
    IsSafeCounterAttack = BattleLogic__IsSafeCounterAttack(this, target, v17);
  v20 = (System_Int32_array *)sub_B17014(int___TypeInfo, 1LL, v17);
  if ( !v20 )
LABEL_11:
    sub_B170D4();
  if ( !v20->max_length )
  {
    sub_B17100(v20, v21, v22);
    sub_B170A0();
  }
  v20->m_Items[1] = per;
  return BattleLogic__getDamagelist_19833396(
           this,
           actor,
           target,
           v16,
           0,
           funcIndex,
           v20,
           0LL,
           0LL,
           0LL,
           0,
           IsSafeCounterAttack,
           0,
           0LL,
           v24);
}


// local variable allocation has failed, the output may be wrong!
BattleActionData_DamageData_o *__fastcall BattleLogic__getFunctionNpDamagelist(
        BattleLogic_o *this,
        BattleServantData_o *actor,
        BattleServantData_o *target,
        System_Int32_array *perlist,
        int32_t funcIndex,
        int32_t type,
        BattleActionData_o *action,
        System_Int32_array *svtIndv,
        System_Int32_array *buffIndv,
        System_Int32_array *rarityList,
        bool IsIncludeIgnoreIndividuality,
        bool isIgnoreIndivUnreleaseable,
        const MethodInfo *method)
{
  BattleCommandData_o *v20; // x26
  int32_t TreasureDvcCardId; // w0
  const MethodInfo *v22; // x2
  bool v23; // w0
  const MethodInfo *v25; // [xsp+30h] [xbp-70h]

  if ( (byte_40F73DC & 1) == 0 )
  {
    sub_B16FFC(&BattleCommandData_TypeInfo, actor);
    byte_40F73DC = 1;
  }
  v20 = (BattleCommandData_o *)sub_B170CC(BattleCommandData_TypeInfo, actor, target, perlist, *(_QWORD *)&funcIndex);
  BattleCommandData___ctor(v20, 0LL);
  if ( !actor
    || (TreasureDvcCardId = BattleServantData__getTreasureDvcCardId(actor, 0LL), !v20)
    || (v20->fields._type = TreasureDvcCardId,
        v20->fields.treasureDvc = BattleServantData__getTreasureDvcId(actor, 1, 0LL),
        !action) )
  {
    sub_B170D4();
  }
  v23 = action->fields.isCounter && BattleLogic__IsSafeCounterAttack(this, target, v22);
  return BattleLogic__getDamagelist_19833396(
           this,
           actor,
           target,
           v20,
           type,
           funcIndex,
           perlist,
           svtIndv,
           buffIndv,
           rarityList,
           IsIncludeIgnoreIndividuality,
           v23,
           isIgnoreIndivUnreleaseable,
           0LL,
           v25);
}


BattleActionData_o *__fastcall BattleLogic__getNoEffectObject(
        BattleLogic_o *this,
        int32_t targetId,
        int32_t funcIndex,
        DataVals_o *dataVals,
        bool isCommandSideEffect,
        System_String_o *uniqueText,
        const MethodInfo *method)
{
  BattleLogicFunction_o *logicFunction; // x0

  logicFunction = this->fields.logicFunction;
  if ( !logicFunction )
    sub_B170D4();
  return BattleLogicFunction__getNoEffectObject(
           logicFunction,
           targetId,
           funcIndex,
           dataVals,
           isCommandSideEffect,
           uniqueText,
           0LL,
           0LL);
}


// local variable allocation has failed, the output may be wrong!
int32_t __fastcall BattleLogic__getPerlist(
        BattleLogic_o *this,
        System_Int32_array *list,
        int32_t index,
        const MethodInfo *method)
{
  int32_t max_length; // w8

  if ( !list )
    sub_B170D4();
  max_length = list->max_length;
  if ( max_length <= index )
    return 0;
  if ( max_length <= (unsigned int)index )
  {
    sub_B17100(this, list, *(_QWORD *)&index);
    sub_B170A0();
  }
  return list->m_Items[index + 1];
}


int32_t __fastcall BattleLogic__getTargetId(BattleLogic_o *this, const MethodInfo *method)
{
  struct BattleData_o *data; // x8

  data = this->fields.data;
  if ( !data )
    sub_B170D4();
  return data->fields.globaltargetId;
}


// local variable allocation has failed, the output may be wrong!
int32_t __fastcall BattleLogic__getTargetIndex(BattleLogic_o *this, int32_t index, const MethodInfo *method)
{
  struct BattleData_o *data; // x8
  struct System_Int32_array *e_entryid; // x8
  int32_t max_length; // w9

  if ( (index & 0x80000000) != 0 )
    return -1;
  data = this->fields.data;
  if ( !data || (e_entryid = data->fields.e_entryid) == 0LL )
    sub_B170D4();
  max_length = e_entryid->max_length;
  if ( max_length <= index )
    return -1;
  if ( max_length <= (unsigned int)index )
  {
    sub_B17100(this, *(_QWORD *)&index, method);
    sub_B170A0();
  }
  return e_entryid->m_Items[index + 1];
}


int32_t __fastcall BattleLogic__getTurn(BattleLogic_o *this, const MethodInfo *method)
{
  struct BattleData_o *data; // x8

  data = this->fields.data;
  if ( !data )
    sub_B170D4();
  return data->fields.turnCount;
}


BattleCommandData_array *__fastcall BattleLogic__getTutorialCommandCards(BattleLogic_o *this, const MethodInfo *method)
{
  __int64 v2; // x2
  __int64 v3; // x3
  __int64 v4; // x4
  __int64 v6; // x1
  __int64 v7; // x1
  __int64 v8; // x1
  __int64 v9; // x1
  __int64 v10; // x1
  __int64 v11; // x1
  __int64 v12; // x1
  __int64 v13; // x1
  __int64 v14; // x1
  __int64 v15; // x1
  __int64 v16; // x1
  __int64 v17; // x1
  __int64 v18; // x1
  __int64 v19; // x1
  __int64 v20; // x1
  __int64 v21; // x1
  __int64 v22; // x1
  __int64 v23; // x1
  __int64 v24; // x1
  __int64 v25; // x1
  System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData__o *v26; // x19
  BattleData_o *data; // x0
  BattleServantData_array *FieldPlayerServantList; // x20
  __int64 v29; // x2
  __int64 v30; // x0
  __int64 v31; // x1
  __int64 v32; // x2
  unsigned int v33; // w8
  __int64 v34; // x21
  __int64 v35; // x22
  const MethodInfo *v36; // x3
  struct BattleData_o *v37; // x8
  int32_t tutorialId; // w9
  int32_t v39; // w21
  __int64 v40; // x2
  System_Array_o *v41; // x0
  __int64 *v42; // x8
  int32_t turnCount; // w22
  __int64 v44; // x2
  int32_t v45; // w22
  __int64 v46; // x2
  __int64 v47; // x2
  __int64 v48; // x0
  bool v49; // zf
  __int64 *v50; // x8
  __int64 v51; // x2
  __int64 v52; // x2
  __int64 v53; // x0
  __int64 v54; // x2
  unsigned int v55; // w8
  unsigned int v56; // w8
  __int64 v57; // x1
  __int64 v58; // x2
  int *v59; // x23
  int32_t *v60; // x24
  unsigned int v61; // w25
  __int64 v62; // x9
  EventMissionProgressRequest_Argument_ProgressData_o *CommandData; // x0
  System_RuntimeFieldHandle_o v65; // 0:w1.4
  System_RuntimeFieldHandle_o v66; // 0:w1.4
  System_RuntimeFieldHandle_o v67; // 0:w1.4
  System_RuntimeFieldHandle_o v68; // 0:w1.4

  if ( (byte_40F73E6 & 1) == 0 )
  {
    sub_B16FFC(&int___TypeInfo, method);
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleCommandData__Add__, v6);
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleCommandData__ToArray__, v7);
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleCommandData___ctor__, v8);
    sub_B16FFC(&System_Collections_Generic_List_BattleCommandData__TypeInfo, v9);
    sub_B16FFC(&BattleCommand_TYPE___TypeInfo, v10);
    sub_B16FFC(
      &Field__PrivateImplementationDetails__03AFB9095D050E297BBAB2F86D9B867378EA675884180C8984CE0DCE947F3635,
      v11);
    sub_B16FFC(
      &Field__PrivateImplementationDetails__03D72E3BADEBA10A02BA844757738D74C8C4F750BDE6A0B82B84810E66C3E76E,
      v12);
    sub_B16FFC(
      &Field__PrivateImplementationDetails__0B77DC554B4A81403D62BE25FB5404020AD451151D4203D544BF60E3FEDBD8AE,
      v13);
    sub_B16FFC(
      &Field__PrivateImplementationDetails__1EFCFACF218CB6A85C4B40F6560696AFD0746A8EE7BCA55334939F64EE2A72B2,
      v14);
    sub_B16FFC(
      &Field__PrivateImplementationDetails__2B6422A10D20EAAEA8A5B0DE6758D8BD4CE8E971E49E1977049AB55D8A59E4C5,
      v15);
    sub_B16FFC(
      &Field__PrivateImplementationDetails__32F4E65FF31993576FD1909893160B7D83CA53829F2E375F35A6830EC5A96B67,
      v16);
    sub_B16FFC(
      &Field__PrivateImplementationDetails__3C0F0CF17DE769C231EEED1A9FEF9F2298A877E3D9CD92BC03129AFE714A864A,
      v17);
    sub_B16FFC(
      &Field__PrivateImplementationDetails__4B9B7662998D3AA6727D1B8A04FB906DFE061F2FA89E12DC22C669C6A7910523,
      v18);
    sub_B16FFC(
      &Field__PrivateImplementationDetails__6824AB07E4F830DE2AA90A786BC04975A5D148B351FCB0D70BEE619DE0B1C8BB,
      v19);
    sub_B16FFC(
      &Field__PrivateImplementationDetails__77B8BC8866FA395E1B3119A3D706A56CFCF99CD70FDBF13E9D2E1F962A2C3BE3,
      v20);
    sub_B16FFC(
      &Field__PrivateImplementationDetails__8157EFB4E782C28B98B8B38AD858E7BD5E773EC15BB4566AECF423B57EF4C6C3,
      v21);
    sub_B16FFC(
      &Field__PrivateImplementationDetails__9B6DCF49C55B12DDB7174416153366D22EAEEF5AAB49B6CF6DDE297CB09C120D,
      v22);
    sub_B16FFC(
      &Field__PrivateImplementationDetails__B38D9F7CA89E243B5C0968C2A4F1D5E26B57DE03062043C7275A5FDB16EC355C,
      v23);
    sub_B16FFC(
      &Field__PrivateImplementationDetails__BCBCDB08BE470ACB0709943497217BD9F8C1FD9BD1382D577C01071F3EA79EC9,
      v24);
    sub_B16FFC(
      &Field__PrivateImplementationDetails__C4CE2A6DF4C385677ADA98AB57B27976034EFB84D4A6AF6DFFB9594491409991,
      v25);
    byte_40F73E6 = 1;
  }
  v26 = (System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData__o *)sub_B170CC(
                                                                                                  System_Collections_Generic_List_BattleCommandData__TypeInfo,
                                                                                                  method,
                                                                                                  v2,
                                                                                                  v3,
                                                                                                  v4);
  System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData____ctor(
    v26,
    (const MethodInfo_2F25014 *)Method_System_Collections_Generic_List_BattleCommandData___ctor__);
  data = this->fields.data;
  if ( !data
    || (FieldPlayerServantList = BattleData__getFieldPlayerServantList(data, 0LL),
        (v30 = sub_B17014(int___TypeInfo, 5LL, v29)) == 0) )
  {
LABEL_52:
    sub_B170D4();
  }
  v33 = *(_DWORD *)(v30 + 24);
  v34 = v30;
  if ( v33 <= 3 )
    goto LABEL_51;
  *(_DWORD *)(v30 + 44) = 1;
  if ( v33 == 4 )
    goto LABEL_51;
  *(_DWORD *)(v30 + 48) = 2;
  v35 = sub_B17014(BattleCommand_TYPE___TypeInfo, 5LL, v32);
  v65.fields.value = Field__PrivateImplementationDetails__6824AB07E4F830DE2AA90A786BC04975A5D148B351FCB0D70BEE619DE0B1C8BB;
  System_Runtime_CompilerServices_RuntimeHelpers__InitializeArray_42629164((System_Array_o *)v35, v65, 0LL);
  v37 = this->fields.data;
  if ( !v37 )
    goto LABEL_52;
  tutorialId = v37->fields.tutorialId;
  switch ( tutorialId )
  {
    case 3:
      if ( !v37->fields.wavecount )
      {
        v34 = sub_B17014(int___TypeInfo, 5LL, v32);
        v41 = (System_Array_o *)sub_B17014(BattleCommand_TYPE___TypeInfo, 5LL, v51);
        v42 = &Field__PrivateImplementationDetails__1EFCFACF218CB6A85C4B40F6560696AFD0746A8EE7BCA55334939F64EE2A72B2;
        goto LABEL_39;
      }
      turnCount = v37->fields.turnCount;
      if ( turnCount == 1 )
      {
        v34 = sub_B17014(int___TypeInfo, 5LL, v32);
        v41 = (System_Array_o *)sub_B17014(BattleCommand_TYPE___TypeInfo, 5LL, v44);
        v42 = &Field__PrivateImplementationDetails__4B9B7662998D3AA6727D1B8A04FB906DFE061F2FA89E12DC22C669C6A7910523;
        goto LABEL_39;
      }
      v34 = sub_B17014(int___TypeInfo, 5LL, v32);
      v53 = sub_B17014(BattleCommand_TYPE___TypeInfo, 5LL, v52);
      v49 = turnCount == 2;
      v35 = v53;
      if ( v49 )
      {
LABEL_26:
        v50 = &Field__PrivateImplementationDetails__C4CE2A6DF4C385677ADA98AB57B27976034EFB84D4A6AF6DFFB9594491409991;
        break;
      }
      v50 = &Field__PrivateImplementationDetails__32F4E65FF31993576FD1909893160B7D83CA53829F2E375F35A6830EC5A96B67;
      break;
    case 2:
      v45 = v37->fields.turnCount;
      if ( v45 == 1 )
      {
        v34 = sub_B17014(int___TypeInfo, 5LL, v32);
        v41 = (System_Array_o *)sub_B17014(BattleCommand_TYPE___TypeInfo, 5LL, v46);
        v42 = &Field__PrivateImplementationDetails__B38D9F7CA89E243B5C0968C2A4F1D5E26B57DE03062043C7275A5FDB16EC355C;
        goto LABEL_39;
      }
      v34 = sub_B17014(int___TypeInfo, 5LL, v32);
      v48 = sub_B17014(BattleCommand_TYPE___TypeInfo, 5LL, v47);
      v49 = v45 == 2;
      v35 = v48;
      if ( !v49 )
        goto LABEL_26;
      v50 = &Field__PrivateImplementationDetails__2B6422A10D20EAAEA8A5B0DE6758D8BD4CE8E971E49E1977049AB55D8A59E4C5;
      break;
    case 1:
      v39 = v37->fields.turnCount;
      switch ( v39 )
      {
        case 3:
          v34 = sub_B17014(int___TypeInfo, 5LL, v32);
          v67.fields.value = Field__PrivateImplementationDetails__9B6DCF49C55B12DDB7174416153366D22EAEEF5AAB49B6CF6DDE297CB09C120D;
          System_Runtime_CompilerServices_RuntimeHelpers__InitializeArray_42629164((System_Array_o *)v34, v67, 0LL);
          v41 = (System_Array_o *)sub_B17014(BattleCommand_TYPE___TypeInfo, 5LL, v54);
          v42 = &Field__PrivateImplementationDetails__77B8BC8866FA395E1B3119A3D706A56CFCF99CD70FDBF13E9D2E1F962A2C3BE3;
          goto LABEL_39;
        case 2:
          v30 = sub_B17014(int___TypeInfo, 5LL, v32);
          if ( !v30 )
            goto LABEL_52;
          v55 = *(_DWORD *)(v30 + 24);
          v34 = v30;
          if ( v55 > 3 )
          {
            *(_DWORD *)(v30 + 44) = 1;
            if ( v55 != 4 )
            {
              *(_DWORD *)(v30 + 48) = 2;
              v41 = (System_Array_o *)sub_B17014(BattleCommand_TYPE___TypeInfo, 5LL, v32);
              v42 = &Field__PrivateImplementationDetails__03D72E3BADEBA10A02BA844757738D74C8C4F750BDE6A0B82B84810E66C3E76E;
              goto LABEL_39;
            }
          }
          break;
        case 1:
          v34 = sub_B17014(int___TypeInfo, 5LL, v32);
          v66.fields.value = Field__PrivateImplementationDetails__0B77DC554B4A81403D62BE25FB5404020AD451151D4203D544BF60E3FEDBD8AE;
          System_Runtime_CompilerServices_RuntimeHelpers__InitializeArray_42629164((System_Array_o *)v34, v66, 0LL);
          v41 = (System_Array_o *)sub_B17014(BattleCommand_TYPE___TypeInfo, 5LL, v40);
          v42 = &Field__PrivateImplementationDetails__BCBCDB08BE470ACB0709943497217BD9F8C1FD9BD1382D577C01071F3EA79EC9;
LABEL_39:
          v57 = *v42;
          v35 = (__int64)v41;
          goto LABEL_40;
        default:
          v30 = sub_B17014(int___TypeInfo, 5LL, v32);
          v49 = v39 == 4;
          v34 = v30;
          if ( !v49 )
          {
            v68.fields.value = Field__PrivateImplementationDetails__3C0F0CF17DE769C231EEED1A9FEF9F2298A877E3D9CD92BC03129AFE714A864A;
            System_Runtime_CompilerServices_RuntimeHelpers__InitializeArray_42629164((System_Array_o *)v30, v68, 0LL);
            v41 = (System_Array_o *)sub_B17014(BattleCommand_TYPE___TypeInfo, 5LL, v58);
            v42 = &Field__PrivateImplementationDetails__8157EFB4E782C28B98B8B38AD858E7BD5E773EC15BB4566AECF423B57EF4C6C3;
            goto LABEL_39;
          }
          if ( !v30 )
            goto LABEL_52;
          v56 = *(_DWORD *)(v30 + 24);
          if ( v56 > 3 )
          {
            *(_DWORD *)(v30 + 44) = 1;
            if ( v56 != 4 )
            {
              *(_DWORD *)(v30 + 48) = 2;
              v41 = (System_Array_o *)sub_B17014(BattleCommand_TYPE___TypeInfo, 5LL, v32);
              v42 = &Field__PrivateImplementationDetails__03AFB9095D050E297BBAB2F86D9B867378EA675884180C8984CE0DCE947F3635;
              goto LABEL_39;
            }
          }
          break;
      }
LABEL_51:
      sub_B17100(v30, v31, v32);
      sub_B170A0();
    default:
      goto LABEL_41;
  }
  v57 = *v50;
  v41 = (System_Array_o *)v35;
LABEL_40:
  System_Runtime_CompilerServices_RuntimeHelpers__InitializeArray_42629164(v41, (System_RuntimeFieldHandle_o)v57, 0LL);
LABEL_41:
  if ( !v34 )
    goto LABEL_52;
  v59 = (int *)(v34 + 32);
  v60 = (int32_t *)(v35 + 32);
  v61 = -1;
  do
  {
    if ( v61 + 1 >= *(_DWORD *)(v34 + 24) )
      goto LABEL_51;
    if ( !FieldPlayerServantList )
      goto LABEL_52;
    v62 = *v59;
    if ( (unsigned int)v62 >= FieldPlayerServantList->max_length )
      goto LABEL_51;
    if ( !v35 )
      goto LABEL_52;
    if ( v61 + 1 >= *(_DWORD *)(v35 + 24) )
      goto LABEL_51;
    CommandData = (EventMissionProgressRequest_Argument_ProgressData_o *)BattleLogic__getCommandData(
                                                                           (BattleLogic_o *)v30,
                                                                           FieldPlayerServantList->m_Items[v62],
                                                                           *v60,
                                                                           v36);
    if ( !v26 )
      goto LABEL_52;
    System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData___Add(
      v26,
      CommandData,
      (const MethodInfo_2F25CD8 *)Method_System_Collections_Generic_List_BattleCommandData__Add__);
    ++v61;
    ++v59;
    ++v60;
  }
  while ( v61 < 4 );
  return (BattleCommandData_array *)System_Collections_Generic_List_WarBoardUiData_SaveData___ToArray(
                                      (System_Collections_Generic_List_WarBoardUiData_SaveData__o *)v26,
                                      (const MethodInfo_2F27E24 *)Method_System_Collections_Generic_List_BattleCommandData__ToArray__);
}


int32_t __fastcall BattleLogic__getTutorialId(BattleLogic_o *this, const MethodInfo *method)
{
  struct BattleData_o *data; // x8

  data = this->fields.data;
  if ( !data )
    sub_B170D4();
  return data->fields.tutorialId;
}


int32_t __fastcall BattleLogic__getWave(BattleLogic_o *this, const MethodInfo *method)
{
  struct BattleData_o *data; // x8

  data = this->fields.data;
  if ( !data )
    sub_B170D4();
  return data->fields.wavecount;
}


BattleAttackManager_o *__fastcall BattleLogic__get_AtkManager(BattleLogic_o *this, const MethodInfo *method)
{
  struct BattleData_o *data; // x8

  data = this->fields.data;
  if ( !data )
    sub_B170D4();
  return data->fields.battleAtkManager;
}


BaseBattleEvent_o *__fastcall BattleLogic__get_BattleEvent(BattleLogic_o *this, const MethodInfo *method)
{
  struct BattleData_o *data; // x8

  data = this->fields.data;
  if ( !data )
    sub_B170D4();
  return data->fields.battleEvent;
}


System_String_o *__fastcall BattleLogic__get_CurrentBgmName(BattleLogic_o *this, const MethodInfo *method)
{
  return this->fields._CurrentBgmName;
}


BattleLogic_o *__fastcall BattleLogic__get_Instance(const MethodInfo *method)
{
  __int64 v1; // x1
  __int64 v2; // x1
  __int64 v3; // x1
  __int64 v4; // x1
  BattleLogic_c *v5; // x0
  UnityEngine_Object_o *instance; // x19
  intptr_t v7; // w19
  System_Type_o *TypeFromHandle; // x19
  UnityEngine_Object_o *ObjectOfType; // x0
  BattleLogic_c *v10; // x1
  UnityEngine_Object_o *v11; // x19
  struct BattleLogic_StaticFields *static_fields; // x0
  __int64 v13; // x9
  BattleLogic_c *v14; // x0
  BattleLogic_o *result; // x0
  const MethodInfo *v16; // x0
  System_RuntimeTypeHandle_o v17; // 0:w0.4

  if ( (byte_40F7354 & 1) == 0 )
  {
    sub_B16FFC(&BattleLogic_var, v1);
    sub_B16FFC(&BattleLogic_TypeInfo, v2);
    sub_B16FFC(&UnityEngine_Object_TypeInfo, v3);
    sub_B16FFC(&System_Type_TypeInfo, v4);
    byte_40F7354 = 1;
  }
  v5 = BattleLogic_TypeInfo;
  if ( (BYTE3(BattleLogic_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0 && !BattleLogic_TypeInfo->_2.cctor_finished )
  {
    j_il2cpp_runtime_class_init_0(BattleLogic_TypeInfo);
    v5 = BattleLogic_TypeInfo;
  }
  instance = (UnityEngine_Object_o *)v5->static_fields->instance;
  if ( (BYTE3(UnityEngine_Object_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0
    && !UnityEngine_Object_TypeInfo->_2.cctor_finished )
  {
    j_il2cpp_runtime_class_init_0(UnityEngine_Object_TypeInfo);
  }
  if ( UnityEngine_Object__op_Equality(instance, 0LL, 0LL) )
  {
    v7 = (int)BattleLogic_var;
    if ( (BYTE3(System_Type_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0 && !System_Type_TypeInfo->_2.cctor_finished )
      j_il2cpp_runtime_class_init_0(System_Type_TypeInfo);
    v17.fields.value = v7;
    TypeFromHandle = System_Type__GetTypeFromHandle(v17, 0LL);
    if ( (BYTE3(UnityEngine_Object_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0
      && !UnityEngine_Object_TypeInfo->_2.cctor_finished )
    {
      j_il2cpp_runtime_class_init_0(UnityEngine_Object_TypeInfo);
    }
    ObjectOfType = UnityEngine_Object__FindObjectOfType(TypeFromHandle, 0LL);
    v10 = BattleLogic_TypeInfo;
    v11 = ObjectOfType;
    if ( (BYTE3(BattleLogic_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0 && !BattleLogic_TypeInfo->_2.cctor_finished )
    {
      j_il2cpp_runtime_class_init_0(BattleLogic_TypeInfo);
      v10 = BattleLogic_TypeInfo;
    }
    static_fields = v10->static_fields;
    if ( v11 )
    {
      v13 = *(&v10->_2.bitflags2 + 1);
      if ( *(&v11->klass->_2.bitflags2 + 1) < (unsigned int)v13
        || (BattleLogic_c *)v11->klass->_2.typeHierarchy[v13 - 1] != v10 )
      {
        v16 = (const MethodInfo *)sub_B173C8(v11);
        BattleLogic__DoUpdateFieldBuff(v16);
        return result;
      }
    }
    static_fields->instance = (struct BattleLogic_o *)v11;
    sub_B16F98(static_fields, v11);
    UnityEngine_Object__op_Equality((UnityEngine_Object_o *)BattleLogic_TypeInfo->static_fields->instance, 0LL, 0LL);
  }
  v14 = BattleLogic_TypeInfo;
  if ( (BYTE3(BattleLogic_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0 && !BattleLogic_TypeInfo->_2.cctor_finished )
  {
    j_il2cpp_runtime_class_init_0(BattleLogic_TypeInfo);
    v14 = BattleLogic_TypeInfo;
  }
  return v14->static_fields->instance;
}


BattleLogicEnemyAi_o *__fastcall BattleLogic__get_LogicEnemeyAi(BattleLogic_o *this, const MethodInfo *method)
{
  return this->fields.logicEnemyAi;
}


BattleLogicNpcAi_o *__fastcall BattleLogic__get_LogicNpcAi(BattleLogic_o *this, const MethodInfo *method)
{
  return this->fields.logicNpcAi;
}


BattleLogicPlayerAi_o *__fastcall BattleLogic__get_LogicPlayerAi(BattleLogic_o *this, const MethodInfo *method)
{
  return this->fields.logicPlayerAi;
}


BattleLogicReaction_o *__fastcall BattleLogic__get_LogicReaction(BattleLogic_o *this, const MethodInfo *method)
{
  return this->fields.logicReaction;
}


BattleLogicTarget_o *__fastcall BattleLogic__get_LogicTarget(BattleLogic_o *this, const MethodInfo *method)
{
  return this->fields.logictarget;
}


BattleMotionSkipManager_o *__fastcall BattleLogic__get_MotionSkipManager(BattleLogic_o *this, const MethodInfo *method)
{
  BattlePerformance_o *perf; // x0

  perf = this->fields.perf;
  if ( !perf )
    sub_B170D4();
  return BattlePerformance__get_MotionSkipManager(perf, 0LL);
}


ParseBattleMessage_o *__fastcall BattleLogic__get_ParseBattleMsg(BattleLogic_o *this, const MethodInfo *method)
{
  __int64 v2; // x2
  __int64 v3; // x3
  __int64 v4; // x4
  ParseBattleMessage_o *parseBattleMsg; // x21

  if ( (byte_40F7356 & 1) == 0 )
  {
    sub_B16FFC(&ParseBattleMessage_TypeInfo, method);
    byte_40F7356 = 1;
  }
  parseBattleMsg = this->fields._parseBattleMsg;
  if ( !parseBattleMsg )
  {
    parseBattleMsg = (ParseBattleMessage_o *)sub_B170CC(ParseBattleMessage_TypeInfo, method, v2, v3, v4);
    ParseBattleMessage___ctor(parseBattleMsg, this, 0LL);
    this->fields._parseBattleMsg = parseBattleMsg;
    sub_B16F98(&this->fields._parseBattleMsg, parseBattleMsg);
  }
  return parseBattleMsg;
}


void __fastcall BattleLogic__initCommandBattle(BattleLogic_o *this, System_String_o *endproc, const MethodInfo *method)
{
  __int64 v4; // x1
  struct System_Collections_Generic_LinkedList_BattleLogicTask__o *list_logic; // x0
  BattleLogicEnemyAi_o *logicEnemyAi; // x0
  BattleData_o *data; // x0
  BattlePerformance_o *perf; // x0
  BattlePerformance_o *v9; // x0
  struct BattlePerformance_o *v10; // x8
  BattlePerformance_o *v11; // x0
  BattleMotionSkipManager_o *MotionSkipManager; // x0
  struct BattleData_o *v13; // x8
  BattleAttackManager_o *battleAtkManager; // x0
  const MethodInfo *v15; // x1
  struct BattleData_o *v16; // x8
  BattlePerformance_o *v17; // x0
  PlayMakerFSM_o *fsm; // x0

  if ( (byte_40F737E & 1) == 0 )
  {
    sub_B16FFC(&Method_System_Collections_Generic_LinkedList_BattleLogicTask__Clear__, endproc);
    sub_B16FFC(&StringLiteral_5481, v4);
    byte_40F737E = 1;
  }
  list_logic = this->fields.list_logic;
  this->fields.logicindex = 0;
  if ( !list_logic )
    goto LABEL_19;
  System_Collections_Generic_LinkedList_WebOperation___Clear(
    (System_Collections_Generic_LinkedList_WebOperation__o *)list_logic,
    (const MethodInfo_23FD818 *)Method_System_Collections_Generic_LinkedList_BattleLogicTask__Clear__);
  logicEnemyAi = this->fields.logicEnemyAi;
  if ( !logicEnemyAi )
    goto LABEL_19;
  BattleLogicEnemyAi__resetAct(logicEnemyAi, 0LL);
  data = this->fields.data;
  if ( !data )
    goto LABEL_19;
  BattleData__setInitCommandBattle(data, 0LL);
  perf = this->fields.perf;
  if ( !perf )
    goto LABEL_19;
  BattlePerformance__setInitpos(perf, 0LL);
  v9 = this->fields.perf;
  if ( !v9 )
    goto LABEL_19;
  BattlePerformance__setPositionModeBattle(v9, 0LL);
  v10 = this->fields.perf;
  if ( !v10 )
    goto LABEL_19;
  v10->fields.isTargetChange = 1;
  v11 = this->fields.perf;
  if ( !v11 )
    goto LABEL_19;
  MotionSkipManager = BattlePerformance__get_MotionSkipManager(v11, 0LL);
  if ( !MotionSkipManager )
    goto LABEL_19;
  BattleMotionSkipManager__ReleaseMotionSkip(MotionSkipManager, 0LL);
  v13 = this->fields.data;
  if ( !v13 )
    goto LABEL_19;
  battleAtkManager = v13->fields.battleAtkManager;
  if ( !battleAtkManager )
    goto LABEL_19;
  if ( BattleAttackManager__get_IsTurnStart(battleAtkManager, 0LL) )
    BattleLogic__InitBuffProgress(this, v15);
  v16 = this->fields.data;
  if ( !v16
    || (v17 = this->fields.perf) == 0LL
    || (BattlePerformance__SetTimeScale(v17, (float)v16->fields.systemflg_acceleration, 0LL),
        (fsm = this->fields.fsm) == 0LL) )
  {
LABEL_19:
    sub_B170D4();
  }
  PlayMakerFSM__SendEvent(fsm, (System_String_o *)StringLiteral_5481, 0LL);
}


void __fastcall BattleLogic__initNexBaseData(BattleLogic_o *this, bool flg, const MethodInfo *method)
{
  BattleData_o *data; // x0
  BattleServantData_array *FieldPlayerServantList; // x0
  const MethodInfo *v7; // x1
  __int64 v8; // x2
  __int64 v9; // x8
  BattleServantData_array *v10; // x21
  unsigned __int64 v11; // x22
  struct BattleData_o *v12; // x8
  struct BattleData_o *v13; // x0
  struct BattleCommandData_array *draw_commandlist; // x8
  BattleData_o *v15; // x0
  BattleData_o *v16; // x0
  const MethodInfo *v17; // x1
  struct BattleData_o *v18; // x8
  struct BattleAttackManager_o *battleAtkManager; // x0
  struct BattleData_o *v20; // x8
  struct BattleData_o *v21; // x8

  data = this->fields.data;
  if ( !data )
    goto LABEL_25;
  FieldPlayerServantList = BattleData__getFieldPlayerServantList(data, 0LL);
  if ( !FieldPlayerServantList )
    goto LABEL_25;
  v9 = *(_QWORD *)&FieldPlayerServantList->max_length;
  v10 = FieldPlayerServantList;
  if ( (int)v9 >= 1 )
  {
    v11 = 0LL;
    do
    {
      if ( v11 >= (unsigned int)v9 )
      {
        sub_B17100(FieldPlayerServantList, v7, v8);
        sub_B170A0();
      }
      FieldPlayerServantList = (BattleServantData_array *)v10->m_Items[v11];
      if ( FieldPlayerServantList )
        BattleServantData__ResetSelectedTreasureDevice((BattleServantData_o *)FieldPlayerServantList, 0LL);
      LODWORD(v9) = v10->max_length;
      ++v11;
    }
    while ( (__int64)v11 < (int)v9 );
  }
  v12 = this->fields.data;
  if ( !v12 )
    goto LABEL_25;
  if ( v12->fields.initturn != 1 )
  {
    ++v12->fields.turnCount;
    v15 = this->fields.data;
    if ( v15 )
    {
      BattleData__SetUsedTurn(v15, 0LL);
      v16 = this->fields.data;
      if ( v16 )
      {
        BattleData__setProgresslist(v16, flg, 0LL);
        BattleLogic__drawCommand(this, v17);
        goto LABEL_19;
      }
    }
LABEL_25:
    sub_B170D4();
  }
  v12->fields.initturn = 0;
  v13 = this->fields.data;
  if ( !v13 )
    goto LABEL_25;
  draw_commandlist = v13->fields.draw_commandlist;
  if ( !draw_commandlist || !*(_QWORD *)&draw_commandlist->max_length )
  {
    BattleLogic__drawCommand(this, v7);
    v13 = this->fields.data;
    if ( !v13 )
      goto LABEL_25;
  }
  BattleData__setProgresslist(v13, flg, 0LL);
LABEL_19:
  v18 = this->fields.data;
  if ( !v18 )
    goto LABEL_25;
  battleAtkManager = v18->fields.battleAtkManager;
  if ( !battleAtkManager )
    goto LABEL_25;
  ((void (__fastcall *)(struct BattleAttackManager_o *, Il2CppMethodPointer))battleAtkManager->klass->vtable._7_InitTurn.method)(
    battleAtkManager,
    battleAtkManager->klass->vtable._8_GetSaveData.methodPtr);
  v20 = this->fields.data;
  if ( !v20 )
    goto LABEL_25;
  v20->fields.playerSkillCount = 0;
  v21 = this->fields.data;
  if ( !v21 )
    goto LABEL_25;
  v21->fields.playerMasterSkillCount = 0;
}


void __fastcall BattleLogic__initNextTurnData(BattleLogic_o *this, const MethodInfo *method)
{
  const MethodInfo *v2; // x2
  struct BattleData_o *data; // x8
  struct BattleAttackManager_o *battleAtkManager; // x8

  data = this->fields.data;
  if ( !data || (battleAtkManager = data->fields.battleAtkManager) == 0LL )
    sub_B170D4();
  if ( battleAtkManager->fields._IsTurnEnd_k__BackingField )
    BattleLogic__initNexBaseData(this, 0, v2);
}


void __fastcall BattleLogic__initNextWaveData(BattleLogic_o *this, const MethodInfo *method)
{
  const MethodInfo *v2; // x2
  const MethodInfo *v4; // x2
  struct BattleData_o *data; // x8
  struct BaseBattleEvent_o *battleEvent; // x0

  BattleLogic__initNexBaseData(this, 1, v2);
  BattleLogic__ChangePhase(this, 0, v4);
  data = this->fields.data;
  if ( !data || (battleEvent = data->fields.battleEvent) == 0LL )
    sub_B170D4();
  ((void (__fastcall *)(struct BaseBattleEvent_o *, Il2CppMethodPointer))battleEvent->klass->vtable._7_InitWave.method)(
    battleEvent,
    battleEvent->klass->vtable._8_InitBGData.methodPtr);
}


void __fastcall BattleLogic__initQuest(BattleLogic_o *this, System_String_o *endproc, const MethodInfo *method)
{
  __int64 v5; // x1
  __int64 v6; // x1
  __int64 v7; // x1
  __int64 v8; // x1
  __int64 v9; // x1
  __int64 v10; // x1
  __int64 v11; // x1
  __int64 v12; // x1
  __int64 v13; // x1
  __int64 v14; // x1
  DataMasterBase_UserGameMaster__UserGameEntity__long__o *Master_WarQuestSelectionMaster; // x0
  BattlePerformance_o *perf; // x0
  BattleEntity_o *v17; // x21
  __int64 v18; // x1
  __int64 v19; // x2
  __int64 v20; // x3
  __int64 v21; // x4
  BattleEventTutorial_o *v22; // x22
  struct BattleData_o *data; // x8
  struct BattleData_o *v24; // x8
  BattleData_o *v25; // x0
  const MethodInfo *v26; // x2
  struct BattleData_o *v27; // x9
  struct BattleData_o *v28; // x9
  PlayMakerFSM_o *fsm; // x0
  CommonUI_o *Instance; // x20
  System_String_o *v31; // x21
  System_String_o *v32; // x22
  __int64 v33; // x1
  __int64 v34; // x2
  __int64 v35; // x3
  __int64 v36; // x4
  ErrorDialog_ClickDelegate_o *v37; // x23
  System_Collections_IEnumerator_o *inited; // x0
  UserGameEntity_o *entity; // [xsp+8h] [xbp-28h] BYREF

  if ( (byte_40F73F3 & 1) == 0 )
  {
    sub_B16FFC(&BattleEventTutorial_TypeInfo, endproc);
    sub_B16FFC(&Method_BattleLogic_callBackNoEntity__, v5);
    sub_B16FFC(&ErrorDialog_ClickDelegate_TypeInfo, v6);
    sub_B16FFC(&Method_DataManager_GetMaster_BattleMaster___, v7);
    sub_B16FFC(&DataManager_TypeInfo, v8);
    sub_B16FFC(&Method_DataMasterBase_BattleMaster__BattleEntity__long__TryGetSingleEntity__, v9);
    sub_B16FFC(&LocalizationManager_TypeInfo, v10);
    sub_B16FFC(&Method_SingletonMonoBehaviour_CommonUI__get_Instance__, v11);
    sub_B16FFC(&StringLiteral_2455, v12);
    sub_B16FFC(&StringLiteral_7419, v13);
    sub_B16FFC(&StringLiteral_2454, v14);
    byte_40F73F3 = 1;
  }
  entity = 0LL;
  if ( (BYTE3(DataManager_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0 && !DataManager_TypeInfo->_2.cctor_finished )
    j_il2cpp_runtime_class_init_0(DataManager_TypeInfo);
  Master_WarQuestSelectionMaster = (DataMasterBase_UserGameMaster__UserGameEntity__long__o *)DataManager__GetMaster_WarQuestSelectionMaster_((const MethodInfo_18C3224 *)Method_DataManager_GetMaster_BattleMaster___);
  if ( !Master_WarQuestSelectionMaster )
    goto LABEL_23;
  if ( DataMasterBase_UserGameMaster__UserGameEntity__long___TryGetSingleEntity(
         Master_WarQuestSelectionMaster,
         &entity,
         (const MethodInfo_266F698 *)Method_DataMasterBase_BattleMaster__BattleEntity__long__TryGetSingleEntity__) )
  {
    perf = this->fields.perf;
    if ( !perf )
      goto LABEL_23;
    BattlePerformance__SetActiveTutorialDialogMask(perf, 1, 0LL);
    v17 = (BattleEntity_o *)entity;
    v22 = (BattleEventTutorial_o *)sub_B170CC(BattleEventTutorial_TypeInfo, v18, v19, v20, v21);
    BattleEventTutorial___ctor(v22, v17, 0LL);
    this->fields.eventTutorial = v22;
    sub_B16F98(&this->fields.eventTutorial, v22);
    data = this->fields.data;
    if ( !data )
      goto LABEL_23;
    data->fields.flg_resumebattle = 0;
    v24 = this->fields.data;
    if ( !v24 )
      goto LABEL_23;
    v24->fields.isResumeWaveStart = 0;
    v25 = this->fields.data;
    if ( !v25 )
      goto LABEL_23;
    if ( BattleData__checkTurnData(v25, 0LL) )
    {
      v27 = this->fields.data;
      if ( v27 )
      {
        v27->fields.flg_resumebattle = 1;
        v28 = this->fields.data;
        if ( v28 )
        {
          v28->fields.isResumeWaveStart = 1;
          fsm = this->fields.fsm;
          if ( fsm )
          {
            PlayMakerFSM__SendEvent(fsm, (System_String_o *)StringLiteral_7419, 0LL);
            return;
          }
        }
      }
LABEL_23:
      sub_B170D4();
    }
    inited = BattleLogic__coroutineInitQuest(this, endproc, v26);
    UnityEngine_MonoBehaviour__StartCoroutine_34804316((UnityEngine_MonoBehaviour_o *)this, inited, 0LL);
  }
  else
  {
    Instance = (CommonUI_o *)SingletonMonoBehaviour_WebViewManager___get_Instance((const MethodInfo_2A54F38 *)Method_SingletonMonoBehaviour_CommonUI__get_Instance__);
    if ( (BYTE3(LocalizationManager_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0
      && !LocalizationManager_TypeInfo->_2.cctor_finished )
    {
      j_il2cpp_runtime_class_init_0(LocalizationManager_TypeInfo);
    }
    v31 = LocalizationManager__Get((System_String_o *)StringLiteral_2455, 0LL);
    v32 = LocalizationManager__Get((System_String_o *)StringLiteral_2454, 0LL);
    v37 = (ErrorDialog_ClickDelegate_o *)sub_B170CC(ErrorDialog_ClickDelegate_TypeInfo, v33, v34, v35, v36);
    ErrorDialog_ClickDelegate___ctor(v37, (Il2CppObject *)this, Method_BattleLogic_callBackNoEntity__, 0LL);
    if ( !Instance )
      goto LABEL_23;
    CommonUI__OpenErrorDialog(Instance, v31, v32, v37, 1, 0LL);
  }
}


bool __fastcall BattleLogic__isNoble(BattleLogic_o *this, int32_t inType, const MethodInfo *method)
{
  return inType != 0;
}


bool __fastcall BattleLogic__isTimeAcceleration(BattleLogic_o *this, const MethodInfo *method)
{
  struct BattleData_o *data; // x8
  int systemflg_acceleration; // s8

  data = this->fields.data;
  if ( !data )
    sub_B170D4();
  systemflg_acceleration = data->fields.systemflg_acceleration;
  return UnityEngine_Time__get_timeScale(0LL) < (float)systemflg_acceleration;
}


bool __fastcall BattleLogic__isTimingUseSkill(BattleLogic_o *this, const MethodInfo *method)
{
  __int64 v3; // x1
  PlayMakerFSM_o *fsm; // x0
  System_String_o *ActiveStateName; // x0
  System_String_o *v6; // x19
  struct BattleData_o *data; // x8

  if ( (byte_40F73C0 & 1) == 0 )
  {
    sub_B16FFC(&StringLiteral_23099, method);
    sub_B16FFC(&StringLiteral_6567, v3);
    byte_40F73C0 = 1;
  }
  fsm = this->fields.fsm;
  if ( !fsm )
    goto LABEL_15;
  ActiveStateName = PlayMakerFSM__get_ActiveStateName(fsm, 0LL);
  if ( !this->fields.perf )
    goto LABEL_15;
  v6 = ActiveStateName;
  if ( BattlePerformance__IsStep4FieldMotion(this->fields.perf, 0LL) )
    return 0;
  data = this->fields.data;
  if ( !data )
    goto LABEL_15;
  if ( data->fields.tutorialId == 3 && data->fields.wavecount == 1 && data->fields.turnCount == 1 )
    return 0;
  if ( !v6 )
LABEL_15:
    sub_B170D4();
  return System_String__Equals_43731072(v6, (System_String_o *)StringLiteral_23099, 0LL)
      || System_String__Equals_43731072(v6, (System_String_o *)StringLiteral_6567, 0LL);
}


bool __fastcall BattleLogic__isTutorial(BattleLogic_o *this, const MethodInfo *method)
{
  BattleData_o *data; // x0

  data = this->fields.data;
  if ( !data )
    sub_B170D4();
  return BattleData__isTutorial(data, 0LL);
}


bool __fastcall BattleLogic__isTutorialMasterStatus(BattleLogic_o *this, const MethodInfo *method)
{
  BattleData_o *data; // x0
  struct BattleData_o *v4; // x8
  int32_t tutorialId; // w9

  data = this->fields.data;
  if ( !data )
    goto LABEL_12;
  if ( !BattleData__isTutorial(data, 0LL) )
    return 0;
  v4 = this->fields.data;
  if ( !v4 )
LABEL_12:
    sub_B170D4();
  tutorialId = v4->fields.tutorialId;
  if ( tutorialId == 3 )
  {
    if ( v4->fields.wavecount == 1 && v4->fields.turnCount == 1 )
      return 1;
  }
  else if ( tutorialId != 2 || v4->fields.turnCount != 3 )
  {
    return tutorialId != 4;
  }
  return 0;
}


void __fastcall BattleLogic__loadBgmName(BattleLogic_o *this, System_String_o *bgmName, const MethodInfo *method)
{
  System_String_o *BattleBgmName; // x20
  __int64 v5; // x1
  PlayMakerFSM_o *fsm; // x0
  HutongGames_PlayMaker_Fsm_o *v7; // x0
  HutongGames_PlayMaker_FsmString_o *FsmString; // x0
  struct BattlePerformance_o *perf; // x8
  FieldMotionManager_o *fmManager_k__BackingField; // x0

  BattleBgmName = bgmName;
  if ( (byte_40F735C & 1) == 0 )
  {
    sub_B16FFC(&Method_FieldMotionManager_SetVariables_string___, bgmName);
    sub_B16FFC(&StringLiteral_2798, v5);
    byte_40F735C = 1;
  }
  if ( !BattleBgmName )
    BattleBgmName = BattleLogic__getBattleBgmName(this, (const MethodInfo *)bgmName);
  fsm = this->fields.fsm;
  if ( !fsm
    || (v7 = PlayMakerFSM__get_Fsm(fsm, 0LL)) == 0LL
    || (FsmString = HutongGames_PlayMaker_Fsm__GetFsmString(v7, (System_String_o *)StringLiteral_2798, 0LL)) == 0LL
    || (FsmString->fields.value = BattleBgmName,
        sub_B16F98(&FsmString->fields.value, BattleBgmName),
        (perf = this->fields.perf) == 0LL)
    || (fmManager_k__BackingField = perf->fields._fmManager_k__BackingField) == 0LL )
  {
    sub_B170D4();
  }
  FieldMotionManager__SetVariables_string_(
    fmManager_k__BackingField,
    (System_String_o *)StringLiteral_2798,
    BattleBgmName,
    (const MethodInfo_19D0834 *)Method_FieldMotionManager_SetVariables_string___);
  this->fields._CurrentBgmName = BattleBgmName;
  sub_B16F98(&this->fields._CurrentBgmName, BattleBgmName);
}


BattleLogicTask_array *__fastcall BattleLogic__loadImmediateEntryMember(BattleLogic_o *this, const MethodInfo *method)
{
  __int64 v2; // x2
  __int64 v3; // x3
  __int64 v4; // x4
  __int64 v5; // x1
  __int64 v6; // x1
  __int64 v7; // x1
  __int64 v8; // x1
  System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData__o *v9; // x19
  __int64 v10; // x1
  __int64 v11; // x2
  __int64 v12; // x3
  __int64 v13; // x4
  BattleLogicTask_o *v14; // x20

  if ( (byte_40F7365 & 1) == 0 )
  {
    sub_B16FFC(&BattleLogicTask_TypeInfo, method);
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleLogicTask__Add__, v5);
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleLogicTask__ToArray__, v6);
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleLogicTask___ctor__, v7);
    sub_B16FFC(&System_Collections_Generic_List_BattleLogicTask__TypeInfo, v8);
    byte_40F7365 = 1;
  }
  v9 = (System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData__o *)sub_B170CC(
                                                                                                 System_Collections_Generic_List_BattleLogicTask__TypeInfo,
                                                                                                 method,
                                                                                                 v2,
                                                                                                 v3,
                                                                                                 v4);
  System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData____ctor(
    v9,
    (const MethodInfo_2F25014 *)Method_System_Collections_Generic_List_BattleLogicTask___ctor__);
  v14 = (BattleLogicTask_o *)sub_B170CC(BattleLogicTask_TypeInfo, v10, v11, v12, v13);
  BattleLogicTask___ctor(v14, 0LL);
  if ( !v14 || (BattleLogicTask__setLoadImmediateEntryServant(v14, 0LL), !v9) )
    sub_B170D4();
  System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData___Add(
    v9,
    (EventMissionProgressRequest_Argument_ProgressData_o *)v14,
    (const MethodInfo_2F25CD8 *)Method_System_Collections_Generic_List_BattleLogicTask__Add__);
  return (BattleLogicTask_array *)System_Collections_Generic_List_WarBoardUiData_SaveData___ToArray(
                                    (System_Collections_Generic_List_WarBoardUiData_SaveData__o *)v9,
                                    (const MethodInfo_2F27E24 *)Method_System_Collections_Generic_List_BattleLogicTask__ToArray__);
}


void __fastcall BattleLogic__loadNstage(BattleLogic_o *this, System_String_o *endproc, const MethodInfo *method)
{
  __int64 v3; // x3
  __int64 v4; // x4
  __int64 v7; // x1
  __int64 v8; // x1
  BattleLogic___c__DisplayClass319_0_o *v9; // x20
  struct BattleData_o *data; // x0
  struct BattleData_o *v11; // x8
  BattleFieldEnvironmentData_o *FieldEnvData_k__BackingField; // x0
  __int64 v13; // x1
  __int64 v14; // x2
  __int64 v15; // x3
  __int64 v16; // x4
  BattlePerformance_o *perf; // x0
  System_Action_o *v18; // x21
  const MethodInfo *v19; // x2
  System_Collections_IEnumerator_o *Nstage; // x1

  if ( (byte_40F73F7 & 1) == 0 )
  {
    sub_B16FFC(&System_Action_TypeInfo, endproc);
    sub_B16FFC(&Method_BattleLogic___c__DisplayClass319_0__loadNstage_b__0__, v7);
    sub_B16FFC(&BattleLogic___c__DisplayClass319_0_TypeInfo, v8);
    byte_40F73F7 = 1;
  }
  v9 = (BattleLogic___c__DisplayClass319_0_o *)sub_B170CC(
                                                 BattleLogic___c__DisplayClass319_0_TypeInfo,
                                                 endproc,
                                                 method,
                                                 v3,
                                                 v4);
  BattleLogic___c__DisplayClass319_0___ctor(v9, 0LL);
  if ( !v9 )
    goto LABEL_11;
  v9->fields.__4__this = this;
  sub_B16F98(&v9->fields, this);
  v9->fields.endproc = endproc;
  sub_B16F98(&v9->fields.endproc, endproc);
  data = this->fields.data;
  if ( !data )
    goto LABEL_11;
  BattleData__loadNstage(data, data->fields.wavecount, 0LL);
  v11 = this->fields.data;
  if ( !v11 )
    goto LABEL_11;
  FieldEnvData_k__BackingField = v11->fields._FieldEnvData_k__BackingField;
  if ( !FieldEnvData_k__BackingField )
    goto LABEL_11;
  if ( BattleFieldEnvironmentData__InitWave(FieldEnvData_k__BackingField, 0LL) )
  {
    perf = this->fields.perf;
    if ( perf )
    {
      BattlePerformance__ChangeWaveBg(perf, 0LL);
      goto LABEL_10;
    }
LABEL_11:
    sub_B170D4();
  }
LABEL_10:
  v18 = (System_Action_o *)sub_B170CC(System_Action_TypeInfo, v13, v14, v15, v16);
  System_Action___ctor(v18, (Il2CppObject *)v9, Method_BattleLogic___c__DisplayClass319_0__loadNstage_b__0__, 0LL);
  Nstage = BattleLogic__coroutineLoadNstage(this, v18, v19);
  UnityEngine_MonoBehaviour__StartCoroutine_34804316((UnityEngine_MonoBehaviour_o *)this, Nstage, 0LL);
}


void __fastcall BattleLogic__loadSaveBattle(BattleLogic_o *this, const MethodInfo *method)
{
  __int64 v3; // x1
  BattleData_o *data; // x0
  BattleData_o *v5; // x0
  __int64 v6; // x1
  __int64 v7; // x2
  __int64 v8; // x3
  __int64 v9; // x4
  System_Action_o *v10; // x20
  const MethodInfo *v11; // x2
  System_Collections_IEnumerator_o *inited; // x1

  if ( (byte_40F73F5 & 1) == 0 )
  {
    sub_B16FFC(&System_Action_TypeInfo, method);
    sub_B16FFC(&Method_BattleLogic__loadSaveBattle_b__317_0__, v3);
    byte_40F73F5 = 1;
  }
  data = this->fields.data;
  if ( !data || (BattleData__loadQuest(data, 0LL), (v5 = this->fields.data) == 0LL) )
    sub_B170D4();
  BattleData__SetProcesssFlgOnBattleResume(v5, 0LL);
  v10 = (System_Action_o *)sub_B170CC(System_Action_TypeInfo, v6, v7, v8, v9);
  System_Action___ctor(v10, (Il2CppObject *)this, Method_BattleLogic__loadSaveBattle_b__317_0__, 0LL);
  inited = BattleLogic__CoroutineInitQuest(this, v10, v11);
  UnityEngine_MonoBehaviour__StartCoroutine_34804316((UnityEngine_MonoBehaviour_o *)this, inited, 0LL);
}


void __fastcall BattleLogic__loadSaveWave(BattleLogic_o *this, const MethodInfo *method)
{
  BattleData_o *data; // x0
  const MethodInfo *v4; // x1
  System_Collections_IEnumerator_o *SaveWave; // x1

  data = this->fields.data;
  if ( !data )
    sub_B170D4();
  BattleData__loadSaveTurnNstage(data, 0LL);
  SaveWave = BattleLogic__coroutineLoadSaveWave(this, v4);
  UnityEngine_MonoBehaviour__StartCoroutine_34804316((UnityEngine_MonoBehaviour_o *)this, SaveWave, 0LL);
}


void __fastcall BattleLogic__ngContinueBattleLoseInfomation(
        BattleLogic_o *this,
        System_String_o *endEvent,
        const MethodInfo *method)
{
  __int64 v3; // x3
  __int64 v4; // x4
  __int64 v7; // x1
  __int64 v8; // x1
  __int64 v9; // x1
  __int64 v10; // x1
  BattleLogic___c__DisplayClass110_0_o *v11; // x20
  BattleData_o *data; // x0
  PlayMakerFSM_o *fsm; // x0
  System_String_o *v14; // x1
  BattleData_o *v15; // x0
  __int64 v16; // x1
  __int64 v17; // x2
  __int64 v18; // x3
  __int64 v19; // x4
  ServantAssetLoadManager_o *Instance; // x0
  NotificationDialog_ClickDelegate_o *v21; // x21
  const MethodInfo *v22; // x5

  if ( (byte_40F7375 & 1) == 0 )
  {
    sub_B16FFC(&NotificationDialog_ClickDelegate_TypeInfo, endEvent);
    sub_B16FFC(&Method_SingletonMonoBehaviour_ServantAssetLoadManager__get_Instance__, v7);
    sub_B16FFC(&Method_BattleLogic___c__DisplayClass110_0__ngContinueBattleLoseInfomation_b__0__, v8);
    sub_B16FFC(&BattleLogic___c__DisplayClass110_0_TypeInfo, v9);
    sub_B16FFC(&StringLiteral_8417, v10);
    byte_40F7375 = 1;
  }
  v11 = (BattleLogic___c__DisplayClass110_0_o *)sub_B170CC(
                                                  BattleLogic___c__DisplayClass110_0_TypeInfo,
                                                  endEvent,
                                                  method,
                                                  v3,
                                                  v4);
  BattleLogic___c__DisplayClass110_0___ctor(v11, 0LL);
  if ( !v11 )
    goto LABEL_15;
  v11->fields.__4__this = this;
  sub_B16F98(&v11->fields, this);
  v11->fields.endEvent = endEvent;
  sub_B16F98(&v11->fields.endEvent, endEvent);
  data = this->fields.data;
  if ( !data )
    goto LABEL_15;
  if ( BattleData__isDispLoseResult(data, 0LL) )
  {
    fsm = this->fields.fsm;
    if ( fsm )
    {
      v14 = (System_String_o *)StringLiteral_8417;
LABEL_13:
      PlayMakerFSM__SendEvent(fsm, v14, 0LL);
      return;
    }
    goto LABEL_15;
  }
  v15 = this->fields.data;
  if ( !v15 )
    goto LABEL_15;
  if ( BattleData__IsIgnoreBattleLoseDialog(v15, 0LL) )
  {
    Instance = (ServantAssetLoadManager_o *)SingletonMonoBehaviour_WebViewManager___get_Instance((const MethodInfo_2A54F38 *)Method_SingletonMonoBehaviour_ServantAssetLoadManager__get_Instance__);
    if ( Instance )
    {
      ServantAssetLoadManager__EndRetryTransition(Instance, 0LL);
      fsm = this->fields.fsm;
      if ( fsm )
      {
        v14 = v11->fields.endEvent;
        goto LABEL_13;
      }
    }
LABEL_15:
    sub_B170D4();
  }
  v21 = (NotificationDialog_ClickDelegate_o *)sub_B170CC(NotificationDialog_ClickDelegate_TypeInfo, v16, v17, v18, v19);
  NotificationDialog_ClickDelegate___ctor(
    v21,
    (Il2CppObject *)v11,
    Method_BattleLogic___c__DisplayClass110_0__ngContinueBattleLoseInfomation_b__0__,
    0LL);
  BattleLogic__OpenBattleLoseDlg(this, 0, 0, v21, 0, v22);
}


void __fastcall BattleLogic__openConnectErrorDialog(BattleLogic_o *this, const MethodInfo *method)
{
  __int64 v3; // x1
  __int64 v4; // x1
  __int64 v5; // x1
  __int64 v6; // x1
  __int64 v7; // x1
  CommonUI_o *Instance; // x20
  System_String_o *v9; // x21
  System_String_o *v10; // x22
  __int64 v11; // x1
  __int64 v12; // x2
  __int64 v13; // x3
  __int64 v14; // x4
  NotificationDialog_ClickDelegate_o *v15; // x23

  if ( (byte_40F73CD & 1) == 0 )
  {
    sub_B16FFC(&Method_BattleLogic_requestErrorDialog__, method);
    sub_B16FFC(&NotificationDialog_ClickDelegate_TypeInfo, v3);
    sub_B16FFC(&LocalizationManager_TypeInfo, v4);
    sub_B16FFC(&Method_SingletonMonoBehaviour_CommonUI__get_Instance__, v5);
    sub_B16FFC(&StringLiteral_2423, v6);
    sub_B16FFC(&StringLiteral_2424, v7);
    byte_40F73CD = 1;
  }
  Instance = (CommonUI_o *)SingletonMonoBehaviour_WebViewManager___get_Instance((const MethodInfo_2A54F38 *)Method_SingletonMonoBehaviour_CommonUI__get_Instance__);
  if ( (BYTE3(LocalizationManager_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0
    && !LocalizationManager_TypeInfo->_2.cctor_finished )
  {
    j_il2cpp_runtime_class_init_0(LocalizationManager_TypeInfo);
  }
  v9 = LocalizationManager__Get((System_String_o *)StringLiteral_2424, 0LL);
  v10 = LocalizationManager__Get((System_String_o *)StringLiteral_2423, 0LL);
  v15 = (NotificationDialog_ClickDelegate_o *)sub_B170CC(NotificationDialog_ClickDelegate_TypeInfo, v11, v12, v13, v14);
  NotificationDialog_ClickDelegate___ctor(v15, (Il2CppObject *)this, Method_BattleLogic_requestErrorDialog__, 0LL);
  if ( !Instance )
    sub_B170D4();
  CommonUI__OpenNotificationDialog_18239760(
    Instance,
    v9,
    v10,
    v15,
    -1,
    0,
    0,
    0,
    0,
    1,
    0LL,
    0LL,
    0,
    0,
    0LL,
    1,
    0LL,
    0LL,
    0LL,
    0LL);
}


void __fastcall BattleLogic__playRetire(BattleLogic_o *this, const MethodInfo *method)
{
  BattleData_o *data; // x0
  const MethodInfo *v4; // x1
  PlayMakerFSM_o *fsm; // x0

  if ( (byte_40F736C & 1) == 0 )
  {
    sub_B16FFC(&StringLiteral_10497, method);
    byte_40F736C = 1;
  }
  data = this->fields.data;
  if ( !data )
    goto LABEL_8;
  if ( BattleData__isBattleRetreatQuestClear(data, 0LL) )
  {
    BattleLogic__sendLoseRetireClearEvent(this, v4);
    return;
  }
  fsm = this->fields.fsm;
  if ( !fsm )
LABEL_8:
    sub_B170D4();
  PlayMakerFSM__SendEvent(fsm, (System_String_o *)StringLiteral_10497, 0LL);
}


void __fastcall BattleLogic__playTaskBattle(BattleLogic_o *this, const MethodInfo *method)
{
  const MethodInfo *v2; // x2
  __int64 v4; // x1
  __int64 v5; // x1
  __int64 v6; // x1
  struct System_Collections_Generic_LinkedList_BattleLogicTask__o *list_logic; // x8
  struct System_Collections_Generic_LinkedListNode_T__o *head; // x8
  BattleLogicTask_o *item; // x20
  BattleLogicTask_o *CommandTask; // x0
  struct System_Collections_Generic_LinkedList_BattleLogicTask__o *v11; // x0
  const MethodInfo *v12; // x2
  BattlePerformance_o *perf; // x0
  const MethodInfo *v14; // x1
  BattlePerformance_o *v15; // x0
  BattleActionData_o *v16; // x1
  BattleActionData_o *v17; // x0
  BattleActionData_o *v18; // x21
  struct BattleData_o *data; // x8
  BattleFieldEnvironmentData_o *FieldEnvData_k__BackingField; // x0
  BattlePerformance_o *v21; // x0

  if ( (byte_40F7385 & 1) == 0 )
  {
    sub_B16FFC(&Method_System_Collections_Generic_LinkedListNode_BattleLogicTask__get_Value__, method);
    sub_B16FFC(&Method_System_Collections_Generic_LinkedList_BattleLogicTask__AddFirst__, v4);
    sub_B16FFC(&Method_System_Collections_Generic_LinkedList_BattleLogicTask__RemoveFirst__, v5);
    sub_B16FFC(&Method_System_Collections_Generic_LinkedList_BattleLogicTask__get_First__, v6);
    byte_40F7385 = 1;
  }
  list_logic = this->fields.list_logic;
  if ( !list_logic )
    goto LABEL_27;
  head = list_logic->fields.head;
  if ( !head )
    goto LABEL_27;
  item = (BattleLogicTask_o *)head->fields.item;
  if ( !item )
    goto LABEL_27;
  if ( item->fields.actiontype == 4 && !BattleLogic__checkUsableTD(this, item, v2) )
  {
    CommandTask = BattleLogic__createCommandTask(this, item, v2);
    if ( !this->fields.list_logic )
      goto LABEL_27;
    item = CommandTask;
    System_Collections_Generic_LinkedList_object___RemoveFirst(
      (System_Collections_Generic_LinkedList_T__o *)this->fields.list_logic,
      (const MethodInfo_23FDD3C *)Method_System_Collections_Generic_LinkedList_BattleLogicTask__RemoveFirst__);
    v11 = this->fields.list_logic;
    if ( !v11 )
      goto LABEL_27;
    System_Collections_Generic_LinkedList_WebConnection___AddFirst(
      (System_Collections_Generic_LinkedList_WebConnection__o *)v11,
      (System_Net_WebConnection_o *)item,
      (const MethodInfo_23FD568 *)Method_System_Collections_Generic_LinkedList_BattleLogicTask__AddFirst__);
  }
  if ( BattleLogic__checkRelationTask(this, item, v2) )
  {
    perf = this->fields.perf;
    if ( !perf )
      goto LABEL_27;
    if ( BattlePerformance__checkActionCount(perf, 0LL) >= 1 )
    {
      v15 = this->fields.perf;
      if ( v15 )
      {
        v16 = 0LL;
LABEL_25:
        BattlePerformance__playActionData(v15, v16, 0LL);
        return;
      }
      goto LABEL_27;
    }
  }
  else
  {
    v17 = BattleLogic__procBattleTask(this, item, v12);
    if ( !this->fields.list_logic )
      goto LABEL_27;
    v18 = v17;
    System_Collections_Generic_LinkedList_object___RemoveFirst(
      (System_Collections_Generic_LinkedList_T__o *)this->fields.list_logic,
      (const MethodInfo_23FDD3C *)Method_System_Collections_Generic_LinkedList_BattleLogicTask__RemoveFirst__);
    data = this->fields.data;
    if ( !data )
      goto LABEL_27;
    FieldEnvData_k__BackingField = data->fields._FieldEnvData_k__BackingField;
    if ( !FieldEnvData_k__BackingField )
      goto LABEL_27;
    BattleFieldEnvironmentData__AddLastInterruptTasks(FieldEnvData_k__BackingField, this, 0LL);
    if ( !item )
      goto LABEL_27;
    ((void (__fastcall *)(BattleLogicTask_o *, BattleLogic_o *, void *))item->klass->vtable._7_AfterCreateAction.method)(
      item,
      this,
      item->klass[1]._1.image);
    if ( v18 )
      goto LABEL_23;
    v21 = this->fields.perf;
    if ( !v21 )
      goto LABEL_27;
    if ( BattlePerformance__checkActionCount(v21, 0LL) >= 1 )
    {
LABEL_23:
      ((void (__fastcall *)(BattleLogicTask_o *, BattleActionData_o *, struct BattlePerformance_o *, Il2CppMethodPointer))item->klass->vtable._4_InterruptAction.method)(
        item,
        v18,
        this->fields.perf,
        item->klass->vtable._5_MakeActionTask.methodPtr);
      v15 = this->fields.perf;
      if ( v15 )
      {
        v16 = v18;
        goto LABEL_25;
      }
LABEL_27:
      sub_B170D4();
    }
  }
  BattleLogic__endActionData(this, v14);
}


BattleActionData_o *__fastcall BattleLogic__procBattleTask(
        BattleLogic_o *this,
        BattleLogicTask_o *task,
        const MethodInfo *method)
{
  __int64 v5; // x1
  struct System_Collections_Generic_Dictionary_BattleLogicTask_ACTIONTYPE__BattleLogic_createActionBattle__o *actionBattleList; // x0
  struct System_Collections_Generic_Dictionary_BattleLogicTask_ACTIONTYPE__BattleLogic_createActionBattle__o *v7; // x0
  System_String_o *Item; // x0

  if ( (byte_40F7392 & 1) == 0 )
  {
    sub_B16FFC(
      &Method_System_Collections_Generic_Dictionary_BattleLogicTask_ACTIONTYPE__BattleLogic_createActionBattle__ContainsKey__,
      task);
    sub_B16FFC(
      &Method_System_Collections_Generic_Dictionary_BattleLogicTask_ACTIONTYPE__BattleLogic_createActionBattle__get_Item__,
      v5);
    byte_40F7392 = 1;
  }
  if ( !task )
    goto LABEL_10;
  actionBattleList = this->fields.actionBattleList;
  if ( !actionBattleList )
    goto LABEL_10;
  if ( System_Collections_Generic_Dictionary_Voice_BATTLE__string___ContainsKey(
         (System_Collections_Generic_Dictionary_Voice_BATTLE__string__o *)actionBattleList,
         task->fields.actiontype,
         (const MethodInfo_2DFFEC8 *)Method_System_Collections_Generic_Dictionary_BattleLogicTask_ACTIONTYPE__BattleLogic_createActionBattle__ContainsKey__) )
  {
    v7 = this->fields.actionBattleList;
    if ( v7 )
    {
      Item = System_Collections_Generic_Dictionary_Voice_BATTLE__string___get_Item(
               (System_Collections_Generic_Dictionary_Voice_BATTLE__string__o *)v7,
               task->fields.actiontype,
               (const MethodInfo_2DFFB90 *)Method_System_Collections_Generic_Dictionary_BattleLogicTask_ACTIONTYPE__BattleLogic_createActionBattle__get_Item__);
      if ( Item )
        return BattleLogic_createActionBattle__Invoke((BattleLogic_createActionBattle_o *)Item, task, 0LL);
    }
LABEL_10:
    sub_B170D4();
  }
  return 0LL;
}


void __fastcall BattleLogic__procComboAct(BattleLogic_o *this, const MethodInfo *method)
{
  __int64 v3; // x1
  __int64 v4; // x1
  __int64 v5; // x1
  __int64 v6; // x1
  __int64 v7; // x1
  __int64 v8; // x1
  __int64 v9; // x1
  __int64 v10; // x1
  __int64 v11; // x1
  struct BattleData_o *data; // x8
  struct BattleComboData_o *combodata; // x22
  __int64 v14; // x1
  __int64 v15; // x2
  __int64 v16; // x3
  __int64 v17; // x4
  System_Collections_Generic_List_int__o *v18; // x20
  unsigned int v19; // w23
  BattleData_o *v20; // x0
  BattleCommandData_o *SelectCommand; // x0
  int32_t uniqueId; // w21
  BattleData_o *v23; // x0
  BattleServantData_o *ServantData; // x20
  float RateValue; // s0
  BattleData_o *v26; // x20
  int32_t Value; // w0
  struct BattlePerformance_o *perf; // x8
  BattlePerformanceStatus_o *statusPerf; // x0
  System_Collections_Generic_List_Enumerator_int__o v30; // [xsp+8h] [xbp-78h] BYREF
  System_Collections_Generic_List_Enumerator_int__o v31; // [xsp+20h] [xbp-60h] BYREF

  if ( (byte_40F73B0 & 1) == 0 )
  {
    sub_B16FFC(&Method_System_Collections_Generic_List_Enumerator_int__Dispose__, method);
    sub_B16FFC(&Method_System_Collections_Generic_List_Enumerator_int__MoveNext__, v3);
    sub_B16FFC(&Method_System_Collections_Generic_List_Enumerator_int__get_Current__, v4);
    sub_B16FFC(&Method_System_Collections_Generic_List_int__Add__, v5);
    sub_B16FFC(&Method_System_Collections_Generic_List_int__Contains__, v6);
    sub_B16FFC(&Method_System_Collections_Generic_List_int__GetEnumerator__, v7);
    sub_B16FFC(&Method_System_Collections_Generic_List_int___ctor__, v8);
    sub_B16FFC(&System_Collections_Generic_List_int__TypeInfo, v9);
    sub_B16FFC(&StringLiteral_2937, v10);
    sub_B16FFC(&StringLiteral_2939, v11);
    byte_40F73B0 = 1;
  }
  memset(&v31, 0, sizeof(v31));
  data = this->fields.data;
  if ( !data )
    goto LABEL_28;
  combodata = data->fields.combodata;
  if ( !combodata )
    goto LABEL_28;
  if ( !combodata->fields.flash )
    return;
  if ( !BattleCommand__isARTS(combodata->fields.flashtype, 0LL) )
  {
    if ( !BattleCommand__isQUICK(combodata->fields.flashtype, 0LL) )
      return;
    v26 = this->fields.data;
    Value = ConstantMaster__getValue((System_String_o *)StringLiteral_2939, 0LL);
    if ( v26 )
    {
      BattleData__addCriticalPoint(v26, Value, 0, 0LL);
      perf = this->fields.perf;
      if ( perf )
      {
        statusPerf = perf->fields.statusPerf;
        if ( statusPerf )
        {
          BattlePerformanceStatus__updateCriticalPoint(statusPerf, -1, 1, 0LL);
          return;
        }
      }
    }
LABEL_28:
    sub_B170D4();
  }
  v18 = (System_Collections_Generic_List_int__o *)sub_B170CC(
                                                    System_Collections_Generic_List_int__TypeInfo,
                                                    v14,
                                                    v15,
                                                    v16,
                                                    v17);
  System_Collections_Generic_List_int____ctor(
    v18,
    (const MethodInfo_2F0F794 *)Method_System_Collections_Generic_List_int___ctor__);
  v19 = -1;
  do
  {
    v20 = this->fields.data;
    if ( !v20 )
      goto LABEL_28;
    SelectCommand = BattleData__getSelectCommand(v20, v19 + 1, 0LL);
    if ( !SelectCommand || !v18 )
      goto LABEL_28;
    uniqueId = SelectCommand->fields.uniqueId;
    if ( !System_Collections_Generic_List_int___Contains(
            v18,
            uniqueId,
            (const MethodInfo_2F10944 *)Method_System_Collections_Generic_List_int__Contains__) )
      System_Collections_Generic_List_int___Add(
        v18,
        uniqueId,
        (const MethodInfo_2F104F0 *)Method_System_Collections_Generic_List_int__Add__);
    ++v19;
  }
  while ( v19 < 2 );
  System_Collections_Generic_List_int___GetEnumerator(
    (System_Collections_Generic_List_Enumerator_T__o *)&v30,
    v18,
    (const MethodInfo_2F11334 *)Method_System_Collections_Generic_List_int__GetEnumerator__);
  v31 = v30;
  while ( System_Collections_Generic_List_Enumerator_int___MoveNext(
            &v31,
            (const MethodInfo_2071AE8 *)Method_System_Collections_Generic_List_Enumerator_int__MoveNext__) )
  {
    v23 = this->fields.data;
    if ( !v23 )
      sub_B170D4();
    ServantData = BattleData__getServantData(v23, v31.fields.current, 0LL);
    RateValue = ConstantMaster__getRateValue((System_String_o *)StringLiteral_2937, 0LL);
    if ( !ServantData )
      sub_B170D4();
    BattleServantData__addNpPer(ServantData, RateValue, 0LL);
  }
  System_Collections_Generic_List_Enumerator_int___Dispose(
    &v31,
    (const MethodInfo_2071AE4 *)Method_System_Collections_Generic_List_Enumerator_int__Dispose__);
}


void __fastcall BattleLogic__procEndBattle(BattleLogic_o *this, const MethodInfo *method)
{
  __int64 v2; // x1

  if ( (byte_40F736D & 1) == 0 )
  {
    sub_B16FFC(&BattleData_TypeInfo, method);
    sub_B16FFC(&SeManager_TypeInfo, v2);
    byte_40F736D = 1;
  }
  if ( (BYTE3(SeManager_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0 && !SeManager_TypeInfo->_2.cctor_finished )
    j_il2cpp_runtime_class_init_0(SeManager_TypeInfo);
  SeManager__StopSeAll(0.8, 0LL);
  if ( (BYTE3(BattleData_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0 && !BattleData_TypeInfo->_2.cctor_finished )
    j_il2cpp_runtime_class_init_0(BattleData_TypeInfo);
  BattleData__deleteSaveData(0LL);
}


void __fastcall BattleLogic__procLose(BattleLogic_o *this, const MethodInfo *method)
{
  BattleData_o *data; // x0

  data = this->fields.data;
  if ( !data )
    sub_B170D4();
  BattleData__setResultLose(data, 0LL);
}


void __fastcall BattleLogic__procLosePerformance(BattleLogic_o *this, const MethodInfo *method)
{
  BattlePerformance_o *perf; // x0
  struct BattlePerformance_o *v4; // x0
  struct BattleData_o *data; // x8

  perf = this->fields.perf;
  if ( !perf
    || (BattlePerformance__effectWinBattle(perf, 0LL), (v4 = this->fields.perf) == 0LL)
    || (data = v4->fields.data) == 0LL )
  {
    sub_B170D4();
  }
  BattlePerformance__SetTimeScale(v4, (float)data->fields.systemflg_acceleration, 0LL);
}


void __fastcall BattleLogic__procRetire(BattleLogic_o *this, const MethodInfo *method)
{
  BattleData_o *data; // x0
  BattleData_o *v4; // x0
  const MethodInfo *v5; // x1

  data = this->fields.data;
  if ( !data || (BattleData__setResultRetire(data, 0LL), (v4 = this->fields.data) == 0LL) )
    sub_B170D4();
  BattleData__SetUsedTurn(v4, 0LL);
  BattleLogic__connectBattleResult(this, v5);
}


void __fastcall BattleLogic__procWin(BattleLogic_o *this, const MethodInfo *method)
{
  const MethodInfo *v2; // x2
  BattleData_o *data; // x0
  BattleData_o *v5; // x0
  BattleData_o *v6; // x0
  int32_t FinishEffectId; // w0
  struct BattlePerformance_o *perf; // x8
  float systemflg_acceleration; // s0
  struct BattleData_o *v10; // x9
  BattleData_o *v11; // x0
  struct BattlePerformance_o *v12; // x8
  struct BattlePerformanceStatus_o *statusPerf; // x8
  BattlePerformanceInfoComponent_o *InfoComp; // x0

  BattleLogic__setActiviteUnusedGameobject(this, 1, v2);
  data = this->fields.data;
  if ( !data )
    goto LABEL_17;
  BattleData__SetUsedTurn(data, 0LL);
  v5 = this->fields.data;
  if ( !v5 )
    goto LABEL_17;
  BattleData__setResultWin(v5, 0LL);
  v6 = this->fields.data;
  if ( !v6 )
    goto LABEL_17;
  FinishEffectId = BattleData__GetFinishEffectId(v6, 0LL);
  perf = this->fields.perf;
  if ( (FinishEffectId & 0x80000000) != 0 )
  {
    if ( !perf )
      goto LABEL_17;
    v10 = perf->fields.data;
    if ( !v10 )
      goto LABEL_17;
    systemflg_acceleration = (float)v10->fields.systemflg_acceleration;
  }
  else
  {
    if ( !perf )
      goto LABEL_17;
    systemflg_acceleration = 1.0;
  }
  BattlePerformance__SetTimeScale(this->fields.perf, systemflg_acceleration, 0LL);
  v11 = this->fields.data;
  if ( !v11 )
    goto LABEL_17;
  if ( BattleData__IsWarBoard(v11, 0LL) )
  {
    v12 = this->fields.perf;
    if ( v12 )
    {
      statusPerf = v12->fields.statusPerf;
      if ( statusPerf )
      {
        InfoComp = statusPerf->fields.InfoComp;
        if ( InfoComp )
        {
          BattlePerformanceInfoComponent__ClearBattleInfo(InfoComp, 0LL);
          return;
        }
      }
    }
LABEL_17:
    sub_B170D4();
  }
}


System_String_o *__fastcall BattleLogic__raidBossName(BattleLogic_o *this, const MethodInfo *method)
{
  BattleData_o *data; // x0
  BattleServantData_array *FieldEnemyServantList; // x0
  __int64 v5; // x1
  __int64 v6; // x2
  int max_length; // w9
  System_String_o **p_svtName; // x8
  unsigned int v9; // w10
  BattleServantData_o *v10; // x11

  if ( (byte_40F73E8 & 1) == 0 )
  {
    sub_B16FFC(&StringLiteral_1, method);
    byte_40F73E8 = 1;
  }
  data = this->fields.data;
  if ( !data || (FieldEnemyServantList = BattleData__getFieldEnemyServantList(data, 0, 0LL)) == 0LL )
LABEL_15:
    sub_B170D4();
  max_length = FieldEnemyServantList->max_length;
  if ( max_length < 1 )
  {
    p_svtName = (System_String_o **)&StringLiteral_1;
  }
  else
  {
    p_svtName = (System_String_o **)&StringLiteral_1;
    v9 = 0;
    while ( 1 )
    {
      if ( v9 >= max_length )
      {
        sub_B17100(FieldEnemyServantList, v5, v6);
        sub_B170A0();
      }
      v10 = FieldEnemyServantList->m_Items[v9];
      if ( !v10 )
        goto LABEL_15;
      if ( v10->fields.isRaid )
        break;
      if ( (int)++v9 >= max_length )
        return *p_svtName;
    }
    p_svtName = &v10->fields.svtName;
  }
  return *p_svtName;
}


void __fastcall BattleLogic__releaseServantAfterDead(
        BattleLogic_o *this,
        int32_t index,
        BattleServantData_o *deadSvtData,
        const MethodInfo *method)
{
  BattlePerformance_o *perf; // x0
  BattleData_o *data; // x0
  System_Int32_array *EntryIdArray; // x0
  __int64 v10; // x1
  __int64 v11; // x2

  if ( !deadSvtData
    || (BattleServantData__setDeadData(deadSvtData, 0LL), (perf = this->fields.perf) == 0LL)
    || (BattlePerformance__unloadDeckActor(perf, index, deadSvtData, 0LL), (data = this->fields.data) == 0LL)
    || (EntryIdArray = BattleData__getEntryIdArray(data, deadSvtData->fields.isEnemy, 0LL)) == 0LL )
  {
    sub_B170D4();
  }
  if ( EntryIdArray->max_length <= index )
  {
    sub_B17100(EntryIdArray, v10, v11);
    sub_B170A0();
  }
  EntryIdArray->m_Items[index + 1] = -1;
}


void __fastcall BattleLogic__removeDoNotSelectCommandCardBuff(
        BattleLogic_o *this,
        int32_t buffId,
        BattleServantData_o *target,
        const MethodInfo *method)
{
  BattleData_o *data; // x0

  data = this->fields.data;
  if ( !data )
    sub_B170D4();
  BattleData__RemoveDoNotSelectCommandCardBuff(data, buffId, target, 0LL);
}


void __fastcall BattleLogic__replaceMember(
        BattleLogic_o *this,
        BattleActionData_ReplaceMember_o *replaceData,
        System_Action_o *endCallBack,
        const MethodInfo *method)
{
  System_Collections_IEnumerator_o *v5; // x1

  v5 = BattleLogic__colReplaceMember(this, replaceData, endCallBack, method);
  UnityEngine_MonoBehaviour__StartCoroutine_34804316((UnityEngine_MonoBehaviour_o *)this, v5, 0LL);
}


// local variable allocation has failed, the output may be wrong!
void __fastcall BattleLogic__requestBattleUseItemErrorDialog(BattleLogic_o *this, bool flg, const MethodInfo *method)
{
  __int64 v4; // x1
  __int64 v5; // x1
  __int64 v6; // x1
  __int64 v7; // x1
  CommonUI_o *Instance; // x0
  __int64 v9; // x1
  __int64 v10; // x2
  __int64 v11; // x3
  __int64 v12; // x4
  NetworkManager_ResultCallbackFunc_o *v13; // x20
  RequestBase_o *Request_WarBoardWallAttackRequest; // x0

  if ( (byte_40F73C7 & 1) == 0 )
  {
    sub_B16FFC(&Method_BattleLogic_EndRequestBattleUseItem__, flg);
    sub_B16FFC(&Method_NetworkManager_getRequest_BattleUseItemRequest___, v4);
    sub_B16FFC(&NetworkManager_TypeInfo, v5);
    sub_B16FFC(&NetworkManager_ResultCallbackFunc_TypeInfo, v6);
    sub_B16FFC(&Method_SingletonMonoBehaviour_CommonUI__get_Instance__, v7);
    byte_40F73C7 = 1;
  }
  Instance = (CommonUI_o *)SingletonMonoBehaviour_WebViewManager___get_Instance((const MethodInfo_2A54F38 *)Method_SingletonMonoBehaviour_CommonUI__get_Instance__);
  if ( !Instance )
    goto LABEL_9;
  CommonUI__CloseNotificationDialog(Instance, 0LL);
  v13 = (NetworkManager_ResultCallbackFunc_o *)sub_B170CC(NetworkManager_ResultCallbackFunc_TypeInfo, v9, v10, v11, v12);
  NetworkManager_ResultCallbackFunc___ctor(v13, (Il2CppObject *)this, Method_BattleLogic_EndRequestBattleUseItem__, 0LL);
  if ( (BYTE3(NetworkManager_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0
    && !NetworkManager_TypeInfo->_2.cctor_finished )
  {
    j_il2cpp_runtime_class_init_0(NetworkManager_TypeInfo);
  }
  Request_WarBoardWallAttackRequest = (RequestBase_o *)NetworkManager__getRequest_WarBoardWallAttackRequest_(
                                                         v13,
                                                         (const MethodInfo_19DD960 *)Method_NetworkManager_getRequest_BattleUseItemRequest___);
  if ( !Request_WarBoardWallAttackRequest )
LABEL_9:
    sub_B170D4();
  RequestBase__beginRetryRequest(Request_WarBoardWallAttackRequest, 0, 0LL);
}


// local variable allocation has failed, the output may be wrong!
void __fastcall BattleLogic__requestErrorDialog(BattleLogic_o *this, bool flg, const MethodInfo *method)
{
  __int64 v4; // x1
  CommonUI_o *Instance; // x0
  PlayMakerFSM_o *fsm; // x0

  if ( (byte_40F73CE & 1) == 0 )
  {
    sub_B16FFC(&Method_SingletonMonoBehaviour_CommonUI__get_Instance__, flg);
    sub_B16FFC(&StringLiteral_5481, v4);
    byte_40F73CE = 1;
  }
  Instance = (CommonUI_o *)SingletonMonoBehaviour_WebViewManager___get_Instance((const MethodInfo_2A54F38 *)Method_SingletonMonoBehaviour_CommonUI__get_Instance__);
  if ( !Instance || (CommonUI__CloseNotificationDialog(Instance, 0LL), (fsm = this->fields.fsm) == 0LL) )
    sub_B170D4();
  PlayMakerFSM__SendEvent(fsm, (System_String_o *)StringLiteral_5481, 0LL);
}


// local variable allocation has failed, the output may be wrong!
void __fastcall BattleLogic__requestResultErrorDialog(BattleLogic_o *this, bool flg, const MethodInfo *method)
{
  __int64 v4; // x1
  CommonUI_o *Instance; // x0
  PlayMakerFSM_o *fsm; // x0

  if ( (byte_40F7372 & 1) == 0 )
  {
    sub_B16FFC(&Method_SingletonMonoBehaviour_CommonUI__get_Instance__, flg);
    sub_B16FFC(&StringLiteral_5481, v4);
    byte_40F7372 = 1;
  }
  Instance = (CommonUI_o *)SingletonMonoBehaviour_WebViewManager___get_Instance((const MethodInfo_2A54F38 *)Method_SingletonMonoBehaviour_CommonUI__get_Instance__);
  if ( !Instance || (CommonUI__CloseNotificationDialog(Instance, 0LL), (fsm = this->fields.fsm) == 0LL) )
    sub_B170D4();
  PlayMakerFSM__SendEvent(fsm, (System_String_o *)StringLiteral_5481, 0LL);
}


void __fastcall BattleLogic__resetCriticalPoint(BattleLogic_o *this, const MethodInfo *method)
{
  ;
}


void __fastcall BattleLogic__resetOverKill(BattleLogic_o *this, const MethodInfo *method)
{
  BattleData_o *data; // x0
  BattleServantData_array *FieldPlayerServantList; // x0
  __int64 v5; // x1
  __int64 v6; // x2
  int max_length; // w10
  unsigned int v8; // w8
  BattleServantData_o *v9; // x10
  BattleData_o *v10; // x0
  int v11; // w10
  unsigned int v12; // w8
  BattleServantData_o *v13; // x10

  data = this->fields.data;
  if ( !data )
    goto LABEL_17;
  FieldPlayerServantList = BattleData__getFieldPlayerServantList(data, 0LL);
  if ( !FieldPlayerServantList )
    goto LABEL_17;
  max_length = FieldPlayerServantList->max_length;
  if ( max_length >= 1 )
  {
    v8 = 0;
    while ( v8 < max_length )
    {
      v9 = FieldPlayerServantList->m_Items[v8];
      if ( !v9 )
        goto LABEL_17;
      v9->fields.overkillTargetId = -1;
      max_length = FieldPlayerServantList->max_length;
      if ( (int)++v8 >= max_length )
        goto LABEL_8;
    }
LABEL_16:
    sub_B17100(FieldPlayerServantList, v5, v6);
    sub_B170A0();
  }
LABEL_8:
  v10 = this->fields.data;
  if ( !v10 || (FieldPlayerServantList = BattleData__getFieldEnemyServantList(v10, 0, 0LL)) == 0LL )
LABEL_17:
    sub_B170D4();
  v11 = FieldPlayerServantList->max_length;
  if ( v11 >= 1 )
  {
    v12 = 0;
    while ( v12 < v11 )
    {
      v13 = FieldPlayerServantList->m_Items[v12];
      if ( !v13 )
        goto LABEL_17;
      v13->fields.overkillTargetId = -1;
      v11 = FieldPlayerServantList->max_length;
      if ( (int)++v12 >= v11 )
        return;
    }
    goto LABEL_16;
  }
}


void __fastcall BattleLogic__resetReducedHpAll(BattleLogic_o *this, const MethodInfo *method)
{
  BattleData_o *data; // x0
  BattleServantData_array *FieldServantList; // x0
  __int64 v4; // x1
  __int64 v5; // x2
  int max_length; // w8
  BattleServantData_array *v7; // x19
  unsigned int v8; // w20
  BattleServantData_o *v9; // x0

  data = this->fields.data;
  if ( !data )
    goto LABEL_10;
  FieldServantList = BattleData__getFieldServantList(data, 0, 0LL);
  if ( !FieldServantList )
    goto LABEL_10;
  max_length = FieldServantList->max_length;
  v7 = FieldServantList;
  if ( max_length >= 1 )
  {
    v8 = 0;
    while ( 1 )
    {
      if ( v8 >= max_length )
      {
        sub_B17100(FieldServantList, v4, v5);
        sub_B170A0();
      }
      v9 = v7->m_Items[v8];
      if ( !v9 )
        break;
      BattleServantData__resetReducedHp(v9, 0LL);
      max_length = v7->max_length;
      if ( (int)++v8 >= max_length )
        return;
    }
LABEL_10:
    sub_B170D4();
  }
}


void __fastcall BattleLogic__resetTimeAcceleration(BattleLogic_o *this, bool skip, const MethodInfo *method)
{
  BattlePerformance_o *v4; // x0
  BattlePerformance_o *perf; // x0

  if ( !skip )
  {
    perf = this->fields.perf;
    if ( perf )
    {
      BattlePerformance__SetTimeScale(perf, this->fields.prevScaleTime, 0LL);
      return;
    }
    goto LABEL_8;
  }
  if ( !this->fields.skipflg )
    return;
  v4 = this->fields.perf;
  if ( !v4 )
LABEL_8:
    sub_B170D4();
  BattlePerformance__SetTimeScale(v4, this->fields.prevSkipScaleTime, 0LL);
  this->fields.skipflg = 0;
}


void __fastcall BattleLogic__resetTimeFirstAcceleration(BattleLogic_o *this, const MethodInfo *method)
{
  BattlePerformance_o *perf; // x0

  perf = this->fields.perf;
  if ( !perf )
    sub_B170D4();
  BattlePerformance__SetTimeScale(perf, this->fields.prevFirstScaleTime, 0LL);
}


void __fastcall BattleLogic__resetTimeFixAcceleration(BattleLogic_o *this, const MethodInfo *method)
{
  BattlePerformance_o *perf; // x0

  perf = this->fields.perf;
  if ( !perf )
    sub_B170D4();
  BattlePerformance__SetTimeScale(perf, this->fields.prevFixScaleTime, 0LL);
}


void __fastcall BattleLogic__responseResultBattle(BattleLogic_o *this, const MethodInfo *method)
{
  __int64 v3; // x1
  __int64 v4; // x1
  __int64 v5; // x1
  __int64 v6; // x1
  __int64 v7; // x1
  struct BattleData_o *data; // x0
  struct QuestEntity_o *quest_ent; // x22
  WebViewManager_o *Instance; // x0
  WarQuestSelectionMaster_o *MasterData_WarQuestSelectionMaster; // x0
  int32_t id; // w21
  QuestPhaseMaster_o *v13; // x20
  int32_t Phase; // w0
  System_Int32_array *BranchQuestIds; // x0
  __int64 v16; // x1
  __int64 v17; // x2
  __int64 v18; // x8
  System_Int32_array *v19; // x20
  unsigned __int64 v20; // x22
  int32_t v21; // w21
  int32_t v22; // w20
  BattleData_o *v23; // x0
  BattleData_o *v24; // x0
  const MethodInfo *v25; // x1
  PlayMakerFSM_o *fsm; // x0

  if ( (byte_40F7373 & 1) == 0 )
  {
    sub_B16FFC(&BattleData_TypeInfo, method);
    sub_B16FFC(&Method_DataManager_GetMasterData_QuestPhaseMaster___, v3);
    sub_B16FFC(&LastUsedDeckNumberManager_TypeInfo, v4);
    sub_B16FFC(&OptionManager_TypeInfo, v5);
    sub_B16FFC(&Method_SingletonMonoBehaviour_DataManager__get_Instance__, v6);
    sub_B16FFC(&StringLiteral_5481, v7);
    byte_40F7373 = 1;
  }
  data = this->fields.data;
  if ( !data )
    goto LABEL_38;
  quest_ent = data->fields.quest_ent;
  if ( BattleData__isResultWin(data, 0LL) )
  {
    if ( (BYTE3(OptionManager_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0
      && !OptionManager_TypeInfo->_2.cctor_finished )
    {
      j_il2cpp_runtime_class_init_0(OptionManager_TypeInfo);
    }
    if ( OptionManager__GetAutoSelectParty(0LL) )
    {
      if ( !quest_ent )
        goto LABEL_38;
      if ( quest_ent->fields.afterClear == 1 )
      {
        Instance = SingletonMonoBehaviour_WebViewManager___get_Instance((const MethodInfo_2A54F38 *)Method_SingletonMonoBehaviour_DataManager__get_Instance__);
        if ( !Instance )
          goto LABEL_38;
        MasterData_WarQuestSelectionMaster = DataManager__GetMasterData_WarQuestSelectionMaster_(
                                               (DataManager_o *)Instance,
                                               (const MethodInfo_18C3284 *)Method_DataManager_GetMasterData_QuestPhaseMaster___);
        if ( !this->fields.data )
          goto LABEL_38;
        id = quest_ent->fields.id;
        v13 = (QuestPhaseMaster_o *)MasterData_WarQuestSelectionMaster;
        Phase = BattleData__getPhase(this->fields.data, 0LL);
        if ( !v13 )
          goto LABEL_38;
        BranchQuestIds = QuestPhaseMaster__GetBranchQuestIds(v13, id, Phase, 0LL);
        if ( BranchQuestIds )
        {
          v18 = *(_QWORD *)&BranchQuestIds->max_length;
          v19 = BranchQuestIds;
          if ( (int)v18 >= 1 )
          {
            v20 = 0LL;
            do
            {
              if ( v20 >= (unsigned int)v18 )
              {
                sub_B17100(BranchQuestIds, v16, v17);
                sub_B170A0();
              }
              v21 = v19->m_Items[v20 + 1];
              if ( (BYTE3(LastUsedDeckNumberManager_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0
                && !LastUsedDeckNumberManager_TypeInfo->_2.cctor_finished )
              {
                j_il2cpp_runtime_class_init_0(LastUsedDeckNumberManager_TypeInfo);
              }
              LastUsedDeckNumberManager__DeleteData(v21, 0LL);
              LODWORD(v18) = v19->max_length;
              ++v20;
            }
            while ( (__int64)v20 < (int)v18 );
          }
        }
        else
        {
          v22 = quest_ent->fields.id;
          if ( (BYTE3(LastUsedDeckNumberManager_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0
            && !LastUsedDeckNumberManager_TypeInfo->_2.cctor_finished )
          {
            j_il2cpp_runtime_class_init_0(LastUsedDeckNumberManager_TypeInfo);
          }
          LastUsedDeckNumberManager__DeleteData(v22, 0LL);
        }
        if ( (BYTE3(LastUsedDeckNumberManager_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0
          && !LastUsedDeckNumberManager_TypeInfo->_2.cctor_finished )
        {
          j_il2cpp_runtime_class_init_0(LastUsedDeckNumberManager_TypeInfo);
        }
        LastUsedDeckNumberManager__WriteData(0LL);
      }
    }
  }
  if ( (BYTE3(BattleData_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0 && !BattleData_TypeInfo->_2.cctor_finished )
    j_il2cpp_runtime_class_init_0(BattleData_TypeInfo);
  BattleData__deleteSaveData(0LL);
  v23 = this->fields.data;
  if ( !v23
    || (BattleData__SaveNoSkipDeadFirstIdList(v23, 0LL), (v24 = this->fields.data) == 0LL)
    || (BattleData__changeTutorialBattleSpeed(v24, 0LL),
        BattleLogic__SaveCutinFirstIdList(this, v25),
        (fsm = this->fields.fsm) == 0LL) )
  {
LABEL_38:
    sub_B170D4();
  }
  PlayMakerFSM__SendEvent(fsm, (System_String_o *)StringLiteral_5481, 0LL);
}


void __fastcall BattleLogic__selectTactical(BattleLogic_o *this, System_String_o *endproc, const MethodInfo *method)
{
  System_String_o *v3; // x19
  __int64 v5; // x1
  BattlePerformance_o *perf; // x0
  BattlePerformance_o *v7; // x0
  BattleData_o *data; // x0
  BattleEventTutorial_o *eventTutorial; // x21
  int32_t DispWaveCount; // w0
  struct BattleData_o *v11; // x8
  BattleData_o *v12; // x0
  BattleData_o *v13; // x0
  BattleServantData_array *FieldPlayerServantList; // x0
  __int64 v15; // x1
  __int64 v16; // x2
  int max_length; // w8
  BattleServantData_array *v18; // x21
  unsigned int v19; // w22
  BattleServantData_o *v20; // x0
  BattleData_o *v21; // x0
  int v22; // w8
  BattleServantData_array *v23; // x21
  unsigned int v24; // w22
  BattleServantData_o *v25; // x0
  struct BattleData_o *v26; // x0
  BattleServantData_o *ServantData; // x0
  BattleServantData_o *v28; // x21
  BattleLogicTarget_o *logictarget; // x0
  struct BattleData_o *v30; // x8
  struct BattleData_o *v31; // x8
  System_Collections_Generic_List_double__o *chainTypeList; // x0
  BattleData_o *v33; // x0
  struct BattleData_o *v34; // x0
  BattlePerformance_o *v35; // x0

  v3 = endproc;
  if ( (byte_40F73BE & 1) == 0 )
  {
    sub_B16FFC(&Method_System_Collections_Generic_List_double__Clear__, endproc);
    sub_B16FFC(&StringLiteral_13402, v5);
    byte_40F73BE = 1;
  }
  perf = this->fields.perf;
  if ( !perf )
    goto LABEL_41;
  BattlePerformance__SetTimeScale(perf, 1.0, 0LL);
  v7 = this->fields.perf;
  if ( !v7 )
    goto LABEL_41;
  BattlePerformance__setPositionModeTac(v7, 0LL);
  data = this->fields.data;
  if ( !data )
    goto LABEL_41;
  eventTutorial = this->fields.eventTutorial;
  DispWaveCount = BattleData__getDispWaveCount(data, 0LL);
  v11 = this->fields.data;
  if ( !v11 || !eventTutorial )
    goto LABEL_41;
  if ( BattleEventTutorial__CheckHasTacticalPhaseTutorial(eventTutorial, DispWaveCount, v11->fields.turnCount, 0LL) )
    goto LABEL_11;
  v12 = this->fields.data;
  if ( !v12 )
    goto LABEL_41;
  if ( BattleData__isTutorial(v12, 0LL) )
LABEL_11:
    v3 = (System_String_o *)StringLiteral_13402;
  v13 = this->fields.data;
  if ( !v13 )
    goto LABEL_41;
  FieldPlayerServantList = BattleData__getFieldPlayerServantList(v13, 0LL);
  if ( !FieldPlayerServantList )
    goto LABEL_41;
  max_length = FieldPlayerServantList->max_length;
  v18 = FieldPlayerServantList;
  if ( max_length >= 1 )
  {
    v19 = 0;
    while ( v19 < max_length )
    {
      v20 = v18->m_Items[v19];
      if ( !v20 )
        goto LABEL_41;
      BattleServantData__initTacticalFaze(v20, 0LL);
      max_length = v18->max_length;
      if ( (int)++v19 >= max_length )
        goto LABEL_19;
    }
LABEL_42:
    sub_B17100(FieldPlayerServantList, v15, v16);
    sub_B170A0();
  }
LABEL_19:
  v21 = this->fields.data;
  if ( !v21 )
    goto LABEL_41;
  FieldPlayerServantList = BattleData__getFieldEnemyServantList(v21, 0, 0LL);
  if ( !FieldPlayerServantList )
    goto LABEL_41;
  v22 = FieldPlayerServantList->max_length;
  v23 = FieldPlayerServantList;
  if ( v22 >= 1 )
  {
    v24 = 0;
    while ( v24 < v22 )
    {
      v25 = v23->m_Items[v24];
      if ( !v25 )
        goto LABEL_41;
      BattleServantData__initTacticalFaze(v25, 0LL);
      v22 = v23->max_length;
      if ( (int)++v24 >= v22 )
        goto LABEL_26;
    }
    goto LABEL_42;
  }
LABEL_26:
  v26 = this->fields.data;
  if ( !v26 )
    goto LABEL_41;
  ServantData = BattleData__getServantData(v26, v26->fields.globaltargetId, 0LL);
  if ( !ServantData || (v28 = ServantData, !BattleServantData__isAlive(ServantData, 0, 0LL)) || !v28->fields.isEntry )
  {
    logictarget = this->fields.logictarget;
    if ( !logictarget )
      goto LABEL_41;
    BattleLogicTarget__updateGlobalTarget(logictarget, 0LL);
  }
  v30 = this->fields.data;
  if ( !v30 )
    goto LABEL_41;
  v30->fields.initturn = 0;
  v31 = this->fields.data;
  if ( !v31 )
    goto LABEL_41;
  chainTypeList = v31->fields.chainTypeList;
  if ( !chainTypeList )
    goto LABEL_41;
  System_Collections_Generic_List_double___Clear(
    chainTypeList,
    (const MethodInfo_2ED4568 *)Method_System_Collections_Generic_List_double__Clear__);
  v33 = this->fields.data;
  if ( !v33 )
    goto LABEL_41;
  BattleData__ResetEnemyEntryCount(v33, 0LL);
  v34 = this->fields.data;
  if ( !v34 )
    goto LABEL_41;
  if ( v34->fields.tutorialId != 1 )
    BattleData__SaveTurnData(v34, 0LL);
  v35 = this->fields.perf;
  if ( !v35 )
LABEL_41:
    sub_B170D4();
  BattlePerformance__startTac(v35, v3, 0LL);
}


void __fastcall BattleLogic__sendFsmEvent(BattleLogic_o *this, System_String_o *evstr, const MethodInfo *method)
{
  PlayMakerFSM_o *fsm; // x0

  fsm = this->fields.fsm;
  if ( !fsm )
    sub_B170D4();
  PlayMakerFSM__SendEvent(fsm, evstr, 0LL);
}


// local variable allocation has failed, the output may be wrong!
void __fastcall BattleLogic__sendLoseRetireClearEvent(BattleLogic_o *this, const MethodInfo *method)
{
  __int64 v2; // x2
  __int64 v4; // x1
  __int64 v5; // x1
  __int64 v6; // x1
  __int64 v7; // x1
  __int64 v8; // x20
  UnityEngine_Transform_o *transform; // x0
  __int64 v10; // x1
  __int64 v11; // x2
  struct BattlePerformance_o *perf; // x8
  struct UnityEngine_GameObject_array *p_actorlist; // x22
  __int64 v14; // x8
  unsigned __int64 v15; // x23
  UnityEngine_GameObject_o **m_Items; // x25
  UnityEngine_Object_o *v17; // x21
  UnityEngine_GameObject_o *v18; // x0
  UnityEngine_Transform_o *v19; // x21
  UnityEngine_GameObject_o *v20; // x0
  int v21; // s8
  UnityEngine_Transform_o *v22; // x0
  int v23; // s1
  UnityEngine_GameObject_o *v24; // x0
  int v25; // s9
  UnityEngine_Transform_o *v26; // x0
  int v27; // s2
  int v28; // s0
  int v29; // s1
  struct BattlePerformance_o *v30; // x8
  struct BattlePerformanceStatus_o *statusPerf; // x8
  struct BattlePerformancePlayer_o *playerPerf; // x8
  struct BattleServantParamComponent_array *list_param; // x21
  __int64 v34; // x8
  unsigned __int64 v35; // x22
  BattleServantParamComponent_o **v36; // x23
  UnityEngine_Object_o *v37; // x20
  BattleServantParamComponent_o *v38; // x0
  UnityEngine_Component_o *v39; // x0
  UnityEngine_GameObject_o *gameObject; // x0
  UnityEngine_Object_o *Component_srcLineSprite; // x20
  struct BattlePerformance_o *v42; // x8
  struct BattlePerformanceStatus_o *v43; // x8
  struct BattlePerformanceMaster_o *masterPerf; // x8
  UnityEngine_GameObject_o *master_root; // x0
  struct BattlePerformance_o *v46; // x8
  UnityEngine_Component_o *commandPerf; // x0
  UnityEngine_GameObject_o *v48; // x0
  struct BattleData_o *data; // x8
  struct BattleData_o *v50; // x8
  struct BattleData_o *v51; // x8
  PlayMakerFSM_o *fsm; // x0
  System_RuntimeFieldHandle_o v53; // 0:w1.4

  if ( (byte_40F73A3 & 1) == 0 )
  {
    sub_B16FFC(&Method_UnityEngine_GameObject_GetComponent_BoxCollider___, method);
    sub_B16FFC(&UnityEngine_Object_TypeInfo, v4);
    sub_B16FFC(&float___TypeInfo, v5);
    sub_B16FFC(
      &Field__PrivateImplementationDetails__80B6AE9E8CD459AA44BB61811CD6968CA8ACB99B2086B227B54D3EE77A09E015,
      v6);
    sub_B16FFC(&StringLiteral_8418, v7);
    byte_40F73A3 = 1;
  }
  v8 = sub_B17014(float___TypeInfo, 3LL, v2);
  v53.fields.value = Field__PrivateImplementationDetails__80B6AE9E8CD459AA44BB61811CD6968CA8ACB99B2086B227B54D3EE77A09E015;
  System_Runtime_CompilerServices_RuntimeHelpers__InitializeArray_42629164((System_Array_o *)v8, v53, 0LL);
  perf = this->fields.perf;
  if ( !perf )
    goto LABEL_60;
  p_actorlist = perf->fields.p_actorlist;
  if ( !p_actorlist )
    goto LABEL_60;
  v14 = *(_QWORD *)&p_actorlist->max_length;
  if ( (int)v14 >= 1 )
  {
    v15 = 0LL;
    m_Items = p_actorlist->m_Items;
    while ( v15 < (unsigned int)v14 )
    {
      v17 = (UnityEngine_Object_o *)m_Items[v15];
      if ( (BYTE3(UnityEngine_Object_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0
        && !UnityEngine_Object_TypeInfo->_2.cctor_finished )
      {
        j_il2cpp_runtime_class_init_0(UnityEngine_Object_TypeInfo);
      }
      transform = (UnityEngine_Transform_o *)UnityEngine_Object__op_Equality(v17, 0LL, 0LL);
      if ( ((unsigned __int8)transform & 1) == 0 )
      {
        if ( v15 >= p_actorlist->max_length )
          break;
        v18 = m_Items[v15];
        if ( !v18 )
          goto LABEL_60;
        transform = UnityEngine_GameObject__get_transform(v18, 0LL);
        if ( !v8 )
          goto LABEL_60;
        if ( v15 >= *(unsigned int *)(v8 + 24) || v15 >= p_actorlist->max_length )
          break;
        v19 = transform;
        v20 = m_Items[v15];
        if ( !v20 )
          goto LABEL_60;
        v21 = *(_DWORD *)(v8 + 32 + 4 * v15);
        v22 = UnityEngine_GameObject__get_transform(v20, 0LL);
        if ( !v22 )
          goto LABEL_60;
        *(UnityEngine_Vector3_o *)(&v23 - 1) = UnityEngine_Transform__get_localPosition(v22, 0LL);
        if ( v15 >= p_actorlist->max_length )
          break;
        v24 = m_Items[v15];
        if ( !v24 )
          goto LABEL_60;
        v25 = v23;
        v26 = UnityEngine_GameObject__get_transform(v24, 0LL);
        if ( !v26 )
          goto LABEL_60;
        *(UnityEngine_Vector3_o *)(&v27 - 2) = UnityEngine_Transform__get_localPosition(v26, 0LL);
        if ( !v19 )
          goto LABEL_60;
        v28 = v21;
        v29 = v25;
        UnityEngine_Transform__set_localPosition(v19, *(UnityEngine_Vector3_o *)(&v27 - 2), 0LL);
      }
      LODWORD(v14) = p_actorlist->max_length;
      if ( (__int64)++v15 >= (int)v14 )
        goto LABEL_25;
    }
LABEL_61:
    sub_B17100(transform, v10, v11);
    sub_B170A0();
  }
LABEL_25:
  v30 = this->fields.perf;
  if ( !v30 )
    goto LABEL_60;
  statusPerf = v30->fields.statusPerf;
  if ( !statusPerf )
    goto LABEL_60;
  playerPerf = statusPerf->fields.playerPerf;
  if ( !playerPerf )
    goto LABEL_60;
  list_param = playerPerf->fields.list_param;
  if ( !list_param )
    goto LABEL_60;
  v34 = *(_QWORD *)&list_param->max_length;
  if ( (int)v34 >= 1 )
  {
    v35 = 0LL;
    v36 = list_param->m_Items;
    while ( v35 < (unsigned int)v34 )
    {
      v37 = (UnityEngine_Object_o *)v36[v35];
      if ( (BYTE3(UnityEngine_Object_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0
        && !UnityEngine_Object_TypeInfo->_2.cctor_finished )
      {
        j_il2cpp_runtime_class_init_0(UnityEngine_Object_TypeInfo);
      }
      transform = (UnityEngine_Transform_o *)UnityEngine_Object__op_Equality(v37, 0LL, 0LL);
      if ( ((unsigned __int8)transform & 1) == 0 )
      {
        if ( v35 >= list_param->max_length )
          goto LABEL_61;
        v38 = v36[v35];
        if ( !v38 )
          goto LABEL_60;
        BattleServantParamComponent__setCloseMode(v38, 0LL);
        if ( v35 >= list_param->max_length )
          goto LABEL_61;
        v39 = (UnityEngine_Component_o *)v36[v35];
        if ( !v39 )
          goto LABEL_60;
        gameObject = UnityEngine_Component__get_gameObject(v39, 0LL);
        if ( !gameObject )
          goto LABEL_60;
        Component_srcLineSprite = (UnityEngine_Object_o *)UnityEngine_GameObject__GetComponent_srcLineSprite_(
                                                            gameObject,
                                                            (const MethodInfo_19D14E0 *)Method_UnityEngine_GameObject_GetComponent_BoxCollider___);
        if ( (BYTE3(UnityEngine_Object_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0
          && !UnityEngine_Object_TypeInfo->_2.cctor_finished )
        {
          j_il2cpp_runtime_class_init_0(UnityEngine_Object_TypeInfo);
        }
        transform = (UnityEngine_Transform_o *)UnityEngine_Object__op_Inequality(Component_srcLineSprite, 0LL, 0LL);
        if ( ((unsigned __int8)transform & 1) != 0 )
        {
          if ( !Component_srcLineSprite )
            goto LABEL_60;
          UnityEngine_Collider__set_enabled((UnityEngine_Collider_o *)Component_srcLineSprite, 0, 0LL);
        }
      }
      LODWORD(v34) = list_param->max_length;
      if ( (__int64)++v35 >= (int)v34 )
        goto LABEL_48;
    }
    goto LABEL_61;
  }
LABEL_48:
  v42 = this->fields.perf;
  if ( !v42 )
    goto LABEL_60;
  v43 = v42->fields.statusPerf;
  if ( !v43 )
    goto LABEL_60;
  masterPerf = v43->fields.masterPerf;
  if ( !masterPerf )
    goto LABEL_60;
  master_root = masterPerf->fields.master_root;
  if ( !master_root )
    goto LABEL_60;
  UnityEngine_GameObject__SetActive(master_root, 0, 0LL);
  v46 = this->fields.perf;
  if ( !v46 )
    goto LABEL_60;
  commandPerf = (UnityEngine_Component_o *)v46->fields.commandPerf;
  if ( !commandPerf )
    goto LABEL_60;
  v48 = UnityEngine_Component__get_gameObject(commandPerf, 0LL);
  if ( !v48 )
    goto LABEL_60;
  UnityEngine_GameObject__SetActive(v48, 0, 0LL);
  data = this->fields.data;
  if ( !data
    || (data->fields.isItemResultSkip = 1, (v50 = this->fields.data) == 0LL)
    || (v50->fields.winResult = 3, (v51 = this->fields.data) == 0LL)
    || (v51->fields.isLoseRetireClear = 1, (fsm = this->fields.fsm) == 0LL) )
  {
LABEL_60:
    sub_B170D4();
  }
  PlayMakerFSM__SendEvent(fsm, (System_String_o *)StringLiteral_8418, 0LL);
}


// local variable allocation has failed, the output may be wrong!
void __fastcall BattleLogic__sendWinBattleEvent(BattleLogic_o *this, int32_t winResult, const MethodInfo *method)
{
  struct BattleData_o *data; // x8
  PlayMakerFSM_o *fsm; // x0

  if ( (byte_40F73A2 & 1) == 0 )
  {
    sub_B16FFC(&StringLiteral_5727, *(_QWORD *)&winResult);
    byte_40F73A2 = 1;
  }
  data = this->fields.data;
  if ( !data || (data->fields.winResult = winResult, (fsm = this->fields.fsm) == 0LL) )
    sub_B170D4();
  PlayMakerFSM__SendEvent(fsm, (System_String_o *)StringLiteral_5727, 0LL);
}


// local variable allocation has failed, the output may be wrong!
void __fastcall BattleLogic__setActiviteUnusedGameobject(BattleLogic_o *this, bool active, const MethodInfo *method)
{
  __int64 v5; // x1
  __int64 v6; // x1
  __int64 v7; // x1
  __int64 v8; // x1
  __int64 v9; // x1
  struct System_Collections_Generic_List_GameObject__o *unusedGameobjects; // x20
  __int64 size; // x21
  __int64 v12; // x22
  UnityEngine_Object_o *v13; // x20
  struct System_Collections_Generic_List_GameObject__o *v14; // x20
  UnityEngine_GameObject_o *v15; // x0
  BattleLogic_c *v16; // x0
  struct System_String_array *unusedGameObjectNames; // x8
  struct System_Collections_Generic_List_GameObject__o *v18; // x0
  __int64 v19; // x20
  __int64 v20; // x1
  __int64 v21; // x2
  unsigned __int64 v22; // x22
  signed __int64 v23; // x23
  BattleLogic_c *v24; // x0
  struct System_String_array *v25; // x8
  UnityEngine_GameObject_o *v26; // x0
  EventMissionProgressRequest_Argument_ProgressData_o *v27; // x20
  struct System_Collections_Generic_List_GameObject__o *v28; // x0

  if ( (byte_40F735B & 1) == 0 )
  {
    sub_B16FFC(&BattleLogic_TypeInfo, active);
    sub_B16FFC(&Method_System_Collections_Generic_List_GameObject__Add__, v5);
    sub_B16FFC(&Method_System_Collections_Generic_List_GameObject__Clear__, v6);
    sub_B16FFC(&Method_System_Collections_Generic_List_GameObject__get_Count__, v7);
    sub_B16FFC(&Method_System_Collections_Generic_List_GameObject__get_Item__, v8);
    sub_B16FFC(&UnityEngine_Object_TypeInfo, v9);
    byte_40F735B = 1;
  }
  if ( active )
  {
    unusedGameobjects = this->fields.unusedGameobjects;
    if ( !unusedGameobjects )
      goto LABEL_37;
    size = unusedGameobjects->fields._size;
    if ( (int)size >= 1 )
    {
      v12 = 4LL;
      do
      {
        if ( v12 - 4 >= (unsigned __int64)(unsigned int)unusedGameobjects->fields._size )
          System_ThrowHelper__ThrowArgumentOutOfRangeException_41329284(0LL);
        v13 = (UnityEngine_Object_o *)*((_QWORD *)&unusedGameobjects->fields._items->obj.klass + v12);
        if ( (BYTE3(UnityEngine_Object_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0
          && !UnityEngine_Object_TypeInfo->_2.cctor_finished )
        {
          j_il2cpp_runtime_class_init_0(UnityEngine_Object_TypeInfo);
        }
        if ( UnityEngine_Object__op_Inequality(v13, 0LL, 0LL) )
        {
          v14 = this->fields.unusedGameobjects;
          if ( !v14 )
            goto LABEL_37;
          if ( v12 - 4 >= (unsigned __int64)(unsigned int)v14->fields._size )
            System_ThrowHelper__ThrowArgumentOutOfRangeException_41329284(0LL);
          v15 = (UnityEngine_GameObject_o *)*((_QWORD *)&v14->fields._items->obj.klass + v12);
          if ( !v15 )
            goto LABEL_37;
          UnityEngine_GameObject__SetActive(v15, 1, 0LL);
        }
        if ( v12 - 3 >= size )
          return;
        unusedGameobjects = this->fields.unusedGameobjects;
        ++v12;
      }
      while ( unusedGameobjects );
      goto LABEL_37;
    }
  }
  else
  {
    v16 = BattleLogic_TypeInfo;
    if ( (BYTE3(BattleLogic_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0 && !BattleLogic_TypeInfo->_2.cctor_finished )
    {
      j_il2cpp_runtime_class_init_0(BattleLogic_TypeInfo);
      v16 = BattleLogic_TypeInfo;
    }
    unusedGameObjectNames = v16->static_fields->unusedGameObjectNames;
    if ( !unusedGameObjectNames )
      goto LABEL_37;
    v18 = this->fields.unusedGameobjects;
    if ( !v18 )
      goto LABEL_37;
    v19 = *(_QWORD *)&unusedGameObjectNames->max_length;
    System_Collections_Generic_List_XWeaponTrail_Element___Clear(
      (System_Collections_Generic_List_XWeaponTrail_Element__o *)v18,
      (const MethodInfo_2F260E0 *)Method_System_Collections_Generic_List_GameObject__Clear__);
    if ( (int)v19 >= 1 )
    {
      v22 = 0LL;
      v23 = (int)v19;
      while ( 1 )
      {
        v24 = BattleLogic_TypeInfo;
        if ( (BYTE3(BattleLogic_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0
          && !BattleLogic_TypeInfo->_2.cctor_finished )
        {
          j_il2cpp_runtime_class_init_0(BattleLogic_TypeInfo);
          v24 = BattleLogic_TypeInfo;
        }
        v25 = v24->static_fields->unusedGameObjectNames;
        if ( !v25 )
          break;
        if ( v22 >= v25->max_length )
        {
          sub_B17100(v24, v20, v21);
          sub_B170A0();
        }
        v26 = UnityEngine_GameObject__Find(v25->m_Items[v22], 0LL);
        if ( !v26 )
          break;
        v27 = (EventMissionProgressRequest_Argument_ProgressData_o *)v26;
        UnityEngine_GameObject__SetActive(v26, 0, 0LL);
        v28 = this->fields.unusedGameobjects;
        if ( !v28 )
          break;
        System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData___Add(
          (System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData__o *)v28,
          v27,
          (const MethodInfo_2F25CD8 *)Method_System_Collections_Generic_List_GameObject__Add__);
        if ( (__int64)++v22 >= v23 )
          return;
      }
LABEL_37:
      sub_B170D4();
    }
  }
}


bool __fastcall BattleLogic__setDamageSideEffect(
        BattleLogic_o *this,
        BattleActionData_o *mainAction,
        int32_t attackId,
        int32_t targetId,
        BattleCommandData_o *command,
        const MethodInfo *method)
{
  BattleActionData_o *v9; // x27
  __int64 v11; // x1
  __int64 v12; // x1
  BattleData_o *data; // x0
  BattleServantData_o *ServantData; // x0
  BattleServantData_o *v15; // x21
  BattleServantData_o *v16; // x0
  BattleServantData_o *v17; // x20
  BattleBuffData_BuffData_array *DamageSideEffect; // x0
  BattleBuffData_BuffData_array *v19; // x25
  WebViewManager_o *Instance; // x0
  WarQuestSelectionMaster_o *MasterData_WarQuestSelectionMaster; // x0
  __int64 v22; // x1
  __int64 v23; // x2
  __int64 v24; // x3
  __int64 v25; // x4
  int max_length; // w8
  SkillLvMaster_o *v27; // x22
  __int64 v28; // x19
  BattleBuffData_BuffData_o *v29; // x26
  BattleActionData_o *v30; // x25
  struct System_Int32_array *vals; // x8
  BattleServantData_o *v32; // x23
  BattleServantData_o *v33; // x21
  BattleActionData_o *v34; // x20
  SkillLvMaster_o *v35; // x24
  SkillLvEntity_o *Entity; // x0
  BattleLogic_o *v37; // x22
  BattleLogicFunction_o *logicFunction; // x27
  System_Int32_array *funcId; // x28
  DataVals_array *DataValsList; // x0
  bool v41; // w26
  BattleBuffData_BuffData_o **m_Items; // [xsp+30h] [xbp-60h]
  BattleBuffData_BuffData_array *v44; // [xsp+38h] [xbp-58h]

  v9 = mainAction;
  if ( (byte_40F73E1 & 1) == 0 )
  {
    sub_B16FFC(&BattleActionData_TypeInfo, mainAction);
    sub_B16FFC(&Method_DataManager_GetMasterData_SkillLvMaster___, v11);
    sub_B16FFC(&Method_SingletonMonoBehaviour_DataManager__get_Instance__, v12);
    byte_40F73E1 = 1;
  }
  data = this->fields.data;
  if ( !data )
    goto LABEL_26;
  ServantData = BattleData__getServantData(data, attackId, 0LL);
  if ( !this->fields.data )
    goto LABEL_26;
  v15 = ServantData;
  v16 = BattleData__getServantData(this->fields.data, targetId, 0LL);
  if ( v15 )
  {
    if ( !v9 )
      goto LABEL_26;
    v17 = v16;
    if ( !BattleActionData__isReflectedDamageSideEffect(v9, targetId, 0LL) )
    {
      if ( !v17 )
        goto LABEL_26;
      DamageSideEffect = BattleServantData__getDamageSideEffect(v17, command, v15, 0LL);
      if ( !DamageSideEffect )
        goto LABEL_26;
      v19 = DamageSideEffect;
      if ( *(_QWORD *)&DamageSideEffect->max_length )
      {
        BattleActionData__addReflectDamageSideEffect(v9, targetId, 0LL);
        Instance = SingletonMonoBehaviour_WebViewManager___get_Instance((const MethodInfo_2A54F38 *)Method_SingletonMonoBehaviour_DataManager__get_Instance__);
        if ( !Instance )
          goto LABEL_26;
        MasterData_WarQuestSelectionMaster = DataManager__GetMasterData_WarQuestSelectionMaster_(
                                               (DataManager_o *)Instance,
                                               (const MethodInfo_18C3284 *)Method_DataManager_GetMasterData_SkillLvMaster___);
        max_length = v19->max_length;
        if ( max_length >= 1 )
        {
          v27 = (SkillLvMaster_o *)MasterData_WarQuestSelectionMaster;
          v28 = 0LL;
          m_Items = v19->m_Items;
          v44 = v19;
          while ( 1 )
          {
            if ( (unsigned int)v28 >= max_length )
            {
LABEL_27:
              sub_B17100(MasterData_WarQuestSelectionMaster, v22, v23);
              sub_B170A0();
            }
            v29 = m_Items[v28];
            v30 = (BattleActionData_o *)sub_B170CC(BattleActionData_TypeInfo, v22, v23, v24, v25);
            BattleActionData___ctor(v30, 0LL);
            if ( !v30 )
              break;
            v30->fields.actorId = v17->fields.uniqueId;
            v30->fields.targetId = v15->fields.uniqueId;
            if ( !v29 )
              break;
            vals = v29->fields.vals;
            if ( !vals )
              break;
            if ( vals->max_length < 2 )
              goto LABEL_27;
            if ( !v27 )
              break;
            v32 = v15;
            v33 = v17;
            v34 = v9;
            v35 = v27;
            Entity = SkillLvMaster__GetEntity(v27, vals->m_Items[1], vals->m_Items[2], 0LL);
            if ( !Entity )
              break;
            v37 = this;
            logicFunction = this->fields.logicFunction;
            funcId = Entity->fields.funcId;
            DataValsList = SkillLvEntity__getDataValsList(Entity, 0LL);
            if ( !logicFunction )
              break;
            v41 = 1;
            BattleLogicFunction__procList(logicFunction, v30, funcId, DataValsList, 0, 0, 1, 0, 0, 0, 1, 0LL, 0, 0LL);
            v9 = v34;
            BattleActionData__addSideEffectActionData(v34, v30, 2, 0LL);
            ++v28;
            this = v37;
            v17 = v33;
            max_length = v44->max_length;
            v15 = v32;
            v27 = v35;
            if ( (int)v28 >= max_length )
              return v41;
          }
LABEL_26:
          sub_B170D4();
        }
      }
    }
  }
  return 0;
}


void __fastcall BattleLogic__setDrawCard(BattleLogic_o *this, const MethodInfo *method)
{
  struct BattleData_o *data; // x8
  BattlePerformance_o *perf; // x0
  struct BattlePerformance_o *v5; // x8
  BattlePerformanceCommandCard_o *commandPerf; // x0

  data = this->fields.data;
  if ( !data
    || (perf = this->fields.perf) == 0LL
    || (BattlePerformance__registCommandCard(perf, data->fields.draw_commandlist, 0LL), (v5 = this->fields.perf) == 0LL)
    || (commandPerf = v5->fields.commandPerf) == 0LL )
  {
    sub_B170D4();
  }
  BattlePerformanceCommandCard__SetCommandCardEffect(commandPerf, 0LL);
}


void __fastcall BattleLogic__setNextBattle(BattleLogic_o *this, System_String_o *endproc, const MethodInfo *method)
{
  BattleData_o *data; // x0

  data = this->fields.data;
  if ( !data )
    sub_B170D4();
  BattleData__setNextStage(data, 0LL);
}


int32_t __fastcall BattleLogic__setTargetIndex(BattleLogic_o *this, int32_t index, const MethodInfo *method)
{
  BattleData_o *data; // x0

  data = this->fields.data;
  if ( !data )
    sub_B170D4();
  return BattleData__setTargetIndex(data, index, 0LL);
}


void __fastcall BattleLogic__setTimeAcceleration(BattleLogic_o *this, bool skip, const MethodInfo *method)
{
  BattleData_o *data; // x0
  struct BattleData_o *v6; // x8
  int32_t tutorialId; // w9
  BattlePerformance_o *perf; // x0
  struct BattleData_o *v9; // x8
  BattlePerformance_o *v10; // x0
  BattlePerformance_o *v11; // x19
  float timeScale; // s0

  if ( skip )
  {
    if ( this->fields.skipflg )
      return;
    this->fields.prevSkipScaleTime = UnityEngine_Time__get_timeScale(0LL);
    this->fields.skipflg = 1;
  }
  else
  {
    this->fields.prevScaleTime = UnityEngine_Time__get_timeScale(0LL);
  }
  data = this->fields.data;
  if ( !data )
    goto LABEL_23;
  if ( !BattleData__isTutorial(data, 0LL) )
    goto LABEL_13;
  v6 = this->fields.data;
  if ( !v6 )
    goto LABEL_23;
  tutorialId = v6->fields.tutorialId;
  if ( tutorialId == 4 || tutorialId == 3 )
  {
LABEL_12:
    v6->fields.systemflg_acceleration = 2;
LABEL_13:
    v6 = this->fields.data;
    if ( !v6 )
      goto LABEL_23;
    goto LABEL_14;
  }
  if ( tutorialId == 2 )
  {
    if ( v6->fields.turnCount < 3 )
      goto LABEL_13;
    goto LABEL_12;
  }
LABEL_14:
  perf = this->fields.perf;
  if ( !perf )
    goto LABEL_23;
  BattlePerformance__SetTimeScale(perf, (float)v6->fields.systemflg_acceleration, 0LL);
  v9 = this->fields.data;
  if ( !v9 )
    goto LABEL_23;
  if ( v9->fields.systemflg_acceleration >= 2 )
  {
    v10 = this->fields.perf;
    if ( !v10 )
      goto LABEL_23;
    BattlePerformance__SetTimeScale(v10, 2.0, 0LL);
  }
  if ( skip )
  {
    v11 = this->fields.perf;
    timeScale = UnityEngine_Time__get_timeScale(0LL);
    if ( v11 )
    {
      BattlePerformance__SetTimeScale(v11, timeScale + timeScale, 0LL);
      return;
    }
LABEL_23:
    sub_B170D4();
  }
}


void __fastcall BattleLogic__startCommand(BattleLogic_o *this, System_String_o *endproc, const MethodInfo *method)
{
  const MethodInfo *v5; // x2
  System_Collections_IEnumerator_o *started; // x1

  if ( (byte_40F73AC & 1) == 0 )
  {
    sub_B16FFC(&SeManager_TypeInfo, endproc);
    byte_40F73AC = 1;
  }
  if ( (BYTE3(SeManager_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0 && !SeManager_TypeInfo->_2.cctor_finished )
    j_il2cpp_runtime_class_init_0(SeManager_TypeInfo);
  SeManager__PlayCommonSe(5, 0LL);
  started = BattleLogic__startCommandIE(this, endproc, v5);
  UnityEngine_MonoBehaviour__StartCoroutine_34804316((UnityEngine_MonoBehaviour_o *)this, started, 0LL);
}


System_Collections_IEnumerator_o *__fastcall BattleLogic__startCommandIE(
        BattleLogic_o *this,
        System_String_o *endproc,
        const MethodInfo *method)
{
  __int64 v3; // x3
  __int64 v4; // x4
  BattleLogic__startCommandIE_d__203_o *v7; // x21

  if ( (byte_40F73AD & 1) == 0 )
  {
    sub_B16FFC(&BattleLogic__startCommandIE_d__203_TypeInfo, endproc);
    byte_40F73AD = 1;
  }
  v7 = (BattleLogic__startCommandIE_d__203_o *)sub_B170CC(
                                                 BattleLogic__startCommandIE_d__203_TypeInfo,
                                                 endproc,
                                                 method,
                                                 v3,
                                                 v4);
  BattleLogic__startCommandIE_d__203___ctor(v7, 0, 0LL);
  if ( !v7 )
    sub_B170D4();
  v7->fields.__4__this = this;
  sub_B16F98(&v7->fields.__4__this, this);
  v7->fields.endproc = endproc;
  sub_B16F98(&v7->fields.endproc, endproc);
  return (System_Collections_IEnumerator_o *)v7;
}


void __fastcall BattleLogic__startCommandSpellEffect(BattleLogic_o *this, const MethodInfo *method)
{
  __int64 v3; // x1
  __int64 v4; // x1
  UserGameEntity_o *SelfUserGame; // x0
  BattleLogic_o *SpellImageIdBattle; // x0
  const MethodInfo *v7; // x2
  System_String_o *CommandSpellAssetName; // x20
  __int64 v9; // x1
  __int64 v10; // x2
  __int64 v11; // x3
  __int64 v12; // x4
  AssetLoader_LoadEndDataHandler_o *v13; // x21

  if ( (byte_40F73C9 & 1) == 0 )
  {
    sub_B16FFC(&AssetManager_TypeInfo, method);
    sub_B16FFC(&Method_BattleLogic_endLoadCommandSPell__, v3);
    sub_B16FFC(&AssetLoader_LoadEndDataHandler_TypeInfo, v4);
    byte_40F73C9 = 1;
  }
  SelfUserGame = UserGameMaster__getSelfUserGame(0LL);
  if ( !SelfUserGame )
    sub_B170D4();
  SpellImageIdBattle = (BattleLogic_o *)UserGameEntity__get_SpellImageIdBattle(SelfUserGame, 0LL);
  CommandSpellAssetName = BattleLogic__GetCommandSpellAssetName(SpellImageIdBattle, (int32_t)SpellImageIdBattle, v7);
  v13 = (AssetLoader_LoadEndDataHandler_o *)sub_B170CC(AssetLoader_LoadEndDataHandler_TypeInfo, v9, v10, v11, v12);
  AssetLoader_LoadEndDataHandler___ctor(v13, (Il2CppObject *)this, Method_BattleLogic_endLoadCommandSPell__, 0LL);
  if ( (BYTE3(AssetManager_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0 && !AssetManager_TypeInfo->_2.cctor_finished )
    j_il2cpp_runtime_class_init_0(AssetManager_TypeInfo);
  AssetManager__loadAssetStorage(CommandSpellAssetName, v13, 1, 0LL);
}


// local variable allocation has failed, the output may be wrong!
void __fastcall BattleLogic__startContinue(BattleLogic_o *this, bool isProgress, const MethodInfo *method)
{
  __int64 v5; // x1
  __int64 v6; // x1
  BattleData_o *data; // x0
  const MethodInfo *v8; // x2
  BattlePerformance_o *perf; // x0
  BattleData_o *v10; // x0
  int32_t QuestId; // w20
  WebViewManager_o *Instance; // x0
  BattleData_o *v13; // x8
  AdManager_o *v14; // x19
  int32_t Phase; // w0

  if ( (byte_40F73A8 & 1) == 0 )
  {
    sub_B16FFC(&Method_SingletonMonoBehaviour_AdManager__get_Instance__, isProgress);
    sub_B16FFC(&TerminalPramsManager_TypeInfo, v5);
    sub_B16FFC(&StringLiteral_9271, v6);
    byte_40F73A8 = 1;
  }
  data = this->fields.data;
  if ( !data )
    goto LABEL_20;
  if ( BattleData__isNgContinue(data, 0LL) )
  {
    BattleLogic__ngContinueBattleLoseInfomation(this, (System_String_o *)StringLiteral_9271, v8);
    return;
  }
  perf = this->fields.perf;
  if ( !perf )
    goto LABEL_20;
  BattlePerformance__startContinue(perf, isProgress, 0LL);
  v10 = this->fields.data;
  if ( !v10 )
    goto LABEL_20;
  QuestId = BattleData__getQuestId(v10, 0LL);
  if ( (BYTE3(TerminalPramsManager_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0
    && !TerminalPramsManager_TypeInfo->_2.cctor_finished )
  {
    j_il2cpp_runtime_class_init_0(TerminalPramsManager_TypeInfo);
  }
  if ( TerminalPramsManager__IsMainStoryForQuestId(QuestId, 0LL) )
  {
    if ( (BYTE3(TerminalPramsManager_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0
      && !TerminalPramsManager_TypeInfo->_2.cctor_finished )
    {
      j_il2cpp_runtime_class_init_0(TerminalPramsManager_TypeInfo);
    }
    if ( TerminalPramsManager__CanSendTrackEvent(QuestId, 0LL) )
    {
      Instance = SingletonMonoBehaviour_WebViewManager___get_Instance((const MethodInfo_2A54F38 *)Method_SingletonMonoBehaviour_AdManager__get_Instance__);
      v13 = this->fields.data;
      if ( v13 )
      {
        v14 = (AdManager_o *)Instance;
        Phase = BattleData__getPhase(v13, 0LL);
        if ( v14 )
        {
          AdManager__TrackEvent(v14, 10, 11, QuestId, Phase, 0LL, 0LL);
          return;
        }
      }
LABEL_20:
      sub_B170D4();
    }
  }
}


void __fastcall BattleLogic__startEntryMember(
        BattleLogic_o *this,
        System_String_o *endproc,
        bool isTactical,
        const MethodInfo *method)
{
  BattleLogicTask_array *started; // x1
  const MethodInfo *v6; // x2

  started = BattleLogic__startEntryMemberLocal(this, endproc, isTactical, method);
  BattleLogic__actOneBattleTask(this, started, v6);
}


// local variable allocation has failed, the output may be wrong!
BattleLogicTask_array *__fastcall BattleLogic__startEntryMemberLocal(
        BattleLogic_o *this,
        System_String_o *endproc,
        bool isTactical,
        const MethodInfo *method)
{
  __int64 v4; // x4
  __int64 v7; // x1
  __int64 v8; // x1
  __int64 v9; // x1
  __int64 v10; // x1
  __int64 v11; // x1
  __int64 v12; // x1
  __int64 v13; // x1
  __int64 v14; // x1
  __int64 v15; // x1
  __int64 v16; // x1
  __int64 v17; // x1
  __int64 v18; // x1
  __int64 v19; // x1
  __int64 v20; // x1
  __int64 v21; // x1
  __int64 v22; // x1
  __int64 v23; // x1
  __int64 v24; // x1
  __int64 v25; // x1
  __int64 v26; // x1
  __int64 v27; // x1
  __int64 v28; // x1
  BattleLogic___c__DisplayClass90_0_o *v29; // x20
  struct BattlePerformance_o *perf; // x8
  struct BattlePerformanceStatus_o *statusPerf; // x8
  BattlePerformanceEnemy_o *enemyPref; // x0
  __int64 v33; // x1
  __int64 v34; // x2
  __int64 v35; // x3
  __int64 v36; // x4
  System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData__o *v37; // x22
  System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData__o **p_tasklist; // x21
  BattleData_o *data; // x0
  __int64 v40; // x1
  __int64 v41; // x2
  __int64 v42; // x3
  __int64 v43; // x4
  System_Collections_Generic_IEnumerable_TSource__o *FieldPlayerServantList; // x22
  BattleLogic___c_c *v45; // x8
  struct BattleLogic___c_StaticFields *static_fields; // x9
  System_Func_WarBoardManager_WarBoardOnboardSkillTarget__bool__o *_9__90_0; // x23
  Il2CppObject *v48; // x24
  struct BattleLogic___c_StaticFields *v49; // x0
  System_Collections_Generic_IEnumerable_TSource__o *v50; // x0
  __int64 v51; // x1
  __int64 v52; // x2
  __int64 v53; // x3
  __int64 v54; // x4
  BattleLogic___c_c *v55; // x8
  System_Collections_Generic_IEnumerable_TSource__o *v56; // x22
  struct BattleLogic___c_StaticFields *v57; // x9
  System_Func_BattleLogicBuff_ReduceHpProcess_BuffInfo__int__o *_9__90_1; // x23
  Il2CppObject *v59; // x24
  struct BattleLogic___c_StaticFields *v60; // x0
  System_Collections_Generic_IEnumerable_T__o *v61; // x22
  __int64 v62; // x1
  __int64 v63; // x2
  __int64 v64; // x3
  __int64 v65; // x4
  System_Action_DrawLotsDisplayMessage_DisplayedInGroup_SaveData__o *v66; // x23
  BattleData_o *v67; // x0
  BattleServantData_array *FieldEnemyServantList; // x0
  __int64 v69; // x1
  __int64 v70; // x2
  __int64 v71; // x3
  __int64 v72; // x4
  BattleLogic___c_c *v73; // x8
  System_Collections_Generic_IEnumerable_TSource__o *v74; // x22
  struct BattleLogic___c_StaticFields *v75; // x9
  System_Func_WarBoardManager_WarBoardOnboardSkillTarget__bool__o *_9__90_3; // x23
  Il2CppObject *v77; // x24
  struct BattleLogic___c_StaticFields *v78; // x0
  System_Collections_Generic_IEnumerable_TSource__o *v79; // x0
  __int64 v80; // x1
  __int64 v81; // x2
  __int64 v82; // x3
  __int64 v83; // x4
  BattleLogic___c_c *v84; // x8
  System_Collections_Generic_IEnumerable_TSource__o *v85; // x22
  struct BattleLogic___c_StaticFields *v86; // x9
  System_Func_BattleLogicBuff_ReduceHpProcess_BuffInfo__int__o *_9__90_4; // x23
  Il2CppObject *v88; // x24
  struct BattleLogic___c_StaticFields *v89; // x0
  System_Collections_Generic_IEnumerable_T__o *v90; // x22
  __int64 v91; // x1
  __int64 v92; // x2
  __int64 v93; // x3
  __int64 v94; // x4
  System_Action_DrawLotsDisplayMessage_DisplayedInGroup_SaveData__o *v95; // x23
  const MethodInfo *v96; // x1
  System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData__o *tasklist; // x0
  __int64 v98; // x1
  __int64 v99; // x2
  __int64 v100; // x3
  __int64 v101; // x4
  BattleLogicTask_o *v102; // x19

  if ( (byte_40F7367 & 1) == 0 )
  {
    sub_B16FFC(&Method_System_Action_BattleServantData___ctor__, endproc);
    sub_B16FFC(&System_Action_BattleServantData__TypeInfo, v7);
    sub_B16FFC(&Method_BasicHelper_ForEach_BattleServantData___, v8);
    sub_B16FFC(&BattleLogicTask_TypeInfo, v9);
    sub_B16FFC(&Method_System_Linq_Enumerable_OrderBy_BattleServantData__int___, v10);
    sub_B16FFC(&Method_System_Linq_Enumerable_Where_BattleServantData___, v11);
    sub_B16FFC(&Method_System_Func_BattleServantData__bool___ctor__, v12);
    sub_B16FFC(&Method_System_Func_BattleServantData__int___ctor__, v13);
    sub_B16FFC(&System_Func_BattleServantData__bool__TypeInfo, v14);
    sub_B16FFC(&System_Func_BattleServantData__int__TypeInfo, v15);
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleLogicTask__Add__, v16);
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleLogicTask__ToArray__, v17);
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleLogicTask___ctor__, v18);
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleLogicTask__get_Count__, v19);
    sub_B16FFC(&System_Collections_Generic_List_BattleLogicTask__TypeInfo, v20);
    sub_B16FFC(&Method_BattleLogic___c__startEntryMemberLocal_b__90_0__, v21);
    sub_B16FFC(&Method_BattleLogic___c__startEntryMemberLocal_b__90_1__, v22);
    sub_B16FFC(&Method_BattleLogic___c__startEntryMemberLocal_b__90_3__, v23);
    sub_B16FFC(&Method_BattleLogic___c__startEntryMemberLocal_b__90_4__, v24);
    sub_B16FFC(&Method_BattleLogic___c__DisplayClass90_0__startEntryMemberLocal_b__2__, v25);
    sub_B16FFC(&Method_BattleLogic___c__DisplayClass90_0__startEntryMemberLocal_b__5__, v26);
    sub_B16FFC(&BattleLogic___c__DisplayClass90_0_TypeInfo, v27);
    sub_B16FFC(&BattleLogic___c_TypeInfo, v28);
    byte_40F7367 = 1;
  }
  v29 = (BattleLogic___c__DisplayClass90_0_o *)sub_B170CC(
                                                 BattleLogic___c__DisplayClass90_0_TypeInfo,
                                                 endproc,
                                                 isTactical,
                                                 method,
                                                 v4);
  BattleLogic___c__DisplayClass90_0___ctor(v29, 0LL);
  if ( !v29 )
    goto LABEL_47;
  v29->fields.__4__this = this;
  v29->fields.isTactical = isTactical;
  sub_B16F98(&v29->fields.__4__this, this);
  perf = this->fields.perf;
  if ( !perf )
    goto LABEL_47;
  statusPerf = perf->fields.statusPerf;
  if ( !statusPerf )
    goto LABEL_47;
  enemyPref = statusPerf->fields.enemyPref;
  if ( !enemyPref )
    goto LABEL_47;
  BattlePerformanceEnemy__playAddition(enemyPref, 0LL);
  v37 = (System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData__o *)sub_B170CC(
                                                                                                  System_Collections_Generic_List_BattleLogicTask__TypeInfo,
                                                                                                  v33,
                                                                                                  v34,
                                                                                                  v35,
                                                                                                  v36);
  System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData____ctor(
    v37,
    (const MethodInfo_2F25014 *)Method_System_Collections_Generic_List_BattleLogicTask___ctor__);
  v29->fields.tasklist = (struct System_Collections_Generic_List_BattleLogicTask__o *)v37;
  p_tasklist = (System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData__o **)&v29->fields.tasklist;
  sub_B16F98(&v29->fields.tasklist, v37);
  data = this->fields.data;
  if ( !data )
    goto LABEL_47;
  FieldPlayerServantList = (System_Collections_Generic_IEnumerable_TSource__o *)BattleData__getFieldPlayerServantList(
                                                                                  data,
                                                                                  0LL);
  v45 = BattleLogic___c_TypeInfo;
  if ( (BYTE3(BattleLogic___c_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0
    && !BattleLogic___c_TypeInfo->_2.cctor_finished )
  {
    j_il2cpp_runtime_class_init_0(BattleLogic___c_TypeInfo);
    v45 = BattleLogic___c_TypeInfo;
  }
  static_fields = v45->static_fields;
  _9__90_0 = (System_Func_WarBoardManager_WarBoardOnboardSkillTarget__bool__o *)static_fields->__9__90_0;
  if ( !_9__90_0 )
  {
    if ( (BYTE3(v45->vtable._0_Equals.methodPtr) & 4) != 0 && !v45->_2.cctor_finished )
    {
      j_il2cpp_runtime_class_init_0(v45);
      static_fields = BattleLogic___c_TypeInfo->static_fields;
    }
    v48 = (Il2CppObject *)static_fields->__9;
    _9__90_0 = (System_Func_WarBoardManager_WarBoardOnboardSkillTarget__bool__o *)sub_B170CC(
                                                                                    System_Func_BattleServantData__bool__TypeInfo,
                                                                                    v40,
                                                                                    v41,
                                                                                    v42,
                                                                                    v43);
    System_Func_WarBoardManager_WarBoardOnboardSkillTarget__bool____ctor(
      _9__90_0,
      v48,
      Method_BattleLogic___c__startEntryMemberLocal_b__90_0__,
      (const MethodInfo_2B6AB40 *)Method_System_Func_BattleServantData__bool___ctor__);
    v49 = BattleLogic___c_TypeInfo->static_fields;
    v49->__9__90_0 = (struct System_Func_BattleServantData__bool__o *)_9__90_0;
    sub_B16F98(&v49->__9__90_0, _9__90_0);
  }
  v50 = System_Linq_Enumerable__Where_WarBoardManager_WarBoardOnboardSkillTarget_(
          FieldPlayerServantList,
          (System_Func_TSource__bool__o *)_9__90_0,
          (const MethodInfo_19C8FE8 *)Method_System_Linq_Enumerable_Where_BattleServantData___);
  v55 = BattleLogic___c_TypeInfo;
  v56 = v50;
  if ( (BYTE3(BattleLogic___c_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0
    && !BattleLogic___c_TypeInfo->_2.cctor_finished )
  {
    j_il2cpp_runtime_class_init_0(BattleLogic___c_TypeInfo);
    v55 = BattleLogic___c_TypeInfo;
  }
  v57 = v55->static_fields;
  _9__90_1 = (System_Func_BattleLogicBuff_ReduceHpProcess_BuffInfo__int__o *)v57->__9__90_1;
  if ( !_9__90_1 )
  {
    if ( (BYTE3(v55->vtable._0_Equals.methodPtr) & 4) != 0 && !v55->_2.cctor_finished )
    {
      j_il2cpp_runtime_class_init_0(v55);
      v57 = BattleLogic___c_TypeInfo->static_fields;
    }
    v59 = (Il2CppObject *)v57->__9;
    _9__90_1 = (System_Func_BattleLogicBuff_ReduceHpProcess_BuffInfo__int__o *)sub_B170CC(
                                                                                 System_Func_BattleServantData__int__TypeInfo,
                                                                                 v51,
                                                                                 v52,
                                                                                 v53,
                                                                                 v54);
    System_Func_BattleLogicBuff_ReduceHpProcess_BuffInfo__int____ctor(
      _9__90_1,
      v59,
      Method_BattleLogic___c__startEntryMemberLocal_b__90_1__,
      (const MethodInfo_2B6B6EC *)Method_System_Func_BattleServantData__int___ctor__);
    v60 = BattleLogic___c_TypeInfo->static_fields;
    v60->__9__90_1 = (struct System_Func_BattleServantData__int__o *)_9__90_1;
    sub_B16F98(&v60->__9__90_1, _9__90_1);
  }
  v61 = (System_Collections_Generic_IEnumerable_T__o *)System_Linq_Enumerable__OrderBy_QuestPhaseDetailEntity_BoardInfo__int_(
                                                         v56,
                                                         (System_Func_TSource__TKey__o *)_9__90_1,
                                                         (const MethodInfo_19BD754 *)Method_System_Linq_Enumerable_OrderBy_BattleServantData__int___);
  v66 = (System_Action_DrawLotsDisplayMessage_DisplayedInGroup_SaveData__o *)sub_B170CC(
                                                                               System_Action_BattleServantData__TypeInfo,
                                                                               v62,
                                                                               v63,
                                                                               v64,
                                                                               v65);
  System_Action_DrawLotsDisplayMessage_DisplayedInGroup_SaveData____ctor(
    v66,
    (Il2CppObject *)v29,
    Method_BattleLogic___c__DisplayClass90_0__startEntryMemberLocal_b__2__,
    (const MethodInfo_24B7310 *)Method_System_Action_BattleServantData___ctor__);
  BasicHelper__ForEach_DrawLotsDisplayMessage_DisplayedInGroup_SaveData_(
    v61,
    (System_Action_T__o *)v66,
    (const MethodInfo_18B756C *)Method_BasicHelper_ForEach_BattleServantData___);
  v67 = this->fields.data;
  if ( !v67 )
    goto LABEL_47;
  FieldEnemyServantList = BattleData__getFieldEnemyServantList(v67, 0, 0LL);
  v73 = BattleLogic___c_TypeInfo;
  v74 = (System_Collections_Generic_IEnumerable_TSource__o *)FieldEnemyServantList;
  if ( (BYTE3(BattleLogic___c_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0
    && !BattleLogic___c_TypeInfo->_2.cctor_finished )
  {
    j_il2cpp_runtime_class_init_0(BattleLogic___c_TypeInfo);
    v73 = BattleLogic___c_TypeInfo;
  }
  v75 = v73->static_fields;
  _9__90_3 = (System_Func_WarBoardManager_WarBoardOnboardSkillTarget__bool__o *)v75->__9__90_3;
  if ( !_9__90_3 )
  {
    if ( (BYTE3(v73->vtable._0_Equals.methodPtr) & 4) != 0 && !v73->_2.cctor_finished )
    {
      j_il2cpp_runtime_class_init_0(v73);
      v75 = BattleLogic___c_TypeInfo->static_fields;
    }
    v77 = (Il2CppObject *)v75->__9;
    _9__90_3 = (System_Func_WarBoardManager_WarBoardOnboardSkillTarget__bool__o *)sub_B170CC(
                                                                                    System_Func_BattleServantData__bool__TypeInfo,
                                                                                    v69,
                                                                                    v70,
                                                                                    v71,
                                                                                    v72);
    System_Func_WarBoardManager_WarBoardOnboardSkillTarget__bool____ctor(
      _9__90_3,
      v77,
      Method_BattleLogic___c__startEntryMemberLocal_b__90_3__,
      (const MethodInfo_2B6AB40 *)Method_System_Func_BattleServantData__bool___ctor__);
    v78 = BattleLogic___c_TypeInfo->static_fields;
    v78->__9__90_3 = (struct System_Func_BattleServantData__bool__o *)_9__90_3;
    sub_B16F98(&v78->__9__90_3, _9__90_3);
  }
  v79 = System_Linq_Enumerable__Where_WarBoardManager_WarBoardOnboardSkillTarget_(
          v74,
          (System_Func_TSource__bool__o *)_9__90_3,
          (const MethodInfo_19C8FE8 *)Method_System_Linq_Enumerable_Where_BattleServantData___);
  v84 = BattleLogic___c_TypeInfo;
  v85 = v79;
  if ( (BYTE3(BattleLogic___c_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0
    && !BattleLogic___c_TypeInfo->_2.cctor_finished )
  {
    j_il2cpp_runtime_class_init_0(BattleLogic___c_TypeInfo);
    v84 = BattleLogic___c_TypeInfo;
  }
  v86 = v84->static_fields;
  _9__90_4 = (System_Func_BattleLogicBuff_ReduceHpProcess_BuffInfo__int__o *)v86->__9__90_4;
  if ( !_9__90_4 )
  {
    if ( (BYTE3(v84->vtable._0_Equals.methodPtr) & 4) != 0 && !v84->_2.cctor_finished )
    {
      j_il2cpp_runtime_class_init_0(v84);
      v86 = BattleLogic___c_TypeInfo->static_fields;
    }
    v88 = (Il2CppObject *)v86->__9;
    _9__90_4 = (System_Func_BattleLogicBuff_ReduceHpProcess_BuffInfo__int__o *)sub_B170CC(
                                                                                 System_Func_BattleServantData__int__TypeInfo,
                                                                                 v80,
                                                                                 v81,
                                                                                 v82,
                                                                                 v83);
    System_Func_BattleLogicBuff_ReduceHpProcess_BuffInfo__int____ctor(
      _9__90_4,
      v88,
      Method_BattleLogic___c__startEntryMemberLocal_b__90_4__,
      (const MethodInfo_2B6B6EC *)Method_System_Func_BattleServantData__int___ctor__);
    v89 = BattleLogic___c_TypeInfo->static_fields;
    v89->__9__90_4 = (struct System_Func_BattleServantData__int__o *)_9__90_4;
    sub_B16F98(&v89->__9__90_4, _9__90_4);
  }
  v90 = (System_Collections_Generic_IEnumerable_T__o *)System_Linq_Enumerable__OrderBy_QuestPhaseDetailEntity_BoardInfo__int_(
                                                         v85,
                                                         (System_Func_TSource__TKey__o *)_9__90_4,
                                                         (const MethodInfo_19BD754 *)Method_System_Linq_Enumerable_OrderBy_BattleServantData__int___);
  v95 = (System_Action_DrawLotsDisplayMessage_DisplayedInGroup_SaveData__o *)sub_B170CC(
                                                                               System_Action_BattleServantData__TypeInfo,
                                                                               v91,
                                                                               v92,
                                                                               v93,
                                                                               v94);
  System_Action_DrawLotsDisplayMessage_DisplayedInGroup_SaveData____ctor(
    v95,
    (Il2CppObject *)v29,
    Method_BattleLogic___c__DisplayClass90_0__startEntryMemberLocal_b__5__,
    (const MethodInfo_24B7310 *)Method_System_Action_BattleServantData___ctor__);
  BasicHelper__ForEach_DrawLotsDisplayMessage_DisplayedInGroup_SaveData_(
    v90,
    (System_Action_T__o *)v95,
    (const MethodInfo_18B756C *)Method_BasicHelper_ForEach_BattleServantData___);
  tasklist = (System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData__o *)v29->fields.tasklist;
  if ( !tasklist
    || tasklist->fields._size >= 1
    && ((BattleLogic__updateFieldBuff(this, v96),
         v102 = (BattleLogicTask_o *)sub_B170CC(BattleLogicTask_TypeInfo, v98, v99, v100, v101),
         BattleLogicTask___ctor(v102, 0LL),
         !v102)
     || (BattleLogicTask__setCheckEntryFunction(v102, 0LL), !*p_tasklist)
     || (System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData___Add(
           *p_tasklist,
           (EventMissionProgressRequest_Argument_ProgressData_o *)v102,
           (const MethodInfo_2F25CD8 *)Method_System_Collections_Generic_List_BattleLogicTask__Add__),
         (tasklist = *p_tasklist) == 0LL)) )
  {
LABEL_47:
    sub_B170D4();
  }
  return (BattleLogicTask_array *)System_Collections_Generic_List_WarBoardUiData_SaveData___ToArray(
                                    (System_Collections_Generic_List_WarBoardUiData_SaveData__o *)tasklist,
                                    (const MethodInfo_2F27E24 *)Method_System_Collections_Generic_List_BattleLogicTask__ToArray__);
}


// local variable allocation has failed, the output may be wrong!
BattleLogicTask_array *__fastcall BattleLogic__startImmediateEntry(
        BattleLogic_o *this,
        int32_t ltype,
        BattleData_o *data,
        const MethodInfo *method)
{
  __int64 v5; // x1
  __int64 v6; // x1
  __int64 v7; // x1
  __int64 v8; // x1
  __int64 v9; // x1
  __int64 v10; // x1
  struct BattleData_o *v11; // x8
  QuestEntity_o *quest_ent; // x0
  __int64 v13; // x1
  __int64 v14; // x2
  __int64 v15; // x3
  __int64 v16; // x4
  System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData__o *v17; // x20
  System_String_o *v18; // x1
  const MethodInfo *v19; // x3
  System_Collections_Generic_IEnumerable_T__o *started; // x0

  if ( (byte_40F739C & 1) == 0 )
  {
    sub_B16FFC(&BattleLogicTask___TypeInfo, *(_QWORD *)&ltype);
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleLogicTask__AddRange__, v5);
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleLogicTask__ToArray__, v6);
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleLogicTask___ctor__, v7);
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleLogicTask__get_Count__, v8);
    sub_B16FFC(&System_Collections_Generic_List_BattleLogicTask__TypeInfo, v9);
    sub_B16FFC(&StringLiteral_9714, v10);
    byte_40F739C = 1;
  }
  v11 = this->fields.data;
  if ( !v11 )
    goto LABEL_9;
  quest_ent = v11->fields.quest_ent;
  if ( !quest_ent )
    goto LABEL_9;
  if ( QuestEntity__HasFlag(quest_ent, 0x40000000000000LL, 0LL) )
  {
    v17 = (System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData__o *)sub_B170CC(
                                                                                                    System_Collections_Generic_List_BattleLogicTask__TypeInfo,
                                                                                                    v13,
                                                                                                    v14,
                                                                                                    v15,
                                                                                                    v16);
    System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData____ctor(
      v17,
      (const MethodInfo_2F25014 *)Method_System_Collections_Generic_List_BattleLogicTask___ctor__);
    started = (System_Collections_Generic_IEnumerable_T__o *)BattleLogic__startEntryMemberLocal(this, v18, 0, v19);
    if ( v17 )
    {
      System_Collections_Generic_List_TimeZoneInfo_AdjustmentRule___AddRange(
        (System_Collections_Generic_List_TimeZoneInfo_AdjustmentRule__o *)v17,
        started,
        (const MethodInfo_2F25F28 *)Method_System_Collections_Generic_List_BattleLogicTask__AddRange__);
      this->fields.isPlayImmediateEntry = v17->fields._size > 0;
      return (BattleLogicTask_array *)System_Collections_Generic_List_WarBoardUiData_SaveData___ToArray(
                                        (System_Collections_Generic_List_WarBoardUiData_SaveData__o *)v17,
                                        (const MethodInfo_2F27E24 *)Method_System_Collections_Generic_List_BattleLogicTask__ToArray__);
    }
LABEL_9:
    sub_B170D4();
  }
  return (BattleLogicTask_array *)sub_B17014(BattleLogicTask___TypeInfo, 0LL, v14);
}


// local variable allocation has failed, the output may be wrong!
void __fastcall BattleLogic__startRecoverPT(BattleLogic_o *this, bool isTactical, const MethodInfo *method)
{
  const MethodInfo *v3; // x3
  System_Collections_IEnumerator_o *v6; // x1

  if ( (byte_40F7368 & 1) == 0 )
  {
    sub_B16FFC(&StringLiteral_5481, isTactical);
    byte_40F7368 = 1;
  }
  v6 = BattleLogic__coroutineContinueMember(this, (System_String_o *)StringLiteral_5481, isTactical, v3);
  UnityEngine_MonoBehaviour__StartCoroutine_34804316((UnityEngine_MonoBehaviour_o *)this, v6, 0LL);
}


void __fastcall BattleLogic__startWaveAction(BattleLogic_o *this, const MethodInfo *method)
{
  BattlePerformance_o *perf; // x0
  BattlePerformance_o *v4; // x0

  if ( (byte_40F73BD & 1) == 0 )
  {
    sub_B16FFC(&StringLiteral_5481, method);
    byte_40F73BD = 1;
  }
  perf = this->fields.perf;
  if ( !perf || (BattlePerformance__setPositionModeTac(perf, 0LL), (v4 = this->fields.perf) == 0LL) )
    sub_B170D4();
  BattlePerformance__endStartWave(v4, (System_String_o *)StringLiteral_5481, 0LL);
}


// local variable allocation has failed, the output may be wrong!
BattleLogicTask_array *__fastcall BattleLogic__taskCommandWait(
        BattleLogic_o *this,
        int32_t ltype,
        BattleData_o *data,
        const MethodInfo *method)
{
  __int64 v4; // x4
  __int64 v5; // x1
  __int64 v6; // x1
  __int64 v7; // x1
  __int64 v8; // x1
  System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData__o *v9; // x19
  __int64 v10; // x1
  __int64 v11; // x2
  __int64 v12; // x3
  __int64 v13; // x4
  __int64 v14; // x20

  if ( (byte_40F7389 & 1) == 0 )
  {
    sub_B16FFC(&BattleLogicTask_TypeInfo, *(_QWORD *)&ltype);
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleLogicTask__Add__, v5);
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleLogicTask__ToArray__, v6);
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleLogicTask___ctor__, v7);
    sub_B16FFC(&System_Collections_Generic_List_BattleLogicTask__TypeInfo, v8);
    byte_40F7389 = 1;
  }
  v9 = (System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData__o *)sub_B170CC(
                                                                                                 System_Collections_Generic_List_BattleLogicTask__TypeInfo,
                                                                                                 *(_QWORD *)&ltype,
                                                                                                 data,
                                                                                                 method,
                                                                                                 v4);
  System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData____ctor(
    v9,
    (const MethodInfo_2F25014 *)Method_System_Collections_Generic_List_BattleLogicTask___ctor__);
  v14 = sub_B170CC(BattleLogicTask_TypeInfo, v10, v11, v12, v13);
  BattleLogicTask___ctor((BattleLogicTask_o *)v14, 0LL);
  if ( !v14 || (BattleLogicTask__setSystem((BattleLogicTask_o *)v14, 0LL), *(_DWORD *)(v14 + 124) = 1061997773, !v9) )
    sub_B170D4();
  System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData___Add(
    v9,
    (EventMissionProgressRequest_Argument_ProgressData_o *)v14,
    (const MethodInfo_2F25CD8 *)Method_System_Collections_Generic_List_BattleLogicTask__Add__);
  return (BattleLogicTask_array *)System_Collections_Generic_List_WarBoardUiData_SaveData___ToArray(
                                    (System_Collections_Generic_List_WarBoardUiData_SaveData__o *)v9,
                                    (const MethodInfo_2F27E24 *)Method_System_Collections_Generic_List_BattleLogicTask__ToArray__);
}


// local variable allocation has failed, the output may be wrong!
BattleLogicTask_array *__fastcall BattleLogic__taskEndEnemyTurn(
        BattleLogic_o *this,
        int32_t ltype,
        BattleData_o *data,
        const MethodInfo *method)
{
  __int64 v4; // x4
  __int64 v5; // x1
  __int64 v6; // x1
  __int64 v7; // x1
  __int64 v8; // x1
  System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData__o *v9; // x19
  __int64 v10; // x1
  __int64 v11; // x2
  __int64 v12; // x3
  __int64 v13; // x4
  BattleLogicTask_o *v14; // x20

  if ( (byte_40F7398 & 1) == 0 )
  {
    sub_B16FFC(&BattleLogicTask_TypeInfo, *(_QWORD *)&ltype);
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleLogicTask__Add__, v5);
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleLogicTask__ToArray__, v6);
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleLogicTask___ctor__, v7);
    sub_B16FFC(&System_Collections_Generic_List_BattleLogicTask__TypeInfo, v8);
    byte_40F7398 = 1;
  }
  v9 = (System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData__o *)sub_B170CC(
                                                                                                 System_Collections_Generic_List_BattleLogicTask__TypeInfo,
                                                                                                 *(_QWORD *)&ltype,
                                                                                                 data,
                                                                                                 method,
                                                                                                 v4);
  System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData____ctor(
    v9,
    (const MethodInfo_2F25014 *)Method_System_Collections_Generic_List_BattleLogicTask___ctor__);
  v14 = (BattleLogicTask_o *)sub_B170CC(BattleLogicTask_TypeInfo, v10, v11, v12, v13);
  BattleLogicTask___ctor(v14, 0LL);
  if ( !v14 || (BattleLogicTask__setEndTurnEnemy(v14, 0LL), !v9) )
    sub_B170D4();
  System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData___Add(
    v9,
    (EventMissionProgressRequest_Argument_ProgressData_o *)v14,
    (const MethodInfo_2F25CD8 *)Method_System_Collections_Generic_List_BattleLogicTask__Add__);
  return (BattleLogicTask_array *)System_Collections_Generic_List_WarBoardUiData_SaveData___ToArray(
                                    (System_Collections_Generic_List_WarBoardUiData_SaveData__o *)v9,
                                    (const MethodInfo_2F27E24 *)Method_System_Collections_Generic_List_BattleLogicTask__ToArray__);
}


// local variable allocation has failed, the output may be wrong!
BattleLogicTask_array *__fastcall BattleLogic__taskEndPlayerTurn(
        BattleLogic_o *this,
        int32_t ltype,
        BattleData_o *data,
        const MethodInfo *method)
{
  __int64 v4; // x4
  __int64 v6; // x1
  __int64 v7; // x1
  __int64 v8; // x1
  __int64 v9; // x1
  System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData__o *v10; // x19
  struct BattlePerformance_o *perf; // x8
  BattlePerformanceCommandCard_o *commandPerf; // x0
  __int64 v13; // x1
  __int64 v14; // x2
  __int64 v15; // x3
  __int64 v16; // x4
  BattleLogicTask_o *v17; // x20

  if ( (byte_40F7397 & 1) == 0 )
  {
    sub_B16FFC(&BattleLogicTask_TypeInfo, *(_QWORD *)&ltype);
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleLogicTask__Add__, v6);
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleLogicTask__ToArray__, v7);
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleLogicTask___ctor__, v8);
    sub_B16FFC(&System_Collections_Generic_List_BattleLogicTask__TypeInfo, v9);
    byte_40F7397 = 1;
  }
  v10 = (System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData__o *)sub_B170CC(
                                                                                                  System_Collections_Generic_List_BattleLogicTask__TypeInfo,
                                                                                                  *(_QWORD *)&ltype,
                                                                                                  data,
                                                                                                  method,
                                                                                                  v4);
  System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData____ctor(
    v10,
    (const MethodInfo_2F25014 *)Method_System_Collections_Generic_List_BattleLogicTask___ctor__);
  perf = this->fields.perf;
  if ( !perf
    || (commandPerf = perf->fields.commandPerf) == 0LL
    || (BattlePerformanceCommandCard__fadeOutAllCard(commandPerf, 0LL),
        v17 = (BattleLogicTask_o *)sub_B170CC(BattleLogicTask_TypeInfo, v13, v14, v15, v16),
        BattleLogicTask___ctor(v17, 0LL),
        !v17)
    || (BattleLogicTask__setEndTurnPlayer(v17, 0LL), !v10) )
  {
    sub_B170D4();
  }
  System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData___Add(
    v10,
    (EventMissionProgressRequest_Argument_ProgressData_o *)v17,
    (const MethodInfo_2F25CD8 *)Method_System_Collections_Generic_List_BattleLogicTask__Add__);
  return (BattleLogicTask_array *)System_Collections_Generic_List_WarBoardUiData_SaveData___ToArray(
                                    (System_Collections_Generic_List_WarBoardUiData_SaveData__o *)v10,
                                    (const MethodInfo_2F27E24 *)Method_System_Collections_Generic_List_BattleLogicTask__ToArray__);
}


// local variable allocation has failed, the output may be wrong!
BattleLogicTask_array *__fastcall BattleLogic__taskEnemyAttackTerm(
        BattleLogic_o *this,
        int32_t ltype,
        BattleData_o *data,
        const MethodInfo *method)
{
  __int64 v5; // x1
  __int64 v6; // x1
  struct BattleData_o *v7; // x8
  BattleAttackManager_o *battleAtkManager; // x0
  __int64 v9; // x1
  __int64 v10; // x2
  __int64 v11; // x3
  __int64 v12; // x4
  System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData__o *v13; // x19

  if ( (byte_40F739F & 1) == 0 )
  {
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleLogicTask__ToArray__, *(_QWORD *)&ltype);
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleLogicTask___ctor__, v5);
    sub_B16FFC(&System_Collections_Generic_List_BattleLogicTask__TypeInfo, v6);
    byte_40F739F = 1;
  }
  v7 = this->fields.data;
  if ( !v7
    || (battleAtkManager = v7->fields.battleAtkManager) == 0LL
    || (BattleAttackManager__SetEndActionAttack(battleAtkManager, 0, 0LL),
        v13 = (System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData__o *)sub_B170CC(System_Collections_Generic_List_BattleLogicTask__TypeInfo, v9, v10, v11, v12),
        System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData____ctor(
          v13,
          (const MethodInfo_2F25014 *)Method_System_Collections_Generic_List_BattleLogicTask___ctor__),
        !v13) )
  {
    sub_B170D4();
  }
  return (BattleLogicTask_array *)System_Collections_Generic_List_WarBoardUiData_SaveData___ToArray(
                                    (System_Collections_Generic_List_WarBoardUiData_SaveData__o *)v13,
                                    (const MethodInfo_2F27E24 *)Method_System_Collections_Generic_List_BattleLogicTask__ToArray__);
}


// local variable allocation has failed, the output may be wrong!
BattleLogicTask_array *__fastcall BattleLogic__taskEnemyEndWait(
        BattleLogic_o *this,
        int32_t ltype,
        BattleData_o *data,
        const MethodInfo *method)
{
  __int64 v4; // x4
  __int64 v5; // x1
  __int64 v6; // x1
  __int64 v7; // x1
  __int64 v8; // x1
  System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData__o *v9; // x19
  __int64 v10; // x1
  __int64 v11; // x2
  __int64 v12; // x3
  __int64 v13; // x4
  __int64 v14; // x20

  if ( (byte_40F7388 & 1) == 0 )
  {
    sub_B16FFC(&BattleLogicTask_TypeInfo, *(_QWORD *)&ltype);
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleLogicTask__Add__, v5);
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleLogicTask__ToArray__, v6);
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleLogicTask___ctor__, v7);
    sub_B16FFC(&System_Collections_Generic_List_BattleLogicTask__TypeInfo, v8);
    byte_40F7388 = 1;
  }
  v9 = (System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData__o *)sub_B170CC(
                                                                                                 System_Collections_Generic_List_BattleLogicTask__TypeInfo,
                                                                                                 *(_QWORD *)&ltype,
                                                                                                 data,
                                                                                                 method,
                                                                                                 v4);
  System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData____ctor(
    v9,
    (const MethodInfo_2F25014 *)Method_System_Collections_Generic_List_BattleLogicTask___ctor__);
  v14 = sub_B170CC(BattleLogicTask_TypeInfo, v10, v11, v12, v13);
  BattleLogicTask___ctor((BattleLogicTask_o *)v14, 0LL);
  if ( !v14 || (BattleLogicTask__setSystem((BattleLogicTask_o *)v14, 0LL), *(_DWORD *)(v14 + 124) = 1045220557, !v9) )
    sub_B170D4();
  System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData___Add(
    v9,
    (EventMissionProgressRequest_Argument_ProgressData_o *)v14,
    (const MethodInfo_2F25CD8 *)Method_System_Collections_Generic_List_BattleLogicTask__Add__);
  return (BattleLogicTask_array *)System_Collections_Generic_List_WarBoardUiData_SaveData___ToArray(
                                    (System_Collections_Generic_List_WarBoardUiData_SaveData__o *)v9,
                                    (const MethodInfo_2F27E24 *)Method_System_Collections_Generic_List_BattleLogicTask__ToArray__);
}


// local variable allocation has failed, the output may be wrong!
BattleLogicTask_array *__fastcall BattleLogic__taskGetCriticalPoint(
        BattleLogic_o *this,
        int32_t ltype,
        BattleData_o *data,
        const MethodInfo *method)
{
  BattlePerformance_o *perf; // x0
  __int64 v6; // x2

  if ( (byte_40F7393 & 1) == 0 )
  {
    sub_B16FFC(&BattleLogicTask___TypeInfo, *(_QWORD *)&ltype);
    byte_40F7393 = 1;
  }
  perf = this->fields.perf;
  if ( !perf )
    sub_B170D4();
  BattlePerformance__startMovePopObject(perf, 0LL);
  return (BattleLogicTask_array *)sub_B17014(BattleLogicTask___TypeInfo, 0LL, v6);
}


// local variable allocation has failed, the output may be wrong!
BattleLogicTask_array *__fastcall BattleLogic__taskLastActorBackStep(
        BattleLogic_o *this,
        int32_t ltype,
        BattleData_o *data,
        const MethodInfo *method)
{
  __int64 v4; // x4
  __int64 v5; // x1
  __int64 v6; // x1
  __int64 v7; // x1
  __int64 v8; // x1
  System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData__o *v9; // x19
  __int64 v10; // x1
  __int64 v11; // x2
  __int64 v12; // x3
  __int64 v13; // x4
  BattleLogicTask_o *v14; // x20

  if ( (byte_40F738C & 1) == 0 )
  {
    sub_B16FFC(&BattleLogicTask_TypeInfo, *(_QWORD *)&ltype);
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleLogicTask__Add__, v5);
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleLogicTask__ToArray__, v6);
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleLogicTask___ctor__, v7);
    sub_B16FFC(&System_Collections_Generic_List_BattleLogicTask__TypeInfo, v8);
    byte_40F738C = 1;
  }
  v9 = (System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData__o *)sub_B170CC(
                                                                                                 System_Collections_Generic_List_BattleLogicTask__TypeInfo,
                                                                                                 *(_QWORD *)&ltype,
                                                                                                 data,
                                                                                                 method,
                                                                                                 v4);
  System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData____ctor(
    v9,
    (const MethodInfo_2F25014 *)Method_System_Collections_Generic_List_BattleLogicTask___ctor__);
  v14 = (BattleLogicTask_o *)sub_B170CC(BattleLogicTask_TypeInfo, v10, v11, v12, v13);
  BattleLogicTask___ctor(v14, 0LL);
  if ( !v14 || (BattleLogicTask__setBackStep(v14, 0LL), !v9) )
    sub_B170D4();
  System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData___Add(
    v9,
    (EventMissionProgressRequest_Argument_ProgressData_o *)v14,
    (const MethodInfo_2F25CD8 *)Method_System_Collections_Generic_List_BattleLogicTask__Add__);
  return (BattleLogicTask_array *)System_Collections_Generic_List_WarBoardUiData_SaveData___ToArray(
                                    (System_Collections_Generic_List_WarBoardUiData_SaveData__o *)v9,
                                    (const MethodInfo_2F27E24 *)Method_System_Collections_Generic_List_BattleLogicTask__ToArray__);
}


// local variable allocation has failed, the output may be wrong!
BattleLogicTask_array *__fastcall BattleLogic__taskPlayerAttackTerm(
        BattleLogic_o *this,
        int32_t ltype,
        BattleData_o *data,
        const MethodInfo *method)
{
  __int64 v5; // x1
  __int64 v6; // x1
  struct BattleData_o *v7; // x8
  BattleAttackManager_o *battleAtkManager; // x0
  __int64 v9; // x1
  __int64 v10; // x2
  __int64 v11; // x3
  __int64 v12; // x4
  System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData__o *v13; // x19

  if ( (byte_40F739E & 1) == 0 )
  {
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleLogicTask__ToArray__, *(_QWORD *)&ltype);
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleLogicTask___ctor__, v5);
    sub_B16FFC(&System_Collections_Generic_List_BattleLogicTask__TypeInfo, v6);
    byte_40F739E = 1;
  }
  v7 = this->fields.data;
  if ( !v7
    || (battleAtkManager = v7->fields.battleAtkManager) == 0LL
    || (BattleAttackManager__SetEndActionAttack(battleAtkManager, 1, 0LL),
        v13 = (System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData__o *)sub_B170CC(System_Collections_Generic_List_BattleLogicTask__TypeInfo, v9, v10, v11, v12),
        System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData____ctor(
          v13,
          (const MethodInfo_2F25014 *)Method_System_Collections_Generic_List_BattleLogicTask___ctor__),
        !v13) )
  {
    sub_B170D4();
  }
  return (BattleLogicTask_array *)System_Collections_Generic_List_WarBoardUiData_SaveData___ToArray(
                                    (System_Collections_Generic_List_WarBoardUiData_SaveData__o *)v13,
                                    (const MethodInfo_2F27E24 *)Method_System_Collections_Generic_List_BattleLogicTask__ToArray__);
}


BattleLogicTask_array *__fastcall BattleLogic__taskReaction(
        BattleLogic_o *this,
        BattleLogicTask_o *task,
        const MethodInfo *method)
{
  __int64 v5; // x1
  __int64 v6; // x1
  __int64 v7; // x1
  __int64 v8; // x1
  __int64 v9; // x1
  __int64 v10; // x1
  __int64 v11; // x1
  __int64 v12; // x1
  __int64 v13; // x1
  __int64 v14; // x1
  __int64 v15; // x0
  BattleLogicTask_array *AIEnemyShiftAfterTask; // x21
  BattleData_o *v17; // x22
  int32_t v18; // w0
  BattleServantData_o *v19; // x0
  BattleServantData_o *v20; // x22
  BattleLogicReaction_o *logicReaction; // x0
  BattleLogicTask_array *AITurnPlayerEndAfterTask; // x0
  BattleData_o *data; // x22
  int32_t ActorId; // w0
  BattleServantData_o *ServantData; // x0
  BattleServantData_o *v26; // x22
  BattleLogicEnemyAi_o *logicEnemyAi; // x0
  struct System_Collections_Generic_Dictionary_BattleLogicTask_ACTIONTYPE__BattleLogic_reactionFunction__o *reactionlist; // x0
  struct System_Collections_Generic_Dictionary_BattleLogicTask_ACTIONTYPE__BattleLogic_reactionFunction__o *v29; // x0
  System_String_o *Item; // x0
  BattleData_o *v32; // x22
  int32_t v33; // w0
  BattleServantData_o *v34; // x0
  BattleServantData_o *v35; // x22
  BattleLogicEnemyAi_o *v36; // x0
  BattleData_o *v37; // x22
  int32_t v38; // w0
  BattleServantData_o *v39; // x0
  BattleServantData_o *v40; // x22
  BattleLogicEnemyAi_o *v41; // x0
  __int64 v42; // x1
  __int64 v43; // x2
  __int64 v44; // x3
  __int64 v45; // x4
  System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData__o *v46; // x21
  BattleData_o *v47; // x0
  System_Int32_array *FieldServantList; // x0
  __int64 v49; // x1
  System_Int32_array *v50; // x2
  __int64 v51; // x3
  __int64 v52; // x4
  int max_length; // w8
  System_Int32_array *v54; // x22
  unsigned int v55; // w27
  BattleServantData_o *v56; // x23
  BattleBuffData_o *buffData; // x24
  BattleBuffData_CheckIndividualitiesData_o *v58; // x25
  __int64 v59; // x3
  __int64 v60; // x4
  __int64 v61; // x8
  System_Int32_array *v62; // x24
  __int64 v63; // x28
  __int64 v64; // x26
  BattleSkillInfoData_o *v65; // x25
  __int64 v66; // x8
  __int64 v67; // x3
  __int64 v68; // x4
  __int64 v69; // x8
  BattleLogicTask_o *v70; // x26
  BattleBuffData_o *v71; // x0
  __int64 v72; // x1
  __int64 v73; // x2
  __int64 v74; // x3
  __int64 v75; // x4
  System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData__o *v76; // x0
  struct BattleSkillInfoData_o *skillInfo; // x8
  BattleData_o *v78; // x0
  BattleServantData_o *v79; // x0
  _BOOL4 flgCheckUseSKill; // w20
  BattleServantData_o *v81; // x22
  bool isAlive; // w0
  __int64 v83; // x2
  BattleLogicSkill_o *logicSkill; // x21
  BattleSkillInfoData_o *v85; // x23
  BattleLogic_o *v86; // [xsp+0h] [xbp-60h]
  System_Int32_array *v87; // [xsp+8h] [xbp-58h]

  if ( (byte_40F7387 & 1) == 0 )
  {
    sub_B16FFC(&BattleLogicTask___TypeInfo, task);
    sub_B16FFC(&BattleLogicTask_TypeInfo, v5);
    sub_B16FFC(&BattleSkillInfoData_TypeInfo, v6);
    sub_B16FFC(&BattleBuffData_CheckIndividualitiesData_TypeInfo, v7);
    sub_B16FFC(
      &Method_System_Collections_Generic_Dictionary_BattleLogicTask_ACTIONTYPE__BattleLogic_reactionFunction__ContainsKey__,
      v8);
    sub_B16FFC(
      &Method_System_Collections_Generic_Dictionary_BattleLogicTask_ACTIONTYPE__BattleLogic_reactionFunction__get_Item__,
      v9);
    sub_B16FFC(&int___TypeInfo, v10);
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleLogicTask__Add__, v11);
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleLogicTask__ToArray__, v12);
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleLogicTask___ctor__, v13);
    sub_B16FFC(&System_Collections_Generic_List_BattleLogicTask__TypeInfo, v14);
    byte_40F7387 = 1;
  }
  v15 = sub_B17014(BattleLogicTask___TypeInfo, 0LL, method);
  if ( !task )
    goto LABEL_78;
  AIEnemyShiftAfterTask = (BattleLogicTask_array *)v15;
  if ( task->fields.status )
    return AIEnemyShiftAfterTask;
  task->fields.status = 1;
  if ( !BattleLogicTask__isDead(task, 0LL) )
  {
    if ( BattleLogicTask__isEnemyLogicDead(task, 0LL) )
    {
      data = this->fields.data;
      ActorId = BattleLogicTask__getActorId(task, 0LL);
      if ( !data )
        goto LABEL_78;
      ServantData = BattleData__getServantData(data, ActorId, 0LL);
      if ( !ServantData )
        goto LABEL_78;
      v26 = ServantData;
      if ( !BattleServantData__isAlive(ServantData, 0, 0LL) )
      {
        logicEnemyAi = this->fields.logicEnemyAi;
        if ( !logicEnemyAi )
          goto LABEL_78;
        AITurnPlayerEndAfterTask = BattleLogicEnemyAi__taskAIDead(logicEnemyAi, v26->fields.uniqueId, 0LL);
        goto LABEL_17;
      }
      goto LABEL_18;
    }
    if ( BattleLogicTask__IsEnemyLogicShiftAfter(task, 0LL) )
    {
      v32 = this->fields.data;
      v33 = BattleLogicTask__getActorId(task, 0LL);
      if ( !v32 )
        goto LABEL_78;
      v34 = BattleData__getServantData(v32, v33, 0LL);
      if ( !v34 )
        goto LABEL_78;
      v35 = v34;
      if ( BattleServantData__isAlive(v34, 0, 0LL) && v35->fields._IsBattleShift_k__BackingField )
      {
        v36 = this->fields.logicEnemyAi;
        if ( !v36 )
          goto LABEL_78;
        AIEnemyShiftAfterTask = BattleLogicEnemyAi__CreateAIEnemyShiftAfterTask(v36, v35->fields.uniqueId, 0LL);
        BattleServantData__SetIsBattleShift(v35, 0, 0LL);
      }
      goto LABEL_18;
    }
    if ( BattleLogicTask__IsEnemyLogicPlayerTurnEndAfter(task, 0LL) )
    {
      v37 = this->fields.data;
      v38 = BattleLogicTask__getActorId(task, 0LL);
      if ( !v37 )
        goto LABEL_78;
      v39 = BattleData__getServantData(v37, v38, 0LL);
      if ( !v39 )
        goto LABEL_78;
      v40 = v39;
      if ( BattleServantData__isAlive(v39, 0, 0LL) )
      {
        v41 = this->fields.logicEnemyAi;
        if ( !v41 )
          goto LABEL_78;
        AITurnPlayerEndAfterTask = BattleLogicEnemyAi__CreateAITurnPlayerEndAfterTask(v41, v40->fields.uniqueId, 0LL);
        goto LABEL_17;
      }
      goto LABEL_18;
    }
    if ( BattleLogicTask__isCheckEntryFunction(task, 0LL) )
    {
      v46 = (System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData__o *)sub_B170CC(System_Collections_Generic_List_BattleLogicTask__TypeInfo, v42, v43, v44, v45);
      System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData____ctor(
        v46,
        (const MethodInfo_2F25014 *)Method_System_Collections_Generic_List_BattleLogicTask___ctor__);
      v47 = this->fields.data;
      if ( !v47 )
        goto LABEL_78;
      v86 = this;
      FieldServantList = (System_Int32_array *)BattleData__getFieldServantList(v47, 0, 0LL);
      if ( !FieldServantList )
        goto LABEL_78;
      max_length = FieldServantList->max_length;
      v54 = FieldServantList;
      if ( max_length >= 1 )
      {
        v55 = 0;
        v87 = FieldServantList;
        do
        {
          if ( v55 >= max_length )
            goto LABEL_79;
          v56 = *(BattleServantData_o **)&v54->m_Items[2 * v55 + 1];
          if ( !v56 )
            goto LABEL_78;
          if ( v56->fields.flgEntryFunction )
          {
            v56->fields.flgEntryFunction = 0;
            buffData = v56->fields.buffData;
            v58 = (BattleBuffData_CheckIndividualitiesData_o *)sub_B170CC(
                                                                 BattleBuffData_CheckIndividualitiesData_TypeInfo,
                                                                 v49,
                                                                 v50,
                                                                 v51,
                                                                 v52);
            BattleBuffData_CheckIndividualitiesData___ctor(v58, v56, 0LL, 0LL, 0LL, 0LL, 0LL);
            if ( !buffData )
              goto LABEL_78;
            FieldServantList = (System_Int32_array *)BattleBuffData__getBuffList_31040328(buffData, 59, v58, 1, 0, 0LL);
            if ( !FieldServantList )
              goto LABEL_78;
            v61 = *(_QWORD *)&FieldServantList->max_length;
            v62 = FieldServantList;
            if ( v61 && (int)v61 >= 1 )
            {
              v63 = 0LL;
              while ( (unsigned int)v63 < (unsigned int)v61 )
              {
                v64 = *(_QWORD *)&v62->m_Items[2 * v63 + 1];
                v65 = (BattleSkillInfoData_o *)sub_B170CC(BattleSkillInfoData_TypeInfo, v49, v50, v59, v60);
                BattleSkillInfoData___ctor(v65, 0LL);
                if ( !v65 )
                  goto LABEL_78;
                v65->fields.svtUniqueId = v56->fields.uniqueId;
                if ( !v64 )
                  goto LABEL_78;
                v66 = *(_QWORD *)(v64 + 40);
                if ( !v66 )
                  goto LABEL_78;
                if ( !*(_DWORD *)(v66 + 24) )
                  break;
                FieldServantList = (System_Int32_array *)((__int64 (__fastcall *)(BattleSkillInfoData_o *, _QWORD, Il2CppMethodPointer))v65->klass->vtable._4_set_skillId.method)(
                                                           v65,
                                                           *(unsigned int *)(v66 + 32),
                                                           v65->klass->vtable._5_get_skillId.methodPtr);
                v69 = *(_QWORD *)(v64 + 40);
                if ( !v69 )
                  goto LABEL_78;
                if ( *(_DWORD *)(v69 + 24) <= 1u )
                  break;
                v65->fields.skilllv = *(_DWORD *)(v69 + 36);
                v70 = (BattleLogicTask_o *)sub_B170CC(BattleLogicTask_TypeInfo, v49, v50, v67, v68);
                BattleLogicTask___ctor(v70, 0LL);
                if ( !v70 )
                  goto LABEL_78;
                BattleLogicTask__setReservationSkill(v70, v65, 1, 0LL);
                if ( !v46 )
                  goto LABEL_78;
                System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData___Add(
                  v46,
                  (EventMissionProgressRequest_Argument_ProgressData_o *)v70,
                  (const MethodInfo_2F25CD8 *)Method_System_Collections_Generic_List_BattleLogicTask__Add__);
                LODWORD(v61) = v62->max_length;
                if ( (int)++v63 >= (int)v61 )
                  goto LABEL_60;
              }
LABEL_79:
              sub_B17100(FieldServantList, v49, v50);
              sub_B170A0();
            }
LABEL_60:
            v71 = v56->fields.buffData;
            if ( !v71 )
              goto LABEL_78;
            FieldServantList = (System_Int32_array *)BattleBuffData__usedProgressing(v71, 0LL);
            v54 = v87;
          }
          max_length = v54->max_length;
        }
        while ( (int)++v55 < max_length );
      }
      if ( !v46 )
        goto LABEL_78;
      AITurnPlayerEndAfterTask = (BattleLogicTask_array *)System_Collections_Generic_List_WarBoardUiData_SaveData___ToArray(
                                                            (System_Collections_Generic_List_WarBoardUiData_SaveData__o *)v46,
                                                            (const MethodInfo_2F27E24 *)Method_System_Collections_Generic_List_BattleLogicTask__ToArray__);
      this = v86;
      goto LABEL_17;
    }
    if ( !BattleLogicTask__isReservationSkill(task, 0LL) )
      goto LABEL_18;
    v76 = (System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData__o *)sub_B170CC(
                                                                                                    System_Collections_Generic_List_BattleLogicTask__TypeInfo,
                                                                                                    v72,
                                                                                                    v73,
                                                                                                    v74,
                                                                                                    v75);
    System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData____ctor(
      v76,
      (const MethodInfo_2F25014 *)Method_System_Collections_Generic_List_BattleLogicTask___ctor__);
    skillInfo = task->fields.skillInfo;
    if ( !skillInfo )
      goto LABEL_78;
    v78 = this->fields.data;
    if ( !v78 )
      goto LABEL_78;
    v79 = BattleData__getServantData(v78, skillInfo->fields.svtUniqueId, 0LL);
    if ( !v79 )
      goto LABEL_78;
    flgCheckUseSKill = task->fields.flgCheckUseSKill;
    v81 = v79;
    isAlive = BattleServantData__isAlive(v79, 0, 0LL);
    if ( flgCheckUseSKill )
    {
      if ( !isAlive )
      {
LABEL_77:
        AITurnPlayerEndAfterTask = BattleLogicTask__GetRelayTasksAfterSetIntervalBuff(task, AIEnemyShiftAfterTask, 0LL);
LABEL_17:
        AIEnemyShiftAfterTask = AITurnPlayerEndAfterTask;
        goto LABEL_18;
      }
      isAlive = BattleServantData__canUseSkill(v81, -1, 0LL);
    }
    if ( isAlive )
    {
      logicSkill = this->fields.logicSkill;
      v85 = task->fields.skillInfo;
      FieldServantList = (System_Int32_array *)sub_B17014(int___TypeInfo, 1LL, v83);
      if ( !FieldServantList )
        goto LABEL_78;
      v50 = FieldServantList;
      if ( !FieldServantList->max_length )
        goto LABEL_79;
      FieldServantList->m_Items[1] = v81->fields.uniqueId;
      if ( !logicSkill )
        goto LABEL_78;
      AIEnemyShiftAfterTask = BattleLogicSkill__taskSkill(logicSkill, v85, FieldServantList, 0LL, 0, 0, 0, 0LL);
    }
    goto LABEL_77;
  }
  v17 = this->fields.data;
  v18 = BattleLogicTask__getActorId(task, 0LL);
  if ( !v17 )
    goto LABEL_78;
  v19 = BattleData__getServantData(v17, v18, 0LL);
  if ( !v19 )
    goto LABEL_78;
  v20 = v19;
  if ( !BattleServantData__isAlive(v19, 0, 0LL) )
  {
    logicReaction = this->fields.logicReaction;
    if ( !logicReaction )
      goto LABEL_78;
    AITurnPlayerEndAfterTask = BattleLogicReaction__createTaskDead(logicReaction, v20->fields.uniqueId, 0LL);
    goto LABEL_17;
  }
LABEL_18:
  reactionlist = this->fields.reactionlist;
  if ( !reactionlist )
    goto LABEL_78;
  if ( System_Collections_Generic_Dictionary_Voice_BATTLE__string___ContainsKey(
         (System_Collections_Generic_Dictionary_Voice_BATTLE__string__o *)reactionlist,
         task->fields.actiontype,
         (const MethodInfo_2DFFEC8 *)Method_System_Collections_Generic_Dictionary_BattleLogicTask_ACTIONTYPE__BattleLogic_reactionFunction__ContainsKey__) )
  {
    v29 = this->fields.reactionlist;
    if ( v29 )
    {
      Item = System_Collections_Generic_Dictionary_Voice_BATTLE__string___get_Item(
               (System_Collections_Generic_Dictionary_Voice_BATTLE__string__o *)v29,
               task->fields.actiontype,
               (const MethodInfo_2DFFB90 *)Method_System_Collections_Generic_Dictionary_BattleLogicTask_ACTIONTYPE__BattleLogic_reactionFunction__get_Item__);
      if ( Item )
        return BattleLogic_reactionFunction__Invoke((BattleLogic_reactionFunction_o *)Item, task, 0LL);
    }
LABEL_78:
    sub_B170D4();
  }
  return AIEnemyShiftAfterTask;
}


// local variable allocation has failed, the output may be wrong!
BattleLogicTask_array *__fastcall BattleLogic__taskStartEnemyTurn(
        BattleLogic_o *this,
        int32_t ltype,
        BattleData_o *data,
        const MethodInfo *method)
{
  __int64 v4; // x4
  __int64 v6; // x1
  __int64 v7; // x1
  __int64 v8; // x1
  __int64 v9; // x1
  System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData__o *v10; // x20
  __int64 v11; // x1
  __int64 v12; // x2
  __int64 v13; // x3
  __int64 v14; // x4
  BattleLogicTask_o *v15; // x21
  struct BattleData_o *v16; // x8

  if ( (byte_40F7396 & 1) == 0 )
  {
    sub_B16FFC(&BattleLogicTask_TypeInfo, *(_QWORD *)&ltype);
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleLogicTask__Add__, v6);
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleLogicTask__ToArray__, v7);
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleLogicTask___ctor__, v8);
    sub_B16FFC(&System_Collections_Generic_List_BattleLogicTask__TypeInfo, v9);
    byte_40F7396 = 1;
  }
  v10 = (System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData__o *)sub_B170CC(
                                                                                                  System_Collections_Generic_List_BattleLogicTask__TypeInfo,
                                                                                                  *(_QWORD *)&ltype,
                                                                                                  data,
                                                                                                  method,
                                                                                                  v4);
  System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData____ctor(
    v10,
    (const MethodInfo_2F25014 *)Method_System_Collections_Generic_List_BattleLogicTask___ctor__);
  v15 = (BattleLogicTask_o *)sub_B170CC(BattleLogicTask_TypeInfo, v11, v12, v13, v14);
  BattleLogicTask___ctor(v15, 0LL);
  if ( !v15
    || (BattleLogicTask__setStartTurnEnemy(v15, 0LL), !v10)
    || (System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData___Add(
          v10,
          (EventMissionProgressRequest_Argument_ProgressData_o *)v15,
          (const MethodInfo_2F25CD8 *)Method_System_Collections_Generic_List_BattleLogicTask__Add__),
        (v16 = this->fields.data) == 0LL) )
  {
    sub_B170D4();
  }
  v16->fields.typeTurn = 2;
  return (BattleLogicTask_array *)System_Collections_Generic_List_WarBoardUiData_SaveData___ToArray(
                                    (System_Collections_Generic_List_WarBoardUiData_SaveData__o *)v10,
                                    (const MethodInfo_2F27E24 *)Method_System_Collections_Generic_List_BattleLogicTask__ToArray__);
}


// local variable allocation has failed, the output may be wrong!
BattleLogicTask_array *__fastcall BattleLogic__taskStartPlayerTurn(
        BattleLogic_o *this,
        int32_t ltype,
        BattleData_o *data,
        const MethodInfo *method)
{
  __int64 v4; // x4
  __int64 v6; // x1
  __int64 v7; // x1
  __int64 v8; // x1
  __int64 v9; // x1
  System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData__o *v10; // x20
  __int64 v11; // x1
  __int64 v12; // x2
  __int64 v13; // x3
  __int64 v14; // x4
  BattleLogicTask_o *v15; // x21
  struct BattleData_o *v16; // x8

  if ( (byte_40F7395 & 1) == 0 )
  {
    sub_B16FFC(&BattleLogicTask_TypeInfo, *(_QWORD *)&ltype);
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleLogicTask__Add__, v6);
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleLogicTask__ToArray__, v7);
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleLogicTask___ctor__, v8);
    sub_B16FFC(&System_Collections_Generic_List_BattleLogicTask__TypeInfo, v9);
    byte_40F7395 = 1;
  }
  v10 = (System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData__o *)sub_B170CC(
                                                                                                  System_Collections_Generic_List_BattleLogicTask__TypeInfo,
                                                                                                  *(_QWORD *)&ltype,
                                                                                                  data,
                                                                                                  method,
                                                                                                  v4);
  System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData____ctor(
    v10,
    (const MethodInfo_2F25014 *)Method_System_Collections_Generic_List_BattleLogicTask___ctor__);
  v15 = (BattleLogicTask_o *)sub_B170CC(BattleLogicTask_TypeInfo, v11, v12, v13, v14);
  BattleLogicTask___ctor(v15, 0LL);
  if ( !v15
    || (BattleLogicTask__setStartTurnPlayer(v15, 0LL), !v10)
    || (System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData___Add(
          v10,
          (EventMissionProgressRequest_Argument_ProgressData_o *)v15,
          (const MethodInfo_2F25CD8 *)Method_System_Collections_Generic_List_BattleLogicTask__Add__),
        (v16 = this->fields.data) == 0LL) )
  {
    sub_B170D4();
  }
  v16->fields.typeTurn = 1;
  return (BattleLogicTask_array *)System_Collections_Generic_List_WarBoardUiData_SaveData___ToArray(
                                    (System_Collections_Generic_List_WarBoardUiData_SaveData__o *)v10,
                                    (const MethodInfo_2F27E24 *)Method_System_Collections_Generic_List_BattleLogicTask__ToArray__);
}


// local variable allocation has failed, the output may be wrong!
BattleLogicTask_array *__fastcall BattleLogic__taskStartTactical(
        BattleLogic_o *this,
        int32_t ltype,
        BattleData_o *data,
        const MethodInfo *method)
{
  __int64 v4; // x4
  __int64 v6; // x1
  __int64 v7; // x1
  System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData__o *v8; // x20
  struct BattleData_o *v9; // x8

  if ( (byte_40F7399 & 1) == 0 )
  {
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleLogicTask__ToArray__, *(_QWORD *)&ltype);
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleLogicTask___ctor__, v6);
    sub_B16FFC(&System_Collections_Generic_List_BattleLogicTask__TypeInfo, v7);
    byte_40F7399 = 1;
  }
  v8 = (System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData__o *)sub_B170CC(
                                                                                                 System_Collections_Generic_List_BattleLogicTask__TypeInfo,
                                                                                                 *(_QWORD *)&ltype,
                                                                                                 data,
                                                                                                 method,
                                                                                                 v4);
  System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData____ctor(
    v8,
    (const MethodInfo_2F25014 *)Method_System_Collections_Generic_List_BattleLogicTask___ctor__);
  v9 = this->fields.data;
  if ( !v9 || (v9->fields.typeTurn = 1, !v8) )
    sub_B170D4();
  return (BattleLogicTask_array *)System_Collections_Generic_List_WarBoardUiData_SaveData___ToArray(
                                    (System_Collections_Generic_List_WarBoardUiData_SaveData__o *)v8,
                                    (const MethodInfo_2F27E24 *)Method_System_Collections_Generic_List_BattleLogicTask__ToArray__);
}


void __fastcall BattleLogic__turnProgressing(BattleLogic_o *this, System_String_o *endproc, const MethodInfo *method)
{
  struct BattleData_o *data; // x0
  struct BattleAttackManager_o *battleAtkManager; // x8
  BattlePerformance_o *perf; // x0
  const MethodInfo *v8; // x1
  struct BattleData_o *v9; // x0
  PlayMakerFSM_o *fsm; // x0
  System_String_o *v11; // x1

  if ( (byte_40F7394 & 1) == 0 )
  {
    sub_B16FFC(&StringLiteral_2617, endproc);
    byte_40F7394 = 1;
  }
  data = this->fields.data;
  if ( !data )
    goto LABEL_16;
  battleAtkManager = data->fields.battleAtkManager;
  if ( !battleAtkManager )
    goto LABEL_16;
  if ( battleAtkManager->fields._IsTurnEnd_k__BackingField )
    BattleData__turnProgressing(data, 0LL);
  perf = this->fields.perf;
  if ( !perf )
    goto LABEL_16;
  BattlePerformance__updateStatus(perf, 0LL);
  BattleLogic__updateEnemyTargetLogic(this, v8);
  v9 = this->fields.data;
  if ( !v9 )
    goto LABEL_16;
  if ( !v9->fields.endbattleFlg || !BattleData__isBreakOnBattleWin(v9, 0LL) )
  {
    fsm = this->fields.fsm;
    if ( fsm )
    {
      v11 = endproc;
      goto LABEL_15;
    }
LABEL_16:
    sub_B170D4();
  }
  fsm = this->fields.fsm;
  if ( !fsm )
    goto LABEL_16;
  v11 = (System_String_o *)StringLiteral_2617;
LABEL_15:
  PlayMakerFSM__SendEvent(fsm, v11, 0LL);
}


void __fastcall BattleLogic__updateConditionsBuffAll(BattleLogic_o *this, const MethodInfo *method)
{
  __int64 v2; // x2
  __int64 v3; // x3
  __int64 v4; // x4
  __int64 v6; // x1
  __int64 v7; // x1
  __int64 v8; // x1
  __int64 v9; // x1
  BattleLogic___c__DisplayClass284_0_o *v10; // x20
  BattleData_o *data; // x0
  BattleServantData_array *FieldServantList; // x0
  BattleServantData_array *v13; // x21
  System_Int32_array *QuestIndividualities; // x0
  __int64 v15; // x0
  __int64 v16; // x1
  __int64 v17; // x2
  __int64 v18; // x3
  __int64 v19; // x4
  int max_length; // w8
  unsigned int v21; // w23
  BattleServantData_o *v22; // x0
  struct BattleData_o *v23; // x8
  System_Collections_Generic_List_USFGOSetAudioGroupIndexConditional_WeightIndex__o *aiNpcDataList; // x19
  System_Action_DrawLotsDisplayMessage_DisplayedInGroup_SaveData__o *v25; // x21

  if ( (byte_40F73E0 & 1) == 0 )
  {
    sub_B16FFC(&Method_System_Action_AiNpcBattleServantData___ctor__, method);
    sub_B16FFC(&System_Action_AiNpcBattleServantData__TypeInfo, v6);
    sub_B16FFC(&Method_System_Collections_Generic_List_AiNpcBattleServantData__ForEach__, v7);
    sub_B16FFC(&Method_BattleLogic___c__DisplayClass284_0__updateConditionsBuffAll_b__0__, v8);
    sub_B16FFC(&BattleLogic___c__DisplayClass284_0_TypeInfo, v9);
    byte_40F73E0 = 1;
  }
  v10 = (BattleLogic___c__DisplayClass284_0_o *)sub_B170CC(
                                                  BattleLogic___c__DisplayClass284_0_TypeInfo,
                                                  method,
                                                  v2,
                                                  v3,
                                                  v4);
  BattleLogic___c__DisplayClass284_0___ctor(v10, 0LL);
  if ( !v10 )
    goto LABEL_15;
  v10->fields.__4__this = this;
  sub_B16F98(&v10->fields.__4__this, this);
  data = this->fields.data;
  if ( !data )
    goto LABEL_15;
  FieldServantList = BattleData__getFieldServantList(data, 0, 0LL);
  if ( !this->fields.data )
    goto LABEL_15;
  v13 = FieldServantList;
  QuestIndividualities = BattleData__getQuestIndividualities(this->fields.data, 0LL);
  v10->fields.fieldIndivi = QuestIndividualities;
  sub_B16F98(&v10->fields, QuestIndividualities);
  if ( !v13 )
    goto LABEL_15;
  max_length = v13->max_length;
  if ( max_length >= 1 )
  {
    v21 = 0;
    while ( 1 )
    {
      if ( v21 >= max_length )
      {
        sub_B17100(v15, v16, v17);
        sub_B170A0();
      }
      v22 = v13->m_Items[v21];
      if ( !v22 )
        break;
      BattleServantData__updateConditionsBuff(v22, v10->fields.fieldIndivi, this->fields.perf, 0LL);
      max_length = v13->max_length;
      if ( (int)++v21 >= max_length )
        goto LABEL_12;
    }
LABEL_15:
    sub_B170D4();
  }
LABEL_12:
  v23 = this->fields.data;
  if ( !v23 )
    goto LABEL_15;
  aiNpcDataList = (System_Collections_Generic_List_USFGOSetAudioGroupIndexConditional_WeightIndex__o *)v23->fields.aiNpcDataList;
  v25 = (System_Action_DrawLotsDisplayMessage_DisplayedInGroup_SaveData__o *)sub_B170CC(
                                                                               System_Action_AiNpcBattleServantData__TypeInfo,
                                                                               v16,
                                                                               v17,
                                                                               v18,
                                                                               v19);
  System_Action_DrawLotsDisplayMessage_DisplayedInGroup_SaveData____ctor(
    v25,
    (Il2CppObject *)v10,
    Method_BattleLogic___c__DisplayClass284_0__updateConditionsBuffAll_b__0__,
    (const MethodInfo_24B7310 *)Method_System_Action_AiNpcBattleServantData___ctor__);
  if ( !aiNpcDataList )
    goto LABEL_15;
  System_Collections_Generic_List_USFGOSetAudioGroupIndexConditional_WeightIndex___ForEach(
    aiNpcDataList,
    (System_Action_T__o *)v25,
    (const MethodInfo_2F269F0 *)Method_System_Collections_Generic_List_AiNpcBattleServantData__ForEach__);
}


// local variable allocation has failed, the output may be wrong!
void __fastcall BattleLogic__updateEnemyTarget(BattleLogic_o *this, bool isTargetChange, const MethodInfo *method)
{
  const MethodInfo *v5; // x1
  BattlePerformance_o *perf; // x0

  BattleLogic__updateEnemyTargetLogic(this, (const MethodInfo *)isTargetChange);
  if ( isTargetChange )
    BattleLogic__updateGlobalTarget(this, v5);
  perf = this->fields.perf;
  if ( !perf )
    sub_B170D4();
  BattlePerformance__reViewTargetMarks(perf, 0LL);
}


void __fastcall BattleLogic__updateEnemyTargetLogic(BattleLogic_o *this, const MethodInfo *method)
{
  BattleLogicTarget_o *logictarget; // x0

  logictarget = this->fields.logictarget;
  if ( !logictarget )
    sub_B170D4();
  BattleLogicTarget__updateEnemyTarget(logictarget, 0LL, 0LL);
}


void __fastcall BattleLogic__updateFieldBuff(BattleLogic_o *this, const MethodInfo *method)
{
  __int64 v2; // x2
  __int64 v3; // x3
  __int64 v4; // x4
  __int64 v6; // x1
  __int64 v7; // x1
  __int64 v8; // x1
  __int64 v9; // x1
  __int64 v10; // x1
  __int64 v11; // x1
  __int64 v12; // x1
  __int64 v13; // x1
  __int64 v14; // x1
  __int64 v15; // x1
  __int64 v16; // x1
  BattleLogic___c__DisplayClass325_0_o *v17; // x20
  __int64 v18; // x1
  __int64 v19; // x2
  __int64 v20; // x3
  __int64 v21; // x4
  System_Collections_Generic_List_int__o *v22; // x22
  __int64 v23; // x1
  __int64 v24; // x2
  __int64 v25; // x3
  __int64 v26; // x4
  FieldAliveServantData_o *v27; // x24
  FieldAliveServantData_o **p_aliveSvtData; // x21
  BattleData_o *data; // x0
  BattleServantData_array *FieldServantList; // x0
  const MethodInfo *v31; // x1
  __int64 v32; // x2
  int max_length; // w8
  BattleServantData_array *v34; // x23
  unsigned int v35; // w25
  Il2CppClass **v36; // x8
  BattleServantData_o *v37; // x24
  System_Int32_array *v38; // x0
  BattleData_o *v39; // x0
  System_Collections_Generic_List_BattleServantData__o *ServantList; // x0
  __int64 v41; // x1
  __int64 v42; // x2
  __int64 v43; // x3
  __int64 v44; // x4
  int size; // w8
  System_Collections_Generic_List_BattleServantData__o *v46; // x23
  unsigned int v47; // w24
  BattleServantData_o *v48; // x0
  BattleServantData_o *v49; // x0
  BattleServantData_o *v50; // x0
  struct BattleData_o *v51; // x8
  System_Collections_Generic_List_USFGOSetAudioGroupIndexConditional_WeightIndex__o *aiNpcDataList; // x21
  System_Action_DrawLotsDisplayMessage_DisplayedInGroup_SaveData__o *v53; // x22
  const MethodInfo *v54; // x1
  BattleData_o *v55; // x0
  int v56; // w8
  BattleServantData_array *v57; // x20
  unsigned int v58; // w21
  BattleServantData_o *v59; // x0

  if ( (byte_40F73FA & 1) == 0 )
  {
    sub_B16FFC(&Method_System_Action_AiNpcBattleServantData___ctor__, method);
    sub_B16FFC(&System_Action_AiNpcBattleServantData__TypeInfo, v6);
    sub_B16FFC(&FieldAliveServantData_TypeInfo, v7);
    sub_B16FFC(&Method_System_Collections_Generic_List_int__Add__, v8);
    sub_B16FFC(&Method_System_Collections_Generic_List_AiNpcBattleServantData__ForEach__, v9);
    sub_B16FFC(&Method_System_Collections_Generic_List_int__ToArray__, v10);
    sub_B16FFC(&Method_System_Collections_Generic_List_int___ctor__, v11);
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleServantData__get_Count__, v12);
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleServantData__get_Item__, v13);
    sub_B16FFC(&System_Collections_Generic_List_int__TypeInfo, v14);
    sub_B16FFC(&Method_BattleLogic___c__DisplayClass325_0__updateFieldBuff_b__0__, v15);
    sub_B16FFC(&BattleLogic___c__DisplayClass325_0_TypeInfo, v16);
    byte_40F73FA = 1;
  }
  v17 = (BattleLogic___c__DisplayClass325_0_o *)sub_B170CC(
                                                  BattleLogic___c__DisplayClass325_0_TypeInfo,
                                                  method,
                                                  v2,
                                                  v3,
                                                  v4);
  BattleLogic___c__DisplayClass325_0___ctor(v17, 0LL);
  if ( !v17 )
    goto LABEL_44;
  v17->fields.__4__this = this;
  sub_B16F98(&v17->fields.__4__this, this);
  v22 = (System_Collections_Generic_List_int__o *)sub_B170CC(
                                                    System_Collections_Generic_List_int__TypeInfo,
                                                    v18,
                                                    v19,
                                                    v20,
                                                    v21);
  System_Collections_Generic_List_int____ctor(
    v22,
    (const MethodInfo_2F0F794 *)Method_System_Collections_Generic_List_int___ctor__);
  v27 = (FieldAliveServantData_o *)sub_B170CC(FieldAliveServantData_TypeInfo, v23, v24, v25, v26);
  FieldAliveServantData___ctor(v27, 0LL);
  p_aliveSvtData = &v17->fields.aliveSvtData;
  v17->fields.aliveSvtData = v27;
  sub_B16F98(&v17->fields.aliveSvtData, v27);
  data = this->fields.data;
  if ( !data )
    goto LABEL_44;
  FieldServantList = BattleData__getFieldServantList(data, 0, 0LL);
  if ( !FieldServantList )
    goto LABEL_44;
  max_length = FieldServantList->max_length;
  v34 = FieldServantList;
  if ( max_length >= 1 )
  {
    v35 = 0;
    while ( v35 < max_length )
    {
      v36 = &v34->obj.klass + (int)v35;
      v37 = (BattleServantData_o *)v36[4];
      if ( !v37 )
        goto LABEL_44;
      if ( BattleServantData__isAlive((BattleServantData_o *)v36[4], 0, 0LL)
        || (FieldServantList = (BattleServantData_array *)BattleServantData__isGuts(v37, 0LL),
            ((unsigned __int8)FieldServantList & 1) != 0) )
      {
        if ( !v22 )
          goto LABEL_44;
        System_Collections_Generic_List_int___Add(
          v22,
          v37->fields.uniqueId,
          (const MethodInfo_2F104F0 *)Method_System_Collections_Generic_List_int__Add__);
        if ( !*p_aliveSvtData )
          goto LABEL_44;
        FieldAliveServantData__addSvtData(*p_aliveSvtData, v37->fields.isEnemy, v37, 0LL);
      }
      max_length = v34->max_length;
      if ( (int)++v35 >= max_length )
        goto LABEL_16;
    }
LABEL_45:
    sub_B17100(FieldServantList, v31, v32);
    sub_B170A0();
  }
LABEL_16:
  if ( !v22
    || (v38 = System_Collections_Generic_List_int___ToArray(
                v22,
                (const MethodInfo_2F125FC *)Method_System_Collections_Generic_List_int__ToArray__),
        v17->fields.fieldSvtIds = v38,
        sub_B16F98(&v17->fields, v38),
        (v39 = this->fields.data) == 0LL)
    || (ServantList = BattleData__getServantList(v39, 0LL)) == 0LL )
  {
LABEL_44:
    sub_B170D4();
  }
  size = ServantList->fields._size;
  v46 = ServantList;
  if ( size >= 1 )
  {
    v47 = 0;
    do
    {
      if ( size <= v47 )
        System_ThrowHelper__ThrowArgumentOutOfRangeException_41329284(0LL);
      v48 = v46->fields._items->m_Items[v47];
      if ( !v48 )
        goto LABEL_44;
      if ( BattleServantData__isAlive(v48, 0, 0LL) )
        goto LABEL_29;
      if ( v46->fields._size <= v47 )
        System_ThrowHelper__ThrowArgumentOutOfRangeException_41329284(0LL);
      v49 = v46->fields._items->m_Items[v47];
      if ( !v49 )
        goto LABEL_44;
      if ( BattleServantData__isGuts(v49, 0LL) )
      {
LABEL_29:
        if ( v46->fields._size <= v47 )
          System_ThrowHelper__ThrowArgumentOutOfRangeException_41329284(0LL);
        v50 = v46->fields._items->m_Items[v47];
        if ( !v50 )
          goto LABEL_44;
        BattleServantData__checkFieldBuff(v50, v17->fields.fieldSvtIds, *p_aliveSvtData, this, 0LL);
      }
      size = v46->fields._size;
    }
    while ( (int)++v47 < size );
  }
  v51 = this->fields.data;
  if ( !v51 )
    goto LABEL_44;
  aiNpcDataList = (System_Collections_Generic_List_USFGOSetAudioGroupIndexConditional_WeightIndex__o *)v51->fields.aiNpcDataList;
  v53 = (System_Action_DrawLotsDisplayMessage_DisplayedInGroup_SaveData__o *)sub_B170CC(
                                                                               System_Action_AiNpcBattleServantData__TypeInfo,
                                                                               v41,
                                                                               v42,
                                                                               v43,
                                                                               v44);
  System_Action_DrawLotsDisplayMessage_DisplayedInGroup_SaveData____ctor(
    v53,
    (Il2CppObject *)v17,
    Method_BattleLogic___c__DisplayClass325_0__updateFieldBuff_b__0__,
    (const MethodInfo_24B7310 *)Method_System_Action_AiNpcBattleServantData___ctor__);
  if ( !aiNpcDataList )
    goto LABEL_44;
  System_Collections_Generic_List_USFGOSetAudioGroupIndexConditional_WeightIndex___ForEach(
    aiNpcDataList,
    (System_Action_T__o *)v53,
    (const MethodInfo_2F269F0 *)Method_System_Collections_Generic_List_AiNpcBattleServantData__ForEach__);
  BattleLogic__updateConditionsBuffAll(this, v54);
  v55 = this->fields.data;
  if ( !v55 )
    goto LABEL_44;
  FieldServantList = BattleData__getFieldServantList(v55, 0, 0LL);
  if ( !FieldServantList )
    goto LABEL_44;
  v56 = FieldServantList->max_length;
  v57 = FieldServantList;
  if ( v56 >= 1 )
  {
    v58 = 0;
    while ( v58 < v56 )
    {
      v59 = v57->m_Items[v58];
      if ( !v59 )
        goto LABEL_44;
      BattleServantData__updateBuff(v59, 1, 1, 0LL);
      v56 = v57->max_length;
      if ( (int)++v58 >= v56 )
        goto LABEL_43;
    }
    goto LABEL_45;
  }
LABEL_43:
  BattleLogic__updateEnemyTargetLogic(this, v31);
}


void __fastcall BattleLogic__updateGlobalTarget(BattleLogic_o *this, const MethodInfo *method)
{
  BattleData_o *data; // x0
  BattleLogicTarget_o *logictarget; // x0

  data = this->fields.data;
  if ( !data )
    goto LABEL_6;
  if ( BattleData__isTargetLock(data, 0LL) )
  {
    logictarget = this->fields.logictarget;
    if ( logictarget )
    {
      BattleLogicTarget__updateGlobalTarget(logictarget, 0LL);
      return;
    }
LABEL_6:
    sub_B170D4();
  }
}


void __fastcall BattleLogic__updateResultServant(BattleLogic_o *this, const MethodInfo *method)
{
  BattleData_o *data; // x0
  BattleServantData_array *FieldServantList; // x0
  __int64 v4; // x1
  __int64 v5; // x2
  int max_length; // w8
  BattleServantData_array *v7; // x19
  unsigned int v8; // w20
  BattleServantData_o *v9; // x0

  data = this->fields.data;
  if ( !data )
    goto LABEL_10;
  FieldServantList = BattleData__getFieldServantList(data, 0, 0LL);
  if ( !FieldServantList )
    goto LABEL_10;
  max_length = FieldServantList->max_length;
  v7 = FieldServantList;
  if ( max_length >= 1 )
  {
    v8 = 0;
    while ( 1 )
    {
      if ( v8 >= max_length )
      {
        sub_B17100(FieldServantList, v4, v5);
        sub_B170A0();
      }
      v9 = v7->m_Items[v8];
      if ( !v9 )
        break;
      BattleServantData__updateResultState(v9, 0LL);
      max_length = v7->max_length;
      if ( (int)++v8 >= max_length )
        return;
    }
LABEL_10:
    sub_B170D4();
  }
}


// local variable allocation has failed, the output may be wrong!
void __fastcall BattleLogic__useCommandSpell(
        BattleLogic_o *this,
        int32_t commandSkillId,
        int32_t ptTargetId,
        const MethodInfo *method)
{
  __int64 v4; // x4
  __int64 v8; // x1
  BattleLogic_CommandSpellData_o *v9; // x22
  PlayMakerFSM_o *fsm; // x0

  if ( (byte_40F73C8 & 1) == 0 )
  {
    sub_B16FFC(&BattleLogic_CommandSpellData_TypeInfo, *(_QWORD *)&commandSkillId);
    sub_B16FFC(&StringLiteral_11586, v8);
    byte_40F73C8 = 1;
  }
  v9 = (BattleLogic_CommandSpellData_o *)sub_B170CC(
                                           BattleLogic_CommandSpellData_TypeInfo,
                                           *(_QWORD *)&commandSkillId,
                                           *(_QWORD *)&ptTargetId,
                                           method,
                                           v4);
  BattleLogic_CommandSpellData___ctor(v9, commandSkillId, ptTargetId, 0LL);
  this->fields.tmp_usecommandspell = v9;
  sub_B16F98(&this->fields.tmp_usecommandspell, v9);
  fsm = this->fields.fsm;
  if ( !fsm )
    sub_B170D4();
  PlayMakerFSM__SendEvent(fsm, (System_String_o *)StringLiteral_11586, 0LL);
}


void __fastcall BattleLogic__useSkill(BattleLogic_o *this, const MethodInfo *method)
{
  __int64 v2; // x2
  __int64 v3; // x3
  __int64 v4; // x4
  __int64 v6; // x1
  __int64 v7; // x1
  __int64 v8; // x1
  __int64 v9; // x1
  __int64 v10; // x1
  System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData__o *v11; // x20
  struct BattleLogic_UseSkillObject_o *act_useSkill; // x8
  BattleSkillInfoData_o *skillInfo; // x21
  BattleData_o *data; // x0
  BattleServantData_o *PlayerServantData; // x0
  struct BattleData_o *v16; // x8
  BattlePerformance_o **p_perf; // x22
  BattleData_o *v18; // x0
  struct BattleData_o *v19; // x8
  struct BattlePerformance_o *perf; // x0
  struct BattleData_o *v21; // x8
  BattleData_o *v22; // x0
  const MethodInfo *v23; // x2
  BattleData_o *v24; // x0
  const MethodInfo *v25; // x1
  struct BattlePerformance_o *v26; // x8
  struct BattleLogic_UseSkillObject_o *v27; // x8
  BattleLogicSkill_o *logicSkill; // x0
  System_Collections_Generic_IEnumerable_T__o *v29; // x0
  BattleData_o *v30; // x0
  __int64 v31; // x1
  __int64 v32; // x2
  __int64 v33; // x3
  __int64 v34; // x4
  BattleLogicTask_o *v35; // x21
  BattleLogicTask_array *v36; // x1
  const MethodInfo *v37; // x2

  if ( (byte_40F73C3 & 1) == 0 )
  {
    sub_B16FFC(&BattleLogicTask_TypeInfo, method);
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleLogicTask__AddRange__, v6);
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleLogicTask__Add__, v7);
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleLogicTask__ToArray__, v8);
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleLogicTask___ctor__, v9);
    sub_B16FFC(&System_Collections_Generic_List_BattleLogicTask__TypeInfo, v10);
    byte_40F73C3 = 1;
  }
  v11 = (System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData__o *)sub_B170CC(
                                                                                                  System_Collections_Generic_List_BattleLogicTask__TypeInfo,
                                                                                                  method,
                                                                                                  v2,
                                                                                                  v3,
                                                                                                  v4);
  System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData____ctor(
    v11,
    (const MethodInfo_2F25014 *)Method_System_Collections_Generic_List_BattleLogicTask___ctor__);
  act_useSkill = this->fields.act_useSkill;
  if ( !act_useSkill )
    goto LABEL_27;
  skillInfo = act_useSkill->fields.skillInfo;
  if ( !skillInfo )
    goto LABEL_27;
  data = this->fields.data;
  if ( !data )
    goto LABEL_27;
  PlayerServantData = BattleData__getPlayerServantData(data, skillInfo->fields.svtUniqueId, 0LL);
  if ( PlayerServantData )
  {
    BattleServantData__useSkill(PlayerServantData, skillInfo, 0LL);
    v16 = this->fields.data;
    if ( !v16 )
      goto LABEL_27;
    p_perf = &this->fields.perf;
    ++v16->fields.playerSkillCount;
  }
  else
  {
    v18 = this->fields.data;
    if ( !v18 )
      goto LABEL_27;
    BattleData__useMasterSkill(v18, skillInfo, 0LL);
    v19 = this->fields.data;
    if ( !v19 )
      goto LABEL_27;
    ++v19->fields.playerMasterSkillCount;
    p_perf = &this->fields.perf;
    perf = this->fields.perf;
    if ( !perf )
      goto LABEL_27;
    v21 = perf->fields.data;
    if ( !v21 )
      goto LABEL_27;
    if ( v21->fields.isShowMasterSkillCutIn )
      BattlePerformance__playMasterCutIn(perf, 0LL);
  }
  if ( !*p_perf )
    goto LABEL_27;
  BattlePerformance__playActionSkill(*p_perf, 0LL);
  v22 = this->fields.data;
  if ( !v22 )
    goto LABEL_27;
  if ( BattleData__ExistsFieldEnemyIntervalBuff(v22, 38, 0LL) )
  {
    v24 = this->fields.data;
    if ( !v24 )
      goto LABEL_27;
    BattleData__ResetFieldEnemyUseBuff(v24, 38, 0, 0LL);
    BattleLogic__updateEnemyTargetLogic(this, v25);
  }
  BattleLogic__SetTimeAccelerationCheckDelayReset(this, 0, v23);
  v26 = this->fields.perf;
  if ( !v26 )
    goto LABEL_27;
  v26->fields.isTargetChange = 0;
  v27 = this->fields.act_useSkill;
  if ( !v27
    || (logicSkill = this->fields.logicSkill) == 0LL
    || (v29 = (System_Collections_Generic_IEnumerable_T__o *)BattleLogicSkill__taskSkill(
                                                               logicSkill,
                                                               skillInfo,
                                                               v27->fields.ptTarget,
                                                               0LL,
                                                               0,
                                                               0,
                                                               1,
                                                               0LL),
        !v11)
    || (System_Collections_Generic_List_TimeZoneInfo_AdjustmentRule___AddRange(
          (System_Collections_Generic_List_TimeZoneInfo_AdjustmentRule__o *)v11,
          v29,
          (const MethodInfo_2F25F28 *)Method_System_Collections_Generic_List_BattleLogicTask__AddRange__),
        (v30 = this->fields.data) == 0LL)
    || (BattleData__SetLastUsedPlayerSkillInfo(v30, skillInfo, 0LL),
        v35 = (BattleLogicTask_o *)sub_B170CC(BattleLogicTask_TypeInfo, v31, v32, v33, v34),
        BattleLogicTask___ctor(v35, 0LL),
        !v35) )
  {
LABEL_27:
    sub_B170D4();
  }
  BattleLogicTask__setCheckEntryFunction(v35, 0LL);
  System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData___Add(
    v11,
    (EventMissionProgressRequest_Argument_ProgressData_o *)v35,
    (const MethodInfo_2F25CD8 *)Method_System_Collections_Generic_List_BattleLogicTask__Add__);
  v36 = (BattleLogicTask_array *)System_Collections_Generic_List_WarBoardUiData_SaveData___ToArray(
                                   (System_Collections_Generic_List_WarBoardUiData_SaveData__o *)v11,
                                   (const MethodInfo_2F27E24 *)Method_System_Collections_Generic_List_BattleLogicTask__ToArray__);
  BattleLogic__actOneBattleTask(this, v36, v37);
}


// local variable allocation has failed, the output may be wrong!
System_Collections_IEnumerator_o *__fastcall BattleLogic__waitWaveStep(
        BattleLogic_o *this,
        BattleLogicTask_array *taskList,
        int32_t progress,
        const MethodInfo *method)
{
  __int64 v4; // x4
  BattleLogic__waitWaveStep_d__211_o *v8; // x22

  if ( (byte_40F73B1 & 1) == 0 )
  {
    sub_B16FFC(&BattleLogic__waitWaveStep_d__211_TypeInfo, taskList);
    byte_40F73B1 = 1;
  }
  v8 = (BattleLogic__waitWaveStep_d__211_o *)sub_B170CC(
                                               BattleLogic__waitWaveStep_d__211_TypeInfo,
                                               taskList,
                                               *(_QWORD *)&progress,
                                               method,
                                               v4);
  BattleLogic__waitWaveStep_d__211___ctor(v8, 0, 0LL);
  if ( !v8 )
    sub_B170D4();
  v8->fields.__4__this = this;
  sub_B16F98(&v8->fields.__4__this, this);
  v8->fields.taskList = taskList;
  sub_B16F98(&v8->fields.taskList, taskList);
  v8->fields.progress = progress;
  return (System_Collections_IEnumerator_o *)v8;
}


void __fastcall BattleLogic__wantUseSkill(
        BattleLogic_o *this,
        BattleSkillInfoData_o *skillInfo,
        int32_t pttarget,
        int32_t subtarget,
        const MethodInfo *method)
{
  __int64 v9; // x1
  __int64 v10; // x1
  CommonUI_o *Instance; // x0
  __int64 v12; // x1
  __int64 v13; // x2
  __int64 v14; // x3
  __int64 v15; // x4
  BattleLogic_UseSkillObject_o *v16; // x0
  struct BattleLogic_UseSkillObject_o *v17; // x23
  PlayMakerFSM_o *fsm; // x0

  if ( (byte_40F73C1 & 1) == 0 )
  {
    sub_B16FFC(&Method_SingletonMonoBehaviour_CommonUI__get_Instance__, skillInfo);
    sub_B16FFC(&BattleLogic_UseSkillObject_TypeInfo, v9);
    sub_B16FFC(&StringLiteral_11608, v10);
    byte_40F73C1 = 1;
  }
  Instance = (CommonUI_o *)SingletonMonoBehaviour_WebViewManager___get_Instance((const MethodInfo_2A54F38 *)Method_SingletonMonoBehaviour_CommonUI__get_Instance__);
  if ( !Instance )
    goto LABEL_9;
  CommonUI__CloseTutorialArrowMark(Instance, 0LL, 0LL);
  v16 = (BattleLogic_UseSkillObject_o *)sub_B170CC(BattleLogic_UseSkillObject_TypeInfo, v12, v13, v14, v15);
  v17 = v16;
  if ( subtarget == -1 )
    BattleLogic_UseSkillObject___ctor_22104448(v16, skillInfo, pttarget, 0LL);
  else
    BattleLogic_UseSkillObject___ctor_22104624(v16, skillInfo, pttarget, subtarget, 0LL);
  this->fields.tmp_useSkill = v17;
  sub_B16F98(&this->fields.tmp_useSkill, v17);
  fsm = this->fields.fsm;
  if ( !fsm )
LABEL_9:
    sub_B170D4();
  PlayMakerFSM__SendEvent(fsm, (System_String_o *)StringLiteral_11608, 0LL);
}


void __fastcall BattleLogic_CommandSpellData___ctor(
        BattleLogic_CommandSpellData_o *this,
        int32_t id,
        int32_t tg,
        const MethodInfo *method)
{
  System_Object___ctor((Il2CppObject *)this, 0LL);
  this->fields.commandSkillId = id;
  this->fields.ptTargetId = tg;
}


void __fastcall BattleLogic_DamageProcessArgs___ctor(
        BattleLogic_DamageProcessArgs_o *this,
        bool isNormalAttack,
        const MethodInfo *method)
{
  System_Object___ctor((Il2CppObject *)this, 0LL);
  this->fields._IsNormalAttack_k__BackingField = isNormalAttack;
}


bool __fastcall BattleLogic_DamageProcessArgs__get_IsNormalAttack(
        BattleLogic_DamageProcessArgs_o *this,
        const MethodInfo *method)
{
  return this->fields._IsNormalAttack_k__BackingField;
}


// local variable allocation has failed, the output may be wrong!
void __fastcall BattleLogic_TutorialStringData___ctor(
        BattleLogic_TutorialStringData_o *this,
        float way,
        UnityEngine_Vector2_o pos,
        int32_t size,
        const MethodInfo *method)
{
  float y; // s8
  float x; // s9

  y = pos.fields.y;
  x = pos.fields.x;
  System_Object___ctor((Il2CppObject *)this, 0LL);
  this->fields.way = way;
  this->fields.pos.fields.x = x;
  this->fields.pos.fields.y = y;
  this->fields.size = size;
}


void __fastcall BattleLogic_UseSkillObject___ctor(
        BattleLogic_UseSkillObject_o *this,
        BattleSkillInfoData_o *skillInfo,
        const MethodInfo *method)
{
  BattleLogic_UseSkillObject_Fields *p_fields; // x19
  __int64 v6; // x2
  __int64 v7; // x0
  __int64 v8; // x0
  __int64 v9; // x1
  __int64 v10; // x2
  struct System_Int32_array *ptTarget; // x8

  if ( (byte_40F853A & 1) == 0 )
  {
    sub_B16FFC(&int___TypeInfo, skillInfo);
    byte_40F853A = 1;
  }
  System_Object___ctor((Il2CppObject *)this, 0LL);
  this->fields.skillInfo = skillInfo;
  p_fields = &this->fields;
  sub_B16F98(p_fields, skillInfo);
  v7 = sub_B17014(int___TypeInfo, 1LL, v6);
  p_fields->ptTarget = (struct System_Int32_array *)v7;
  sub_B16F98(&p_fields->ptTarget, v7);
  ptTarget = p_fields->ptTarget;
  if ( !ptTarget )
    sub_B170D4();
  if ( !ptTarget->max_length )
  {
    sub_B17100(v8, v9, v10);
    sub_B170A0();
  }
  ptTarget->m_Items[1] = -1;
}


void __fastcall BattleLogic_UseSkillObject___ctor_22104448(
        BattleLogic_UseSkillObject_o *this,
        BattleSkillInfoData_o *skillInfo,
        int32_t pttarget,
        const MethodInfo *method)
{
  BattleLogic_UseSkillObject_Fields *p_fields; // x20
  __int64 v8; // x2
  __int64 v9; // x0
  __int64 v10; // x0
  __int64 v11; // x1
  __int64 v12; // x2
  struct System_Int32_array *v13; // x8

  if ( (byte_40F853B & 1) == 0 )
  {
    sub_B16FFC(&int___TypeInfo, skillInfo);
    byte_40F853B = 1;
  }
  System_Object___ctor((Il2CppObject *)this, 0LL);
  this->fields.skillInfo = skillInfo;
  p_fields = &this->fields;
  sub_B16F98(p_fields, skillInfo);
  v9 = sub_B17014(int___TypeInfo, 1LL, v8);
  p_fields->ptTarget = (struct System_Int32_array *)v9;
  sub_B16F98(&p_fields->ptTarget, v9);
  v13 = p_fields->ptTarget;
  if ( !v13 )
    sub_B170D4();
  if ( !v13->max_length )
  {
    sub_B17100(v10, v11, v12);
    sub_B170A0();
  }
  v13->m_Items[1] = pttarget;
}


void __fastcall BattleLogic_UseSkillObject___ctor_22104624(
        BattleLogic_UseSkillObject_o *this,
        BattleSkillInfoData_o *skillInfo,
        int32_t pttarget,
        int32_t subtarget,
        const MethodInfo *method)
{
  BattleLogic_UseSkillObject_Fields *p_fields; // x21
  __int64 v10; // x2
  __int64 v11; // x0
  struct System_Int32_array **p_ptTarget; // x22
  __int64 v13; // x0
  __int64 v14; // x1
  __int64 v15; // x2
  struct System_Int32_array *v16; // x8
  struct System_Int32_array *v17; // x8

  if ( (byte_40F853C & 1) == 0 )
  {
    sub_B16FFC(&int___TypeInfo, skillInfo);
    byte_40F853C = 1;
  }
  System_Object___ctor((Il2CppObject *)this, 0LL);
  this->fields.skillInfo = skillInfo;
  p_fields = &this->fields;
  sub_B16F98(p_fields, skillInfo);
  v11 = sub_B17014(int___TypeInfo, 2LL, v10);
  p_ptTarget = &p_fields->ptTarget;
  p_fields->ptTarget = (struct System_Int32_array *)v11;
  sub_B16F98(&p_fields->ptTarget, v11);
  v16 = p_fields->ptTarget;
  if ( !v16 )
    goto LABEL_8;
  if ( !v16->max_length )
    goto LABEL_9;
  v16->m_Items[1] = pttarget;
  v17 = *p_ptTarget;
  if ( !*p_ptTarget )
LABEL_8:
    sub_B170D4();
  if ( v17->max_length <= 1 )
  {
LABEL_9:
    sub_B17100(v13, v14, v15);
    sub_B170A0();
  }
  v17->m_Items[2] = subtarget;
}


void __fastcall BattleLogic__CorCallServant_d__328___ctor(
        BattleLogic__CorCallServant_d__328_o *this,
        int32_t 1__state,
        const MethodInfo *method)
{
  System_Object___ctor((Il2CppObject *)this, 0LL);
  this->fields.__1__state = 1__state;
}


bool __fastcall BattleLogic__CorCallServant_d__328__MoveNext(
        BattleLogic__CorCallServant_d__328_o *this,
        const MethodInfo *method)
{
  __int64 v3; // x1
  __int64 v4; // x1
  __int64 v5; // x1
  __int64 v6; // x1
  __int64 v7; // x1
  __int64 v8; // x1
  __int64 v9; // x1
  __int64 v10; // x1
  __int64 v11; // x1
  __int64 v12; // x1
  __int64 v13; // x1
  __int64 v14; // x1
  __int64 v15; // x1
  int32_t _1__state; // w8
  struct BattleLogic_o *_4__this; // x20
  struct BattleActionData_o *actionData; // x8
  BattlePerformance_o *perf; // x0
  UnityEngine_GameObject_o *ServantGameObject; // x0
  struct BattleActorControl_o *Component_srcLineSprite; // x0
  struct BattleActorControl_o **p_actor_5__2; // x21
  BattleActionData_o *v23; // x0
  BattleActionData_SummonServant_array *SummonServant; // x22
  __int64 v25; // x1
  __int64 v26; // x2
  __int64 v27; // x3
  __int64 v28; // x4
  System_Collections_Generic_List_BattleLogic_SummonInfo__o *v29; // x23
  struct System_Collections_Generic_List_BattleLogic_SummonInfo__o *infoList_5__3; // x8
  BattleActorControl_o *v31; // x0
  __int64 *v32; // x8
  Il2CppObject *v33; // x0
  Il2CppObject **p__2__current; // x19
  bool result; // w0
  System_Collections_Generic_List_BattleLogic_SummonInfo__o *v36; // x0
  BattlePerformance_o *v37; // x0
  Il2CppObject *current; // x21
  _BOOL8 EnemyActor; // x0
  __int64 v40; // x1
  __int64 v41; // x2
  struct BattlePerformance_o *v42; // x8
  struct UnityEngine_GameObject_array *e_actorlist; // x8
  UnityEngine_GameObject_o *v44; // x0
  BattleActorControl_o *v45; // x22
  UnityEngine_Component_o *actor_5__2; // x0
  System_String_o **v47; // x8
  System_String_o *v48; // x23
  BattlePerformance_o *v49; // x24
  UnityEngine_GameObject_o *gameObject; // x0
  System_Collections_Generic_List_Enumerator_T__o v51; // [xsp+8h] [xbp-88h] BYREF
  System_Collections_Generic_List_Enumerator_T__o v52; // [xsp+20h] [xbp-70h] BYREF

  if ( (byte_40F8528 & 1) == 0 )
  {
    sub_B16FFC(&Method_System_Collections_Generic_List_Enumerator_BattleLogic_SummonInfo__Dispose__, method);
    sub_B16FFC(&Method_System_Collections_Generic_List_Enumerator_BattleLogic_SummonInfo__MoveNext__, v3);
    sub_B16FFC(&Method_System_Collections_Generic_List_Enumerator_BattleLogic_SummonInfo__get_Current__, v4);
    sub_B16FFC(&Method_UnityEngine_GameObject_GetComponent_BattleActorControl___, v5);
    sub_B16FFC(&int_TypeInfo, v6);
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleLogic_SummonInfo__GetEnumerator__, v7);
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleLogic_SummonInfo___ctor__, v8);
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleLogic_SummonInfo__get_Count__, v9);
    sub_B16FFC(&System_Collections_Generic_List_BattleLogic_SummonInfo__TypeInfo, v10);
    sub_B16FFC(&ServantAssetLoadManager_TypeInfo, v11);
    sub_B16FFC(&StringLiteral_2906, v12);
    sub_B16FFC(&StringLiteral_8782, v13);
    sub_B16FFC(&StringLiteral_8762, v14);
    sub_B16FFC(&StringLiteral_2905, v15);
    byte_40F8528 = 1;
  }
  memset(&v52, 0, sizeof(v52));
  _1__state = this->fields.__1__state;
  _4__this = this->fields.__4__this;
  if ( _1__state == 1 )
  {
    this->fields.__1__state = -1;
    goto LABEL_15;
  }
  if ( !_1__state )
  {
    this->fields.__1__state = -1;
    if ( !_4__this )
      goto LABEL_48;
    actionData = this->fields.actionData;
    if ( !actionData )
      goto LABEL_48;
    perf = _4__this->fields.perf;
    if ( !perf )
      goto LABEL_48;
    ServantGameObject = BattlePerformance__getServantGameObject(perf, actionData->fields.actorId, 0LL);
    if ( !ServantGameObject )
      goto LABEL_48;
    Component_srcLineSprite = (struct BattleActorControl_o *)UnityEngine_GameObject__GetComponent_srcLineSprite_(
                                                               ServantGameObject,
                                                               (const MethodInfo_19D14E0 *)Method_UnityEngine_GameObject_GetComponent_BattleActorControl___);
    this->fields._actor_5__2 = Component_srcLineSprite;
    p_actor_5__2 = &this->fields._actor_5__2;
    sub_B16F98(&this->fields._actor_5__2, Component_srcLineSprite);
    v23 = this->fields.actionData;
    if ( !v23 )
      goto LABEL_48;
    SummonServant = BattleActionData__getSummonServant(v23, -1, 0LL);
    v29 = (System_Collections_Generic_List_BattleLogic_SummonInfo__o *)sub_B170CC(
                                                                         System_Collections_Generic_List_BattleLogic_SummonInfo__TypeInfo,
                                                                         v25,
                                                                         v26,
                                                                         v27,
                                                                         v28);
    System_Collections_Generic_List_BattleLogic_SummonInfo____ctor(
      v29,
      (const MethodInfo_2E604A0 *)Method_System_Collections_Generic_List_BattleLogic_SummonInfo___ctor__);
    this->fields._infoList_5__3 = v29;
    sub_B16F98(&this->fields._infoList_5__3, v29);
    BattleLogic__PreLoadSummonServant(_4__this, SummonServant, this->fields._infoList_5__3, 0LL);
    infoList_5__3 = this->fields._infoList_5__3;
    if ( !infoList_5__3 )
      goto LABEL_48;
    if ( infoList_5__3->fields._size < 1 )
    {
      v31 = *p_actor_5__2;
      if ( *p_actor_5__2 )
      {
        v32 = &StringLiteral_2905;
LABEL_37:
        BattleActorControl__sendEventFSM_32017324(v31, (System_String_o *)*v32, 0, 0LL);
        return 0;
      }
      goto LABEL_48;
    }
LABEL_15:
    if ( (BYTE3(ServantAssetLoadManager_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0
      && !ServantAssetLoadManager_TypeInfo->_2.cctor_finished )
    {
      j_il2cpp_runtime_class_init_0(ServantAssetLoadManager_TypeInfo);
    }
    if ( ServantAssetLoadManager__checkLoad(0LL) )
    {
      LODWORD(v51.fields.list) = 0;
      v33 = (Il2CppObject *)j_il2cpp_value_box_0(int_TypeInfo, &v51);
      this->fields.__2__current = v33;
      p__2__current = &this->fields.__2__current;
      sub_B16F98(p__2__current, v33);
      result = 1;
      *((_DWORD *)p__2__current - 2) = 1;
      return result;
    }
    v36 = this->fields._infoList_5__3;
    if ( v36 )
    {
      System_Collections_Generic_List_BattleLogic_SummonInfo___GetEnumerator(
        &v51,
        v36,
        (const MethodInfo_2E62044 *)Method_System_Collections_Generic_List_BattleLogic_SummonInfo__GetEnumerator__);
      v52 = v51;
      while ( System_Collections_Generic_List_Enumerator_BattleLogic_SummonInfo___MoveNext(
                &v52,
                (const MethodInfo_2079E64 *)Method_System_Collections_Generic_List_Enumerator_BattleLogic_SummonInfo__MoveNext__) )
      {
        if ( !_4__this )
          sub_B170D4();
        v37 = _4__this->fields.perf;
        if ( !v37 )
          sub_B170D4();
        current = v52.fields.current;
        EnemyActor = BattlePerformance__loadEnemyActor(v37, (int32_t)v52.fields.current, 0LL);
        v42 = _4__this->fields.perf;
        if ( !v42 )
          sub_B170D4();
        e_actorlist = v42->fields.e_actorlist;
        if ( !e_actorlist )
          sub_B170D4();
        if ( (unsigned int)current >= e_actorlist->max_length )
        {
          sub_B17100(EnemyActor, v40, v41);
          sub_B170A0();
        }
        v44 = e_actorlist->m_Items[(int)current];
        if ( !v44 )
          sub_B170D4();
        v45 = (BattleActorControl_o *)UnityEngine_GameObject__GetComponent_srcLineSprite_(
                                        v44,
                                        (const MethodInfo_19D14E0 *)Method_UnityEngine_GameObject_GetComponent_BattleActorControl___);
        actor_5__2 = (UnityEngine_Component_o *)this->fields._actor_5__2;
        if ( ((unsigned __int64)current & 0xFF00000000LL) != 0 )
          v47 = (System_String_o **)&StringLiteral_8782;
        else
          v47 = (System_String_o **)&StringLiteral_8762;
        if ( !actor_5__2 )
          sub_B170D4();
        v48 = *v47;
        v49 = _4__this->fields.perf;
        gameObject = UnityEngine_Component__get_gameObject(actor_5__2, 0LL);
        if ( !v49 )
          sub_B170D4();
        BattlePerformance__setCallMotion(v49, (int32_t)current, v45, gameObject, v48, 1, 0LL);
      }
      System_Collections_Generic_List_Enumerator_BattleLogic_SummonInfo___Dispose(
        &v52,
        (const MethodInfo_2079E60 *)Method_System_Collections_Generic_List_Enumerator_BattleLogic_SummonInfo__Dispose__);
      v31 = this->fields._actor_5__2;
      if ( v31 )
      {
        v32 = &StringLiteral_2906;
        goto LABEL_37;
      }
    }
LABEL_48:
    sub_B170D4();
  }
  return 0;
}


Il2CppObject *__fastcall BattleLogic__CorCallServant_d__328__System_Collections_Generic_IEnumerator_System_Object__get_Current(
        BattleLogic__CorCallServant_d__328_o *this,
        const MethodInfo *method)
{
  return this->fields.__2__current;
}


void __fastcall __noreturn BattleLogic__CorCallServant_d__328__System_Collections_IEnumerator_Reset(
        BattleLogic__CorCallServant_d__328_o *this,
        const MethodInfo *method)
{
  __int64 v2; // x0
  __int64 v3; // x1
  __int64 v4; // x2
  __int64 v5; // x3
  __int64 v6; // x4
  System_NotSupportedException_o *v7; // x0
  __int64 v8; // x1

  v2 = sub_B17000(&System_NotSupportedException_TypeInfo, method);
  v7 = (System_NotSupportedException_o *)sub_B170CC(v2, v3, v4, v5, v6);
  System_NotSupportedException___ctor(v7, 0LL);
  sub_B17000(&Method_BattleLogic__CorCallServant_d__328_System_Collections_IEnumerator_Reset__, v8);
  sub_B170A0();
}


Il2CppObject *__fastcall BattleLogic__CorCallServant_d__328__System_Collections_IEnumerator_get_Current(
        BattleLogic__CorCallServant_d__328_o *this,
        const MethodInfo *method)
{
  return this->fields.__2__current;
}


void __fastcall BattleLogic__CorCallServant_d__328__System_IDisposable_Dispose(
        BattleLogic__CorCallServant_d__328_o *this,
        const MethodInfo *method)
{
  ;
}


void __fastcall BattleLogic__CorFieldCallServant_d__331___ctor(
        BattleLogic__CorFieldCallServant_d__331_o *this,
        int32_t 1__state,
        const MethodInfo *method)
{
  System_Object___ctor((Il2CppObject *)this, 0LL);
  this->fields.__1__state = 1__state;
}


bool __fastcall BattleLogic__CorFieldCallServant_d__331__MoveNext(
        BattleLogic__CorFieldCallServant_d__331_o *this,
        const MethodInfo *method)
{
  __int64 v3; // x1
  __int64 v4; // x1
  __int64 v5; // x1
  __int64 v6; // x1
  __int64 v7; // x1
  __int64 v8; // x1
  __int64 v9; // x1
  __int64 v10; // x1
  __int64 v11; // x1
  __int64 v12; // x1
  __int64 v13; // x1
  __int64 v14; // x1
  __int64 v15; // x1
  __int64 v16; // x1
  __int64 v17; // x1
  __int64 v18; // x1
  __int64 v19; // x1
  __int64 v20; // x1
  __int64 v21; // x1
  __int64 v22; // x1
  int32_t _1__state; // w8
  struct BattleLogic_o *_4__this; // x20
  bool result; // w0
  BattleActionData_o *actionData; // x0
  BattleActionData_SummonServant_array *SummonServant; // x21
  __int64 v28; // x1
  __int64 v29; // x2
  __int64 v30; // x3
  __int64 v31; // x4
  System_Collections_Generic_List_BattleLogic_SummonInfo__o *v32; // x23
  System_Collections_Generic_List_BattleLogic_SummonInfo__o **p_summonInfoList_5__2; // x22
  BattlePerformance_o *perf; // x0
  __int64 *v35; // x8
  __int64 v36; // x1
  __int64 v37; // x2
  __int64 v38; // x3
  __int64 v39; // x4
  Il2CppObject **p__2__current; // x19
  int32_t *p_summonEndCount_5__4; // x22
  System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData__o **p_summonActorList_5__3; // x21
  System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData__o *v43; // x22
  System_Collections_Generic_List_BattleLogic_SummonInfo__o *summonInfoList_5__2; // x0
  BattlePerformance_o *v45; // x0
  Il2CppObject *current; // x22
  _BOOL8 EnemyActor; // x0
  __int64 v48; // x1
  __int64 v49; // x2
  struct BattlePerformance_o *v50; // x8
  struct UnityEngine_GameObject_array *e_actorlist; // x8
  UnityEngine_GameObject_o *v52; // x0
  BattleActorControl_o *Component_srcLineSprite; // x23
  BattlePerformance_o *v54; // x0
  System_String_o **v55; // x8
  System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData__o *v56; // x0
  int v57; // w20
  Il2CppObject **v58; // x19
  System_Collections_Generic_List_Enumerator_T__o v59; // [xsp+0h] [xbp-B0h] BYREF
  int v60[2]; // [xsp+18h] [xbp-98h]
  int v61; // [xsp+20h] [xbp-90h]
  System_Collections_Generic_List_Enumerator_T__o v62; // [xsp+28h] [xbp-88h] BYREF
  System_Collections_Generic_List_Enumerator_T__o v63; // [xsp+40h] [xbp-70h] BYREF

  if ( (byte_40F8529 & 1) == 0 )
  {
    sub_B16FFC(&Method_System_Collections_Generic_List_Enumerator_BattleActorControl__Dispose__, method);
    sub_B16FFC(&Method_System_Collections_Generic_List_Enumerator_BattleLogic_SummonInfo__Dispose__, v3);
    sub_B16FFC(&Method_System_Collections_Generic_List_Enumerator_BattleLogic_SummonInfo__MoveNext__, v4);
    sub_B16FFC(&Method_System_Collections_Generic_List_Enumerator_BattleActorControl__MoveNext__, v5);
    sub_B16FFC(&Method_System_Collections_Generic_List_Enumerator_BattleActorControl__get_Current__, v6);
    sub_B16FFC(&Method_System_Collections_Generic_List_Enumerator_BattleLogic_SummonInfo__get_Current__, v7);
    sub_B16FFC(&Method_UnityEngine_GameObject_GetComponent_BattleActorControl___, v8);
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleActorControl__Add__, v9);
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleActorControl__GetEnumerator__, v10);
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleLogic_SummonInfo__GetEnumerator__, v11);
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleActorControl___ctor__, v12);
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleLogic_SummonInfo___ctor__, v13);
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleLogic_SummonInfo__get_Count__, v14);
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleActorControl__get_Count__, v15);
    sub_B16FFC(&System_Collections_Generic_List_BattleLogic_SummonInfo__TypeInfo, v16);
    sub_B16FFC(&System_Collections_Generic_List_BattleActorControl__TypeInfo, v17);
    sub_B16FFC(&ServantAssetLoadManager_TypeInfo, v18);
    sub_B16FFC(&StringLiteral_2906, v19);
    sub_B16FFC(&StringLiteral_8782, v20);
    sub_B16FFC(&StringLiteral_8762, v21);
    sub_B16FFC(&StringLiteral_2905, v22);
    byte_40F8529 = 1;
  }
  memset(&v63, 0, sizeof(v63));
  memset(&v62, 0, sizeof(v62));
  v61 = 0;
  _1__state = this->fields.__1__state;
  _4__this = this->fields.__4__this;
  if ( _1__state == 2 )
  {
    p_summonEndCount_5__4 = &this->fields._summonEndCount_5__4;
    p_summonActorList_5__3 = (System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData__o **)&this->fields._summonActorList_5__3;
    this->fields.__1__state = -1;
  }
  else
  {
    if ( _1__state == 1 )
    {
      this->fields.__1__state = -1;
    }
    else
    {
      result = 0;
      if ( _1__state )
        return result;
      actionData = this->fields.actionData;
      this->fields.__1__state = -1;
      if ( !actionData )
        goto LABEL_60;
      SummonServant = BattleActionData__getSummonServant(actionData, -1, 0LL);
      v32 = (System_Collections_Generic_List_BattleLogic_SummonInfo__o *)sub_B170CC(
                                                                           System_Collections_Generic_List_BattleLogic_SummonInfo__TypeInfo,
                                                                           v28,
                                                                           v29,
                                                                           v30,
                                                                           v31);
      System_Collections_Generic_List_BattleLogic_SummonInfo____ctor(
        v32,
        (const MethodInfo_2E604A0 *)Method_System_Collections_Generic_List_BattleLogic_SummonInfo___ctor__);
      this->fields._summonInfoList_5__2 = v32;
      p_summonInfoList_5__2 = &this->fields._summonInfoList_5__2;
      sub_B16F98(&this->fields._summonInfoList_5__2, v32);
      if ( !_4__this )
        goto LABEL_60;
      BattleLogic__PreLoadSummonServant(_4__this, SummonServant, *p_summonInfoList_5__2, 0LL);
      if ( !*p_summonInfoList_5__2 )
        goto LABEL_60;
      if ( (*p_summonInfoList_5__2)->fields._size <= 0 )
      {
        perf = _4__this->fields.perf;
        if ( perf )
        {
          v35 = &StringLiteral_2905;
LABEL_49:
          BattlePerformance__sendLocalEventFieldMotion(perf, (System_String_o *)*v35, 0LL);
          return 0;
        }
        goto LABEL_60;
      }
    }
    if ( (BYTE3(ServantAssetLoadManager_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0
      && !ServantAssetLoadManager_TypeInfo->_2.cctor_finished )
    {
      j_il2cpp_runtime_class_init_0(ServantAssetLoadManager_TypeInfo);
    }
    if ( ServantAssetLoadManager__checkLoad(0LL) )
    {
      this->fields.__2__current = 0LL;
      p__2__current = &this->fields.__2__current;
      sub_B16F98(p__2__current, 0LL);
      result = 1;
      *((_DWORD *)p__2__current - 2) = 1;
      return result;
    }
    v43 = (System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData__o *)sub_B170CC(
                                                                                                    System_Collections_Generic_List_BattleActorControl__TypeInfo,
                                                                                                    v36,
                                                                                                    v37,
                                                                                                    v38,
                                                                                                    v39);
    System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData____ctor(
      v43,
      (const MethodInfo_2F25014 *)Method_System_Collections_Generic_List_BattleActorControl___ctor__);
    this->fields._summonActorList_5__3 = (struct System_Collections_Generic_List_BattleActorControl__o *)v43;
    p_summonActorList_5__3 = (System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData__o **)&this->fields._summonActorList_5__3;
    sub_B16F98(&this->fields._summonActorList_5__3, v43);
    summonInfoList_5__2 = this->fields._summonInfoList_5__2;
    if ( !summonInfoList_5__2 )
      goto LABEL_60;
    System_Collections_Generic_List_BattleLogic_SummonInfo___GetEnumerator(
      &v59,
      summonInfoList_5__2,
      (const MethodInfo_2E62044 *)Method_System_Collections_Generic_List_BattleLogic_SummonInfo__GetEnumerator__);
    v63 = v59;
    while ( System_Collections_Generic_List_Enumerator_BattleLogic_SummonInfo___MoveNext(
              &v63,
              (const MethodInfo_2079E64 *)Method_System_Collections_Generic_List_Enumerator_BattleLogic_SummonInfo__MoveNext__) )
    {
      if ( !_4__this )
        sub_B170D4();
      v45 = _4__this->fields.perf;
      if ( !v45 )
        sub_B170D4();
      current = v63.fields.current;
      EnemyActor = BattlePerformance__loadEnemyActor(v45, (int32_t)v63.fields.current, 0LL);
      v50 = _4__this->fields.perf;
      if ( !v50 )
        sub_B170D4();
      e_actorlist = v50->fields.e_actorlist;
      if ( !e_actorlist )
        sub_B170D4();
      if ( (unsigned int)current >= e_actorlist->max_length )
      {
        sub_B17100(EnemyActor, v48, v49);
        sub_B170A0();
      }
      v52 = e_actorlist->m_Items[(int)current];
      if ( !v52 )
        sub_B170D4();
      Component_srcLineSprite = (BattleActorControl_o *)UnityEngine_GameObject__GetComponent_srcLineSprite_(
                                                          v52,
                                                          (const MethodInfo_19D14E0 *)Method_UnityEngine_GameObject_GetComponent_BattleActorControl___);
      v54 = _4__this->fields.perf;
      if ( !v54 )
        sub_B170D4();
      if ( ((unsigned __int64)current & 0xFF00000000LL) != 0 )
        v55 = (System_String_o **)&StringLiteral_8782;
      else
        v55 = (System_String_o **)&StringLiteral_8762;
      BattlePerformance__setCallMotion(v54, (int32_t)current, Component_srcLineSprite, 0LL, *v55, 0, 0LL);
      if ( !*p_summonActorList_5__3 )
        sub_B170D4();
      System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData___Add(
        *p_summonActorList_5__3,
        (EventMissionProgressRequest_Argument_ProgressData_o *)Component_srcLineSprite,
        (const MethodInfo_2F25CD8 *)Method_System_Collections_Generic_List_BattleActorControl__Add__);
    }
    v60[0] = 304;
    v61 = 1;
    System_Collections_Generic_List_Enumerator_BattleLogic_SummonInfo___Dispose(
      &v63,
      (const MethodInfo_2079E60 *)Method_System_Collections_Generic_List_Enumerator_BattleLogic_SummonInfo__Dispose__);
    v61 = 0;
    this->fields._summonEndCount_5__4 = 0;
    p_summonEndCount_5__4 = &this->fields._summonEndCount_5__4;
  }
  v56 = *p_summonActorList_5__3;
  if ( !*p_summonActorList_5__3 )
    goto LABEL_60;
  if ( *p_summonEndCount_5__4 >= v56->fields._size )
  {
    if ( _4__this )
    {
      perf = _4__this->fields.perf;
      if ( perf )
      {
        v35 = &StringLiteral_2906;
        goto LABEL_49;
      }
    }
LABEL_60:
    sub_B170D4();
  }
  *p_summonEndCount_5__4 = 0;
  System_Collections_Generic_List_BattleLogicBuff_ReduceHpProcess_BuffInfo___GetEnumerator(
    &v62,
    (System_Collections_Generic_List_BattleLogicBuff_ReduceHpProcess_BuffInfo__o *)v56,
    (const MethodInfo_2F26B54 *)Method_System_Collections_Generic_List_BattleActorControl__GetEnumerator__);
  while ( System_Collections_Generic_List_Enumerator_BattleLogicBuff_ReduceHpProcess_BuffInfo___MoveNext(
            &v62,
            (const MethodInfo_2074054 *)Method_System_Collections_Generic_List_Enumerator_BattleActorControl__MoveNext__) )
  {
    if ( !v62.fields.current )
      sub_B170D4();
    if ( BattleActorControl__isSummonEndFlag((BattleActorControl_o *)v62.fields.current, 0LL) )
      ++*p_summonEndCount_5__4;
  }
  v60[0] = 392;
  v57 = ++v61;
  System_Collections_Generic_List_Enumerator_BattleLogicBuff_ReduceHpProcess_BuffInfo___Dispose(
    &v62,
    (const MethodInfo_2074050 *)Method_System_Collections_Generic_List_Enumerator_BattleActorControl__Dispose__);
  if ( v57 && v60[v57 - 1] == 392 )
    v61 = v57 - 1;
  this->fields.__2__current = 0LL;
  v58 = &this->fields.__2__current;
  sub_B16F98(v58, 0LL);
  *((_DWORD *)v58 - 2) = 2;
  return 1;
}


Il2CppObject *__fastcall BattleLogic__CorFieldCallServant_d__331__System_Collections_Generic_IEnumerator_System_Object__get_Current(
        BattleLogic__CorFieldCallServant_d__331_o *this,
        const MethodInfo *method)
{
  return this->fields.__2__current;
}


void __fastcall __noreturn BattleLogic__CorFieldCallServant_d__331__System_Collections_IEnumerator_Reset(
        BattleLogic__CorFieldCallServant_d__331_o *this,
        const MethodInfo *method)
{
  __int64 v2; // x0
  __int64 v3; // x1
  __int64 v4; // x2
  __int64 v5; // x3
  __int64 v6; // x4
  System_NotSupportedException_o *v7; // x0
  __int64 v8; // x1

  v2 = sub_B17000(&System_NotSupportedException_TypeInfo, method);
  v7 = (System_NotSupportedException_o *)sub_B170CC(v2, v3, v4, v5, v6);
  System_NotSupportedException___ctor(v7, 0LL);
  sub_B17000(&Method_BattleLogic__CorFieldCallServant_d__331_System_Collections_IEnumerator_Reset__, v8);
  sub_B170A0();
}


Il2CppObject *__fastcall BattleLogic__CorFieldCallServant_d__331__System_Collections_IEnumerator_get_Current(
        BattleLogic__CorFieldCallServant_d__331_o *this,
        const MethodInfo *method)
{
  return this->fields.__2__current;
}


void __fastcall BattleLogic__CorFieldCallServant_d__331__System_IDisposable_Dispose(
        BattleLogic__CorFieldCallServant_d__331_o *this,
        const MethodInfo *method)
{
  ;
}


void __fastcall BattleLogic__CoroutineCheckAssistSkill_d__346___ctor(
        BattleLogic__CoroutineCheckAssistSkill_d__346_o *this,
        int32_t 1__state,
        const MethodInfo *method)
{
  System_Object___ctor((Il2CppObject *)this, 0LL);
  this->fields.__1__state = 1__state;
}


bool __fastcall BattleLogic__CoroutineCheckAssistSkill_d__346__MoveNext(
        BattleLogic__CoroutineCheckAssistSkill_d__346_o *this,
        const MethodInfo *method)
{
  __int64 v3; // x1
  __int64 v4; // x1
  __int64 v5; // x1
  __int64 v6; // x1
  __int64 v7; // x1
  __int64 v8; // x1
  __int64 v9; // x1
  __int64 v10; // x1
  __int64 v11; // x1
  __int64 v12; // x1
  __int64 v13; // x1
  __int64 v14; // x1
  __int64 v15; // x1
  __int64 v16; // x1
  __int64 v17; // x1
  int32_t _1__state; // w8
  struct BattleLogic_o *_4__this; // x20
  BattleData_o *data; // x0
  BattleData_o *v21; // x0
  __int64 v22; // x1
  __int64 v23; // x2
  __int64 v24; // x3
  __int64 v25; // x4
  System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData__o *v26; // x22
  System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData__o **p_logicTaskList_5__2; // x21
  BattleData_o *v28; // x0
  BattleData_o *v29; // x0
  System_Int32_array *AssistIdArray; // x0
  System_Int32_array *v31; // x22
  System_Int32_array *AssistWeightArray; // x0
  System_Int32_array *v33; // x24
  WebViewManager_o *Instance; // x0
  AssistMaster_o *MasterData_WarQuestSelectionMaster; // x23
  __int64 v36; // x1
  __int64 v37; // x2
  __int64 v38; // x3
  __int64 v39; // x4
  WeightRate_int__o *v40; // x25
  AssistEntity_o *CurrentLevelEntity; // x0
  __int64 v42; // x1
  __int64 v43; // x2
  __int64 v44; // x8
  unsigned __int64 v45; // x26
  int32_t *v46; // x27
  int32_t Next; // w0
  int32_t v48; // w0
  AssistEntity_o *v49; // x23
  __int64 v50; // x1
  __int64 v51; // x2
  __int64 v52; // x3
  __int64 v53; // x4
  __int64 v54; // x22
  __int64 v55; // x1
  __int64 v56; // x2
  __int64 v57; // x3
  __int64 v58; // x4
  BattleLogicTask_o *v59; // x23
  BattleData_o *v60; // x0
  System_Int32_array *FieldEnemyServantIDList; // x0
  System_Int32_array *v62; // x24
  System_Int32_array *FieldPlayerServantIDList; // x0
  bool result; // w0
  BattlePerformance_o *perf; // x0
  Il2CppObject **p__2__current; // x19
  BattlePerformance_o *v67; // x0
  struct System_Collections_Generic_List_BattleLogicTask__o *logicTaskList_5__2; // x0
  BattleLogicTask_array *v69; // x0
  System_Collections_IEnumerator_o *v70; // x0
  struct BattlePerformance_o *v71; // x8

  if ( (byte_40F852A & 1) == 0 )
  {
    sub_B16FFC(&BattleLogicTask_TypeInfo, method);
    sub_B16FFC(&BattleSkillInfoData_TypeInfo, v3);
    sub_B16FFC(&Method_DataManager_GetMasterData_AssistMaster___, v4);
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleLogicTask__Add__, v5);
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleLogicTask__ToArray__, v6);
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleLogicTask___ctor__, v7);
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleLogicTask__get_Count__, v8);
    sub_B16FFC(&System_Collections_Generic_List_BattleLogicTask__TypeInfo, v9);
    sub_B16FFC(&Method_SingletonMonoBehaviour_DataManager__get_Instance__, v10);
    sub_B16FFC(&Method_WeightRate_int___ctor__, v11);
    sub_B16FFC(&Method_WeightRate_int__getCount__, v12);
    sub_B16FFC(&Method_WeightRate_int__getData__, v13);
    sub_B16FFC(&Method_WeightRate_int__getTotalWeight__, v14);
    sub_B16FFC(&Method_WeightRate_int__setWeight__, v15);
    sub_B16FFC(&WeightRate_int__TypeInfo, v16);
    sub_B16FFC(&StringLiteral_12204, v17);
    byte_40F852A = 1;
  }
  _1__state = this->fields.__1__state;
  _4__this = this->fields.__4__this;
  if ( _1__state != 1 )
  {
    if ( _1__state )
      return 0;
    this->fields.__1__state = -1;
    if ( !_4__this )
      goto LABEL_52;
    data = _4__this->fields.data;
    if ( !data )
      goto LABEL_52;
    if ( BattleData__checkProgressflg(data, 512, 0LL) )
    {
      v21 = _4__this->fields.data;
      if ( !v21 )
        goto LABEL_52;
      BattleData__offProgressflg(v21, 512, 0LL);
      v26 = (System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData__o *)sub_B170CC(System_Collections_Generic_List_BattleLogicTask__TypeInfo, v22, v23, v24, v25);
      System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData____ctor(
        v26,
        (const MethodInfo_2F25014 *)Method_System_Collections_Generic_List_BattleLogicTask___ctor__);
      this->fields._logicTaskList_5__2 = (struct System_Collections_Generic_List_BattleLogicTask__o *)v26;
      p_logicTaskList_5__2 = (System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData__o **)&this->fields._logicTaskList_5__2;
      sub_B16F98(&this->fields._logicTaskList_5__2, v26);
      v28 = _4__this->fields.data;
      if ( !v28 )
        goto LABEL_52;
      if ( !BattleData__isFirstStage(v28, 0LL) )
        goto LABEL_39;
      v29 = _4__this->fields.data;
      if ( !v29 )
        goto LABEL_52;
      AssistIdArray = BattleData__GetAssistIdArray(v29, 0LL);
      if ( !_4__this->fields.data )
        goto LABEL_52;
      v31 = AssistIdArray;
      AssistWeightArray = BattleData__GetAssistWeightArray(_4__this->fields.data, 0LL);
      if ( !v31 )
        goto LABEL_52;
      if ( *(_QWORD *)&v31->max_length )
      {
        v33 = AssistWeightArray;
        if ( !AssistWeightArray )
          goto LABEL_52;
        if ( *(_QWORD *)&AssistWeightArray->max_length )
        {
          Instance = SingletonMonoBehaviour_WebViewManager___get_Instance((const MethodInfo_2A54F38 *)Method_SingletonMonoBehaviour_DataManager__get_Instance__);
          if ( !Instance )
            goto LABEL_52;
          MasterData_WarQuestSelectionMaster = (AssistMaster_o *)DataManager__GetMasterData_WarQuestSelectionMaster_(
                                                                   (DataManager_o *)Instance,
                                                                   (const MethodInfo_18C3284 *)Method_DataManager_GetMasterData_AssistMaster___);
          v40 = (WeightRate_int__o *)sub_B170CC(WeightRate_int__TypeInfo, v36, v37, v38, v39);
          WeightRate_int____ctor(v40, (const MethodInfo_2ADD274 *)Method_WeightRate_int___ctor__);
          v44 = *(_QWORD *)&v31->max_length;
          if ( (int)v44 >= 1 )
          {
            v45 = 0LL;
            v46 = &v31->m_Items[1];
            while ( v45 < (unsigned int)v44 )
            {
              if ( !MasterData_WarQuestSelectionMaster )
                goto LABEL_52;
              CurrentLevelEntity = AssistMaster__GetCurrentLevelEntity(
                                     MasterData_WarQuestSelectionMaster,
                                     v46[v45],
                                     0LL);
              if ( CurrentLevelEntity )
              {
                CurrentLevelEntity = (AssistEntity_o *)AssistEntity__IsOpen(CurrentLevelEntity, 0LL);
                if ( ((unsigned __int8)CurrentLevelEntity & 1) != 0 )
                {
                  if ( v45 >= v33->max_length || v45 >= v31->max_length )
                    break;
                  if ( !v40 )
                    goto LABEL_52;
                  WeightRate_int___setWeight(
                    v40,
                    v33->m_Items[v45 + 1],
                    v46[v45],
                    (const MethodInfo_2ADC43C *)Method_WeightRate_int__setWeight__);
                }
              }
              LODWORD(v44) = v31->max_length;
              if ( (__int64)++v45 >= (int)v44 )
                goto LABEL_29;
            }
            sub_B17100(CurrentLevelEntity, v42, v43);
            sub_B170A0();
          }
LABEL_29:
          if ( !v40 )
            goto LABEL_52;
          if ( WeightRate_int___getCount(v40, (const MethodInfo_2ADC7DC *)Method_WeightRate_int__getCount__) > 0 )
          {
            Next = BattleRandom__getNext(v40->fields.totalweight, 0LL);
            v48 = WeightRate_int___getData(v40, Next, (const MethodInfo_2ADC8C0 *)Method_WeightRate_int__getData__);
            if ( !MasterData_WarQuestSelectionMaster )
              goto LABEL_52;
            v49 = AssistMaster__GetCurrentLevelEntity(MasterData_WarQuestSelectionMaster, v48, 0LL);
            v54 = sub_B170CC(BattleSkillInfoData_TypeInfo, v50, v51, v52, v53);
            BattleSkillInfoData___ctor((BattleSkillInfoData_o *)v54, 0LL);
            if ( !v54 )
              goto LABEL_52;
            *(_DWORD *)(v54 + 24) = -1;
            *(_QWORD *)(v54 + 16) = 20LL;
            if ( !v49 )
              goto LABEL_52;
            (*(void (__fastcall **)(__int64, _QWORD, _QWORD))(*(_QWORD *)v54 + 376LL))(
              v54,
              (unsigned int)v49->fields.skillId,
              *(_QWORD *)(*(_QWORD *)v54 + 384LL));
            *(_DWORD *)(v54 + 36) = v49->fields.skillLv;
            v59 = (BattleLogicTask_o *)sub_B170CC(BattleLogicTask_TypeInfo, v55, v56, v57, v58);
            BattleLogicTask___ctor(v59, 0LL);
            v60 = _4__this->fields.data;
            if ( !v60 )
              goto LABEL_52;
            FieldEnemyServantIDList = BattleData__getFieldEnemyServantIDList(v60, 0, 0LL);
            if ( !_4__this->fields.data )
              goto LABEL_52;
            v62 = FieldEnemyServantIDList;
            FieldPlayerServantIDList = BattleData__getFieldPlayerServantIDList(_4__this->fields.data, 0LL, 0LL);
            if ( !v59 )
              goto LABEL_52;
            BattleLogicTask__setActionSkill(v59, (BattleSkillInfoData_o *)v54, v62, FieldPlayerServantIDList, 0, 0, 0LL);
            BattleLogicTask__setActor(v59, 5, -1, 0LL);
            if ( !*p_logicTaskList_5__2 )
              goto LABEL_52;
            System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData___Add(
              *p_logicTaskList_5__2,
              (EventMissionProgressRequest_Argument_ProgressData_o *)v59,
              (const MethodInfo_2F25CD8 *)Method_System_Collections_Generic_List_BattleLogicTask__Add__);
LABEL_39:
            if ( !*p_logicTaskList_5__2 )
              goto LABEL_52;
            if ( (*p_logicTaskList_5__2)->fields._size < 1 )
            {
              *p_logicTaskList_5__2 = 0LL;
              sub_B16F98(&this->fields._logicTaskList_5__2, 0LL);
              goto LABEL_42;
            }
            goto LABEL_45;
          }
        }
      }
    }
LABEL_42:
    BattleLogic__sendFsmEvent(_4__this, (System_String_o *)StringLiteral_12204, 0LL);
    return 0;
  }
  this->fields.__1__state = -1;
  if ( !_4__this )
    goto LABEL_52;
LABEL_45:
  perf = _4__this->fields.perf;
  if ( !perf )
    goto LABEL_52;
  if ( BattlePerformance__ExistsMessageObject(perf, 0LL) )
  {
    this->fields.__2__current = 0LL;
    p__2__current = &this->fields.__2__current;
    sub_B16F98(p__2__current, 0LL);
    result = 1;
    *((_DWORD *)p__2__current - 2) = 1;
    return result;
  }
  v67 = _4__this->fields.perf;
  if ( !v67
    || (_4__this->fields.isEnableSkipAssistSkill = BattlePerformance__isEnableSkipStartQuest(v67, 0LL),
        (logicTaskList_5__2 = this->fields._logicTaskList_5__2) == 0LL)
    || (v69 = (BattleLogicTask_array *)System_Collections_Generic_List_WarBoardUiData_SaveData___ToArray(
                                         (System_Collections_Generic_List_WarBoardUiData_SaveData__o *)logicTaskList_5__2,
                                         (const MethodInfo_2F27E24 *)Method_System_Collections_Generic_List_BattleLogicTask__ToArray__),
        v70 = BattleLogic__waitWaveStep(_4__this, v69, 512, 0LL),
        UnityEngine_MonoBehaviour__StartCoroutine_34804316((UnityEngine_MonoBehaviour_o *)_4__this, v70, 0LL),
        (v71 = _4__this->fields.perf) == 0LL) )
  {
LABEL_52:
    sub_B170D4();
  }
  result = 0;
  v71->fields.isEnableSkipSkillCutIn = _4__this->fields.isEnableSkipAssistSkill;
  return result;
}


Il2CppObject *__fastcall BattleLogic__CoroutineCheckAssistSkill_d__346__System_Collections_Generic_IEnumerator_System_Object__get_Current(
        BattleLogic__CoroutineCheckAssistSkill_d__346_o *this,
        const MethodInfo *method)
{
  return this->fields.__2__current;
}


void __fastcall __noreturn BattleLogic__CoroutineCheckAssistSkill_d__346__System_Collections_IEnumerator_Reset(
        BattleLogic__CoroutineCheckAssistSkill_d__346_o *this,
        const MethodInfo *method)
{
  __int64 v2; // x0
  __int64 v3; // x1
  __int64 v4; // x2
  __int64 v5; // x3
  __int64 v6; // x4
  System_NotSupportedException_o *v7; // x0
  __int64 v8; // x1

  v2 = sub_B17000(&System_NotSupportedException_TypeInfo, method);
  v7 = (System_NotSupportedException_o *)sub_B170CC(v2, v3, v4, v5, v6);
  System_NotSupportedException___ctor(v7, 0LL);
  sub_B17000(&Method_BattleLogic__CoroutineCheckAssistSkill_d__346_System_Collections_IEnumerator_Reset__, v8);
  sub_B170A0();
}


Il2CppObject *__fastcall BattleLogic__CoroutineCheckAssistSkill_d__346__System_Collections_IEnumerator_get_Current(
        BattleLogic__CoroutineCheckAssistSkill_d__346_o *this,
        const MethodInfo *method)
{
  return this->fields.__2__current;
}


void __fastcall BattleLogic__CoroutineCheckAssistSkill_d__346__System_IDisposable_Dispose(
        BattleLogic__CoroutineCheckAssistSkill_d__346_o *this,
        const MethodInfo *method)
{
  ;
}


void __fastcall BattleLogic__CoroutineInitQuest_d__318___ctor(
        BattleLogic__CoroutineInitQuest_d__318_o *this,
        int32_t 1__state,
        const MethodInfo *method)
{
  System_Object___ctor((Il2CppObject *)this, 0LL);
  this->fields.__1__state = 1__state;
}


bool __fastcall BattleLogic__CoroutineInitQuest_d__318__MoveNext(
        BattleLogic__CoroutineInitQuest_d__318_o *this,
        const MethodInfo *method)
{
  __int64 v3; // x1
  __int64 v4; // x1
  __int64 v5; // x1
  struct BattleLogic_o *_4__this; // x20
  BattlePerformance_o *perf; // x0
  struct BattlePerformance_o *v8; // x8
  AssumedBattleAssetLoadManager_o *AssumedBattleAssetLoadManager_k__BackingField; // x0
  Il2CppObject **p__2__current; // x19
  bool result; // w0
  Il2CppObject **v12; // x19
  int v13; // w8
  BattlePerformance_o *v14; // x0
  Spawner_o *spawner; // x0
  struct BattlePerformance_o *v16; // x8
  struct BattlePerformanceBg_o *bgPerf; // x8
  System_Action_o *finishCallback; // x0
  BattlePerformance_o *v19; // x0
  System_Collections_IEnumerator_o *PlayerActor; // x0
  Il2CppObject *started; // x0
  Il2CppObject *v22; // x0
  int v23; // [xsp+Ch] [xbp-14h] BYREF

  if ( (byte_40F852B & 1) == 0 )
  {
    sub_B16FFC(&AssetManager_TypeInfo, method);
    sub_B16FFC(&System_GC_TypeInfo, v3);
    sub_B16FFC(&int_TypeInfo, v4);
    sub_B16FFC(&ServantAssetLoadManager_TypeInfo, v5);
    byte_40F852B = 1;
  }
  _4__this = this->fields.__4__this;
  switch ( this->fields.__1__state )
  {
    case 0:
      this->fields.__1__state = -1;
      if ( !_4__this )
        goto LABEL_45;
      perf = _4__this->fields.perf;
      if ( !perf )
        goto LABEL_45;
      BattlePerformance__LoadQuestAssetAndSetup(perf, 0LL);
LABEL_10:
      v8 = _4__this->fields.perf;
      if ( !v8 )
        goto LABEL_45;
      AssumedBattleAssetLoadManager_k__BackingField = v8->fields._AssumedBattleAssetLoadManager_k__BackingField;
      if ( !AssumedBattleAssetLoadManager_k__BackingField )
        goto LABEL_45;
      if ( AssumedBattleAssetLoadManager__IsPreloading(AssumedBattleAssetLoadManager_k__BackingField, 0LL) )
      {
        this->fields.__2__current = 0LL;
        p__2__current = &this->fields.__2__current;
        sub_B16F98(p__2__current, 0LL);
        result = 1;
        *((_DWORD *)p__2__current - 2) = 1;
        return result;
      }
LABEL_15:
      if ( (BYTE3(ServantAssetLoadManager_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0
        && !ServantAssetLoadManager_TypeInfo->_2.cctor_finished )
      {
        j_il2cpp_runtime_class_init_0(ServantAssetLoadManager_TypeInfo);
      }
      if ( !ServantAssetLoadManager__checkLoad(0LL) )
      {
        if ( _4__this )
        {
          v19 = _4__this->fields.perf;
          if ( v19 )
          {
            PlayerActor = BattlePerformance__CoroutineLoadPlayerActor(v19, 0LL);
            started = (Il2CppObject *)UnityEngine_MonoBehaviour__StartCoroutine_34804316(
                                        (UnityEngine_MonoBehaviour_o *)_4__this,
                                        PlayerActor,
                                        0LL);
            this->fields.__2__current = started;
            v12 = &this->fields.__2__current;
            sub_B16F98(v12, started);
            v13 = 3;
            goto LABEL_44;
          }
        }
LABEL_45:
        sub_B170D4();
      }
      this->fields.__2__current = 0LL;
      v12 = &this->fields.__2__current;
      sub_B16F98(v12, 0LL);
      v13 = 2;
LABEL_44:
      *((_DWORD *)v12 - 2) = v13;
      return 1;
    case 1:
      this->fields.__1__state = -1;
      if ( _4__this )
        goto LABEL_10;
      goto LABEL_45;
    case 2:
      this->fields.__1__state = -1;
      goto LABEL_15;
    case 3:
      this->fields.__1__state = -1;
      if ( !_4__this )
        goto LABEL_45;
      v14 = _4__this->fields.perf;
      if ( !v14 )
        goto LABEL_45;
      BattlePerformance__initQuest(v14, 0LL);
LABEL_23:
      spawner = _4__this->fields.spawner;
      if ( !spawner )
        goto LABEL_45;
      if ( !Spawner__HasCached(spawner, 0LL) )
      {
        this->fields.__2__current = 0LL;
        v12 = &this->fields.__2__current;
        sub_B16F98(v12, 0LL);
        v13 = 4;
        goto LABEL_44;
      }
LABEL_27:
      v16 = _4__this->fields.perf;
      if ( v16 )
      {
        bgPerf = v16->fields.bgPerf;
        if ( bgPerf )
        {
          if ( bgPerf->fields.IsLoading )
            goto LABEL_34;
          if ( (BYTE3(AssetManager_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0
            && !AssetManager_TypeInfo->_2.cctor_finished )
          {
            j_il2cpp_runtime_class_init_0(AssetManager_TypeInfo);
          }
          if ( AssetManager__LoadIsBusy(0LL) )
          {
LABEL_34:
            this->fields.__2__current = 0LL;
            v12 = &this->fields.__2__current;
            sub_B16F98(v12, 0LL);
            v13 = 5;
          }
          else
          {
            if ( (BYTE3(System_GC_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0
              && !System_GC_TypeInfo->_2.cctor_finished )
            {
              j_il2cpp_runtime_class_init_0(System_GC_TypeInfo);
            }
            System_GC__Collect_42843716(0LL);
            v23 = 0;
            v22 = (Il2CppObject *)j_il2cpp_value_box_0(int_TypeInfo, &v23);
            this->fields.__2__current = v22;
            v12 = &this->fields.__2__current;
            sub_B16F98(v12, v22);
            v13 = 6;
          }
          goto LABEL_44;
        }
      }
      goto LABEL_45;
    case 4:
      this->fields.__1__state = -1;
      if ( !_4__this )
        goto LABEL_45;
      goto LABEL_23;
    case 5:
      this->fields.__1__state = -1;
      if ( _4__this )
        goto LABEL_27;
      goto LABEL_45;
    case 6:
      finishCallback = this->fields.finishCallback;
      this->fields.__1__state = -1;
      ActionExtensions__Call(finishCallback, 0LL);
      return 0;
    default:
      return 0;
  }
}


Il2CppObject *__fastcall BattleLogic__CoroutineInitQuest_d__318__System_Collections_Generic_IEnumerator_System_Object__get_Current(
        BattleLogic__CoroutineInitQuest_d__318_o *this,
        const MethodInfo *method)
{
  return this->fields.__2__current;
}


void __fastcall __noreturn BattleLogic__CoroutineInitQuest_d__318__System_Collections_IEnumerator_Reset(
        BattleLogic__CoroutineInitQuest_d__318_o *this,
        const MethodInfo *method)
{
  __int64 v2; // x0
  __int64 v3; // x1
  __int64 v4; // x2
  __int64 v5; // x3
  __int64 v6; // x4
  System_NotSupportedException_o *v7; // x0
  __int64 v8; // x1

  v2 = sub_B17000(&System_NotSupportedException_TypeInfo, method);
  v7 = (System_NotSupportedException_o *)sub_B170CC(v2, v3, v4, v5, v6);
  System_NotSupportedException___ctor(v7, 0LL);
  sub_B17000(&Method_BattleLogic__CoroutineInitQuest_d__318_System_Collections_IEnumerator_Reset__, v8);
  sub_B170A0();
}


Il2CppObject *__fastcall BattleLogic__CoroutineInitQuest_d__318__System_Collections_IEnumerator_get_Current(
        BattleLogic__CoroutineInitQuest_d__318_o *this,
        const MethodInfo *method)
{
  return this->fields.__2__current;
}


void __fastcall BattleLogic__CoroutineInitQuest_d__318__System_IDisposable_Dispose(
        BattleLogic__CoroutineInitQuest_d__318_o *this,
        const MethodInfo *method)
{
  ;
}


void __fastcall BattleLogic__DropItemCollectionCoroutine_d__94___ctor(
        BattleLogic__DropItemCollectionCoroutine_d__94_o *this,
        int32_t 1__state,
        const MethodInfo *method)
{
  System_Object___ctor((Il2CppObject *)this, 0LL);
  this->fields.__1__state = 1__state;
}


bool __fastcall BattleLogic__DropItemCollectionCoroutine_d__94__MoveNext(
        BattleLogic__DropItemCollectionCoroutine_d__94_o *this,
        const MethodInfo *method)
{
  __int64 v3; // x1
  int32_t _1__state; // w9
  struct BattleLogic_o *_4__this; // x8
  BattlePerformance_o *perf; // x0
  __int64 v7; // x1
  __int64 v8; // x2
  __int64 v9; // x3
  __int64 v10; // x4
  UnityEngine_WaitForSeconds_o *v11; // x20
  Il2CppObject **p__2__current; // x19
  bool result; // w0
  PlayMakerFSM_o *fsm; // x0

  if ( (byte_40F852C & 1) == 0 )
  {
    sub_B16FFC(&UnityEngine_WaitForSeconds_TypeInfo, method);
    sub_B16FFC(&StringLiteral_5481, v3);
    byte_40F852C = 1;
  }
  _1__state = this->fields.__1__state;
  _4__this = this->fields.__4__this;
  if ( _1__state == 1 )
  {
    this->fields.__1__state = -1;
    if ( !_4__this )
      goto LABEL_12;
    fsm = _4__this->fields.fsm;
    if ( !fsm )
      goto LABEL_12;
    PlayMakerFSM__SendEvent(fsm, (System_String_o *)StringLiteral_5481, 0LL);
  }
  else if ( !_1__state )
  {
    this->fields.__1__state = -1;
    if ( _4__this )
    {
      perf = _4__this->fields.perf;
      if ( perf )
      {
        BattlePerformance__startMovePopObject(perf, 0LL);
        v11 = (UnityEngine_WaitForSeconds_o *)sub_B170CC(UnityEngine_WaitForSeconds_TypeInfo, v7, v8, v9, v10);
        UnityEngine_WaitForSeconds___ctor(v11, 0.5, 0LL);
        this->fields.__2__current = (Il2CppObject *)v11;
        p__2__current = &this->fields.__2__current;
        sub_B16F98(p__2__current, v11);
        result = 1;
        *((_DWORD *)p__2__current - 2) = 1;
        return result;
      }
    }
LABEL_12:
    sub_B170D4();
  }
  return 0;
}


Il2CppObject *__fastcall BattleLogic__DropItemCollectionCoroutine_d__94__System_Collections_Generic_IEnumerator_System_Object__get_Current(
        BattleLogic__DropItemCollectionCoroutine_d__94_o *this,
        const MethodInfo *method)
{
  return this->fields.__2__current;
}


void __fastcall __noreturn BattleLogic__DropItemCollectionCoroutine_d__94__System_Collections_IEnumerator_Reset(
        BattleLogic__DropItemCollectionCoroutine_d__94_o *this,
        const MethodInfo *method)
{
  __int64 v2; // x0
  __int64 v3; // x1
  __int64 v4; // x2
  __int64 v5; // x3
  __int64 v6; // x4
  System_NotSupportedException_o *v7; // x0
  __int64 v8; // x1

  v2 = sub_B17000(&System_NotSupportedException_TypeInfo, method);
  v7 = (System_NotSupportedException_o *)sub_B170CC(v2, v3, v4, v5, v6);
  System_NotSupportedException___ctor(v7, 0LL);
  sub_B17000(&Method_BattleLogic__DropItemCollectionCoroutine_d__94_System_Collections_IEnumerator_Reset__, v8);
  sub_B170A0();
}


Il2CppObject *__fastcall BattleLogic__DropItemCollectionCoroutine_d__94__System_Collections_IEnumerator_get_Current(
        BattleLogic__DropItemCollectionCoroutine_d__94_o *this,
        const MethodInfo *method)
{
  return this->fields.__2__current;
}


void __fastcall BattleLogic__DropItemCollectionCoroutine_d__94__System_IDisposable_Dispose(
        BattleLogic__DropItemCollectionCoroutine_d__94_o *this,
        const MethodInfo *method)
{
  ;
}


void __fastcall BattleLogic__UnloadUnusedAssetsAndWaitFinish_d__78___ctor(
        BattleLogic__UnloadUnusedAssetsAndWaitFinish_d__78_o *this,
        int32_t 1__state,
        const MethodInfo *method)
{
  System_Object___ctor((Il2CppObject *)this, 0LL);
  this->fields.__1__state = 1__state;
}


bool __fastcall BattleLogic__UnloadUnusedAssetsAndWaitFinish_d__78__MoveNext(
        BattleLogic__UnloadUnusedAssetsAndWaitFinish_d__78_o *this,
        const MethodInfo *method)
{
  int32_t _1__state; // w8
  bool result; // w0
  AssetManager_o *Instance; // x0
  AssetManager_o *v6; // x0
  Il2CppObject *v7; // x0
  int32_t v8; // w8

  if ( (byte_40F852D & 1) == 0 )
  {
    sub_B16FFC(&Method_SingletonMonoBehaviour_AssetManager__get_Instance__, method);
    byte_40F852D = 1;
  }
  _1__state = this->fields.__1__state;
  result = 0;
  if ( _1__state == 1 )
  {
    v8 = -1;
  }
  else
  {
    if ( _1__state )
      return result;
    this->fields.__1__state = -1;
    Instance = (AssetManager_o *)SingletonMonoBehaviour_WebViewManager___get_Instance((const MethodInfo_2A54F38 *)Method_SingletonMonoBehaviour_AssetManager__get_Instance__);
    if ( !Instance
      || (AssetManager__RequestUnloadUnusedAssets(Instance, 0LL, 0LL),
          (v6 = (AssetManager_o *)SingletonMonoBehaviour_WebViewManager___get_Instance((const MethodInfo_2A54F38 *)Method_SingletonMonoBehaviour_AssetManager__get_Instance__)) == 0LL) )
    {
      sub_B170D4();
    }
    v7 = (Il2CppObject *)AssetManager__WaitForExecutionUnloadUnuseAssets(v6, 0LL);
    this->fields.__2__current = v7;
    sub_B16F98(&this->fields.__2__current, v7);
    v8 = 1;
    result = 1;
  }
  this->fields.__1__state = v8;
  return result;
}


Il2CppObject *__fastcall BattleLogic__UnloadUnusedAssetsAndWaitFinish_d__78__System_Collections_Generic_IEnumerator_System_Object__get_Current(
        BattleLogic__UnloadUnusedAssetsAndWaitFinish_d__78_o *this,
        const MethodInfo *method)
{
  return this->fields.__2__current;
}


void __fastcall __noreturn BattleLogic__UnloadUnusedAssetsAndWaitFinish_d__78__System_Collections_IEnumerator_Reset(
        BattleLogic__UnloadUnusedAssetsAndWaitFinish_d__78_o *this,
        const MethodInfo *method)
{
  __int64 v2; // x0
  __int64 v3; // x1
  __int64 v4; // x2
  __int64 v5; // x3
  __int64 v6; // x4
  System_NotSupportedException_o *v7; // x0
  __int64 v8; // x1

  v2 = sub_B17000(&System_NotSupportedException_TypeInfo, method);
  v7 = (System_NotSupportedException_o *)sub_B170CC(v2, v3, v4, v5, v6);
  System_NotSupportedException___ctor(v7, 0LL);
  sub_B17000(&Method_BattleLogic__UnloadUnusedAssetsAndWaitFinish_d__78_System_Collections_IEnumerator_Reset__, v8);
  sub_B170A0();
}


Il2CppObject *__fastcall BattleLogic__UnloadUnusedAssetsAndWaitFinish_d__78__System_Collections_IEnumerator_get_Current(
        BattleLogic__UnloadUnusedAssetsAndWaitFinish_d__78_o *this,
        const MethodInfo *method)
{
  return this->fields.__2__current;
}


void __fastcall BattleLogic__UnloadUnusedAssetsAndWaitFinish_d__78__System_IDisposable_Dispose(
        BattleLogic__UnloadUnusedAssetsAndWaitFinish_d__78_o *this,
        const MethodInfo *method)
{
  ;
}


void __fastcall BattleLogic___c___cctor(const MethodInfo *method)
{
  __int64 v1; // x1
  __int64 v2; // x2
  __int64 v3; // x3
  __int64 v4; // x4
  Il2CppObject *v5; // x19
  struct BattleLogic___c_StaticFields *static_fields; // x0

  if ( (byte_40F851F & 1) == 0 )
  {
    sub_B16FFC(&BattleLogic___c_TypeInfo, v1);
    byte_40F851F = 1;
  }
  v5 = (Il2CppObject *)sub_B170CC(BattleLogic___c_TypeInfo, v1, v2, v3, v4);
  System_Object___ctor(v5, 0LL);
  static_fields = BattleLogic___c_TypeInfo->static_fields;
  static_fields->__9 = (struct BattleLogic___c_o *)v5;
  sub_B16F98(static_fields, v5);
}


void __fastcall BattleLogic___c___ctor(BattleLogic___c_o *this, const MethodInfo *method)
{
  System_Object___ctor((Il2CppObject *)this, 0LL);
}


int32_t __fastcall BattleLogic___c___LoadCutinFirstIdList_b__135_0(
        BattleLogic___c_o *this,
        System_String_o *a,
        const MethodInfo *method)
{
  return System_Int32__Parse(a, 0LL);
}


int32_t __fastcall BattleLogic___c___actClassPassiveSkill_b__264_0(
        BattleLogic___c_o *this,
        BattleSkillInfoData_o *x,
        const MethodInfo *method)
{
  if ( !x )
    sub_B170D4();
  return x->fields.priority;
}


int32_t __fastcall BattleLogic___c___actEnemyPassiveSkill_b__263_0(
        BattleLogic___c_o *this,
        BattleSkillInfoData_o *x,
        const MethodInfo *method)
{
  if ( !x )
    sub_B170D4();
  return x->fields.priority;
}


int32_t __fastcall BattleLogic___c___actEnemyPtPassiveSkill_b__262_0(
        BattleLogic___c_o *this,
        BattleSkillInfoData_o *x,
        const MethodInfo *method)
{
  if ( !x )
    sub_B170D4();
  return x->fields.priority;
}


int32_t __fastcall BattleLogic___c___actPtPassiveSkill_b__261_0(
        BattleLogic___c_o *this,
        BattleSkillInfoData_o *x,
        const MethodInfo *method)
{
  if ( !x )
    sub_B170D4();
  return x->fields.priority;
}


bool __fastcall BattleLogic___c___checkImmediateEntrySubMember_b__80_0(
        BattleLogic___c_o *this,
        BattleServantData_o *x,
        const MethodInfo *method)
{
  if ( !x )
    sub_B170D4();
  return !BattleServantData__isDead(x, 0LL);
}


int32_t __fastcall BattleLogic___c___colReplaceMember_b__88_0(
        BattleLogic___c_o *this,
        BattleServantData_o *a,
        BattleServantData_o *b,
        const MethodInfo *method)
{
  int32_t DeckIndex; // w0

  if ( !a || (DeckIndex = BattleServantData__getDeckIndex(a, 0LL), !b) )
    sub_B170D4();
  return DeckIndex - BattleServantData__getDeckIndex(b, 0LL);
}


bool __fastcall BattleLogic___c___coroutineEntrySubMember_b__79_0(
        BattleLogic___c_o *this,
        RestockServantLogic_o *x,
        const MethodInfo *method)
{
  if ( !x )
    sub_B170D4();
  return !x->fields._IsEnemy_k__BackingField;
}


// local variable allocation has failed, the output may be wrong!
RestockServantLogic_o *__fastcall BattleLogic___c___coroutineEntrySubMember_b__79_1(
        BattleLogic___c_o *this,
        int32_t i,
        const MethodInfo *method)
{
  __int64 v3; // x3
  __int64 v4; // x4
  RestockServantLogic_o *v6; // x20

  if ( (byte_40F8520 & 1) == 0 )
  {
    sub_B16FFC(&RestockServantLogic_TypeInfo, *(_QWORD *)&i);
    byte_40F8520 = 1;
  }
  v6 = (RestockServantLogic_o *)sub_B170CC(RestockServantLogic_TypeInfo, *(_QWORD *)&i, method, v3, v4);
  RestockServantLogic___ctor(v6, i, 0, 0LL);
  return v6;
}


bool __fastcall BattleLogic___c___coroutineEntrySubMember_b__79_2(
        BattleLogic___c_o *this,
        RestockServantLogic_o *x,
        const MethodInfo *method)
{
  if ( !x )
    sub_B170D4();
  return x->fields._IsEnemy_k__BackingField;
}


bool __fastcall BattleLogic___c___startEntryMemberLocal_b__90_0(
        BattleLogic___c_o *this,
        BattleServantData_o *x,
        const MethodInfo *method)
{
  if ( !x )
    sub_B170D4();
  return BattleServantData__get_isWaitRepop(x, 0LL);
}


int32_t __fastcall BattleLogic___c___startEntryMemberLocal_b__90_1(
        BattleLogic___c_o *this,
        BattleServantData_o *x,
        const MethodInfo *method)
{
  if ( !x )
    sub_B170D4();
  return x->fields.repopOrder;
}


bool __fastcall BattleLogic___c___startEntryMemberLocal_b__90_3(
        BattleLogic___c_o *this,
        BattleServantData_o *x,
        const MethodInfo *method)
{
  if ( !x )
    sub_B170D4();
  return BattleServantData__get_isWaitRepop(x, 0LL);
}


int32_t __fastcall BattleLogic___c___startEntryMemberLocal_b__90_4(
        BattleLogic___c_o *this,
        BattleServantData_o *x,
        const MethodInfo *method)
{
  if ( !x )
    sub_B170D4();
  return x->fields.repopOrder;
}


void __fastcall BattleLogic___c__DisplayClass109_0___ctor(
        BattleLogic___c__DisplayClass109_0_o *this,
        const MethodInfo *method)
{
  System_Object___ctor((Il2CppObject *)this, 0LL);
}


void __fastcall BattleLogic___c__DisplayClass109_0___CheckEventDataLostBattle_b__0(
        BattleLogic___c__DisplayClass109_0_o *this,
        AssetData_o *assetData,
        const MethodInfo *method)
{
  __int64 v3; // x3
  __int64 v4; // x4
  __int64 v6; // x1
  __int64 v7; // x1
  System_Action_o *_9__1; // x22
  int32_t eventId; // w19
  int32_t warId; // w20

  if ( (byte_40F8521 & 1) == 0 )
  {
    sub_B16FFC(&System_Action_TypeInfo, assetData);
    sub_B16FFC(&DataLostResetManager_TypeInfo, v6);
    sub_B16FFC(&Method_BattleLogic___c__DisplayClass109_0__CheckEventDataLostBattle_b__1__, v7);
    byte_40F8521 = 1;
  }
  _9__1 = this->fields.__9__1;
  eventId = this->fields.eventId;
  warId = this->fields.warId;
  if ( !_9__1 )
  {
    _9__1 = (System_Action_o *)sub_B170CC(System_Action_TypeInfo, assetData, method, v3, v4);
    System_Action___ctor(
      _9__1,
      (Il2CppObject *)this,
      Method_BattleLogic___c__DisplayClass109_0__CheckEventDataLostBattle_b__1__,
      0LL);
    this->fields.__9__1 = _9__1;
    sub_B16F98(&this->fields.__9__1, _9__1);
  }
  if ( (BYTE3(DataLostResetManager_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0
    && !DataLostResetManager_TypeInfo->_2.cctor_finished )
  {
    j_il2cpp_runtime_class_init_0(DataLostResetManager_TypeInfo);
  }
  DataLostResetManager__OpenBattleResultResetDialog(eventId, warId, _9__1, 0LL);
}


void __fastcall BattleLogic___c__DisplayClass109_0___CheckEventDataLostBattle_b__1(
        BattleLogic___c__DisplayClass109_0_o *this,
        const MethodInfo *method)
{
  __int64 v3; // x1
  __int64 v4; // x1
  TerminalPramsManager_c *v5; // x0
  __int64 v6; // x1
  TerminalPramsManager_c *v7; // x0
  MissionNotifyManager_o *v8; // x0
  __int64 v9; // x1
  TerminalPramsManager_c *v10; // x0
  struct BattleLogic_o *_4__this; // x8
  PlayMakerFSM_o *fsm; // x0

  if ( (byte_40F8522 & 1) == 0 )
  {
    sub_B16FFC(&Method_SingletonTemplate_MissionNotifyManager__get_Instance__, method);
    sub_B16FFC(&SingletonTemplate_MissionNotifyManager__TypeInfo, v3);
    sub_B16FFC(&TerminalPramsManager_TypeInfo, v4);
    byte_40F8522 = 1;
  }
  if ( (BYTE3(TerminalPramsManager_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0
    && !TerminalPramsManager_TypeInfo->_2.cctor_finished )
  {
    j_il2cpp_runtime_class_init_0(TerminalPramsManager_TypeInfo);
  }
  if ( !byte_40F6079 )
  {
    sub_B16FFC(&TerminalPramsManager_TypeInfo, method);
    byte_40F6079 = 1;
  }
  v5 = TerminalPramsManager_TypeInfo;
  if ( (BYTE3(TerminalPramsManager_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0
    && !TerminalPramsManager_TypeInfo->_2.cctor_finished )
  {
    j_il2cpp_runtime_class_init_0(TerminalPramsManager_TypeInfo);
    v5 = TerminalPramsManager_TypeInfo;
  }
  v5->static_fields->_SpotId_k__BackingField = -1;
  TerminalPramsManager__SpotIdSave_SaveData(0LL);
  if ( !byte_40F6E24 )
  {
    sub_B16FFC(&TerminalPramsManager_TypeInfo, v6);
    byte_40F6E24 = 1;
  }
  v7 = TerminalPramsManager_TypeInfo;
  if ( (BYTE3(TerminalPramsManager_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0
    && !TerminalPramsManager_TypeInfo->_2.cctor_finished )
  {
    j_il2cpp_runtime_class_init_0(TerminalPramsManager_TypeInfo);
    v7 = TerminalPramsManager_TypeInfo;
  }
  v7->static_fields->_IsDataLostBattleAutoReset_k__BackingField = 1;
  TerminalPramsManager__IsDataLostBattleAutoReset_SaveData(0LL);
  if ( (BYTE3(SingletonTemplate_MissionNotifyManager__TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0
    && !SingletonTemplate_MissionNotifyManager__TypeInfo->_2.cctor_finished )
  {
    j_il2cpp_runtime_class_init_0(SingletonTemplate_MissionNotifyManager__TypeInfo);
  }
  v8 = (MissionNotifyManager_o *)SingletonTemplate_clsQuestCheck___get_Instance((const MethodInfo_2A552BC *)Method_SingletonTemplate_MissionNotifyManager__get_Instance__);
  if ( !v8 )
    goto LABEL_28;
  MissionNotifyManager__StartPause(v8, 0LL);
  if ( !byte_40F6E29 )
  {
    sub_B16FFC(&TerminalPramsManager_TypeInfo, v9);
    byte_40F6E29 = 1;
  }
  v10 = TerminalPramsManager_TypeInfo;
  if ( (BYTE3(TerminalPramsManager_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0
    && !TerminalPramsManager_TypeInfo->_2.cctor_finished )
  {
    j_il2cpp_runtime_class_init_0(TerminalPramsManager_TypeInfo);
    v10 = TerminalPramsManager_TypeInfo;
  }
  v10->static_fields->_IsDataLostBattleNoticePause_k__BackingField = 1;
  _4__this = this->fields.__4__this;
  if ( !_4__this || (fsm = _4__this->fields.fsm) == 0LL )
LABEL_28:
    sub_B170D4();
  PlayMakerFSM__SendEvent(fsm, this->fields.endEvent, 0LL);
}


void __fastcall BattleLogic___c__DisplayClass110_0___ctor(
        BattleLogic___c__DisplayClass110_0_o *this,
        const MethodInfo *method)
{
  System_Object___ctor((Il2CppObject *)this, 0LL);
}


// local variable allocation has failed, the output may be wrong!
void __fastcall BattleLogic___c__DisplayClass110_0___ngContinueBattleLoseInfomation_b__0(
        BattleLogic___c__DisplayClass110_0_o *this,
        bool flg,
        const MethodInfo *method)
{
  CommonUI_o *Instance; // x0
  struct BattleLogic_o *_4__this; // x8
  PlayMakerFSM_o *fsm; // x0

  if ( (byte_40F8523 & 1) == 0 )
  {
    sub_B16FFC(&Method_SingletonMonoBehaviour_CommonUI__get_Instance__, flg);
    byte_40F8523 = 1;
  }
  Instance = (CommonUI_o *)SingletonMonoBehaviour_WebViewManager___get_Instance((const MethodInfo_2A54F38 *)Method_SingletonMonoBehaviour_CommonUI__get_Instance__);
  if ( !Instance
    || (CommonUI__CloseNotificationDialog(Instance, 0LL), (_4__this = this->fields.__4__this) == 0LL)
    || (fsm = _4__this->fields.fsm) == 0LL )
  {
    sub_B170D4();
  }
  PlayMakerFSM__SendEvent(fsm, this->fields.endEvent, 0LL);
}


void __fastcall BattleLogic___c__DisplayClass211_0___ctor(
        BattleLogic___c__DisplayClass211_0_o *this,
        const MethodInfo *method)
{
  System_Object___ctor((Il2CppObject *)this, 0LL);
}


void __fastcall BattleLogic___c__DisplayClass211_0___waitWaveStep_b__0(
        BattleLogic___c__DisplayClass211_0_o *this,
        const MethodInfo *method)
{
  this->fields.isEnd = 1;
}


void __fastcall BattleLogic___c__DisplayClass284_0___ctor(
        BattleLogic___c__DisplayClass284_0_o *this,
        const MethodInfo *method)
{
  System_Object___ctor((Il2CppObject *)this, 0LL);
}


void __fastcall BattleLogic___c__DisplayClass284_0___updateConditionsBuffAll_b__0(
        BattleLogic___c__DisplayClass284_0_o *this,
        AiNpcBattleServantData_o *npc,
        const MethodInfo *method)
{
  struct BattleLogic_o *_4__this; // x9

  _4__this = this->fields.__4__this;
  if ( !_4__this || !npc )
    sub_B170D4();
  BattleServantData__updateConditionsBuff(
    (BattleServantData_o *)npc,
    this->fields.fieldIndivi,
    _4__this->fields.perf,
    0LL);
}


void __fastcall BattleLogic___c__DisplayClass319_0___ctor(
        BattleLogic___c__DisplayClass319_0_o *this,
        const MethodInfo *method)
{
  System_Object___ctor((Il2CppObject *)this, 0LL);
}


void __fastcall BattleLogic___c__DisplayClass319_0___loadNstage_b__0(
        BattleLogic___c__DisplayClass319_0_o *this,
        const MethodInfo *method)
{
  struct BattleLogic_o *_4__this; // x8
  PlayMakerFSM_o *fsm; // x0
  struct BattleLogic_o *v5; // x8
  System_Action_o *loadingIconcallback; // x0

  _4__this = this->fields.__4__this;
  if ( !_4__this
    || (fsm = _4__this->fields.fsm) == 0LL
    || (PlayMakerFSM__SendEvent(fsm, this->fields.endproc, 0LL), (v5 = this->fields.__4__this) == 0LL)
    || (loadingIconcallback = v5->fields.loadingIconcallback) != 0LL
    && (System_Action__Invoke(loadingIconcallback, 0LL), (v5 = this->fields.__4__this) == 0LL) )
  {
    sub_B170D4();
  }
  v5->fields.loadingIconcallback = 0LL;
  sub_B16F98(&v5->fields.loadingIconcallback, 0LL);
}


void __fastcall BattleLogic___c__DisplayClass325_0___ctor(
        BattleLogic___c__DisplayClass325_0_o *this,
        const MethodInfo *method)
{
  System_Object___ctor((Il2CppObject *)this, 0LL);
}


void __fastcall BattleLogic___c__DisplayClass325_0___updateFieldBuff_b__0(
        BattleLogic___c__DisplayClass325_0_o *this,
        AiNpcBattleServantData_o *npc,
        const MethodInfo *method)
{
  if ( !npc )
    sub_B170D4();
  BattleServantData__checkFieldBuff(
    (BattleServantData_o *)npc,
    this->fields.fieldSvtIds,
    this->fields.aliveSvtData,
    this->fields.__4__this,
    0LL);
}


void __fastcall BattleLogic___c__DisplayClass355_0___ctor(
        BattleLogic___c__DisplayClass355_0_o *this,
        const MethodInfo *method)
{
  System_Object___ctor((Il2CppObject *)this, 0LL);
}


void __fastcall BattleLogic___c__DisplayClass355_0___LoadNStagePlayer_b__0(
        BattleLogic___c__DisplayClass355_0_o *this,
        const MethodInfo *method)
{
  BattleLogic_o *_4__this; // x0

  _4__this = this->fields.__4__this;
  if ( !_4__this )
    sub_B170D4();
  BattleLogic__RemoveLoadingIcon(_4__this, 0LL);
}


void __fastcall BattleLogic___c__DisplayClass355_0___LoadNStagePlayer_b__1(
        BattleLogic___c__DisplayClass355_0_o *this,
        const MethodInfo *method)
{
  struct BattleLogic_o *_4__this; // x8
  PlayMakerFSM_o *fsm; // x8

  _4__this = this->fields.__4__this;
  if ( !_4__this || (fsm = _4__this->fields.fsm) == 0LL )
    sub_B170D4();
  PlayMakerFSM__SendEvent(fsm, this->fields.endproc, 0LL);
}


void __fastcall BattleLogic___c__DisplayClass79_0___ctor(
        BattleLogic___c__DisplayClass79_0_o *this,
        const MethodInfo *method)
{
  System_Object___ctor((Il2CppObject *)this, 0LL);
}


// local variable allocation has failed, the output may be wrong!
void __fastcall BattleLogic___c__DisplayClass79_0___coroutineEntrySubMember_b__3(
        BattleLogic___c__DisplayClass79_0_o *this,
        int32_t i,
        const MethodInfo *method)
{
  __int64 v3; // x3
  __int64 v4; // x4
  __int64 v7; // x1
  struct System_Collections_Generic_List_RestockServantLogic__o *enemyRestockLogicList; // x20
  RestockServantLogic_o *v9; // x21

  if ( (byte_40F8524 & 1) == 0 )
  {
    sub_B16FFC(&Method_System_Collections_Generic_List_RestockServantLogic__Add__, *(_QWORD *)&i);
    sub_B16FFC(&RestockServantLogic_TypeInfo, v7);
    byte_40F8524 = 1;
  }
  enemyRestockLogicList = this->fields.enemyRestockLogicList;
  v9 = (RestockServantLogic_o *)sub_B170CC(RestockServantLogic_TypeInfo, *(_QWORD *)&i, method, v3, v4);
  RestockServantLogic___ctor(v9, i, 1, 0LL);
  if ( !enemyRestockLogicList )
    sub_B170D4();
  System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData___Add(
    (System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData__o *)enemyRestockLogicList,
    (EventMissionProgressRequest_Argument_ProgressData_o *)v9,
    (const MethodInfo_2F25CD8 *)Method_System_Collections_Generic_List_RestockServantLogic__Add__);
}


bool __fastcall BattleLogic___c__DisplayClass79_0___coroutineEntrySubMember_b__4(
        BattleLogic___c__DisplayClass79_0_o *this,
        int32_t i,
        const MethodInfo *method)
{
  struct BattleLogic_o *_4__this; // x8
  BattleData_o *data; // x0

  _4__this = this->fields.__4__this;
  if ( !_4__this || (data = _4__this->fields.data) == 0LL )
    sub_B170D4();
  return BattleData__IsEntry(data, i, 1, 0LL);
}


void __fastcall BattleLogic___c__DisplayClass82_0___ctor(
        BattleLogic___c__DisplayClass82_0_o *this,
        const MethodInfo *method)
{
  System_Object___ctor((Il2CppObject *)this, 0LL);
}


// local variable allocation has failed, the output may be wrong!
void __fastcall BattleLogic___c__DisplayClass82_0___UnloadDeadDeckActorsAndFreeEntry_b__0(
        BattleLogic___c__DisplayClass82_0_o *this,
        int32_t i,
        int32_t servantUniqueId,
        const MethodInfo *method)
{
  struct BattleLogic_o *_4__this; // x8
  BattleData_o *data; // x0
  BattleServantData_o *ServantData; // x0
  BattleServantData_o *v10; // x21
  struct BattleLogic_o *v11; // x8
  BattlePerformance_o *perf; // x0
  struct System_Collections_Generic_List_BattleServantData__o *result; // x0
  struct BattleLogic_o *v14; // x8
  BattleData_o *v15; // x0

  if ( (byte_40F8525 & 1) == 0 )
  {
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleServantData__Add__, *(_QWORD *)&i);
    byte_40F8525 = 1;
  }
  _4__this = this->fields.__4__this;
  if ( !_4__this )
    goto LABEL_15;
  data = _4__this->fields.data;
  if ( !data )
    goto LABEL_15;
  ServantData = BattleData__getServantData(data, servantUniqueId, 0LL);
  if ( !ServantData )
    goto LABEL_12;
  v10 = ServantData;
  if ( !BattleServantData__isDead(ServantData, 0LL) )
    return;
  BattleServantData__setDeadData(v10, 0LL);
  v11 = this->fields.__4__this;
  if ( !v11
    || (perf = v11->fields.perf) == 0LL
    || (BattlePerformance__unloadDeckActor(perf, i, v10, 0LL), (result = this->fields.result) == 0LL) )
  {
LABEL_15:
    sub_B170D4();
  }
  System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData___Add(
    (System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData__o *)result,
    (EventMissionProgressRequest_Argument_ProgressData_o *)v10,
    (const MethodInfo_2F25CD8 *)Method_System_Collections_Generic_List_BattleServantData__Add__);
  if ( !BattleServantData__isDeadWait(v10, 0LL) )
  {
LABEL_12:
    v14 = this->fields.__4__this;
    if ( v14 )
    {
      v15 = v14->fields.data;
      if ( v15 )
      {
        BattleData__FreeEntryByIndex(v15, i, this->fields.isEnemy, 0LL);
        return;
      }
    }
    goto LABEL_15;
  }
}


void __fastcall BattleLogic___c__DisplayClass83_0___ctor(
        BattleLogic___c__DisplayClass83_0_o *this,
        const MethodInfo *method)
{
  System_Object___ctor((Il2CppObject *)this, 0LL);
}


bool __fastcall BattleLogic___c__DisplayClass83_0___UnloadMoveToSubMemberDeckActors_b__0(
        BattleLogic___c__DisplayClass83_0_o *this,
        RestockServantLogicByMoveToSubMember_o *x,
        const MethodInfo *method)
{
  if ( !x )
    sub_B170D4();
  return !x->fields._IsEnemy_k__BackingField ^ this->fields.isEnemy;
}


void __fastcall BattleLogic___c__DisplayClass90_0___ctor(
        BattleLogic___c__DisplayClass90_0_o *this,
        const MethodInfo *method)
{
  System_Object___ctor((Il2CppObject *)this, 0LL);
}


void __fastcall BattleLogic___c__DisplayClass90_0___startEntryMemberLocal_b__2(
        BattleLogic___c__DisplayClass90_0_o *this,
        BattleServantData_o *svtdata,
        const MethodInfo *method)
{
  int32_t DeckIndex; // w0
  struct BattleLogic_o *_4__this; // x8
  int32_t v7; // w1
  BattlePerformance_o *perf; // x0
  BattleLogicNomal_o *logicnomal; // x21
  UnityEngine_Transform_o *TacticalPlayerPos; // x0
  bool isTactical; // w3
  UnityEngine_Transform_o *v12; // x2
  BattleLogicNomal_o *v13; // x0
  BattleServantData_o *v14; // x1
  UnityEngine_Transform_o *RepopPlayerPos; // x0
  System_Collections_Generic_IEnumerable_T__o *v16; // x0
  System_Collections_Generic_List_TimeZoneInfo_AdjustmentRule__o *tasklist; // x8

  if ( (byte_40F8526 & 1) == 0 )
  {
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleLogicTask__AddRange__, svtdata);
    byte_40F8526 = 1;
  }
  if ( !svtdata )
    goto LABEL_13;
  svtdata->fields.repopOrder = -1;
  svtdata->fields.flgEntryFunction = 1;
  DeckIndex = BattleServantData__getDeckIndex(svtdata, 0LL);
  _4__this = this->fields.__4__this;
  if ( !_4__this )
    goto LABEL_13;
  v7 = DeckIndex;
  perf = _4__this->fields.perf;
  if ( !perf )
    goto LABEL_13;
  logicnomal = _4__this->fields.logicnomal;
  if ( this->fields.isTactical )
  {
    TacticalPlayerPos = BattlePerformance__getTacticalPlayerPos(perf, v7, 0LL);
    if ( !logicnomal )
      goto LABEL_13;
    isTactical = this->fields.isTactical;
    v12 = TacticalPlayerPos;
    v13 = logicnomal;
    v14 = svtdata;
  }
  else
  {
    RepopPlayerPos = BattlePerformance__getRepopPlayerPos(perf, v7, 0LL);
    if ( !logicnomal )
      goto LABEL_13;
    v12 = RepopPlayerPos;
    v13 = logicnomal;
    v14 = svtdata;
    isTactical = 0;
  }
  v16 = (System_Collections_Generic_IEnumerable_T__o *)BattleLogicNomal__taskPlaySubEntryMotion(
                                                         v13,
                                                         v14,
                                                         v12,
                                                         isTactical,
                                                         0LL);
  tasklist = (System_Collections_Generic_List_TimeZoneInfo_AdjustmentRule__o *)this->fields.tasklist;
  if ( !tasklist )
LABEL_13:
    sub_B170D4();
  System_Collections_Generic_List_TimeZoneInfo_AdjustmentRule___AddRange(
    tasklist,
    v16,
    (const MethodInfo_2F25F28 *)Method_System_Collections_Generic_List_BattleLogicTask__AddRange__);
}


void __fastcall BattleLogic___c__DisplayClass90_0___startEntryMemberLocal_b__5(
        BattleLogic___c__DisplayClass90_0_o *this,
        BattleServantData_o *svtdata,
        const MethodInfo *method)
{
  __int64 v5; // x1
  __int64 v6; // x1
  __int64 v7; // x1
  int32_t DeckIndex; // w0
  struct BattleLogic_o *_4__this; // x8
  int32_t v10; // w1
  BattlePerformance_o *perf; // x0
  BattleLogicNomal_o *logicnomal; // x21
  UnityEngine_Transform_o *RepopEnemyTacicalPos; // x0
  System_Collections_Generic_IEnumerable_T__o *v14; // x0
  struct BattleLogic_o *v15; // x8
  BattleData_o *data; // x0
  StageEntity_o *StageEntity; // x0
  System_Int32_array *v18; // x0
  System_Int32_array *v19; // x21
  int32_t v20; // w23
  __int64 v21; // x20
  __int64 v22; // x22
  __int64 v23; // x0
  __int64 v24; // x1
  __int64 v25; // x2
  __int64 v26; // x3
  __int64 v27; // x4
  struct BattleLogic_o *v28; // x8
  BattleData_o *v29; // x22
  struct BattleFieldEnvironmentData_o *FieldEnvData_k__BackingField; // x20
  int32_t v31; // w23
  bool v32; // w24
  Generator_BGM_o *v33; // x21
  BattleLogic_o *v34; // x0
  BattleLogic_o *v35; // x0
  CodeStage_AntiCheat_ObscuredTypes_ObscuredInt_o v36; // 0:x0.16

  if ( (byte_40F8527 & 1) == 0 )
  {
    sub_B16FFC(&Generator_BGM_TypeInfo, svtdata);
    sub_B16FFC(&Method_BasicHelper_IndexValue_int____66807072, v5);
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleLogicTask__AddRange__, v6);
    sub_B16FFC(&CodeStage_AntiCheat_ObscuredTypes_ObscuredInt_TypeInfo, v7);
    byte_40F8527 = 1;
  }
  if ( !svtdata )
    goto LABEL_28;
  svtdata->fields.repopOrder = -1;
  svtdata->fields.flgEntryFunction = 1;
  DeckIndex = BattleServantData__getDeckIndex(svtdata, 0LL);
  _4__this = this->fields.__4__this;
  if ( !_4__this )
    goto LABEL_28;
  v10 = DeckIndex;
  perf = _4__this->fields.perf;
  if ( !perf )
    goto LABEL_28;
  logicnomal = _4__this->fields.logicnomal;
  if ( this->fields.isTactical )
  {
    RepopEnemyTacicalPos = BattlePerformance__getRepopEnemyTacicalPos(perf, v10, 0LL);
    if ( !logicnomal )
      goto LABEL_28;
  }
  else
  {
    RepopEnemyTacicalPos = BattlePerformance__getRepopEnemyPos(perf, v10, 0LL);
    if ( !logicnomal )
      goto LABEL_28;
  }
  v14 = (System_Collections_Generic_IEnumerable_T__o *)BattleLogicNomal__taskPlaySubEntryMotion(
                                                         logicnomal,
                                                         svtdata,
                                                         RepopEnemyTacicalPos,
                                                         0,
                                                         0LL);
  if ( !this->fields.tasklist )
    goto LABEL_28;
  System_Collections_Generic_List_TimeZoneInfo_AdjustmentRule___AddRange(
    (System_Collections_Generic_List_TimeZoneInfo_AdjustmentRule__o *)this->fields.tasklist,
    v14,
    (const MethodInfo_2F25F28 *)Method_System_Collections_Generic_List_BattleLogicTask__AddRange__);
  BattleServantData__SetRemainActionCount(svtdata, 0, 0LL);
  v15 = this->fields.__4__this;
  if ( !v15 )
    goto LABEL_28;
  data = v15->fields.data;
  if ( !data )
    goto LABEL_28;
  StageEntity = BattleData__getStageEntity(data, 0LL);
  if ( !StageEntity )
    goto LABEL_28;
  v18 = StageEntity__GetBossIdAndChangeBgmId(StageEntity, 0LL);
  if ( !v18 )
    goto LABEL_28;
  v19 = v18;
  if ( (int)v18->max_length >= 2 )
  {
    v20 = v18->m_Items[1];
    v22 = *(_QWORD *)&svtdata->fields.svtId.fields.currentCryptoKey;
    v21 = *(_QWORD *)&svtdata->fields.svtId.fields.fakeValue;
    if ( (BYTE3(CodeStage_AntiCheat_ObscuredTypes_ObscuredInt_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0
      && !CodeStage_AntiCheat_ObscuredTypes_ObscuredInt_TypeInfo->_2.cctor_finished )
    {
      j_il2cpp_runtime_class_init_0(CodeStage_AntiCheat_ObscuredTypes_ObscuredInt_TypeInfo);
    }
    *(_QWORD *)&v36.fields.currentCryptoKey = v22;
    *(_QWORD *)&v36.fields.fakeValue = v21;
    if ( v20 == CodeStage_AntiCheat_ObscuredTypes_ObscuredInt__op_Implicit_44068536(v36, 0LL) )
    {
      v23 = BasicHelper__IndexValue_int_(
              v19,
              2,
              0,
              (const MethodInfo_18B81B4 *)Method_BasicHelper_IndexValue_int____66807072);
      v28 = this->fields.__4__this;
      if ( v28 )
      {
        v29 = v28->fields.data;
        if ( v29 )
        {
          if ( v19->max_length <= 1 )
          {
            sub_B17100(v23, v24, v25);
            sub_B170A0();
          }
          FieldEnvData_k__BackingField = v29->fields._FieldEnvData_k__BackingField;
          v31 = v19->m_Items[2];
          v32 = (int)v23 > 0;
          v33 = (Generator_BGM_o *)sub_B170CC(Generator_BGM_TypeInfo, v24, v25, v26, v27);
          Generator_BGM___ctor(v33, v29, v31, v32, 0, 0LL, 0LL);
          if ( FieldEnvData_k__BackingField )
          {
            ((void (__fastcall *)(struct BattleFieldEnvironmentData_o *, Generator_BGM_o *, __int64, Il2CppMethodPointer))FieldEnvData_k__BackingField->klass->vtable._6_AddBGM.method)(
              FieldEnvData_k__BackingField,
              v33,
              2LL,
              FieldEnvData_k__BackingField->klass->vtable._7_RemoveAfterResetBGM.methodPtr);
            v34 = this->fields.__4__this;
            if ( v34 )
            {
              BattleLogic__loadBgmName(v34, 0LL, 0LL);
              v35 = this->fields.__4__this;
              if ( v35 )
              {
                BattleLogic__PlayCurrentBgm(v35, 0.0, 0LL);
                return;
              }
            }
          }
        }
      }
LABEL_28:
      sub_B170D4();
    }
  }
}


void __fastcall BattleLogic__colReplaceMember_d__88___ctor(
        BattleLogic__colReplaceMember_d__88_o *this,
        int32_t 1__state,
        const MethodInfo *method)
{
  System_Object___ctor((Il2CppObject *)this, 0LL);
  this->fields.__1__state = 1__state;
}


bool __fastcall BattleLogic__colReplaceMember_d__88__MoveNext(
        BattleLogic__colReplaceMember_d__88_o *this,
        const MethodInfo *method)
{
  __int64 v3; // x1
  __int64 v4; // x1
  __int64 v5; // x1
  __int64 v6; // x1
  __int64 v7; // x1
  __int64 v8; // x1
  struct BattleLogic_o *_4__this; // x20
  Il2CppObject *v10; // x0
  Il2CppObject **v11; // x19
  int v12; // w8
  __int64 v13; // x1
  __int64 v14; // x2
  __int64 v15; // x3
  __int64 v16; // x4
  struct BattleData_o *v17; // x8
  struct BattleActionData_ReplaceMember_o *v18; // x9
  BattleData_o *v19; // x0
  struct BattleActionData_ReplaceMember_o *replaceData; // x8
  BattleData_o *data; // x0
  BattleServantData_o *ServantData; // x0
  BattleServantData_o *v23; // x21
  struct BattleActionData_ReplaceMember_o *v24; // x8
  BattlePerformance_o *perf; // x0
  int32_t index; // w1
  struct BattleActionData_ReplaceMember_o *v27; // x8
  BattleData_o *v28; // x0
  BattleServantData_o *v29; // x0
  BattleServantData_o *v30; // x1
  BattlePerformance_o *v31; // x0
  Il2CppObject *v32; // x0
  System_Action_o *endCallBack; // x0
  bool result; // w0
  struct BattleActionData_ReplaceMember_o *v35; // x8
  BattlePerformance_o *v36; // x0
  int32_t v37; // w1
  struct BattleActionData_ReplaceMember_o *v38; // x8
  BattlePerformance_o *v39; // x0
  System_Collections_Generic_List_TitleInfoControl_EventEndTimeInfo__o *enemy_datalist; // x21
  BattleLogic___c_c *v41; // x0
  struct BattleLogic___c_StaticFields *static_fields; // x8
  System_Comparison_TitleInfoControl_EventEndTimeInfo__o *_9__88_0; // x22
  Il2CppObject *v44; // x23
  struct BattleLogic___c_StaticFields *v45; // x0
  int32_t TargetId; // w0
  struct BattleActionData_ReplaceMember_o *v47; // x8
  BattlePerformance_o *v48; // x0
  Il2CppObject *v49; // x0
  Il2CppObject **p__2__current; // x19
  struct BattleActionData_ReplaceMember_o *v51; // x8
  BattlePerformance_o *v52; // x0
  Il2CppObject *v53; // x0
  BattleData_o *v54; // x0
  Il2CppObject *v55; // x0
  int v56; // [xsp+Ch] [xbp-34h] BYREF

  if ( (byte_40F852E & 1) == 0 )
  {
    sub_B16FFC(&Method_System_Comparison_BattleServantData___ctor__, method);
    sub_B16FFC(&System_Comparison_BattleServantData__TypeInfo, v3);
    sub_B16FFC(&int_TypeInfo, v4);
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleServantData__Sort__, v5);
    sub_B16FFC(&ServantAssetLoadManager_TypeInfo, v6);
    sub_B16FFC(&Method_BattleLogic___c__colReplaceMember_b__88_0__, v7);
    sub_B16FFC(&BattleLogic___c_TypeInfo, v8);
    byte_40F852E = 1;
  }
  _4__this = this->fields.__4__this;
  switch ( this->fields.__1__state )
  {
    case 0:
      this->fields.__1__state = -1;
      if ( !_4__this )
        goto LABEL_72;
      replaceData = this->fields.replaceData;
      if ( !replaceData )
        goto LABEL_72;
      data = _4__this->fields.data;
      if ( !data )
        goto LABEL_72;
      ServantData = BattleData__getServantData(data, replaceData->fields.outUniqeId, 0LL);
      if ( !ServantData )
        goto LABEL_72;
      v23 = ServantData;
      this->fields._isPlayer_5__2 = BattleServantData__checkPlayer(ServantData, 0LL);
      BattleServantData__resetParamObject(v23, 0LL);
      v23->fields.isEntry = 0;
      v24 = this->fields.replaceData;
      if ( !v24 )
        goto LABEL_72;
      perf = _4__this->fields.perf;
      if ( !perf )
        goto LABEL_72;
      index = v24->fields.index;
      if ( this->fields._isPlayer_5__2 )
        BattlePerformance__deletePlayerActor(perf, index, 0LL);
      else
        BattlePerformance__deleteEnemyActor(perf, index, 0LL);
      v48 = _4__this->fields.perf;
      if ( !v48 )
        goto LABEL_72;
      BattlePerformance__unloadServantSet_18995764(v48, v23, 0, 0LL);
      v56 = 0;
      v49 = (Il2CppObject *)j_il2cpp_value_box_0(int_TypeInfo, &v56);
      this->fields.__2__current = v49;
      p__2__current = &this->fields.__2__current;
      sub_B16F98(p__2__current, v49);
      result = 1;
      *((_DWORD *)p__2__current - 2) = 1;
      return result;
    case 1:
      this->fields.__1__state = -1;
      if ( !_4__this )
        goto LABEL_72;
      v27 = this->fields.replaceData;
      if ( !v27 )
        goto LABEL_72;
      v28 = _4__this->fields.data;
      if ( !v28 )
        goto LABEL_72;
      v29 = BattleData__getServantData(v28, v27->fields.inUniqeId, 0LL);
      if ( !v29 )
        goto LABEL_72;
      v29->fields.isEntry = 1;
      v29->fields.flgEntryFunction = 1;
      v30 = v29;
      v31 = _4__this->fields.perf;
      if ( !v31 )
        goto LABEL_72;
      BattlePerformance__preLoadServantSet(v31, v30, 0LL);
LABEL_31:
      if ( (BYTE3(ServantAssetLoadManager_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0
        && !ServantAssetLoadManager_TypeInfo->_2.cctor_finished )
      {
        j_il2cpp_runtime_class_init_0(ServantAssetLoadManager_TypeInfo);
      }
      if ( ServantAssetLoadManager__checkLoad(0LL) )
      {
        v56 = 0;
        v32 = (Il2CppObject *)j_il2cpp_value_box_0(int_TypeInfo, &v56);
        this->fields.__2__current = v32;
        v11 = &this->fields.__2__current;
        sub_B16F98(v11, v32);
        v12 = 2;
        goto LABEL_70;
      }
      if ( !_4__this )
        goto LABEL_72;
      v35 = this->fields.replaceData;
      if ( !v35 )
        goto LABEL_72;
      v36 = _4__this->fields.perf;
      if ( !v36 )
        goto LABEL_72;
      v37 = v35->fields.index;
      if ( this->fields._isPlayer_5__2 )
      {
        BattlePerformance__loadPlayerActor(v36, v37, 0LL);
        v38 = this->fields.replaceData;
        if ( v38 )
        {
          v39 = _4__this->fields.perf;
          if ( v39 )
          {
            BattlePerformance__replacePlayerActor(v39, v38->fields.index, 0LL);
LABEL_65:
            v56 = 0;
            v53 = (Il2CppObject *)j_il2cpp_value_box_0(int_TypeInfo, &v56);
            this->fields.__2__current = v53;
            v11 = &this->fields.__2__current;
            sub_B16F98(v11, v53);
            v12 = 3;
            goto LABEL_70;
          }
        }
      }
      else
      {
        BattlePerformance__loadEnemyActor(v36, v37, 0LL);
        v51 = this->fields.replaceData;
        if ( v51 )
        {
          v52 = _4__this->fields.perf;
          if ( v52 )
          {
            BattlePerformance__replaceEnemyActor(v52, v51->fields.index, 0LL);
            goto LABEL_65;
          }
        }
      }
      goto LABEL_72;
    case 2:
      this->fields.__1__state = -1;
      goto LABEL_31;
    case 3:
    case 4:
      this->fields.__1__state = -1;
      if ( (BYTE3(ServantAssetLoadManager_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0
        && !ServantAssetLoadManager_TypeInfo->_2.cctor_finished )
      {
        j_il2cpp_runtime_class_init_0(ServantAssetLoadManager_TypeInfo);
      }
      if ( !ServantAssetLoadManager__checkLoad(0LL) )
      {
        if ( _4__this )
        {
          BattleLogic__updateFieldBuff(_4__this, 0LL);
          v17 = _4__this->fields.data;
          if ( this->fields._isPlayer_5__2 )
          {
            v18 = this->fields.replaceData;
            if ( v18 )
            {
              if ( v17 )
              {
                BattleData__replaceCommandCard(
                  _4__this->fields.data,
                  v18->fields.inUniqeId,
                  v18->fields.outUniqeId,
                  0LL);
                v19 = _4__this->fields.data;
                if ( v19 )
                {
                  if ( BattleData__isDoNotSelectCommandServantCommandInCommandList(v19, 0LL) )
                  {
                    BattleLogic__drawCommand(_4__this, 0LL);
LABEL_68:
                    BattleLogic__setDrawCard(_4__this, 0LL);
LABEL_69:
                    v56 = 0;
                    v55 = (Il2CppObject *)j_il2cpp_value_box_0(int_TypeInfo, &v56);
                    this->fields.__2__current = v55;
                    v11 = &this->fields.__2__current;
                    sub_B16F98(v11, v55);
                    v12 = 5;
                    goto LABEL_70;
                  }
                  v54 = _4__this->fields.data;
                  if ( v54 )
                  {
                    BattleData__ChangeDoNotSelectCommandServantList(v54, 0LL);
                    goto LABEL_68;
                  }
                }
              }
            }
          }
          else if ( v17 )
          {
            enemy_datalist = (System_Collections_Generic_List_TitleInfoControl_EventEndTimeInfo__o *)v17->fields.enemy_datalist;
            v41 = BattleLogic___c_TypeInfo;
            if ( (BYTE3(BattleLogic___c_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0
              && !BattleLogic___c_TypeInfo->_2.cctor_finished )
            {
              j_il2cpp_runtime_class_init_0(BattleLogic___c_TypeInfo);
              v41 = BattleLogic___c_TypeInfo;
            }
            static_fields = v41->static_fields;
            _9__88_0 = (System_Comparison_TitleInfoControl_EventEndTimeInfo__o *)static_fields->__9__88_0;
            if ( !_9__88_0 )
            {
              if ( (BYTE3(v41->vtable._0_Equals.methodPtr) & 4) != 0 && !v41->_2.cctor_finished )
              {
                j_il2cpp_runtime_class_init_0(v41);
                static_fields = BattleLogic___c_TypeInfo->static_fields;
              }
              v44 = (Il2CppObject *)static_fields->__9;
              _9__88_0 = (System_Comparison_TitleInfoControl_EventEndTimeInfo__o *)sub_B170CC(
                                                                                     System_Comparison_BattleServantData__TypeInfo,
                                                                                     v13,
                                                                                     v14,
                                                                                     v15,
                                                                                     v16);
              System_Comparison_TitleInfoControl_EventEndTimeInfo____ctor(
                _9__88_0,
                v44,
                Method_BattleLogic___c__colReplaceMember_b__88_0__,
                (const MethodInfo_25BFD48 *)Method_System_Comparison_BattleServantData___ctor__);
              v45 = BattleLogic___c_TypeInfo->static_fields;
              v45->__9__88_0 = (struct System_Comparison_BattleServantData__o *)_9__88_0;
              sub_B16F98(&v45->__9__88_0, _9__88_0);
            }
            if ( enemy_datalist )
            {
              System_Collections_Generic_List_TitleInfoControl_EventEndTimeInfo___Sort(
                enemy_datalist,
                (System_Comparison_T__o *)_9__88_0,
                (const MethodInfo_2F27DB4 *)Method_System_Collections_Generic_List_BattleServantData__Sort__);
              TargetId = BattleLogic__getTargetId(_4__this, 0LL);
              v47 = this->fields.replaceData;
              if ( v47 )
              {
                if ( TargetId == v47->fields.outUniqeId )
                  BattleLogic__setTargetIndex(_4__this, 0, 0LL);
                goto LABEL_69;
              }
            }
          }
        }
LABEL_72:
        sub_B170D4();
      }
      v56 = 0;
      v10 = (Il2CppObject *)j_il2cpp_value_box_0(int_TypeInfo, &v56);
      this->fields.__2__current = v10;
      v11 = &this->fields.__2__current;
      sub_B16F98(v11, v10);
      v12 = 4;
LABEL_70:
      *((_DWORD *)v11 - 2) = v12;
      return 1;
    case 5:
      endCallBack = this->fields.endCallBack;
      this->fields.__1__state = -1;
      if ( !endCallBack )
        goto LABEL_72;
      System_Action__Invoke(endCallBack, 0LL);
      return 0;
    default:
      return 0;
  }
}


Il2CppObject *__fastcall BattleLogic__colReplaceMember_d__88__System_Collections_Generic_IEnumerator_System_Object__get_Current(
        BattleLogic__colReplaceMember_d__88_o *this,
        const MethodInfo *method)
{
  return this->fields.__2__current;
}


void __fastcall __noreturn BattleLogic__colReplaceMember_d__88__System_Collections_IEnumerator_Reset(
        BattleLogic__colReplaceMember_d__88_o *this,
        const MethodInfo *method)
{
  __int64 v2; // x0
  __int64 v3; // x1
  __int64 v4; // x2
  __int64 v5; // x3
  __int64 v6; // x4
  System_NotSupportedException_o *v7; // x0
  __int64 v8; // x1

  v2 = sub_B17000(&System_NotSupportedException_TypeInfo, method);
  v7 = (System_NotSupportedException_o *)sub_B170CC(v2, v3, v4, v5, v6);
  System_NotSupportedException___ctor(v7, 0LL);
  sub_B17000(&Method_BattleLogic__colReplaceMember_d__88_System_Collections_IEnumerator_Reset__, v8);
  sub_B170A0();
}


Il2CppObject *__fastcall BattleLogic__colReplaceMember_d__88__System_Collections_IEnumerator_get_Current(
        BattleLogic__colReplaceMember_d__88_o *this,
        const MethodInfo *method)
{
  return this->fields.__2__current;
}


void __fastcall BattleLogic__colReplaceMember_d__88__System_IDisposable_Dispose(
        BattleLogic__colReplaceMember_d__88_o *this,
        const MethodInfo *method)
{
  ;
}


void __fastcall BattleLogic__coroutineContinueMember_d__92___ctor(
        BattleLogic__coroutineContinueMember_d__92_o *this,
        int32_t 1__state,
        const MethodInfo *method)
{
  System_Object___ctor((Il2CppObject *)this, 0LL);
  this->fields.__1__state = 1__state;
}


bool __fastcall BattleLogic__coroutineContinueMember_d__92__MoveNext(
        BattleLogic__coroutineContinueMember_d__92_o *this,
        const MethodInfo *method)
{
  __int64 v3; // x1
  __int64 v4; // x1
  __int64 v5; // x1
  __int64 v6; // x1
  __int64 v7; // x1
  __int64 v8; // x1
  __int64 v9; // x1
  int32_t _1__state; // w8
  struct BattleLogic_o *_4__this; // x20
  int v12; // w9
  int32_t *p_i_5__2; // x22
  BattlePerformance_c *v14; // x0
  PlayMakerFSM_o *fsm; // x0
  struct BattlePerformance_o *perf; // x8
  BattlePerformanceContinue_o *contPerf; // x0
  bool result; // w0
  int32_t v19; // w8
  System_Collections_Generic_List_BattleLogicBuff_ReduceHpProcess_BuffInfo__o *player_datalist; // x0
  struct System_Collections_Generic_List_Enumerator_BattleServantData__o *p__7__wrap2; // x21
  __int128 v22; // q0
  struct BattlePerformance_o *v23; // x8
  struct BattleData_o *v24; // x9
  struct BattleDefenceTargetData_o *defenceTargetData; // x9
  BattlePerformanceDefenceTarget_o *defenceTarget; // x0
  struct BattlePerformance_o *v27; // x8
  UnityEngine_Component_o *v28; // x0
  UnityEngine_GameObject_o *gameObject; // x0
  struct BattlePerformance_o *v30; // x8
  struct BattlePerformanceDefenceTarget_o *v31; // x8
  struct BattleData_o *v32; // x8
  struct BattleActionLogManagerInterface_o *actionLogManager; // x20
  BattleActionLogManagerInterface_c *klass; // x8
  unsigned __int64 v35; // x10
  BattleActionLogManagerInterface_c **p_offset; // x11
  __int64 p_method; // x0
  DefCoroutine_c *v38; // x0
  Il2CppObject *milliSecFourTeen; // x1
  const MethodInfo *v40; // x1
  struct BattleServantData_o *current; // x8
  BattlePerformance_o *v42; // x0
  BattlePerformance_o *v43; // x0
  BattlePerformance_o *v44; // x0
  struct BattleData_o *data; // x8
  struct System_Int32_array *p_entryid; // x10
  Il2CppObject *v47; // x0
  System_Collections_Generic_List_Enumerator_T__o v48; // [xsp+18h] [xbp-48h] BYREF

  if ( (byte_40F852F & 1) == 0 )
  {
    sub_B16FFC(&BattleActionLogManagerInterface_TypeInfo, method);
    sub_B16FFC(&BattlePerformance_TypeInfo, v3);
    sub_B16FFC(&DefCoroutine_TypeInfo, v4);
    sub_B16FFC(&Method_System_Collections_Generic_List_Enumerator_BattleServantData__MoveNext__, v5);
    sub_B16FFC(&Method_System_Collections_Generic_List_Enumerator_BattleServantData__get_Current__, v6);
    sub_B16FFC(&int_TypeInfo, v7);
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleServantData__GetEnumerator__, v8);
    sub_B16FFC(&ServantAssetLoadManager_TypeInfo, v9);
    byte_40F852F = 1;
  }
  _1__state = this->fields.__1__state;
  _4__this = this->fields.__4__this;
  if ( (unsigned int)(_1__state - 2) < 2 )
  {
    this->fields.__1__state = -1;
    v14 = BattlePerformance_TypeInfo;
    if ( (BYTE3(BattlePerformance_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0
      && !BattlePerformance_TypeInfo->_2.cctor_finished )
    {
      j_il2cpp_runtime_class_init_0(BattlePerformance_TypeInfo);
      v14 = BattlePerformance_TypeInfo;
    }
    if ( !v14->static_fields->isAnyVoiceFinish )
    {
      this->fields.__2__current = 0LL;
      sub_B16F98(&this->fields.__2__current, 0LL);
      v19 = 3;
LABEL_51:
      this->fields.__1__state = v19;
      return 1;
    }
    if ( !_4__this )
      sub_B170D4();
    BattleLogic__resetTimeAcceleration(_4__this, 0, 0LL);
    fsm = _4__this->fields.fsm;
    if ( !fsm )
      sub_B170D4();
    PlayMakerFSM__SendEvent(fsm, this->fields.endproc, 0LL);
    perf = _4__this->fields.perf;
    if ( !perf )
      sub_B170D4();
    contPerf = perf->fields.contPerf;
    if ( !contPerf )
      sub_B170D4();
    BattlePerformanceContinue__EndContinue(contPerf, 0LL);
    return 0;
  }
  if ( _1__state == 1 )
  {
    this->fields.__1__state = -3;
    goto LABEL_69;
  }
  if ( _1__state )
    return 0;
  this->fields.__1__state = -1;
  if ( !_4__this )
    sub_B170D4();
  BattleLogic__setTimeAcceleration(_4__this, 0, 0LL);
  v12 = 0;
  this->fields._i_5__2 = 0;
  p_i_5__2 = &this->fields._i_5__2;
LABEL_78:
  data = _4__this->fields.data;
  if ( !data )
    sub_B170D4();
  p_entryid = data->fields.p_entryid;
  if ( !p_entryid )
    sub_B170D4();
  if ( v12 >= (signed int)p_entryid->max_length )
  {
    if ( BattleData__CheckDefenceTargetData(_4__this->fields.data, 0LL) )
    {
      v23 = _4__this->fields.perf;
      if ( !v23 )
        sub_B170D4();
      v24 = _4__this->fields.data;
      if ( !v24 )
        sub_B170D4();
      defenceTargetData = v24->fields.defenceTargetData;
      if ( !defenceTargetData )
        sub_B170D4();
      defenceTarget = v23->fields.defenceTarget;
      if ( !defenceTarget )
        sub_B170D4();
      BattlePerformanceDefenceTarget__SetHpGauge(defenceTarget, defenceTargetData->fields.nowHp, 0LL);
      v27 = _4__this->fields.perf;
      if ( !v27 )
        sub_B170D4();
      v28 = (UnityEngine_Component_o *)v27->fields.defenceTarget;
      if ( !v28 )
        sub_B170D4();
      gameObject = UnityEngine_Component__get_gameObject(v28, 0LL);
      if ( !gameObject )
        sub_B170D4();
      UnityEngine_GameObject__SetActive(gameObject, 0, 0LL);
      v30 = _4__this->fields.perf;
      if ( !v30 )
        sub_B170D4();
      v31 = v30->fields.defenceTarget;
      if ( !v31 )
        sub_B170D4();
      v31->fields.isContinue = 1;
    }
    v32 = _4__this->fields.data;
    if ( !v32 )
      sub_B170D4();
    actionLogManager = v32->fields.actionLogManager;
    if ( !actionLogManager )
      sub_B170D4();
    klass = actionLogManager->klass;
    if ( *(_WORD *)&actionLogManager->klass->_2.bitflags1 )
    {
      v35 = 0LL;
      p_offset = (BattleActionLogManagerInterface_c **)&klass->_1.interfaceOffsets->offset;
      while ( *(p_offset - 1) != BattleActionLogManagerInterface_TypeInfo )
      {
        ++v35;
        p_offset += 2;
        if ( v35 >= *(unsigned __int16 *)&actionLogManager->klass->_2.bitflags1 )
          goto LABEL_45;
      }
      p_method = (__int64)&klass->vtable[*(_DWORD *)p_offset + 9].method;
    }
    else
    {
LABEL_45:
      p_method = sub_AAFEF8(actionLogManager, BattleActionLogManagerInterface_TypeInfo, 9LL);
    }
    (*(void (__fastcall **)(struct BattleActionLogManagerInterface_o *, _QWORD))p_method)(
      actionLogManager,
      *(_QWORD *)(p_method + 8));
    v38 = DefCoroutine_TypeInfo;
    if ( (BYTE3(DefCoroutine_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0
      && !DefCoroutine_TypeInfo->_2.cctor_finished )
    {
      j_il2cpp_runtime_class_init_0(DefCoroutine_TypeInfo);
      v38 = DefCoroutine_TypeInfo;
    }
    milliSecFourTeen = (Il2CppObject *)v38->static_fields->milliSecFourTeen;
    this->fields.__2__current = milliSecFourTeen;
    sub_B16F98(&this->fields.__2__current, milliSecFourTeen);
    v19 = 2;
    goto LABEL_51;
  }
  player_datalist = (System_Collections_Generic_List_BattleLogicBuff_ReduceHpProcess_BuffInfo__o *)data->fields.player_datalist;
  if ( !player_datalist )
    sub_B170D4();
  System_Collections_Generic_List_BattleLogicBuff_ReduceHpProcess_BuffInfo___GetEnumerator(
    &v48,
    player_datalist,
    (const MethodInfo_2F26B54 *)Method_System_Collections_Generic_List_BattleServantData__GetEnumerator__);
  p__7__wrap2 = &this->fields.__7__wrap2;
  v22 = *(_OWORD *)&v48.fields.list;
  this->fields.__7__wrap2.fields.current = (struct BattleServantData_o *)v48.fields.current;
  *(_OWORD *)&this->fields.__7__wrap2.fields.list = v22;
  sub_B16F98(&this->fields.__7__wrap2, 0LL);
  this->fields.__1__state = -3;
  while ( 1 )
  {
    do
    {
      if ( !System_Collections_Generic_List_Enumerator_BattleLogicBuff_ReduceHpProcess_BuffInfo___MoveNext(
              (System_Collections_Generic_List_Enumerator_T__o *)p__7__wrap2,
              (const MethodInfo_2074054 *)Method_System_Collections_Generic_List_Enumerator_BattleServantData__MoveNext__) )
      {
        BattleLogic__coroutineContinueMember_d__92____m__Finally1(this, v40);
        *(_QWORD *)&p__7__wrap2->fields.index = 0LL;
        p__7__wrap2->fields.current = 0LL;
        p__7__wrap2->fields.list = 0LL;
        v12 = *p_i_5__2 + 1;
        *p_i_5__2 = v12;
        goto LABEL_78;
      }
      current = this->fields.__7__wrap2.fields.current;
      if ( !current )
        sub_B170D4();
    }
    while ( *p_i_5__2 != current->fields.index );
    v42 = _4__this->fields.perf;
    if ( !v42 )
      sub_B170D4();
    BattlePerformance__preLoadServantSet(v42, this->fields.__7__wrap2.fields.current, 0LL);
LABEL_69:
    if ( (BYTE3(ServantAssetLoadManager_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0
      && !ServantAssetLoadManager_TypeInfo->_2.cctor_finished )
    {
      j_il2cpp_runtime_class_init_0(ServantAssetLoadManager_TypeInfo);
    }
    if ( ServantAssetLoadManager__checkLoad(0LL) )
      break;
    if ( !_4__this )
      sub_B170D4();
    v43 = _4__this->fields.perf;
    if ( !v43 )
      sub_B170D4();
    p_i_5__2 = &this->fields._i_5__2;
    BattlePerformance__loadPlayerActor(v43, this->fields._i_5__2, 0LL);
    v44 = _4__this->fields.perf;
    if ( !v44 )
      sub_B170D4();
    BattlePerformance__continuePlayerActor(v44, this->fields._i_5__2, this->fields.isTactical, 0LL);
    p__7__wrap2 = &this->fields.__7__wrap2;
  }
  LODWORD(v48.fields.list) = 0;
  v47 = (Il2CppObject *)j_il2cpp_value_box_0(int_TypeInfo, &v48);
  this->fields.__2__current = v47;
  sub_B16F98(&this->fields.__2__current, v47);
  result = 1;
  this->fields.__1__state = 1;
  return result;
}


Il2CppObject *__fastcall BattleLogic__coroutineContinueMember_d__92__System_Collections_Generic_IEnumerator_System_Object__get_Current(
        BattleLogic__coroutineContinueMember_d__92_o *this,
        const MethodInfo *method)
{
  return this->fields.__2__current;
}


void __fastcall __noreturn BattleLogic__coroutineContinueMember_d__92__System_Collections_IEnumerator_Reset(
        BattleLogic__coroutineContinueMember_d__92_o *this,
        const MethodInfo *method)
{
  __int64 v2; // x0
  __int64 v3; // x1
  __int64 v4; // x2
  __int64 v5; // x3
  __int64 v6; // x4
  System_NotSupportedException_o *v7; // x0
  __int64 v8; // x1

  v2 = sub_B17000(&System_NotSupportedException_TypeInfo, method);
  v7 = (System_NotSupportedException_o *)sub_B170CC(v2, v3, v4, v5, v6);
  System_NotSupportedException___ctor(v7, 0LL);
  sub_B17000(&Method_BattleLogic__coroutineContinueMember_d__92_System_Collections_IEnumerator_Reset__, v8);
  sub_B170A0();
}


Il2CppObject *__fastcall BattleLogic__coroutineContinueMember_d__92__System_Collections_IEnumerator_get_Current(
        BattleLogic__coroutineContinueMember_d__92_o *this,
        const MethodInfo *method)
{
  return this->fields.__2__current;
}


void __fastcall BattleLogic__coroutineContinueMember_d__92__System_IDisposable_Dispose(
        BattleLogic__coroutineContinueMember_d__92_o *this,
        const MethodInfo *method)
{
  int32_t _1__state; // w8

  _1__state = this->fields.__1__state;
  if ( _1__state == 1 || _1__state == -3 )
    BattleLogic__coroutineContinueMember_d__92____m__Finally1(this, method);
}


void __fastcall BattleLogic__coroutineContinueMember_d__92____m__Finally1(
        BattleLogic__coroutineContinueMember_d__92_o *this,
        const MethodInfo *method)
{
  if ( (byte_40F8530 & 1) == 0 )
  {
    sub_B16FFC(&Method_System_Collections_Generic_List_Enumerator_BattleServantData__Dispose__, method);
    byte_40F8530 = 1;
  }
  this->fields.__1__state = -1;
  System_Collections_Generic_List_Enumerator_BattleLogicBuff_ReduceHpProcess_BuffInfo___Dispose(
    (System_Collections_Generic_List_Enumerator_T__o *)&this->fields.__7__wrap2,
    (const MethodInfo_2074050 *)Method_System_Collections_Generic_List_Enumerator_BattleServantData__Dispose__);
}


void __fastcall BattleLogic__coroutineEntrySubMember_d__79___ctor(
        BattleLogic__coroutineEntrySubMember_d__79_o *this,
        int32_t 1__state,
        const MethodInfo *method)
{
  System_Object___ctor((Il2CppObject *)this, 0LL);
  this->fields.__1__state = 1__state;
}


bool __fastcall BattleLogic__coroutineEntrySubMember_d__79__MoveNext(
        BattleLogic__coroutineEntrySubMember_d__79_o *this,
        const MethodInfo *method)
{
  __int64 v2; // x2
  __int64 v3; // x3
  __int64 v4; // x4
  __int64 v6; // x1
  __int64 v7; // x1
  __int64 v8; // x1
  __int64 v9; // x1
  __int64 v10; // x1
  __int64 v11; // x1
  __int64 v12; // x1
  __int64 v13; // x1
  __int64 v14; // x1
  __int64 v15; // x1
  __int64 v16; // x1
  __int64 v17; // x1
  __int64 v18; // x1
  __int64 v19; // x1
  __int64 v20; // x1
  __int64 v21; // x1
  __int64 v22; // x1
  __int64 v23; // x1
  __int64 v24; // x1
  __int64 v25; // x1
  __int64 v26; // x1
  __int64 v27; // x1
  __int64 v28; // x1
  __int64 v29; // x1
  __int64 v30; // x1
  __int64 v31; // x1
  __int64 v32; // x1
  __int64 v33; // x1
  __int64 v34; // x1
  __int64 v35; // x1
  __int64 v36; // x1
  __int64 v37; // x1
  __int64 v38; // x1
  __int64 v39; // x1
  __int64 v40; // x1
  __int64 v41; // x1
  struct BattleLogic_o *_4__this; // x20
  Il2CppObject *v43; // x21
  struct BattleLogic_o *v44; // x1
  struct BattleServantData_array *v45; // x0
  BattleServantData_array *v46; // x22
  struct BattleServantData_array *v47; // x0
  struct BattleServantData_array **p_moveToSubMemberPlayerServantArray_5__3; // x23
  BattleServantData_array *v49; // x0
  struct BattleServantData_array *deadPlayerServantArray_5__2; // x8
  BattleData_o *data; // x0
  AssetManager_o *Instance; // x0
  BattleData_o *v53; // x0
  __int64 v54; // x1
  __int64 v55; // x2
  __int64 v56; // x3
  __int64 v57; // x4
  System_Collections_Generic_List_RestockServantLogic__o *RestockServantLogicList; // x22
  BattleLogic___c_c *v59; // x8
  struct BattleLogic___c_StaticFields *static_fields; // x9
  System_Func_WarBoardManager_WarBoardOnboardSkillTarget__bool__o *_9__79_0; // x23
  Il2CppObject *v62; // x24
  struct BattleLogic___c_StaticFields *v63; // x0
  System_Collections_Generic_IEnumerable_TSource__o *v64; // x0
  System_Collections_Generic_List_TSource__o *v65; // x0
  __int64 v66; // x1
  __int64 v67; // x2
  __int64 v68; // x3
  __int64 v69; // x4
  struct BattleData_o *v70; // x8
  struct System_Int32_array *p_entryid; // x23
  System_Collections_Generic_List_TimeZoneInfo_AdjustmentRule__o *v72; // x22
  BattleLogic___c_c *v73; // x0
  struct BattleLogic___c_StaticFields *v74; // x8
  int32_t max_length; // w23
  System_Func_int__BattleActionData_SideEffectData__o *_9__79_1; // x24
  Il2CppObject *v77; // x25
  struct BattleLogic___c_StaticFields *v78; // x0
  System_Collections_Generic_IEnumerable_T__o *v79; // x0
  __int64 v80; // x1
  __int64 v81; // x2
  __int64 v82; // x3
  __int64 v83; // x4
  System_Collections_Generic_List_int__o *v84; // x24
  System_Collections_Generic_List_int__o **p_playerDeckIndices_5__5; // x23
  int32_t v86; // w22
  Il2CppObject *current; // x25
  BattleData_o *v88; // x0
  int32_t klass_high; // w24
  BattleServantData_o *v90; // x2
  BattleData_o *v91; // x0
  BattleData_o *v92; // x0
  struct BattleData_o *v93; // x8
  struct System_Int32_array *e_entryid; // x8
  System_Collections_Generic_IEnumerable_TSource__o *v95; // x23
  __int64 v96; // x1
  __int64 v97; // x2
  __int64 v98; // x3
  __int64 v99; // x4
  System_Func_int__bool__o *v100; // x24
  _BOOL4 v101; // w27
  BattleData_o *v102; // x0
  System_Collections_Generic_List_RestockServantLogic__o *v103; // x0
  __int64 v104; // x1
  __int64 v105; // x2
  __int64 v106; // x3
  __int64 v107; // x4
  BattleLogic___c_c *v108; // x8
  System_Collections_Generic_IEnumerable_TSource__o *v109; // x23
  struct BattleLogic___c_StaticFields *v110; // x9
  System_Func_WarBoardManager_WarBoardOnboardSkillTarget__bool__o *_9__79_2; // x24
  Il2CppObject *v112; // x25
  struct BattleLogic___c_StaticFields *v113; // x0
  System_Collections_Generic_IEnumerable_TSource__o *v114; // x0
  System_Collections_Generic_List_TSource__o *v115; // x0
  BattleData_o *v116; // x1
  System_Collections_Generic_IEnumerable_T__o *RandomEntryOrderDecidedArray; // x23
  __int64 v118; // x1
  __int64 v119; // x2
  __int64 v120; // x3
  __int64 v121; // x4
  System_Action_int__o *v122; // x24
  __int64 v123; // x1
  __int64 v124; // x2
  __int64 v125; // x3
  __int64 v126; // x4
  System_Collections_Generic_List_int__o *v127; // x24
  System_Collections_Generic_List_int__o **p_enemyDeckIndices_5__6; // x23
  System_Collections_Generic_List_BattleLogicBuff_ReduceHpProcess_BuffInfo__o *monitor; // x0
  int *v130; // x24
  BattleData_o *v131; // x0
  BattleData_o *v132; // x0
  __int64 v133; // x21
  _BOOL8 IsEntry; // x0
  __int64 v135; // x2
  struct BattleData_o *v136; // x1
  struct System_Boolean_array *enemyAppearValid; // x8
  BattleServantData_o *v138; // x0
  BattleData_o *v139; // x0
  BattleData_o *v140; // x0
  BattleData_o *v141; // x0
  BattlePerformance_o *v142; // x0
  PlayMakerFSM_o *fsm; // x0
  System_String_o *endproc; // x1
  AssetManager_o *v145; // x0
  Il2CppObject *v146; // x0
  Il2CppObject **v147; // x19
  int v148; // w8
  System_Collections_Generic_List_int__o *playerDeckIndices_5__5; // x0
  BattlePerformance_o *perf; // x0
  System_Collections_Generic_List_int__o *enemyDeckIndices_5__6; // x0
  BattlePerformance_o *v152; // x0
  struct BattleServantData_array *v153; // x8
  struct BattleServantData_array *moveToSubMemberPlayerServantArray_5__3; // x8
  BattleData_o *v155; // x0
  BattleData_o *v156; // x0
  BattleData_o *v157; // x0
  BattleData_o *v158; // x0
  Il2CppObject *v159; // x0
  bool result; // w0
  struct BattleData_o *v161; // x8
  Il2CppObject *v162; // x0
  Il2CppObject **p__2__current; // x19
  BattleData_o *v164; // x0
  struct BattleData_o *v165; // x8
  _BYTE v166[44]; // [xsp+0h] [xbp-C0h] BYREF
  int v167; // [xsp+2Ch] [xbp-94h]
  System_Collections_Generic_List_Enumerator_int__o i; // [xsp+30h] [xbp-90h] BYREF
  System_Collections_Generic_List_Enumerator_T__o v169; // [xsp+50h] [xbp-70h] BYREF

  if ( (byte_40F8531 & 1) == 0 )
  {
    sub_B16FFC(&Method_System_Action_int___ctor__, method);
    sub_B16FFC(&System_Action_int__TypeInfo, v6);
    sub_B16FFC(&Method_BasicHelper_ForEach_int___, v7);
    sub_B16FFC(&Method_BasicHelper_ToIterator_RestockServantLogic___, v8);
    sub_B16FFC(&Method_System_Linq_Enumerable_Any_int____66837904, v9);
    sub_B16FFC(&Method_System_Linq_Enumerable_ToList_RestockServantLogic___, v10);
    sub_B16FFC(&Method_System_Linq_Enumerable_Where_RestockServantLogic___, v11);
    sub_B16FFC(&Method_System_Collections_Generic_List_Enumerator_int__Dispose__, v12);
    sub_B16FFC(&Method_System_Collections_Generic_List_Enumerator_RestockServantLogic__Dispose__, v13);
    sub_B16FFC(&Method_System_Collections_Generic_List_Enumerator_int__MoveNext__, v14);
    sub_B16FFC(&Method_System_Collections_Generic_List_Enumerator_RestockServantLogic__MoveNext__, v15);
    sub_B16FFC(&Method_System_Collections_Generic_List_Enumerator_RestockServantLogic__get_Current__, v16);
    sub_B16FFC(&Method_System_Collections_Generic_List_Enumerator_int__get_Current__, v17);
    sub_B16FFC(&Method_System_Func_RestockServantLogic__bool___ctor__, v18);
    sub_B16FFC(&Method_System_Func_int__RestockServantLogic___ctor__, v19);
    sub_B16FFC(&Method_System_Func_int__bool___ctor__, v20);
    sub_B16FFC(&System_Func_int__bool__TypeInfo, v21);
    sub_B16FFC(&System_Func_int__RestockServantLogic__TypeInfo, v22);
    sub_B16FFC(&System_Func_RestockServantLogic__bool__TypeInfo, v23);
    sub_B16FFC(&int_TypeInfo, v24);
    sub_B16FFC(&Method_System_Collections_Generic_List_RestockServantLogic__AddRange__, v25);
    sub_B16FFC(&Method_System_Collections_Generic_List_int__Add__, v26);
    sub_B16FFC(&Method_System_Collections_Generic_List_int__GetEnumerator__, v27);
    sub_B16FFC(&Method_System_Collections_Generic_List_RestockServantLogic__GetEnumerator__, v28);
    sub_B16FFC(&Method_System_Collections_Generic_List_int___ctor__, v29);
    sub_B16FFC(&System_Collections_Generic_List_int__TypeInfo, v30);
    sub_B16FFC(&OptionManager_TypeInfo, v31);
    sub_B16FFC(&ServantAssetLoadManager_TypeInfo, v32);
    sub_B16FFC(&Method_SingletonMonoBehaviour_AssetManager__get_Instance__, v33);
    sub_B16FFC(&Method_BattleLogic___c__coroutineEntrySubMember_b__79_0__, v34);
    sub_B16FFC(&Method_BattleLogic___c__coroutineEntrySubMember_b__79_1__, v35);
    sub_B16FFC(&Method_BattleLogic___c__coroutineEntrySubMember_b__79_2__, v36);
    sub_B16FFC(&Method_BattleLogic___c__DisplayClass79_0__coroutineEntrySubMember_b__3__, v37);
    sub_B16FFC(&Method_BattleLogic___c__DisplayClass79_0__coroutineEntrySubMember_b__4__, v38);
    sub_B16FFC(&BattleLogic___c__DisplayClass79_0_TypeInfo, v39);
    sub_B16FFC(&BattleLogic___c_TypeInfo, v40);
    sub_B16FFC(&StringLiteral_9714, v41);
    byte_40F8531 = 1;
  }
  memset(&v169, 0, sizeof(v169));
  memset(&i, 0, sizeof(i));
  v167 = 0;
  _4__this = this->fields.__4__this;
  switch ( this->fields.__1__state )
  {
    case 0:
      this->fields.__1__state = -1;
      v43 = (Il2CppObject *)sub_B170CC(BattleLogic___c__DisplayClass79_0_TypeInfo, method, v2, v3, v4);
      System_Object___ctor(v43, 0LL);
      if ( !v43 )
        goto LABEL_158;
      v44 = this->fields.__4__this;
      v43[1].klass = (Il2CppClass *)v44;
      sub_B16F98(&v43[1], v44);
      if ( !_4__this )
        goto LABEL_158;
      v45 = BattleLogic__UnloadDeadDeckActorsAndFreeEntry(_4__this, 0, 0LL);
      this->fields._deadPlayerServantArray_5__2 = v45;
      sub_B16F98(&this->fields._deadPlayerServantArray_5__2, v45);
      v46 = BattleLogic__UnloadDeadDeckActorsAndFreeEntry(_4__this, 1, 0LL);
      v47 = BattleLogic__UnloadMoveToSubMemberDeckActors(_4__this, 0, 0LL);
      p_moveToSubMemberPlayerServantArray_5__3 = &this->fields._moveToSubMemberPlayerServantArray_5__3;
      this->fields._moveToSubMemberPlayerServantArray_5__3 = v47;
      sub_B16F98(&this->fields._moveToSubMemberPlayerServantArray_5__3, v47);
      v49 = BattleLogic__UnloadMoveToSubMemberDeckActors(_4__this, 1, 0LL);
      deadPlayerServantArray_5__2 = this->fields._deadPlayerServantArray_5__2;
      if ( !deadPlayerServantArray_5__2 )
        goto LABEL_158;
      if ( *(_QWORD *)&deadPlayerServantArray_5__2->max_length )
        goto LABEL_14;
      if ( !v46 )
        goto LABEL_158;
      if ( *(_QWORD *)&v46->max_length )
        goto LABEL_14;
      if ( !*p_moveToSubMemberPlayerServantArray_5__3 )
        goto LABEL_158;
      if ( *(_QWORD *)&(*p_moveToSubMemberPlayerServantArray_5__3)->max_length )
        goto LABEL_14;
      if ( !v49 )
        goto LABEL_158;
      if ( !*(_QWORD *)&v49->max_length )
        goto LABEL_16;
LABEL_14:
      data = _4__this->fields.data;
      if ( !data )
        goto LABEL_158;
      BattleData__onProgressflg(data, 1024, 0LL);
LABEL_16:
      this->fields._isentry_5__4 = 0;
      Instance = (AssetManager_o *)SingletonMonoBehaviour_WebViewManager___get_Instance((const MethodInfo_2A54F38 *)Method_SingletonMonoBehaviour_AssetManager__get_Instance__);
      if ( !Instance )
        goto LABEL_158;
      AssetManager__PauseDownloadAssetStorage(Instance, 0LL);
      v53 = _4__this->fields.data;
      if ( !v53 )
        goto LABEL_158;
      RestockServantLogicList = BattleData__GetRestockServantLogicList(v53, 0LL);
      v59 = BattleLogic___c_TypeInfo;
      if ( (BYTE3(BattleLogic___c_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0
        && !BattleLogic___c_TypeInfo->_2.cctor_finished )
      {
        j_il2cpp_runtime_class_init_0(BattleLogic___c_TypeInfo);
        v59 = BattleLogic___c_TypeInfo;
      }
      static_fields = v59->static_fields;
      _9__79_0 = (System_Func_WarBoardManager_WarBoardOnboardSkillTarget__bool__o *)static_fields->__9__79_0;
      if ( !_9__79_0 )
      {
        if ( (BYTE3(v59->vtable._0_Equals.methodPtr) & 4) != 0 && !v59->_2.cctor_finished )
        {
          j_il2cpp_runtime_class_init_0(v59);
          static_fields = BattleLogic___c_TypeInfo->static_fields;
        }
        v62 = (Il2CppObject *)static_fields->__9;
        _9__79_0 = (System_Func_WarBoardManager_WarBoardOnboardSkillTarget__bool__o *)sub_B170CC(
                                                                                        System_Func_RestockServantLogic__bool__TypeInfo,
                                                                                        v54,
                                                                                        v55,
                                                                                        v56,
                                                                                        v57);
        System_Func_WarBoardManager_WarBoardOnboardSkillTarget__bool____ctor(
          _9__79_0,
          v62,
          Method_BattleLogic___c__coroutineEntrySubMember_b__79_0__,
          (const MethodInfo_2B6AB40 *)Method_System_Func_RestockServantLogic__bool___ctor__);
        v63 = BattleLogic___c_TypeInfo->static_fields;
        v63->__9__79_0 = (struct System_Func_RestockServantLogic__bool__o *)_9__79_0;
        sub_B16F98(&v63->__9__79_0, _9__79_0);
      }
      v64 = System_Linq_Enumerable__Where_WarBoardManager_WarBoardOnboardSkillTarget_(
              (System_Collections_Generic_IEnumerable_TSource__o *)RestockServantLogicList,
              (System_Func_TSource__bool__o *)_9__79_0,
              (const MethodInfo_19C8FE8 *)Method_System_Linq_Enumerable_Where_RestockServantLogic___);
      v65 = System_Linq_Enumerable__ToList_WarBoardManager_WarBoardOnboardSkillTarget_(
              v64,
              (const MethodInfo_19C7AA0 *)Method_System_Linq_Enumerable_ToList_RestockServantLogic___);
      v70 = _4__this->fields.data;
      if ( !v70 )
        goto LABEL_158;
      p_entryid = v70->fields.p_entryid;
      if ( !p_entryid )
        goto LABEL_158;
      v72 = (System_Collections_Generic_List_TimeZoneInfo_AdjustmentRule__o *)v65;
      v73 = BattleLogic___c_TypeInfo;
      if ( (BYTE3(BattleLogic___c_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0
        && !BattleLogic___c_TypeInfo->_2.cctor_finished )
      {
        j_il2cpp_runtime_class_init_0(BattleLogic___c_TypeInfo);
        v73 = BattleLogic___c_TypeInfo;
      }
      v74 = v73->static_fields;
      max_length = p_entryid->max_length;
      _9__79_1 = (System_Func_int__BattleActionData_SideEffectData__o *)v74->__9__79_1;
      if ( !_9__79_1 )
      {
        if ( (BYTE3(v73->vtable._0_Equals.methodPtr) & 4) != 0 && !v73->_2.cctor_finished )
        {
          j_il2cpp_runtime_class_init_0(v73);
          v74 = BattleLogic___c_TypeInfo->static_fields;
        }
        v77 = (Il2CppObject *)v74->__9;
        _9__79_1 = (System_Func_int__BattleActionData_SideEffectData__o *)sub_B170CC(
                                                                            System_Func_int__RestockServantLogic__TypeInfo,
                                                                            v66,
                                                                            v67,
                                                                            v68,
                                                                            v69);
        System_Func_int__BattleActionData_SideEffectData____ctor(
          _9__79_1,
          v77,
          Method_BattleLogic___c__coroutineEntrySubMember_b__79_1__,
          (const MethodInfo_2B66764 *)Method_System_Func_int__RestockServantLogic___ctor__);
        v78 = BattleLogic___c_TypeInfo->static_fields;
        v78->__9__79_1 = (struct System_Func_int__RestockServantLogic__o *)_9__79_1;
        sub_B16F98(&v78->__9__79_1, _9__79_1);
      }
      v79 = BasicHelper__ToIterator_RestockServantLogic_(
              max_length,
              (System_Func_int__T__o *)_9__79_1,
              (const MethodInfo_18B8E04 *)Method_BasicHelper_ToIterator_RestockServantLogic___);
      if ( !v72 )
        goto LABEL_158;
      System_Collections_Generic_List_TimeZoneInfo_AdjustmentRule___AddRange(
        v72,
        v79,
        (const MethodInfo_2F25F28 *)Method_System_Collections_Generic_List_RestockServantLogic__AddRange__);
      v84 = (System_Collections_Generic_List_int__o *)sub_B170CC(
                                                        System_Collections_Generic_List_int__TypeInfo,
                                                        v80,
                                                        v81,
                                                        v82,
                                                        v83);
      System_Collections_Generic_List_int____ctor(
        v84,
        (const MethodInfo_2F0F794 *)Method_System_Collections_Generic_List_int___ctor__);
      this->fields._playerDeckIndices_5__5 = v84;
      p_playerDeckIndices_5__5 = &this->fields._playerDeckIndices_5__5;
      sub_B16F98(&this->fields._playerDeckIndices_5__5, v84);
      System_Collections_Generic_List_BattleLogicBuff_ReduceHpProcess_BuffInfo___GetEnumerator(
        (System_Collections_Generic_List_Enumerator_T__o *)v166,
        (System_Collections_Generic_List_BattleLogicBuff_ReduceHpProcess_BuffInfo__o *)v72,
        (const MethodInfo_2F26B54 *)Method_System_Collections_Generic_List_RestockServantLogic__GetEnumerator__);
      v86 = 0;
      v169 = *(System_Collections_Generic_List_Enumerator_T__o *)v166;
      while ( System_Collections_Generic_List_Enumerator_BattleLogicBuff_ReduceHpProcess_BuffInfo___MoveNext(
                &v169,
                (const MethodInfo_2074054 *)Method_System_Collections_Generic_List_Enumerator_RestockServantLogic__MoveNext__) )
      {
        current = v169.fields.current;
        if ( !v169.fields.current )
          sub_B170D4();
        v88 = _4__this->fields.data;
        if ( !v88 )
          sub_B170D4();
        klass_high = HIDWORD(v169.fields.current[1].klass);
        if ( !BattleData__IsEntry(v88, klass_high, 0, 0LL) )
        {
          v90 = (BattleServantData_o *)((__int64 (__fastcall *)(Il2CppObject *, struct BattleData_o *, Il2CppMethodPointer))current->klass->vtable[4].method)(
                                         current,
                                         _4__this->fields.data,
                                         current->klass->vtable[5].methodPtr);
          if ( v90 )
          {
            BattleLogic__PreloadAndEntryServant(_4__this, klass_high, v90, v86, 0LL);
            if ( !*p_playerDeckIndices_5__5 )
              sub_B170D4();
            System_Collections_Generic_List_int___Add(
              *p_playerDeckIndices_5__5,
              klass_high,
              (const MethodInfo_2F104F0 *)Method_System_Collections_Generic_List_int__Add__);
            ++v86;
            this->fields._isentry_5__4 = 1;
          }
        }
      }
      *(_DWORD *)&v166[4 * v167++ + 24] = 411;
      System_Collections_Generic_List_Enumerator_BattleLogicBuff_ReduceHpProcess_BuffInfo___Dispose(
        &v169,
        (const MethodInfo_2074050 *)Method_System_Collections_Generic_List_Enumerator_RestockServantLogic__Dispose__);
      if ( v167 && *(_DWORD *)&v166[4 * v167 + 20] == 411 )
        --v167;
      v91 = _4__this->fields.data;
      if ( !v91 )
        goto LABEL_158;
      if ( !BattleData__IsEnemyEntryOverLimit(v91, 0LL) )
        goto LABEL_55;
      v92 = _4__this->fields.data;
      if ( !v92 )
        goto LABEL_158;
      if ( !BattleData__checkAliveEnemys(v92, 0LL) )
        goto LABEL_55;
      v93 = _4__this->fields.data;
      if ( !v93 )
        goto LABEL_158;
      e_entryid = v93->fields.e_entryid;
      if ( !e_entryid )
        goto LABEL_158;
      v95 = (System_Collections_Generic_IEnumerable_TSource__o *)System_Linq_Enumerable__Range(
                                                                   0,
                                                                   e_entryid->max_length,
                                                                   0LL);
      v100 = (System_Func_int__bool__o *)sub_B170CC(System_Func_int__bool__TypeInfo, v96, v97, v98, v99);
      System_Func_int__bool____ctor(
        v100,
        v43,
        Method_BattleLogic___c__DisplayClass79_0__coroutineEntrySubMember_b__4__,
        (const MethodInfo_2B6586C *)Method_System_Func_int__bool___ctor__);
      if ( System_Linq_Enumerable__Any_int__25991232(
             v95,
             (System_Func_TSource__bool__o *)v100,
             (const MethodInfo_18C9840 *)Method_System_Linq_Enumerable_Any_int____66837904) )
      {
LABEL_55:
        v101 = 1;
      }
      else
      {
        v164 = _4__this->fields.data;
        if ( !v164 )
          goto LABEL_158;
        BattleData__ResetEnemyEntryCount(v164, 0LL);
        v165 = _4__this->fields.data;
        if ( !v165 )
          goto LABEL_158;
        v101 = v165->fields._EnemyEntryMaxCountEachTurn_k__BackingField != 0;
      }
      v102 = _4__this->fields.data;
      if ( v102 )
      {
        v103 = BattleData__GetRestockServantLogicList(v102, 0LL);
        v108 = BattleLogic___c_TypeInfo;
        v109 = (System_Collections_Generic_IEnumerable_TSource__o *)v103;
        if ( (BYTE3(BattleLogic___c_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0
          && !BattleLogic___c_TypeInfo->_2.cctor_finished )
        {
          j_il2cpp_runtime_class_init_0(BattleLogic___c_TypeInfo);
          v108 = BattleLogic___c_TypeInfo;
        }
        v110 = v108->static_fields;
        _9__79_2 = (System_Func_WarBoardManager_WarBoardOnboardSkillTarget__bool__o *)v110->__9__79_2;
        if ( !_9__79_2 )
        {
          if ( (BYTE3(v108->vtable._0_Equals.methodPtr) & 4) != 0 && !v108->_2.cctor_finished )
          {
            j_il2cpp_runtime_class_init_0(v108);
            v110 = BattleLogic___c_TypeInfo->static_fields;
          }
          v112 = (Il2CppObject *)v110->__9;
          _9__79_2 = (System_Func_WarBoardManager_WarBoardOnboardSkillTarget__bool__o *)sub_B170CC(
                                                                                          System_Func_RestockServantLogic__bool__TypeInfo,
                                                                                          v104,
                                                                                          v105,
                                                                                          v106,
                                                                                          v107);
          System_Func_WarBoardManager_WarBoardOnboardSkillTarget__bool____ctor(
            _9__79_2,
            v112,
            Method_BattleLogic___c__coroutineEntrySubMember_b__79_2__,
            (const MethodInfo_2B6AB40 *)Method_System_Func_RestockServantLogic__bool___ctor__);
          v113 = BattleLogic___c_TypeInfo->static_fields;
          v113->__9__79_2 = (struct System_Func_RestockServantLogic__bool__o *)_9__79_2;
          sub_B16F98(&v113->__9__79_2, _9__79_2);
        }
        v114 = System_Linq_Enumerable__Where_WarBoardManager_WarBoardOnboardSkillTarget_(
                 v109,
                 (System_Func_TSource__bool__o *)_9__79_2,
                 (const MethodInfo_19C8FE8 *)Method_System_Linq_Enumerable_Where_RestockServantLogic___);
        v115 = System_Linq_Enumerable__ToList_WarBoardManager_WarBoardOnboardSkillTarget_(
                 v114,
                 (const MethodInfo_19C7AA0 *)Method_System_Linq_Enumerable_ToList_RestockServantLogic___);
        v43[1].monitor = v115;
        sub_B16F98(&v43[1].monitor, v115);
        v116 = _4__this->fields.data;
        if ( v116 )
        {
          RandomEntryOrderDecidedArray = (System_Collections_Generic_IEnumerable_T__o *)RestockServantLogic__GetRandomEntryOrderDecidedArray(
                                                                                          v116->fields._EnemyAddOrderPosArray_k__BackingField,
                                                                                          v116,
                                                                                          0LL);
          v122 = (System_Action_int__o *)sub_B170CC(System_Action_int__TypeInfo, v118, v119, v120, v121);
          System_Action_int____ctor(
            v122,
            v43,
            Method_BattleLogic___c__DisplayClass79_0__coroutineEntrySubMember_b__3__,
            (const MethodInfo_24B5D80 *)Method_System_Action_int___ctor__);
          BasicHelper__ForEach_int_(
            RandomEntryOrderDecidedArray,
            (System_Action_T__o *)v122,
            (const MethodInfo_18B6CD8 *)Method_BasicHelper_ForEach_int___);
          v127 = (System_Collections_Generic_List_int__o *)sub_B170CC(
                                                             System_Collections_Generic_List_int__TypeInfo,
                                                             v123,
                                                             v124,
                                                             v125,
                                                             v126);
          System_Collections_Generic_List_int____ctor(
            v127,
            (const MethodInfo_2F0F794 *)Method_System_Collections_Generic_List_int___ctor__);
          this->fields._enemyDeckIndices_5__6 = v127;
          p_enemyDeckIndices_5__6 = &this->fields._enemyDeckIndices_5__6;
          sub_B16F98(&this->fields._enemyDeckIndices_5__6, v127);
          monitor = (System_Collections_Generic_List_BattleLogicBuff_ReduceHpProcess_BuffInfo__o *)v43[1].monitor;
          if ( monitor )
          {
            System_Collections_Generic_List_BattleLogicBuff_ReduceHpProcess_BuffInfo___GetEnumerator(
              (System_Collections_Generic_List_Enumerator_T__o *)v166,
              monitor,
              (const MethodInfo_2F26B54 *)Method_System_Collections_Generic_List_RestockServantLogic__GetEnumerator__);
            v169 = *(System_Collections_Generic_List_Enumerator_T__o *)v166;
            while ( System_Collections_Generic_List_Enumerator_BattleLogicBuff_ReduceHpProcess_BuffInfo___MoveNext(
                      &v169,
                      (const MethodInfo_2074054 *)Method_System_Collections_Generic_List_Enumerator_RestockServantLogic__MoveNext__) )
            {
              v130 = (int *)v169.fields.current;
              if ( v101 )
              {
                v131 = _4__this->fields.data;
                if ( !v131 )
                  sub_B170D4();
                if ( BattleData__IsEnemyEntryOverLimit(v131, 0LL) )
                  break;
              }
              if ( !v130 )
                sub_B170D4();
              v132 = _4__this->fields.data;
              if ( !v132 )
                sub_B170D4();
              v133 = v130[5];
              IsEntry = BattleData__IsEntry(v132, v133, 1, 0LL);
              if ( !IsEntry )
              {
                v136 = _4__this->fields.data;
                if ( !v136 )
                  sub_B170D4();
                enemyAppearValid = v136->fields.enemyAppearValid;
                if ( !enemyAppearValid )
                  sub_B170D4();
                if ( (unsigned int)v133 >= enemyAppearValid->max_length )
                {
                  sub_B17100(IsEntry, v136, v135);
                  sub_B170A0();
                }
                if ( enemyAppearValid->m_Items[v133 + 4] )
                {
                  v138 = (BattleServantData_o *)(*(__int64 (__fastcall **)(int *))(*(_QWORD *)v130 + 376LL))(v130);
                  if ( v138 )
                  {
                    if ( !this->fields.isEventBonusCheck || v138->fields.isAddition )
                    {
                      BattleLogic__PreloadAndEntryServant(_4__this, v133, v138, v86, 0LL);
                      if ( !*p_enemyDeckIndices_5__6 )
                        sub_B170D4();
                      System_Collections_Generic_List_int___Add(
                        *p_enemyDeckIndices_5__6,
                        v133,
                        (const MethodInfo_2F104F0 *)Method_System_Collections_Generic_List_int__Add__);
                      this->fields._isentry_5__4 = 1;
                      v139 = _4__this->fields.data;
                      if ( !v139 )
                        sub_B170D4();
                      ++v86;
                      BattleData__AddEnemyEntryCount(v139, 0LL);
                    }
                  }
                }
              }
            }
            *(_DWORD *)&v166[4 * v167++ + 24] = 826;
            System_Collections_Generic_List_Enumerator_BattleLogicBuff_ReduceHpProcess_BuffInfo___Dispose(
              &v169,
              (const MethodInfo_2074050 *)Method_System_Collections_Generic_List_Enumerator_RestockServantLogic__Dispose__);
            if ( v167 && *(_DWORD *)&v166[4 * v167 + 20] == 826 )
              --v167;
            if ( (BYTE3(OptionManager_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0
              && !OptionManager_TypeInfo->_2.cctor_finished )
            {
              j_il2cpp_runtime_class_init_0(OptionManager_TypeInfo);
            }
            if ( OptionManager__isSavedMemoryMode(0LL) )
              goto LABEL_143;
            if ( this->fields._isentry_5__4 )
            {
              v161 = _4__this->fields.data;
              if ( !v161 )
                goto LABEL_158;
              if ( v161->fields._IsReleaseUnusedAssetsWhenEntryMember_k__BackingField )
              {
LABEL_143:
                v162 = (Il2CppObject *)BattleLogic__UnloadUnusedAssetsAndWaitFinish(_4__this, 0LL);
                this->fields.__2__current = v162;
                p__2__current = &this->fields.__2__current;
                sub_B16F98(p__2__current, v162);
                result = 1;
                *((_DWORD *)p__2__current - 2) = 1;
                return result;
              }
            }
LABEL_94:
            v145 = (AssetManager_o *)SingletonMonoBehaviour_WebViewManager___get_Instance((const MethodInfo_2A54F38 *)Method_SingletonMonoBehaviour_AssetManager__get_Instance__);
            if ( v145 )
            {
              AssetManager__ResumeDownloadAssetStorage(v145, 0LL);
LABEL_96:
              if ( (BYTE3(ServantAssetLoadManager_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0
                && !ServantAssetLoadManager_TypeInfo->_2.cctor_finished )
              {
                j_il2cpp_runtime_class_init_0(ServantAssetLoadManager_TypeInfo);
              }
              if ( ServantAssetLoadManager__checkLoad(0LL) )
              {
                *(_DWORD *)v166 = 0;
                v146 = (Il2CppObject *)j_il2cpp_value_box_0(int_TypeInfo, v166);
                this->fields.__2__current = v146;
                v147 = &this->fields.__2__current;
                sub_B16F98(v147, v146);
                v148 = 2;
LABEL_132:
                *((_DWORD *)v147 - 2) = v148;
                return 1;
              }
              playerDeckIndices_5__5 = this->fields._playerDeckIndices_5__5;
              if ( playerDeckIndices_5__5 )
              {
                System_Collections_Generic_List_int___GetEnumerator(
                  (System_Collections_Generic_List_Enumerator_T__o *)v166,
                  playerDeckIndices_5__5,
                  (const MethodInfo_2F11334 *)Method_System_Collections_Generic_List_int__GetEnumerator__);
                for ( i = *(System_Collections_Generic_List_Enumerator_int__o *)v166;
                      System_Collections_Generic_List_Enumerator_int___MoveNext(
                        &i,
                        (const MethodInfo_2071AE8 *)Method_System_Collections_Generic_List_Enumerator_int__MoveNext__);
                      BattlePerformance__loadPlayerActor(perf, i.fields.current, 0LL) )
                {
                  if ( !_4__this )
                    sub_B170D4();
                  perf = _4__this->fields.perf;
                  if ( !perf )
                    sub_B170D4();
                }
                *(_DWORD *)&v166[4 * v167++ + 24] = 992;
                System_Collections_Generic_List_Enumerator_int___Dispose(
                  &i,
                  (const MethodInfo_2071AE4 *)Method_System_Collections_Generic_List_Enumerator_int__Dispose__);
                if ( v167 && *(_DWORD *)&v166[4 * v167 + 20] == 992 )
                  --v167;
                enemyDeckIndices_5__6 = this->fields._enemyDeckIndices_5__6;
                if ( enemyDeckIndices_5__6 )
                {
                  System_Collections_Generic_List_int___GetEnumerator(
                    (System_Collections_Generic_List_Enumerator_T__o *)v166,
                    enemyDeckIndices_5__6,
                    (const MethodInfo_2F11334 *)Method_System_Collections_Generic_List_int__GetEnumerator__);
                  for ( i = *(System_Collections_Generic_List_Enumerator_int__o *)v166;
                        System_Collections_Generic_List_Enumerator_int___MoveNext(
                          &i,
                          (const MethodInfo_2071AE8 *)Method_System_Collections_Generic_List_Enumerator_int__MoveNext__);
                        BattlePerformance__loadEnemyActor(v152, i.fields.current, 0LL) )
                  {
                    if ( !_4__this )
                      sub_B170D4();
                    v152 = _4__this->fields.perf;
                    if ( !v152 )
                      sub_B170D4();
                  }
                  *(_DWORD *)&v166[4 * v167++ + 24] = 1055;
                  System_Collections_Generic_List_Enumerator_int___Dispose(
                    &i,
                    (const MethodInfo_2071AE4 *)Method_System_Collections_Generic_List_Enumerator_int__Dispose__);
                  if ( v167 && *(_DWORD *)&v166[4 * v167 + 20] == 1055 )
                    --v167;
                  v153 = this->fields._deadPlayerServantArray_5__2;
                  if ( v153 )
                  {
                    if ( !*(_QWORD *)&v153->max_length )
                    {
                      moveToSubMemberPlayerServantArray_5__3 = this->fields._moveToSubMemberPlayerServantArray_5__3;
                      if ( !moveToSubMemberPlayerServantArray_5__3 )
                        goto LABEL_158;
                      if ( !*(_QWORD *)&moveToSubMemberPlayerServantArray_5__3->max_length )
                        goto LABEL_131;
                    }
                    if ( !_4__this )
                      goto LABEL_158;
                    v155 = _4__this->fields.data;
                    if ( !v155 )
                      goto LABEL_158;
                    BattleData__createCommandCard(v155, 0LL);
                    v156 = _4__this->fields.data;
                    if ( !v156 )
                      goto LABEL_158;
                    BattleData__shuffleCommand(v156, 0LL);
                    v157 = _4__this->fields.data;
                    if ( !v157 )
                      goto LABEL_158;
                    BattleData__CheckDoNotSelectCommandCard(v157, 0LL);
                    if ( !this->fields.isTactical )
                    {
LABEL_131:
                      *(_DWORD *)v166 = 0;
                      v159 = (Il2CppObject *)j_il2cpp_value_box_0(int_TypeInfo, v166);
                      this->fields.__2__current = v159;
                      v147 = &this->fields.__2__current;
                      sub_B16F98(v147, v159);
                      v148 = 3;
                      goto LABEL_132;
                    }
                    v158 = _4__this->fields.data;
                    if ( v158 )
                    {
                      if ( BattleData__checkAlivePlayers(v158, 0LL) )
                        BattleLogic__drawCommand(_4__this, 0LL);
                      goto LABEL_131;
                    }
                  }
                }
              }
            }
          }
        }
      }
LABEL_158:
      sub_B170D4();
    case 1:
      this->fields.__1__state = -1;
      goto LABEL_94;
    case 2:
      this->fields.__1__state = -1;
      goto LABEL_96;
    case 3:
      this->fields.__1__state = -1;
      if ( !_4__this )
        goto LABEL_158;
      v140 = _4__this->fields.data;
      if ( !v140 )
        goto LABEL_158;
      BattleData__RefreshAllSubServantDeckIndex(v140, 0LL);
      v141 = _4__this->fields.data;
      if ( !v141 )
        goto LABEL_158;
      BattleData__ClearRestockServantLogic(v141, 0LL);
      v142 = _4__this->fields.perf;
      if ( !v142 )
        goto LABEL_158;
      BattlePerformance__updateFov(v142, 0LL);
      fsm = _4__this->fields.fsm;
      if ( this->fields._isentry_5__4 )
      {
        if ( !fsm )
          goto LABEL_158;
        endproc = (System_String_o *)StringLiteral_9714;
      }
      else
      {
        if ( !fsm )
          goto LABEL_158;
        endproc = this->fields.endproc;
      }
      PlayMakerFSM__SendEvent(fsm, endproc, 0LL);
      return 0;
    default:
      return 0;
  }
}


Il2CppObject *__fastcall BattleLogic__coroutineEntrySubMember_d__79__System_Collections_Generic_IEnumerator_System_Object__get_Current(
        BattleLogic__coroutineEntrySubMember_d__79_o *this,
        const MethodInfo *method)
{
  return this->fields.__2__current;
}


void __fastcall __noreturn BattleLogic__coroutineEntrySubMember_d__79__System_Collections_IEnumerator_Reset(
        BattleLogic__coroutineEntrySubMember_d__79_o *this,
        const MethodInfo *method)
{
  __int64 v2; // x0
  __int64 v3; // x1
  __int64 v4; // x2
  __int64 v5; // x3
  __int64 v6; // x4
  System_NotSupportedException_o *v7; // x0
  __int64 v8; // x1

  v2 = sub_B17000(&System_NotSupportedException_TypeInfo, method);
  v7 = (System_NotSupportedException_o *)sub_B170CC(v2, v3, v4, v5, v6);
  System_NotSupportedException___ctor(v7, 0LL);
  sub_B17000(&Method_BattleLogic__coroutineEntrySubMember_d__79_System_Collections_IEnumerator_Reset__, v8);
  sub_B170A0();
}


Il2CppObject *__fastcall BattleLogic__coroutineEntrySubMember_d__79__System_Collections_IEnumerator_get_Current(
        BattleLogic__coroutineEntrySubMember_d__79_o *this,
        const MethodInfo *method)
{
  return this->fields.__2__current;
}


void __fastcall BattleLogic__coroutineEntrySubMember_d__79__System_IDisposable_Dispose(
        BattleLogic__coroutineEntrySubMember_d__79_o *this,
        const MethodInfo *method)
{
  ;
}


void __fastcall BattleLogic__coroutineImmediateEntrySubMember_d__81___ctor(
        BattleLogic__coroutineImmediateEntrySubMember_d__81_o *this,
        int32_t 1__state,
        const MethodInfo *method)
{
  System_Object___ctor((Il2CppObject *)this, 0LL);
  this->fields.__1__state = 1__state;
}


bool __fastcall BattleLogic__coroutineImmediateEntrySubMember_d__81__MoveNext(
        BattleLogic__coroutineImmediateEntrySubMember_d__81_o *this,
        const MethodInfo *method)
{
  __int64 v3; // x1
  __int64 v4; // x1
  __int64 v5; // x1
  __int64 v6; // x1
  __int64 v7; // x1
  __int64 v8; // x1
  __int64 v9; // x1
  __int64 v10; // x1
  __int64 v11; // x1
  __int64 v12; // x1
  __int64 v13; // x1
  int32_t _1__state; // w8
  struct BattleLogic_o *_4__this; // x19
  AssetManager_o *v16; // x0
  __int64 v17; // x1
  __int64 v18; // x2
  __int64 v19; // x3
  __int64 v20; // x4
  System_Collections_Generic_List_int__o *v21; // x22
  System_Collections_Generic_List_int__o **p_enemyDeckIndices_5__2; // x21
  BattleData_o *v23; // x1
  BattleData_o *RandomEntryOrderDecidedArray; // x0
  __int64 v25; // x1
  BattleData_o *v26; // x2
  struct PlayMakerFSM_o *rootfsm; // x8
  BattleData_o *v28; // x22
  int32_t v29; // w23
  unsigned __int64 j; // x25
  BattleData_o *v31; // x0
  __int64 v32; // x24
  BattleData_o *v33; // x0
  struct System_Boolean_array *enemyAppearValid; // x8
  BattleData_o *v35; // x0
  struct BattleData_o *v36; // x8
  Il2CppObject *v37; // x0
  Il2CppObject **v38; // x20
  bool result; // w0
  AssetManager_o *Instance; // x0
  Il2CppObject *v41; // x0
  Il2CppObject **p__2__current; // x20
  System_Collections_Generic_List_int__o *enemyDeckIndices_5__2; // x0
  BattlePerformance_o *perf; // x0
  BattleData_o *data; // x0
  System_Collections_Generic_List_Enumerator_int__o v46; // [xsp+8h] [xbp-88h] BYREF
  System_Collections_Generic_List_Enumerator_int__o i; // [xsp+20h] [xbp-70h] BYREF

  if ( (byte_40F8532 & 1) == 0 )
  {
    sub_B16FFC(&Method_System_Collections_Generic_List_Enumerator_int__Dispose__, method);
    sub_B16FFC(&Method_System_Collections_Generic_List_Enumerator_int__MoveNext__, v3);
    sub_B16FFC(&Method_System_Collections_Generic_List_Enumerator_int__get_Current__, v4);
    sub_B16FFC(&int_TypeInfo, v5);
    sub_B16FFC(&Method_System_Collections_Generic_List_int__Add__, v6);
    sub_B16FFC(&Method_System_Collections_Generic_List_int__GetEnumerator__, v7);
    sub_B16FFC(&Method_System_Collections_Generic_List_int___ctor__, v8);
    sub_B16FFC(&Method_System_Collections_Generic_List_int__get_Count__, v9);
    sub_B16FFC(&System_Collections_Generic_List_int__TypeInfo, v10);
    sub_B16FFC(&OptionManager_TypeInfo, v11);
    sub_B16FFC(&ServantAssetLoadManager_TypeInfo, v12);
    sub_B16FFC(&Method_SingletonMonoBehaviour_AssetManager__get_Instance__, v13);
    byte_40F8532 = 1;
  }
  memset(&i, 0, sizeof(i));
  _1__state = this->fields.__1__state;
  _4__this = this->fields.__4__this;
  switch ( _1__state )
  {
    case 2:
      this->fields.__1__state = -1;
LABEL_41:
      if ( (BYTE3(ServantAssetLoadManager_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0
        && !ServantAssetLoadManager_TypeInfo->_2.cctor_finished )
      {
        j_il2cpp_runtime_class_init_0(ServantAssetLoadManager_TypeInfo);
      }
      if ( ServantAssetLoadManager__checkLoad(0LL) )
      {
        LODWORD(v46.fields.list) = 0;
        v41 = (Il2CppObject *)j_il2cpp_value_box_0(int_TypeInfo, &v46);
        this->fields.__2__current = v41;
        p__2__current = &this->fields.__2__current;
        sub_B16F98(p__2__current, v41);
        *((_DWORD *)p__2__current - 2) = 2;
        return 1;
      }
      enemyDeckIndices_5__2 = this->fields._enemyDeckIndices_5__2;
      if ( enemyDeckIndices_5__2 )
      {
        System_Collections_Generic_List_int___GetEnumerator(
          (System_Collections_Generic_List_Enumerator_T__o *)&v46,
          enemyDeckIndices_5__2,
          (const MethodInfo_2F11334 *)Method_System_Collections_Generic_List_int__GetEnumerator__);
        for ( i = v46;
              System_Collections_Generic_List_Enumerator_int___MoveNext(
                &i,
                (const MethodInfo_2071AE8 *)Method_System_Collections_Generic_List_Enumerator_int__MoveNext__);
              BattlePerformance__loadEnemyActor(perf, i.fields.current, 0LL) )
        {
          if ( !_4__this )
            sub_B170D4();
          perf = _4__this->fields.perf;
          if ( !perf )
            sub_B170D4();
        }
        System_Collections_Generic_List_Enumerator_int___Dispose(
          &i,
          (const MethodInfo_2071AE4 *)Method_System_Collections_Generic_List_Enumerator_int__Dispose__);
        if ( _4__this )
        {
          data = _4__this->fields.data;
          if ( data )
          {
            BattleData__RefreshAllSubServantDeckIndex(data, 0LL);
            return 0;
          }
        }
      }
LABEL_57:
      sub_B170D4();
    case 1:
      this->fields.__1__state = -1;
LABEL_38:
      Instance = (AssetManager_o *)SingletonMonoBehaviour_WebViewManager___get_Instance((const MethodInfo_2A54F38 *)Method_SingletonMonoBehaviour_AssetManager__get_Instance__);
      if ( !Instance )
        goto LABEL_57;
      AssetManager__ResumeDownloadAssetStorage(Instance, 0LL);
      goto LABEL_41;
    case 0:
      this->fields.__1__state = -1;
      if ( !_4__this )
        goto LABEL_57;
      BattleLogic__UnloadDeadDeckActorsAndFreeEntry(_4__this, 1, 0LL);
      BattleLogic__UnloadMoveToSubMemberDeckActors(_4__this, 1, 0LL);
      v16 = (AssetManager_o *)SingletonMonoBehaviour_WebViewManager___get_Instance((const MethodInfo_2A54F38 *)Method_SingletonMonoBehaviour_AssetManager__get_Instance__);
      if ( !v16 )
        goto LABEL_57;
      AssetManager__PauseDownloadAssetStorage(v16, 0LL);
      v21 = (System_Collections_Generic_List_int__o *)sub_B170CC(
                                                        System_Collections_Generic_List_int__TypeInfo,
                                                        v17,
                                                        v18,
                                                        v19,
                                                        v20);
      System_Collections_Generic_List_int____ctor(
        v21,
        (const MethodInfo_2F0F794 *)Method_System_Collections_Generic_List_int___ctor__);
      this->fields._enemyDeckIndices_5__2 = v21;
      p_enemyDeckIndices_5__2 = &this->fields._enemyDeckIndices_5__2;
      sub_B16F98(&this->fields._enemyDeckIndices_5__2, v21);
      v23 = _4__this->fields.data;
      if ( !v23 )
        goto LABEL_57;
      RandomEntryOrderDecidedArray = (BattleData_o *)RestockServantLogic__GetRandomEntryOrderDecidedArray(
                                                       v23->fields._EnemyAddOrderPosArray_k__BackingField,
                                                       v23,
                                                       0LL);
      if ( !RandomEntryOrderDecidedArray )
        goto LABEL_57;
      rootfsm = RandomEntryOrderDecidedArray->fields.rootfsm;
      v28 = RandomEntryOrderDecidedArray;
      if ( (int)rootfsm >= 1 )
      {
        v29 = 0;
        for ( j = 0LL; (__int64)j < (int)rootfsm; ++j )
        {
          if ( j >= (unsigned int)rootfsm )
          {
LABEL_60:
            sub_B17100(RandomEntryOrderDecidedArray, v25, v26);
            sub_B170A0();
          }
          v31 = _4__this->fields.data;
          if ( !v31 )
            goto LABEL_57;
          v32 = *((int *)&v28->fields.fsm + j);
          if ( BattleData__IsEnemyEntryOverLimit(v31, 0LL) )
            break;
          v33 = _4__this->fields.data;
          if ( !v33 )
            goto LABEL_57;
          RandomEntryOrderDecidedArray = (BattleData_o *)BattleData__IsEntry(v33, v32, 1, 0LL);
          if ( ((unsigned __int8)RandomEntryOrderDecidedArray & 1) == 0 )
          {
            v26 = _4__this->fields.data;
            if ( !v26 )
              goto LABEL_57;
            enemyAppearValid = v26->fields.enemyAppearValid;
            if ( !enemyAppearValid )
              goto LABEL_57;
            if ( (unsigned int)v32 >= enemyAppearValid->max_length )
              goto LABEL_60;
            if ( enemyAppearValid->m_Items[v32 + 4] )
            {
              RandomEntryOrderDecidedArray = (BattleData_o *)RestockServantLogic__GetImmediateRestockServant(
                                                               v32,
                                                               1,
                                                               v26,
                                                               0LL);
              if ( RandomEntryOrderDecidedArray )
              {
                v26 = RandomEntryOrderDecidedArray;
                if ( !this->fields.isEventBonusCheck || BYTE2(RandomEntryOrderDecidedArray->fields.combodata) )
                {
                  BattleLogic__PreloadAndEntryServant(
                    _4__this,
                    v32,
                    (BattleServantData_o *)RandomEntryOrderDecidedArray,
                    v29,
                    0LL);
                  RestockServantLogic__DeactiveRestockLogic(v32, 1, _4__this->fields.data, 0LL);
                  if ( !*p_enemyDeckIndices_5__2 )
                    goto LABEL_57;
                  System_Collections_Generic_List_int___Add(
                    *p_enemyDeckIndices_5__2,
                    v32,
                    (const MethodInfo_2F104F0 *)Method_System_Collections_Generic_List_int__Add__);
                  v35 = _4__this->fields.data;
                  if ( !v35 )
                    goto LABEL_57;
                  ++v29;
                  BattleData__AddEnemyEntryCount(v35, 0LL);
                }
              }
            }
          }
          LODWORD(rootfsm) = v28->fields.rootfsm;
        }
      }
      if ( (BYTE3(OptionManager_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0
        && !OptionManager_TypeInfo->_2.cctor_finished )
      {
        j_il2cpp_runtime_class_init_0(OptionManager_TypeInfo);
      }
      if ( OptionManager__isSavedMemoryMode(0LL) )
        goto LABEL_36;
      if ( !*p_enemyDeckIndices_5__2 )
        goto LABEL_57;
      if ( (*p_enemyDeckIndices_5__2)->fields._size >= 1 )
      {
        v36 = _4__this->fields.data;
        if ( !v36 )
          goto LABEL_57;
        if ( v36->fields._IsReleaseUnusedAssetsWhenEntryMember_k__BackingField )
        {
LABEL_36:
          v37 = (Il2CppObject *)BattleLogic__UnloadUnusedAssetsAndWaitFinish(_4__this, 0LL);
          this->fields.__2__current = v37;
          v38 = &this->fields.__2__current;
          sub_B16F98(v38, v37);
          result = 1;
          *((_DWORD *)v38 - 2) = 1;
          return result;
        }
      }
      goto LABEL_38;
  }
  return 0;
}


Il2CppObject *__fastcall BattleLogic__coroutineImmediateEntrySubMember_d__81__System_Collections_Generic_IEnumerator_System_Object__get_Current(
        BattleLogic__coroutineImmediateEntrySubMember_d__81_o *this,
        const MethodInfo *method)
{
  return this->fields.__2__current;
}


void __fastcall __noreturn BattleLogic__coroutineImmediateEntrySubMember_d__81__System_Collections_IEnumerator_Reset(
        BattleLogic__coroutineImmediateEntrySubMember_d__81_o *this,
        const MethodInfo *method)
{
  __int64 v2; // x0
  __int64 v3; // x1
  __int64 v4; // x2
  __int64 v5; // x3
  __int64 v6; // x4
  System_NotSupportedException_o *v7; // x0
  __int64 v8; // x1

  v2 = sub_B17000(&System_NotSupportedException_TypeInfo, method);
  v7 = (System_NotSupportedException_o *)sub_B170CC(v2, v3, v4, v5, v6);
  System_NotSupportedException___ctor(v7, 0LL);
  sub_B17000(&Method_BattleLogic__coroutineImmediateEntrySubMember_d__81_System_Collections_IEnumerator_Reset__, v8);
  sub_B170A0();
}


Il2CppObject *__fastcall BattleLogic__coroutineImmediateEntrySubMember_d__81__System_Collections_IEnumerator_get_Current(
        BattleLogic__coroutineImmediateEntrySubMember_d__81_o *this,
        const MethodInfo *method)
{
  return this->fields.__2__current;
}


void __fastcall BattleLogic__coroutineImmediateEntrySubMember_d__81__System_IDisposable_Dispose(
        BattleLogic__coroutineImmediateEntrySubMember_d__81_o *this,
        const MethodInfo *method)
{
  ;
}


void __fastcall BattleLogic__coroutineInitQuest_d__316___ctor(
        BattleLogic__coroutineInitQuest_d__316_o *this,
        int32_t 1__state,
        const MethodInfo *method)
{
  System_Object___ctor((Il2CppObject *)this, 0LL);
  this->fields.__1__state = 1__state;
}


bool __fastcall BattleLogic__coroutineInitQuest_d__316__MoveNext(
        BattleLogic__coroutineInitQuest_d__316_o *this,
        const MethodInfo *method)
{
  int32_t _1__state; // w8
  struct BattleLogic_o *_4__this; // x20
  BattleData_o *data; // x0
  struct BattleData_o *v6; // x8
  struct BaseBattleEvent_o *battleEvent; // x0
  BattleData_o *v8; // x0
  struct BattleData_o *v9; // x8
  struct BaseBattleEvent_o *v10; // x0
  struct BattleData_o *v11; // x8
  struct BaseBattleEvent_o *v12; // x0
  bool v13; // w21
  System_Collections_IEnumerator_o *inited; // x0
  Il2CppObject *started; // x0
  Il2CppObject **p__2__current; // x19

  _1__state = this->fields.__1__state;
  _4__this = this->fields.__4__this;
  if ( _1__state == 1 )
  {
    this->fields.__1__state = -1;
    if ( !_4__this )
      goto LABEL_17;
    BattleLogic__sendFsmEvent(_4__this, this->fields.endproc, 0LL);
    return 0;
  }
  if ( _1__state )
    return 0;
  this->fields.__1__state = -1;
  if ( !_4__this )
    goto LABEL_17;
  data = _4__this->fields.data;
  if ( !data )
    goto LABEL_17;
  BattleData__initQuest(data, 0LL);
  v6 = _4__this->fields.data;
  if ( !v6 )
    goto LABEL_17;
  battleEvent = v6->fields.battleEvent;
  if ( !battleEvent )
    goto LABEL_17;
  ((void (__fastcall *)(struct BaseBattleEvent_o *, __int64, Il2CppMethodPointer))battleEvent->klass->vtable._10_SetServantDataBeforePassiveAdded.method)(
    battleEvent,
    1LL,
    battleEvent->klass->vtable._11_InitServantDataPrevAdd.methodPtr);
  BattleLogic__actPtPassiveSkill(_4__this, 1, 0LL);
  v8 = _4__this->fields.data;
  if ( !v8
    || (BattleData__AddMasterSkillDelayIfNeeded(v8, 0LL), (v9 = _4__this->fields.data) == 0LL)
    || (v10 = v9->fields.battleEvent) == 0LL
    || (((void (__fastcall *)(struct BaseBattleEvent_o *, Il2CppMethodPointer))v10->klass->vtable._12_InitPlayerMasterInfo.method)(
          v10,
          v10->klass->vtable._13_GetResultBgmId.methodPtr),
        (v11 = _4__this->fields.data) == 0LL)
    || (v12 = v11->fields.battleEvent) == 0LL )
  {
LABEL_17:
    sub_B170D4();
  }
  v13 = 1;
  ((void (__fastcall *)(struct BaseBattleEvent_o *, __int64, Il2CppMethodPointer))v12->klass->vtable._23_SetServantDataAfterPassiveAdded.method)(
    v12,
    1LL,
    v12->klass->vtable._24_GetProgressBuffTurnCond.methodPtr);
  inited = BattleLogic__CoroutineInitQuest(_4__this, 0LL, 0LL);
  started = (Il2CppObject *)UnityEngine_MonoBehaviour__StartCoroutine_34804316(
                              (UnityEngine_MonoBehaviour_o *)_4__this,
                              inited,
                              0LL);
  this->fields.__2__current = started;
  p__2__current = &this->fields.__2__current;
  sub_B16F98(p__2__current, started);
  *((_DWORD *)p__2__current - 2) = 1;
  return v13;
}


Il2CppObject *__fastcall BattleLogic__coroutineInitQuest_d__316__System_Collections_Generic_IEnumerator_System_Object__get_Current(
        BattleLogic__coroutineInitQuest_d__316_o *this,
        const MethodInfo *method)
{
  return this->fields.__2__current;
}


void __fastcall __noreturn BattleLogic__coroutineInitQuest_d__316__System_Collections_IEnumerator_Reset(
        BattleLogic__coroutineInitQuest_d__316_o *this,
        const MethodInfo *method)
{
  __int64 v2; // x0
  __int64 v3; // x1
  __int64 v4; // x2
  __int64 v5; // x3
  __int64 v6; // x4
  System_NotSupportedException_o *v7; // x0
  __int64 v8; // x1

  v2 = sub_B17000(&System_NotSupportedException_TypeInfo, method);
  v7 = (System_NotSupportedException_o *)sub_B170CC(v2, v3, v4, v5, v6);
  System_NotSupportedException___ctor(v7, 0LL);
  sub_B17000(&Method_BattleLogic__coroutineInitQuest_d__316_System_Collections_IEnumerator_Reset__, v8);
  sub_B170A0();
}


Il2CppObject *__fastcall BattleLogic__coroutineInitQuest_d__316__System_Collections_IEnumerator_get_Current(
        BattleLogic__coroutineInitQuest_d__316_o *this,
        const MethodInfo *method)
{
  return this->fields.__2__current;
}


void __fastcall BattleLogic__coroutineInitQuest_d__316__System_IDisposable_Dispose(
        BattleLogic__coroutineInitQuest_d__316_o *this,
        const MethodInfo *method)
{
  ;
}


void __fastcall BattleLogic__coroutineLoadNstage_d__321___ctor(
        BattleLogic__coroutineLoadNstage_d__321_o *this,
        int32_t 1__state,
        const MethodInfo *method)
{
  System_Object___ctor((Il2CppObject *)this, 0LL);
  this->fields.__1__state = 1__state;
}


bool __fastcall BattleLogic__coroutineLoadNstage_d__321__MoveNext(
        BattleLogic__coroutineLoadNstage_d__321_o *this,
        const MethodInfo *method)
{
  UnityEngine_MonoBehaviour_o *_4__this; // x20
  BattlePerformance_o *v4; // x0
  Il2CppObject **v5; // x19
  int v6; // w8
  BattlePerformance_o *klass; // x0
  Il2CppObject **p__2__current; // x19
  bool result; // w0
  BattlePerformance_o *v10; // x0
  System_Collections_IEnumerator_o *EnemyActor; // x0
  Il2CppObject *started; // x0
  BattlePerformance_o *v13; // x0
  UnityEngine_MonoBehaviour_c *v14; // x8

  if ( (byte_40F8533 & 1) == 0 )
  {
    sub_B16FFC(&ServantAssetLoadManager_TypeInfo, method);
    byte_40F8533 = 1;
  }
  _4__this = (UnityEngine_MonoBehaviour_o *)this->fields.__4__this;
  switch ( this->fields.__1__state )
  {
    case 0:
      this->fields.__1__state = -1;
      if ( !_4__this )
        goto LABEL_30;
      klass = (BattlePerformance_o *)_4__this[2].klass;
      if ( !klass )
        goto LABEL_30;
      BattlePerformance__LoadAssetsNStage(klass, 0LL);
LABEL_14:
      if ( (BYTE3(ServantAssetLoadManager_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0
        && !ServantAssetLoadManager_TypeInfo->_2.cctor_finished )
      {
        j_il2cpp_runtime_class_init_0(ServantAssetLoadManager_TypeInfo);
      }
      if ( ServantAssetLoadManager__checkLoad(0LL) )
      {
        this->fields.__2__current = 0LL;
        p__2__current = &this->fields.__2__current;
        sub_B16F98(p__2__current, 0LL);
        result = 1;
        *((_DWORD *)p__2__current - 2) = 1;
        return result;
      }
      if ( !_4__this )
        goto LABEL_30;
      v10 = (BattlePerformance_o *)_4__this[2].klass;
      if ( !v10 )
        goto LABEL_30;
      EnemyActor = BattlePerformance__coroutineLoadEnemyActor(v10, 0LL);
      started = (Il2CppObject *)UnityEngine_MonoBehaviour__StartCoroutine_34804316(_4__this, EnemyActor, 0LL);
      this->fields.__2__current = started;
      v5 = &this->fields.__2__current;
      sub_B16F98(v5, started);
      v6 = 2;
      goto LABEL_27;
    case 1:
      this->fields.__1__state = -1;
      goto LABEL_14;
    case 2:
    case 3:
      this->fields.__1__state = -1;
      if ( !_4__this )
        goto LABEL_30;
      v4 = (BattlePerformance_o *)_4__this[2].klass;
      if ( !v4 )
        goto LABEL_30;
      if ( BattlePerformance__checkLoad(v4, 0LL) )
      {
        this->fields.__2__current = 0LL;
        v5 = &this->fields.__2__current;
        sub_B16F98(v5, 0LL);
        v6 = 3;
LABEL_27:
        *((_DWORD *)v5 - 2) = v6;
        return 1;
      }
      v13 = (BattlePerformance_o *)_4__this[2].klass;
      if ( !v13 )
        goto LABEL_30;
      BattlePerformance__loadNStage(v13, 0LL);
LABEL_24:
      v14 = _4__this[2].klass;
      if ( !v14 )
LABEL_30:
        sub_B170D4();
      if ( BYTE1(v14[2]._1.fields) )
      {
        this->fields.__2__current = 0LL;
        v5 = &this->fields.__2__current;
        sub_B16F98(v5, 0LL);
        v6 = 4;
        goto LABEL_27;
      }
      ActionExtensions__Call(this->fields.finishCallback, 0LL);
      return 0;
    case 4:
      this->fields.__1__state = -1;
      if ( !_4__this )
        goto LABEL_30;
      goto LABEL_24;
    default:
      return 0;
  }
}


Il2CppObject *__fastcall BattleLogic__coroutineLoadNstage_d__321__System_Collections_Generic_IEnumerator_System_Object__get_Current(
        BattleLogic__coroutineLoadNstage_d__321_o *this,
        const MethodInfo *method)
{
  return this->fields.__2__current;
}


void __fastcall __noreturn BattleLogic__coroutineLoadNstage_d__321__System_Collections_IEnumerator_Reset(
        BattleLogic__coroutineLoadNstage_d__321_o *this,
        const MethodInfo *method)
{
  __int64 v2; // x0
  __int64 v3; // x1
  __int64 v4; // x2
  __int64 v5; // x3
  __int64 v6; // x4
  System_NotSupportedException_o *v7; // x0
  __int64 v8; // x1

  v2 = sub_B17000(&System_NotSupportedException_TypeInfo, method);
  v7 = (System_NotSupportedException_o *)sub_B170CC(v2, v3, v4, v5, v6);
  System_NotSupportedException___ctor(v7, 0LL);
  sub_B17000(&Method_BattleLogic__coroutineLoadNstage_d__321_System_Collections_IEnumerator_Reset__, v8);
  sub_B170A0();
}


Il2CppObject *__fastcall BattleLogic__coroutineLoadNstage_d__321__System_Collections_IEnumerator_get_Current(
        BattleLogic__coroutineLoadNstage_d__321_o *this,
        const MethodInfo *method)
{
  return this->fields.__2__current;
}


void __fastcall BattleLogic__coroutineLoadNstage_d__321__System_IDisposable_Dispose(
        BattleLogic__coroutineLoadNstage_d__321_o *this,
        const MethodInfo *method)
{
  ;
}


void __fastcall BattleLogic__coroutineLoadSaveWave_d__323___ctor(
        BattleLogic__coroutineLoadSaveWave_d__323_o *this,
        int32_t 1__state,
        const MethodInfo *method)
{
  System_Object___ctor((Il2CppObject *)this, 0LL);
  this->fields.__1__state = 1__state;
}


bool __fastcall BattleLogic__coroutineLoadSaveWave_d__323__MoveNext(
        BattleLogic__coroutineLoadSaveWave_d__323_o *this,
        const MethodInfo *method)
{
  int32_t _1__state; // w8
  struct BattleLogic_o *_4__this; // x19
  System_Collections_IEnumerator_o *Nstage; // x0
  Il2CppObject *started; // x0
  Il2CppObject **p__2__current; // x20
  bool result; // w0
  BattleData_o *data; // x0
  BattleServantData_o *FieldPlayerServantList; // x0
  __int64 v11; // x1
  __int64 v12; // x2
  __int64 v13; // x8
  BattleServantData_o *v14; // x20
  unsigned __int64 v15; // x22
  int uniqueId; // w8
  BattleServantData_o *v17; // x21
  unsigned int v18; // w24
  BattleSkillInfoData_o *v19; // x0
  struct BattleData_o *v20; // x8
  BattleData_o *v21; // x0
  int v22; // w8
  BattleServantData_o *v23; // x20
  unsigned int v24; // w21
  BattleServantData_o *v25; // x0
  PlayMakerFSM_o *fsm; // x0

  if ( (byte_40F8534 & 1) == 0 )
  {
    sub_B16FFC(&StringLiteral_5481, method);
    byte_40F8534 = 1;
  }
  _1__state = this->fields.__1__state;
  _4__this = this->fields.__4__this;
  if ( _1__state == 1 )
  {
    this->fields.__1__state = -1;
    BattleRandom__adjustment(0LL);
    if ( !_4__this )
      goto LABEL_38;
    data = _4__this->fields.data;
    if ( !data )
      goto LABEL_38;
    if ( data->fields.tutorialId != 2 || data->fields.turnCount != 2 || data->fields.wavecount )
      goto LABEL_28;
    FieldPlayerServantList = (BattleServantData_o *)BattleData__getFieldPlayerServantList(data, 0LL);
    if ( !FieldPlayerServantList )
      goto LABEL_38;
    v13 = *(_QWORD *)&FieldPlayerServantList->fields.uniqueId;
    v14 = FieldPlayerServantList;
    if ( (int)v13 >= 1 )
    {
      v15 = 0LL;
      while ( v15 < (unsigned int)v13 )
      {
        FieldPlayerServantList = (BattleServantData_o *)*(&v14->fields.userSvtId.fields.currentCryptoKey + v15);
        if ( FieldPlayerServantList )
        {
          FieldPlayerServantList = (BattleServantData_o *)BattleServantData__getActiveSkillInfos(
                                                            FieldPlayerServantList,
                                                            0LL);
          if ( !FieldPlayerServantList )
            goto LABEL_38;
          uniqueId = FieldPlayerServantList->fields.uniqueId;
          v17 = FieldPlayerServantList;
          if ( uniqueId >= 1 )
          {
            v18 = 0;
            while ( 1 )
            {
              if ( v18 >= uniqueId )
                goto LABEL_39;
              v19 = (BattleSkillInfoData_o *)*(&v17->fields.userSvtId.fields.currentCryptoKey + (int)v18);
              if ( !v19 )
                goto LABEL_38;
              FieldPlayerServantList = (BattleServantData_o *)BattleSkillInfoData__getChargeTurn(v19, 0LL);
              if ( (int)FieldPlayerServantList >= 1 )
                break;
              uniqueId = v17->fields.uniqueId;
              if ( (int)++v18 >= uniqueId )
                goto LABEL_27;
            }
            v20 = _4__this->fields.data;
            if ( !v20 )
              goto LABEL_38;
            v20->fields.tutorialState = 10;
          }
        }
LABEL_27:
        LODWORD(v13) = v14->fields.uniqueId;
        if ( (__int64)++v15 >= (int)v13 )
          goto LABEL_28;
      }
    }
    else
    {
LABEL_28:
      BattleLogic__updateEnemyTargetLogic(_4__this, 0LL);
      v21 = _4__this->fields.data;
      if ( !v21 )
        goto LABEL_38;
      FieldPlayerServantList = (BattleServantData_o *)BattleData__getFieldServantList(v21, 0, 0LL);
      if ( !FieldPlayerServantList )
        goto LABEL_38;
      v22 = FieldPlayerServantList->fields.uniqueId;
      v23 = FieldPlayerServantList;
      if ( v22 < 1 )
      {
LABEL_35:
        fsm = _4__this->fields.fsm;
        if ( !fsm )
          goto LABEL_38;
        PlayMakerFSM__SendEvent(fsm, (System_String_o *)StringLiteral_5481, 0LL);
        return 0;
      }
      v24 = 0;
      while ( v24 < v22 )
      {
        v25 = (BattleServantData_o *)*(&v23->fields.userSvtId.fields.currentCryptoKey + (int)v24);
        if ( !v25 )
          goto LABEL_38;
        BattleServantData__updateBuff(v25, 1, 1, 0LL);
        v22 = v23->fields.uniqueId;
        if ( (int)++v24 >= v22 )
          goto LABEL_35;
      }
    }
LABEL_39:
    sub_B17100(FieldPlayerServantList, v11, v12);
    sub_B170A0();
  }
  if ( !_1__state )
  {
    this->fields.__1__state = -1;
    if ( _4__this )
    {
      Nstage = BattleLogic__coroutineLoadNstage(_4__this, 0LL, 0LL);
      started = (Il2CppObject *)UnityEngine_MonoBehaviour__StartCoroutine_34804316(
                                  (UnityEngine_MonoBehaviour_o *)_4__this,
                                  Nstage,
                                  0LL);
      this->fields.__2__current = started;
      p__2__current = &this->fields.__2__current;
      sub_B16F98(p__2__current, started);
      result = 1;
      *((_DWORD *)p__2__current - 2) = 1;
      return result;
    }
LABEL_38:
    sub_B170D4();
  }
  return 0;
}


Il2CppObject *__fastcall BattleLogic__coroutineLoadSaveWave_d__323__System_Collections_Generic_IEnumerator_System_Object__get_Current(
        BattleLogic__coroutineLoadSaveWave_d__323_o *this,
        const MethodInfo *method)
{
  return this->fields.__2__current;
}


void __fastcall __noreturn BattleLogic__coroutineLoadSaveWave_d__323__System_Collections_IEnumerator_Reset(
        BattleLogic__coroutineLoadSaveWave_d__323_o *this,
        const MethodInfo *method)
{
  __int64 v2; // x0
  __int64 v3; // x1
  __int64 v4; // x2
  __int64 v5; // x3
  __int64 v6; // x4
  System_NotSupportedException_o *v7; // x0
  __int64 v8; // x1

  v2 = sub_B17000(&System_NotSupportedException_TypeInfo, method);
  v7 = (System_NotSupportedException_o *)sub_B170CC(v2, v3, v4, v5, v6);
  System_NotSupportedException___ctor(v7, 0LL);
  sub_B17000(&Method_BattleLogic__coroutineLoadSaveWave_d__323_System_Collections_IEnumerator_Reset__, v8);
  sub_B170A0();
}


Il2CppObject *__fastcall BattleLogic__coroutineLoadSaveWave_d__323__System_Collections_IEnumerator_get_Current(
        BattleLogic__coroutineLoadSaveWave_d__323_o *this,
        const MethodInfo *method)
{
  return this->fields.__2__current;
}


void __fastcall BattleLogic__coroutineLoadSaveWave_d__323__System_IDisposable_Dispose(
        BattleLogic__coroutineLoadSaveWave_d__323_o *this,
        const MethodInfo *method)
{
  ;
}


void __fastcall BattleLogic__coroutineStartLimitTurnTutorial_d__308___ctor(
        BattleLogic__coroutineStartLimitTurnTutorial_d__308_o *this,
        int32_t 1__state,
        const MethodInfo *method)
{
  System_Object___ctor((Il2CppObject *)this, 0LL);
  this->fields.__1__state = 1__state;
}


bool __fastcall BattleLogic__coroutineStartLimitTurnTutorial_d__308__MoveNext(
        BattleLogic__coroutineStartLimitTurnTutorial_d__308_o *this,
        const MethodInfo *method)
{
  __int64 v3; // x1
  __int64 v4; // x1
  __int64 v5; // x1
  __int64 v6; // x1
  Il2CppObject *_4__this; // x19
  Il2CppClass *klass; // x8
  UnityEngine_Object_o *v9; // x21
  Il2CppObject *v10; // x0
  Il2CppObject **p__2__current; // x20
  bool result; // w0
  Il2CppClass *v13; // x8
  UnityEngine_GameObject_o *v14; // x0
  Firebase_Unity_UnitySynchronizationContext_SynchronizationContextBehavoir_o *v15; // x20
  __int64 v16; // x1
  __int64 v17; // x2
  __int64 v18; // x3
  __int64 v19; // x4
  BattleEventTutorial_o *v20; // x20
  System_Action_o *v21; // x21
  int v22; // [xsp+Ch] [xbp-24h] BYREF

  if ( (byte_40F8535 & 1) == 0 )
  {
    sub_B16FFC(&System_Action_TypeInfo, method);
    sub_B16FFC(&Method_BattleLogic_callbackResumeLimitTurnEffect__, v3);
    sub_B16FFC(&Method_UnityEngine_GameObject_AddComponent_BattleRaidTurnStartEffect___, v4);
    sub_B16FFC(&int_TypeInfo, v5);
    sub_B16FFC(&UnityEngine_Object_TypeInfo, v6);
    byte_40F8535 = 1;
  }
  if ( this->fields.__1__state >= 2u )
    return 0;
  _4__this = (Il2CppObject *)this->fields.__4__this;
  this->fields.__1__state = -1;
  if ( !_4__this )
    goto LABEL_23;
  klass = _4__this[3].klass;
  if ( !klass )
    goto LABEL_23;
  v9 = (UnityEngine_Object_o *)klass->vtable[32].method;
  if ( (BYTE3(UnityEngine_Object_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0
    && !UnityEngine_Object_TypeInfo->_2.cctor_finished )
  {
    j_il2cpp_runtime_class_init_0(UnityEngine_Object_TypeInfo);
  }
  if ( UnityEngine_Object__op_Equality(v9, 0LL, 0LL) )
  {
    v22 = 0;
    v10 = (Il2CppObject *)j_il2cpp_value_box_0(int_TypeInfo, &v22);
    this->fields.__2__current = v10;
    p__2__current = &this->fields.__2__current;
    sub_B16F98(p__2__current, v10);
    result = 1;
    *((_DWORD *)p__2__current - 2) = 1;
    return result;
  }
  v13 = _4__this[3].klass;
  if ( !v13 )
    goto LABEL_23;
  v14 = (UnityEngine_GameObject_o *)v13->vtable[32].method;
  if ( !v14 )
    goto LABEL_23;
  v15 = UnityEngine_GameObject__AddComponent_UnitySynchronizationContext_SynchronizationContextBehavoir_(
          v14,
          (const MethodInfo_19D13E4 *)Method_UnityEngine_GameObject_AddComponent_BattleRaidTurnStartEffect___);
  if ( (BYTE3(UnityEngine_Object_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0
    && !UnityEngine_Object_TypeInfo->_2.cctor_finished )
  {
    j_il2cpp_runtime_class_init_0(UnityEngine_Object_TypeInfo);
  }
  if ( UnityEngine_Object__op_Inequality((UnityEngine_Object_o *)v15, 0LL, 0LL) )
  {
    if ( !v15 )
      goto LABEL_23;
    LOBYTE(v15->fields.callbackQueue) = 1;
  }
  v20 = (BattleEventTutorial_o *)_4__this[4].klass;
  v21 = (System_Action_o *)sub_B170CC(System_Action_TypeInfo, v16, v17, v18, v19);
  System_Action___ctor(v21, _4__this, Method_BattleLogic_callbackResumeLimitTurnEffect__, 0LL);
  if ( !v20 )
LABEL_23:
    sub_B170D4();
  BattleEventTutorial__callTurn(v20, v21, 0LL);
  return 0;
}


Il2CppObject *__fastcall BattleLogic__coroutineStartLimitTurnTutorial_d__308__System_Collections_Generic_IEnumerator_System_Object__get_Current(
        BattleLogic__coroutineStartLimitTurnTutorial_d__308_o *this,
        const MethodInfo *method)
{
  return this->fields.__2__current;
}


void __fastcall __noreturn BattleLogic__coroutineStartLimitTurnTutorial_d__308__System_Collections_IEnumerator_Reset(
        BattleLogic__coroutineStartLimitTurnTutorial_d__308_o *this,
        const MethodInfo *method)
{
  __int64 v2; // x0
  __int64 v3; // x1
  __int64 v4; // x2
  __int64 v5; // x3
  __int64 v6; // x4
  System_NotSupportedException_o *v7; // x0
  __int64 v8; // x1

  v2 = sub_B17000(&System_NotSupportedException_TypeInfo, method);
  v7 = (System_NotSupportedException_o *)sub_B170CC(v2, v3, v4, v5, v6);
  System_NotSupportedException___ctor(v7, 0LL);
  sub_B17000(&Method_BattleLogic__coroutineStartLimitTurnTutorial_d__308_System_Collections_IEnumerator_Reset__, v8);
  sub_B170A0();
}


Il2CppObject *__fastcall BattleLogic__coroutineStartLimitTurnTutorial_d__308__System_Collections_IEnumerator_get_Current(
        BattleLogic__coroutineStartLimitTurnTutorial_d__308_o *this,
        const MethodInfo *method)
{
  return this->fields.__2__current;
}


void __fastcall BattleLogic__coroutineStartLimitTurnTutorial_d__308__System_IDisposable_Dispose(
        BattleLogic__coroutineStartLimitTurnTutorial_d__308_o *this,
        const MethodInfo *method)
{
  ;
}


void __fastcall BattleLogic__dropItemCoroutine_d__192___ctor(
        BattleLogic__dropItemCoroutine_d__192_o *this,
        int32_t 1__state,
        const MethodInfo *method)
{
  System_Object___ctor((Il2CppObject *)this, 0LL);
  this->fields.__1__state = 1__state;
}


bool __fastcall BattleLogic__dropItemCoroutine_d__192__MoveNext(
        BattleLogic__dropItemCoroutine_d__192_o *this,
        const MethodInfo *method)
{
  __int64 v3; // x1
  __int64 v4; // x1
  struct BattleLogic_o *_4__this; // x20
  struct BattleData_o *data; // x8
  BattlePerformance_o *perf; // x0
  struct BattlePerformance_o *v8; // x8
  UnityEngine_Object_o *actioncamera; // x21
  struct BattlePerformance_o *v10; // x8
  BattleActionCamera_o *v11; // x0
  __int64 v12; // x1
  __int64 v13; // x2
  __int64 v14; // x3
  __int64 v15; // x4
  UnityEngine_WaitForSeconds_o *v16; // x20
  Il2CppObject **p__2__current; // x19
  System_Action_o *callback; // x0
  BattlePerformance_o *v19; // x0
  BattlePerformance_o *v20; // x0
  __int64 v21; // x1
  __int64 v22; // x2
  __int64 v23; // x3
  __int64 v24; // x4
  UnityEngine_WaitForSeconds_o *v25; // x20
  Il2CppObject **v26; // x19
  int v27; // w8
  __int64 v28; // x1
  __int64 v29; // x2
  __int64 v30; // x3
  __int64 v31; // x4
  UnityEngine_WaitForSeconds_o *v32; // x20

  if ( (byte_40F8536 & 1) == 0 )
  {
    sub_B16FFC(&UnityEngine_Object_TypeInfo, method);
    sub_B16FFC(&UnityEngine_WaitForSeconds_TypeInfo, v3);
    sub_B16FFC(&StringLiteral_12199, v4);
    byte_40F8536 = 1;
  }
  _4__this = this->fields.__4__this;
  switch ( this->fields.__1__state )
  {
    case 0:
      this->fields.__1__state = -1;
      if ( !_4__this )
        goto LABEL_28;
      data = _4__this->fields.data;
      if ( !data )
        goto LABEL_28;
      perf = _4__this->fields.perf;
      if ( !perf )
        goto LABEL_28;
      BattlePerformance__SetTimeScale(perf, (float)data->fields.systemflg_acceleration, 0LL);
      v8 = _4__this->fields.perf;
      if ( !v8 )
        goto LABEL_28;
      actioncamera = (UnityEngine_Object_o *)v8->fields.actioncamera;
      if ( (BYTE3(UnityEngine_Object_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0
        && !UnityEngine_Object_TypeInfo->_2.cctor_finished )
      {
        j_il2cpp_runtime_class_init_0(UnityEngine_Object_TypeInfo);
      }
      if ( UnityEngine_Object__op_Inequality(actioncamera, 0LL, 0LL) )
      {
        v10 = _4__this->fields.perf;
        if ( v10 )
        {
          v11 = v10->fields.actioncamera;
          if ( v11 )
          {
            BattleActionCamera__sendMainEvent(v11, (System_String_o *)StringLiteral_12199, 0LL);
            v16 = (UnityEngine_WaitForSeconds_o *)sub_B170CC(UnityEngine_WaitForSeconds_TypeInfo, v12, v13, v14, v15);
            UnityEngine_WaitForSeconds___ctor(v16, 0.5, 0LL);
            this->fields.__2__current = (Il2CppObject *)v16;
            p__2__current = &this->fields.__2__current;
            sub_B16F98(p__2__current, v16);
            LOBYTE(callback) = 1;
            *((_DWORD *)p__2__current - 2) = 1;
            return (char)callback;
          }
        }
LABEL_28:
        sub_B170D4();
      }
LABEL_25:
      BattleLogic__EnemyDropItem(_4__this, 0LL);
      v32 = (UnityEngine_WaitForSeconds_o *)sub_B170CC(UnityEngine_WaitForSeconds_TypeInfo, v28, v29, v30, v31);
      UnityEngine_WaitForSeconds___ctor(v32, 2.0, 0LL);
      this->fields.__2__current = (Il2CppObject *)v32;
      v26 = &this->fields.__2__current;
      sub_B16F98(v26, v32);
      v27 = 2;
      goto LABEL_26;
    case 1:
      this->fields.__1__state = -1;
      if ( _4__this )
        goto LABEL_25;
      goto LABEL_28;
    case 2:
      this->fields.__1__state = -1;
      if ( !_4__this )
        goto LABEL_28;
      v19 = _4__this->fields.perf;
      if ( !v19 )
        goto LABEL_28;
      if ( BattlePerformance__IsItemDrop(v19, 0LL) )
      {
        v20 = _4__this->fields.perf;
        if ( !v20 )
          goto LABEL_28;
        BattlePerformance__startMovePopObject(v20, 0LL);
        v25 = (UnityEngine_WaitForSeconds_o *)sub_B170CC(UnityEngine_WaitForSeconds_TypeInfo, v21, v22, v23, v24);
        UnityEngine_WaitForSeconds___ctor(v25, 0.5, 0LL);
        this->fields.__2__current = (Il2CppObject *)v25;
        v26 = &this->fields.__2__current;
        sub_B16F98(v26, v25);
        v27 = 3;
LABEL_26:
        *((_DWORD *)v26 - 2) = v27;
        LOBYTE(callback) = 1;
        return (char)callback;
      }
LABEL_21:
      callback = this->fields.callback;
      if ( callback )
      {
        System_Action__Invoke(callback, 0LL);
LABEL_23:
        LOBYTE(callback) = 0;
      }
      return (char)callback;
    case 3:
      this->fields.__1__state = -1;
      goto LABEL_21;
    default:
      goto LABEL_23;
  }
}


Il2CppObject *__fastcall BattleLogic__dropItemCoroutine_d__192__System_Collections_Generic_IEnumerator_System_Object__get_Current(
        BattleLogic__dropItemCoroutine_d__192_o *this,
        const MethodInfo *method)
{
  return this->fields.__2__current;
}


void __fastcall __noreturn BattleLogic__dropItemCoroutine_d__192__System_Collections_IEnumerator_Reset(
        BattleLogic__dropItemCoroutine_d__192_o *this,
        const MethodInfo *method)
{
  __int64 v2; // x0
  __int64 v3; // x1
  __int64 v4; // x2
  __int64 v5; // x3
  __int64 v6; // x4
  System_NotSupportedException_o *v7; // x0
  __int64 v8; // x1

  v2 = sub_B17000(&System_NotSupportedException_TypeInfo, method);
  v7 = (System_NotSupportedException_o *)sub_B170CC(v2, v3, v4, v5, v6);
  System_NotSupportedException___ctor(v7, 0LL);
  sub_B17000(&Method_BattleLogic__dropItemCoroutine_d__192_System_Collections_IEnumerator_Reset__, v8);
  sub_B170A0();
}


Il2CppObject *__fastcall BattleLogic__dropItemCoroutine_d__192__System_Collections_IEnumerator_get_Current(
        BattleLogic__dropItemCoroutine_d__192_o *this,
        const MethodInfo *method)
{
  return this->fields.__2__current;
}


void __fastcall BattleLogic__dropItemCoroutine_d__192__System_IDisposable_Dispose(
        BattleLogic__dropItemCoroutine_d__192_o *this,
        const MethodInfo *method)
{
  ;
}


void __fastcall BattleLogic__endCommandSpellCoroutine_d__256___ctor(
        BattleLogic__endCommandSpellCoroutine_d__256_o *this,
        int32_t 1__state,
        const MethodInfo *method)
{
  System_Object___ctor((Il2CppObject *)this, 0LL);
  this->fields.__1__state = 1__state;
}


bool __fastcall BattleLogic__endCommandSpellCoroutine_d__256__MoveNext(
        BattleLogic__endCommandSpellCoroutine_d__256_o *this,
        const MethodInfo *method)
{
  __int64 v3; // x1
  __int64 v4; // x1
  int32_t _1__state; // w8
  struct BattleLogic_o *_4__this; // x19
  BattleData_o *data; // x0
  BattlePerformance_c *v8; // x0
  BattlePerformance_o *perf; // x0
  BattlePerformance_o *v10; // x0
  struct BattlePerformance_o *v11; // x8
  UserGameEntity_o *SelfUserGame; // x0
  int32_t SpellImageIdBattle; // w0
  System_String_o *CommandSpellAssetName; // x20
  BattlePerformance_o *v15; // x0
  PlayMakerFSM_o *fsm; // x0
  bool result; // w0
  Il2CppObject **p__2__current; // x20

  if ( (byte_40F8537 & 1) == 0 )
  {
    sub_B16FFC(&AssetManager_TypeInfo, method);
    sub_B16FFC(&BattlePerformance_TypeInfo, v3);
    sub_B16FFC(&StringLiteral_5481, v4);
    byte_40F8537 = 1;
  }
  _1__state = this->fields.__1__state;
  _4__this = this->fields.__4__this;
  if ( _1__state == 1 )
  {
    this->fields.__1__state = -1;
  }
  else
  {
    if ( _1__state )
      return 0;
    this->fields.__1__state = -1;
    if ( !_4__this || (data = _4__this->fields.data) == 0LL )
LABEL_26:
      sub_B170D4();
    BattleData__SaveTurnData(data, 0LL);
  }
  v8 = BattlePerformance_TypeInfo;
  if ( (BYTE3(BattlePerformance_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0
    && !BattlePerformance_TypeInfo->_2.cctor_finished )
  {
    j_il2cpp_runtime_class_init_0(BattlePerformance_TypeInfo);
    v8 = BattlePerformance_TypeInfo;
  }
  if ( v8->static_fields->isAnyVoiceFinish )
  {
    if ( _4__this )
    {
      perf = _4__this->fields.perf;
      if ( perf )
      {
        BattlePerformance__updateCommandCard(perf, 0LL);
        v10 = _4__this->fields.perf;
        if ( v10 )
        {
          BattlePerformance__checkRedrawCommandCard(v10, 0LL);
          v11 = _4__this->fields.perf;
          if ( v11 )
          {
            v11->fields.isTargetChange = 1;
            SelfUserGame = UserGameMaster__getSelfUserGame(0LL);
            if ( SelfUserGame )
            {
              SpellImageIdBattle = UserGameEntity__get_SpellImageIdBattle(SelfUserGame, 0LL);
              CommandSpellAssetName = BattleLogic__GetCommandSpellAssetName(_4__this, SpellImageIdBattle, 0LL);
              if ( (BYTE3(AssetManager_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0
                && !AssetManager_TypeInfo->_2.cctor_finished )
              {
                j_il2cpp_runtime_class_init_0(AssetManager_TypeInfo);
              }
              AssetManager__releaseAssetStorage(CommandSpellAssetName, 0LL);
              v15 = _4__this->fields.perf;
              if ( v15 )
              {
                BattlePerformance__endCommandSpell(v15, 0LL);
                fsm = _4__this->fields.fsm;
                if ( fsm )
                {
                  PlayMakerFSM__SendEvent(fsm, (System_String_o *)StringLiteral_5481, 0LL);
                  return 0;
                }
              }
            }
          }
        }
      }
    }
    goto LABEL_26;
  }
  this->fields.__2__current = 0LL;
  p__2__current = &this->fields.__2__current;
  sub_B16F98(p__2__current, 0LL);
  result = 1;
  *((_DWORD *)p__2__current - 2) = 1;
  return result;
}


Il2CppObject *__fastcall BattleLogic__endCommandSpellCoroutine_d__256__System_Collections_Generic_IEnumerator_System_Object__get_Current(
        BattleLogic__endCommandSpellCoroutine_d__256_o *this,
        const MethodInfo *method)
{
  return this->fields.__2__current;
}


void __fastcall __noreturn BattleLogic__endCommandSpellCoroutine_d__256__System_Collections_IEnumerator_Reset(
        BattleLogic__endCommandSpellCoroutine_d__256_o *this,
        const MethodInfo *method)
{
  __int64 v2; // x0
  __int64 v3; // x1
  __int64 v4; // x2
  __int64 v5; // x3
  __int64 v6; // x4
  System_NotSupportedException_o *v7; // x0
  __int64 v8; // x1

  v2 = sub_B17000(&System_NotSupportedException_TypeInfo, method);
  v7 = (System_NotSupportedException_o *)sub_B170CC(v2, v3, v4, v5, v6);
  System_NotSupportedException___ctor(v7, 0LL);
  sub_B17000(&Method_BattleLogic__endCommandSpellCoroutine_d__256_System_Collections_IEnumerator_Reset__, v8);
  sub_B170A0();
}


Il2CppObject *__fastcall BattleLogic__endCommandSpellCoroutine_d__256__System_Collections_IEnumerator_get_Current(
        BattleLogic__endCommandSpellCoroutine_d__256_o *this,
        const MethodInfo *method)
{
  return this->fields.__2__current;
}


void __fastcall BattleLogic__endCommandSpellCoroutine_d__256__System_IDisposable_Dispose(
        BattleLogic__endCommandSpellCoroutine_d__256_o *this,
        const MethodInfo *method)
{
  ;
}


void __fastcall BattleLogic__startCommandIE_d__203___ctor(
        BattleLogic__startCommandIE_d__203_o *this,
        int32_t 1__state,
        const MethodInfo *method)
{
  System_Object___ctor((Il2CppObject *)this, 0LL);
  this->fields.__1__state = 1__state;
}


bool __fastcall BattleLogic__startCommandIE_d__203__MoveNext(
        BattleLogic__startCommandIE_d__203_o *this,
        const MethodInfo *method)
{
  __int64 v3; // x1
  __int64 v4; // x1
  __int64 v5; // x1
  __int64 v6; // x1
  __int64 v7; // x1
  __int64 v8; // x1
  int32_t _1__state; // w8
  Il2CppObject *v10; // x0
  bool result; // w0
  struct BattleLogic_o *_4__this; // x23
  BattlePerformance_o *perf; // x0
  System_Collections_Generic_IEnumerable_T__o *BaseCommandCardData; // x21
  __int64 v15; // x1
  __int64 v16; // x2
  __int64 v17; // x3
  __int64 v18; // x4
  System_Collections_Generic_List_WarBoardAIRoute_RouteData__o *v19; // x20
  BattlePerformance_o *v20; // x0
  BattlePerformance_o *v21; // x0
  BattlePerformance_o *v22; // x0
  BattleData_o *data; // x0
  BattleServantData_array *FieldPlayerServantList; // x0
  __int64 v25; // x1
  __int64 v26; // x2
  int max_length; // w8
  BattleServantData_array *v28; // x21
  unsigned int v29; // w24
  Il2CppClass **v30; // x27
  BattleServantData_o *v31; // x0
  BattleServantData_o **v32; // x27
  BattleServantData_o *v33; // t1
  __int64 v34; // x1
  __int64 v35; // x2
  __int64 v36; // x3
  __int64 v37; // x4
  BattleCommandData_o *v38; // x22
  const MethodInfo_2F25CD8 *v39; // x2
  System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData__o *v40; // x0
  EventMissionProgressRequest_Argument_ProgressData_o *v41; // x1
  BattlePerformance_o *v42; // x21
  BattleCommandData_array *v43; // x0
  struct BattleData_o *v44; // x8
  CommonUI_o *Instance; // x0
  PlayMakerFSM_o *fsm; // x0
  int v47; // [xsp+Ch] [xbp-44h] BYREF

  if ( (byte_40F8538 & 1) == 0 )
  {
    sub_B16FFC(&BattleCommandData_TypeInfo, method);
    sub_B16FFC(&int_TypeInfo, v3);
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleCommandData__Add__, v4);
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleCommandData__ToArray__, v5);
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleCommandData___ctor___66726344, v6);
    sub_B16FFC(&System_Collections_Generic_List_BattleCommandData__TypeInfo, v7);
    sub_B16FFC(&Method_SingletonMonoBehaviour_CommonUI__get_Instance__, v8);
    byte_40F8538 = 1;
  }
  _1__state = this->fields.__1__state;
  if ( _1__state == 1 )
  {
    _4__this = this->fields.__4__this;
    this->fields.__1__state = -1;
    if ( !_4__this )
      goto LABEL_49;
    perf = _4__this->fields.perf;
    if ( !perf )
      goto LABEL_49;
    BaseCommandCardData = (System_Collections_Generic_IEnumerable_T__o *)BattlePerformance__GetBaseCommandCardData(
                                                                           perf,
                                                                           0LL);
    v19 = (System_Collections_Generic_List_WarBoardAIRoute_RouteData__o *)sub_B170CC(
                                                                            System_Collections_Generic_List_BattleCommandData__TypeInfo,
                                                                            v15,
                                                                            v16,
                                                                            v17,
                                                                            v18);
    System_Collections_Generic_List_WarBoardAIRoute_RouteData____ctor(
      v19,
      BaseCommandCardData,
      (const MethodInfo_2F2520C *)Method_System_Collections_Generic_List_BattleCommandData___ctor___66726344);
    v20 = _4__this->fields.perf;
    if ( !v20 )
      goto LABEL_49;
    BattlePerformance__closeSelectSvtWindow(v20, 0LL);
    v21 = _4__this->fields.perf;
    if ( !v21 )
      goto LABEL_49;
    BattlePerformance__closeSelectMainSubSvtWindow(v21, 0LL);
    v22 = _4__this->fields.perf;
    if ( !v22 )
      goto LABEL_49;
    BattlePerformance__closeSelectCommandTypeWindow(v22, 0LL);
    data = _4__this->fields.data;
    if ( !data )
      goto LABEL_49;
    FieldPlayerServantList = BattleData__getFieldPlayerServantList(data, 0LL);
    if ( !FieldPlayerServantList )
      goto LABEL_49;
    max_length = FieldPlayerServantList->max_length;
    v28 = FieldPlayerServantList;
    if ( max_length >= 1 )
    {
      v29 = 0;
      do
      {
        if ( v29 >= max_length )
        {
LABEL_50:
          sub_B17100(FieldPlayerServantList, v25, v26);
          sub_B170A0();
        }
        v30 = &v28->obj.klass + (int)v29;
        v33 = (BattleServantData_o *)v30[4];
        v32 = (BattleServantData_o **)(v30 + 4);
        v31 = v33;
        if ( !v33 )
          goto LABEL_49;
        if ( BattleServantData__checkUseTDvc(v31, _4__this->fields.data, 0, 0LL) )
        {
          v38 = (BattleCommandData_o *)sub_B170CC(BattleCommandData_TypeInfo, v34, v35, v36, v37);
          BattleCommandData___ctor(v38, 0LL);
          if ( v29 >= v28->max_length )
            goto LABEL_50;
          if ( !*v32 )
            goto LABEL_49;
          FieldPlayerServantList = (BattleServantData_array *)BattleServantData__getTreasureDvcCardId_22698344(
                                                                *v32,
                                                                0,
                                                                0LL);
          if ( !v38 )
            goto LABEL_49;
          v38->fields._type = (int)FieldPlayerServantList;
          if ( v29 >= v28->max_length )
            goto LABEL_50;
          if ( !*v32 )
            goto LABEL_49;
          FieldPlayerServantList = (BattleServantData_array *)BattleServantData__getCommandDispLimitCount(*v32, 0LL);
          v38->fields.svtlimit = (int)FieldPlayerServantList;
          if ( v29 >= v28->max_length )
            goto LABEL_50;
          if ( !*v32 )
            goto LABEL_49;
          FieldPlayerServantList = (BattleServantData_array *)BattleServantData__getDispLimitCount(*v32, 1, 0LL);
          v38->fields._loadsvtLimit = (int)FieldPlayerServantList;
          if ( v29 >= v28->max_length )
            goto LABEL_50;
          if ( !*v32 )
            goto LABEL_49;
          v38->fields.uniqueId = (*v32)->fields.uniqueId;
          if ( v29 >= v28->max_length )
            goto LABEL_50;
          if ( !*v32 )
            goto LABEL_49;
          FieldPlayerServantList = (BattleServantData_array *)BattleServantData__getSvtId(*v32, 0LL);
          v38->fields.svtId = (int)FieldPlayerServantList;
          if ( v29 >= v28->max_length )
            goto LABEL_50;
          if ( !*v32 )
            goto LABEL_49;
          FieldPlayerServantList = (BattleServantData_array *)BattleServantData__GetCommandImageSvtId(*v32, 0LL);
          v38->fields.imageSvtId = (int)FieldPlayerServantList;
          if ( v29 >= v28->max_length )
            goto LABEL_50;
          if ( !*v32 )
            goto LABEL_49;
          FieldPlayerServantList = (BattleServantData_array *)BattleServantData__getTreasureDvcId(*v32, 0, 0LL);
          v38->fields.treasureDvc = (int)FieldPlayerServantList;
          if ( v29 >= v28->max_length )
            goto LABEL_50;
          if ( !*v32 )
            goto LABEL_49;
          v38->fields.follower = (*v32)->fields.followerType;
          if ( v29 >= v28->max_length )
            goto LABEL_50;
          if ( !*v32 )
            goto LABEL_49;
          v38->fields.flgEventJoin = (*v32)->fields.flgEventJoin;
          if ( !v19 )
            goto LABEL_49;
          v39 = (const MethodInfo_2F25CD8 *)Method_System_Collections_Generic_List_BattleCommandData__Add__;
          v40 = (System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData__o *)v19;
          v41 = (EventMissionProgressRequest_Argument_ProgressData_o *)v38;
        }
        else
        {
          if ( !v19 )
            goto LABEL_49;
          v39 = (const MethodInfo_2F25CD8 *)Method_System_Collections_Generic_List_BattleCommandData__Add__;
          v40 = (System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData__o *)v19;
          v41 = 0LL;
        }
        System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData___Add(v40, v41, v39);
        max_length = v28->max_length;
      }
      while ( (int)++v29 < max_length );
    }
    if ( !v19
      || (v42 = _4__this->fields.perf,
          v43 = (BattleCommandData_array *)System_Collections_Generic_List_WarBoardUiData_SaveData___ToArray(
                                             (System_Collections_Generic_List_WarBoardUiData_SaveData__o *)v19,
                                             (const MethodInfo_2F27E24 *)Method_System_Collections_Generic_List_BattleCommandData__ToArray__),
          (v44 = _4__this->fields.data) == 0LL)
      || !v42
      || (BattlePerformance__setCommandCard(v42, v43, v44->fields.p_maxcommand, 0LL),
          (Instance = (CommonUI_o *)SingletonMonoBehaviour_WebViewManager___get_Instance((const MethodInfo_2A54F38 *)Method_SingletonMonoBehaviour_CommonUI__get_Instance__)) == 0LL)
      || (CommonUI__CloseTutorialNotificationDialogArrow(Instance, 0LL), (fsm = _4__this->fields.fsm) == 0LL) )
    {
LABEL_49:
      sub_B170D4();
    }
    PlayMakerFSM__SendEvent(fsm, this->fields.endproc, 0LL);
  }
  else if ( !_1__state )
  {
    this->fields.__1__state = -1;
    v47 = 0;
    v10 = (Il2CppObject *)j_il2cpp_value_box_0(int_TypeInfo, &v47);
    this->fields.__2__current = v10;
    sub_B16F98(&this->fields.__2__current, v10);
    result = 1;
    this->fields.__1__state = 1;
    return result;
  }
  return 0;
}


Il2CppObject *__fastcall BattleLogic__startCommandIE_d__203__System_Collections_Generic_IEnumerator_System_Object__get_Current(
        BattleLogic__startCommandIE_d__203_o *this,
        const MethodInfo *method)
{
  return this->fields.__2__current;
}


void __fastcall __noreturn BattleLogic__startCommandIE_d__203__System_Collections_IEnumerator_Reset(
        BattleLogic__startCommandIE_d__203_o *this,
        const MethodInfo *method)
{
  __int64 v2; // x0
  __int64 v3; // x1
  __int64 v4; // x2
  __int64 v5; // x3
  __int64 v6; // x4
  System_NotSupportedException_o *v7; // x0
  __int64 v8; // x1

  v2 = sub_B17000(&System_NotSupportedException_TypeInfo, method);
  v7 = (System_NotSupportedException_o *)sub_B170CC(v2, v3, v4, v5, v6);
  System_NotSupportedException___ctor(v7, 0LL);
  sub_B17000(&Method_BattleLogic__startCommandIE_d__203_System_Collections_IEnumerator_Reset__, v8);
  sub_B170A0();
}


Il2CppObject *__fastcall BattleLogic__startCommandIE_d__203__System_Collections_IEnumerator_get_Current(
        BattleLogic__startCommandIE_d__203_o *this,
        const MethodInfo *method)
{
  return this->fields.__2__current;
}


void __fastcall BattleLogic__startCommandIE_d__203__System_IDisposable_Dispose(
        BattleLogic__startCommandIE_d__203_o *this,
        const MethodInfo *method)
{
  ;
}


void __fastcall BattleLogic__waitWaveStep_d__211___ctor(
        BattleLogic__waitWaveStep_d__211_o *this,
        int32_t 1__state,
        const MethodInfo *method)
{
  System_Object___ctor((Il2CppObject *)this, 0LL);
  this->fields.__1__state = 1__state;
}


bool __fastcall BattleLogic__waitWaveStep_d__211__MoveNext(
        BattleLogic__waitWaveStep_d__211_o *this,
        const MethodInfo *method)
{
  __int64 v3; // x1
  __int64 v4; // x1
  __int64 v5; // x1
  __int64 v6; // x1
  __int64 v7; // x1
  __int64 v8; // x1
  __int64 v9; // x1
  unsigned int _1__state; // w8
  struct BattleLogic_o *_4__this; // x20
  bool result; // w0
  BattlePerformance_o *perf; // x0
  Il2CppObject *v14; // x0
  Il2CppObject **p__2__current; // x19
  struct BattleLogic___c__DisplayClass211_0_o **p__8__1; // x21
  BattleEventTutorial_o *eventTutorial; // x0
  __int64 v18; // x1
  __int64 v19; // x2
  __int64 v20; // x3
  __int64 v21; // x4
  Il2CppObject *v22; // x22
  __int64 v23; // x1
  __int64 v24; // x2
  __int64 v25; // x3
  __int64 v26; // x4
  BattleEventTutorial_o *v27; // x22
  Il2CppObject *v28; // x24
  System_Action_o *v29; // x23
  System_Collections_Generic_LinkedListNode_T__o *isTimeAcceleration; // x0
  __int64 v31; // x1
  __int64 v32; // x2
  __int64 v33; // x3
  __int64 v34; // x4
  struct BattleLogicTask_array *taskList; // x8
  unsigned __int64 v36; // x22
  unsigned __int64 max_length; // x9
  System_Collections_Generic_LinkedList_WebOperation__o *list_logic; // x21
  BattleLogicTask_o *v39; // x22
  PlayMakerFSM_o *fsm; // x0
  Il2CppObject *v41; // x0
  Il2CppObject **v42; // x19
  int v43; // w8
  int v44; // [xsp+8h] [xbp-38h] BYREF
  int v45; // [xsp+Ch] [xbp-34h] BYREF

  if ( (byte_40F8539 & 1) == 0 )
  {
    sub_B16FFC(&System_Action_TypeInfo, method);
    sub_B16FFC(&BattleLogicTask_TypeInfo, v3);
    sub_B16FFC(&int_TypeInfo, v4);
    sub_B16FFC(&Method_System_Collections_Generic_LinkedList_BattleLogicTask__AddLast__, v5);
    sub_B16FFC(&Method_System_Collections_Generic_LinkedList_BattleLogicTask__get_Count__, v6);
    sub_B16FFC(&Method_BattleLogic___c__DisplayClass211_0__waitWaveStep_b__0__, v7);
    sub_B16FFC(&BattleLogic___c__DisplayClass211_0_TypeInfo, v8);
    sub_B16FFC(&StringLiteral_5481, v9);
    byte_40F8539 = 1;
  }
  _1__state = this->fields.__1__state;
  _4__this = this->fields.__4__this;
  if ( _1__state < 2 )
  {
    this->fields.__1__state = -1;
    if ( !_4__this )
      goto LABEL_32;
    perf = _4__this->fields.perf;
    if ( !perf )
      goto LABEL_32;
    if ( BattlePerformance__IsStep4FieldMotion(perf, 0LL) )
    {
      v45 = 0;
      v14 = (Il2CppObject *)j_il2cpp_value_box_0(int_TypeInfo, &v45);
      this->fields.__2__current = v14;
      p__2__current = &this->fields.__2__current;
      sub_B16F98(p__2__current, v14);
      result = 1;
      *((_DWORD *)p__2__current - 2) = 1;
      return result;
    }
    if ( this->fields.progress != 128 )
      goto LABEL_24;
    eventTutorial = _4__this->fields.eventTutorial;
    if ( !eventTutorial )
      goto LABEL_32;
    if ( !BattleEventTutorial__CheckHasGimmickPhaseTutorial(eventTutorial, 0LL) )
      goto LABEL_24;
    v22 = (Il2CppObject *)sub_B170CC(BattleLogic___c__DisplayClass211_0_TypeInfo, v18, v19, v20, v21);
    System_Object___ctor(v22, 0LL);
    this->fields.__8__1 = (struct BattleLogic___c__DisplayClass211_0_o *)v22;
    p__8__1 = &this->fields.__8__1;
    sub_B16F98(&this->fields.__8__1, v22);
    if ( !this->fields.__8__1 )
      goto LABEL_32;
    this->fields.__8__1->fields.isEnd = 0;
    v27 = _4__this->fields.eventTutorial;
    v28 = (Il2CppObject *)*p__8__1;
    v29 = (System_Action_o *)sub_B170CC(System_Action_TypeInfo, v23, v24, v25, v26);
    System_Action___ctor(v29, v28, Method_BattleLogic___c__DisplayClass211_0__waitWaveStep_b__0__, 0LL);
    if ( !v27 )
      goto LABEL_32;
    BattleEventTutorial__callGimmick(v27, v29, 0LL);
  }
  else
  {
    if ( _1__state != 2 )
    {
      if ( _1__state != 3 )
        return 0;
      this->fields.__1__state = -1;
      if ( _4__this )
      {
        BattleLogic__playTaskBattle(_4__this, 0LL);
        return 0;
      }
LABEL_32:
      sub_B170D4();
    }
    p__8__1 = &this->fields.__8__1;
    this->fields.__1__state = -1;
  }
  if ( !*p__8__1 )
    goto LABEL_32;
  if ( (*p__8__1)->fields.isEnd )
  {
    *p__8__1 = 0LL;
    sub_B16F98(p__8__1, 0LL);
    if ( !_4__this )
      goto LABEL_32;
LABEL_24:
    isTimeAcceleration = (System_Collections_Generic_LinkedListNode_T__o *)BattleLogic__isTimeAcceleration(
                                                                             _4__this,
                                                                             0LL);
    if ( ((unsigned __int8)isTimeAcceleration & 1) != 0 )
      BattleLogic__setTimeAcceleration(_4__this, 0, 0LL);
    _4__this->fields.acttype = 2;
    taskList = this->fields.taskList;
    if ( !taskList )
      goto LABEL_32;
    v36 = 0LL;
    while ( 1 )
    {
      max_length = taskList->max_length;
      list_logic = (System_Collections_Generic_LinkedList_WebOperation__o *)_4__this->fields.list_logic;
      if ( (__int64)v36 >= (int)max_length )
        break;
      if ( v36 >= max_length )
      {
        sub_B17100(isTimeAcceleration, v31, v32);
        sub_B170A0();
      }
      if ( list_logic )
      {
        isTimeAcceleration = System_Collections_Generic_LinkedList_WebOperation___AddLast(
                               (System_Collections_Generic_LinkedList_WebOperation__o *)_4__this->fields.list_logic,
                               (System_Net_WebOperation_o *)taskList->m_Items[v36],
                               (const MethodInfo_23FD6D4 *)Method_System_Collections_Generic_LinkedList_BattleLogicTask__AddLast__);
        taskList = this->fields.taskList;
        ++v36;
        if ( taskList )
          continue;
      }
      goto LABEL_32;
    }
    if ( !list_logic )
      goto LABEL_32;
    if ( list_logic->fields.count >= 1 )
    {
      v39 = (BattleLogicTask_o *)sub_B170CC(BattleLogicTask_TypeInfo, v31, v32, v33, v34);
      BattleLogicTask___ctor(v39, 0LL);
      System_Collections_Generic_LinkedList_WebOperation___AddLast(
        list_logic,
        (System_Net_WebOperation_o *)v39,
        (const MethodInfo_23FD6D4 *)Method_System_Collections_Generic_LinkedList_BattleLogicTask__AddLast__);
      fsm = _4__this->fields.fsm;
      if ( !fsm )
        goto LABEL_32;
      PlayMakerFSM__SendEvent(fsm, (System_String_o *)StringLiteral_5481, 0LL);
    }
    v44 = 0;
    v41 = (Il2CppObject *)j_il2cpp_value_box_0(int_TypeInfo, &v44);
    this->fields.__2__current = v41;
    v42 = &this->fields.__2__current;
    sub_B16F98(v42, v41);
    v43 = 3;
    goto LABEL_39;
  }
  this->fields.__2__current = 0LL;
  v42 = &this->fields.__2__current;
  sub_B16F98(v42, 0LL);
  v43 = 2;
LABEL_39:
  *((_DWORD *)v42 - 2) = v43;
  return 1;
}


Il2CppObject *__fastcall BattleLogic__waitWaveStep_d__211__System_Collections_Generic_IEnumerator_System_Object__get_Current(
        BattleLogic__waitWaveStep_d__211_o *this,
        const MethodInfo *method)
{
  return this->fields.__2__current;
}


void __fastcall __noreturn BattleLogic__waitWaveStep_d__211__System_Collections_IEnumerator_Reset(
        BattleLogic__waitWaveStep_d__211_o *this,
        const MethodInfo *method)
{
  __int64 v2; // x0
  __int64 v3; // x1
  __int64 v4; // x2
  __int64 v5; // x3
  __int64 v6; // x4
  System_NotSupportedException_o *v7; // x0
  __int64 v8; // x1

  v2 = sub_B17000(&System_NotSupportedException_TypeInfo, method);
  v7 = (System_NotSupportedException_o *)sub_B170CC(v2, v3, v4, v5, v6);
  System_NotSupportedException___ctor(v7, 0LL);
  sub_B17000(&Method_BattleLogic__waitWaveStep_d__211_System_Collections_IEnumerator_Reset__, v8);
  sub_B170A0();
}


Il2CppObject *__fastcall BattleLogic__waitWaveStep_d__211__System_Collections_IEnumerator_get_Current(
        BattleLogic__waitWaveStep_d__211_o *this,
        const MethodInfo *method)
{
  return this->fields.__2__current;
}


void __fastcall BattleLogic__waitWaveStep_d__211__System_IDisposable_Dispose(
        BattleLogic__waitWaveStep_d__211_o *this,
        const MethodInfo *method)
{
  ;
}


// local variable allocation has failed, the output may be wrong!
void __fastcall BattleLogic_createActionBattle___ctor(
        BattleLogic_createActionBattle_o *this,
        Il2CppObject *object,
        intptr_t method,
        const MethodInfo *a4)
{
  __int64 v4; // x8
  intptr_t *p_method; // x0

  v4 = **(_QWORD **)&method;
  *(_QWORD *)&this->fields.method = object;
  p_method = &this->fields.method;
  *((_QWORD *)p_method + 1) = *(_QWORD *)&method;
  *((_QWORD *)p_method - 2) = v4;
  sub_B16F98(p_method, object);
}


System_IAsyncResult_o *__fastcall BattleLogic_createActionBattle__BeginInvoke(
        BattleLogic_createActionBattle_o *this,
        BattleLogicTask_o *task,
        System_AsyncCallback_o *callback,
        Il2CppObject *object,
        const MethodInfo *method)
{
  __int64 v6[2]; // [xsp+0h] [xbp-10h] BYREF

  v6[0] = (__int64)task;
  v6[1] = 0LL;
  return (System_IAsyncResult_o *)sub_B16FA0(this, v6, callback, object);
}


BattleActionData_o *__fastcall BattleLogic_createActionBattle__EndInvoke(
        BattleLogic_createActionBattle_o *this,
        System_IAsyncResult_o *result,
        const MethodInfo *method)
{
  return (BattleActionData_o *)sub_B16FA4(result, 0LL, method);
}


BattleActionData_o *__fastcall BattleLogic_createActionBattle__Invoke(
        BattleLogic_createActionBattle_o *this,
        BattleLogicTask_o *task,
        const MethodInfo *method)
{
  __int64 v3; // x8
  __int64 v6; // x24
  BattleLogic_createActionBattle_o **v7; // x25
  __int64 v8; // x26
  unsigned int v9; // w22
  __int64 class_0; // x0
  BattleLogicTask_c *v11; // x8
  unsigned __int64 v12; // x10
  int32_t *v13; // x11
  __int64 v14; // x0
  __int64 v15; // x0
  BattleActionData_o *result; // x0
  unsigned int v17; // w23
  __int64 v18; // x0
  __int64 v19; // x8
  unsigned __int64 v20; // x10
  _DWORD *v21; // x11
  __int64 v22; // x0
  __int64 v23; // x0
  __int64 v24; // x0
  __int64 (__fastcall **v25)(BattleLogicTask_o *, _QWORD); // x0
  __int64 v26; // x0
  __int64 (__fastcall **v27)(__int64 *, BattleLogicTask_o *, _QWORD); // x0
  BattleLogic_createActionBattle_o *v28; // x8
  __int64 v29; // x21
  __int64 *v30; // x22
  __int64 (__fastcall *v31)(BattleLogicTask_o *, __int64); // x23
  char v32; // w0
  int v33; // w8
  char v34; // w23
  char v35; // w0
  __int64 v36; // x8
  __int64 v37; // x1
  __int64 v38; // x2
  unsigned __int64 v39; // x10
  _DWORD *v40; // x11
  char v41; // w22
  char v42; // w0
  BattleLogicTask_c *klass; // x8
  __int64 v44; // x1
  __int64 v45; // x2
  unsigned __int64 v46; // x10
  int32_t *p_offset; // x11
  BattleLogic_createActionBattle_o *v48; // [xsp+8h] [xbp-48h] BYREF

  v48 = this;
  v3 = *(_QWORD *)&this[1].fields.method_ptr;
  if ( !v3 )
  {
    v7 = &v48;
    v6 = 1LL;
    goto LABEL_5;
  }
  v6 = *(_QWORD *)(v3 + 24);
  if ( v6 )
  {
    v7 = (BattleLogic_createActionBattle_o **)(v3 + 32);
LABEL_5:
    v8 = 0LL;
    while ( 1 )
    {
      v28 = v7[v8];
      v30 = *(__int64 **)&v28->fields.method;
      v29 = *(_QWORD *)&v28->fields.extra_arg;
      v31 = *(__int64 (__fastcall **)(BattleLogicTask_o *, __int64))&v28->fields.method_ptr;
      if ( *(__int16 *)(v29 + 72) == -1 )
        sub_B170B8(*(_QWORD *)&v28->fields.extra_arg, task, method);
      v32 = sub_B1702C(v29);
      v33 = *(unsigned __int8 *)(v29 + 74);
      if ( (v32 & 1) != 0 )
      {
        if ( v33 == 1 )
          goto LABEL_58;
      }
      else
      {
        if ( v33 != 1 )
        {
          if ( *(__int16 *)(v29 + 72) != -1 && this->fields.m_target )
          {
            v41 = sub_B17024(v29);
            v42 = sub_B17428(v29);
            if ( (v41 & 1) != 0 )
            {
              if ( (v42 & 1) != 0 )
              {
                klass = task->klass;
                v44 = *(_QWORD *)(v29 + 24);
                v45 = *(unsigned __int16 *)(v29 + 72);
                if ( *(_WORD *)&task->klass->_2.bitflags1 )
                {
                  v46 = 0LL;
                  p_offset = &klass->_1.interfaceOffsets->offset;
                  while ( *((_QWORD *)p_offset - 1) != v44 )
                  {
                    ++v46;
                    p_offset += 4;
                    if ( v46 >= *(unsigned __int16 *)&task->klass->_2.bitflags1 )
                      goto LABEL_57;
                  }
                  v24 = (__int64)(&klass->vtable._0_Equals.method + 2 * *p_offset + 2 * (int)v45);
                }
                else
                {
LABEL_57:
                  v24 = sub_AAFEF8(task, v44, v45);
                }
                v15 = *(_QWORD *)(v24 + 8);
              }
              else
              {
                v15 = *((_QWORD *)&task->klass->vtable._1_Finalize.methodPtr + 2 * *(unsigned __int16 *)(v29 + 72));
              }
              v25 = (__int64 (__fastcall **)(BattleLogicTask_o *, _QWORD))sub_B170AC(v15, v29);
              result = (BattleActionData_o *)(*v25)(task, v25);
            }
            else
            {
              v9 = *(unsigned __int16 *)(v29 + 72);
              if ( (v42 & 1) != 0 )
              {
                class_0 = j_il2cpp_method_get_class_0(v29);
                v11 = task->klass;
                if ( *(_WORD *)&task->klass->_2.bitflags1 )
                {
                  v12 = 0LL;
                  v13 = &v11->_1.interfaceOffsets->offset;
                  while ( *((_QWORD *)v13 - 1) != class_0 )
                  {
                    ++v12;
                    v13 += 4;
                    if ( v12 >= *(unsigned __int16 *)&task->klass->_2.bitflags1 )
                      goto LABEL_11;
                  }
                  v14 = (__int64)(&v11->vtable._0_Equals.method + 2 * (int)(*v13 + v9));
                }
                else
                {
LABEL_11:
                  v14 = sub_AAFEF8(task, class_0, v9);
                }
                result = (BattleActionData_o *)(*(__int64 (__fastcall **)(BattleLogicTask_o *, _QWORD))v14)(
                                                 task,
                                                 *(_QWORD *)(v14 + 8));
              }
              else
              {
                result = (BattleActionData_o *)(*((__int64 (__fastcall **)(BattleLogicTask_o *, _QWORD))&task->klass->vtable._0_Equals.method
                                                + 2 * *(unsigned __int16 *)(v29 + 72)))(
                                                 task,
                                                 *((_QWORD *)&task->klass->vtable._1_Finalize.methodPtr
                                                 + 2 * *(unsigned __int16 *)(v29 + 72)));
              }
            }
            goto LABEL_59;
          }
LABEL_58:
          result = (BattleActionData_o *)v31(task, v29);
          goto LABEL_59;
        }
        if ( !v30 )
          goto LABEL_58;
        if ( *(__int16 *)(v29 + 72) != -1 && (*(_BYTE *)(*v30 + 277) & 1) == 0 && this->fields.m_target )
        {
          v34 = sub_B17024(v29);
          v35 = sub_B17428(v29);
          if ( (v34 & 1) != 0 )
          {
            if ( (v35 & 1) != 0 )
            {
              v36 = *v30;
              v37 = *(_QWORD *)(v29 + 24);
              v38 = *(unsigned __int16 *)(v29 + 72);
              if ( *(_WORD *)(*v30 + 298) )
              {
                v39 = 0LL;
                v40 = (_DWORD *)(*(_QWORD *)(v36 + 176) + 8LL);
                while ( *((_QWORD *)v40 - 1) != v37 )
                {
                  ++v39;
                  v40 += 4;
                  if ( v39 >= *(unsigned __int16 *)(*v30 + 298) )
                    goto LABEL_48;
                }
                v26 = v36 + 16LL * (*v40 + (int)v38) + 312;
              }
              else
              {
LABEL_48:
                v26 = sub_AAFEF8(v30, v37, v38);
              }
              v23 = *(_QWORD *)(v26 + 8);
            }
            else
            {
              v23 = *(_QWORD *)(*v30 + 16LL * *(unsigned __int16 *)(v29 + 72) + 320);
            }
            v27 = (__int64 (__fastcall **)(__int64 *, BattleLogicTask_o *, _QWORD))sub_B170AC(v23, v29);
            result = (BattleActionData_o *)(*v27)(v30, task, v27);
          }
          else
          {
            v17 = *(unsigned __int16 *)(v29 + 72);
            if ( (v35 & 1) != 0 )
            {
              v18 = j_il2cpp_method_get_class_0(v29);
              v19 = *v30;
              if ( *(_WORD *)(*v30 + 298) )
              {
                v20 = 0LL;
                v21 = (_DWORD *)(*(_QWORD *)(v19 + 176) + 8LL);
                while ( *((_QWORD *)v21 - 1) != v18 )
                {
                  ++v20;
                  v21 += 4;
                  if ( v20 >= *(unsigned __int16 *)(*v30 + 298) )
                    goto LABEL_19;
                }
                v22 = v19 + 16LL * (int)(*v21 + v17) + 312;
              }
              else
              {
LABEL_19:
                v22 = sub_AAFEF8(v30, v18, v17);
              }
              result = (BattleActionData_o *)(*(__int64 (__fastcall **)(__int64 *, BattleLogicTask_o *, _QWORD))v22)(
                                               v30,
                                               task,
                                               *(_QWORD *)(v22 + 8));
            }
            else
            {
              result = (BattleActionData_o *)(*(__int64 (__fastcall **)(__int64 *, BattleLogicTask_o *, _QWORD))(*v30 + 16LL * *(unsigned __int16 *)(v29 + 72) + 312))(
                                               v30,
                                               task,
                                               *(_QWORD *)(*v30 + 16LL * *(unsigned __int16 *)(v29 + 72) + 320));
            }
          }
          goto LABEL_59;
        }
      }
      result = (BattleActionData_o *)((__int64 (__fastcall *)(__int64 *, BattleLogicTask_o *, __int64))v31)(
                                       v30,
                                       task,
                                       v29);
LABEL_59:
      if ( ++v8 == v6 )
        return result;
    }
  }
  return 0LL;
}


// local variable allocation has failed, the output may be wrong!
void __fastcall BattleLogic_reactionFunction___ctor(
        BattleLogic_reactionFunction_o *this,
        Il2CppObject *object,
        intptr_t method,
        const MethodInfo *a4)
{
  __int64 v4; // x8
  intptr_t *p_method; // x0

  v4 = **(_QWORD **)&method;
  *(_QWORD *)&this->fields.method = object;
  p_method = &this->fields.method;
  *((_QWORD *)p_method + 1) = *(_QWORD *)&method;
  *((_QWORD *)p_method - 2) = v4;
  sub_B16F98(p_method, object);
}


System_IAsyncResult_o *__fastcall BattleLogic_reactionFunction__BeginInvoke(
        BattleLogic_reactionFunction_o *this,
        BattleLogicTask_o *task,
        System_AsyncCallback_o *callback,
        Il2CppObject *object,
        const MethodInfo *method)
{
  __int64 v6[2]; // [xsp+0h] [xbp-10h] BYREF

  v6[0] = (__int64)task;
  v6[1] = 0LL;
  return (System_IAsyncResult_o *)sub_B16FA0(this, v6, callback, object);
}


BattleLogicTask_array *__fastcall BattleLogic_reactionFunction__EndInvoke(
        BattleLogic_reactionFunction_o *this,
        System_IAsyncResult_o *result,
        const MethodInfo *method)
{
  return (BattleLogicTask_array *)sub_B16FA4(result, 0LL, method);
}


BattleLogicTask_array *__fastcall BattleLogic_reactionFunction__Invoke(
        BattleLogic_reactionFunction_o *this,
        BattleLogicTask_o *task,
        const MethodInfo *method)
{
  __int64 v3; // x8
  __int64 v6; // x24
  BattleLogic_reactionFunction_o **v7; // x25
  __int64 v8; // x26
  unsigned int v9; // w22
  __int64 class_0; // x0
  BattleLogicTask_c *v11; // x8
  unsigned __int64 v12; // x10
  int32_t *v13; // x11
  __int64 v14; // x0
  __int64 v15; // x0
  BattleLogicTask_array *result; // x0
  unsigned int v17; // w23
  __int64 v18; // x0
  __int64 v19; // x8
  unsigned __int64 v20; // x10
  _DWORD *v21; // x11
  __int64 v22; // x0
  __int64 v23; // x0
  __int64 v24; // x0
  __int64 (__fastcall **v25)(BattleLogicTask_o *, _QWORD); // x0
  __int64 v26; // x0
  __int64 (__fastcall **v27)(__int64 *, BattleLogicTask_o *, _QWORD); // x0
  BattleLogic_reactionFunction_o *v28; // x8
  __int64 v29; // x21
  __int64 *v30; // x22
  __int64 (__fastcall *v31)(BattleLogicTask_o *, __int64); // x23
  char v32; // w0
  int v33; // w8
  char v34; // w23
  char v35; // w0
  __int64 v36; // x8
  __int64 v37; // x1
  __int64 v38; // x2
  unsigned __int64 v39; // x10
  _DWORD *v40; // x11
  char v41; // w22
  char v42; // w0
  BattleLogicTask_c *klass; // x8
  __int64 v44; // x1
  __int64 v45; // x2
  unsigned __int64 v46; // x10
  int32_t *p_offset; // x11
  BattleLogic_reactionFunction_o *v48; // [xsp+8h] [xbp-48h] BYREF

  v48 = this;
  v3 = *(_QWORD *)&this[1].fields.method_ptr;
  if ( !v3 )
  {
    v7 = &v48;
    v6 = 1LL;
    goto LABEL_5;
  }
  v6 = *(_QWORD *)(v3 + 24);
  if ( v6 )
  {
    v7 = (BattleLogic_reactionFunction_o **)(v3 + 32);
LABEL_5:
    v8 = 0LL;
    while ( 1 )
    {
      v28 = v7[v8];
      v30 = *(__int64 **)&v28->fields.method;
      v29 = *(_QWORD *)&v28->fields.extra_arg;
      v31 = *(__int64 (__fastcall **)(BattleLogicTask_o *, __int64))&v28->fields.method_ptr;
      if ( *(__int16 *)(v29 + 72) == -1 )
        sub_B170B8(*(_QWORD *)&v28->fields.extra_arg, task, method);
      v32 = sub_B1702C(v29);
      v33 = *(unsigned __int8 *)(v29 + 74);
      if ( (v32 & 1) != 0 )
      {
        if ( v33 == 1 )
          goto LABEL_58;
      }
      else
      {
        if ( v33 != 1 )
        {
          if ( *(__int16 *)(v29 + 72) != -1 && this->fields.m_target )
          {
            v41 = sub_B17024(v29);
            v42 = sub_B17428(v29);
            if ( (v41 & 1) != 0 )
            {
              if ( (v42 & 1) != 0 )
              {
                klass = task->klass;
                v44 = *(_QWORD *)(v29 + 24);
                v45 = *(unsigned __int16 *)(v29 + 72);
                if ( *(_WORD *)&task->klass->_2.bitflags1 )
                {
                  v46 = 0LL;
                  p_offset = &klass->_1.interfaceOffsets->offset;
                  while ( *((_QWORD *)p_offset - 1) != v44 )
                  {
                    ++v46;
                    p_offset += 4;
                    if ( v46 >= *(unsigned __int16 *)&task->klass->_2.bitflags1 )
                      goto LABEL_57;
                  }
                  v24 = (__int64)(&klass->vtable._0_Equals.method + 2 * *p_offset + 2 * (int)v45);
                }
                else
                {
LABEL_57:
                  v24 = sub_AAFEF8(task, v44, v45);
                }
                v15 = *(_QWORD *)(v24 + 8);
              }
              else
              {
                v15 = *((_QWORD *)&task->klass->vtable._1_Finalize.methodPtr + 2 * *(unsigned __int16 *)(v29 + 72));
              }
              v25 = (__int64 (__fastcall **)(BattleLogicTask_o *, _QWORD))sub_B170AC(v15, v29);
              result = (BattleLogicTask_array *)(*v25)(task, v25);
            }
            else
            {
              v9 = *(unsigned __int16 *)(v29 + 72);
              if ( (v42 & 1) != 0 )
              {
                class_0 = j_il2cpp_method_get_class_0(v29);
                v11 = task->klass;
                if ( *(_WORD *)&task->klass->_2.bitflags1 )
                {
                  v12 = 0LL;
                  v13 = &v11->_1.interfaceOffsets->offset;
                  while ( *((_QWORD *)v13 - 1) != class_0 )
                  {
                    ++v12;
                    v13 += 4;
                    if ( v12 >= *(unsigned __int16 *)&task->klass->_2.bitflags1 )
                      goto LABEL_11;
                  }
                  v14 = (__int64)(&v11->vtable._0_Equals.method + 2 * (int)(*v13 + v9));
                }
                else
                {
LABEL_11:
                  v14 = sub_AAFEF8(task, class_0, v9);
                }
                result = (BattleLogicTask_array *)(*(__int64 (__fastcall **)(BattleLogicTask_o *, _QWORD))v14)(
                                                    task,
                                                    *(_QWORD *)(v14 + 8));
              }
              else
              {
                result = (BattleLogicTask_array *)(*((__int64 (__fastcall **)(BattleLogicTask_o *, _QWORD))&task->klass->vtable._0_Equals.method
                                                   + 2 * *(unsigned __int16 *)(v29 + 72)))(
                                                    task,
                                                    *((_QWORD *)&task->klass->vtable._1_Finalize.methodPtr
                                                    + 2 * *(unsigned __int16 *)(v29 + 72)));
              }
            }
            goto LABEL_59;
          }
LABEL_58:
          result = (BattleLogicTask_array *)v31(task, v29);
          goto LABEL_59;
        }
        if ( !v30 )
          goto LABEL_58;
        if ( *(__int16 *)(v29 + 72) != -1 && (*(_BYTE *)(*v30 + 277) & 1) == 0 && this->fields.m_target )
        {
          v34 = sub_B17024(v29);
          v35 = sub_B17428(v29);
          if ( (v34 & 1) != 0 )
          {
            if ( (v35 & 1) != 0 )
            {
              v36 = *v30;
              v37 = *(_QWORD *)(v29 + 24);
              v38 = *(unsigned __int16 *)(v29 + 72);
              if ( *(_WORD *)(*v30 + 298) )
              {
                v39 = 0LL;
                v40 = (_DWORD *)(*(_QWORD *)(v36 + 176) + 8LL);
                while ( *((_QWORD *)v40 - 1) != v37 )
                {
                  ++v39;
                  v40 += 4;
                  if ( v39 >= *(unsigned __int16 *)(*v30 + 298) )
                    goto LABEL_48;
                }
                v26 = v36 + 16LL * (*v40 + (int)v38) + 312;
              }
              else
              {
LABEL_48:
                v26 = sub_AAFEF8(v30, v37, v38);
              }
              v23 = *(_QWORD *)(v26 + 8);
            }
            else
            {
              v23 = *(_QWORD *)(*v30 + 16LL * *(unsigned __int16 *)(v29 + 72) + 320);
            }
            v27 = (__int64 (__fastcall **)(__int64 *, BattleLogicTask_o *, _QWORD))sub_B170AC(v23, v29);
            result = (BattleLogicTask_array *)(*v27)(v30, task, v27);
          }
          else
          {
            v17 = *(unsigned __int16 *)(v29 + 72);
            if ( (v35 & 1) != 0 )
            {
              v18 = j_il2cpp_method_get_class_0(v29);
              v19 = *v30;
              if ( *(_WORD *)(*v30 + 298) )
              {
                v20 = 0LL;
                v21 = (_DWORD *)(*(_QWORD *)(v19 + 176) + 8LL);
                while ( *((_QWORD *)v21 - 1) != v18 )
                {
                  ++v20;
                  v21 += 4;
                  if ( v20 >= *(unsigned __int16 *)(*v30 + 298) )
                    goto LABEL_19;
                }
                v22 = v19 + 16LL * (int)(*v21 + v17) + 312;
              }
              else
              {
LABEL_19:
                v22 = sub_AAFEF8(v30, v18, v17);
              }
              result = (BattleLogicTask_array *)(*(__int64 (__fastcall **)(__int64 *, BattleLogicTask_o *, _QWORD))v22)(
                                                  v30,
                                                  task,
                                                  *(_QWORD *)(v22 + 8));
            }
            else
            {
              result = (BattleLogicTask_array *)(*(__int64 (__fastcall **)(__int64 *, BattleLogicTask_o *, _QWORD))(*v30 + 16LL * *(unsigned __int16 *)(v29 + 72) + 312))(
                                                  v30,
                                                  task,
                                                  *(_QWORD *)(*v30 + 16LL * *(unsigned __int16 *)(v29 + 72) + 320));
            }
          }
          goto LABEL_59;
        }
      }
      result = (BattleLogicTask_array *)((__int64 (__fastcall *)(__int64 *, BattleLogicTask_o *, __int64))v31)(
                                          v30,
                                          task,
                                          v29);
LABEL_59:
      if ( ++v8 == v6 )
        return result;
    }
  }
  return 0LL;
}


// local variable allocation has failed, the output may be wrong!
void __fastcall BattleLogic_taskFunction___ctor(
        BattleLogic_taskFunction_o *this,
        Il2CppObject *object,
        intptr_t method,
        const MethodInfo *a4)
{
  __int64 v4; // x8
  intptr_t *p_method; // x0

  v4 = **(_QWORD **)&method;
  *(_QWORD *)&this->fields.method = object;
  p_method = &this->fields.method;
  *((_QWORD *)p_method + 1) = *(_QWORD *)&method;
  *((_QWORD *)p_method - 2) = v4;
  sub_B16F98(p_method, object);
}


// local variable allocation has failed, the output may be wrong!
System_IAsyncResult_o *__fastcall BattleLogic_taskFunction__BeginInvoke(
        BattleLogic_taskFunction_o *this,
        int32_t ltype,
        BattleData_o *data,
        System_AsyncCallback_o *callback,
        Il2CppObject *object,
        const MethodInfo *method)
{
  __int64 v11[3]; // [xsp+8h] [xbp-48h] BYREF
  int32_t v12; // [xsp+2Ch] [xbp-24h] BYREF

  v12 = ltype;
  if ( (byte_40F853D & 1) == 0 )
  {
    sub_B16FFC(&BattleLogic_LOGICTYPE_TypeInfo, *(_QWORD *)&ltype);
    byte_40F853D = 1;
  }
  v11[2] = 0LL;
  v11[0] = j_il2cpp_value_box_0(BattleLogic_LOGICTYPE_TypeInfo, &v12);
  v11[1] = (__int64)data;
  return (System_IAsyncResult_o *)sub_B16FA0(this, v11, callback, object);
}


BattleLogicTask_array *__fastcall BattleLogic_taskFunction__EndInvoke(
        BattleLogic_taskFunction_o *this,
        System_IAsyncResult_o *result,
        const MethodInfo *method)
{
  return (BattleLogicTask_array *)sub_B16FA4(result, 0LL, method);
}


// local variable allocation has failed, the output may be wrong!
BattleLogicTask_array *__fastcall BattleLogic_taskFunction__Invoke(
        BattleLogic_taskFunction_o *this,
        int32_t ltype,
        BattleData_o *data,
        const MethodInfo *method)
{
  __int64 v4; // x8
  __int64 v7; // x25
  BattleLogic_taskFunction_o **v8; // x26
  __int64 v9; // x27
  unsigned int v10; // w24
  __int64 class_0; // x0
  __int64 v12; // x8
  unsigned int v13; // w23
  unsigned __int64 v14; // x10
  _DWORD *v15; // x11
  __int64 v16; // x0
  __int64 v17; // x0
  BattleLogicTask_array *result; // x0
  __int64 v19; // x0
  __int64 (__fastcall **v20)(__int64 *, _QWORD, BattleData_o *, _QWORD); // x0
  BattleLogic_taskFunction_o *v21; // x8
  __int64 *v22; // x22
  __int64 v23; // x23
  __int64 (__fastcall *v24)(unsigned int *, BattleData_o *, __int64); // x24
  char v25; // w24
  char v26; // w0
  unsigned int v27; // w24
  __int64 v28; // x8
  __int64 v29; // x1
  __int64 v30; // x2
  unsigned __int64 v31; // x10
  _DWORD *v32; // x11
  unsigned int v33; // [xsp+Ch] [xbp-54h] BYREF
  BattleLogic_taskFunction_o *v34; // [xsp+18h] [xbp-48h] BYREF

  v34 = this;
  v33 = ltype;
  v4 = *(_QWORD *)&this[1].fields.method_ptr;
  if ( !v4 )
  {
    v8 = &v34;
    v7 = 1LL;
    goto LABEL_5;
  }
  v7 = *(_QWORD *)(v4 + 24);
  if ( v7 )
  {
    v8 = (BattleLogic_taskFunction_o **)(v4 + 32);
LABEL_5:
    v9 = 0LL;
    while ( 1 )
    {
      v21 = v8[v9];
      v22 = *(__int64 **)&v21->fields.method;
      v23 = *(_QWORD *)&v21->fields.extra_arg;
      v24 = *(__int64 (__fastcall **)(unsigned int *, BattleData_o *, __int64))&v21->fields.method_ptr;
      if ( *(__int16 *)(v23 + 72) == -1 )
        sub_B170B8(*(_QWORD *)&v21->fields.extra_arg, *(_QWORD *)&ltype, data);
      if ( (sub_B1702C(v23) & 1) == 0 )
        break;
      if ( *(_BYTE *)(v23 + 74) != 2 )
        goto LABEL_36;
      result = (BattleLogicTask_array *)v24((unsigned int *)v33, data, v23);
LABEL_38:
      if ( ++v9 == v7 )
        return result;
    }
    if ( !v22 )
    {
      result = (BattleLogicTask_array *)v24(&v33 - 4, data, v23);
      goto LABEL_38;
    }
    if ( *(__int16 *)(v23 + 72) != -1 && (*(_BYTE *)(*v22 + 277) & 1) == 0 && this->fields.m_target )
    {
      v25 = sub_B17024(v23);
      v26 = sub_B17428(v23);
      if ( (v25 & 1) != 0 )
      {
        v27 = v33;
        if ( (v26 & 1) != 0 )
        {
          v28 = *v22;
          v29 = *(_QWORD *)(v23 + 24);
          v30 = *(unsigned __int16 *)(v23 + 72);
          if ( *(_WORD *)(*v22 + 298) )
          {
            v31 = 0LL;
            v32 = (_DWORD *)(*(_QWORD *)(v28 + 176) + 8LL);
            while ( *((_QWORD *)v32 - 1) != v29 )
            {
              ++v31;
              v32 += 4;
              if ( v31 >= *(unsigned __int16 *)(*v22 + 298) )
                goto LABEL_35;
            }
            v19 = v28 + 16LL * (*v32 + (int)v30) + 312;
          }
          else
          {
LABEL_35:
            v19 = sub_AAFEF8(v22, v29, v30);
          }
          v17 = *(_QWORD *)(v19 + 8);
        }
        else
        {
          v17 = *(_QWORD *)(*v22 + 16LL * *(unsigned __int16 *)(v23 + 72) + 320);
        }
        v20 = (__int64 (__fastcall **)(__int64 *, _QWORD, BattleData_o *, _QWORD))sub_B170AC(v17, v23);
        result = (BattleLogicTask_array *)(*v20)(v22, v27, data, v20);
      }
      else
      {
        v10 = *(unsigned __int16 *)(v23 + 72);
        if ( (v26 & 1) != 0 )
        {
          class_0 = j_il2cpp_method_get_class_0(v23);
          v12 = *v22;
          v13 = v33;
          if ( *(_WORD *)(*v22 + 298) )
          {
            v14 = 0LL;
            v15 = (_DWORD *)(*(_QWORD *)(v12 + 176) + 8LL);
            while ( *((_QWORD *)v15 - 1) != class_0 )
            {
              ++v14;
              v15 += 4;
              if ( v14 >= *(unsigned __int16 *)(*v22 + 298) )
                goto LABEL_11;
            }
            v16 = v12 + 16LL * (int)(*v15 + v10) + 312;
          }
          else
          {
LABEL_11:
            v16 = sub_AAFEF8(v22, class_0, v10);
          }
          result = (BattleLogicTask_array *)(*(__int64 (__fastcall **)(__int64 *, _QWORD, BattleData_o *, _QWORD))v16)(
                                              v22,
                                              v13,
                                              data,
                                              *(_QWORD *)(v16 + 8));
        }
        else
        {
          result = (BattleLogicTask_array *)(*(__int64 (__fastcall **)(__int64 *, _QWORD, BattleData_o *, _QWORD))(*v22 + 16LL * *(unsigned __int16 *)(v23 + 72) + 312))(
                                              v22,
                                              v33,
                                              data,
                                              *(_QWORD *)(*v22 + 16LL * *(unsigned __int16 *)(v23 + 72) + 320));
        }
      }
      goto LABEL_38;
    }
LABEL_36:
    result = (BattleLogicTask_array *)((__int64 (__fastcall *)(__int64 *, _QWORD, BattleData_o *, __int64))v24)(
                                        v22,
                                        v33,
                                        data,
                                        v23);
    goto LABEL_38;
  }
  return 0LL;
}