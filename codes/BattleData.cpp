void __fastcall BattleData___cctor(const MethodInfo *method)
{
  __int64 v1; // x1
  __int64 v2; // x1
  __int64 v3; // x1
  __int64 v4; // x1
  __int64 v5; // x1
  __int64 v6; // x1
  struct BattleData_StaticFields *static_fields; // x0
  __int64 v8; // x1
  struct BattleData_StaticFields *v9; // x0
  __int64 v10; // x1
  struct BattleData_StaticFields *v11; // x0
  __int64 v12; // x1
  struct BattleData_StaticFields *v13; // x0
  __int64 v14; // x1
  struct BattleData_StaticFields *v15; // x0
  __int64 v16; // x1

  if ( (byte_40F6AD8 & 1) == 0 )
  {
    sub_B16FFC(&BattleData_TypeInfo, v1);
    sub_B16FFC(&StringLiteral_22064/*"skipSkill"*/, v2);
    sub_B16FFC(&StringLiteral_21013/*"noSkipDeadFirstIdListKey"*/, v3);
    sub_B16FFC(&StringLiteral_12836/*"SkipDead"*/, v4);
    sub_B16FFC(&StringLiteral_13534/*"TdConstantVel"*/, v5);
    sub_B16FFC(&StringLiteral_19073/*"hightSpeed"*/, v6);
    byte_40F6AD8 = 1;
  }
  static_fields = BattleData_TypeInfo->static_fields;
  v8 = StringLiteral_21013/*"noSkipDeadFirstIdListKey"*/;
  static_fields->NO_SKIP_DEAD_FIRST_ID_LIST_KEY = (struct System_String_o *)StringLiteral_21013/*"noSkipDeadFirstIdListKey"*/;
  sub_B16F98(&static_fields->NO_SKIP_DEAD_FIRST_ID_LIST_KEY, v8);
  v9 = BattleData_TypeInfo->static_fields;
  v10 = StringLiteral_22064/*"skipSkill"*/;
  v9->skipKey = (struct System_String_o *)StringLiteral_22064/*"skipSkill"*/;
  sub_B16F98(&v9->skipKey, v10);
  v11 = BattleData_TypeInfo->static_fields;
  v12 = StringLiteral_19073/*"hightSpeed"*/;
  v11->speedKey = (struct System_String_o *)StringLiteral_19073/*"hightSpeed"*/;
  sub_B16F98(&v11->speedKey, v12);
  v13 = BattleData_TypeInfo->static_fields;
  v14 = StringLiteral_13534/*"TdConstantVel"*/;
  v13->TdCvKey = (struct System_String_o *)StringLiteral_13534/*"TdConstantVel"*/;
  sub_B16F98(&v13->TdCvKey, v14);
  v15 = BattleData_TypeInfo->static_fields;
  v16 = StringLiteral_12836/*"SkipDead"*/;
  v15->SkipDeadKey = (struct System_String_o *)StringLiteral_12836/*"SkipDead"*/;
  sub_B16F98(&v15->SkipDeadKey, v16);
}


void __fastcall BattleData___ctor(BattleData_o *this, const MethodInfo *method)
{
  __int64 v2; // x2
  __int64 v3; // x3
  __int64 v4; // x4
  __int64 v6; // x1
  __int64 v7; // x1
  __int64 v8; // x1
  __int64 v9; // x1
  __int64 v10; // x1
  __int64 v11; // x1
  __int64 v12; // x1
  __int64 v13; // x1
  __int64 v14; // x1
  __int64 v15; // x1
  __int64 v16; // x1
  __int64 v17; // x1
  __int64 v18; // x1
  __int64 v19; // x1
  __int64 v20; // x1
  __int64 v21; // x1
  __int64 v22; // x1
  __int64 v23; // x1
  __int64 v24; // x1
  __int64 v25; // x1
  __int64 v26; // x1
  __int64 v27; // x1
  __int64 v28; // x1
  __int64 v29; // x1
  __int64 v30; // x1
  __int64 v31; // x1
  __int64 v32; // x1
  __int64 v33; // x1
  System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData__o *v34; // x21
  __int64 v35; // x2
  struct System_Int32_array *v36; // x0
  __int64 v37; // x2
  struct System_Int32_array *v38; // x0
  __int64 v39; // x1
  __int64 v40; // x2
  __int64 v41; // x3
  __int64 v42; // x4
  System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData__o *v43; // x21
  __int64 v44; // x1
  __int64 v45; // x2
  __int64 v46; // x3
  __int64 v47; // x4
  PlayerServantNoblePhantasmUsageData_o *v48; // x21
  __int64 v49; // x1
  __int64 v50; // x2
  __int64 v51; // x3
  __int64 v52; // x4
  StageEntity_c *v53; // x0
  System_Collections_Generic_List_int__o *v54; // x20
  __int64 v55; // x1
  __int64 v56; // x2
  __int64 v57; // x3
  __int64 v58; // x4
  QuestKnockdownInfo_o *v59; // x20
  __int64 v60; // x2
  struct BattleCommandData_array *v61; // x0
  __int64 v62; // x2
  struct BattleCommandData_array *v63; // x0
  __int64 v64; // x1
  __int64 v65; // x2
  __int64 v66; // x3
  __int64 v67; // x4
  System_Collections_Generic_List_int__o *v68; // x20
  __int64 v69; // x2
  struct BattleCommandData_array *v70; // x0
  __int64 v71; // x1
  __int64 v72; // x2
  __int64 v73; // x3
  __int64 v74; // x4
  System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData__o *v75; // x20
  __int64 v76; // x1
  __int64 v77; // x2
  __int64 v78; // x3
  __int64 v79; // x4
  System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData__o *v80; // x20
  __int64 v81; // x1
  __int64 v82; // x2
  __int64 v83; // x3
  __int64 v84; // x4
  System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData__o *v85; // x20
  __int64 v86; // x1
  __int64 v87; // x2
  __int64 v88; // x3
  __int64 v89; // x4
  ItemDroppedSkillShiftInfo_o *v90; // x20
  __int64 v91; // x1
  __int64 v92; // x2
  __int64 v93; // x3
  __int64 v94; // x4
  System_Collections_Generic_List_int__o *v95; // x20
  __int64 v96; // x1
  __int64 v97; // x2
  __int64 v98; // x3
  __int64 v99; // x4
  System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData__o *v100; // x20
  __int64 v101; // x1
  __int64 v102; // x2
  __int64 v103; // x3
  __int64 v104; // x4
  System_Collections_Generic_Dictionary_int__int__o *v105; // x20
  __int64 v106; // x1
  __int64 v107; // x2
  __int64 v108; // x3
  __int64 v109; // x4
  ChangeBattlePhaseNotify_o *v110; // x20
  __int64 v111; // x2
  struct System_Int32_array *v112; // x0
  __int64 v113; // x2
  struct System_Int32_array *v114; // x1
  __int64 v115; // x2
  __int64 v116; // x1
  __int64 v117; // x2
  __int64 v118; // x3
  __int64 v119; // x4
  BattleAttackManager_o *v120; // x20
  __int64 v121; // x1
  __int64 v122; // x2
  __int64 v123; // x3
  __int64 v124; // x4
  BaseBattleEvent_o *v125; // x20
  __int64 v126; // x1
  __int64 v127; // x2
  __int64 v128; // x3
  __int64 v129; // x4
  BattleDefenceTargetData_o *v130; // x20
  __int64 v131; // x1
  __int64 v132; // x2
  __int64 v133; // x3
  __int64 v134; // x4
  System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData__o *v135; // x20
  __int64 v136; // x1
  __int64 v137; // x2
  __int64 v138; // x3
  __int64 v139; // x4
  System_Collections_Generic_List_double__o *v140; // x20
  __int64 v141; // x1
  __int64 v142; // x2
  __int64 v143; // x3
  __int64 v144; // x4
  System_Collections_Generic_List_int__o *v145; // x20
  __int64 v146; // x1
  __int64 v147; // x2
  __int64 v148; // x3
  __int64 v149; // x4
  System_Collections_Generic_List_int__o *v150; // x20
  __int64 v151; // x1
  __int64 v152; // x2
  __int64 v153; // x3
  __int64 v154; // x4
  System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData__o *v155; // x20
  __int64 v156; // x2
  struct System_Double_array *v157; // x0

  if ( (byte_40F6AD7 & 1) == 0 )
  {
    sub_B16FFC(&BaseBattleEvent_TypeInfo, method);
    sub_B16FFC(&BattleAttackManager_TypeInfo, v6);
    sub_B16FFC(&BattleCommandData___TypeInfo, v7);
    sub_B16FFC(&BattleDefenceTargetData_TypeInfo, v8);
    sub_B16FFC(&ChangeBattlePhaseNotify_TypeInfo, v9);
    sub_B16FFC(&Method_System_Collections_Generic_Dictionary_int__int___ctor__, v10);
    sub_B16FFC(&System_Collections_Generic_Dictionary_int__int__TypeInfo, v11);
    sub_B16FFC(&double___TypeInfo, v12);
    sub_B16FFC(&int___TypeInfo, v13);
    sub_B16FFC(&ItemDroppedSkillShiftInfo_TypeInfo, v14);
    sub_B16FFC(&Method_System_Collections_Generic_List_string___ctor__, v15);
    sub_B16FFC(&Method_System_Collections_Generic_List_DataVals___ctor__, v16);
    sub_B16FFC(&Method_System_Collections_Generic_List_int___ctor__, v17);
    sub_B16FFC(&Method_System_Collections_Generic_List_RestockServantLogic___ctor__, v18);
    sub_B16FFC(&Method_System_Collections_Generic_List_AiNpcBattleServantData___ctor__, v19);
    sub_B16FFC(&Method_System_Collections_Generic_List_double___ctor__, v20);
    sub_B16FFC(&Method_System_Collections_Generic_List_Dictionary_string__object____ctor__, v21);
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleActionData_BuffData___ctor__, v22);
    sub_B16FFC(&System_Collections_Generic_List_DataVals__TypeInfo, v23);
    sub_B16FFC(&System_Collections_Generic_List_int__TypeInfo, v24);
    sub_B16FFC(&System_Collections_Generic_List_Dictionary_string__object___TypeInfo, v25);
    sub_B16FFC(&System_Collections_Generic_List_string__TypeInfo, v26);
    sub_B16FFC(&System_Collections_Generic_List_BattleActionData_BuffData__TypeInfo, v27);
    sub_B16FFC(&System_Collections_Generic_List_double__TypeInfo, v28);
    sub_B16FFC(&System_Collections_Generic_List_RestockServantLogic__TypeInfo, v29);
    sub_B16FFC(&System_Collections_Generic_List_AiNpcBattleServantData__TypeInfo, v30);
    sub_B16FFC(&PlayerServantNoblePhantasmUsageData_TypeInfo, v31);
    sub_B16FFC(&QuestKnockdownInfo_TypeInfo, v32);
    sub_B16FFC(&StageEntity_TypeInfo, v33);
    byte_40F6AD7 = 1;
  }
  v34 = (System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData__o *)sub_B170CC(
                                                                                                  System_Collections_Generic_List_AiNpcBattleServantData__TypeInfo,
                                                                                                  method,
                                                                                                  v2,
                                                                                                  v3,
                                                                                                  v4);
  System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData____ctor(
    v34,
    (const MethodInfo_2F25014 *)Method_System_Collections_Generic_List_AiNpcBattleServantData___ctor__);
  this->fields.aiNpcDataList = (struct System_Collections_Generic_List_AiNpcBattleServantData__o *)v34;
  sub_B16F98(&this->fields.aiNpcDataList, v34);
  v36 = (struct System_Int32_array *)sub_B17014(int___TypeInfo, 0LL, v35);
  this->fields.turnEffect = v36;
  sub_B16F98(&this->fields.turnEffect, v36);
  v38 = (struct System_Int32_array *)sub_B17014(int___TypeInfo, 1LL, v37);
  this->fields.waveClearNeedTurn = v38;
  sub_B16F98(&this->fields.waveClearNeedTurn, v38);
  v43 = (System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData__o *)sub_B170CC(
                                                                                                  System_Collections_Generic_List_Dictionary_string__object___TypeInfo,
                                                                                                  v39,
                                                                                                  v40,
                                                                                                  v41,
                                                                                                  v42);
  System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData____ctor(
    v43,
    (const MethodInfo_2F25014 *)Method_System_Collections_Generic_List_Dictionary_string__object____ctor__);
  this->fields.firstNpPlayList = (struct System_Collections_Generic_List_Dictionary_string__object___o *)v43;
  sub_B16F98(&this->fields.firstNpPlayList, v43);
  v48 = (PlayerServantNoblePhantasmUsageData_o *)sub_B170CC(
                                                   PlayerServantNoblePhantasmUsageData_TypeInfo,
                                                   v44,
                                                   v45,
                                                   v46,
                                                   v47);
  PlayerServantNoblePhantasmUsageData___ctor(v48, 0LL);
  this->fields.playerServantNoblePhantasmUsageData = v48;
  sub_B16F98(&this->fields.playerServantNoblePhantasmUsageData, v48);
  v53 = StageEntity_TypeInfo;
  if ( (BYTE3(StageEntity_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0 && !StageEntity_TypeInfo->_2.cctor_finished )
  {
    j_il2cpp_runtime_class_init_0(StageEntity_TypeInfo);
    v53 = StageEntity_TypeInfo;
  }
  this->fields.enemyActCount = v53->static_fields->DEFAULT_ENEMY_ACTION_COUNT;
  v54 = (System_Collections_Generic_List_int__o *)sub_B170CC(
                                                    System_Collections_Generic_List_int__TypeInfo,
                                                    v49,
                                                    v50,
                                                    v51,
                                                    v52);
  System_Collections_Generic_List_int____ctor(
    v54,
    (const MethodInfo_2F0F794 *)Method_System_Collections_Generic_List_int___ctor__);
  this->fields.lockTargetIdList = v54;
  sub_B16F98(&this->fields.lockTargetIdList, v54);
  v59 = (QuestKnockdownInfo_o *)sub_B170CC(QuestKnockdownInfo_TypeInfo, v55, v56, v57, v58);
  QuestKnockdownInfo___ctor(v59, 0LL);
  this->fields.currenctKnockdown = v59;
  sub_B16F98(&this->fields.currenctKnockdown, v59);
  v61 = (struct BattleCommandData_array *)sub_B17014(BattleCommandData___TypeInfo, 0LL, v60);
  this->fields.fixedCommands = v61;
  sub_B16F98(&this->fields.fixedCommands, v61);
  v63 = (struct BattleCommandData_array *)sub_B17014(BattleCommandData___TypeInfo, 0LL, v62);
  this->fields.wkCommands = v63;
  sub_B16F98(&this->fields.wkCommands, v63);
  v68 = (System_Collections_Generic_List_int__o *)sub_B170CC(
                                                    System_Collections_Generic_List_int__TypeInfo,
                                                    v64,
                                                    v65,
                                                    v66,
                                                    v67);
  System_Collections_Generic_List_int____ctor(
    v68,
    (const MethodInfo_2F0F794 *)Method_System_Collections_Generic_List_int___ctor__);
  this->fields.doNotSelectCommandSvtIdList = v68;
  sub_B16F98(&this->fields.doNotSelectCommandSvtIdList, v68);
  v70 = (struct BattleCommandData_array *)sub_B17014(BattleCommandData___TypeInfo, 0LL, v69);
  this->fields.canSelectCommands = v70;
  sub_B16F98(&this->fields.canSelectCommands, v70);
  this->fields.isCalcCritical = 1;
  v75 = (System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData__o *)sub_B170CC(
                                                                                                  System_Collections_Generic_List_DataVals__TypeInfo,
                                                                                                  v71,
                                                                                                  v72,
                                                                                                  v73,
                                                                                                  v74);
  System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData____ctor(
    v75,
    (const MethodInfo_2F25014 *)Method_System_Collections_Generic_List_DataVals___ctor__);
  this->fields.performedValsList = (struct System_Collections_Generic_List_DataVals__o *)v75;
  sub_B16F98(&this->fields.performedValsList, v75);
  v80 = (System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData__o *)sub_B170CC(
                                                                                                  System_Collections_Generic_List_BattleActionData_BuffData__TypeInfo,
                                                                                                  v76,
                                                                                                  v77,
                                                                                                  v78,
                                                                                                  v79);
  System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData____ctor(
    v80,
    (const MethodInfo_2F25014 *)Method_System_Collections_Generic_List_BattleActionData_BuffData___ctor__);
  this->fields.freshBuffDataList = (struct System_Collections_Generic_List_BattleActionData_BuffData__o *)v80;
  sub_B16F98(&this->fields.freshBuffDataList, v80);
  this->fields.continueCount = 1;
  v85 = (System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData__o *)sub_B170CC(
                                                                                                  System_Collections_Generic_List_RestockServantLogic__TypeInfo,
                                                                                                  v81,
                                                                                                  v82,
                                                                                                  v83,
                                                                                                  v84);
  System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData____ctor(
    v85,
    (const MethodInfo_2F25014 *)Method_System_Collections_Generic_List_RestockServantLogic___ctor__);
  this->fields.restockServantLogicList = (struct System_Collections_Generic_List_RestockServantLogic__o *)v85;
  sub_B16F98(&this->fields.restockServantLogicList, v85);
  v90 = (ItemDroppedSkillShiftInfo_o *)sub_B170CC(ItemDroppedSkillShiftInfo_TypeInfo, v86, v87, v88, v89);
  ItemDroppedSkillShiftInfo___ctor(v90, 0LL);
  this->fields.itemDroppedSkillShiftInfo = v90;
  sub_B16F98(&this->fields.itemDroppedSkillShiftInfo, v90);
  this->fields.winResult = 1;
  this->fields.systemflg_acceleration = 1;
  *(_WORD *)&this->fields.systemflg_selectcancel = 257;
  this->fields.typeTurn = 1;
  v95 = (System_Collections_Generic_List_int__o *)sub_B170CC(
                                                    System_Collections_Generic_List_int__TypeInfo,
                                                    v91,
                                                    v92,
                                                    v93,
                                                    v94);
  System_Collections_Generic_List_int____ctor(
    v95,
    (const MethodInfo_2F0F794 *)Method_System_Collections_Generic_List_int___ctor__);
  this->fields.playedSpeedOneSkillIdList = v95;
  sub_B16F98(&this->fields.playedSpeedOneSkillIdList, v95);
  v100 = (System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData__o *)sub_B170CC(
                                                                                                   System_Collections_Generic_List_string__TypeInfo,
                                                                                                   v96,
                                                                                                   v97,
                                                                                                   v98,
                                                                                                   v99);
  System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData____ctor(
    v100,
    (const MethodInfo_2F25014 *)Method_System_Collections_Generic_List_string___ctor__);
  this->fields.playedSpeedOneFieldIdList = (struct System_Collections_Generic_List_string__o *)v100;
  sub_B16F98(&this->fields.playedSpeedOneFieldIdList, v100);
  v105 = (System_Collections_Generic_Dictionary_int__int__o *)sub_B170CC(
                                                                System_Collections_Generic_Dictionary_int__int__TypeInfo,
                                                                v101,
                                                                v102,
                                                                v103,
                                                                v104);
  System_Collections_Generic_Dictionary_int__int____ctor(
    v105,
    (const MethodInfo_2DDC410 *)Method_System_Collections_Generic_Dictionary_int__int___ctor__);
  this->fields.usedEventMasterSkillDict = v105;
  sub_B16F98(&this->fields.usedEventMasterSkillDict, v105);
  v110 = (ChangeBattlePhaseNotify_o *)sub_B170CC(ChangeBattlePhaseNotify_TypeInfo, v106, v107, v108, v109);
  ChangeBattlePhaseNotify___ctor(v110, 0LL);
  this->fields.changePhaseNotify = v110;
  sub_B16F98(&this->fields.changePhaseNotify, v110);
  this->fields.justDeadTargetId = -1;
  v112 = (struct System_Int32_array *)sub_B17014(int___TypeInfo, 1LL, v111);
  if ( !v112 )
    goto LABEL_11;
  v114 = v112;
  if ( !v112->max_length )
    goto LABEL_12;
  v112->m_Items[1] = 1;
  this->fields.maleIndiv = v112;
  sub_B16F98(&this->fields.maleIndiv, v112);
  v112 = (struct System_Int32_array *)sub_B17014(int___TypeInfo, 1LL, v115);
  if ( !v112 )
LABEL_11:
    sub_B170D4();
  v114 = v112;
  if ( !v112->max_length )
  {
LABEL_12:
    sub_B17100(v112, v114, v113);
    sub_B170A0();
  }
  v112->m_Items[1] = 2;
  this->fields.femaleIndiv = v112;
  sub_B16F98(&this->fields.femaleIndiv, v112);
  v120 = (BattleAttackManager_o *)sub_B170CC(BattleAttackManager_TypeInfo, v116, v117, v118, v119);
  BattleAttackManager___ctor(v120, 0LL);
  this->fields.battleAtkManager = v120;
  sub_B16F98(&this->fields.battleAtkManager, v120);
  v125 = (BaseBattleEvent_o *)sub_B170CC(BaseBattleEvent_TypeInfo, v121, v122, v123, v124);
  BaseBattleEvent___ctor(v125, 0LL);
  this->fields.battleEvent = v125;
  sub_B16F98(&this->fields.battleEvent, v125);
  this->fields.temporarySpell = -1;
  v130 = (BattleDefenceTargetData_o *)sub_B170CC(BattleDefenceTargetData_TypeInfo, v126, v127, v128, v129);
  BattleDefenceTargetData___ctor(v130, 0LL);
  this->fields.defenceTargetData = v130;
  sub_B16F98(&this->fields.defenceTargetData, v130);
  v135 = (System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData__o *)sub_B170CC(
                                                                                                   System_Collections_Generic_List_string__TypeInfo,
                                                                                                   v131,
                                                                                                   v132,
                                                                                                   v133,
                                                                                                   v134);
  System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData____ctor(
    v135,
    (const MethodInfo_2F25014 *)Method_System_Collections_Generic_List_string___ctor__);
  this->fields.commonEffectPathList = (struct System_Collections_Generic_List_string__o *)v135;
  sub_B16F98(&this->fields.commonEffectPathList, v135);
  this->fields.masterSkillUseWaveTurn = -1LL;
  v140 = (System_Collections_Generic_List_double__o *)sub_B170CC(
                                                        System_Collections_Generic_List_double__TypeInfo,
                                                        v136,
                                                        v137,
                                                        v138,
                                                        v139);
  System_Collections_Generic_List_double____ctor(
    v140,
    (const MethodInfo_2ED33F4 *)Method_System_Collections_Generic_List_double___ctor__);
  this->fields.chainTypeList = v140;
  sub_B16F98(&this->fields.chainTypeList, v140);
  v145 = (System_Collections_Generic_List_int__o *)sub_B170CC(
                                                     System_Collections_Generic_List_int__TypeInfo,
                                                     v141,
                                                     v142,
                                                     v143,
                                                     v144);
  System_Collections_Generic_List_int____ctor(
    v145,
    (const MethodInfo_2F0F794 *)Method_System_Collections_Generic_List_int___ctor__);
  this->fields.listQuestRouteId = v145;
  sub_B16F98(&this->fields.listQuestRouteId, v145);
  this->fields.isShowMasterSkillCutIn = 1;
  v150 = (System_Collections_Generic_List_int__o *)sub_B170CC(
                                                     System_Collections_Generic_List_int__TypeInfo,
                                                     v146,
                                                     v147,
                                                     v148,
                                                     v149);
  System_Collections_Generic_List_int____ctor(
    v150,
    (const MethodInfo_2F0F794 *)Method_System_Collections_Generic_List_int___ctor__);
  this->fields.noSkipDeadFirstIdUseThisTurn = v150;
  sub_B16F98(&this->fields.noSkipDeadFirstIdUseThisTurn, v150);
  *(_QWORD *)&this->fields.tutorialId = -1LL;
  v155 = (System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData__o *)sub_B170CC(
                                                                                                   System_Collections_Generic_List_Dictionary_string__object___TypeInfo,
                                                                                                   v151,
                                                                                                   v152,
                                                                                                   v153,
                                                                                                   v154);
  System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData____ctor(
    v155,
    (const MethodInfo_2F25014 *)Method_System_Collections_Generic_List_Dictionary_string__object____ctor__);
  this->fields.tmpFirstNpPlayList = (struct System_Collections_Generic_List_Dictionary_string__object___o *)v155;
  sub_B16F98(&this->fields.tmpFirstNpPlayList, v155);
  v157 = (struct System_Double_array *)sub_B17014(double___TypeInfo, 1LL, v156);
  this->fields.wkZeroParam = v157;
  sub_B16F98(&this->fields.wkZeroParam, v157);
  UnityEngine_MonoBehaviour___ctor((UnityEngine_MonoBehaviour_o *)this, 0LL);
}


void __fastcall BattleData__ActPassiveBuff(
        BattleData_o *this,
        BattleSkillInfoData_o *skillInfo,
        bool isShift,
        bool isDeckDataLoad,
        const MethodInfo *method)
{
  __int64 v9; // x1
  UnityEngine_Object_o *logic; // x23
  const MethodInfo *v11; // x1
  struct BattleLogic_o *v12; // x8
  BattleLogicSkill_o *logicSkill; // x0
  UnityEngine_Object_o *Instance; // x22
  WebViewManager_o *v15; // x0

  if ( (byte_40F6AD6 & 1) == 0 )
  {
    sub_B16FFC(&UnityEngine_Object_TypeInfo, skillInfo);
    sub_B16FFC(&Method_SingletonMonoBehaviour_WarBoardManager__get_Instance__, v9);
    byte_40F6AD6 = 1;
  }
  logic = (UnityEngine_Object_o *)this->fields.logic;
  if ( (BYTE3(UnityEngine_Object_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0
    && !UnityEngine_Object_TypeInfo->_2.cctor_finished )
  {
    j_il2cpp_runtime_class_init_0(UnityEngine_Object_TypeInfo);
  }
  if ( UnityEngine_Object__op_Inequality(logic, 0LL, 0LL) )
  {
    v12 = this->fields.logic;
    if ( v12 )
    {
      logicSkill = v12->fields.logicSkill;
      if ( logicSkill )
        BattleLogicSkill__actPassiveSkill(logicSkill, skillInfo, isShift, isDeckDataLoad, 0LL);
      return;
    }
LABEL_18:
    sub_B170D4();
  }
  if ( BattleData__IsWarBoard(this, v11) )
  {
    Instance = (UnityEngine_Object_o *)SingletonMonoBehaviour_WebViewManager___get_Instance((const MethodInfo_2A54F38 *)Method_SingletonMonoBehaviour_WarBoardManager__get_Instance__);
    if ( (BYTE3(UnityEngine_Object_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0
      && !UnityEngine_Object_TypeInfo->_2.cctor_finished )
    {
      j_il2cpp_runtime_class_init_0(UnityEngine_Object_TypeInfo);
    }
    if ( UnityEngine_Object__op_Inequality(Instance, 0LL, 0LL) )
    {
      v15 = SingletonMonoBehaviour_WebViewManager___get_Instance((const MethodInfo_2A54F38 *)Method_SingletonMonoBehaviour_WarBoardManager__get_Instance__);
      if ( v15 )
      {
        WarBoardManager__ActPassiveSkill((WarBoardManager_o *)v15, skillInfo, isShift, isDeckDataLoad, 0LL);
        return;
      }
      goto LABEL_18;
    }
  }
}


void __fastcall BattleData__AddChainCount(BattleData_o *this, const MethodInfo *method)
{
  const MethodInfo *v2; // x2
  struct BattleComboData_o *combodata; // x8
  int32_t flashtype; // w8
  struct BattleComboData_o *v6; // x8
  int32_t v7; // w1
  struct BattleComboData_o *v8; // x8
  struct BattleComboData_o *v9; // x8
  struct BattleComboData_o *v10; // x8

  combodata = this->fields.combodata;
  if ( !combodata )
    goto LABEL_26;
  if ( !combodata->fields.flash )
    goto LABEL_16;
  flashtype = combodata->fields.flashtype;
  switch ( flashtype )
  {
    case 3:
      BattleData__AddChainCount_18776828(this, 3, v2);
      v8 = this->fields.combodata;
      if ( !v8 )
        goto LABEL_26;
      if ( v8->fields.samecount >= 3 )
      {
        v7 = 7;
        goto LABEL_15;
      }
      break;
    case 2:
      BattleData__AddChainCount_18776828(this, 2, v2);
      v9 = this->fields.combodata;
      if ( !v9 )
        goto LABEL_26;
      if ( v9->fields.samecount >= 3 )
      {
        v7 = 6;
        goto LABEL_15;
      }
      break;
    case 1:
      BattleData__AddChainCount_18776828(this, 1, v2);
      v6 = this->fields.combodata;
      if ( !v6 )
        goto LABEL_26;
      if ( v6->fields.samecount >= 3 )
      {
        v7 = 5;
LABEL_15:
        BattleData__AddChainCount_18776828(this, v7, v2);
      }
      break;
  }
LABEL_16:
  v10 = this->fields.combodata;
  if ( !v10
    || v10->fields.isMighty
    && ((BattleData__AddChainCount_18776828(this, 9, v2), (v10 = this->fields.combodata) == 0LL)
     || v10->fields.samecount >= 3
     && (BattleData__AddChainCount_18776828(this, 10, v2), (v10 = this->fields.combodata) == 0LL))
    || v10->fields.isTreasureDvc
    && (BattleData__AddChainCount_18776828(this, 8, v2), (v10 = this->fields.combodata) == 0LL) )
  {
LABEL_26:
    sub_B170D4();
  }
  if ( v10->fields.samecount >= 3 )
    BattleData__AddChainCount_18776828(this, 4, v2);
}


// local variable allocation has failed, the output may be wrong!
void __fastcall BattleData__AddChainCount_18776828(
        BattleData_o *this,
        int32_t chainCountType,
        const MethodInfo *method)
{
  __int64 v5; // x1
  __int64 v6; // x1
  __int64 v7; // x1
  __int64 v8; // x1
  System_Collections_Generic_Dictionary_int__int__o *chainCountDict; // x0
  System_Collections_Generic_Dictionary_int__int__o *v10; // x0
  System_Collections_Generic_Dictionary_int__int__o *v11; // x21
  int32_t Item; // w0
  System_Collections_Generic_List_double__o *chainTypeList; // x0

  if ( (byte_40F6A33 & 1) == 0 )
  {
    sub_B16FFC(&Method_System_Collections_Generic_Dictionary_int__int__Add__, *(_QWORD *)&chainCountType);
    sub_B16FFC(&Method_System_Collections_Generic_Dictionary_int__int__ContainsKey__, v5);
    sub_B16FFC(&Method_System_Collections_Generic_Dictionary_int__int__get_Item__, v6);
    sub_B16FFC(&Method_System_Collections_Generic_Dictionary_int__int__set_Item__, v7);
    sub_B16FFC(&Method_System_Collections_Generic_List_double__Add__, v8);
    byte_40F6A33 = 1;
  }
  chainCountDict = this->fields.chainCountDict;
  if ( !chainCountDict )
    goto LABEL_10;
  if ( !System_Collections_Generic_Dictionary_int__int___ContainsKey(
          chainCountDict,
          chainCountType,
          (const MethodInfo_2DDD218 *)Method_System_Collections_Generic_Dictionary_int__int__ContainsKey__) )
  {
    v10 = this->fields.chainCountDict;
    if ( !v10 )
      goto LABEL_10;
    System_Collections_Generic_Dictionary_int__int___Add(
      v10,
      chainCountType,
      0,
      (const MethodInfo_2DDCFB4 *)Method_System_Collections_Generic_Dictionary_int__int__Add__);
  }
  v11 = this->fields.chainCountDict;
  if ( !v11
    || (Item = System_Collections_Generic_Dictionary_int__int___get_Item(
                 this->fields.chainCountDict,
                 chainCountType,
                 (const MethodInfo_2DDCEF4 *)Method_System_Collections_Generic_Dictionary_int__int__get_Item__),
        System_Collections_Generic_Dictionary_int__int___set_Item(
          v11,
          chainCountType,
          Item + 1,
          (const MethodInfo_2DDCF8C *)Method_System_Collections_Generic_Dictionary_int__int__set_Item__),
        (chainTypeList = this->fields.chainTypeList) == 0LL) )
  {
LABEL_10:
    sub_B170D4();
  }
  System_Collections_Generic_List_double___Add(
    chainTypeList,
    (double)chainCountType,
    (const MethodInfo_2ED414C *)Method_System_Collections_Generic_List_double__Add__);
}


void __fastcall BattleData__AddEnemyEntryCount(BattleData_o *this, const MethodInfo *method)
{
  ++this->fields._EnemyEntryCountOnThisTurn_k__BackingField;
}


void __fastcall BattleData__AddFreshBuffList(
        BattleData_o *this,
        BattleActionData_BuffData_o *buff,
        const MethodInfo *method)
{
  struct System_Collections_Generic_List_BattleActionData_BuffData__o *freshBuffDataList; // x0

  if ( (byte_40F6A3F & 1) == 0 )
  {
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleActionData_BuffData__Add__, buff);
    byte_40F6A3F = 1;
  }
  freshBuffDataList = this->fields.freshBuffDataList;
  if ( !freshBuffDataList )
    sub_B170D4();
  System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData___Add(
    (System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData__o *)freshBuffDataList,
    (EventMissionProgressRequest_Argument_ProgressData_o *)buff,
    (const MethodInfo_2F25CD8 *)Method_System_Collections_Generic_List_BattleActionData_BuffData__Add__);
}


void __fastcall BattleData__AddMasterSkillDelayIfNeeded(BattleData_o *this, const MethodInfo *method)
{
  __int64 v3; // x1
  __int64 v4; // x1
  __int64 v5; // x1
  struct BattleData_o *data; // x8
  BattleEntity_o *battle_ent; // x0
  QuestPhaseEntity_o *QuestPhaseEntity; // x0
  struct BattleData_o *v9; // x8
  QuestPhaseEntity_o *v10; // x19
  System_Collections_Generic_List_BattleLogicBuff_ReduceHpProcess_BuffInfo__o *masterSkillInfo; // x0
  Il2CppObject *current; // x20
  int32_t MasterSkillDelay; // w0
  System_Collections_Generic_List_Enumerator_T__o v14; // [xsp+8h] [xbp-38h] BYREF

  if ( (byte_40F6AB4 & 1) == 0 )
  {
    sub_B16FFC(&Method_System_Collections_Generic_List_Enumerator_BattleSkillInfoData__Dispose__, method);
    sub_B16FFC(&Method_System_Collections_Generic_List_Enumerator_BattleSkillInfoData__MoveNext__, v3);
    sub_B16FFC(&Method_System_Collections_Generic_List_Enumerator_BattleSkillInfoData__get_Current__, v4);
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleSkillInfoData__GetEnumerator__, v5);
    byte_40F6AB4 = 1;
  }
  memset(&v14, 0, sizeof(v14));
  data = this->fields.data;
  if ( !data
    || (battle_ent = data->fields.battle_ent) == 0LL
    || (QuestPhaseEntity = BattleEntity__GetQuestPhaseEntity(battle_ent, 0LL), (v9 = this->fields.data) == 0LL)
    || (v10 = QuestPhaseEntity,
        (masterSkillInfo = (System_Collections_Generic_List_BattleLogicBuff_ReduceHpProcess_BuffInfo__o *)v9->fields.masterSkillInfo) == 0LL) )
  {
    sub_B170D4();
  }
  System_Collections_Generic_List_BattleLogicBuff_ReduceHpProcess_BuffInfo___GetEnumerator(
    &v14,
    masterSkillInfo,
    (const MethodInfo_2F26B54 *)Method_System_Collections_Generic_List_BattleSkillInfoData__GetEnumerator__);
  while ( System_Collections_Generic_List_Enumerator_BattleLogicBuff_ReduceHpProcess_BuffInfo___MoveNext(
            &v14,
            (const MethodInfo_2074054 *)Method_System_Collections_Generic_List_Enumerator_BattleSkillInfoData__MoveNext__) )
  {
    current = v14.fields.current;
    if ( !v14.fields.current )
      sub_B170D4();
    if ( LODWORD(v14.fields.current[1].klass) == 1 )
    {
      if ( !v10 )
        sub_B170D4();
      MasterSkillDelay = QuestPhaseEntity__GetMasterSkillDelay(v10, 0LL);
      BattleSkillInfoData__TurnExtendForDelay((BattleSkillInfoData_o *)current, MasterSkillDelay, 999, 0LL);
    }
  }
  System_Collections_Generic_List_Enumerator_BattleLogicBuff_ReduceHpProcess_BuffInfo___Dispose(
    &v14,
    (const MethodInfo_2074050 *)Method_System_Collections_Generic_List_Enumerator_BattleSkillInfoData__Dispose__);
}


void __fastcall BattleData__AddPerformedVals(BattleData_o *this, DataVals_o *val, const MethodInfo *method)
{
  struct System_Collections_Generic_List_DataVals__o *performedValsList; // x0

  if ( (byte_40F6A3C & 1) == 0 )
  {
    sub_B16FFC(&Method_System_Collections_Generic_List_DataVals__Add__, val);
    byte_40F6A3C = 1;
  }
  performedValsList = this->fields.performedValsList;
  if ( !performedValsList )
    sub_B170D4();
  System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData___Add(
    (System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData__o *)performedValsList,
    (EventMissionProgressRequest_Argument_ProgressData_o *)val,
    (const MethodInfo_2F25CD8 *)Method_System_Collections_Generic_List_DataVals__Add__);
}


// local variable allocation has failed, the output may be wrong!
void __fastcall BattleData__AddQuestRouteId(BattleData_o *this, int32_t routeId, const MethodInfo *method)
{
  __int64 v5; // x1
  System_Collections_Generic_List_int__o *listQuestRouteId; // x0
  System_Collections_Generic_List_int__o *v7; // x0

  if ( (byte_40F6ACB & 1) == 0 )
  {
    sub_B16FFC(&Method_System_Collections_Generic_List_int__Add__, *(_QWORD *)&routeId);
    sub_B16FFC(&Method_System_Collections_Generic_List_int__Contains__, v5);
    byte_40F6ACB = 1;
  }
  listQuestRouteId = this->fields.listQuestRouteId;
  if ( !listQuestRouteId )
    goto LABEL_7;
  if ( System_Collections_Generic_List_int___Contains(
         listQuestRouteId,
         routeId,
         (const MethodInfo_2F10944 *)Method_System_Collections_Generic_List_int__Contains__) )
  {
    return;
  }
  v7 = this->fields.listQuestRouteId;
  if ( !v7 )
LABEL_7:
    sub_B170D4();
  System_Collections_Generic_List_int___Add(
    v7,
    routeId,
    (const MethodInfo_2F104F0 *)Method_System_Collections_Generic_List_int__Add__);
}


// local variable allocation has failed, the output may be wrong!
void __fastcall BattleData__AddServantVoicePlayed(
        BattleData_o *this,
        int32_t svtId,
        System_String_o *labelName,
        const MethodInfo *method)
{
  __int64 v7; // x1
  __int64 v8; // x1
  VoiceMaster_o *Master_WarQuestSelectionMaster; // x22
  System_String_o *v10; // x0
  int32_t FlagRequestNumber; // w0
  const MethodInfo *v12; // x4

  if ( (byte_40F6A07 & 1) == 0 )
  {
    sub_B16FFC(&Method_DataManager_GetMaster_VoiceMaster___, *(_QWORD *)&svtId);
    sub_B16FFC(&DataManager_TypeInfo, v7);
    sub_B16FFC(&StringLiteral_15842/*"_"*/, v8);
    byte_40F6A07 = 1;
  }
  if ( (BYTE3(DataManager_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0 && !DataManager_TypeInfo->_2.cctor_finished )
    j_il2cpp_runtime_class_init_0(DataManager_TypeInfo);
  Master_WarQuestSelectionMaster = (VoiceMaster_o *)DataManager__GetMaster_WarQuestSelectionMaster_((const MethodInfo_18C3224 *)Method_DataManager_GetMaster_VoiceMaster___);
  v10 = System_String__Concat_43743732((System_String_o *)StringLiteral_15842/*"_"*/, labelName, 0LL);
  if ( !Master_WarQuestSelectionMaster )
    sub_B170D4();
  FlagRequestNumber = VoiceMaster__getFlagRequestNumber(Master_WarQuestSelectionMaster, svtId, v10, 0, 0LL);
  if ( FlagRequestNumber )
    BattleData__AddServantVoicePlayed_18712544(this, svtId, FlagRequestNumber, 0, v12);
}


// local variable allocation has failed, the output may be wrong!
void __fastcall BattleData__AddServantVoicePlayed_18712544(
        BattleData_o *this,
        int32_t svtId,
        int32_t condValue,
        bool skipVoiceOffCheck,
        const MethodInfo *method)
{
  __int64 v9; // x1
  __int64 v10; // x1
  __int64 v11; // x1
  __int64 v12; // x1
  __int64 v13; // x1
  __int64 v14; // x1
  Il2CppObject *v15; // x21
  Il2CppObject *v16; // x0
  System_String_o *v17; // x0
  System_String_o *v18; // x0
  System_Xml_XmlQualifiedName_o *v19; // x21
  struct System_Collections_Generic_Dictionary_string__object__o *voicePlayedInfo; // x22
  System_Xml_Schema_XmlSchemaObject_o *v21; // x0
  struct System_Collections_Generic_Dictionary_string__object__o *v22; // x20
  UnityEngine_Purchasing_IStoreExtension_o *Item; // x0
  System_Xml_Schema_XmlSchemaObject_o *v24; // x0
  BattleData_o *v25; // x0
  const MethodInfo *v26; // x1
  __int64 v27; // [xsp+8h] [xbp-38h] BYREF
  int32_t v28; // [xsp+18h] [xbp-28h] BYREF
  int32_t v29; // [xsp+1Ch] [xbp-24h] BYREF

  v29 = svtId;
  if ( (byte_40F6A08 & 1) == 0 )
  {
    sub_B16FFC(&Method_System_Collections_Generic_Dictionary_string__object__ContainsKey__, *(_QWORD *)&svtId);
    sub_B16FFC(&Method_System_Collections_Generic_Dictionary_string__object__get_Item__, v9);
    sub_B16FFC(&Method_System_Collections_Generic_Dictionary_string__object__set_Item__, v10);
    sub_B16FFC(&Method_System_Collections_Generic_HashSet_string__Add__, v11);
    sub_B16FFC(&int_TypeInfo, v12);
    sub_B16FFC(&long_TypeInfo, v13);
    sub_B16FFC(&StringLiteral_23493/*"{0},{1}"*/, v14);
    byte_40F6A08 = 1;
  }
  if ( skipVoiceOffCheck || !BattleData__IsVoiceOffSvt(this, svtId, *(const MethodInfo **)&condValue) )
  {
    if ( condValue > 63 )
    {
      LODWORD(v27) = svtId;
      v15 = (Il2CppObject *)j_il2cpp_value_box_0(int_TypeInfo, &v27);
      v28 = condValue;
      v16 = (Il2CppObject *)j_il2cpp_value_box_0(int_TypeInfo, &v28);
      v17 = System_String__Format_43739268((System_String_o *)StringLiteral_23493/*"{0},{1}"*/, v15, v16, 0LL);
      if ( this->fields.voicePlayedOver64Info )
      {
        System_Collections_Generic_HashSet_WarBoardAIRoute_RouteData___Add(
          (System_Collections_Generic_HashSet_WarBoardAIRoute_RouteData__o *)this->fields.voicePlayedOver64Info,
          (WarBoardAIRoute_RouteData_o *)v17,
          (const MethodInfo_21DFB18 *)Method_System_Collections_Generic_HashSet_string__Add__);
        return;
      }
      goto LABEL_17;
    }
    v18 = System_Int32__ToString((int32_t)&v29, 0LL);
    if ( !this->fields.voicePlayedInfo )
      goto LABEL_17;
    v19 = (System_Xml_XmlQualifiedName_o *)v18;
    if ( !System_Collections_Generic_Dictionary_XmlQualifiedName__XmlSchemaObject___ContainsKey(
            (System_Collections_Generic_Dictionary_XmlQualifiedName__XmlSchemaObject__o *)this->fields.voicePlayedInfo,
            (System_Xml_XmlQualifiedName_o *)v18,
            (const MethodInfo_2DA3E8C *)Method_System_Collections_Generic_Dictionary_string__object__ContainsKey__) )
    {
      voicePlayedInfo = this->fields.voicePlayedInfo;
      v27 = 0LL;
      v21 = (System_Xml_Schema_XmlSchemaObject_o *)j_il2cpp_value_box_0(long_TypeInfo, &v27);
      if ( !voicePlayedInfo )
        goto LABEL_17;
      System_Collections_Generic_Dictionary_XmlQualifiedName__XmlSchemaObject___set_Item(
        (System_Collections_Generic_Dictionary_XmlQualifiedName__XmlSchemaObject__o *)voicePlayedInfo,
        v19,
        v21,
        (const MethodInfo_2DA3BF0 *)Method_System_Collections_Generic_Dictionary_string__object__set_Item__);
    }
    v22 = this->fields.voicePlayedInfo;
    if ( !v22
      || (Item = System_Collections_Generic_Dictionary_Type__IStoreExtension___get_Item(
                   (System_Collections_Generic_Dictionary_Type__IStoreExtension__o *)v22,
                   (System_Type_o *)v19,
                   (const MethodInfo_2DA3B54 *)Method_System_Collections_Generic_Dictionary_string__object__get_Item__)) == 0LL )
    {
LABEL_17:
      sub_B170D4();
    }
    if ( Item->klass->_1.element_class == long_TypeInfo->_1.element_class )
    {
      v27 = *(_QWORD *)j_il2cpp_object_unbox_0(Item) | (1LL << condValue);
      v24 = (System_Xml_Schema_XmlSchemaObject_o *)j_il2cpp_value_box_0(long_TypeInfo, &v27);
      System_Collections_Generic_Dictionary_XmlQualifiedName__XmlSchemaObject___set_Item(
        (System_Collections_Generic_Dictionary_XmlQualifiedName__XmlSchemaObject__o *)v22,
        v19,
        v24,
        (const MethodInfo_2DA3BF0 *)Method_System_Collections_Generic_Dictionary_string__object__set_Item__);
    }
    else
    {
      v25 = (BattleData_o *)sub_B173C8();
      BattleData__checkLimitTurn(v25, v26);
    }
  }
}


void __fastcall BattleData__AddTotalTurnDamage(BattleData_o *this, int64_t damage, const MethodInfo *method)
{
  QuestEntity_o *quest_ent; // x0

  quest_ent = this->fields.quest_ent;
  if ( !quest_ent )
    sub_B170D4();
  if ( QuestEntity__HasFlag(quest_ent, 0x4000000LL, 0LL) )
    this->fields.totalDamageInTurn += damage;
}


void __fastcall BattleData__AddUseSkillId(BattleData_o *this, int32_t skillId, const MethodInfo *method)
{
  UseSkillEachTurn_o *useSkillEachTurn; // x19
  int64_t v5; // x0

  useSkillEachTurn = this->fields.useSkillEachTurn;
  v5 = ServantWaveTurnEventOwner__CalcWaveTurnVal(this->fields.wavecount, this->fields.turnCount, 0LL);
  if ( !useSkillEachTurn )
    sub_B170D4();
  UseSkillEachTurn__AddUseSkillId(useSkillEachTurn, v5, skillId, 0LL);
}


void __fastcall BattleData__AllocateAiToServants(
        BattleData_o *this,
        System_Collections_Generic_List_BattleServantData__array *svtDataLists,
        const MethodInfo *method)
{
  System_Collections_Generic_List_BattleServantData__array *v3; // x21
  __int64 v5; // x1
  __int64 v6; // x1
  __int64 v7; // x1
  __int64 v8; // x1
  __int64 v9; // x1
  __int64 v10; // x1
  __int64 v11; // x1
  __int64 v12; // x1
  __int64 v13; // x1
  __int64 v14; // x1
  __int64 v15; // x1
  __int64 v16; // x1
  __int64 v17; // x1
  StageEntity_o *StageEntity; // x0
  System_Collections_Generic_List_AiAllocationInfo__o *AiAllocationInfoList; // x0
  __int64 v20; // x1
  __int64 v21; // x2
  __int64 v22; // x3
  __int64 v23; // x4
  int max_length; // w8
  System_Collections_Generic_List_peRenderTexture_ChangeLayerObject__o *v25; // x20
  unsigned int v26; // w9
  int v27; // w22
  BattleData___c_c *v28; // x0
  System_Collections_Generic_List_USFGOSetAudioGroupIndexConditional_WeightIndex__o *v29; // x21
  struct BattleData___c_StaticFields *static_fields; // x8
  System_Action_DrawLotsDisplayMessage_DisplayedInGroup_SaveData__o *_9__560_0; // x22
  Il2CppObject *v32; // x23
  struct BattleData___c_StaticFields *v33; // x0
  __int64 v34; // x1
  __int64 v35; // x2
  __int64 v36; // x3
  __int64 v37; // x4
  BattleData___c__DisplayClass560_0_o *v38; // x22
  Il2CppObject *current; // x1
  BattleServantData_o **p_svt; // x21
  System_Int32_array *ConcatServantAndBuffIndividualityies; // x0
  __int64 v42; // x1
  __int64 v43; // x2
  __int64 v44; // x3
  __int64 v45; // x4
  System_Predicate_peRenderTexture_ChangeLayerObject__o *v46; // x23
  peRenderTexture_ChangeLayerObject_o *v47; // x22
  AiStateManager_o *AiStateManager; // x0
  int v49; // w8
  System_Collections_Generic_List_BattleServantData__array *v50; // [xsp+8h] [xbp-A8h]
  int v51; // [xsp+14h] [xbp-9Ch]
  int v52; // [xsp+18h] [xbp-98h]
  unsigned int v53; // [xsp+1Ch] [xbp-94h]
  _BYTE v54[28]; // [xsp+20h] [xbp-90h] BYREF
  int v55; // [xsp+3Ch] [xbp-74h]
  System_Collections_Generic_List_Enumerator_T__o v56; // [xsp+40h] [xbp-70h] BYREF

  v3 = svtDataLists;
  if ( (byte_40F6A9C & 1) == 0 )
  {
    sub_B16FFC(&Method_System_Action_BattleServantData___ctor__, svtDataLists);
    sub_B16FFC(&System_Action_BattleServantData__TypeInfo, v5);
    sub_B16FFC(&Method_System_Collections_Generic_List_Enumerator_BattleServantData__Dispose__, v6);
    sub_B16FFC(&Method_System_Collections_Generic_List_Enumerator_BattleServantData__MoveNext__, v7);
    sub_B16FFC(&Method_System_Collections_Generic_List_Enumerator_BattleServantData__get_Current__, v8);
    sub_B16FFC(&Method_System_Collections_Generic_List_AiAllocationInfo__Find__, v9);
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleServantData__ForEach__, v10);
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleServantData__GetEnumerator__, v11);
    sub_B16FFC(&Method_System_Predicate_AiAllocationInfo___ctor__, v12);
    sub_B16FFC(&System_Predicate_AiAllocationInfo__TypeInfo, v13);
    sub_B16FFC(&Method_BattleData___c__AllocateAiToServants_b__560_0__, v14);
    sub_B16FFC(&Method_BattleData___c__DisplayClass560_0__AllocateAiToServants_b__1__, v15);
    sub_B16FFC(&BattleData___c__DisplayClass560_0_TypeInfo, v16);
    sub_B16FFC(&BattleData___c_TypeInfo, v17);
    byte_40F6A9C = 1;
  }
  memset(&v56, 0, sizeof(v56));
  v55 = 0;
  StageEntity = BattleData__getStageEntity(this, (const MethodInfo *)svtDataLists);
  if ( !StageEntity )
    goto LABEL_38;
  AiAllocationInfoList = StageEntity__GetAiAllocationInfoList(StageEntity, 0LL);
  if ( !v3 )
    goto LABEL_38;
  max_length = v3->max_length;
  if ( max_length >= 1 )
  {
    v52 = 0;
    v25 = (System_Collections_Generic_List_peRenderTexture_ChangeLayerObject__o *)AiAllocationInfoList;
    v26 = 0;
    v27 = 0;
    v50 = v3;
    while ( 1 )
    {
      if ( v26 >= max_length )
      {
        sub_B17100(AiAllocationInfoList, v20, v21);
        sub_B170A0();
      }
      v53 = v26;
      v51 = v27;
      v28 = BattleData___c_TypeInfo;
      v29 = (System_Collections_Generic_List_USFGOSetAudioGroupIndexConditional_WeightIndex__o *)v3->m_Items[v26];
      if ( (BYTE3(BattleData___c_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0
        && !BattleData___c_TypeInfo->_2.cctor_finished )
      {
        j_il2cpp_runtime_class_init_0(BattleData___c_TypeInfo);
        v28 = BattleData___c_TypeInfo;
      }
      static_fields = v28->static_fields;
      _9__560_0 = (System_Action_DrawLotsDisplayMessage_DisplayedInGroup_SaveData__o *)static_fields->__9__560_0;
      if ( !_9__560_0 )
      {
        if ( (BYTE3(v28->vtable._0_Equals.methodPtr) & 4) != 0 && !v28->_2.cctor_finished )
        {
          j_il2cpp_runtime_class_init_0(v28);
          static_fields = BattleData___c_TypeInfo->static_fields;
        }
        v32 = (Il2CppObject *)static_fields->__9;
        _9__560_0 = (System_Action_DrawLotsDisplayMessage_DisplayedInGroup_SaveData__o *)sub_B170CC(
                                                                                           System_Action_BattleServantData__TypeInfo,
                                                                                           v20,
                                                                                           v21,
                                                                                           v22,
                                                                                           v23);
        System_Action_DrawLotsDisplayMessage_DisplayedInGroup_SaveData____ctor(
          _9__560_0,
          v32,
          Method_BattleData___c__AllocateAiToServants_b__560_0__,
          (const MethodInfo_24B7310 *)Method_System_Action_BattleServantData___ctor__);
        v33 = BattleData___c_TypeInfo->static_fields;
        v33->__9__560_0 = (struct System_Action_BattleServantData__o *)_9__560_0;
        sub_B16F98(&v33->__9__560_0, _9__560_0);
      }
      if ( !v29 )
        break;
      System_Collections_Generic_List_USFGOSetAudioGroupIndexConditional_WeightIndex___ForEach(
        v29,
        (System_Action_T__o *)_9__560_0,
        (const MethodInfo_2F269F0 *)Method_System_Collections_Generic_List_BattleServantData__ForEach__);
      if ( v25 )
      {
        System_Collections_Generic_List_BattleLogicBuff_ReduceHpProcess_BuffInfo___GetEnumerator(
          (System_Collections_Generic_List_Enumerator_T__o *)v54,
          (System_Collections_Generic_List_BattleLogicBuff_ReduceHpProcess_BuffInfo__o *)v29,
          (const MethodInfo_2F26B54 *)Method_System_Collections_Generic_List_BattleServantData__GetEnumerator__);
        v56 = *(System_Collections_Generic_List_Enumerator_T__o *)v54;
        while ( System_Collections_Generic_List_Enumerator_BattleLogicBuff_ReduceHpProcess_BuffInfo___MoveNext(
                  &v56,
                  (const MethodInfo_2074054 *)Method_System_Collections_Generic_List_Enumerator_BattleServantData__MoveNext__) )
        {
          v38 = (BattleData___c__DisplayClass560_0_o *)sub_B170CC(
                                                         BattleData___c__DisplayClass560_0_TypeInfo,
                                                         v34,
                                                         v35,
                                                         v36,
                                                         v37);
          BattleData___c__DisplayClass560_0___ctor(v38, 0LL);
          if ( !v38 )
            sub_B170D4();
          current = v56.fields.current;
          v38->fields.svt = (struct BattleServantData_o *)v56.fields.current;
          p_svt = &v38->fields.svt;
          sub_B16F98(&v38->fields, current);
          if ( !v38->fields.svt )
            sub_B170D4();
          ConcatServantAndBuffIndividualityies = BattleServantData__getConcatServantAndBuffIndividualityies(
                                                   v38->fields.svt,
                                                   0LL,
                                                   0,
                                                   0,
                                                   0,
                                                   0LL);
          v38->fields.svtIndividuality = ConcatServantAndBuffIndividualityies;
          sub_B16F98(&v38->fields.svtIndividuality, ConcatServantAndBuffIndividualityies);
          v46 = (System_Predicate_peRenderTexture_ChangeLayerObject__o *)sub_B170CC(
                                                                           System_Predicate_AiAllocationInfo__TypeInfo,
                                                                           v42,
                                                                           v43,
                                                                           v44,
                                                                           v45);
          System_Predicate_peRenderTexture_ChangeLayerObject____ctor(
            v46,
            (Il2CppObject *)v38,
            Method_BattleData___c__DisplayClass560_0__AllocateAiToServants_b__1__,
            (const MethodInfo_2B0B204 *)Method_System_Predicate_AiAllocationInfo___ctor__);
          v47 = System_Collections_Generic_List_peRenderTexture_ChangeLayerObject___Find(
                  v25,
                  (System_Predicate_T__o *)v46,
                  (const MethodInfo_2F26598 *)Method_System_Collections_Generic_List_AiAllocationInfo__Find__);
          if ( v47 )
          {
            if ( !*p_svt )
              sub_B170D4();
            AiStateManager = BattleServantData__get_AiStateManager(*p_svt, 0LL);
            if ( !AiStateManager )
              sub_B170D4();
            ((void (__fastcall *)(AiStateManager_o *, struct UnityEngine_GameObject_o *, void *))AiStateManager->klass->vtable._4_InitAiStates.method)(
              AiStateManager,
              v47->fields.gameObject,
              AiStateManager->klass[1]._1.image);
          }
        }
        *(_DWORD *)&v54[4 * v52 + 24] = 196;
        v27 = ++v55;
        System_Collections_Generic_List_Enumerator_BattleLogicBuff_ReduceHpProcess_BuffInfo___Dispose(
          &v56,
          (const MethodInfo_2074050 *)Method_System_Collections_Generic_List_Enumerator_BattleServantData__Dispose__);
        if ( v27 )
        {
          v49 = v27 - 1;
          v3 = v50;
          v52 = v27;
          if ( *(_DWORD *)&v54[4 * v27 + 20] == 196 )
          {
            --v27;
            v55 = v49;
            v52 = v49;
          }
        }
        else
        {
          v3 = v50;
          v52 = 0;
        }
      }
      else
      {
        v3 = v50;
        v27 = v51;
      }
      max_length = v3->max_length;
      v26 = v53 + 1;
      if ( (int)(v53 + 1) >= max_length )
        return;
    }
LABEL_38:
    sub_B170D4();
  }
}


void __fastcall BattleData__AppendRestockServantLogic(
        BattleData_o *this,
        RestockServantLogic_o *restockServantLogic,
        const MethodInfo *method)
{
  struct System_Collections_Generic_List_RestockServantLogic__o *restockServantLogicList; // x0

  if ( (byte_40F6A21 & 1) == 0 )
  {
    sub_B16FFC(&Method_System_Collections_Generic_List_RestockServantLogic__Add__, restockServantLogic);
    byte_40F6A21 = 1;
  }
  restockServantLogicList = this->fields.restockServantLogicList;
  if ( !restockServantLogicList )
    sub_B170D4();
  System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData___Add(
    (System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData__o *)restockServantLogicList,
    (EventMissionProgressRequest_Argument_ProgressData_o *)restockServantLogic,
    (const MethodInfo_2F25CD8 *)Method_System_Collections_Generic_List_RestockServantLogic__Add__);
}


void __fastcall BattleData__ApplyCommandcardFirstBonus(BattleData_o *this, const MethodInfo *method)
{
  const MethodInfo *v2; // x2
  struct BattleData_o *data; // x8
  struct BattleComboData_o *combodata; // x8
  int32_t i; // w20
  BattleCommandData_o *v7; // x0
  const MethodInfo *v8; // x1
  int32_t v9; // w0
  const MethodInfo *v10; // x3
  BattleDataDefine_c *v11; // x0
  BattleCommandData_o *SelectCommand; // x0
  const MethodInfo *v13; // x1
  int32_t type; // w2
  const MethodInfo *v15; // x3

  if ( (byte_40F6A42 & 1) == 0 )
  {
    sub_B16FFC(&BattleDataDefine_TypeInfo, method);
    byte_40F6A42 = 1;
  }
  data = this->fields.data;
  if ( !data )
    goto LABEL_16;
  combodata = data->fields.combodata;
  if ( !combodata )
    goto LABEL_16;
  if ( !combodata->fields.isMighty )
  {
    SelectCommand = BattleData__getSelectCommand(this, 0, v2);
    if ( SelectCommand )
    {
      type = BattleCommandData__get_type(SelectCommand, v13);
      BattleData__setFirstBonus(this, 0, type, v15);
      return;
    }
LABEL_16:
    sub_B170D4();
  }
  for ( i = 0; ; ++i )
  {
    v11 = BattleDataDefine_TypeInfo;
    if ( (BYTE3(BattleDataDefine_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0
      && !BattleDataDefine_TypeInfo->_2.cctor_finished )
    {
      j_il2cpp_runtime_class_init_0(BattleDataDefine_TypeInfo);
      v11 = BattleDataDefine_TypeInfo;
    }
    if ( i >= v11->static_fields->COMMAND_CARD_NUM_TO_SELECT )
      break;
    v7 = BattleData__getSelectCommand(this, i, v2);
    if ( !v7 )
      goto LABEL_16;
    v9 = BattleCommandData__get_type(v7, v8);
    BattleData__setFirstBonus(this, 0, v9, v10);
  }
}


bool __fastcall BattleData__CanUseContinueItemQuest(
        BattleData_o *this,
        EventCampaignEntity_o *eventCampaignEnt,
        const MethodInfo *method)
{
  __int64 v5; // x1
  __int64 v6; // x1
  __int64 v7; // x1
  __int64 v8; // x1
  __int64 v9; // x1
  struct BattleData_o *data; // x8
  struct QuestEntity_o *quest_ent; // x8
  int32_t spotId; // w21
  WebViewManager_o *Instance; // x0
  DataMasterBase_WarMaster__WarEntity__int__o *MasterData_WarQuestSelectionMaster; // x0
  int32_t v15; // w21
  WebViewManager_o *v16; // x0
  WarGroupMaster_o *v17; // x0
  struct BattleData_o *v18; // x8
  struct QuestEntity_o *v19; // x8
  EventQuestMaster_o *Master_WarQuestSelectionMaster; // x0
  struct QuestPhaseEntity_o *questphase_ent; // x8
  WarEntity_o *entity; // [xsp+8h] [xbp-28h] BYREF

  if ( (byte_40F6AC1 & 1) == 0 )
  {
    sub_B16FFC(&Method_DataManager_GetMasterData_SpotMaster___, eventCampaignEnt);
    sub_B16FFC(&Method_DataManager_GetMasterData_WarGroupMaster___, v5);
    sub_B16FFC(&Method_DataManager_GetMaster_EventQuestMaster___, v6);
    sub_B16FFC(&DataManager_TypeInfo, v7);
    sub_B16FFC(&Method_DataMasterBase_SpotMaster__SpotEntity__int__TryGetEntity__, v8);
    sub_B16FFC(&Method_SingletonMonoBehaviour_DataManager__get_Instance__, v9);
    byte_40F6AC1 = 1;
  }
  entity = 0LL;
  data = this->fields.data;
  if ( !data )
    goto LABEL_24;
  quest_ent = data->fields.quest_ent;
  if ( !quest_ent )
    goto LABEL_24;
  spotId = quest_ent->fields.spotId;
  Instance = SingletonMonoBehaviour_WebViewManager___get_Instance((const MethodInfo_2A54F38 *)Method_SingletonMonoBehaviour_DataManager__get_Instance__);
  if ( !Instance )
    goto LABEL_24;
  MasterData_WarQuestSelectionMaster = (DataMasterBase_WarMaster__WarEntity__int__o *)DataManager__GetMasterData_WarQuestSelectionMaster_(
                                                                                        (DataManager_o *)Instance,
                                                                                        (const MethodInfo_18C3284 *)Method_DataManager_GetMasterData_SpotMaster___);
  if ( !MasterData_WarQuestSelectionMaster )
    goto LABEL_24;
  if ( !DataMasterBase_WarMaster__WarEntity__int___TryGetEntity(
          MasterData_WarQuestSelectionMaster,
          &entity,
          spotId,
          (const MethodInfo_266F3E4 *)Method_DataMasterBase_SpotMaster__SpotEntity__int__TryGetEntity__) )
    goto LABEL_27;
  if ( !entity )
    goto LABEL_24;
  v15 = *(&entity->fields.id + 1);
  v16 = SingletonMonoBehaviour_WebViewManager___get_Instance((const MethodInfo_2A54F38 *)Method_SingletonMonoBehaviour_DataManager__get_Instance__);
  if ( !v16 )
    goto LABEL_24;
  v17 = (WarGroupMaster_o *)DataManager__GetMasterData_WarQuestSelectionMaster_(
                              (DataManager_o *)v16,
                              (const MethodInfo_18C3284 *)Method_DataManager_GetMasterData_WarGroupMaster___);
  v18 = this->fields.data;
  if ( !v18 )
    goto LABEL_24;
  v19 = v18->fields.quest_ent;
  if ( !v19 || !eventCampaignEnt || !v17 )
    goto LABEL_24;
  if ( !WarGroupMaster__CanUseContinueItem(
          v17,
          v15,
          v19->fields.afterClear,
          v19->fields.type,
          eventCampaignEnt->fields.targetIds,
          0LL) )
  {
LABEL_27:
    if ( (BYTE3(DataManager_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0 && !DataManager_TypeInfo->_2.cctor_finished )
      j_il2cpp_runtime_class_init_0(DataManager_TypeInfo);
    Master_WarQuestSelectionMaster = (EventQuestMaster_o *)DataManager__GetMaster_WarQuestSelectionMaster_((const MethodInfo_18C3224 *)Method_DataManager_GetMaster_EventQuestMaster___);
    if ( eventCampaignEnt )
    {
      questphase_ent = this->fields.questphase_ent;
      if ( questphase_ent )
      {
        if ( Master_WarQuestSelectionMaster )
          return EventQuestMaster__IsExistQuest(
                   Master_WarQuestSelectionMaster,
                   eventCampaignEnt->fields.eventId,
                   questphase_ent->fields.questId,
                   questphase_ent->fields.phase,
                   0LL);
      }
    }
LABEL_24:
    sub_B170D4();
  }
  return 1;
}


void __fastcall BattleData__ChangeDoNotSelectCommandServantList(BattleData_o *this, const MethodInfo *method)
{
  __int64 v3; // x1
  __int64 v4; // x1
  __int64 v5; // x1
  BattleServantData_array *FieldPlayerServantList; // x0
  BattleServantData_array *v7; // x20
  BattleBuffData_BuffData_array *BuffList_31040328; // x0
  __int64 v9; // x1
  __int64 v10; // x2
  __int64 v11; // x3
  __int64 v12; // x4
  int max_length; // w8
  unsigned int v14; // w25
  BattleServantData_o *v15; // x24
  int32_t uniqueId; // w21
  BattleBuffData_o *buffData; // x22
  BattleBuffData_CheckIndividualitiesData_o *v18; // x23
  System_Collections_Generic_List_int__o *doNotSelectCommandSvtIdList; // x0
  System_Collections_Generic_List_int__o *v20; // x0

  if ( (byte_40F6ABA & 1) == 0 )
  {
    sub_B16FFC(&BattleBuffData_CheckIndividualitiesData_TypeInfo, method);
    sub_B16FFC(&Method_System_Collections_Generic_List_int__Add__, v3);
    sub_B16FFC(&Method_System_Collections_Generic_List_int__Clear__, v4);
    sub_B16FFC(&Method_System_Collections_Generic_List_int__Contains__, v5);
    byte_40F6ABA = 1;
  }
  FieldPlayerServantList = BattleData__getFieldPlayerServantList(this, method);
  if ( !this->fields.doNotSelectCommandSvtIdList )
    goto LABEL_18;
  v7 = FieldPlayerServantList;
  System_Collections_Generic_List_int___Clear(
    this->fields.doNotSelectCommandSvtIdList,
    (const MethodInfo_2F108FC *)Method_System_Collections_Generic_List_int__Clear__);
  if ( !v7 )
    goto LABEL_18;
  max_length = v7->max_length;
  if ( max_length >= 1 )
  {
    v14 = 0;
    while ( 1 )
    {
      if ( v14 >= max_length )
      {
        sub_B17100(BuffList_31040328, v9, v10);
        sub_B170A0();
      }
      v15 = v7->m_Items[v14];
      if ( !v15 )
        break;
      uniqueId = v15->fields.uniqueId;
      buffData = v15->fields.buffData;
      v18 = (BattleBuffData_CheckIndividualitiesData_o *)sub_B170CC(
                                                           BattleBuffData_CheckIndividualitiesData_TypeInfo,
                                                           v9,
                                                           v10,
                                                           v11,
                                                           v12);
      BattleBuffData_CheckIndividualitiesData___ctor(v18, v15, 0LL, 0LL, 0LL, 0LL, 0LL);
      if ( !buffData )
        break;
      BuffList_31040328 = BattleBuffData__getBuffList_31040328(buffData, 83, v18, 1, 0, 0LL);
      if ( !BuffList_31040328 )
        break;
      if ( *(_QWORD *)&BuffList_31040328->max_length )
      {
        doNotSelectCommandSvtIdList = this->fields.doNotSelectCommandSvtIdList;
        if ( !doNotSelectCommandSvtIdList )
          break;
        BuffList_31040328 = (BattleBuffData_BuffData_array *)System_Collections_Generic_List_int___Contains(
                                                               doNotSelectCommandSvtIdList,
                                                               uniqueId,
                                                               (const MethodInfo_2F10944 *)Method_System_Collections_Generic_List_int__Contains__);
        if ( ((unsigned __int8)BuffList_31040328 & 1) == 0 )
        {
          v20 = this->fields.doNotSelectCommandSvtIdList;
          if ( !v20 )
            break;
          System_Collections_Generic_List_int___Add(
            v20,
            uniqueId,
            (const MethodInfo_2F104F0 *)Method_System_Collections_Generic_List_int__Add__);
        }
      }
      max_length = v7->max_length;
      if ( (int)++v14 >= max_length )
        return;
    }
LABEL_18:
    sub_B170D4();
  }
}


bool __fastcall BattleData__CheckActorAllParts(BattleData_o *this, const MethodInfo *method)
{
  __int64 v3; // x1
  __int64 v4; // x1
  struct System_Collections_Generic_List_BattleServantData__o *enemy_datalist; // x23
  __int64 v6; // x21
  int size; // w8
  unsigned int v8; // w20
  BattleServantData_o *v9; // x0
  const MethodInfo *v10; // x2
  BattleData_o *v11; // x0
  int32_t v12; // w1
  struct System_Collections_Generic_List_BattleServantData__o *v13; // x23
  BattleServantData_o *v14; // x0
  struct System_Collections_Generic_List_BattleServantData__o *v15; // x23
  BattleServantData_o *v16; // x0
  UnityEngine_Object_o *PartsActor; // x20

  if ( (byte_40F6A9F & 1) == 0 )
  {
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleServantData__get_Count__, method);
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleServantData__get_Item__, v3);
    sub_B16FFC(&UnityEngine_Object_TypeInfo, v4);
    byte_40F6A9F = 1;
  }
  enemy_datalist = this->fields.enemy_datalist;
  if ( !enemy_datalist )
LABEL_29:
    sub_B170D4();
  v6 = 4LL;
  while ( 1 )
  {
    size = enemy_datalist->fields._size;
    v8 = v6 - 4;
    if ( (int)v6 - 4 >= size )
      return 0;
    if ( size <= v8 )
      System_ThrowHelper__ThrowArgumentOutOfRangeException_41329284(0LL);
    v9 = (BattleServantData_o *)*((_QWORD *)&enemy_datalist->fields._items->obj.klass + v6);
    if ( !v9 )
      goto LABEL_29;
    if ( BattleServantData__isMultiTargetUp(v9, 0LL) )
    {
      v11 = this;
      v12 = 0;
      goto LABEL_24;
    }
    v13 = this->fields.enemy_datalist;
    if ( !v13 )
      goto LABEL_29;
    if ( v13->fields._size <= v8 )
      System_ThrowHelper__ThrowArgumentOutOfRangeException_41329284(0LL);
    v14 = (BattleServantData_o *)*((_QWORD *)&v13->fields._items->obj.klass + v6);
    if ( !v14 )
      goto LABEL_29;
    if ( BattleServantData__isMultiTargetCore(v14, 0LL) )
    {
      v12 = 1;
      goto LABEL_23;
    }
    v15 = this->fields.enemy_datalist;
    if ( !v15 )
      goto LABEL_29;
    if ( v15->fields._size <= v8 )
      System_ThrowHelper__ThrowArgumentOutOfRangeException_41329284(0LL);
    v16 = (BattleServantData_o *)*((_QWORD *)&v15->fields._items->obj.klass + v6);
    if ( !v16 )
      goto LABEL_29;
    if ( BattleServantData__isMultiTargetUnder(v16, 0LL) )
      break;
LABEL_28:
    enemy_datalist = this->fields.enemy_datalist;
    ++v6;
    if ( !enemy_datalist )
      goto LABEL_29;
  }
  v12 = 2;
LABEL_23:
  v11 = this;
LABEL_24:
  PartsActor = (UnityEngine_Object_o *)BattleData__GetPartsActor(v11, v12, v10);
  if ( (BYTE3(UnityEngine_Object_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0
    && !UnityEngine_Object_TypeInfo->_2.cctor_finished )
  {
    j_il2cpp_runtime_class_init_0(UnityEngine_Object_TypeInfo);
  }
  if ( !UnityEngine_Object__op_Equality(PartsActor, 0LL, 0LL) )
    goto LABEL_28;
  return 1;
}


bool __fastcall BattleData__CheckAlivePlayers(
        BattleData_o *this,
        System_Func_BattleServantData__bool__o *func,
        const MethodInfo *method)
{
  __int64 v3; // x3
  __int64 v4; // x4
  __int64 v7; // x1
  __int64 v8; // x1
  __int64 v9; // x1
  __int64 v10; // x1
  BattleData___c__DisplayClass463_0_o *v11; // x21
  System_Collections_Generic_List_T__o *player_datalist; // x19
  __int64 v13; // x1
  __int64 v14; // x2
  __int64 v15; // x3
  __int64 v16; // x4
  System_Func_WarBoardManager_WarBoardOnboardSkillTarget__bool__o *v17; // x20

  if ( (byte_40F6A64 & 1) == 0 )
  {
    sub_B16FFC(&Method_BasicHelper_Any_BattleServantData___, func);
    sub_B16FFC(&Method_System_Func_BattleServantData__bool___ctor__, v7);
    sub_B16FFC(&System_Func_BattleServantData__bool__TypeInfo, v8);
    sub_B16FFC(&Method_BattleData___c__DisplayClass463_0__CheckAlivePlayers_b__0__, v9);
    sub_B16FFC(&BattleData___c__DisplayClass463_0_TypeInfo, v10);
    byte_40F6A64 = 1;
  }
  v11 = (BattleData___c__DisplayClass463_0_o *)sub_B170CC(
                                                 BattleData___c__DisplayClass463_0_TypeInfo,
                                                 func,
                                                 method,
                                                 v3,
                                                 v4);
  BattleData___c__DisplayClass463_0___ctor(v11, 0LL);
  if ( !v11 )
    sub_B170D4();
  v11->fields.func = func;
  sub_B16F98(&v11->fields, func);
  player_datalist = (System_Collections_Generic_List_T__o *)this->fields.player_datalist;
  v17 = (System_Func_WarBoardManager_WarBoardOnboardSkillTarget__bool__o *)sub_B170CC(
                                                                             System_Func_BattleServantData__bool__TypeInfo,
                                                                             v13,
                                                                             v14,
                                                                             v15,
                                                                             v16);
  System_Func_WarBoardManager_WarBoardOnboardSkillTarget__bool____ctor(
    v17,
    (Il2CppObject *)v11,
    Method_BattleData___c__DisplayClass463_0__CheckAlivePlayers_b__0__,
    (const MethodInfo_2B6AB40 *)Method_System_Func_BattleServantData__bool___ctor__);
  return BasicHelper__Any_WarBoardData_SquareRangeSearch_(
           player_datalist,
           (System_Func_T__bool__o *)v17,
           (const MethodInfo_18B5FC8 *)Method_BasicHelper_Any_BattleServantData___);
}


int32_t __fastcall BattleData__CheckCurrentTemporaryCommandSpell(
        BattleData_o *this,
        UserGameEntity_o *userGame,
        const MethodInfo *method)
{
  UserGameEntity_o *SelfUserGame; // x20
  QuestPhaseEntity_o *questphase_ent; // x0

  SelfUserGame = userGame;
  if ( !userGame )
    SelfUserGame = UserGameMaster__getSelfUserGame(0LL);
  questphase_ent = this->fields.questphase_ent;
  if ( questphase_ent && QuestPhaseEntity__IsUseTemporaryCommandSpell(questphase_ent, 0LL) )
    return this->fields.temporarySpell;
  if ( !SelfUserGame )
    sub_B170D4();
  return UserGameEntity__getCommandSpell(SelfUserGame, 0LL);
}


bool __fastcall BattleData__CheckDefenceTargetBroken(BattleData_o *this, const MethodInfo *method)
{
  struct BattleDefenceTargetData_o *defenceTargetData; // x8

  defenceTargetData = this->fields.defenceTargetData;
  return defenceTargetData && defenceTargetData->fields.maxHp >= 1 && defenceTargetData->fields.nowHp < 1;
}


bool __fastcall BattleData__CheckDefenceTargetData(BattleData_o *this, const MethodInfo *method)
{
  struct BattleDefenceTargetData_o *defenceTargetData; // x8

  defenceTargetData = this->fields.defenceTargetData;
  return defenceTargetData && defenceTargetData->fields.maxHp > 0;
}


bool __fastcall BattleData__CheckDoNotSelectCommandCard(BattleData_o *this, const MethodInfo *method)
{
  __int64 v3; // x1
  __int64 v4; // x1
  __int64 v5; // x1
  __int64 v6; // x1
  __int64 v7; // x1
  __int64 v8; // x1
  __int64 v9; // x1
  __int64 v10; // x1
  __int64 v11; // x1
  __int64 v12; // x1
  __int64 v13; // x1
  __int64 v14; // x1
  __int64 v15; // x1
  __int64 v16; // x1
  __int64 v17; // x1
  __int64 v18; // x1
  __int64 v19; // x1
  __int64 v20; // x1
  __int64 v21; // x1
  __int64 v22; // x1
  __int64 v23; // x1
  __int64 v24; // x1
  System_Collections_Generic_IEnumerable_T__o *FieldPlayerServantList; // x21
  __int64 v26; // x1
  __int64 v27; // x2
  __int64 v28; // x3
  __int64 v29; // x4
  System_Collections_Generic_List_WarBoardAIRoute_RouteData__o *v30; // x20
  const MethodInfo *v31; // x1
  __int64 v32; // x2
  __int64 v33; // x3
  __int64 v34; // x4
  struct System_Collections_Generic_List_int__o *doNotSelectCommandSvtIdList; // x9
  int size; // w8
  unsigned int v37; // w28
  char v38; // w27
  BattleServantData_o *v39; // x24
  int32_t uniqueId; // w21
  BattleBuffData_o *buffData; // x22
  BattleBuffData_CheckIndividualitiesData_o *v42; // x23
  BattleBuffData_BuffData_array *BuffList_31040328; // x0
  __int64 v44; // x22
  bool v45; // w0
  System_Collections_Generic_List_int__o *v46; // x0
  System_Collections_Generic_List_int__o *v47; // x0
  BattleServantData_array *SubPlayerServantList; // x0
  const MethodInfo *v49; // x1
  const MethodInfo *v50; // x2
  __int64 v51; // x3
  __int64 v52; // x4
  int max_length; // w8
  BattleServantData_array *v54; // x21
  unsigned int v55; // w23
  Il2CppClass **v56; // x26
  Il2CppClass *v57; // x8
  BattleServantData_o **v58; // x26
  Il2CppClass *v59; // t1
  System_Collections_Generic_List_int__o *v60; // x0
  int32_t namespaze; // w22
  System_Collections_Generic_List_int__o *v62; // x0
  System_Collections_Generic_List_int__o *v63; // x21
  const MethodInfo *v64; // x2
  struct System_Collections_Generic_List_int__o *v65; // x28
  __int64 v66; // x25
  unsigned __int64 v67; // x26
  BattleServantData_o *ServantData; // x0
  struct System_Collections_Generic_List_int__o *v69; // x28
  System_Collections_Generic_List_int__o *v70; // x0
  struct System_Collections_Generic_List_int__o *v71; // x0
  struct System_Collections_Generic_List_BattleServantData__o *player_datalist; // x0
  int32_t v73; // w27
  int v74; // w21
  __int64 v75; // x1
  __int64 v76; // x2
  __int64 v77; // x3
  __int64 v78; // x4
  System_Collections_Generic_List_int__o *v79; // x22
  struct BattleCommandData_array *canSelectCommands; // x25
  int v81; // w8
  unsigned int v82; // w26
  BattleCommandData_o *v83; // x21
  BattleServantData_o *v84; // x0
  WarBoardManager_TaskList_o *v85; // x23
  char v86; // w21
  struct BattleCommandData_array **p_canSelectCommands; // x22
  __int64 v88; // x2
  struct BattleCommandData_array *v89; // x0
  __int64 v91; // x0
  _BOOL4 v92; // w8
  struct System_Collections_Generic_List_int__o *v93; // x8
  int32_t v94; // [xsp+8h] [xbp-C8h]
  char v95; // [xsp+Ch] [xbp-C4h]
  char v96; // [xsp+10h] [xbp-C0h]
  System_Collections_Generic_List_Enumerator_T__o v97; // [xsp+18h] [xbp-B8h] BYREF
  int v98[2]; // [xsp+30h] [xbp-A0h]
  int v99; // [xsp+38h] [xbp-98h]
  System_Collections_Generic_List_Enumerator_T__o j; // [xsp+40h] [xbp-90h] BYREF
  System_Collections_Generic_List_Enumerator_T__o i; // [xsp+60h] [xbp-70h] BYREF

  if ( (byte_40F6AB9 & 1) == 0 )
  {
    sub_B16FFC(&BattleCommandData___TypeInfo, method);
    sub_B16FFC(&BattleBuffData_CheckIndividualitiesData_TypeInfo, v3);
    sub_B16FFC(&Method_System_Collections_Generic_List_Enumerator_int__Dispose__, v4);
    sub_B16FFC(&Method_System_Collections_Generic_List_Enumerator_BattleServantData__Dispose__, v5);
    sub_B16FFC(&Method_System_Collections_Generic_List_Enumerator_int__MoveNext__, v6);
    sub_B16FFC(&Method_System_Collections_Generic_List_Enumerator_BattleServantData__MoveNext__, v7);
    sub_B16FFC(&Method_System_Collections_Generic_List_Enumerator_int__get_Current__, v8);
    sub_B16FFC(&Method_System_Collections_Generic_List_Enumerator_BattleServantData__get_Current__, v9);
    sub_B16FFC(&Method_System_Collections_Generic_List_int__Add__, v10);
    sub_B16FFC(&Method_System_Collections_Generic_List_int__Clear__, v11);
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleServantData__Contains__, v12);
    sub_B16FFC(&Method_System_Collections_Generic_List_int__Contains__, v13);
    sub_B16FFC(&Method_System_Collections_Generic_List_int__GetEnumerator__, v14);
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleServantData__GetEnumerator__, v15);
    sub_B16FFC(&Method_System_Collections_Generic_List_int__Remove__, v16);
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleServantData___ctor___66726784, v17);
    sub_B16FFC(&Method_System_Collections_Generic_List_int___ctor__, v18);
    sub_B16FFC(&Method_System_Collections_Generic_List_int__get_Count__, v19);
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleServantData__get_Count__, v20);
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleServantData__get_Item__, v21);
    sub_B16FFC(&Method_System_Collections_Generic_List_int__get_Item__, v22);
    sub_B16FFC(&System_Collections_Generic_List_int__TypeInfo, v23);
    sub_B16FFC(&System_Collections_Generic_List_BattleServantData__TypeInfo, v24);
    byte_40F6AB9 = 1;
  }
  memset(&i, 0, sizeof(i));
  memset(&j, 0, sizeof(j));
  v99 = 0;
  FieldPlayerServantList = (System_Collections_Generic_IEnumerable_T__o *)BattleData__getFieldPlayerServantList(
                                                                            this,
                                                                            method);
  v30 = (System_Collections_Generic_List_WarBoardAIRoute_RouteData__o *)sub_B170CC(
                                                                          System_Collections_Generic_List_BattleServantData__TypeInfo,
                                                                          v26,
                                                                          v27,
                                                                          v28,
                                                                          v29);
  System_Collections_Generic_List_WarBoardAIRoute_RouteData____ctor(
    v30,
    FieldPlayerServantList,
    (const MethodInfo_2F2520C *)Method_System_Collections_Generic_List_BattleServantData___ctor___66726784);
  doNotSelectCommandSvtIdList = this->fields.doNotSelectCommandSvtIdList;
  if ( !doNotSelectCommandSvtIdList || !v30 )
    goto LABEL_50;
  size = v30->fields._size;
  v94 = doNotSelectCommandSvtIdList->fields._size;
  if ( size >= 1 )
  {
    v96 = 0;
    v37 = 0;
    v38 = 0;
    while ( 1 )
    {
      if ( size <= v37 )
        System_ThrowHelper__ThrowArgumentOutOfRangeException_41329284(0LL);
      v39 = (BattleServantData_o *)v30->fields._items->m_Items[v37];
      if ( !v39 )
        goto LABEL_50;
      uniqueId = v39->fields.uniqueId;
      buffData = v39->fields.buffData;
      v42 = (BattleBuffData_CheckIndividualitiesData_o *)sub_B170CC(
                                                           BattleBuffData_CheckIndividualitiesData_TypeInfo,
                                                           v31,
                                                           v32,
                                                           v33,
                                                           v34);
      BattleBuffData_CheckIndividualitiesData___ctor(v42, v39, 0LL, 0LL, 0LL, 0LL, 0LL);
      if ( !buffData )
        goto LABEL_50;
      BuffList_31040328 = BattleBuffData__getBuffList_31040328(buffData, 83, v42, 1, 0, 0LL);
      if ( !BuffList_31040328 || !this->fields.doNotSelectCommandSvtIdList )
        goto LABEL_50;
      v44 = *(_QWORD *)&BuffList_31040328->max_length;
      v45 = System_Collections_Generic_List_int___Contains(
              this->fields.doNotSelectCommandSvtIdList,
              uniqueId,
              (const MethodInfo_2F10944 *)Method_System_Collections_Generic_List_int__Contains__);
      if ( v44 )
      {
        if ( !v45 )
        {
          v46 = this->fields.doNotSelectCommandSvtIdList;
          if ( !v46 )
            goto LABEL_50;
          System_Collections_Generic_List_int___Add(
            v46,
            uniqueId,
            (const MethodInfo_2F104F0 *)Method_System_Collections_Generic_List_int__Add__);
        }
        v96 = 1;
      }
      else if ( v45 )
      {
        v47 = this->fields.doNotSelectCommandSvtIdList;
        if ( !v47 )
          goto LABEL_50;
        System_Collections_Generic_List_int___Remove(
          v47,
          uniqueId,
          (const MethodInfo_2F11E6C *)Method_System_Collections_Generic_List_int__Remove__);
        v38 = 1;
      }
      size = v30->fields._size;
      if ( (int)++v37 >= size )
        goto LABEL_24;
    }
  }
  v96 = 0;
  v38 = 0;
LABEL_24:
  SubPlayerServantList = BattleData__getSubPlayerServantList(this, v31);
  if ( !SubPlayerServantList )
LABEL_50:
    sub_B170D4();
  max_length = SubPlayerServantList->max_length;
  v54 = SubPlayerServantList;
  if ( max_length >= 1 )
  {
    v55 = 0;
    do
    {
      if ( v55 >= max_length )
      {
LABEL_91:
        sub_B17100(SubPlayerServantList, v49, v50);
        sub_B170A0();
      }
      v56 = &v54->obj.klass + (int)v55;
      v59 = v56[4];
      v58 = (BattleServantData_o **)(v56 + 4);
      v57 = v59;
      if ( !v59 )
        goto LABEL_50;
      v60 = this->fields.doNotSelectCommandSvtIdList;
      if ( !v60 )
        goto LABEL_50;
      namespaze = (int32_t)v57->_1.namespaze;
      SubPlayerServantList = (BattleServantData_array *)System_Collections_Generic_List_int___Contains(
                                                          v60,
                                                          namespaze,
                                                          (const MethodInfo_2F10944 *)Method_System_Collections_Generic_List_int__Contains__);
      if ( ((unsigned __int8)SubPlayerServantList & 1) != 0 )
        goto LABEL_34;
      if ( v55 >= v54->max_length )
        goto LABEL_91;
      if ( !*v58 )
        goto LABEL_50;
      SubPlayerServantList = (BattleServantData_array *)BattleServantData__isDead(*v58, 0LL);
      if ( ((unsigned __int8)SubPlayerServantList & 1) != 0 )
      {
LABEL_34:
        v62 = this->fields.doNotSelectCommandSvtIdList;
        if ( !v62 )
          goto LABEL_50;
        SubPlayerServantList = (BattleServantData_array *)System_Collections_Generic_List_int___Remove(
                                                            v62,
                                                            namespaze,
                                                            (const MethodInfo_2F11E6C *)Method_System_Collections_Generic_List_int__Remove__);
        v38 = 1;
      }
      max_length = v54->max_length;
    }
    while ( (int)++v55 < max_length );
  }
  v95 = v38;
  v63 = (System_Collections_Generic_List_int__o *)sub_B170CC(
                                                    System_Collections_Generic_List_int__TypeInfo,
                                                    v49,
                                                    v50,
                                                    v51,
                                                    v52);
  System_Collections_Generic_List_int____ctor(
    v63,
    (const MethodInfo_2F0F794 *)Method_System_Collections_Generic_List_int___ctor__);
  v65 = this->fields.doNotSelectCommandSvtIdList;
  if ( !v65 )
    goto LABEL_50;
  v66 = 8LL;
  while ( 1 )
  {
    v67 = v66 - 8;
    if ( v66 - 8 >= v65->fields._size )
      break;
    if ( v67 >= (unsigned int)v65->fields._size )
      System_ThrowHelper__ThrowArgumentOutOfRangeException_41329284(0LL);
    ServantData = BattleData__getServantData(this, *((_DWORD *)&v65->fields._items->obj.klass + v66), v64);
    if ( !ServantData || BattleServantData__isDead(ServantData, 0LL) )
    {
      v69 = this->fields.doNotSelectCommandSvtIdList;
      if ( !v69 )
        goto LABEL_50;
      if ( v67 >= (unsigned int)v69->fields._size )
        System_ThrowHelper__ThrowArgumentOutOfRangeException_41329284(0LL);
      if ( !v63 )
        goto LABEL_50;
      System_Collections_Generic_List_int___Add(
        v63,
        *((_DWORD *)&v69->fields._items->obj.klass + v66),
        (const MethodInfo_2F104F0 *)Method_System_Collections_Generic_List_int__Add__);
    }
    v65 = this->fields.doNotSelectCommandSvtIdList;
    ++v66;
    if ( !v65 )
      goto LABEL_50;
  }
  if ( !v63 )
    goto LABEL_50;
  System_Collections_Generic_List_int___GetEnumerator(
    &v97,
    v63,
    (const MethodInfo_2F11334 *)Method_System_Collections_Generic_List_int__GetEnumerator__);
  for ( i = v97;
        System_Collections_Generic_List_Enumerator_int___MoveNext(
          (System_Collections_Generic_List_Enumerator_int__o *)&i,
          (const MethodInfo_2071AE8 *)Method_System_Collections_Generic_List_Enumerator_int__MoveNext__);
        System_Collections_Generic_List_int___Remove(
          v70,
          (int32_t)i.fields.current,
          (const MethodInfo_2F11E6C *)Method_System_Collections_Generic_List_int__Remove__) )
  {
    v70 = this->fields.doNotSelectCommandSvtIdList;
    if ( !v70 )
      sub_B170D4();
  }
  v98[0] = 389;
  v99 = 1;
  System_Collections_Generic_List_Enumerator_int___Dispose(
    (System_Collections_Generic_List_Enumerator_int__o *)&i,
    (const MethodInfo_2071AE4 *)Method_System_Collections_Generic_List_Enumerator_int__Dispose__);
  v99 = 0;
  v71 = this->fields.doNotSelectCommandSvtIdList;
  if ( !v71 )
    goto LABEL_50;
  if ( v30->fields._size <= v71->fields._size || (v96 & 1) == 0 )
  {
    this->fields.canSelectCommandIndex = 0;
    System_Collections_Generic_List_int___Clear(
      v71,
      (const MethodInfo_2F108FC *)Method_System_Collections_Generic_List_int__Clear__);
    v89 = (struct BattleCommandData_array *)sub_B17014(BattleCommandData___TypeInfo, 0LL, v88);
    this->fields.canSelectCommands = v89;
    sub_B16F98(&this->fields.canSelectCommands, v89);
    return 0;
  }
  player_datalist = this->fields.player_datalist;
  if ( !player_datalist )
    goto LABEL_50;
  System_Collections_Generic_List_BattleLogicBuff_ReduceHpProcess_BuffInfo___GetEnumerator(
    &v97,
    (System_Collections_Generic_List_BattleLogicBuff_ReduceHpProcess_BuffInfo__o *)player_datalist,
    (const MethodInfo_2F26B54 *)Method_System_Collections_Generic_List_BattleServantData__GetEnumerator__);
  v73 = 0;
  for ( j = v97;
        System_Collections_Generic_List_Enumerator_BattleLogicBuff_ReduceHpProcess_BuffInfo___MoveNext(
          &j,
          (const MethodInfo_2074054 *)Method_System_Collections_Generic_List_Enumerator_BattleServantData__MoveNext__);
        v73 += BattleServantData__isAlive((BattleServantData_o *)j.fields.current, 0, 0LL) )
  {
    if ( !j.fields.current )
      sub_B170D4();
  }
  v98[0] = 480;
  v74 = ++v99;
  System_Collections_Generic_List_Enumerator_BattleLogicBuff_ReduceHpProcess_BuffInfo___Dispose(
    &j,
    (const MethodInfo_2074050 *)Method_System_Collections_Generic_List_Enumerator_BattleServantData__Dispose__);
  if ( v74 && v98[v74 - 1] == 480 )
    v99 = v74 - 1;
  v79 = (System_Collections_Generic_List_int__o *)sub_B170CC(
                                                    System_Collections_Generic_List_int__TypeInfo,
                                                    v75,
                                                    v76,
                                                    v77,
                                                    v78);
  System_Collections_Generic_List_int____ctor(
    v79,
    (const MethodInfo_2F0F794 *)Method_System_Collections_Generic_List_int___ctor__);
  canSelectCommands = this->fields.canSelectCommands;
  if ( !canSelectCommands )
    goto LABEL_50;
  v81 = canSelectCommands->max_length;
  if ( v81 < 1 )
  {
LABEL_78:
    v86 = v95;
    p_canSelectCommands = &this->fields.canSelectCommands;
    if ( v73 != this->fields.oldAliveCount )
      goto LABEL_82;
    goto LABEL_83;
  }
  v82 = 0;
  while ( 1 )
  {
    if ( v82 >= v81 )
      goto LABEL_91;
    v83 = canSelectCommands->m_Items[v82];
    if ( !v83 || !v79 )
      goto LABEL_50;
    SubPlayerServantList = (BattleServantData_array *)System_Collections_Generic_List_int___Contains(
                                                        v79,
                                                        v83->fields.uniqueId,
                                                        (const MethodInfo_2F10944 *)Method_System_Collections_Generic_List_int__Contains__);
    if ( ((unsigned __int8)SubPlayerServantList & 1) == 0 )
      break;
LABEL_77:
    v81 = canSelectCommands->max_length;
    if ( (int)++v82 >= v81 )
      goto LABEL_78;
  }
  v84 = BattleData__getServantData(this, v83->fields.uniqueId, v50);
  if ( v84 )
  {
    v85 = (WarBoardManager_TaskList_o *)v84;
    if ( BattleServantData__isAlive(v84, 0, 0LL)
      && System_Collections_Generic_List_WarBoardManager_TaskList___Contains(
           (System_Collections_Generic_List_WarBoardManager_TaskList__o *)v30,
           v85,
           (const MethodInfo_2F26128 *)Method_System_Collections_Generic_List_BattleServantData__Contains__) )
    {
      System_Collections_Generic_List_int___Add(
        v79,
        v83->fields.uniqueId,
        (const MethodInfo_2F104F0 *)Method_System_Collections_Generic_List_int__Add__);
      goto LABEL_77;
    }
  }
  v86 = v95;
  p_canSelectCommands = &this->fields.canSelectCommands;
LABEL_82:
  v91 = sub_B17014(BattleCommandData___TypeInfo, 0LL, v50);
  *p_canSelectCommands = (struct BattleCommandData_array *)v91;
  sub_B16F98(p_canSelectCommands, v91);
  this->fields.oldAliveCount = v73;
LABEL_83:
  if ( *p_canSelectCommands )
    v92 = (*p_canSelectCommands)->max_length == 0;
  else
    v92 = 1;
  if ( v92 | v86 & 1 )
  {
LABEL_89:
    BattleData__shuffleCanSelectCommand(this, v49);
    return 1;
  }
  v93 = this->fields.doNotSelectCommandSvtIdList;
  if ( !v93 )
    goto LABEL_50;
  if ( v94 != v93->fields._size )
    goto LABEL_89;
  return 1;
}


bool __fastcall BattleData__CheckFreshBuffDataList(
        BattleData_o *this,
        System_Int32_array *targetTypeArray,
        const MethodInfo *method)
{
  __int64 v5; // x1
  __int64 v6; // x1
  __int64 v7; // x1
  __int64 v8; // x1
  __int64 v9; // x1
  __int64 v10; // x1
  __int64 v11; // x1
  __int64 v12; // x1
  __int64 v13; // x1
  WebViewManager_o *Instance; // x0
  WarQuestSelectionMaster_o *MasterData_WarQuestSelectionMaster; // x0
  __int64 v16; // x1
  __int64 v17; // x2
  __int64 v18; // x3
  __int64 v19; // x4
  struct System_Collections_Generic_List_BattleActionData_BuffData__o *freshBuffDataList; // x8
  DataMasterBase_WarMaster__WarEntity__int__o *v21; // x21
  __int64 v22; // x24
  BattleData___c__DisplayClass412_0_o *v23; // x22
  struct System_Collections_Generic_List_BattleActionData_BuffData__o *v24; // x23
  BattleActionData_BuffData_o *v25; // x8
  WarEntity_o *Entity; // x0
  __int64 v27; // x1
  __int64 v28; // x2
  __int64 v29; // x3
  __int64 v30; // x4
  System_Func_int__bool__o *v31; // x23

  if ( (byte_40F6A41 & 1) == 0 )
  {
    sub_B16FFC(&Method_BasicHelper_Any_int____66805656, targetTypeArray);
    sub_B16FFC(&Method_DataManager_GetMasterData_BuffMaster___, v5);
    sub_B16FFC(&Method_DataMasterBase_BuffMaster__BuffEntity__int__GetEntity__, v6);
    sub_B16FFC(&Method_System_Func_int__bool___ctor__, v7);
    sub_B16FFC(&System_Func_int__bool__TypeInfo, v8);
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleActionData_BuffData__get_Count__, v9);
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleActionData_BuffData__get_Item__, v10);
    sub_B16FFC(&Method_SingletonMonoBehaviour_DataManager__get_Instance__, v11);
    sub_B16FFC(&Method_BattleData___c__DisplayClass412_0__CheckFreshBuffDataList_b__0__, v12);
    sub_B16FFC(&BattleData___c__DisplayClass412_0_TypeInfo, v13);
    byte_40F6A41 = 1;
  }
  Instance = SingletonMonoBehaviour_WebViewManager___get_Instance((const MethodInfo_2A54F38 *)Method_SingletonMonoBehaviour_DataManager__get_Instance__);
  if ( !Instance
    || (MasterData_WarQuestSelectionMaster = DataManager__GetMasterData_WarQuestSelectionMaster_(
                                               (DataManager_o *)Instance,
                                               (const MethodInfo_18C3284 *)Method_DataManager_GetMasterData_BuffMaster___),
        (freshBuffDataList = this->fields.freshBuffDataList) == 0LL) )
  {
LABEL_15:
    sub_B170D4();
  }
  v21 = (DataMasterBase_WarMaster__WarEntity__int__o *)MasterData_WarQuestSelectionMaster;
  v22 = 0LL;
  while ( 1 )
  {
    if ( (int)v22 >= freshBuffDataList->fields._size )
      return 0;
    v23 = (BattleData___c__DisplayClass412_0_o *)sub_B170CC(
                                                   BattleData___c__DisplayClass412_0_TypeInfo,
                                                   v16,
                                                   v17,
                                                   v18,
                                                   v19);
    BattleData___c__DisplayClass412_0___ctor(v23, 0LL);
    v24 = this->fields.freshBuffDataList;
    if ( !v24 )
      goto LABEL_15;
    if ( v24->fields._size <= (unsigned int)v22 )
      System_ThrowHelper__ThrowArgumentOutOfRangeException_41329284(0LL);
    v25 = v24->fields._items->m_Items[v22];
    if ( !v25 )
      goto LABEL_15;
    if ( !v21 )
      goto LABEL_15;
    Entity = DataMasterBase_WarMaster__WarEntity__int___GetEntity(
               v21,
               v25->fields.buffId,
               (const MethodInfo_266F388 *)Method_DataMasterBase_BuffMaster__BuffEntity__int__GetEntity__);
    if ( !v23 )
      goto LABEL_15;
    v23->fields.ent = (struct BuffEntity_o *)Entity;
    sub_B16F98(&v23->fields, Entity);
    v31 = (System_Func_int__bool__o *)sub_B170CC(System_Func_int__bool__TypeInfo, v27, v28, v29, v30);
    System_Func_int__bool____ctor(
      v31,
      (Il2CppObject *)v23,
      Method_BattleData___c__DisplayClass412_0__CheckFreshBuffDataList_b__0__,
      (const MethodInfo_2B6586C *)Method_System_Func_int__bool___ctor__);
    if ( BasicHelper__Any_int__25910576(
           targetTypeArray,
           (System_Func_T__bool__o *)v31,
           (const MethodInfo_18B5D30 *)Method_BasicHelper_Any_int____66805656) )
    {
      return 1;
    }
    freshBuffDataList = this->fields.freshBuffDataList;
    ++v22;
    if ( !freshBuffDataList )
      goto LABEL_15;
  }
}


// local variable allocation has failed, the output may be wrong!
System_Int32_array *__fastcall BattleData__CheckIndivSvtIdList(
        BattleData_o *this,
        System_Int32_array *svtIdList,
        System_Int32_array *tvals,
        bool isIncludeIgnoreIndiv,
        const MethodInfo *method)
{
  __int64 v9; // x1
  __int64 v10; // x1
  __int64 v11; // x1
  __int64 v12; // x1
  __int64 v13; // x1
  __int64 v14; // x1
  System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData__o *v15; // x23
  __int64 v16; // x0
  __int64 v17; // x1
  const MethodInfo *v18; // x2
  __int64 v19; // x8
  unsigned __int64 v20; // x24
  EventMissionProgressRequest_Argument_ProgressData_o *ServantData; // x0
  BattleServantData_array *v22; // x19
  __int64 v23; // x1
  __int64 v24; // x2
  __int64 v25; // x3
  __int64 v26; // x4
  System_Collections_Generic_List_int__o *v27; // x20
  int max_length; // w8
  unsigned int v29; // w21
  BattleServantData_o *v30; // x8

  if ( (byte_40F6A62 & 1) == 0 )
  {
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleServantData__Add__, svtIdList);
    sub_B16FFC(&Method_System_Collections_Generic_List_int__Add__, v9);
    sub_B16FFC(&Method_System_Collections_Generic_List_int__ToArray__, v10);
    sub_B16FFC(&Method_System_Collections_Generic_List_int___ctor__, v11);
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleServantData___ctor__, v12);
    sub_B16FFC(&System_Collections_Generic_List_int__TypeInfo, v13);
    sub_B16FFC(&System_Collections_Generic_List_BattleServantData__TypeInfo, v14);
    byte_40F6A62 = 1;
  }
  v15 = (System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData__o *)sub_B170CC(
                                                                                                  System_Collections_Generic_List_BattleServantData__TypeInfo,
                                                                                                  svtIdList,
                                                                                                  tvals,
                                                                                                  isIncludeIgnoreIndiv,
                                                                                                  method);
  System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData____ctor(
    v15,
    (const MethodInfo_2F25014 *)Method_System_Collections_Generic_List_BattleServantData___ctor__);
  if ( !svtIdList )
    goto LABEL_18;
  v19 = *(_QWORD *)&svtIdList->max_length;
  if ( (int)v19 >= 1 )
  {
    v20 = 0LL;
    while ( v20 < (unsigned int)v19 )
    {
      ServantData = (EventMissionProgressRequest_Argument_ProgressData_o *)BattleData__getServantData(
                                                                             this,
                                                                             svtIdList->m_Items[v20 + 1],
                                                                             v18);
      if ( !v15 )
        goto LABEL_18;
      System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData___Add(
        v15,
        ServantData,
        (const MethodInfo_2F25CD8 *)Method_System_Collections_Generic_List_BattleServantData__Add__);
      LODWORD(v19) = svtIdList->max_length;
      if ( (__int64)++v20 >= (int)v19 )
        goto LABEL_9;
    }
LABEL_19:
    sub_B17100(v16, v17, v18);
    sub_B170A0();
  }
LABEL_9:
  v22 = BattleBuffData__CheckIndivSvtDataList(
          (System_Collections_Generic_List_BattleServantData__o *)v15,
          tvals,
          isIncludeIgnoreIndiv,
          0LL);
  v27 = (System_Collections_Generic_List_int__o *)sub_B170CC(
                                                    System_Collections_Generic_List_int__TypeInfo,
                                                    v23,
                                                    v24,
                                                    v25,
                                                    v26);
  System_Collections_Generic_List_int____ctor(
    v27,
    (const MethodInfo_2F0F794 *)Method_System_Collections_Generic_List_int___ctor__);
  if ( !v22 )
    goto LABEL_18;
  max_length = v22->max_length;
  if ( max_length >= 1 )
  {
    v29 = 0;
    while ( v29 < max_length )
    {
      v30 = v22->m_Items[v29];
      if ( !v30 || !v27 )
        goto LABEL_18;
      System_Collections_Generic_List_int___Add(
        v27,
        v30->fields.uniqueId,
        (const MethodInfo_2F104F0 *)Method_System_Collections_Generic_List_int__Add__);
      max_length = v22->max_length;
      if ( (int)++v29 >= max_length )
        goto LABEL_16;
    }
    goto LABEL_19;
  }
LABEL_16:
  if ( !v27 )
LABEL_18:
    sub_B170D4();
  return System_Collections_Generic_List_int___ToArray(
           v27,
           (const MethodInfo_2F125FC *)Method_System_Collections_Generic_List_int__ToArray__);
}


// local variable allocation has failed, the output may be wrong!
void __fastcall BattleData__CheckMultiTargetBattle(BattleData_o *this, bool isResume, const MethodInfo *method)
{
  __int64 v5; // x1
  struct System_Collections_Generic_List_BattleServantData__o *enemy_datalist; // x23
  __int64 v7; // x21
  int size; // w8
  unsigned int v9; // w22
  BattleServantData_o *v10; // x0
  const MethodInfo *v11; // x1
  struct System_Collections_Generic_List_BattleServantData__o *v12; // x23
  __int64 v13; // x8
  System_Collections_IEnumerator_o *v14; // x1

  if ( (byte_40F6A9D & 1) == 0 )
  {
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleServantData__get_Count__, isResume);
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleServantData__get_Item__, v5);
    byte_40F6A9D = 1;
  }
  enemy_datalist = this->fields.enemy_datalist;
  if ( enemy_datalist )
  {
    v7 = 4LL;
    while ( 1 )
    {
      size = enemy_datalist->fields._size;
      v9 = v7 - 4;
      if ( (int)v7 - 4 >= size )
        break;
      if ( size <= v9 )
        System_ThrowHelper__ThrowArgumentOutOfRangeException_41329284(0LL);
      v10 = (BattleServantData_o *)*((_QWORD *)&enemy_datalist->fields._items->obj.klass + v7);
      if ( !v10 )
        goto LABEL_20;
      if ( BattleServantData__isMultiTargetCore(v10, 0LL) )
      {
        v12 = this->fields.enemy_datalist;
        if ( !v12 )
LABEL_20:
          sub_B170D4();
        if ( v12->fields._size <= v9 )
          System_ThrowHelper__ThrowArgumentOutOfRangeException_41329284(0LL);
        v13 = *((_QWORD *)&v12->fields._items->obj.klass + v7);
        if ( v13 )
        {
          this->fields.isMultiTargetBattle = 1;
          if ( !isResume )
            this->fields.globaltargetId = *(_DWORD *)(v13 + 24);
          v14 = BattleData__PartsIntoTheBodyDelay(this, v11);
          UnityEngine_MonoBehaviour__StartCoroutine_34804316((UnityEngine_MonoBehaviour_o *)this, v14, 0LL);
        }
        return;
      }
      enemy_datalist = this->fields.enemy_datalist;
      ++v7;
      if ( !enemy_datalist )
        goto LABEL_20;
    }
  }
}


// local variable allocation has failed, the output may be wrong!
bool __fastcall BattleData__CheckPerformedFuncType(BattleData_o *this, int32_t targetType, const MethodInfo *method)
{
  __int64 v5; // x1
  struct System_Collections_Generic_List_DataVals__o *performedValsList; // x22
  __int64 v7; // x21
  int size; // w8
  DataVals_o *v9; // x8

  if ( (byte_40F6A3E & 1) == 0 )
  {
    sub_B16FFC(&Method_System_Collections_Generic_List_DataVals__get_Count__, *(_QWORD *)&targetType);
    sub_B16FFC(&Method_System_Collections_Generic_List_DataVals__get_Item__, v5);
    byte_40F6A3E = 1;
  }
  performedValsList = this->fields.performedValsList;
  if ( !performedValsList )
LABEL_11:
    sub_B170D4();
  v7 = 0LL;
  while ( 1 )
  {
    size = performedValsList->fields._size;
    if ( (int)v7 >= size )
      return 0;
    if ( size <= (unsigned int)v7 )
      System_ThrowHelper__ThrowArgumentOutOfRangeException_41329284(0LL);
    v9 = performedValsList->fields._items->m_Items[v7];
    if ( !v9 )
      goto LABEL_11;
    if ( v9->fields.funcType == targetType )
      return 1;
    performedValsList = this->fields.performedValsList;
    ++v7;
    if ( !performedValsList )
      goto LABEL_11;
  }
}


bool __fastcall BattleData__CheckStageScript(BattleData_o *this, System_String_o *key, const MethodInfo *method)
{
  StageEntity_o *StageEntity; // x0

  StageEntity = BattleData__getStageEntity(this, (const MethodInfo *)key);
  if ( !StageEntity )
    sub_B170D4();
  return StageEntity__checkScript(StageEntity, key, 0LL);
}


void __fastcall BattleData__ClearRestockServantLogic(BattleData_o *this, const MethodInfo *method)
{
  struct System_Collections_Generic_List_RestockServantLogic__o *restockServantLogicList; // x0

  if ( (byte_40F6A22 & 1) == 0 )
  {
    sub_B16FFC(&Method_System_Collections_Generic_List_RestockServantLogic__Clear__, method);
    byte_40F6A22 = 1;
  }
  restockServantLogicList = this->fields.restockServantLogicList;
  if ( !restockServantLogicList )
    sub_B170D4();
  System_Collections_Generic_List_XWeaponTrail_Element___Clear(
    (System_Collections_Generic_List_XWeaponTrail_Element__o *)restockServantLogicList,
    (const MethodInfo_2F260E0 *)Method_System_Collections_Generic_List_RestockServantLogic__Clear__);
}


System_Collections_Generic_List_EventCommandAssistEntity__o *__fastcall BattleData__CreateCommandAssistInfoAll(
        BattleData_o *this,
        const MethodInfo *method)
{
  __int64 v3; // x1
  __int64 v4; // x1
  __int64 v5; // x1
  __int64 v6; // x1
  DataMasterBase_WarMaster__WarEntity__int__o *Master_WarQuestSelectionMaster; // x0
  struct BattleEntity_o *battle_ent; // x8
  bool IsEventCommandAssist; // w8
  System_Collections_Generic_List_EventCommandAssistEntity__o *result; // x0
  System_Collections_Generic_List_int__o *IgnoreCommandAssistQuestIds; // x0
  struct QuestEntity_o *quest_ent; // x8
  EventCommandAssistMaster_o *v13; // x0
  struct BattleEntity_o *v14; // x8
  WarEntity_o *entity; // [xsp+8h] [xbp-18h] BYREF

  if ( (byte_40F6A92 & 1) == 0 )
  {
    sub_B16FFC(&Method_DataManager_GetMaster_EventCommandAssistMaster___, method);
    sub_B16FFC(&Method_DataManager_GetMaster_EventDetailMaster___, v3);
    sub_B16FFC(&DataManager_TypeInfo, v4);
    sub_B16FFC(&Method_DataMasterBase_EventDetailMaster__EventDetailEntity__int__TryGetEntity__, v5);
    sub_B16FFC(&Method_System_Collections_Generic_List_int__Contains__, v6);
    byte_40F6A92 = 1;
  }
  entity = 0LL;
  if ( (BYTE3(DataManager_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0 && !DataManager_TypeInfo->_2.cctor_finished )
    j_il2cpp_runtime_class_init_0(DataManager_TypeInfo);
  Master_WarQuestSelectionMaster = (DataMasterBase_WarMaster__WarEntity__int__o *)DataManager__GetMaster_WarQuestSelectionMaster_((const MethodInfo_18C3224 *)Method_DataManager_GetMaster_EventDetailMaster___);
  entity = 0LL;
  battle_ent = this->fields.battle_ent;
  if ( !battle_ent || !Master_WarQuestSelectionMaster )
    goto LABEL_23;
  if ( !DataMasterBase_WarMaster__WarEntity__int___TryGetEntity(
          Master_WarQuestSelectionMaster,
          &entity,
          battle_ent->fields.eventId,
          (const MethodInfo_266F3E4 *)Method_DataMasterBase_EventDetailMaster__EventDetailEntity__int__TryGetEntity__) )
    return 0LL;
  if ( !entity )
    goto LABEL_23;
  IsEventCommandAssist = EventDetailEntity__IsEventCommandAssist((EventDetailEntity_o *)entity, 0LL);
  result = 0LL;
  if ( !IsEventCommandAssist )
    return result;
  if ( !entity )
    goto LABEL_23;
  IgnoreCommandAssistQuestIds = EventDetailEntity__GetIgnoreCommandAssistQuestIds((EventDetailEntity_o *)entity, 0LL);
  if ( IgnoreCommandAssistQuestIds )
  {
    quest_ent = this->fields.quest_ent;
    if ( !quest_ent )
      goto LABEL_23;
    if ( System_Collections_Generic_List_int___Contains(
           IgnoreCommandAssistQuestIds,
           quest_ent->fields.id,
           (const MethodInfo_2F10944 *)Method_System_Collections_Generic_List_int__Contains__) )
    {
      return 0LL;
    }
  }
  if ( (BYTE3(DataManager_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0 && !DataManager_TypeInfo->_2.cctor_finished )
    j_il2cpp_runtime_class_init_0(DataManager_TypeInfo);
  v13 = (EventCommandAssistMaster_o *)DataManager__GetMaster_WarQuestSelectionMaster_((const MethodInfo_18C3224 *)Method_DataManager_GetMaster_EventCommandAssistMaster___);
  v14 = this->fields.battle_ent;
  if ( !v14 || !v13 )
LABEL_23:
    sub_B170D4();
  return EventCommandAssistMaster__GetAllEntityList(v13, v14->fields.eventId, -1, 1, 0LL);
}


System_Collections_Generic_List_List_EventCommandAssistEntity___o *__fastcall BattleData__CreateCommandAssistInfoArrayOversight(
        BattleData_o *this,
        System_Collections_Generic_List_EventCommandAssistEntity__o *commandAssistInfoList,
        const MethodInfo *method)
{
  __int64 v3; // x3
  __int64 v4; // x4
  __int64 v6; // x1
  __int64 v7; // x1
  System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData__o *v8; // x20
  BattleData_o *v9; // x0
  const MethodInfo *v10; // x3
  EventMissionProgressRequest_Argument_ProgressData_o *CommandAssistList; // x0
  BattleData_o *v12; // x0
  const MethodInfo *v13; // x3
  EventMissionProgressRequest_Argument_ProgressData_o *v14; // x0
  BattleData_o *v15; // x0
  const MethodInfo *v16; // x3
  EventMissionProgressRequest_Argument_ProgressData_o *v17; // x0

  if ( (byte_40F6A93 & 1) == 0 )
  {
    sub_B16FFC(&Method_System_Collections_Generic_List_List_EventCommandAssistEntity___Add__, commandAssistInfoList);
    sub_B16FFC(&Method_System_Collections_Generic_List_List_EventCommandAssistEntity____ctor__, v6);
    sub_B16FFC(&System_Collections_Generic_List_List_EventCommandAssistEntity___TypeInfo, v7);
    byte_40F6A93 = 1;
  }
  v8 = (System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData__o *)sub_B170CC(
                                                                                                 System_Collections_Generic_List_List_EventCommandAssistEntity___TypeInfo,
                                                                                                 commandAssistInfoList,
                                                                                                 method,
                                                                                                 v3,
                                                                                                 v4);
  System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData____ctor(
    v8,
    (const MethodInfo_2F25014 *)Method_System_Collections_Generic_List_List_EventCommandAssistEntity____ctor__);
  CommandAssistList = (EventMissionProgressRequest_Argument_ProgressData_o *)BattleData__GetCommandAssistList(
                                                                               v9,
                                                                               commandAssistInfoList,
                                                                               1,
                                                                               v10);
  if ( !v8 )
    sub_B170D4();
  System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData___Add(
    v8,
    CommandAssistList,
    (const MethodInfo_2F25CD8 *)Method_System_Collections_Generic_List_List_EventCommandAssistEntity___Add__);
  v14 = (EventMissionProgressRequest_Argument_ProgressData_o *)BattleData__GetCommandAssistList(
                                                                 v12,
                                                                 commandAssistInfoList,
                                                                 2,
                                                                 v13);
  System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData___Add(
    v8,
    v14,
    (const MethodInfo_2F25CD8 *)Method_System_Collections_Generic_List_List_EventCommandAssistEntity___Add__);
  v17 = (EventMissionProgressRequest_Argument_ProgressData_o *)BattleData__GetCommandAssistList(
                                                                 v15,
                                                                 commandAssistInfoList,
                                                                 3,
                                                                 v16);
  System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData___Add(
    v8,
    v17,
    (const MethodInfo_2F25CD8 *)Method_System_Collections_Generic_List_List_EventCommandAssistEntity___Add__);
  return (System_Collections_Generic_List_List_EventCommandAssistEntity___o *)v8;
}


System_Collections_Generic_List_commandAssistData__o *__fastcall BattleData__CreateLotteryCommandAssistInfo(
        BattleData_o *this,
        DeckData_o *mydeck,
        const MethodInfo *method)
{
  __int64 v3; // x3
  __int64 v4; // x4
  DeckData_o *v5; // x20
  __int64 v7; // x1
  __int64 v8; // x1
  __int64 v9; // x1
  __int64 v10; // x1
  __int64 v11; // x1
  __int64 v12; // x1
  __int64 v13; // x1
  __int64 v14; // x1
  __int64 v15; // x1
  __int64 v16; // x1
  __int64 v17; // x1
  __int64 v18; // x1
  __int64 v19; // x1
  __int64 v20; // x1
  __int64 v21; // x1
  __int64 v22; // x1
  __int64 v23; // x1
  __int64 v24; // x1
  __int64 v25; // x1
  __int64 v26; // x1
  __int64 v27; // x1
  __int64 v28; // x1
  BattleData___c__DisplayClass540_0_o *v29; // x19
  __int64 v30; // x1
  __int64 v31; // x2
  __int64 v32; // x3
  __int64 v33; // x4
  System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData__o *v34; // x22
  const MethodInfo *v35; // x1
  System_Collections_Generic_List_EventCommandAssistEntity__o *CommandAssistInfoAll; // x0
  const MethodInfo *v37; // x2
  System_Collections_Generic_List_List_EventCommandAssistEntity___o *CommandAssistInfoArrayOversight; // x0
  System_Collections_Generic_List_List_EventCommandAssistEntity___o *v39; // x24
  System_Object_array *Shuffle_object; // x23
  const MethodInfo *v41; // x3
  int32_t LotteryCount; // w0
  const MethodInfo *v43; // x4
  __int64 v44; // x1
  const MethodInfo *v45; // x2
  __int64 v46; // x3
  unsigned __int64 v47; // x9
  BattleData___c__DisplayClass540_1_o *v48; // x28
  peRenderTexture_ChangeLayerObject_o *v49; // x0
  struct BattleDeckServantData_o *v50; // x1
  BattleData___c__DisplayClass540_1_Fields *p_fields; // x21
  struct BattleEntity_o *battle_ent; // x8
  BattleInfoData_o *battleInfo; // x0
  BattleUserServantData_o *UserServantFromID; // x0
  __int64 v55; // x19
  __int64 v56; // x20
  int32_t v57; // w1
  WarEntity_o *Entity; // x0
  __int64 v59; // x9
  WarEntity_o *v60; // x19
  int v61; // w8
  System_Predicate_peRenderTexture_ChangeLayerObject__o **p__9__1; // x23
  System_Predicate_peRenderTexture_ChangeLayerObject__o *v63; // x27
  __int64 v64; // x8
  __int64 i; // x9
  int v66; // w20
  System_Collections_Generic_List_EventCommandAssistEntity__o *v67; // x27
  StonePurchaseNotificationMenu_DialogOpenQueue_o *StonePurchaseNotificationMenu_DialogOpenQueue; // x0
  __int64 v69; // x1
  __int64 v70; // x2
  __int64 v71; // x3
  __int64 v72; // x4
  EventCommandAssistEntity_o *v73; // x20
  BattleData___c__DisplayClass540_1_Fields *v74; // x26
  commandAssistData_o *v75; // x21
  WarQuestSelectionMaster_o *v76; // x0
  __int64 v77; // x1
  __int64 v78; // x2
  __int64 v79; // x3
  __int64 v80; // x4
  System_Predicate_peRenderTexture_ChangeLayerObject__o *v81; // x19
  Il2CppObject *v83; // [xsp+0h] [xbp-A0h]
  System_Collections_Generic_List_EventCommandAssistEntity__o *commandAssistInfoList; // [xsp+8h] [xbp-98h]
  int32_t v85; // [xsp+14h] [xbp-8Ch]
  DeckData_o *v86; // [xsp+18h] [xbp-88h]
  System_Object_array *v87; // [xsp+20h] [xbp-80h]
  BattleData_o *v88; // [xsp+28h] [xbp-78h]
  DataMasterBase_WarMaster__WarEntity__int__o *Master_WarQuestSelectionMaster; // [xsp+30h] [xbp-70h]
  unsigned __int64 v90; // [xsp+38h] [xbp-68h]
  int32_t cardIndex; // [xsp+44h] [xbp-5Ch]
  int64_t userSvtId; // [xsp+48h] [xbp-58h]
  CodeStage_AntiCheat_ObscuredTypes_ObscuredInt_o v93; // 0:x0.16

  v5 = mydeck;
  if ( (byte_40F6A91 & 1) == 0 )
  {
    sub_B16FFC(&Method_BattleRandom_getShuffle_BattleDeckServantData___, mydeck);
    sub_B16FFC(&Method_DataManager_GetMaster_EventCommandAssistMaster___, v7);
    sub_B16FFC(&Method_DataManager_GetMaster_ServantMaster___, v8);
    sub_B16FFC(&DataManager_TypeInfo, v9);
    sub_B16FFC(&Method_DataMasterBase_ServantMaster__ServantEntity__int__GetEntity__, v10);
    sub_B16FFC(&Method_System_Linq_Enumerable_First_EventCommandAssistEntity___, v11);
    sub_B16FFC(&Method_System_Collections_Generic_List_commandAssistData__Add__, v12);
    sub_B16FFC(&Method_System_Collections_Generic_List_commandAssistData__Find__, v13);
    sub_B16FFC(&Method_System_Collections_Generic_List_commandAssistData__RemoveAll__, v14);
    sub_B16FFC(&Method_System_Collections_Generic_List_EventCommandAssistEntity__RemoveAt__, v15);
    sub_B16FFC(&Method_System_Collections_Generic_List_commandAssistData___ctor__, v16);
    sub_B16FFC(&Method_System_Collections_Generic_List_commandAssistData__get_Count__, v17);
    sub_B16FFC(&Method_System_Collections_Generic_List_EventCommandAssistEntity__get_Count__, v18);
    sub_B16FFC(&Method_System_Collections_Generic_List_List_EventCommandAssistEntity___get_Item__, v19);
    sub_B16FFC(&System_Collections_Generic_List_commandAssistData__TypeInfo, v20);
    sub_B16FFC(&CodeStage_AntiCheat_ObscuredTypes_ObscuredInt_TypeInfo, v21);
    sub_B16FFC(&Method_System_Predicate_commandAssistData___ctor__, v22);
    sub_B16FFC(&System_Predicate_commandAssistData__TypeInfo, v23);
    sub_B16FFC(&Method_BattleData___c__DisplayClass540_0__CreateLotteryCommandAssistInfo_b__0__, v24);
    sub_B16FFC(&BattleData___c__DisplayClass540_0_TypeInfo, v25);
    sub_B16FFC(&Method_BattleData___c__DisplayClass540_1__CreateLotteryCommandAssistInfo_b__1__, v26);
    sub_B16FFC(&BattleData___c__DisplayClass540_1_TypeInfo, v27);
    sub_B16FFC(&commandAssistData_TypeInfo, v28);
    byte_40F6A91 = 1;
  }
  v29 = (BattleData___c__DisplayClass540_0_o *)sub_B170CC(
                                                 BattleData___c__DisplayClass540_0_TypeInfo,
                                                 mydeck,
                                                 method,
                                                 v3,
                                                 v4);
  BattleData___c__DisplayClass540_0___ctor(v29, 0LL);
  if ( !v29 )
    goto LABEL_53;
  v29->fields.__4__this = this;
  sub_B16F98(&v29->fields.__4__this, this);
  v34 = (System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData__o *)sub_B170CC(
                                                                                                  System_Collections_Generic_List_commandAssistData__TypeInfo,
                                                                                                  v30,
                                                                                                  v31,
                                                                                                  v32,
                                                                                                  v33);
  System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData____ctor(
    v34,
    (const MethodInfo_2F25014 *)Method_System_Collections_Generic_List_commandAssistData___ctor__);
  CommandAssistInfoAll = BattleData__CreateCommandAssistInfoAll(this, v35);
  if ( !CommandAssistInfoAll )
    return 0LL;
  v83 = (Il2CppObject *)v29;
  commandAssistInfoList = CommandAssistInfoAll;
  CommandAssistInfoArrayOversight = BattleData__CreateCommandAssistInfoArrayOversight(this, CommandAssistInfoAll, v37);
  if ( !v5 )
    goto LABEL_53;
  v39 = CommandAssistInfoArrayOversight;
  Shuffle_object = BattleRandom__getShuffle_object_(
                     (System_Object_array *)v5->fields.svts,
                     (const MethodInfo_18BA1C8 *)Method_BattleRandom_getShuffle_BattleDeckServantData___);
  if ( (BYTE3(DataManager_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0 && !DataManager_TypeInfo->_2.cctor_finished )
    j_il2cpp_runtime_class_init_0(DataManager_TypeInfo);
  Master_WarQuestSelectionMaster = (DataMasterBase_WarMaster__WarEntity__int__o *)DataManager__GetMaster_WarQuestSelectionMaster_((const MethodInfo_18C3224 *)Method_DataManager_GetMaster_ServantMaster___);
  LotteryCount = BattleData__GetLotteryCount(this, v5->fields.svts, v39, v41);
  if ( !v34 )
    goto LABEL_53;
  if ( v34->fields._size < LotteryCount )
  {
    v86 = v5;
    v87 = Shuffle_object;
    v88 = this;
    v85 = LotteryCount;
    while ( 1 )
    {
      if ( BattleData__IsResetCommandAssistInfoArrayOversight(
             this,
             v39,
             (System_Collections_Generic_List_commandAssistData__o *)v34,
             v5->fields.svts,
             v43) )
      {
        v39 = BattleData__CreateCommandAssistInfoArrayOversight(this, commandAssistInfoList, v45);
      }
      if ( !Shuffle_object )
        goto LABEL_53;
      if ( (int)Shuffle_object->max_length >= 1 )
        break;
LABEL_46:
      v5 = v86;
      if ( v34->fields._size >= v85 )
        goto LABEL_47;
    }
    v47 = 0LL;
    while ( 1 )
    {
      v90 = v47;
      v48 = (BattleData___c__DisplayClass540_1_o *)sub_B170CC(
                                                     BattleData___c__DisplayClass540_1_TypeInfo,
                                                     v44,
                                                     v45,
                                                     v46,
                                                     v43);
      BattleData___c__DisplayClass540_1___ctor(v48, 0LL);
      if ( v90 >= Shuffle_object->max_length )
      {
LABEL_54:
        sub_B17100(v49, v44, v45);
        sub_B170A0();
      }
      if ( !v48 )
        break;
      v50 = (struct BattleDeckServantData_o *)Shuffle_object->m_Items[v90];
      v48->fields.deckData = v50;
      p_fields = &v48->fields;
      sub_B16F98(&v48->fields, v50);
      battle_ent = this->fields.battle_ent;
      if ( !battle_ent )
        break;
      if ( !p_fields->deckData )
        break;
      battleInfo = battle_ent->fields.battleInfo;
      if ( !battleInfo )
        break;
      UserServantFromID = BattleInfoData__getUserServantFromID(battleInfo, p_fields->deckData->fields.userSvtId, 0LL);
      if ( !UserServantFromID )
        break;
      v56 = *(_QWORD *)&UserServantFromID->fields.svtId.fields.currentCryptoKey;
      v55 = *(_QWORD *)&UserServantFromID->fields.svtId.fields.fakeValue;
      if ( (BYTE3(CodeStage_AntiCheat_ObscuredTypes_ObscuredInt_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0
        && !CodeStage_AntiCheat_ObscuredTypes_ObscuredInt_TypeInfo->_2.cctor_finished )
      {
        j_il2cpp_runtime_class_init_0(CodeStage_AntiCheat_ObscuredTypes_ObscuredInt_TypeInfo);
      }
      *(_QWORD *)&v93.fields.currentCryptoKey = v56;
      *(_QWORD *)&v93.fields.fakeValue = v55;
      v57 = CodeStage_AntiCheat_ObscuredTypes_ObscuredInt__op_Implicit_44068536(v93, 0LL);
      if ( !Master_WarQuestSelectionMaster )
        break;
      Entity = DataMasterBase_WarMaster__WarEntity__int___GetEntity(
                 Master_WarQuestSelectionMaster,
                 v57,
                 (const MethodInfo_266F388 *)Method_DataMasterBase_ServantMaster__ServantEntity__int__GetEntity__);
      v48->fields.i = 0;
      if ( !Entity )
        break;
      v59 = *(_QWORD *)&Entity[1].fields.id;
      v60 = Entity;
      if ( !v59 )
        break;
      v61 = 0;
      p__9__1 = (System_Predicate_peRenderTexture_ChangeLayerObject__o **)&v48->fields.__9__1;
      while ( v61 < *(_DWORD *)(v59 + 24) )
      {
        v63 = *p__9__1;
        if ( !*p__9__1 )
        {
          v63 = (System_Predicate_peRenderTexture_ChangeLayerObject__o *)sub_B170CC(
                                                                           System_Predicate_commandAssistData__TypeInfo,
                                                                           v44,
                                                                           v45,
                                                                           v46,
                                                                           v43);
          System_Predicate_peRenderTexture_ChangeLayerObject____ctor(
            v63,
            (Il2CppObject *)v48,
            Method_BattleData___c__DisplayClass540_1__CreateLotteryCommandAssistInfo_b__1__,
            (const MethodInfo_2B0B204 *)Method_System_Predicate_commandAssistData___ctor__);
          v48->fields.__9__1 = (struct System_Predicate_commandAssistData__o *)v63;
          sub_B16F98(&v48->fields.__9__1, v63);
        }
        v49 = System_Collections_Generic_List_peRenderTexture_ChangeLayerObject___Find(
                (System_Collections_Generic_List_peRenderTexture_ChangeLayerObject__o *)v34,
                (System_Predicate_T__o *)v63,
                (const MethodInfo_2F26598 *)Method_System_Collections_Generic_List_commandAssistData__Find__);
        if ( !v49 )
        {
          v64 = *(_QWORD *)&v60[1].fields.id;
          if ( !v64 )
            goto LABEL_53;
          i = v48->fields.i;
          if ( (unsigned int)i >= *(_DWORD *)(v64 + 24) )
            goto LABEL_54;
          if ( !v39 )
            goto LABEL_53;
          v66 = *(_DWORD *)(v64 + 4 * i + 32) - 1;
          if ( v39->fields._size <= (unsigned int)v66 )
            System_ThrowHelper__ThrowArgumentOutOfRangeException_41329284(0LL);
          v67 = v39->fields._items->m_Items[v66];
          if ( !v67 )
            goto LABEL_53;
          if ( v67->fields._size )
          {
            StonePurchaseNotificationMenu_DialogOpenQueue = System_Linq_Enumerable__First_StonePurchaseNotificationMenu_DialogOpenQueue_(
                                                              (System_Collections_Generic_IEnumerable_TSource__o *)v67,
                                                              (const MethodInfo_18D6DD4 *)Method_System_Linq_Enumerable_First_EventCommandAssistEntity___);
            if ( !p_fields->deckData )
              goto LABEL_53;
            v73 = (EventCommandAssistEntity_o *)StonePurchaseNotificationMenu_DialogOpenQueue;
            v74 = p_fields;
            userSvtId = p_fields->deckData->fields.userSvtId;
            cardIndex = v48->fields.i;
            v75 = (commandAssistData_o *)sub_B170CC(commandAssistData_TypeInfo, v69, v70, v71, v72);
            commandAssistData___ctor(v75, v73, userSvtId, cardIndex, 0LL);
            System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData___Add(
              v34,
              (EventMissionProgressRequest_Argument_ProgressData_o *)v75,
              (const MethodInfo_2F25CD8 *)Method_System_Collections_Generic_List_commandAssistData__Add__);
            System_Collections_Generic_List_XWeaponTrail_Element___RemoveAt(
              (System_Collections_Generic_List_XWeaponTrail_Element__o *)v67,
              0,
              (const MethodInfo_2F279C8 *)Method_System_Collections_Generic_List_EventCommandAssistEntity__RemoveAt__);
            p_fields = v74;
          }
        }
        v61 = v48->fields.i + 1;
        v48->fields.i = v61;
        v59 = *(_QWORD *)&v60[1].fields.id;
        if ( !v59 )
          goto LABEL_53;
      }
      Shuffle_object = v87;
      this = v88;
      v47 = v90 + 1;
      if ( (__int64)(v90 + 1) >= (int)v87->max_length )
        goto LABEL_46;
    }
LABEL_53:
    sub_B170D4();
  }
LABEL_47:
  if ( (BYTE3(DataManager_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0 && !DataManager_TypeInfo->_2.cctor_finished )
    j_il2cpp_runtime_class_init_0(DataManager_TypeInfo);
  v76 = DataManager__GetMaster_WarQuestSelectionMaster_((const MethodInfo_18C3224 *)Method_DataManager_GetMaster_EventCommandAssistMaster___);
  v83[1].klass = (Il2CppClass *)v76;
  sub_B16F98(&v83[1], v76);
  v81 = (System_Predicate_peRenderTexture_ChangeLayerObject__o *)sub_B170CC(
                                                                   System_Predicate_commandAssistData__TypeInfo,
                                                                   v77,
                                                                   v78,
                                                                   v79,
                                                                   v80);
  System_Predicate_peRenderTexture_ChangeLayerObject____ctor(
    v81,
    v83,
    Method_BattleData___c__DisplayClass540_0__CreateLotteryCommandAssistInfo_b__0__,
    (const MethodInfo_2B0B204 *)Method_System_Predicate_commandAssistData___ctor__);
  System_Collections_Generic_List_ScrTerminalListTop_CaldeaFolderInfo___RemoveAll(
    (System_Collections_Generic_List_ScrTerminalListTop_CaldeaFolderInfo__o *)v34,
    (System_Predicate_T__o *)v81,
    (const MethodInfo_2F27828 *)Method_System_Collections_Generic_List_commandAssistData__RemoveAll__);
  return (System_Collections_Generic_List_commandAssistData__o *)v34;
}


void __fastcall BattleData__DeleteContinueData(const MethodInfo *method)
{
  __int64 v1; // x1
  __int64 v2; // x1
  __int64 v3; // x1
  __int64 v4; // x1
  __int64 v5; // x1
  __int64 v6; // x1
  __int64 v7; // x1
  __int64 v8; // x1
  __int64 v9; // x1
  __int64 v10; // x1
  __int64 v11; // x1
  __int64 v12; // x1
  __int64 v13; // x1
  __int64 v14; // x1
  __int64 v15; // x1
  BattleData_c *v16; // x0
  System_String_o *skipKey; // x19

  if ( (byte_40F6A72 & 1) == 0 )
  {
    sub_B16FFC(&BattleData_TypeInfo, v1);
    sub_B16FFC(&EncryptedPlayerPrefs_TypeInfo, v2);
    sub_B16FFC(&StringLiteral_5049/*"DUEL"*/, v3);
    sub_B16FFC(&StringLiteral_10849/*"QUESTPHASEID"*/, v4);
    sub_B16FFC(&StringLiteral_3353/*"CONTINUECOUNT"*/, v5);
    sub_B16FFC(&StringLiteral_10848/*"QUESTID"*/, v6);
    sub_B16FFC(&StringLiteral_3354/*"CONTINUE_BATTLE_SAVEKEY"*/, v7);
    sub_B16FFC(&StringLiteral_11516/*"SAVEKEY_"*/, v8);
    sub_B16FFC(&StringLiteral_3375/*"CONTINUE_ITEM_SAVEKEY"*/, v9);
    sub_B16FFC(&StringLiteral_3244/*"COMMAND_SPELL_BATTLE_SAVEKEY"*/, v10);
    sub_B16FFC(&StringLiteral_10850/*"QUESTUSEDTURNSAVEKEY"*/, v11);
    sub_B16FFC(&StringLiteral_8097/*"IsDuelMessagePack"*/, v12);
    sub_B16FFC(&StringLiteral_11046/*"RESERVE_BATTKE_SAVEKEY"*/, v13);
    sub_B16FFC(&StringLiteral_15123/*"Version"*/, v14);
    sub_B16FFC(&StringLiteral_2740/*"Battle"*/, v15);
    byte_40F6A72 = 1;
  }
  v16 = BattleData_TypeInfo;
  if ( (BYTE3(BattleData_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0 && !BattleData_TypeInfo->_2.cctor_finished )
  {
    j_il2cpp_runtime_class_init_0(BattleData_TypeInfo);
    v16 = BattleData_TypeInfo;
  }
  skipKey = v16->static_fields->skipKey;
  if ( (BYTE3(EncryptedPlayerPrefs_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0
    && !EncryptedPlayerPrefs_TypeInfo->_2.cctor_finished )
  {
    j_il2cpp_runtime_class_init_0(EncryptedPlayerPrefs_TypeInfo);
  }
  EncryptedPlayerPrefs__DeleteKey(skipKey, 0LL);
  EncryptedPlayerPrefs__DeleteKey(BattleData_TypeInfo->static_fields->speedKey, 0LL);
  EncryptedPlayerPrefs__DeleteKey(BattleData_TypeInfo->static_fields->TdCvKey, 0LL);
  EncryptedPlayerPrefs__DeleteKey((System_String_o *)StringLiteral_11516/*"SAVEKEY_"*/, 0LL);
  EncryptedPlayerPrefs__DeleteKey((System_String_o *)StringLiteral_11046/*"RESERVE_BATTKE_SAVEKEY"*/, 0LL);
  EncryptedPlayerPrefs__DeleteKey((System_String_o *)StringLiteral_10848/*"QUESTID"*/, 0LL);
  EncryptedPlayerPrefs__DeleteKey((System_String_o *)StringLiteral_10849/*"QUESTPHASEID"*/, 0LL);
  EncryptedPlayerPrefs__DeleteKey((System_String_o *)StringLiteral_3354/*"CONTINUE_BATTLE_SAVEKEY"*/, 0LL);
  EncryptedPlayerPrefs__DeleteKey((System_String_o *)StringLiteral_3244/*"COMMAND_SPELL_BATTLE_SAVEKEY"*/, 0LL);
  EncryptedPlayerPrefs__DeleteKey((System_String_o *)StringLiteral_3375/*"CONTINUE_ITEM_SAVEKEY"*/, 0LL);
  EncryptedPlayerPrefs__DeleteKey((System_String_o *)StringLiteral_15123/*"Version"*/, 0LL);
  EncryptedPlayerPrefs__DeleteKey((System_String_o *)StringLiteral_8097/*"IsDuelMessagePack"*/, 0LL);
  EncryptedPlayerPrefs__DeleteKey((System_String_o *)StringLiteral_5049/*"DUEL"*/, 0LL);
  EncryptedPlayerPrefs__DeleteKey((System_String_o *)StringLiteral_10848/*"QUESTID"*/, 0LL);
  EncryptedPlayerPrefs__DeleteKey((System_String_o *)StringLiteral_2740/*"Battle"*/, 0LL);
  EncryptedPlayerPrefs__DeleteKey((System_String_o *)StringLiteral_10850/*"QUESTUSEDTURNSAVEKEY"*/, 0LL);
  EncryptedPlayerPrefs__DeleteKey((System_String_o *)StringLiteral_3353/*"CONTINUECOUNT"*/, 0LL);
}


void __fastcall BattleData__DeleteDummyBuffDataAll(BattleData_o *this, const MethodInfo *method)
{
  __int64 v3; // x1
  struct System_Collections_Generic_List_BattleServantData__o *player_datalist; // x21
  __int64 v5; // x20
  int size; // w8
  BattleServantData_o *v7; // x8
  BattleBuffData_o *buffData; // x0
  struct System_Collections_Generic_List_BattleServantData__o *enemy_datalist; // x21
  __int64 v10; // x20
  int v11; // w8
  BattleServantData_o *v12; // x8
  BattleBuffData_o *v13; // x0

  if ( (byte_40F6A86 & 1) == 0 )
  {
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleServantData__get_Count__, method);
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleServantData__get_Item__, v3);
    byte_40F6A86 = 1;
  }
  player_datalist = this->fields.player_datalist;
  if ( !player_datalist )
    goto LABEL_20;
  v5 = 0LL;
  while ( 1 )
  {
    size = player_datalist->fields._size;
    if ( (int)v5 >= size )
      break;
    if ( size <= (unsigned int)v5 )
      System_ThrowHelper__ThrowArgumentOutOfRangeException_41329284(0LL);
    v7 = player_datalist->fields._items->m_Items[v5];
    if ( v7 )
    {
      buffData = v7->fields.buffData;
      if ( buffData )
      {
        BattleBuffData__DeleteDummyBuff(buffData, 0LL);
        player_datalist = this->fields.player_datalist;
        ++v5;
        if ( player_datalist )
          continue;
      }
    }
    goto LABEL_20;
  }
  enemy_datalist = this->fields.enemy_datalist;
  if ( !enemy_datalist )
LABEL_20:
    sub_B170D4();
  v10 = 0LL;
  while ( 1 )
  {
    v11 = enemy_datalist->fields._size;
    if ( (int)v10 >= v11 )
      break;
    if ( v11 <= (unsigned int)v10 )
      System_ThrowHelper__ThrowArgumentOutOfRangeException_41329284(0LL);
    v12 = enemy_datalist->fields._items->m_Items[v10];
    if ( v12 )
    {
      v13 = v12->fields.buffData;
      if ( v13 )
      {
        BattleBuffData__DeleteDummyBuff(v13, 0LL);
        enemy_datalist = this->fields.enemy_datalist;
        ++v10;
        if ( enemy_datalist )
          continue;
      }
    }
    goto LABEL_20;
  }
}


void __fastcall BattleData__DeleteResumeCheckPlayedMovieSaveKey(BattleData_o *this, const MethodInfo *method)
{
  __int64 v2; // x1
  __int64 v3; // x1

  if ( (byte_40F6A8C & 1) == 0 )
  {
    sub_B16FFC(&EncryptedPlayerPrefs_TypeInfo, method);
    sub_B16FFC(&StringLiteral_21402/*"playWaveStartMovie"*/, v2);
    sub_B16FFC(&StringLiteral_21623/*"rebootAlreadyPlayMovie"*/, v3);
    byte_40F6A8C = 1;
  }
  if ( (BYTE3(EncryptedPlayerPrefs_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0
    && !EncryptedPlayerPrefs_TypeInfo->_2.cctor_finished )
  {
    j_il2cpp_runtime_class_init_0(EncryptedPlayerPrefs_TypeInfo);
  }
  EncryptedPlayerPrefs__DeleteKey((System_String_o *)StringLiteral_21623/*"rebootAlreadyPlayMovie"*/, 0LL);
  EncryptedPlayerPrefs__DeleteKey((System_String_o *)StringLiteral_21402/*"playWaveStartMovie"*/, 0LL);
  UnityEngine_PlayerPrefs__Save(0LL);
}


bool __fastcall BattleData__EnableContinueItem(BattleData_o *this, const MethodInfo *method)
{
  __int64 v3; // x1
  __int64 v4; // x1
  __int64 v5; // x1
  __int64 v6; // x1
  __int64 v7; // x1
  __int64 v8; // x1
  __int64 v9; // x1
  __int64 v10; // x1
  __int64 v11; // x1
  __int64 v12; // x1
  WebViewManager_o *Instance; // x0
  EventCampaignMaster_o *MasterData_WarQuestSelectionMaster; // x0
  EventCampaignEntity_array *TargetEntitiyAllList; // x20
  __int64 v16; // x1
  __int64 v17; // x2
  __int64 v18; // x3
  __int64 v19; // x4
  System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData__o *v20; // x21
  WebViewManager_o *v21; // x0
  WarQuestSelectionMaster_o *IsOpen; // x0
  __int64 v23; // x1
  __int64 v24; // x2
  int max_length; // w8
  DataMasterBase_WarMaster__WarEntity__int__o *v26; // x22
  unsigned int v27; // w25
  EventMissionProgressRequest_Argument_ProgressData_o *v28; // x23
  EventEntity_o *Entity; // x0
  System_Collections_Generic_List_EventCampaignEntity__o *v30; // x0
  const MethodInfo *v31; // x2
  EventCampaignEntity_o *v32; // x1
  WebViewManager_o *v33; // x0
  ItemMaster_o *v34; // x0
  System_Collections_Generic_List_ItemEntity__o *EntityListByType; // x0

  if ( (byte_40F6AC0 & 1) == 0 )
  {
    sub_B16FFC(&Method_DataManager_GetMasterData_EventCampaignMaster___, method);
    sub_B16FFC(&Method_DataManager_GetMasterData_EventMaster___, v3);
    sub_B16FFC(&Method_DataManager_GetMasterData_ItemMaster___, v4);
    sub_B16FFC(&Method_DataMasterBase_EventMaster__EventEntity__int__GetEntity__, v5);
    sub_B16FFC(&Method_System_Collections_Generic_List_EventCampaignEntity__Add__, v6);
    sub_B16FFC(&Method_System_Collections_Generic_List_EventCampaignEntity___ctor__, v7);
    sub_B16FFC(&Method_System_Collections_Generic_List_EventCampaignEntity__get_Count__, v8);
    sub_B16FFC(&Method_System_Collections_Generic_List_ItemEntity__get_Count__, v9);
    sub_B16FFC(&Method_System_Collections_Generic_List_EventCampaignEntity__get_Item__, v10);
    sub_B16FFC(&System_Collections_Generic_List_EventCampaignEntity__TypeInfo, v11);
    sub_B16FFC(&Method_SingletonMonoBehaviour_DataManager__get_Instance__, v12);
    byte_40F6AC0 = 1;
  }
  Instance = SingletonMonoBehaviour_WebViewManager___get_Instance((const MethodInfo_2A54F38 *)Method_SingletonMonoBehaviour_DataManager__get_Instance__);
  if ( !Instance )
    goto LABEL_26;
  MasterData_WarQuestSelectionMaster = (EventCampaignMaster_o *)DataManager__GetMasterData_WarQuestSelectionMaster_(
                                                                  (DataManager_o *)Instance,
                                                                  (const MethodInfo_18C3284 *)Method_DataManager_GetMasterData_EventCampaignMaster___);
  if ( !MasterData_WarQuestSelectionMaster )
    goto LABEL_26;
  TargetEntitiyAllList = EventCampaignMaster__GetTargetEntitiyAllList(MasterData_WarQuestSelectionMaster, 28, 0LL);
  v20 = (System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData__o *)sub_B170CC(
                                                                                                  System_Collections_Generic_List_EventCampaignEntity__TypeInfo,
                                                                                                  v16,
                                                                                                  v17,
                                                                                                  v18,
                                                                                                  v19);
  System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData____ctor(
    v20,
    (const MethodInfo_2F25014 *)Method_System_Collections_Generic_List_EventCampaignEntity___ctor__);
  v21 = SingletonMonoBehaviour_WebViewManager___get_Instance((const MethodInfo_2A54F38 *)Method_SingletonMonoBehaviour_DataManager__get_Instance__);
  if ( !v21 )
    goto LABEL_26;
  IsOpen = DataManager__GetMasterData_WarQuestSelectionMaster_(
             (DataManager_o *)v21,
             (const MethodInfo_18C3284 *)Method_DataManager_GetMasterData_EventMaster___);
  if ( !TargetEntitiyAllList )
    goto LABEL_26;
  max_length = TargetEntitiyAllList->max_length;
  if ( max_length >= 1 )
  {
    v26 = (DataMasterBase_WarMaster__WarEntity__int__o *)IsOpen;
    v27 = 0;
    while ( 1 )
    {
      if ( v27 >= max_length )
      {
        sub_B17100(IsOpen, v23, v24);
        sub_B170A0();
      }
      v28 = (EventMissionProgressRequest_Argument_ProgressData_o *)TargetEntitiyAllList->m_Items[v27];
      if ( !v28 )
        break;
      if ( !v26 )
        break;
      Entity = (EventEntity_o *)DataMasterBase_WarMaster__WarEntity__int___GetEntity(
                                  v26,
                                  v28->fields.missionTargetId,
                                  (const MethodInfo_266F388 *)Method_DataMasterBase_EventMaster__EventEntity__int__GetEntity__);
      if ( !Entity )
        break;
      IsOpen = (WarQuestSelectionMaster_o *)EventEntity__IsOpen(Entity, 1, 0LL);
      if ( ((unsigned __int8)IsOpen & 1) != 0 )
      {
        if ( !v20 )
          break;
        System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData___Add(
          v20,
          v28,
          (const MethodInfo_2F25CD8 *)Method_System_Collections_Generic_List_EventCampaignEntity__Add__);
      }
      max_length = TargetEntitiyAllList->max_length;
      if ( (int)++v27 >= max_length )
        goto LABEL_17;
    }
LABEL_26:
    sub_B170D4();
  }
LABEL_17:
  v30 = EventCampaignMaster__CheckCampaignGrouping((System_Collections_Generic_List_EventCampaignEntity__o *)v20, 0LL);
  if ( !v30 )
    return 0;
  if ( v30->fields._size < 1 )
    return 0;
  v32 = v30->fields._items->m_Items[0];
  if ( !v32 || !BattleData__CanUseContinueItemQuest(this, v32, v31) )
    return 0;
  v33 = SingletonMonoBehaviour_WebViewManager___get_Instance((const MethodInfo_2A54F38 *)Method_SingletonMonoBehaviour_DataManager__get_Instance__);
  if ( !v33 )
    goto LABEL_26;
  v34 = (ItemMaster_o *)DataManager__GetMasterData_WarQuestSelectionMaster_(
                          (DataManager_o *)v33,
                          (const MethodInfo_18C3284 *)Method_DataManager_GetMasterData_ItemMaster___);
  if ( !v34 )
    goto LABEL_26;
  EntityListByType = ItemMaster__GetEntityListByType(v34, 27, 0LL);
  if ( !EntityListByType )
    goto LABEL_26;
  return EntityListByType->fields._size > 0;
}


bool __fastcall BattleData__EqualCurrentUniqueWaveTurn(
        BattleData_o *this,
        int64_t compWaveTurn,
        const MethodInfo *method)
{
  return ServantWaveTurnEventOwner__CalcWaveTurnVal(this->fields.wavecount, this->fields.turnCount, 0LL) == compWaveTurn;
}


void __fastcall BattleData__ExecFuncAllServant(
        BattleData_o *this,
        System_Action_BattleServantData__o *func,
        const MethodInfo *method)
{
  struct System_Collections_Generic_List_BattleServantData__o *player_datalist; // x0
  struct System_Collections_Generic_List_BattleServantData__o *enemy_datalist; // x0

  if ( (byte_40F6A5F & 1) == 0 )
  {
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleServantData__ForEach__, func);
    byte_40F6A5F = 1;
  }
  player_datalist = this->fields.player_datalist;
  if ( !player_datalist
    || (System_Collections_Generic_List_USFGOSetAudioGroupIndexConditional_WeightIndex___ForEach(
          (System_Collections_Generic_List_USFGOSetAudioGroupIndexConditional_WeightIndex__o *)player_datalist,
          (System_Action_T__o *)func,
          (const MethodInfo_2F269F0 *)Method_System_Collections_Generic_List_BattleServantData__ForEach__),
        (enemy_datalist = this->fields.enemy_datalist) == 0LL) )
  {
    sub_B170D4();
  }
  System_Collections_Generic_List_USFGOSetAudioGroupIndexConditional_WeightIndex___ForEach(
    (System_Collections_Generic_List_USFGOSetAudioGroupIndexConditional_WeightIndex__o *)enemy_datalist,
    (System_Action_T__o *)func,
    (const MethodInfo_2F269F0 *)Method_System_Collections_Generic_List_BattleServantData__ForEach__);
}


bool __fastcall BattleData__ExistDropItem(BattleData_o *this, const MethodInfo *method)
{
  __int64 v3; // x1
  __int64 v4; // x1
  struct System_Collections_Generic_List_BattleDropItem__o *droplist; // x8
  struct System_Collections_Generic_List_BattleServantData__o *enemy_datalist; // x19
  signed __int64 size; // x8
  unsigned __int64 v9; // x20
  BattleServantData_o *v10; // x8
  struct DropInfo_array *v11; // x8

  if ( (byte_40F6AC2 & 1) == 0 )
  {
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleDropItem__get_Count__, method);
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleServantData__get_Count__, v3);
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleServantData__get_Item__, v4);
    byte_40F6AC2 = 1;
  }
  droplist = this->fields.droplist;
  if ( !droplist )
    sub_B170D4();
  if ( droplist->fields._size > 0 )
    return 1;
  enemy_datalist = this->fields.enemy_datalist;
  if ( enemy_datalist )
  {
    LODWORD(size) = enemy_datalist->fields._size;
    if ( (int)size >= 1 )
    {
      v9 = 0LL;
      while ( 1 )
      {
        if ( v9 >= (unsigned int)size )
          System_ThrowHelper__ThrowArgumentOutOfRangeException_41329284(0LL);
        v10 = enemy_datalist->fields._items->m_Items[v9];
        if ( v10 )
        {
          v11 = v10->fields.droplist;
          if ( v11 )
          {
            if ( *(_QWORD *)&v11->max_length )
              break;
          }
        }
        size = enemy_datalist->fields._size;
        if ( (__int64)++v9 >= size )
          return 0;
      }
      return 1;
    }
  }
  return 0;
}


// local variable allocation has failed, the output may be wrong!
bool __fastcall BattleData__ExistsFieldEnemyIntervalBuff(
        BattleData_o *this,
        int32_t targetType,
        const MethodInfo *method)
{
  __int64 v3; // x3
  __int64 v4; // x4
  __int64 v7; // x1
  __int64 v8; // x1
  __int64 v9; // x1
  __int64 v10; // x1
  BattleData___c__DisplayClass723_0_o *v11; // x21
  const MethodInfo *v12; // x2
  BattleServantData_array *FieldEnemyServantList; // x19
  __int64 v14; // x1
  __int64 v15; // x2
  __int64 v16; // x3
  __int64 v17; // x4
  System_Func_WarBoardManager_WarBoardOnboardSkillTarget__bool__o *v18; // x20

  if ( (byte_40F6AD4 & 1) == 0 )
  {
    sub_B16FFC(&Method_BasicHelper_Any_BattleServantData____66805536, *(_QWORD *)&targetType);
    sub_B16FFC(&Method_System_Func_BattleServantData__bool___ctor__, v7);
    sub_B16FFC(&System_Func_BattleServantData__bool__TypeInfo, v8);
    sub_B16FFC(&Method_BattleData___c__DisplayClass723_0__ExistsFieldEnemyIntervalBuff_b__0__, v9);
    sub_B16FFC(&BattleData___c__DisplayClass723_0_TypeInfo, v10);
    byte_40F6AD4 = 1;
  }
  v11 = (BattleData___c__DisplayClass723_0_o *)sub_B170CC(
                                                 BattleData___c__DisplayClass723_0_TypeInfo,
                                                 *(_QWORD *)&targetType,
                                                 method,
                                                 v3,
                                                 v4);
  BattleData___c__DisplayClass723_0___ctor(v11, 0LL);
  if ( !v11 )
    sub_B170D4();
  v11->fields.targetType = targetType;
  FieldEnemyServantList = BattleData__getFieldEnemyServantList(this, 0, v12);
  v18 = (System_Func_WarBoardManager_WarBoardOnboardSkillTarget__bool__o *)sub_B170CC(
                                                                             System_Func_BattleServantData__bool__TypeInfo,
                                                                             v14,
                                                                             v15,
                                                                             v16,
                                                                             v17);
  System_Func_WarBoardManager_WarBoardOnboardSkillTarget__bool____ctor(
    v18,
    (Il2CppObject *)v11,
    Method_BattleData___c__DisplayClass723_0__ExistsFieldEnemyIntervalBuff_b__0__,
    (const MethodInfo_2B6AB40 *)Method_System_Func_BattleServantData__bool___ctor__);
  return BasicHelper__Any_USFGOPlayBgmEventConditional_CondBGM_(
           (WellFired_USFGOPlayBgmEventConditional_CondBGM_array *)FieldEnemyServantList,
           (System_Func_T__bool__o *)v18,
           (const MethodInfo_18B6074 *)Method_BasicHelper_Any_BattleServantData____66805536);
}


UnityEngine_Transform_o *__fastcall BattleData__FindTransformChild(
        BattleData_o *this,
        UnityEngine_Transform_o *tran,
        System_String_o *tranName,
        const MethodInfo *method)
{
  UnityEngine_Object_o *TransformChild; // x23
  int32_t v8; // w22
  UnityEngine_Transform_o *Child; // x0
  const MethodInfo *v10; // x3

  if ( (byte_40F6AA2 & 1) == 0 )
  {
    sub_B16FFC(&UnityEngine_Object_TypeInfo, tran);
    byte_40F6AA2 = 1;
  }
  if ( !tran )
    sub_B170D4();
  TransformChild = (UnityEngine_Object_o *)UnityEngine_Transform__Find(tran, tranName, 0LL);
  if ( (BYTE3(UnityEngine_Object_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0
    && !UnityEngine_Object_TypeInfo->_2.cctor_finished )
  {
    j_il2cpp_runtime_class_init_0(UnityEngine_Object_TypeInfo);
  }
  if ( !UnityEngine_Object__op_Inequality(TransformChild, 0LL, 0LL) )
  {
    if ( UnityEngine_Transform__get_childCount(tran, 0LL) < 1 )
    {
      return 0LL;
    }
    else
    {
      v8 = 0;
      while ( 1 )
      {
        Child = UnityEngine_Transform__GetChild(tran, v8, 0LL);
        TransformChild = (UnityEngine_Object_o *)BattleData__FindTransformChild(this, Child, tranName, v10);
        if ( (BYTE3(UnityEngine_Object_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0
          && !UnityEngine_Object_TypeInfo->_2.cctor_finished )
        {
          j_il2cpp_runtime_class_init_0(UnityEngine_Object_TypeInfo);
        }
        if ( UnityEngine_Object__op_Inequality(TransformChild, 0LL, 0LL) )
          break;
        if ( ++v8 >= UnityEngine_Transform__get_childCount(tran, 0LL) )
          return 0LL;
      }
    }
  }
  return (UnityEngine_Transform_o *)TransformChild;
}


// local variable allocation has failed, the output may be wrong!
void __fastcall BattleData__FreeEntryByIndex(
        BattleData_o *this,
        int32_t deckIndex,
        bool isEnemy,
        const MethodInfo *method)
{
  __int64 v7; // x8
  System_Int32_array *v8; // x20
  __int64 v9; // x0
  __int64 v10; // x1
  __int64 v11; // x2

  if ( (byte_40F6A1D & 1) == 0 )
  {
    sub_B16FFC(&Method_BasicHelper_IndexValue_int____66807072, *(_QWORD *)&deckIndex);
    byte_40F6A1D = 1;
  }
  v7 = 288LL;
  if ( isEnemy )
    v7 = 296LL;
  v8 = *(System_Int32_array **)((char *)&this->klass + v7);
  v9 = BasicHelper__IndexValue_int_(
         v8,
         deckIndex,
         -1,
         (const MethodInfo_18B81B4 *)Method_BasicHelper_IndexValue_int____66807072);
  if ( (_DWORD)v9 != -1 )
  {
    if ( !v8 )
      sub_B170D4();
    if ( v8->max_length <= deckIndex )
    {
      sub_B17100(v9, v10, v11);
      sub_B170A0();
    }
    v8->m_Items[deckIndex + 1] = -1;
  }
}


// local variable allocation has failed, the output may be wrong!
BattleServantData_o *__fastcall BattleData__GetAiNpcServantData(
        BattleData_o *this,
        int32_t id,
        const MethodInfo *method)
{
  __int64 v3; // x3
  __int64 v4; // x4
  __int64 v7; // x1
  __int64 v8; // x1
  __int64 v9; // x1
  __int64 v10; // x1
  BattleData___c__DisplayClass422_0_o *v11; // x21
  __int64 v12; // x1
  __int64 v13; // x2
  __int64 v14; // x3
  __int64 v15; // x4
  struct System_Collections_Generic_List_AiNpcBattleServantData__o *aiNpcDataList; // x19
  System_Predicate_peRenderTexture_ChangeLayerObject__o *v17; // x20

  if ( (byte_40F6A47 & 1) == 0 )
  {
    sub_B16FFC(&Method_System_Collections_Generic_List_AiNpcBattleServantData__Find__, *(_QWORD *)&id);
    sub_B16FFC(&Method_System_Predicate_AiNpcBattleServantData___ctor__, v7);
    sub_B16FFC(&System_Predicate_AiNpcBattleServantData__TypeInfo, v8);
    sub_B16FFC(&Method_BattleData___c__DisplayClass422_0__GetAiNpcServantData_b__0__, v9);
    sub_B16FFC(&BattleData___c__DisplayClass422_0_TypeInfo, v10);
    byte_40F6A47 = 1;
  }
  v11 = (BattleData___c__DisplayClass422_0_o *)sub_B170CC(
                                                 BattleData___c__DisplayClass422_0_TypeInfo,
                                                 *(_QWORD *)&id,
                                                 method,
                                                 v3,
                                                 v4);
  BattleData___c__DisplayClass422_0___ctor(v11, 0LL);
  if ( !v11
    || (v11->fields.id = id,
        aiNpcDataList = this->fields.aiNpcDataList,
        v17 = (System_Predicate_peRenderTexture_ChangeLayerObject__o *)sub_B170CC(
                                                                         System_Predicate_AiNpcBattleServantData__TypeInfo,
                                                                         v12,
                                                                         v13,
                                                                         v14,
                                                                         v15),
        System_Predicate_peRenderTexture_ChangeLayerObject____ctor(
          v17,
          (Il2CppObject *)v11,
          Method_BattleData___c__DisplayClass422_0__GetAiNpcServantData_b__0__,
          (const MethodInfo_2B0B204 *)Method_System_Predicate_AiNpcBattleServantData___ctor__),
        !aiNpcDataList) )
  {
    sub_B170D4();
  }
  return (BattleServantData_o *)System_Collections_Generic_List_peRenderTexture_ChangeLayerObject___Find(
                                  (System_Collections_Generic_List_peRenderTexture_ChangeLayerObject__o *)aiNpcDataList,
                                  (System_Predicate_T__o *)v17,
                                  (const MethodInfo_2F26598 *)Method_System_Collections_Generic_List_AiNpcBattleServantData__Find__);
}


// local variable allocation has failed, the output may be wrong!
System_Int32_array *__fastcall BattleData__GetAliveFieldServantIDArray(
        BattleData_o *this,
        bool isTargetOnly,
        int32_t exceptSvtId,
        const MethodInfo *method)
{
  __int64 v4; // x4
  __int64 v8; // x1
  __int64 v9; // x1
  __int64 v10; // x1
  __int64 v11; // x1
  System_Collections_Generic_List_int__o *v12; // x21
  const MethodInfo *v13; // x2
  System_Collections_Generic_IEnumerable_T__o *AliveFieldEnemyServantIDList; // x0
  const MethodInfo *v15; // x2
  System_Collections_Generic_IEnumerable_T__o *AliveFieldPlayerServantIDList; // x0

  if ( (byte_40F6A50 & 1) == 0 )
  {
    sub_B16FFC(&Method_System_Collections_Generic_List_int__AddRange__, isTargetOnly);
    sub_B16FFC(&Method_System_Collections_Generic_List_int__Remove__, v8);
    sub_B16FFC(&Method_System_Collections_Generic_List_int__ToArray__, v9);
    sub_B16FFC(&Method_System_Collections_Generic_List_int___ctor__, v10);
    sub_B16FFC(&System_Collections_Generic_List_int__TypeInfo, v11);
    byte_40F6A50 = 1;
  }
  v12 = (System_Collections_Generic_List_int__o *)sub_B170CC(
                                                    System_Collections_Generic_List_int__TypeInfo,
                                                    isTargetOnly,
                                                    *(_QWORD *)&exceptSvtId,
                                                    method,
                                                    v4);
  System_Collections_Generic_List_int____ctor(
    v12,
    (const MethodInfo_2F0F794 *)Method_System_Collections_Generic_List_int___ctor__);
  AliveFieldEnemyServantIDList = (System_Collections_Generic_IEnumerable_T__o *)BattleData__getAliveFieldEnemyServantIDList(
                                                                                  this,
                                                                                  isTargetOnly,
                                                                                  v13);
  if ( !v12 )
    sub_B170D4();
  System_Collections_Generic_List_int___AddRange(
    v12,
    AliveFieldEnemyServantIDList,
    (const MethodInfo_2F10744 *)Method_System_Collections_Generic_List_int__AddRange__);
  AliveFieldPlayerServantIDList = (System_Collections_Generic_IEnumerable_T__o *)BattleData__getAliveFieldPlayerServantIDList(
                                                                                   this,
                                                                                   0LL,
                                                                                   v15);
  System_Collections_Generic_List_int___AddRange(
    v12,
    AliveFieldPlayerServantIDList,
    (const MethodInfo_2F10744 *)Method_System_Collections_Generic_List_int__AddRange__);
  if ( exceptSvtId != -1 )
    System_Collections_Generic_List_int___Remove(
      v12,
      exceptSvtId,
      (const MethodInfo_2F11E6C *)Method_System_Collections_Generic_List_int__Remove__);
  return System_Collections_Generic_List_int___ToArray(
           v12,
           (const MethodInfo_2F125FC *)Method_System_Collections_Generic_List_int__ToArray__);
}


System_Int32_array *__fastcall BattleData__GetAssistIdArray(BattleData_o *this, const MethodInfo *method)
{
  QuestPhaseEntity_o *questphase_ent; // x0

  questphase_ent = this->fields.questphase_ent;
  if ( !questphase_ent )
    sub_B170D4();
  return QuestPhaseEntity__GetAssistIdArray(questphase_ent, 0LL);
}


System_Int32_array *__fastcall BattleData__GetAssistWeightArray(BattleData_o *this, const MethodInfo *method)
{
  QuestPhaseEntity_o *questphase_ent; // x0

  questphase_ent = this->fields.questphase_ent;
  if ( !questphase_ent )
    sub_B170D4();
  return QuestPhaseEntity__GetAssistWeightArray(questphase_ent, 0LL);
}


float __fastcall BattleData__GetBattleFinishWaitTime(BattleData_o *this, const MethodInfo *method)
{
  QuestPhaseEntity_o *questphase_ent; // x0

  questphase_ent = this->fields.questphase_ent;
  if ( !questphase_ent )
    sub_B170D4();
  return (float)QuestPhaseEntity__GetBattleFinishWaitTime(questphase_ent, 0LL) / 1000.0;
}


BattleMasterImageEntity_o *__fastcall BattleData__GetBattleMasterImageEntity(
        BattleData_o *this,
        const MethodInfo *method)
{
  __int64 v3; // x1
  WebViewManager_o *Instance; // x0
  BattleMasterImageEntity_o *result; // x0
  const MethodInfo *v6; // x1
  BattleMasterImageEntity_o *v7; // x20
  StageEntity_o *StageEntity; // x0
  int32_t BattleMasterImageId; // w0

  if ( (byte_40F6AAA & 1) == 0 )
  {
    sub_B16FFC(&Method_DataManager_GetMasterData_BattleMasterImageMaster___, method);
    sub_B16FFC(&Method_SingletonMonoBehaviour_DataManager__get_Instance__, v3);
    byte_40F6AAA = 1;
  }
  Instance = SingletonMonoBehaviour_WebViewManager___get_Instance((const MethodInfo_2A54F38 *)Method_SingletonMonoBehaviour_DataManager__get_Instance__);
  if ( !Instance )
    goto LABEL_8;
  result = (BattleMasterImageEntity_o *)DataManager__GetMasterData_WarQuestSelectionMaster_(
                                          (DataManager_o *)Instance,
                                          (const MethodInfo_18C3284 *)Method_DataManager_GetMasterData_BattleMasterImageMaster___);
  if ( result )
  {
    v7 = result;
    StageEntity = BattleData__getStageEntity(this, v6);
    if ( StageEntity )
    {
      BattleMasterImageId = StageEntity__getBattleMasterImageId(StageEntity, 0LL);
      return BattleMasterImageMaster__GetEntity(
               (BattleMasterImageMaster_o *)v7,
               BattleMasterImageId,
               this->fields.battleGenderType,
               0LL);
    }
LABEL_8:
    sub_B170D4();
  }
  return result;
}


System_Collections_Generic_List_BattleServantData__o *__fastcall BattleData__GetBattleServantDataList(
        BattleData_o *this,
        bool isEnemy,
        const MethodInfo *method)
{
  __int64 v3; // x8

  v3 = 128LL;
  if ( isEnemy )
    v3 = 168LL;
  return *(System_Collections_Generic_List_BattleServantData__o **)((char *)&this->klass + v3);
}


System_String_o *__fastcall BattleData__GetBattleUseItemParameter(const MethodInfo *method)
{
  __int64 v1; // x1
  __int64 v2; // x1

  if ( (byte_40F6A7A & 1) == 0 )
  {
    sub_B16FFC(&EncryptedPlayerPrefs_TypeInfo, v1);
    sub_B16FFC(&StringLiteral_2526/*"BATTLE_USE_ITEM_SAVEKEY"*/, v2);
    byte_40F6A7A = 1;
  }
  if ( (BYTE3(EncryptedPlayerPrefs_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0
    && !EncryptedPlayerPrefs_TypeInfo->_2.cctor_finished )
  {
    j_il2cpp_runtime_class_init_0(EncryptedPlayerPrefs_TypeInfo);
  }
  return EncryptedPlayerPrefs__GetString((System_String_o *)StringLiteral_2526/*"BATTLE_USE_ITEM_SAVEKEY"*/, 0LL);
}


int32_t __fastcall BattleData__GetBeforeBattleSkillActor(BattleData_o *this, int32_t defVal, const MethodInfo *method)
{
  QuestPhaseEntity_o *questphase_ent; // x0

  questphase_ent = this->fields.questphase_ent;
  if ( !questphase_ent )
    sub_B170D4();
  return QuestPhaseEntity__GetBeforeBattleSkillActor(questphase_ent, defVal, 0LL);
}


// local variable allocation has failed, the output may be wrong!
System_Single_array *__fastcall BattleData__GetCameraClipRangeFromBgMaster(
        BattleData_o *this,
        int32_t bgId,
        int32_t bgType,
        const MethodInfo *method)
{
  __int64 v6; // x1
  BattleBgMaster_o *Master_WarQuestSelectionMaster; // x0
  bool v8; // w8
  System_Single_array *result; // x0
  BattleBgEntity_o *entity; // [xsp+8h] [xbp-18h] BYREF

  if ( (byte_40F6AC9 & 1) == 0 )
  {
    sub_B16FFC(&Method_DataManager_GetMaster_BattleBgMaster___, *(_QWORD *)&bgId);
    sub_B16FFC(&DataManager_TypeInfo, v6);
    byte_40F6AC9 = 1;
  }
  entity = 0LL;
  if ( (BYTE3(DataManager_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0 && !DataManager_TypeInfo->_2.cctor_finished )
    j_il2cpp_runtime_class_init_0(DataManager_TypeInfo);
  Master_WarQuestSelectionMaster = (BattleBgMaster_o *)DataManager__GetMaster_WarQuestSelectionMaster_((const MethodInfo_18C3224 *)Method_DataManager_GetMaster_BattleBgMaster___);
  if ( !Master_WarQuestSelectionMaster )
    goto LABEL_11;
  v8 = BattleBgMaster__TryGetEntity(Master_WarQuestSelectionMaster, &entity, bgId, bgType, 0LL);
  result = 0LL;
  if ( !v8 )
    return result;
  if ( !entity )
LABEL_11:
    sub_B170D4();
  return BattleBgEntity__GetCameraClippingRange(entity, 0LL);
}


// local variable allocation has failed, the output may be wrong!
System_Collections_Generic_List_EventCommandAssistEntity__o *__fastcall BattleData__GetCommandAssistList(
        BattleData_o *this,
        System_Collections_Generic_List_EventCommandAssistEntity__o *commandAssistInfoList,
        int32_t cardType,
        const MethodInfo *method)
{
  __int64 v4; // x4
  __int64 v7; // x1
  __int64 v8; // x1
  __int64 v9; // x1
  __int64 v10; // x1
  __int64 v11; // x1
  __int64 v12; // x1
  __int64 v13; // x1
  __int64 v14; // x1
  BattleData___c__DisplayClass543_0_o *v15; // x21
  __int64 v16; // x1
  __int64 v17; // x2
  __int64 v18; // x3
  __int64 v19; // x4
  System_Predicate_peRenderTexture_ChangeLayerObject__o *v20; // x20
  System_Collections_Generic_List_T__o *All; // x0
  System_Object_array *v22; // x0
  System_Collections_Generic_IEnumerable_T__o *Shuffle_object; // x19
  __int64 v24; // x1
  __int64 v25; // x2
  __int64 v26; // x3
  __int64 v27; // x4
  System_Collections_Generic_List_WarBoardAIRoute_RouteData__o *v28; // x20

  if ( (byte_40F6A94 & 1) == 0 )
  {
    sub_B16FFC(&Method_BattleRandom_getShuffle_EventCommandAssistEntity___, commandAssistInfoList);
    sub_B16FFC(&Method_System_Collections_Generic_List_EventCommandAssistEntity__FindAll__, v7);
    sub_B16FFC(&Method_System_Collections_Generic_List_EventCommandAssistEntity__ToArray__, v8);
    sub_B16FFC(&Method_System_Collections_Generic_List_EventCommandAssistEntity___ctor___66730880, v9);
    sub_B16FFC(&System_Collections_Generic_List_EventCommandAssistEntity__TypeInfo, v10);
    sub_B16FFC(&Method_System_Predicate_EventCommandAssistEntity___ctor__, v11);
    sub_B16FFC(&System_Predicate_EventCommandAssistEntity__TypeInfo, v12);
    sub_B16FFC(&Method_BattleData___c__DisplayClass543_0__GetCommandAssistList_b__0__, v13);
    sub_B16FFC(&BattleData___c__DisplayClass543_0_TypeInfo, v14);
    byte_40F6A94 = 1;
  }
  v15 = (BattleData___c__DisplayClass543_0_o *)sub_B170CC(
                                                 BattleData___c__DisplayClass543_0_TypeInfo,
                                                 commandAssistInfoList,
                                                 *(_QWORD *)&cardType,
                                                 method,
                                                 v4);
  BattleData___c__DisplayClass543_0___ctor(v15, 0LL);
  if ( !v15
    || (v15->fields.cardType = cardType,
        v20 = (System_Predicate_peRenderTexture_ChangeLayerObject__o *)sub_B170CC(
                                                                         System_Predicate_EventCommandAssistEntity__TypeInfo,
                                                                         v16,
                                                                         v17,
                                                                         v18,
                                                                         v19),
        System_Predicate_peRenderTexture_ChangeLayerObject____ctor(
          v20,
          (Il2CppObject *)v15,
          Method_BattleData___c__DisplayClass543_0__GetCommandAssistList_b__0__,
          (const MethodInfo_2B0B204 *)Method_System_Predicate_EventCommandAssistEntity___ctor__),
        !commandAssistInfoList)
    || (All = System_Collections_Generic_List_MaterialBranchRouteManager_MaterialBranchInfo___FindAll(
                (System_Collections_Generic_List_MaterialBranchRouteManager_MaterialBranchInfo__o *)commandAssistInfoList,
                (System_Predicate_T__o *)v20,
                (const MethodInfo_2F26660 *)Method_System_Collections_Generic_List_EventCommandAssistEntity__FindAll__)) == 0LL )
  {
    sub_B170D4();
  }
  v22 = (System_Object_array *)System_Collections_Generic_List_WarBoardUiData_SaveData___ToArray(
                                 (System_Collections_Generic_List_WarBoardUiData_SaveData__o *)All,
                                 (const MethodInfo_2F27E24 *)Method_System_Collections_Generic_List_EventCommandAssistEntity__ToArray__);
  Shuffle_object = (System_Collections_Generic_IEnumerable_T__o *)BattleRandom__getShuffle_object_(
                                                                    v22,
                                                                    (const MethodInfo_18BA1C8 *)Method_BattleRandom_getShuffle_EventCommandAssistEntity___);
  v28 = (System_Collections_Generic_List_WarBoardAIRoute_RouteData__o *)sub_B170CC(
                                                                          System_Collections_Generic_List_EventCommandAssistEntity__TypeInfo,
                                                                          v24,
                                                                          v25,
                                                                          v26,
                                                                          v27);
  System_Collections_Generic_List_WarBoardAIRoute_RouteData____ctor(
    v28,
    Shuffle_object,
    (const MethodInfo_2F2520C *)Method_System_Collections_Generic_List_EventCommandAssistEntity___ctor___66730880);
  return (System_Collections_Generic_List_EventCommandAssistEntity__o *)v28;
}


// local variable allocation has failed, the output may be wrong!
UnityEngine_Vector3_o __fastcall BattleData__GetCommandSpellCutinOffset(BattleData_o *this, const MethodInfo *method)
{
  BattleMasterImageEntity_o *BattleMasterImageEntity; // x0
  float commandSpellCutinOffsetX; // s0
  float commandSpellCutinOffsetY; // s1
  float v5; // s2
  UnityEngine_Vector3_o result; // 0:s0.4,4:s1.4,8:s2.4

  BattleMasterImageEntity = BattleData__GetBattleMasterImageEntity(this, method);
  if ( !BattleMasterImageEntity )
    goto LABEL_5;
  if ( !*(_QWORD *)&BattleMasterImageEntity->fields.commandSpellCutinOffsetX )
  {
    BattleMasterImageEntity = 0LL;
LABEL_5:
    *(UnityEngine_Vector3_o *)&commandSpellCutinOffsetX = UnityEngine_Vector3__get_zero((const MethodInfo *)BattleMasterImageEntity);
    goto LABEL_6;
  }
  commandSpellCutinOffsetX = (float)BattleMasterImageEntity->fields.commandSpellCutinOffsetX;
  commandSpellCutinOffsetY = (float)BattleMasterImageEntity->fields.commandSpellCutinOffsetY;
  v5 = 0.0;
LABEL_6:
  result.fields.z = v5;
  result.fields.y = commandSpellCutinOffsetY;
  result.fields.x = commandSpellCutinOffsetX;
  return result;
}


int32_t __fastcall BattleData__GetContinueCount(BattleData_o *this, const MethodInfo *method)
{
  return this->fields.continueCount;
}


int64_t __fastcall BattleData__GetContinueDeadLine(BattleData_o *this, const MethodInfo *method)
{
  int64_t result; // x0

  result = this->fields.continueItemDeadLine;
  if ( !result )
  {
    BattleData__UpdateContinueItemInfo(this, method);
    return this->fields.continueItemDeadLine;
  }
  return result;
}


int32_t __fastcall BattleData__GetContinueItemId(const MethodInfo *method)
{
  __int64 v1; // x1
  __int64 v2; // x1

  if ( (byte_40F6A78 & 1) == 0 )
  {
    sub_B16FFC(&EncryptedPlayerPrefs_TypeInfo, v1);
    sub_B16FFC(&StringLiteral_3375/*"CONTINUE_ITEM_SAVEKEY"*/, v2);
    byte_40F6A78 = 1;
  }
  if ( (BYTE3(EncryptedPlayerPrefs_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0
    && !EncryptedPlayerPrefs_TypeInfo->_2.cctor_finished )
  {
    j_il2cpp_runtime_class_init_0(EncryptedPlayerPrefs_TypeInfo);
  }
  return EncryptedPlayerPrefs__GetInt_33186652((System_String_o *)StringLiteral_3375/*"CONTINUE_ITEM_SAVEKEY"*/, 0, 0LL);
}


int32_t __fastcall BattleData__GetContinueItemImageId(BattleData_o *this, const MethodInfo *method)
{
  int32_t result; // w0

  result = this->fields.continueItemImageId;
  if ( !result )
  {
    BattleData__UpdateContinueItemInfo(this, method);
    return this->fields.continueItemImageId;
  }
  return result;
}


int32_t __fastcall BattleData__GetContinueItemNum(BattleData_o *this, const MethodInfo *method)
{
  int32_t result; // w0

  result = this->fields.continueItemNum;
  if ( !result )
  {
    BattleData__UpdateContinueItemInfo(this, method);
    return this->fields.continueItemNum;
  }
  return result;
}


int32_t __fastcall BattleData__GetContinueUseItemId(BattleData_o *this, const MethodInfo *method)
{
  int32_t result; // w0

  result = this->fields.continueUseItemId;
  if ( !result )
  {
    BattleData__UpdateContinueItemInfo(this, method);
    return this->fields.continueUseItemId;
  }
  return result;
}


int32_t __fastcall BattleData__GetCurrentEnemyMasterFaceId(BattleData_o *this, const MethodInfo *method)
{
  int32_t result; // w0
  struct EnemyMstBattleEntity_o *enemyMasterInfo; // x8

  result = this->fields.enemyMasterChangedFaceId;
  if ( result <= 0 )
  {
    enemyMasterInfo = this->fields.enemyMasterInfo;
    if ( !enemyMasterInfo )
      sub_B170D4();
    return enemyMasterInfo->fields.faceId;
  }
  return result;
}


int64_t __fastcall BattleData__GetCurrentUniqueWaveTurn(BattleData_o *this, const MethodInfo *method)
{
  return ServantWaveTurnEventOwner__CalcWaveTurnVal(this->fields.wavecount, this->fields.turnCount, 0LL);
}


// local variable allocation has failed, the output may be wrong!
System_Int32_array *__fastcall BattleData__GetCutInSvtIds(BattleData_o *this, bool isEnemy, const MethodInfo *method)
{
  StageEntity_o *StageEntity; // x0

  StageEntity = BattleData__getStageEntity(this, (const MethodInfo *)isEnemy);
  if ( !StageEntity )
    sub_B170D4();
  return StageEntity__GetCutInSvtIds(StageEntity, isEnemy, 0LL);
}


int32_t __fastcall BattleData__GetEffectBgmId(BattleData_o *this, const MethodInfo *method)
{
  StageEntity_o *StageEntity; // x0

  StageEntity = BattleData__getStageEntity(this, method);
  if ( !StageEntity )
    sub_B170D4();
  return StageEntity__GetEffectBgmId(StageEntity, 0LL);
}


int32_t __fastcall BattleData__GetEffectSvtId(BattleData_o *this, const MethodInfo *method)
{
  StageEntity_o *StageEntity; // x0

  StageEntity = BattleData__getStageEntity(this, method);
  if ( !StageEntity )
    sub_B170D4();
  return StageEntity__GetEffectSvtId(StageEntity, 0LL);
}


// local variable allocation has failed, the output may be wrong!
int32_t __fastcall BattleData__GetEnemySummonId(BattleData_o *this, int32_t index, const MethodInfo *method)
{
  StageEntity_o *StageEntity; // x0
  System_Int32_array *v6; // x0

  if ( (byte_40F6AAE & 1) == 0 )
  {
    sub_B16FFC(&Method_BasicHelper_IndexValue_int____66807072, *(_QWORD *)&index);
    byte_40F6AAE = 1;
  }
  StageEntity = BattleData__getStageEntity(this, *(const MethodInfo **)&index);
  if ( !StageEntity )
    sub_B170D4();
  v6 = StageEntity__GetFieldCallServantId(StageEntity, 0LL);
  return BasicHelper__IndexValue_int_(
           v6,
           index,
           -1,
           (const MethodInfo_18B81B4 *)Method_BasicHelper_IndexValue_int____66807072);
}


EquipAddEntity_o *__fastcall BattleData__GetEquipAddEntity(BattleData_o *this, const MethodInfo *method)
{
  __int64 v3; // x1
  QuestPhaseEntity_o *questphase_ent; // x0
  WarQuestSelectionMaster_o *Master_WarQuestSelectionMaster; // x0
  EquipAddMaster_o *v6; // x20
  int32_t EquipAddId; // w21
  const MethodInfo *v8; // x1
  int32_t MasterEquipId; // w0

  if ( (byte_40F6AC6 & 1) == 0 )
  {
    sub_B16FFC(&Method_DataManager_GetMaster_EquipAddMaster___, method);
    sub_B16FFC(&DataManager_TypeInfo, v3);
    byte_40F6AC6 = 1;
  }
  questphase_ent = this->fields.questphase_ent;
  if ( !questphase_ent || QuestPhaseEntity__GetEquipAddId(questphase_ent, 0LL) < 1 )
    return 0LL;
  if ( (BYTE3(DataManager_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0 && !DataManager_TypeInfo->_2.cctor_finished )
    j_il2cpp_runtime_class_init_0(DataManager_TypeInfo);
  Master_WarQuestSelectionMaster = DataManager__GetMaster_WarQuestSelectionMaster_((const MethodInfo_18C3224 *)Method_DataManager_GetMaster_EquipAddMaster___);
  if ( !this->fields.questphase_ent
    || (v6 = (EquipAddMaster_o *)Master_WarQuestSelectionMaster,
        EquipAddId = QuestPhaseEntity__GetEquipAddId(this->fields.questphase_ent, 0LL),
        MasterEquipId = BattleData__getMasterEquipId(this, v8),
        !v6) )
  {
    sub_B170D4();
  }
  return EquipAddMaster__GetEntity(v6, EquipAddId, MasterEquipId, 0LL);
}


void __fastcall BattleData__GetEquipAddImageId(BattleData_o *this, int32_t *overwriteImageId, const MethodInfo *method)
{
  EquipAddEntity_o *EquipAddEntity; // x0
  EquipAddEntity_o *v6; // x21

  if ( !*overwriteImageId )
  {
    EquipAddEntity = BattleData__GetEquipAddEntity(this, (const MethodInfo *)overwriteImageId);
    if ( EquipAddEntity )
    {
      v6 = EquipAddEntity;
      if ( EquipAddEntity__IsOpen(EquipAddEntity, 0LL) )
        LODWORD(EquipAddEntity) = EquipAddEntity__GetImageId(v6, this->fields.battleGenderType, 0LL);
      else
        LODWORD(EquipAddEntity) = 0;
    }
    *overwriteImageId = (int)EquipAddEntity;
  }
}


int32_t __fastcall BattleData__GetEventId(const MethodInfo *method)
{
  __int64 v1; // x1
  __int64 v2; // x1
  BattleData_c *inited; // x0
  UnityEngine_Object_o *Instance; // x19
  BattleData_c *v6; // x0
  BattleData_o *v7; // x0
  struct BattleEntity_o *battle_ent; // x8

  if ( (byte_40F69FA & 1) == 0 )
  {
    sub_B16FFC(&BattleData_TypeInfo, v1);
    sub_B16FFC(&UnityEngine_Object_TypeInfo, v2);
    byte_40F69FA = 1;
  }
  inited = BattleData_TypeInfo;
  if ( (BYTE3(BattleData_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0 && !BattleData_TypeInfo->_2.cctor_finished )
    inited = (BattleData_c *)j_il2cpp_runtime_class_init_0(BattleData_TypeInfo);
  Instance = (UnityEngine_Object_o *)BattleData__get_Instance((const MethodInfo *)inited);
  if ( (BYTE3(UnityEngine_Object_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0
    && !UnityEngine_Object_TypeInfo->_2.cctor_finished )
  {
    j_il2cpp_runtime_class_init_0(UnityEngine_Object_TypeInfo);
  }
  if ( UnityEngine_Object__op_Equality(Instance, 0LL, 0LL) )
    return 0;
  v6 = BattleData_TypeInfo;
  if ( (BYTE3(BattleData_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0 && !BattleData_TypeInfo->_2.cctor_finished )
    v6 = (BattleData_c *)j_il2cpp_runtime_class_init_0(BattleData_TypeInfo);
  v7 = BattleData__get_Instance((const MethodInfo *)v6);
  if ( !v7 || (battle_ent = v7->fields.battle_ent) == 0LL )
    sub_B170D4();
  return battle_ent->fields.eventId;
}


// local variable allocation has failed, the output may be wrong!
BattleServantData_array *__fastcall BattleData__GetFieldAliveLogicServantArray(
        BattleData_o *this,
        int32_t targetFlag,
        bool isTargetOnly,
        const MethodInfo *method)
{
  __int64 v4; // x4
  __int64 v8; // x1
  __int64 v9; // x1
  __int64 v10; // x1
  __int64 v11; // x1
  __int64 v12; // x1
  __int64 v13; // x1
  __int64 v14; // x1
  __int64 v15; // x1
  __int64 v16; // x1
  System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData__o *v17; // x19
  System_Enum_o *v18; // x23
  System_Enum_o *v19; // x0
  const MethodInfo *v20; // x2
  System_Collections_Generic_IEnumerable_T__o *FieldEnemyServantList; // x0
  System_Enum_o *v22; // x21
  System_Enum_o *v23; // x0
  const MethodInfo *v24; // x1
  __int64 v25; // x2
  __int64 v26; // x3
  __int64 v27; // x4
  System_Collections_Generic_IEnumerable_T__o *FieldPlayerServantList; // x0
  BattleData___c_c *v29; // x0
  struct BattleData___c_StaticFields *static_fields; // x8
  System_Func_WarBoardManager_WarBoardOnboardSkillTarget__bool__o *_9__450_0; // x20
  Il2CppObject *v32; // x21
  struct BattleData___c_StaticFields *v33; // x0
  System_Collections_Generic_IEnumerable_TSource__o *v34; // x0
  int v36; // [xsp+8h] [xbp-38h] BYREF
  int32_t v37; // [xsp+Ch] [xbp-34h] BYREF

  if ( (byte_40F6A60 & 1) == 0 )
  {
    sub_B16FFC(&Method_System_Linq_Enumerable_ToArray_BattleServantData___, *(_QWORD *)&targetFlag);
    sub_B16FFC(&Method_System_Linq_Enumerable_Where_BattleServantData___, v8);
    sub_B16FFC(&Method_System_Func_BattleServantData__bool___ctor__, v9);
    sub_B16FFC(&System_Func_BattleServantData__bool__TypeInfo, v10);
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleServantData__AddRange__, v11);
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleServantData___ctor__, v12);
    sub_B16FFC(&System_Collections_Generic_List_BattleServantData__TypeInfo, v13);
    sub_B16FFC(&Target_PlayerTypeFlag_TypeInfo, v14);
    sub_B16FFC(&Method_BattleData___c__GetFieldAliveLogicServantArray_b__450_0__, v15);
    sub_B16FFC(&BattleData___c_TypeInfo, v16);
    byte_40F6A60 = 1;
  }
  v17 = (System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData__o *)sub_B170CC(
                                                                                                  System_Collections_Generic_List_BattleServantData__TypeInfo,
                                                                                                  *(_QWORD *)&targetFlag,
                                                                                                  isTargetOnly,
                                                                                                  method,
                                                                                                  v4);
  System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData____ctor(
    v17,
    (const MethodInfo_2F25014 *)Method_System_Collections_Generic_List_BattleServantData___ctor__);
  v37 = targetFlag;
  v18 = (System_Enum_o *)j_il2cpp_value_box_0(Target_PlayerTypeFlag_TypeInfo, &v37);
  v36 = 2;
  v19 = (System_Enum_o *)j_il2cpp_value_box_0(Target_PlayerTypeFlag_TypeInfo, &v36);
  if ( !v18 )
    goto LABEL_20;
  if ( System_Enum__HasFlag(v18, v19, 0LL) )
  {
    FieldEnemyServantList = (System_Collections_Generic_IEnumerable_T__o *)BattleData__getFieldEnemyServantList(
                                                                             this,
                                                                             isTargetOnly,
                                                                             v20);
    if ( !v17 )
      goto LABEL_20;
    System_Collections_Generic_List_TimeZoneInfo_AdjustmentRule___AddRange(
      (System_Collections_Generic_List_TimeZoneInfo_AdjustmentRule__o *)v17,
      FieldEnemyServantList,
      (const MethodInfo_2F25F28 *)Method_System_Collections_Generic_List_BattleServantData__AddRange__);
  }
  v37 = targetFlag;
  v22 = (System_Enum_o *)j_il2cpp_value_box_0(Target_PlayerTypeFlag_TypeInfo, &v37);
  v36 = 1;
  v23 = (System_Enum_o *)j_il2cpp_value_box_0(Target_PlayerTypeFlag_TypeInfo, &v36);
  if ( !v22 )
LABEL_20:
    sub_B170D4();
  if ( System_Enum__HasFlag(v22, v23, 0LL) )
  {
    FieldPlayerServantList = (System_Collections_Generic_IEnumerable_T__o *)BattleData__getFieldPlayerServantList(
                                                                              this,
                                                                              v24);
    if ( v17 )
    {
      System_Collections_Generic_List_TimeZoneInfo_AdjustmentRule___AddRange(
        (System_Collections_Generic_List_TimeZoneInfo_AdjustmentRule__o *)v17,
        FieldPlayerServantList,
        (const MethodInfo_2F25F28 *)Method_System_Collections_Generic_List_BattleServantData__AddRange__);
      goto LABEL_11;
    }
    goto LABEL_20;
  }
LABEL_11:
  v29 = BattleData___c_TypeInfo;
  if ( (BYTE3(BattleData___c_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0
    && !BattleData___c_TypeInfo->_2.cctor_finished )
  {
    j_il2cpp_runtime_class_init_0(BattleData___c_TypeInfo);
    v29 = BattleData___c_TypeInfo;
  }
  static_fields = v29->static_fields;
  _9__450_0 = (System_Func_WarBoardManager_WarBoardOnboardSkillTarget__bool__o *)static_fields->__9__450_0;
  if ( !_9__450_0 )
  {
    if ( (BYTE3(v29->vtable._0_Equals.methodPtr) & 4) != 0 && !v29->_2.cctor_finished )
    {
      j_il2cpp_runtime_class_init_0(v29);
      static_fields = BattleData___c_TypeInfo->static_fields;
    }
    v32 = (Il2CppObject *)static_fields->__9;
    _9__450_0 = (System_Func_WarBoardManager_WarBoardOnboardSkillTarget__bool__o *)sub_B170CC(
                                                                                     System_Func_BattleServantData__bool__TypeInfo,
                                                                                     v24,
                                                                                     v25,
                                                                                     v26,
                                                                                     v27);
    System_Func_WarBoardManager_WarBoardOnboardSkillTarget__bool____ctor(
      _9__450_0,
      v32,
      Method_BattleData___c__GetFieldAliveLogicServantArray_b__450_0__,
      (const MethodInfo_2B6AB40 *)Method_System_Func_BattleServantData__bool___ctor__);
    v33 = BattleData___c_TypeInfo->static_fields;
    v33->__9__450_0 = (struct System_Func_BattleServantData__bool__o *)_9__450_0;
    sub_B16F98(&v33->__9__450_0, _9__450_0);
  }
  v34 = System_Linq_Enumerable__Where_WarBoardManager_WarBoardOnboardSkillTarget_(
          (System_Collections_Generic_IEnumerable_TSource__o *)v17,
          (System_Func_TSource__bool__o *)_9__450_0,
          (const MethodInfo_19C8FE8 *)Method_System_Linq_Enumerable_Where_BattleServantData___);
  return (BattleServantData_array *)System_Linq_Enumerable__ToArray_DrawLotsDisplayMessage_DisplayedInGroup_SaveData_(
                                      v34,
                                      (const MethodInfo_19C4BCC *)Method_System_Linq_Enumerable_ToArray_BattleServantData___);
}


System_Collections_Generic_List_int__o *__fastcall BattleData__GetFieldIndividuality4Servant(
        BattleData_o *this,
        const MethodInfo *method)
{
  __int64 v2; // x2
  __int64 v3; // x3
  __int64 v4; // x4
  __int64 v6; // x1
  __int64 v7; // x1
  System_Collections_Generic_List_int__o *v8; // x19
  const MethodInfo *v9; // x1
  void *FieldPlayerServantList; // x0
  __int64 v11; // x1
  const MethodInfo *v12; // x2
  int v13; // w8
  _DWORD *v14; // x21
  unsigned int v15; // w23
  char *v16; // x8
  BattleServantData_o *v17; // x22
  int v18; // w8
  void *v19; // x22
  unsigned int v20; // w25
  __int64 v21; // x8
  int v22; // w8
  _DWORD *v23; // x20
  unsigned int v24; // w22
  char *v25; // x8
  BattleServantData_o *v26; // x21
  int v27; // w8
  void *v28; // x21
  unsigned int v29; // w24
  __int64 v30; // x8

  if ( (byte_40F6A39 & 1) == 0 )
  {
    sub_B16FFC(&Method_System_Collections_Generic_List_int__Add__, method);
    sub_B16FFC(&Method_System_Collections_Generic_List_int___ctor__, v6);
    sub_B16FFC(&System_Collections_Generic_List_int__TypeInfo, v7);
    byte_40F6A39 = 1;
  }
  v8 = (System_Collections_Generic_List_int__o *)sub_B170CC(
                                                   System_Collections_Generic_List_int__TypeInfo,
                                                   method,
                                                   v2,
                                                   v3,
                                                   v4);
  System_Collections_Generic_List_int____ctor(
    v8,
    (const MethodInfo_2F0F794 *)Method_System_Collections_Generic_List_int___ctor__);
  FieldPlayerServantList = BattleData__getFieldPlayerServantList(this, v9);
  if ( !FieldPlayerServantList )
    goto LABEL_32;
  v13 = *((_DWORD *)FieldPlayerServantList + 6);
  v14 = FieldPlayerServantList;
  if ( v13 >= 1 )
  {
    v15 = 0;
    while ( 1 )
    {
      if ( v15 >= v13 )
        goto LABEL_33;
      v16 = (char *)&v14[2 * v15];
      v17 = (BattleServantData_o *)*((_QWORD *)v16 + 4);
      if ( !v17 )
        goto LABEL_32;
      FieldPlayerServantList = (void *)BattleServantData__isDead(*((BattleServantData_o **)v16 + 4), 0LL);
      if ( ((unsigned __int8)FieldPlayerServantList & 1) == 0 )
      {
        FieldPlayerServantList = BattleServantData__getFieldIndividualityBuff(v17, 0LL);
        if ( !FieldPlayerServantList )
          goto LABEL_32;
        v18 = *((_DWORD *)FieldPlayerServantList + 6);
        v19 = FieldPlayerServantList;
        if ( v18 >= 1 )
          break;
      }
LABEL_16:
      v13 = v14[6];
      if ( (int)++v15 >= v13 )
        goto LABEL_17;
    }
    v20 = 0;
    while ( v20 < v18 )
    {
      v21 = *((_QWORD *)v19 + (int)v20 + 4);
      if ( !v21 || !v8 )
        goto LABEL_32;
      System_Collections_Generic_List_int___Add(
        v8,
        *(_DWORD *)(v21 + 28),
        (const MethodInfo_2F104F0 *)Method_System_Collections_Generic_List_int__Add__);
      v18 = *((_DWORD *)v19 + 6);
      if ( (int)++v20 >= v18 )
        goto LABEL_16;
    }
LABEL_33:
    sub_B17100(FieldPlayerServantList, v11, v12);
    sub_B170A0();
  }
LABEL_17:
  FieldPlayerServantList = BattleData__getFieldEnemyServantList(this, 0, v12);
  if ( !FieldPlayerServantList )
LABEL_32:
    sub_B170D4();
  v22 = *((_DWORD *)FieldPlayerServantList + 6);
  v23 = FieldPlayerServantList;
  if ( v22 >= 1 )
  {
    v24 = 0;
    while ( 1 )
    {
      if ( v24 >= v22 )
        goto LABEL_33;
      v25 = (char *)&v23[2 * v24];
      v26 = (BattleServantData_o *)*((_QWORD *)v25 + 4);
      if ( !v26 )
        goto LABEL_32;
      FieldPlayerServantList = (void *)BattleServantData__isDead(*((BattleServantData_o **)v25 + 4), 0LL);
      if ( ((unsigned __int8)FieldPlayerServantList & 1) == 0 )
      {
        FieldPlayerServantList = BattleServantData__getFieldIndividualityBuff(v26, 0LL);
        if ( !FieldPlayerServantList )
          goto LABEL_32;
        v27 = *((_DWORD *)FieldPlayerServantList + 6);
        v28 = FieldPlayerServantList;
        if ( v27 >= 1 )
          break;
      }
LABEL_30:
      v22 = v23[6];
      if ( (int)++v24 >= v22 )
        return v8;
    }
    v29 = 0;
    while ( v29 < v27 )
    {
      v30 = *((_QWORD *)v28 + (int)v29 + 4);
      if ( !v30 || !v8 )
        goto LABEL_32;
      System_Collections_Generic_List_int___Add(
        v8,
        *(_DWORD *)(v30 + 28),
        (const MethodInfo_2F104F0 *)Method_System_Collections_Generic_List_int__Add__);
      v27 = *((_DWORD *)v28 + 6);
      if ( (int)++v29 >= v27 )
        goto LABEL_30;
    }
    goto LABEL_33;
  }
  return v8;
}


int32_t __fastcall BattleData__GetFinishEffectId(BattleData_o *this, const MethodInfo *method)
{
  QuestPhaseEntity_o *questphase_ent; // x0

  questphase_ent = this->fields.questphase_ent;
  if ( !questphase_ent )
    sub_B170D4();
  return QuestPhaseEntity__GetFinishEffectId(questphase_ent, 0LL);
}


// local variable allocation has failed, the output may be wrong!
int32_t __fastcall BattleData__GetFirstBonusCriticalRate(
        BattleData_o *this,
        int32_t cardEntityId,
        const MethodInfo *method)
{
  BalanceConfig_c *v4; // x0

  if ( (byte_40F6AC8 & 1) == 0 )
  {
    sub_B16FFC(&BalanceConfig_TypeInfo, *(_QWORD *)&cardEntityId);
    byte_40F6AC8 = 1;
  }
  if ( cardEntityId != 3 )
    return 0;
  v4 = BalanceConfig_TypeInfo;
  if ( (BYTE3(BalanceConfig_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0
    && !BalanceConfig_TypeInfo->_2.cctor_finished )
  {
    j_il2cpp_runtime_class_init_0(BalanceConfig_TypeInfo);
    v4 = BalanceConfig_TypeInfo;
  }
  return v4->static_fields->CriticalRateToAddByQuickFirstBonus;
}


BattleCommandData_array *__fastcall BattleData__GetFixedCommandDatas(BattleData_o *this, const MethodInfo *method)
{
  return this->fields.fixedCommands;
}


System_Int32_array *__fastcall BattleData__GetGimmickAnimTypeArray(BattleData_o *this, const MethodInfo *method)
{
  QuestPhaseEntity_o *questphase_ent; // x0

  questphase_ent = this->fields.questphase_ent;
  if ( !questphase_ent )
    sub_B170D4();
  return QuestPhaseEntity__GetGimmickAnimTypeArray(questphase_ent, 0LL);
}


int32_t __fastcall BattleData__GetGimmickId(BattleData_o *this, const MethodInfo *method)
{
  QuestPhaseEntity_o *questphase_ent; // x0

  questphase_ent = this->fields.questphase_ent;
  if ( !questphase_ent )
    sub_B170D4();
  return QuestPhaseEntity__GetGimmickId(questphase_ent, 0LL);
}


System_Object_array *__fastcall BattleData__GetGimmickResultVoiceArray(BattleData_o *this, const MethodInfo *method)
{
  QuestPhaseEntity_o *questphase_ent; // x0

  questphase_ent = this->fields.questphase_ent;
  if ( !questphase_ent )
    sub_B170D4();
  return QuestPhaseEntity__GetGimmickResultVoiceArray(questphase_ent, 0LL);
}


System_Int32_array *__fastcall BattleData__GetGimmickSkillIdArray(BattleData_o *this, const MethodInfo *method)
{
  QuestPhaseEntity_o *questphase_ent; // x0

  questphase_ent = this->fields.questphase_ent;
  if ( !questphase_ent )
    sub_B170D4();
  return QuestPhaseEntity__GetGimmickSkillIdArray(questphase_ent, 0LL);
}


System_Int32_array *__fastcall BattleData__GetGimmickSkillRateArray(BattleData_o *this, const MethodInfo *method)
{
  QuestPhaseEntity_o *questphase_ent; // x0

  questphase_ent = this->fields.questphase_ent;
  if ( !questphase_ent )
    sub_B170D4();
  return QuestPhaseEntity__GetGimmickSkillRateArray(questphase_ent, 0LL);
}


System_String_array *__fastcall BattleData__GetGimmickStartVoiceArray(BattleData_o *this, const MethodInfo *method)
{
  QuestPhaseEntity_o *questphase_ent; // x0

  questphase_ent = this->fields.questphase_ent;
  if ( !questphase_ent )
    sub_B170D4();
  return QuestPhaseEntity__GetGimmickStartVoiceArray(questphase_ent, 0LL);
}


int32_t __fastcall BattleData__GetGimmickSvtId(BattleData_o *this, const MethodInfo *method)
{
  QuestPhaseEntity_o *questphase_ent; // x0

  questphase_ent = this->fields.questphase_ent;
  if ( !questphase_ent )
    sub_B170D4();
  return QuestPhaseEntity__GetGimmickSvtId(questphase_ent, 0LL);
}


System_Int64_array *__fastcall BattleData__GetItemDroppedSkillShiftNpcSvtIdArray(
        BattleData_o *this,
        const MethodInfo *method)
{
  ItemDroppedSkillShiftInfo_o *itemDroppedSkillShiftInfo; // x0

  itemDroppedSkillShiftInfo = this->fields.itemDroppedSkillShiftInfo;
  if ( !itemDroppedSkillShiftInfo )
    sub_B170D4();
  return ItemDroppedSkillShiftInfo__GetNpcSvtIdArray(itemDroppedSkillShiftInfo, 0LL);
}


System_Int32_array *__fastcall BattleData__GetItemDroppedSkillShiftUniqueIdArray(
        BattleData_o *this,
        const MethodInfo *method)
{
  ItemDroppedSkillShiftInfo_o *itemDroppedSkillShiftInfo; // x0

  itemDroppedSkillShiftInfo = this->fields.itemDroppedSkillShiftInfo;
  if ( !itemDroppedSkillShiftInfo )
    sub_B170D4();
  return ItemDroppedSkillShiftInfo__GetUniqueIdArray(itemDroppedSkillShiftInfo, 0LL);
}


int32_t __fastcall BattleData__GetLimitRemainTurn(BattleData_o *this, const MethodInfo *method)
{
  return this->fields.limitTurnCount + 1 - this->fields.turnCount;
}


int32_t __fastcall BattleData__GetLotteryCount(
        BattleData_o *this,
        BattleDeckServantData_array *svtDeckArray,
        System_Collections_Generic_List_List_EventCommandAssistEntity___o *commandAssistInfoOversightList,
        const MethodInfo *method)
{
  __int64 v7; // x1
  __int64 v8; // x1
  __int64 v9; // x1
  __int64 v10; // x1
  __int64 v11; // x1
  il2cpp_array_size_t max_length; // w22
  struct System_Collections_Generic_List_EventCommandAssistEntity__array *items; // x8
  System_Collections_Generic_List_EventCommandAssistEntity__o *v14; // x9
  int32_t size; // w23
  System_Collections_Generic_List_EventCommandAssistEntity__o *v16; // x9
  int32_t v17; // w24
  System_Collections_Generic_List_EventCommandAssistEntity__o *v18; // x8
  int32_t v19; // w8
  int32_t result; // w0
  DataMasterBase_WarMaster__WarEntity__int__o *Master_WarQuestSelectionMaster; // x0
  __int64 v22; // x1
  __int64 v23; // x2
  signed int v24; // w8
  DataMasterBase_WarMaster__WarEntity__int__o *v25; // x22
  int v26; // w25
  int v27; // w21
  int v28; // w28
  unsigned int v29; // w26
  struct BattleEntity_o *battle_ent; // x8
  BattleDeckServantData_o *v31; // x9
  BattleInfoData_o *battleInfo; // x0
  BattleUserServantData_o *UserServantFromID; // x0
  __int64 v34; // x23
  __int64 v35; // x24
  int32_t v36; // w0
  DataMasterBase_WarMaster__WarEntity__int__c *klass; // x11
  unsigned __int64 namespaze_low; // x8
  unsigned __int64 v39; // x9
  Il2CppType *p_byval_arg; // x11
  int v41; // w12
  int v42; // w8
  int v43; // w9
  int v44; // w10
  int32_t v45; // [xsp+0h] [xbp-60h]
  int v46; // [xsp+4h] [xbp-5Ch]
  int32_t v47; // [xsp+8h] [xbp-58h]
  int32_t v48; // [xsp+Ch] [xbp-54h]
  CodeStage_AntiCheat_ObscuredTypes_ObscuredInt_o v49; // 0:x0.16

  if ( (byte_40F6A95 & 1) == 0 )
  {
    sub_B16FFC(&Method_DataManager_GetMaster_ServantMaster___, svtDeckArray);
    sub_B16FFC(&DataManager_TypeInfo, v7);
    sub_B16FFC(&Method_DataMasterBase_ServantMaster__ServantEntity__int__GetEntity__, v8);
    sub_B16FFC(&Method_System_Collections_Generic_List_EventCommandAssistEntity__get_Count__, v9);
    sub_B16FFC(&Method_System_Collections_Generic_List_List_EventCommandAssistEntity___get_Item__, v10);
    sub_B16FFC(&CodeStage_AntiCheat_ObscuredTypes_ObscuredInt_TypeInfo, v11);
    byte_40F6A95 = 1;
  }
  if ( !svtDeckArray || !commandAssistInfoOversightList )
    goto LABEL_58;
  if ( !commandAssistInfoOversightList->fields._size )
    System_ThrowHelper__ThrowArgumentOutOfRangeException_41329284(0LL);
  items = commandAssistInfoOversightList->fields._items;
  v14 = items->m_Items[0];
  if ( !v14 )
    goto LABEL_58;
  size = v14->fields._size;
  if ( commandAssistInfoOversightList->fields._size <= 1u )
    System_ThrowHelper__ThrowArgumentOutOfRangeException_41329284(0LL);
  v16 = items->m_Items[1];
  if ( !v16 )
    goto LABEL_58;
  v17 = v16->fields._size;
  if ( commandAssistInfoOversightList->fields._size <= 2u )
    System_ThrowHelper__ThrowArgumentOutOfRangeException_41329284(0LL);
  v18 = items->m_Items[2];
  if ( !v18 )
LABEL_58:
    sub_B170D4();
  v19 = v18->fields._size;
  max_length = svtDeckArray->max_length;
  result = 5 * max_length;
  if ( !size || !v17 || !v19 )
  {
    v45 = v19;
    v46 = 5 * max_length;
    if ( (BYTE3(DataManager_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0 && !DataManager_TypeInfo->_2.cctor_finished )
      j_il2cpp_runtime_class_init_0(DataManager_TypeInfo);
    v47 = v17;
    v48 = size;
    Master_WarQuestSelectionMaster = (DataMasterBase_WarMaster__WarEntity__int__o *)DataManager__GetMaster_WarQuestSelectionMaster_((const MethodInfo_18C3224 *)Method_DataManager_GetMaster_ServantMaster___);
    v24 = svtDeckArray->max_length;
    if ( v24 >= 1 )
    {
      v25 = Master_WarQuestSelectionMaster;
      v26 = 0;
      v27 = 0;
      v28 = 0;
      v29 = 0;
      while ( 1 )
      {
        if ( v29 >= v24 )
          goto LABEL_57;
        battle_ent = this->fields.battle_ent;
        if ( !battle_ent )
          goto LABEL_58;
        v31 = svtDeckArray->m_Items[v29];
        if ( !v31 )
          goto LABEL_58;
        battleInfo = battle_ent->fields.battleInfo;
        if ( !battleInfo )
          goto LABEL_58;
        UserServantFromID = BattleInfoData__getUserServantFromID(battleInfo, v31->fields.userSvtId, 0LL);
        if ( !UserServantFromID )
          goto LABEL_58;
        v35 = *(_QWORD *)&UserServantFromID->fields.svtId.fields.currentCryptoKey;
        v34 = *(_QWORD *)&UserServantFromID->fields.svtId.fields.fakeValue;
        if ( (BYTE3(CodeStage_AntiCheat_ObscuredTypes_ObscuredInt_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0
          && !CodeStage_AntiCheat_ObscuredTypes_ObscuredInt_TypeInfo->_2.cctor_finished )
        {
          j_il2cpp_runtime_class_init_0(CodeStage_AntiCheat_ObscuredTypes_ObscuredInt_TypeInfo);
        }
        *(_QWORD *)&v49.fields.currentCryptoKey = v35;
        *(_QWORD *)&v49.fields.fakeValue = v34;
        v36 = CodeStage_AntiCheat_ObscuredTypes_ObscuredInt__op_Implicit_44068536(v49, 0LL);
        if ( !v25 )
          goto LABEL_58;
        Master_WarQuestSelectionMaster = (DataMasterBase_WarMaster__WarEntity__int__o *)DataMasterBase_WarMaster__WarEntity__int___GetEntity(
                                                                                          v25,
                                                                                          v36,
                                                                                          (const MethodInfo_266F388 *)Method_DataMasterBase_ServantMaster__ServantEntity__int__GetEntity__);
        if ( !Master_WarQuestSelectionMaster )
          goto LABEL_58;
        klass = Master_WarQuestSelectionMaster[2].klass;
        if ( !klass )
          goto LABEL_58;
        namespaze_low = LODWORD(klass->_1.namespaze);
        if ( (__int64)(namespaze_low << 32) >= 1 )
          break;
LABEL_43:
        v24 = svtDeckArray->max_length;
        if ( (int)++v29 >= v24 )
          goto LABEL_46;
      }
      v39 = 0LL;
      p_byval_arg = &klass->_1.byval_arg;
      while ( v39 < namespaze_low )
      {
        v41 = *((_DWORD *)&p_byval_arg->data + v39);
        switch ( v41 )
        {
          case 3:
            ++v28;
            break;
          case 2:
            ++v27;
            break;
          case 1:
            ++v26;
            break;
        }
        if ( (__int64)++v39 >= (int)namespaze_low )
          goto LABEL_43;
      }
LABEL_57:
      sub_B17100(Master_WarQuestSelectionMaster, v22, v23);
      sub_B170A0();
    }
    v28 = 0;
    v27 = 0;
    v26 = 0;
LABEL_46:
    if ( v48 )
      v42 = 0;
    else
      v42 = -v26;
    if ( v47 )
      v43 = 0;
    else
      v43 = -v27;
    if ( v45 )
      v44 = 0;
    else
      v44 = -v28;
    return v44 + v46 + v43 + v42;
  }
  return result;
}


int32_t __fastcall BattleData__GetMasterCommandSpellCutinImageId(BattleData_o *this, const MethodInfo *method)
{
  BattleMasterImageEntity_o *BattleMasterImageEntity; // x0

  BattleMasterImageEntity = BattleData__GetBattleMasterImageEntity(this, method);
  if ( BattleMasterImageEntity )
    LODWORD(BattleMasterImageEntity) = BattleMasterImageEntity->fields.commandSpellCutinId;
  return (int)BattleMasterImageEntity;
}


int32_t __fastcall BattleData__GetMasterIconImageId(BattleData_o *this, const MethodInfo *method)
{
  BattleMasterImageEntity_o *BattleMasterImageEntity; // x0

  BattleMasterImageEntity = BattleData__GetBattleMasterImageEntity(this, method);
  if ( BattleMasterImageEntity )
    LODWORD(BattleMasterImageEntity) = BattleMasterImageEntity->fields.faceIconId;
  return (int)BattleMasterImageEntity;
}


int32_t __fastcall BattleData__GetMasterIconResultImageId(BattleData_o *this, const MethodInfo *method)
{
  BattleMasterImageEntity_o *BattleMasterImageEntity; // x0

  BattleMasterImageEntity = BattleData__GetBattleMasterImageEntity(this, method);
  if ( BattleMasterImageEntity )
    LODWORD(BattleMasterImageEntity) = BattleMasterImageEntity->fields.resultImageId;
  return (int)BattleMasterImageEntity;
}


int32_t __fastcall BattleData__GetMasterSkillCutinImageId(BattleData_o *this, const MethodInfo *method)
{
  BattleMasterImageEntity_o *BattleMasterImageEntity; // x0

  BattleMasterImageEntity = BattleData__GetBattleMasterImageEntity(this, method);
  if ( BattleMasterImageEntity )
    LODWORD(BattleMasterImageEntity) = BattleMasterImageEntity->fields.skillCutinId;
  return (int)BattleMasterImageEntity;
}


// local variable allocation has failed, the output may be wrong!
UnityEngine_Vector3_o __fastcall BattleData__GetMasterSkillCutinOffset(BattleData_o *this, const MethodInfo *method)
{
  BattleMasterImageEntity_o *BattleMasterImageEntity; // x0
  float skillCutinOffsetX; // s0
  float skillCutinOffsetY; // s1
  float v5; // s2
  UnityEngine_Vector3_o result; // 0:s0.4,4:s1.4,8:s2.4

  BattleMasterImageEntity = BattleData__GetBattleMasterImageEntity(this, method);
  if ( !BattleMasterImageEntity )
    goto LABEL_5;
  if ( !*(_QWORD *)&BattleMasterImageEntity->fields.skillCutinOffsetX )
  {
    BattleMasterImageEntity = 0LL;
LABEL_5:
    *(UnityEngine_Vector3_o *)&skillCutinOffsetX = UnityEngine_Vector3__get_zero((const MethodInfo *)BattleMasterImageEntity);
    goto LABEL_6;
  }
  skillCutinOffsetX = (float)BattleMasterImageEntity->fields.skillCutinOffsetX;
  skillCutinOffsetY = (float)BattleMasterImageEntity->fields.skillCutinOffsetY;
  v5 = 0.0;
LABEL_6:
  result.fields.z = v5;
  result.fields.y = skillCutinOffsetY;
  result.fields.x = skillCutinOffsetX;
  return result;
}


BattleBuffData_BuffData_o *__fastcall BattleData__GetMaximumTurnFixedBuff(BattleData_o *this, const MethodInfo *method)
{
  void *FieldPlayerServantList; // x0
  __int64 v3; // x1
  __int64 v4; // x2
  int v5; // w8
  void *v6; // x19
  unsigned int v7; // w21
  BattleBuffData_BuffData_o *v8; // x20
  BattleServantData_o *v9; // x0
  __int64 v10; // x8
  __int64 v11; // x9
  __int64 v12; // x9
  BattleBuffData_BuffData_o *v13; // x10

  FieldPlayerServantList = BattleData__getFieldPlayerServantList(this, method);
  if ( !FieldPlayerServantList )
    goto LABEL_25;
  v5 = *((_DWORD *)FieldPlayerServantList + 6);
  v6 = FieldPlayerServantList;
  if ( v5 >= 1 )
  {
    v7 = 0;
    v8 = 0LL;
    while ( 1 )
    {
      if ( v7 >= v5 )
      {
LABEL_26:
        sub_B17100(FieldPlayerServantList, v3, v4);
        sub_B170A0();
      }
      v9 = (BattleServantData_o *)*((_QWORD *)v6 + (int)v7 + 4);
      if ( !v9 )
        goto LABEL_25;
      FieldPlayerServantList = BattleServantData__getFixCommandCardBuff(v9, 0LL);
      if ( !FieldPlayerServantList )
        goto LABEL_25;
      v10 = *((_QWORD *)FieldPlayerServantList + 3);
      if ( v10 )
      {
        if ( v8 )
        {
          if ( !(_DWORD)v10 )
            goto LABEL_26;
          v11 = *((_QWORD *)FieldPlayerServantList + 4);
          if ( !v11 )
            goto LABEL_25;
          if ( v8->fields.turn >= *(_DWORD *)(v11 + 20) )
            goto LABEL_21;
        }
        else if ( !(_DWORD)v10 )
        {
          goto LABEL_26;
        }
        v8 = (BattleBuffData_BuffData_o *)*((_QWORD *)FieldPlayerServantList + 4);
        if ( (int)v10 >= 2 )
        {
          v12 = 5LL;
          while ( v8 )
          {
            v13 = (BattleBuffData_BuffData_o *)*((_QWORD *)FieldPlayerServantList + v12);
            if ( !v13 )
              break;
            ++v12;
            if ( v8->fields.turn < v13->fields.turn )
              v8 = v13;
            if ( (int)v12 - 4 >= (int)v10 )
              goto LABEL_21;
          }
LABEL_25:
          sub_B170D4();
        }
      }
LABEL_21:
      v5 = *((_DWORD *)v6 + 6);
      if ( (int)++v7 >= v5 )
        return v8;
    }
  }
  return 0LL;
}


int32_t __fastcall BattleData__GetMovieAfterCrossFadeStartFrame(BattleData_o *this, const MethodInfo *method)
{
  QuestPhaseEntity_o *questphase_ent; // x0

  questphase_ent = this->fields.questphase_ent;
  if ( !questphase_ent )
    sub_B170D4();
  return QuestPhaseEntity__GetMovieAfterCrossFadeStartFrame(questphase_ent, 0LL);
}


float __fastcall BattleData__GetMovieAfterCrossFadeTime(BattleData_o *this, const MethodInfo *method)
{
  QuestPhaseEntity_o *questphase_ent; // x0

  questphase_ent = this->fields.questphase_ent;
  if ( !questphase_ent )
    sub_B170D4();
  return (float)QuestPhaseEntity__GetMovieAfterCrossFadeTime(questphase_ent, 0LL) / 1000.0;
}


System_Int32_array *__fastcall BattleData__GetMultiEffectIds(BattleData_o *this, const MethodInfo *method)
{
  StageEntity_o *StageEntity; // x0

  StageEntity = BattleData__getStageEntity(this, method);
  if ( !StageEntity )
    sub_B170D4();
  return StageEntity__GetMultiEffectIds(StageEntity, 0LL);
}


System_Int32_array *__fastcall BattleData__GetNotSvtActorIndividualityArray(
        BattleData_o *this,
        BattleActionData_o *mainAction,
        bool isSvtAction,
        const MethodInfo *method)
{
  struct BattleFieldEnvironmentData_o *FieldEnvData_k__BackingField; // x0

  if ( !mainAction || isSvtAction || mainAction->fields.state != 2 )
    return 0LL;
  FieldEnvData_k__BackingField = this->fields._FieldEnvData_k__BackingField;
  if ( !FieldEnvData_k__BackingField )
    sub_B170D4();
  return (System_Int32_array *)((__int64 (__fastcall *)(struct BattleFieldEnvironmentData_o *, _QWORD, Il2CppMethodPointer))FieldEnvData_k__BackingField->klass->vtable._4_GetFieldIndividuality.method)(
                                 FieldEnvData_k__BackingField,
                                 0LL,
                                 FieldEnvData_k__BackingField->klass->vtable._5_AddBackground.methodPtr);
}


int32_t __fastcall BattleData__GetOverWriteMasterImageId(BattleData_o *this, const MethodInfo *method)
{
  QuestPhaseEntity_o *questphase_ent; // x0

  questphase_ent = this->fields.questphase_ent;
  if ( !questphase_ent )
    sub_B170D4();
  return QuestPhaseEntity__GetOverWriteMasterImageId(questphase_ent, 0LL);
}


int32_t __fastcall BattleData__GetOverwriteCommandSpellContinue(
        BattleData_o *this,
        int32_t def,
        const MethodInfo *method)
{
  QuestPhaseEntity_o *questphase_ent; // x0

  questphase_ent = this->fields.questphase_ent;
  if ( questphase_ent )
    return QuestPhaseEntity__GetOverwriteCommandSpellContinue(questphase_ent, def, 0LL);
  else
    return def;
}


int32_t __fastcall BattleData__GetOverwriteCommandSpellIcon(BattleData_o *this, const MethodInfo *method)
{
  QuestPhaseEntity_o *questphase_ent; // x0

  questphase_ent = this->fields.questphase_ent;
  if ( questphase_ent )
    LODWORD(questphase_ent) = QuestPhaseEntity__GetOverwriteCommandSpellIcon(
                                questphase_ent,
                                this->fields.battleGenderType,
                                0LL,
                                0LL);
  return (int)questphase_ent;
}


// local variable allocation has failed, the output may be wrong!
BattleActorControl_o *__fastcall BattleData__GetPartsActor(BattleData_o *this, int32_t pos, const MethodInfo *method)
{
  __int64 v5; // x1
  __int64 v6; // x1
  __int64 v7; // x1
  struct System_Collections_Generic_List_BattleServantData__o *enemy_datalist; // x23
  __int64 v9; // x21
  unsigned __int64 v10; // x22
  struct System_Collections_Generic_List_BattleServantData__o *v11; // x23
  BattleServantData_o *v12; // x0
  struct System_Collections_Generic_List_BattleServantData__o *v13; // x23
  BattleServantData_o *v14; // x0
  struct System_Collections_Generic_List_BattleServantData__o *v15; // x23
  BattleServantData_o *v16; // x0
  struct System_Collections_Generic_List_BattleServantData__o *v17; // x20
  __int64 v18; // x8
  BattlePerformance_o *perf; // x0
  UnityEngine_Object_o *ServantGameObject; // x19
  bool v21; // w8
  BattleActorControl_o *result; // x0

  if ( (byte_40F6AA0 & 1) == 0 )
  {
    sub_B16FFC(&Method_UnityEngine_GameObject_GetComponent_BattleActorControl___, *(_QWORD *)&pos);
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleServantData__get_Count__, v5);
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleServantData__get_Item__, v6);
    sub_B16FFC(&UnityEngine_Object_TypeInfo, v7);
    byte_40F6AA0 = 1;
  }
  if ( !this->fields.isMultiTargetBattle )
    return 0LL;
  enemy_datalist = this->fields.enemy_datalist;
  if ( !enemy_datalist )
    goto LABEL_45;
  v9 = 4LL;
  while ( 1 )
  {
    v10 = v9 - 4;
    if ( v9 - 4 >= enemy_datalist->fields._size )
      return 0LL;
    if ( v10 >= (unsigned int)enemy_datalist->fields._size )
      System_ThrowHelper__ThrowArgumentOutOfRangeException_41329284(0LL);
    if ( *((_QWORD *)&enemy_datalist->fields._items->obj.klass + v9) )
    {
      if ( pos != 2 )
      {
        if ( pos == 1 )
        {
          v13 = this->fields.enemy_datalist;
          if ( !v13 )
            goto LABEL_45;
          if ( v10 >= (unsigned int)v13->fields._size )
            System_ThrowHelper__ThrowArgumentOutOfRangeException_41329284(0LL);
          v14 = (BattleServantData_o *)*((_QWORD *)&v13->fields._items->obj.klass + v9);
          if ( !v14 )
            goto LABEL_45;
          if ( BattleServantData__isMultiTargetCore(v14, 0LL) )
            break;
        }
        else if ( !pos )
        {
          v11 = this->fields.enemy_datalist;
          if ( !v11 )
            goto LABEL_45;
          if ( v10 >= (unsigned int)v11->fields._size )
            System_ThrowHelper__ThrowArgumentOutOfRangeException_41329284(0LL);
          v12 = (BattleServantData_o *)*((_QWORD *)&v11->fields._items->obj.klass + v9);
          if ( !v12 )
            goto LABEL_45;
          if ( BattleServantData__isMultiTargetUp(v12, 0LL) )
            break;
        }
        goto LABEL_30;
      }
      v15 = this->fields.enemy_datalist;
      if ( !v15 )
        goto LABEL_45;
      if ( v10 >= (unsigned int)v15->fields._size )
        System_ThrowHelper__ThrowArgumentOutOfRangeException_41329284(0LL);
      v16 = (BattleServantData_o *)*((_QWORD *)&v15->fields._items->obj.klass + v9);
      if ( !v16 )
        goto LABEL_45;
      if ( BattleServantData__isMultiTargetUnder(v16, 0LL) )
        break;
    }
LABEL_30:
    enemy_datalist = this->fields.enemy_datalist;
    ++v9;
    if ( !enemy_datalist )
      goto LABEL_45;
  }
  v17 = this->fields.enemy_datalist;
  if ( !v17 )
    goto LABEL_45;
  if ( v17->fields._size <= (unsigned int)(v9 - 4) )
    System_ThrowHelper__ThrowArgumentOutOfRangeException_41329284(0LL);
  v18 = *((_QWORD *)&v17->fields._items->obj.klass + v9);
  if ( !v18 )
    return 0LL;
  perf = this->fields.perf;
  if ( !perf )
    goto LABEL_45;
  ServantGameObject = (UnityEngine_Object_o *)BattlePerformance__getServantGameObject(perf, *(_DWORD *)(v18 + 24), 0LL);
  if ( (BYTE3(UnityEngine_Object_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0
    && !UnityEngine_Object_TypeInfo->_2.cctor_finished )
  {
    j_il2cpp_runtime_class_init_0(UnityEngine_Object_TypeInfo);
  }
  v21 = UnityEngine_Object__op_Inequality(ServantGameObject, 0LL, 0LL);
  result = 0LL;
  if ( v21 )
  {
    if ( ServantGameObject )
      return (BattleActorControl_o *)UnityEngine_GameObject__GetComponent_srcLineSprite_(
                                       (UnityEngine_GameObject_o *)ServantGameObject,
                                       (const MethodInfo_19D14E0 *)Method_UnityEngine_GameObject_GetComponent_BattleActorControl___);
LABEL_45:
    sub_B170D4();
  }
  return result;
}


int32_t __fastcall BattleData__GetPositionIndex(BattleData_o *this, const MethodInfo *method)
{
  const MethodInfo *v2; // x2
  BattleServantData_o *ServantData; // x0
  __int64 v5; // x1
  __int64 v6; // x2
  int uniqueId; // w8
  struct BattleData_o *data; // x9
  struct System_Int32_array *e_entryid; // x9
  int max_length; // w10
  __int64 i; // x0

  ServantData = BattleData__getServantData(this, this->fields.globaltargetId, v2);
  if ( ServantData )
    uniqueId = ServantData->fields.uniqueId;
  else
    uniqueId = -1;
  data = this->fields.data;
  if ( !data || (e_entryid = data->fields.e_entryid) == 0LL )
    sub_B170D4();
  max_length = e_entryid->max_length;
  for ( i = 0LL; (int)i < max_length; i = (unsigned int)(i + 1) )
  {
    if ( (unsigned int)i >= max_length )
    {
      sub_B17100(i, v5, v6);
      sub_B170A0();
    }
    if ( uniqueId == e_entryid->m_Items[(int)i + 1] )
      return i;
  }
  LODWORD(i) = -1;
  return i;
}


System_Int32_array *__fastcall BattleData__GetPrioredIndividuality(BattleData_o *this, const MethodInfo *method)
{
  QuestPhaseEntity_o *questphase_ent; // x0

  questphase_ent = this->fields.questphase_ent;
  if ( !questphase_ent )
    sub_B170D4();
  return QuestPhaseEntity__getPrioredIndividuality(questphase_ent, 0LL);
}


System_Int32_array *__fastcall BattleData__GetQuestRouteIdArray(BattleData_o *this, const MethodInfo *method)
{
  System_Collections_Generic_List_int__o *listQuestRouteId; // x0

  if ( (byte_40F6ACC & 1) == 0 )
  {
    sub_B16FFC(&Method_System_Collections_Generic_List_int__ToArray__, method);
    byte_40F6ACC = 1;
  }
  listQuestRouteId = this->fields.listQuestRouteId;
  if ( !listQuestRouteId )
    sub_B170D4();
  return System_Collections_Generic_List_int___ToArray(
           listQuestRouteId,
           (const MethodInfo_2F125FC *)Method_System_Collections_Generic_List_int__ToArray__);
}


QuestPhaseEntity_o *__fastcall BattleData__GetQuestphaseEnt(BattleData_o *this, const MethodInfo *method)
{
  return this->fields.questphase_ent;
}


int32_t __fastcall BattleData__GetRaidType(BattleData_o *this, const MethodInfo *method)
{
  __int64 v3; // x1
  __int64 v4; // x1
  __int64 v5; // x1
  __int64 v6; // x1
  __int64 v7; // x1
  __int64 v8; // x2
  __int64 v9; // x3
  __int64 v10; // x4
  System_Collections_Generic_IEnumerable_TSource__o *EnemyServantList; // x19
  BattleData___c_c *v12; // x8
  struct BattleData___c_StaticFields *static_fields; // x9
  System_Func_WarBoardManager_WarBoardOnboardSkillTarget__bool__o *_9__578_0; // x20
  Il2CppObject *v15; // x21
  struct BattleData___c_StaticFields *v16; // x0
  WarBoardData_SquareRangeSearch_o *v17; // x0

  if ( (byte_40F6AA6 & 1) == 0 )
  {
    sub_B16FFC(&Method_System_Linq_Enumerable_FirstOrDefault_BattleServantData____66839232, method);
    sub_B16FFC(&Method_System_Func_BattleServantData__bool___ctor__, v3);
    sub_B16FFC(&System_Func_BattleServantData__bool__TypeInfo, v4);
    sub_B16FFC(&Method_BattleData___c__GetRaidType_b__578_0__, v5);
    sub_B16FFC(&BattleData___c_TypeInfo, v6);
    byte_40F6AA6 = 1;
  }
  EnemyServantList = (System_Collections_Generic_IEnumerable_TSource__o *)BattleData__getEnemyServantList(this, method);
  v12 = BattleData___c_TypeInfo;
  if ( (BYTE3(BattleData___c_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0
    && !BattleData___c_TypeInfo->_2.cctor_finished )
  {
    j_il2cpp_runtime_class_init_0(BattleData___c_TypeInfo);
    v12 = BattleData___c_TypeInfo;
  }
  static_fields = v12->static_fields;
  _9__578_0 = (System_Func_WarBoardManager_WarBoardOnboardSkillTarget__bool__o *)static_fields->__9__578_0;
  if ( !_9__578_0 )
  {
    if ( (BYTE3(v12->vtable._0_Equals.methodPtr) & 4) != 0 && !v12->_2.cctor_finished )
    {
      j_il2cpp_runtime_class_init_0(v12);
      static_fields = BattleData___c_TypeInfo->static_fields;
    }
    v15 = (Il2CppObject *)static_fields->__9;
    _9__578_0 = (System_Func_WarBoardManager_WarBoardOnboardSkillTarget__bool__o *)sub_B170CC(
                                                                                     System_Func_BattleServantData__bool__TypeInfo,
                                                                                     v7,
                                                                                     v8,
                                                                                     v9,
                                                                                     v10);
    System_Func_WarBoardManager_WarBoardOnboardSkillTarget__bool____ctor(
      _9__578_0,
      v15,
      Method_BattleData___c__GetRaidType_b__578_0__,
      (const MethodInfo_2B6AB40 *)Method_System_Func_BattleServantData__bool___ctor__);
    v16 = BattleData___c_TypeInfo->static_fields;
    v16->__9__578_0 = (struct System_Func_BattleServantData__bool__o *)_9__578_0;
    sub_B16F98(&v16->__9__578_0, _9__578_0);
  }
  v17 = System_Linq_Enumerable__FirstOrDefault_WarBoardData_SquareRangeSearch_(
          EnemyServantList,
          (System_Func_TSource__bool__o *)_9__578_0,
          (const MethodInfo_18D8450 *)Method_System_Linq_Enumerable_FirstOrDefault_BattleServantData____66839232);
  if ( v17 )
  {
    if ( BYTE1(v17[18].fields.squareIndex) )
      LODWORD(v17) = 1;
    else
      LODWORD(v17) = 2;
  }
  return (int)v17;
}


System_Int32_array *__fastcall BattleData__GetReelIconArray(BattleData_o *this, const MethodInfo *method)
{
  QuestPhaseEntity_o *questphase_ent; // x0

  questphase_ent = this->fields.questphase_ent;
  if ( !questphase_ent )
    sub_B170D4();
  return QuestPhaseEntity__GetReelIconIdArray(questphase_ent, 0LL);
}


System_Collections_Generic_List_RestockServantLogic__o *__fastcall BattleData__GetRestockServantLogicList(
        BattleData_o *this,
        const MethodInfo *method)
{
  __int64 v2; // x2
  __int64 v3; // x3
  __int64 v4; // x4
  __int64 v6; // x1
  __int64 v7; // x1
  __int64 v8; // x1
  __int64 v9; // x1
  struct System_Collections_Generic_List_RestockServantLogic__o *restockServantLogicList; // x19
  BattleData___c_c *v11; // x0
  struct BattleData___c_StaticFields *static_fields; // x8
  System_Predicate_peRenderTexture_ChangeLayerObject__o *_9__326_0; // x20
  Il2CppObject *v14; // x21
  struct BattleData___c_StaticFields *v15; // x0

  if ( (byte_40F6A20 & 1) == 0 )
  {
    sub_B16FFC(&Method_System_Collections_Generic_List_RestockServantLogic__FindAll__, method);
    sub_B16FFC(&Method_System_Predicate_RestockServantLogic___ctor__, v6);
    sub_B16FFC(&System_Predicate_RestockServantLogic__TypeInfo, v7);
    sub_B16FFC(&Method_BattleData___c__GetRestockServantLogicList_b__326_0__, v8);
    sub_B16FFC(&BattleData___c_TypeInfo, v9);
    byte_40F6A20 = 1;
  }
  restockServantLogicList = this->fields.restockServantLogicList;
  v11 = BattleData___c_TypeInfo;
  if ( (BYTE3(BattleData___c_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0
    && !BattleData___c_TypeInfo->_2.cctor_finished )
  {
    j_il2cpp_runtime_class_init_0(BattleData___c_TypeInfo);
    v11 = BattleData___c_TypeInfo;
  }
  static_fields = v11->static_fields;
  _9__326_0 = (System_Predicate_peRenderTexture_ChangeLayerObject__o *)static_fields->__9__326_0;
  if ( !_9__326_0 )
  {
    if ( (BYTE3(v11->vtable._0_Equals.methodPtr) & 4) != 0 && !v11->_2.cctor_finished )
    {
      j_il2cpp_runtime_class_init_0(v11);
      static_fields = BattleData___c_TypeInfo->static_fields;
    }
    v14 = (Il2CppObject *)static_fields->__9;
    _9__326_0 = (System_Predicate_peRenderTexture_ChangeLayerObject__o *)sub_B170CC(
                                                                           System_Predicate_RestockServantLogic__TypeInfo,
                                                                           method,
                                                                           v2,
                                                                           v3,
                                                                           v4);
    System_Predicate_peRenderTexture_ChangeLayerObject____ctor(
      _9__326_0,
      v14,
      Method_BattleData___c__GetRestockServantLogicList_b__326_0__,
      (const MethodInfo_2B0B204 *)Method_System_Predicate_RestockServantLogic___ctor__);
    v15 = BattleData___c_TypeInfo->static_fields;
    v15->__9__326_0 = (struct System_Predicate_RestockServantLogic__o *)_9__326_0;
    sub_B16F98(&v15->__9__326_0, _9__326_0);
  }
  if ( !restockServantLogicList )
    sub_B170D4();
  return (System_Collections_Generic_List_RestockServantLogic__o *)System_Collections_Generic_List_MaterialBranchRouteManager_MaterialBranchInfo___FindAll(
                                                                     (System_Collections_Generic_List_MaterialBranchRouteManager_MaterialBranchInfo__o *)restockServantLogicList,
                                                                     (System_Predicate_T__o *)_9__326_0,
                                                                     (const MethodInfo_2F26660 *)Method_System_Collections_Generic_List_RestockServantLogic__FindAll__);
}


// local variable allocation has failed, the output may be wrong!
BattleServantData_array *__fastcall BattleData__GetRestockableSubServantArray(
        BattleData_o *this,
        bool isEnemy,
        int32_t deckIndex,
        const MethodInfo *method)
{
  __int64 v4; // x4
  __int64 v8; // x1
  __int64 v9; // x1
  __int64 v10; // x1
  __int64 v11; // x1
  __int64 v12; // x1
  __int64 v13; // x1
  __int64 v14; // x1
  __int64 v15; // x1
  __int64 v16; // x1
  __int64 v17; // x1
  BattleData___c__DisplayClass445_0_o *v18; // x22
  __int64 v19; // x1
  __int64 v20; // x2
  __int64 v21; // x3
  __int64 v22; // x4
  __int64 v23; // x8
  System_Collections_Generic_List_MaterialBranchRouteManager_MaterialBranchInfo__o *v24; // x19
  System_Predicate_peRenderTexture_ChangeLayerObject__o *v25; // x20
  __int64 v26; // x1
  __int64 v27; // x2
  __int64 v28; // x3
  __int64 v29; // x4
  System_Collections_Generic_List_T__o *All; // x19
  BattleData___c_c *v31; // x8
  struct BattleData___c_StaticFields *static_fields; // x9
  System_Func_BattleLogicBuff_ReduceHpProcess_BuffInfo__int__o *_9__445_1; // x20
  Il2CppObject *v34; // x21
  struct BattleData___c_StaticFields *v35; // x0
  System_Collections_Generic_IEnumerable_TSource__o *v36; // x0

  if ( (byte_40F6A5B & 1) == 0 )
  {
    sub_B16FFC(&Method_System_Linq_Enumerable_OrderBy_BattleServantData__int___, isEnemy);
    sub_B16FFC(&Method_System_Linq_Enumerable_ToArray_BattleServantData___, v8);
    sub_B16FFC(&Method_System_Func_BattleServantData__int___ctor__, v9);
    sub_B16FFC(&System_Func_BattleServantData__int__TypeInfo, v10);
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleServantData__FindAll__, v11);
    sub_B16FFC(&Method_System_Predicate_BattleServantData___ctor__, v12);
    sub_B16FFC(&System_Predicate_BattleServantData__TypeInfo, v13);
    sub_B16FFC(&Method_BattleData___c__GetRestockableSubServantArray_b__445_1__, v14);
    sub_B16FFC(&Method_BattleData___c__DisplayClass445_0__GetRestockableSubServantArray_b__0__, v15);
    sub_B16FFC(&BattleData___c__DisplayClass445_0_TypeInfo, v16);
    sub_B16FFC(&BattleData___c_TypeInfo, v17);
    byte_40F6A5B = 1;
  }
  v18 = (BattleData___c__DisplayClass445_0_o *)sub_B170CC(
                                                 BattleData___c__DisplayClass445_0_TypeInfo,
                                                 isEnemy,
                                                 *(_QWORD *)&deckIndex,
                                                 method,
                                                 v4);
  BattleData___c__DisplayClass445_0___ctor(v18, 0LL);
  if ( !v18 )
    goto LABEL_16;
  v18->fields.deckIndex = deckIndex;
  v23 = 128LL;
  if ( isEnemy )
    v23 = 168LL;
  v24 = *(System_Collections_Generic_List_MaterialBranchRouteManager_MaterialBranchInfo__o **)((char *)&this->klass + v23);
  v25 = (System_Predicate_peRenderTexture_ChangeLayerObject__o *)sub_B170CC(
                                                                   System_Predicate_BattleServantData__TypeInfo,
                                                                   v19,
                                                                   v20,
                                                                   v21,
                                                                   v22);
  System_Predicate_peRenderTexture_ChangeLayerObject____ctor(
    v25,
    (Il2CppObject *)v18,
    Method_BattleData___c__DisplayClass445_0__GetRestockableSubServantArray_b__0__,
    (const MethodInfo_2B0B204 *)Method_System_Predicate_BattleServantData___ctor__);
  if ( !v24 )
LABEL_16:
    sub_B170D4();
  All = System_Collections_Generic_List_MaterialBranchRouteManager_MaterialBranchInfo___FindAll(
          v24,
          (System_Predicate_T__o *)v25,
          (const MethodInfo_2F26660 *)Method_System_Collections_Generic_List_BattleServantData__FindAll__);
  v31 = BattleData___c_TypeInfo;
  if ( (BYTE3(BattleData___c_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0
    && !BattleData___c_TypeInfo->_2.cctor_finished )
  {
    j_il2cpp_runtime_class_init_0(BattleData___c_TypeInfo);
    v31 = BattleData___c_TypeInfo;
  }
  static_fields = v31->static_fields;
  _9__445_1 = (System_Func_BattleLogicBuff_ReduceHpProcess_BuffInfo__int__o *)static_fields->__9__445_1;
  if ( !_9__445_1 )
  {
    if ( (BYTE3(v31->vtable._0_Equals.methodPtr) & 4) != 0 && !v31->_2.cctor_finished )
    {
      j_il2cpp_runtime_class_init_0(v31);
      static_fields = BattleData___c_TypeInfo->static_fields;
    }
    v34 = (Il2CppObject *)static_fields->__9;
    _9__445_1 = (System_Func_BattleLogicBuff_ReduceHpProcess_BuffInfo__int__o *)sub_B170CC(
                                                                                  System_Func_BattleServantData__int__TypeInfo,
                                                                                  v26,
                                                                                  v27,
                                                                                  v28,
                                                                                  v29);
    System_Func_BattleLogicBuff_ReduceHpProcess_BuffInfo__int____ctor(
      _9__445_1,
      v34,
      Method_BattleData___c__GetRestockableSubServantArray_b__445_1__,
      (const MethodInfo_2B6B6EC *)Method_System_Func_BattleServantData__int___ctor__);
    v35 = BattleData___c_TypeInfo->static_fields;
    v35->__9__445_1 = (struct System_Func_BattleServantData__int__o *)_9__445_1;
    sub_B16F98(&v35->__9__445_1, _9__445_1);
  }
  v36 = (System_Collections_Generic_IEnumerable_TSource__o *)System_Linq_Enumerable__OrderBy_QuestPhaseDetailEntity_BoardInfo__int_(
                                                               (System_Collections_Generic_IEnumerable_TSource__o *)All,
                                                               (System_Func_TSource__TKey__o *)_9__445_1,
                                                               (const MethodInfo_19BD754 *)Method_System_Linq_Enumerable_OrderBy_BattleServantData__int___);
  return (BattleServantData_array *)System_Linq_Enumerable__ToArray_DrawLotsDisplayMessage_DisplayedInGroup_SaveData_(
                                      v36,
                                      (const MethodInfo_19C4BCC *)Method_System_Linq_Enumerable_ToArray_BattleServantData___);
}


// local variable allocation has failed, the output may be wrong!
int32_t __fastcall BattleData__GetSavedServantCommonFlag(
        int32_t servantId,
        int32_t defaultFlag,
        const MethodInfo *method)
{
  __int64 v5; // x1
  __int64 v6; // x1
  BattleData_c *inited; // x0
  System_Collections_Generic_Dictionary_int__int__o *SavedServantCommonFlagDict; // x0
  System_Collections_Generic_Dictionary_int__int__o *v9; // x21

  if ( (byte_40F6ABE & 1) == 0 )
  {
    sub_B16FFC(&BattleData_TypeInfo, *(_QWORD *)&defaultFlag);
    sub_B16FFC(&Method_System_Collections_Generic_Dictionary_int__int__ContainsKey__, v5);
    sub_B16FFC(&Method_System_Collections_Generic_Dictionary_int__int__get_Item__, v6);
    byte_40F6ABE = 1;
  }
  inited = BattleData_TypeInfo;
  if ( (BYTE3(BattleData_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0 && !BattleData_TypeInfo->_2.cctor_finished )
    inited = (BattleData_c *)j_il2cpp_runtime_class_init_0(BattleData_TypeInfo);
  SavedServantCommonFlagDict = BattleData__GetSavedServantCommonFlagDict((const MethodInfo *)inited);
  if ( !SavedServantCommonFlagDict )
    sub_B170D4();
  v9 = SavedServantCommonFlagDict;
  if ( System_Collections_Generic_Dictionary_int__int___ContainsKey(
         SavedServantCommonFlagDict,
         servantId,
         (const MethodInfo_2DDD218 *)Method_System_Collections_Generic_Dictionary_int__int__ContainsKey__) )
  {
    return System_Collections_Generic_Dictionary_int__int___get_Item(
             v9,
             servantId,
             (const MethodInfo_2DDCEF4 *)Method_System_Collections_Generic_Dictionary_int__int__get_Item__);
  }
  else
  {
    return defaultFlag;
  }
}


System_Collections_Generic_Dictionary_int__int__o *__fastcall BattleData__GetSavedServantCommonFlagDict(
        const MethodInfo *method)
{
  __int64 v1; // x1
  __int64 v2; // x2
  __int64 v3; // x3
  __int64 v4; // x4
  __int64 v5; // x1
  __int64 v6; // x1
  __int64 v7; // x1
  __int64 v8; // x1
  __int64 v9; // x1
  System_Collections_Generic_Dictionary_int__int__o *v10; // x19
  System_String_o *String; // x20
  __int64 v12; // x2
  __int64 v13; // x0
  __int64 v14; // x2
  System_String_array *v15; // x1
  int max_length; // w8
  System_String_array *v17; // x20
  unsigned int v18; // w23
  System_String_o *v19; // x21
  System_String_array *v20; // x21
  int32_t result[2]; // [xsp+8h] [xbp-38h] BYREF

  if ( (byte_40F6ABD & 1) == 0 )
  {
    sub_B16FFC(&char___TypeInfo, v1);
    sub_B16FFC(&Method_System_Collections_Generic_Dictionary_int__int__Add__, v5);
    sub_B16FFC(&Method_System_Collections_Generic_Dictionary_int__int___ctor__, v6);
    sub_B16FFC(&System_Collections_Generic_Dictionary_int__int__TypeInfo, v7);
    sub_B16FFC(&EncryptedPlayerPrefs_TypeInfo, v8);
    sub_B16FFC(&StringLiteral_2522/*"BATTLE_SVT_COMMON_FLAG"*/, v9);
    byte_40F6ABD = 1;
  }
  *(_QWORD *)result = 0LL;
  v10 = (System_Collections_Generic_Dictionary_int__int__o *)sub_B170CC(
                                                               System_Collections_Generic_Dictionary_int__int__TypeInfo,
                                                               v1,
                                                               v2,
                                                               v3,
                                                               v4);
  System_Collections_Generic_Dictionary_int__int____ctor(
    v10,
    (const MethodInfo_2DDC410 *)Method_System_Collections_Generic_Dictionary_int__int___ctor__);
  if ( (BYTE3(EncryptedPlayerPrefs_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0
    && !EncryptedPlayerPrefs_TypeInfo->_2.cctor_finished )
  {
    j_il2cpp_runtime_class_init_0(EncryptedPlayerPrefs_TypeInfo);
  }
  String = EncryptedPlayerPrefs__GetString((System_String_o *)StringLiteral_2522/*"BATTLE_SVT_COMMON_FLAG"*/, 0LL);
  v13 = sub_B17014(char___TypeInfo, 1LL, v12);
  if ( !v13 )
    goto LABEL_26;
  v15 = (System_String_array *)v13;
  if ( !*(_DWORD *)(v13 + 24) )
    goto LABEL_25;
  *(_WORD *)(v13 + 32) = 44;
  if ( !String || (v13 = (__int64)System_String__Split(String, (System_Char_array *)v13, 0LL)) == 0 )
LABEL_26:
    sub_B170D4();
  max_length = *(_DWORD *)(v13 + 24);
  v17 = (System_String_array *)v13;
  if ( max_length >= 1 )
  {
    v18 = 0;
    while ( v18 < max_length )
    {
      v19 = v17->m_Items[v18];
      v13 = sub_B17014(char___TypeInfo, 1LL, v14);
      if ( !v13 )
        goto LABEL_26;
      v15 = (System_String_array *)v13;
      if ( !*(_DWORD *)(v13 + 24) )
        break;
      *(_WORD *)(v13 + 32) = 58;
      if ( !v19 )
        goto LABEL_26;
      v13 = (__int64)System_String__Split(v19, (System_Char_array *)v13, 0LL);
      if ( !v13 )
        goto LABEL_26;
      v20 = (System_String_array *)v13;
      if ( !*(_DWORD *)(v13 + 24) )
        break;
      v13 = System_Int32__TryParse(*(System_String_o **)(v13 + 32), &result[1], 0LL);
      if ( (v13 & 1) != 0 )
      {
        if ( v20->max_length <= 1 )
          break;
        v13 = System_Int32__TryParse(v20->m_Items[1], result, 0LL);
        if ( (v13 & 1) != 0 )
        {
          if ( !v10 )
            goto LABEL_26;
          System_Collections_Generic_Dictionary_int__int___Add(
            v10,
            result[1],
            result[0],
            (const MethodInfo_2DDCFB4 *)Method_System_Collections_Generic_Dictionary_int__int__Add__);
        }
      }
      max_length = v17->max_length;
      if ( (int)++v18 >= max_length )
        return v10;
    }
LABEL_25:
    sub_B17100(v13, v15, v14);
    sub_B170A0();
  }
  return v10;
}


System_Int32_array *__fastcall BattleData__GetShadowOffSvtIds(BattleData_o *this, const MethodInfo *method)
{
  QuestPhaseEntity_o *questphase_ent; // x0

  questphase_ent = this->fields.questphase_ent;
  if ( !questphase_ent )
    sub_B170D4();
  return QuestPhaseEntity__GetShadowOffSvtIds(questphase_ent, 0LL);
}


// local variable allocation has failed, the output may be wrong!
SubBgmPlayArgs_array *__fastcall BattleData__GetSubBgmPlayArgsArray(
        BattleData_o *this,
        int32_t bgId,
        int32_t bgType,
        const MethodInfo *method)
{
  __int64 v7; // x1
  BattleData_o *data; // x0
  StageEntity_o *StageEntity; // x0
  StageEntity_o *v10; // x20
  SubBgmPlayArgs_array *SubBgmPlayArgsArray; // x19
  BattleBgMaster_o *Master_WarQuestSelectionMaster; // x0
  SubBgmPlayArgs_array *v13; // x0
  SubBgmPlayArgs_array *v14; // x21
  int32_t SubBgmsPriority; // w22
  BattleBgEntity_o *entity; // [xsp+8h] [xbp-28h] BYREF

  if ( (byte_40F6AC7 & 1) == 0 )
  {
    sub_B16FFC(&Method_DataManager_GetMaster_BattleBgMaster___, *(_QWORD *)&bgId);
    sub_B16FFC(&DataManager_TypeInfo, v7);
    byte_40F6AC7 = 1;
  }
  entity = 0LL;
  data = this->fields.data;
  if ( !data )
    goto LABEL_20;
  StageEntity = BattleData__getStageEntity(data, *(const MethodInfo **)&bgId);
  if ( !StageEntity )
    goto LABEL_20;
  v10 = StageEntity;
  SubBgmPlayArgsArray = StageEntity__GetSubBgmPlayArgsArray(StageEntity, 0LL);
  if ( (BYTE3(DataManager_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0 && !DataManager_TypeInfo->_2.cctor_finished )
    j_il2cpp_runtime_class_init_0(DataManager_TypeInfo);
  Master_WarQuestSelectionMaster = (BattleBgMaster_o *)DataManager__GetMaster_WarQuestSelectionMaster_((const MethodInfo_18C3224 *)Method_DataManager_GetMaster_BattleBgMaster___);
  if ( !Master_WarQuestSelectionMaster )
    goto LABEL_20;
  if ( !BattleBgMaster__TryGetEntity(Master_WarQuestSelectionMaster, &entity, bgId, bgType, 0LL) )
    return SubBgmPlayArgsArray;
  if ( !entity )
    goto LABEL_20;
  v13 = BattleBgEntity__GetSubBgmPlayArgsArray(entity, 0LL);
  v14 = v13;
  if ( v13 && SubBgmPlayArgsArray )
  {
    if ( entity )
    {
      SubBgmsPriority = BattleBgEntity__GetSubBgmsPriority(entity, 0LL);
      if ( SubBgmsPriority > StageEntity__GetSubBgmsPriority(v10, 0LL) )
        return v14;
      return SubBgmPlayArgsArray;
    }
LABEL_20:
    sub_B170D4();
  }
  if ( !SubBgmPlayArgsArray )
    return v13;
  return SubBgmPlayArgsArray;
}


int32_t __fastcall BattleData__GetSubDeckMinDeckIndex(BattleData_o *this, bool isEnemy, const MethodInfo *method)
{
  __int64 v3; // x8
  __int64 v4; // x8

  v3 = 288LL;
  if ( isEnemy )
    v3 = 296LL;
  v4 = *(__int64 *)((char *)&this->klass + v3);
  if ( !v4 )
    sub_B170D4();
  return *(_DWORD *)(v4 + 24);
}


System_Int32_array *__fastcall BattleData__GetSubFieldIndividualityServant(
        BattleData_o *this,
        const MethodInfo *method)
{
  __int64 v2; // x2
  __int64 v3; // x3
  __int64 v4; // x4
  __int64 v6; // x1
  __int64 v7; // x1
  __int64 v8; // x1
  __int64 v9; // x1
  __int64 v10; // x1
  __int64 v11; // x1
  __int64 v12; // x1
  __int64 v13; // x1
  __int64 v14; // x1
  __int64 v15; // x1
  __int64 v16; // x1
  __int64 v17; // x1
  BattleData___c__DisplayClass382_0_o *v18; // x19
  __int64 v19; // x1
  __int64 v20; // x2
  __int64 v21; // x3
  __int64 v22; // x4
  System_Collections_Generic_List_int__o *v23; // x21
  const MethodInfo *v24; // x2
  __int64 v25; // x1
  __int64 v26; // x2
  __int64 v27; // x3
  __int64 v28; // x4
  System_Collections_Generic_IEnumerable_TSource__o *FieldServantList; // x20
  BattleData___c_c *v30; // x8
  struct BattleData___c_StaticFields *static_fields; // x9
  System_Func_WarBoardManager_WarBoardOnboardSkillTarget__bool__o *_9__382_0; // x21
  Il2CppObject *v33; // x22
  struct BattleData___c_StaticFields *v34; // x0
  System_Collections_Generic_IEnumerable_T__o *v35; // x20
  __int64 v36; // x1
  __int64 v37; // x2
  __int64 v38; // x3
  __int64 v39; // x4
  System_Action_DrawLotsDisplayMessage_DisplayedInGroup_SaveData__o *v40; // x21
  System_Collections_Generic_List_int__o *retList; // x0

  if ( (byte_40F6A3A & 1) == 0 )
  {
    sub_B16FFC(&Method_System_Action_BattleServantData___ctor__, method);
    sub_B16FFC(&System_Action_BattleServantData__TypeInfo, v6);
    sub_B16FFC(&Method_BasicHelper_ForEach_BattleServantData___, v7);
    sub_B16FFC(&Method_System_Linq_Enumerable_Where_BattleServantData___, v8);
    sub_B16FFC(&Method_System_Func_BattleServantData__bool___ctor__, v9);
    sub_B16FFC(&System_Func_BattleServantData__bool__TypeInfo, v10);
    sub_B16FFC(&Method_System_Collections_Generic_List_int__ToArray__, v11);
    sub_B16FFC(&Method_System_Collections_Generic_List_int___ctor__, v12);
    sub_B16FFC(&System_Collections_Generic_List_int__TypeInfo, v13);
    sub_B16FFC(&Method_BattleData___c__GetSubFieldIndividualityServant_b__382_0__, v14);
    sub_B16FFC(&Method_BattleData___c__DisplayClass382_0__GetSubFieldIndividualityServant_b__1__, v15);
    sub_B16FFC(&BattleData___c__DisplayClass382_0_TypeInfo, v16);
    sub_B16FFC(&BattleData___c_TypeInfo, v17);
    byte_40F6A3A = 1;
  }
  v18 = (BattleData___c__DisplayClass382_0_o *)sub_B170CC(
                                                 BattleData___c__DisplayClass382_0_TypeInfo,
                                                 method,
                                                 v2,
                                                 v3,
                                                 v4);
  BattleData___c__DisplayClass382_0___ctor(v18, 0LL);
  v23 = (System_Collections_Generic_List_int__o *)sub_B170CC(
                                                    System_Collections_Generic_List_int__TypeInfo,
                                                    v19,
                                                    v20,
                                                    v21,
                                                    v22);
  System_Collections_Generic_List_int____ctor(
    v23,
    (const MethodInfo_2F0F794 *)Method_System_Collections_Generic_List_int___ctor__);
  if ( !v18 )
    goto LABEL_14;
  v18->fields.retList = v23;
  sub_B16F98(&v18->fields, v23);
  FieldServantList = (System_Collections_Generic_IEnumerable_TSource__o *)BattleData__getFieldServantList(this, 0, v24);
  v30 = BattleData___c_TypeInfo;
  if ( (BYTE3(BattleData___c_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0
    && !BattleData___c_TypeInfo->_2.cctor_finished )
  {
    j_il2cpp_runtime_class_init_0(BattleData___c_TypeInfo);
    v30 = BattleData___c_TypeInfo;
  }
  static_fields = v30->static_fields;
  _9__382_0 = (System_Func_WarBoardManager_WarBoardOnboardSkillTarget__bool__o *)static_fields->__9__382_0;
  if ( !_9__382_0 )
  {
    if ( (BYTE3(v30->vtable._0_Equals.methodPtr) & 4) != 0 && !v30->_2.cctor_finished )
    {
      j_il2cpp_runtime_class_init_0(v30);
      static_fields = BattleData___c_TypeInfo->static_fields;
    }
    v33 = (Il2CppObject *)static_fields->__9;
    _9__382_0 = (System_Func_WarBoardManager_WarBoardOnboardSkillTarget__bool__o *)sub_B170CC(
                                                                                     System_Func_BattleServantData__bool__TypeInfo,
                                                                                     v25,
                                                                                     v26,
                                                                                     v27,
                                                                                     v28);
    System_Func_WarBoardManager_WarBoardOnboardSkillTarget__bool____ctor(
      _9__382_0,
      v33,
      Method_BattleData___c__GetSubFieldIndividualityServant_b__382_0__,
      (const MethodInfo_2B6AB40 *)Method_System_Func_BattleServantData__bool___ctor__);
    v34 = BattleData___c_TypeInfo->static_fields;
    v34->__9__382_0 = (struct System_Func_BattleServantData__bool__o *)_9__382_0;
    sub_B16F98(&v34->__9__382_0, _9__382_0);
  }
  v35 = (System_Collections_Generic_IEnumerable_T__o *)System_Linq_Enumerable__Where_WarBoardManager_WarBoardOnboardSkillTarget_(
                                                         FieldServantList,
                                                         (System_Func_TSource__bool__o *)_9__382_0,
                                                         (const MethodInfo_19C8FE8 *)Method_System_Linq_Enumerable_Where_BattleServantData___);
  v40 = (System_Action_DrawLotsDisplayMessage_DisplayedInGroup_SaveData__o *)sub_B170CC(
                                                                               System_Action_BattleServantData__TypeInfo,
                                                                               v36,
                                                                               v37,
                                                                               v38,
                                                                               v39);
  System_Action_DrawLotsDisplayMessage_DisplayedInGroup_SaveData____ctor(
    v40,
    (Il2CppObject *)v18,
    Method_BattleData___c__DisplayClass382_0__GetSubFieldIndividualityServant_b__1__,
    (const MethodInfo_24B7310 *)Method_System_Action_BattleServantData___ctor__);
  BasicHelper__ForEach_DrawLotsDisplayMessage_DisplayedInGroup_SaveData_(
    v35,
    (System_Action_T__o *)v40,
    (const MethodInfo_18B756C *)Method_BasicHelper_ForEach_BattleServantData___);
  retList = v18->fields.retList;
  if ( !retList )
LABEL_14:
    sub_B170D4();
  return System_Collections_Generic_List_int___ToArray(
           retList,
           (const MethodInfo_2F125FC *)Method_System_Collections_Generic_List_int__ToArray__);
}


// local variable allocation has failed, the output may be wrong!
BattleServantData_array *__fastcall BattleData__GetSubServantArray(
        BattleData_o *this,
        bool isEnemy,
        const MethodInfo *method)
{
  __int64 v3; // x3
  __int64 v4; // x4
  __int64 v7; // x1
  __int64 v8; // x1
  __int64 v9; // x1
  __int64 v10; // x1
  __int64 v11; // x1
  __int64 v12; // x1
  __int64 v13; // x1
  __int64 v14; // x1
  __int64 v15; // x1
  __int64 v16; // x8
  BattleData___c_c *v17; // x0
  System_Collections_Generic_List_MaterialBranchRouteManager_MaterialBranchInfo__o *v18; // x19
  struct BattleData___c_StaticFields *static_fields; // x8
  System_Predicate_peRenderTexture_ChangeLayerObject__o *_9__444_0; // x20
  Il2CppObject *v21; // x21
  struct BattleData___c_StaticFields *v22; // x0
  System_Collections_Generic_List_T__o *All; // x0
  __int64 v24; // x1
  __int64 v25; // x2
  __int64 v26; // x3
  __int64 v27; // x4
  BattleData___c_c *v28; // x8
  System_Collections_Generic_IEnumerable_TSource__o *v29; // x19
  struct BattleData___c_StaticFields *v30; // x9
  System_Func_BattleLogicBuff_ReduceHpProcess_BuffInfo__int__o *_9__444_1; // x20
  Il2CppObject *v32; // x21
  struct BattleData___c_StaticFields *v33; // x0
  System_Collections_Generic_IEnumerable_TSource__o *v34; // x0

  if ( (byte_40F6A5A & 1) == 0 )
  {
    sub_B16FFC(&Method_System_Linq_Enumerable_OrderBy_BattleServantData__int___, isEnemy);
    sub_B16FFC(&Method_System_Linq_Enumerable_ToArray_BattleServantData___, v7);
    sub_B16FFC(&Method_System_Func_BattleServantData__int___ctor__, v8);
    sub_B16FFC(&System_Func_BattleServantData__int__TypeInfo, v9);
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleServantData__FindAll__, v10);
    sub_B16FFC(&Method_System_Predicate_BattleServantData___ctor__, v11);
    sub_B16FFC(&System_Predicate_BattleServantData__TypeInfo, v12);
    sub_B16FFC(&Method_BattleData___c__GetSubServantArray_b__444_0__, v13);
    sub_B16FFC(&Method_BattleData___c__GetSubServantArray_b__444_1__, v14);
    sub_B16FFC(&BattleData___c_TypeInfo, v15);
    byte_40F6A5A = 1;
  }
  v16 = 128LL;
  v17 = BattleData___c_TypeInfo;
  if ( isEnemy )
    v16 = 168LL;
  v18 = *(System_Collections_Generic_List_MaterialBranchRouteManager_MaterialBranchInfo__o **)((char *)&this->klass + v16);
  if ( (BYTE3(BattleData___c_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0
    && !BattleData___c_TypeInfo->_2.cctor_finished )
  {
    j_il2cpp_runtime_class_init_0(BattleData___c_TypeInfo);
    v17 = BattleData___c_TypeInfo;
  }
  static_fields = v17->static_fields;
  _9__444_0 = (System_Predicate_peRenderTexture_ChangeLayerObject__o *)static_fields->__9__444_0;
  if ( !_9__444_0 )
  {
    if ( (BYTE3(v17->vtable._0_Equals.methodPtr) & 4) != 0 && !v17->_2.cctor_finished )
    {
      j_il2cpp_runtime_class_init_0(v17);
      static_fields = BattleData___c_TypeInfo->static_fields;
    }
    v21 = (Il2CppObject *)static_fields->__9;
    _9__444_0 = (System_Predicate_peRenderTexture_ChangeLayerObject__o *)sub_B170CC(
                                                                           System_Predicate_BattleServantData__TypeInfo,
                                                                           isEnemy,
                                                                           method,
                                                                           v3,
                                                                           v4);
    System_Predicate_peRenderTexture_ChangeLayerObject____ctor(
      _9__444_0,
      v21,
      Method_BattleData___c__GetSubServantArray_b__444_0__,
      (const MethodInfo_2B0B204 *)Method_System_Predicate_BattleServantData___ctor__);
    v22 = BattleData___c_TypeInfo->static_fields;
    v22->__9__444_0 = (struct System_Predicate_BattleServantData__o *)_9__444_0;
    sub_B16F98(&v22->__9__444_0, _9__444_0);
  }
  if ( !v18 )
    sub_B170D4();
  All = System_Collections_Generic_List_MaterialBranchRouteManager_MaterialBranchInfo___FindAll(
          v18,
          (System_Predicate_T__o *)_9__444_0,
          (const MethodInfo_2F26660 *)Method_System_Collections_Generic_List_BattleServantData__FindAll__);
  v28 = BattleData___c_TypeInfo;
  v29 = (System_Collections_Generic_IEnumerable_TSource__o *)All;
  if ( (BYTE3(BattleData___c_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0
    && !BattleData___c_TypeInfo->_2.cctor_finished )
  {
    j_il2cpp_runtime_class_init_0(BattleData___c_TypeInfo);
    v28 = BattleData___c_TypeInfo;
  }
  v30 = v28->static_fields;
  _9__444_1 = (System_Func_BattleLogicBuff_ReduceHpProcess_BuffInfo__int__o *)v30->__9__444_1;
  if ( !_9__444_1 )
  {
    if ( (BYTE3(v28->vtable._0_Equals.methodPtr) & 4) != 0 && !v28->_2.cctor_finished )
    {
      j_il2cpp_runtime_class_init_0(v28);
      v30 = BattleData___c_TypeInfo->static_fields;
    }
    v32 = (Il2CppObject *)v30->__9;
    _9__444_1 = (System_Func_BattleLogicBuff_ReduceHpProcess_BuffInfo__int__o *)sub_B170CC(
                                                                                  System_Func_BattleServantData__int__TypeInfo,
                                                                                  v24,
                                                                                  v25,
                                                                                  v26,
                                                                                  v27);
    System_Func_BattleLogicBuff_ReduceHpProcess_BuffInfo__int____ctor(
      _9__444_1,
      v32,
      Method_BattleData___c__GetSubServantArray_b__444_1__,
      (const MethodInfo_2B6B6EC *)Method_System_Func_BattleServantData__int___ctor__);
    v33 = BattleData___c_TypeInfo->static_fields;
    v33->__9__444_1 = (struct System_Func_BattleServantData__int__o *)_9__444_1;
    sub_B16F98(&v33->__9__444_1, _9__444_1);
  }
  v34 = (System_Collections_Generic_IEnumerable_TSource__o *)System_Linq_Enumerable__OrderBy_QuestPhaseDetailEntity_BoardInfo__int_(
                                                               v29,
                                                               (System_Func_TSource__TKey__o *)_9__444_1,
                                                               (const MethodInfo_19BD754 *)Method_System_Linq_Enumerable_OrderBy_BattleServantData__int___);
  return (BattleServantData_array *)System_Linq_Enumerable__ToArray_DrawLotsDisplayMessage_DisplayedInGroup_SaveData_(
                                      v34,
                                      (const MethodInfo_19C4BCC *)Method_System_Linq_Enumerable_ToArray_BattleServantData___);
}


// local variable allocation has failed, the output may be wrong!
int32_t __fastcall BattleData__GetSubServantUsableDeckIndex(BattleData_o *this, bool isEnemy, const MethodInfo *method)
{
  __int64 v5; // x1
  __int64 v6; // x1
  __int64 v7; // x1
  __int64 v8; // x1
  __int64 v9; // x1
  __int64 v10; // x2
  __int64 v11; // x3
  __int64 v12; // x4
  System_Collections_Generic_IEnumerable_TSource__o *SubServantArray; // x21
  BattleData___c_c *v14; // x8
  struct BattleData___c_StaticFields *static_fields; // x9
  System_Func_BattleLogicBuff_ReduceHpProcess_BuffInfo__int__o *_9__323_0; // x22
  Il2CppObject *v17; // x23
  struct BattleData___c_StaticFields *v18; // x0
  int32_t v19; // w0
  __int64 v20; // x8
  __int64 v21; // x8

  if ( (byte_40F6A1E & 1) == 0 )
  {
    sub_B16FFC(&Method_System_Linq_Enumerable_Max_BattleServantData___, isEnemy);
    sub_B16FFC(&Method_System_Func_BattleServantData__int___ctor__, v5);
    sub_B16FFC(&System_Func_BattleServantData__int__TypeInfo, v6);
    sub_B16FFC(&Method_BattleData___c__GetSubServantUsableDeckIndex_b__323_0__, v7);
    sub_B16FFC(&BattleData___c_TypeInfo, v8);
    byte_40F6A1E = 1;
  }
  SubServantArray = (System_Collections_Generic_IEnumerable_TSource__o *)BattleData__GetSubServantArray(
                                                                           this,
                                                                           isEnemy,
                                                                           method);
  v14 = BattleData___c_TypeInfo;
  if ( (BYTE3(BattleData___c_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0
    && !BattleData___c_TypeInfo->_2.cctor_finished )
  {
    j_il2cpp_runtime_class_init_0(BattleData___c_TypeInfo);
    v14 = BattleData___c_TypeInfo;
  }
  static_fields = v14->static_fields;
  _9__323_0 = (System_Func_BattleLogicBuff_ReduceHpProcess_BuffInfo__int__o *)static_fields->__9__323_0;
  if ( !_9__323_0 )
  {
    if ( (BYTE3(v14->vtable._0_Equals.methodPtr) & 4) != 0 && !v14->_2.cctor_finished )
    {
      j_il2cpp_runtime_class_init_0(v14);
      static_fields = BattleData___c_TypeInfo->static_fields;
    }
    v17 = (Il2CppObject *)static_fields->__9;
    _9__323_0 = (System_Func_BattleLogicBuff_ReduceHpProcess_BuffInfo__int__o *)sub_B170CC(
                                                                                  System_Func_BattleServantData__int__TypeInfo,
                                                                                  v9,
                                                                                  v10,
                                                                                  v11,
                                                                                  v12);
    System_Func_BattleLogicBuff_ReduceHpProcess_BuffInfo__int____ctor(
      _9__323_0,
      v17,
      Method_BattleData___c__GetSubServantUsableDeckIndex_b__323_0__,
      (const MethodInfo_2B6B6EC *)Method_System_Func_BattleServantData__int___ctor__);
    v18 = BattleData___c_TypeInfo->static_fields;
    v18->__9__323_0 = (struct System_Func_BattleServantData__int__o *)_9__323_0;
    sub_B16F98(&v18->__9__323_0, _9__323_0);
  }
  v19 = System_Linq_Enumerable__Max_BattleBuffData_BuffData_(
          SubServantArray,
          (System_Func_TSource__int__o *)_9__323_0,
          (const MethodInfo_19BCDAC *)Method_System_Linq_Enumerable_Max_BattleServantData___);
  v20 = 288LL;
  if ( isEnemy )
    v20 = 296LL;
  v21 = *(__int64 *)((char *)&this->klass + v20);
  if ( !v21 )
    sub_B170D4();
  return UnityEngine_Mathf__Max_40727628(v19 + 1, *(_DWORD *)(v21 + 24), 0LL);
}


int32_t __fastcall BattleData__GetTargetId(BattleData_o *this, const MethodInfo *method)
{
  return this->fields.globaltargetId;
}


System_Collections_Generic_HashSet_int__o *__fastcall BattleData__GetVoiceOffPlayerSvtIdHash(
        BattleData_o *this,
        const MethodInfo *method)
{
  __int64 v2; // x2
  __int64 v3; // x3
  __int64 v4; // x4
  __int64 v6; // x1
  __int64 v7; // x1
  __int64 v8; // x1
  System_Collections_Generic_HashSet_int__o *result; // x0
  System_Collections_Generic_HashSet_int__o **p_voiceOffSvtIdHash; // x19
  System_Collections_Generic_HashSet_int__o *v11; // x21
  QuestPhaseEntity_o *questphase_ent; // x0
  System_Int32_array *VoiceOffPlayerSvtIdArray; // x0
  __int64 v14; // x1
  __int64 v15; // x2
  __int64 v16; // x8
  System_Int32_array *v17; // x20
  unsigned __int64 v18; // x22
  int32_t v19; // w21

  if ( (byte_40F6ACD & 1) == 0 )
  {
    sub_B16FFC(&Method_System_Collections_Generic_HashSet_int__Add__, method);
    sub_B16FFC(&Method_System_Collections_Generic_HashSet_int__Contains__, v6);
    sub_B16FFC(&Method_System_Collections_Generic_HashSet_int___ctor___66713944, v7);
    sub_B16FFC(&System_Collections_Generic_HashSet_int__TypeInfo, v8);
    byte_40F6ACD = 1;
  }
  result = this->fields.voiceOffSvtIdHash;
  if ( !result )
  {
    p_voiceOffSvtIdHash = &this->fields.voiceOffSvtIdHash;
    v11 = (System_Collections_Generic_HashSet_int__o *)sub_B170CC(
                                                         System_Collections_Generic_HashSet_int__TypeInfo,
                                                         method,
                                                         v2,
                                                         v3,
                                                         v4);
    System_Collections_Generic_HashSet_int____ctor(
      v11,
      (const MethodInfo_21D7F80 *)Method_System_Collections_Generic_HashSet_int___ctor___66713944);
    this->fields.voiceOffSvtIdHash = v11;
    sub_B16F98(&this->fields.voiceOffSvtIdHash, v11);
    questphase_ent = this->fields.questphase_ent;
    if ( !questphase_ent )
      goto LABEL_16;
    VoiceOffPlayerSvtIdArray = QuestPhaseEntity__GetVoiceOffPlayerSvtIdArray(questphase_ent, 0LL);
    if ( !VoiceOffPlayerSvtIdArray )
      goto LABEL_16;
    v16 = *(_QWORD *)&VoiceOffPlayerSvtIdArray->max_length;
    v17 = VoiceOffPlayerSvtIdArray;
    if ( (int)v16 >= 1 )
    {
      v18 = 0LL;
      while ( 1 )
      {
        if ( v18 >= (unsigned int)v16 )
        {
          sub_B17100(VoiceOffPlayerSvtIdArray, v14, v15);
          sub_B170A0();
        }
        if ( !*p_voiceOffSvtIdHash )
          break;
        v19 = v17->m_Items[v18 + 1];
        VoiceOffPlayerSvtIdArray = (System_Int32_array *)System_Collections_Generic_HashSet_int___Contains(
                                                           *p_voiceOffSvtIdHash,
                                                           v19,
                                                           (const MethodInfo_21D8604 *)Method_System_Collections_Generic_HashSet_int__Contains__);
        if ( ((unsigned __int8)VoiceOffPlayerSvtIdArray & 1) == 0 )
        {
          if ( !*p_voiceOffSvtIdHash )
            break;
          VoiceOffPlayerSvtIdArray = (System_Int32_array *)System_Collections_Generic_HashSet_int___Add(
                                                             *p_voiceOffSvtIdHash,
                                                             v19,
                                                             (const MethodInfo_21D915C *)Method_System_Collections_Generic_HashSet_int__Add__);
        }
        LODWORD(v16) = v17->max_length;
        if ( (__int64)++v18 >= (int)v16 )
          return *p_voiceOffSvtIdHash;
      }
LABEL_16:
      sub_B170D4();
    }
    return *p_voiceOffSvtIdHash;
  }
  return result;
}


// local variable allocation has failed, the output may be wrong!
void __fastcall BattleData__InitCriticalPoint(BattleData_o *this, int32_t critical, const MethodInfo *method)
{
  int32_t criticalstars; // w21

  if ( (byte_40F6A3B & 1) == 0 )
  {
    sub_B16FFC(&System_Math_TypeInfo, *(_QWORD *)&critical);
    byte_40F6A3B = 1;
  }
  criticalstars = this->fields.criticalstars;
  if ( (BYTE3(System_Math_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0 && !System_Math_TypeInfo->_2.cctor_finished )
    j_il2cpp_runtime_class_init_0(System_Math_TypeInfo);
  this->fields.criticalstars = System_Math__Min_44418752(99, criticalstars + critical, 0LL);
}


void __fastcall BattleData__InitGender(BattleData_o *this, bool change, const MethodInfo *method)
{
  UserGameEntity_o *SelfUserGame; // x0
  int32_t genderType; // w8
  UserGameEntity_o *v7; // x0

  SelfUserGame = UserGameMaster__getSelfUserGame(0LL);
  if ( !SelfUserGame )
    goto LABEL_10;
  genderType = SelfUserGame->fields.genderType;
  if ( !change )
    goto LABEL_8;
  if ( genderType == 1 )
  {
    genderType = 2;
    goto LABEL_8;
  }
  v7 = UserGameMaster__getSelfUserGame(0LL);
  if ( !v7 )
LABEL_10:
    sub_B170D4();
  if ( v7->fields.genderType != 2 )
    return;
  genderType = 1;
LABEL_8:
  this->fields.battleGenderType = genderType;
}


void __fastcall BattleData__InitPlayerDataList(BattleData_o *this, DeckData_o *myDeck, const MethodInfo *method)
{
  __int64 v5; // x1
  __int64 v6; // x1
  __int64 v7; // x1
  System_Collections_Generic_List_commandAssistData__o *LotteryCommandAssistInfo; // x20
  __int64 v9; // x1
  __int64 v10; // x2
  __int64 v11; // x3
  __int64 v12; // x4
  System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData__o *v13; // x23
  System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData__o **p_player_datalist; // x21
  __int64 v15; // x0
  __int64 v16; // x1
  __int64 v17; // x2
  __int64 v18; // x3
  __int64 v19; // x4
  struct BattleDeckServantData_array *svts; // x25
  int max_length; // w8
  int i; // w26
  BattleDeckServantData_o *v23; // x23
  int32_t id; // w28
  BattleServantData_o *v25; // x22
  struct BattleEntity_o *battle_ent; // x24
  int32_t FollowerType; // w0
  struct BaseBattleEvent_o *battleEvent; // x0
  il2cpp_array_size_t v29; // w24
  struct System_Int32_array *p_entryid; // x8

  if ( (byte_40F6AD1 & 1) == 0 )
  {
    sub_B16FFC(&BattleServantData_TypeInfo, myDeck);
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleServantData__Add__, v5);
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleServantData___ctor__, v6);
    sub_B16FFC(&System_Collections_Generic_List_BattleServantData__TypeInfo, v7);
    byte_40F6AD1 = 1;
  }
  LotteryCommandAssistInfo = BattleData__CreateLotteryCommandAssistInfo(this, myDeck, method);
  v13 = (System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData__o *)sub_B170CC(
                                                                                                  System_Collections_Generic_List_BattleServantData__TypeInfo,
                                                                                                  v9,
                                                                                                  v10,
                                                                                                  v11,
                                                                                                  v12);
  System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData____ctor(
    v13,
    (const MethodInfo_2F25014 *)Method_System_Collections_Generic_List_BattleServantData___ctor__);
  p_player_datalist = (System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData__o **)&this->fields.player_datalist;
  this->fields.player_datalist = (struct System_Collections_Generic_List_BattleServantData__o *)v13;
  v15 = sub_B16F98(&this->fields.player_datalist, v13);
  if ( !myDeck || (svts = myDeck->fields.svts) == 0LL )
LABEL_19:
    sub_B170D4();
  max_length = svts->max_length;
  if ( max_length >= 1 )
  {
    for ( i = 0; i < max_length; ++i )
    {
      if ( i >= (unsigned int)max_length )
      {
LABEL_20:
        sub_B17100(v15, v16, v17);
        sub_B170A0();
      }
      v23 = svts->m_Items[i];
      if ( !v23 )
        goto LABEL_19;
      id = v23->fields.id;
      v25 = (BattleServantData_o *)sub_B170CC(BattleServantData_TypeInfo, v16, v17, v18, v19);
      BattleServantData___ctor(v25, 0LL);
      battle_ent = this->fields.battle_ent;
      if ( !battle_ent )
        goto LABEL_19;
      FollowerType = BattleDeckServantData__GetFollowerType(v23, battle_ent->fields.followerType, 0LL);
      if ( !v25 )
        goto LABEL_19;
      BattleServantData__setServantData(v25, v23, battle_ent, FollowerType, 0LL, LotteryCommandAssistInfo, 0LL);
      battleEvent = this->fields.battleEvent;
      if ( !battleEvent )
        goto LABEL_19;
      v29 = id - 1;
      v15 = ((__int64 (__fastcall *)(struct BaseBattleEvent_o *, BattleServantData_o *, Il2CppMethodPointer))battleEvent->klass->vtable._11_InitServantDataPrevAdd.method)(
              battleEvent,
              v25,
              battleEvent->klass->vtable._12_InitPlayerMasterInfo.methodPtr);
      if ( id - 1 <= 2 )
      {
        p_entryid = this->fields.p_entryid;
        if ( !p_entryid )
          goto LABEL_19;
        if ( v29 >= p_entryid->max_length )
          goto LABEL_20;
        p_entryid->m_Items[v29 + 1] = v23->fields.uniqueId;
        v25->fields.isEntry = 1;
        v25->fields.flgEntryFunction = 1;
      }
      if ( !*p_player_datalist )
        goto LABEL_19;
      System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData___Add(
        *p_player_datalist,
        (EventMissionProgressRequest_Argument_ProgressData_o *)v25,
        (const MethodInfo_2F25CD8 *)Method_System_Collections_Generic_List_BattleServantData__Add__);
      max_length = svts->max_length;
    }
  }
}


void __fastcall BattleData__Initialize(BattleData_o *this, const MethodInfo *method)
{
  __int64 v3; // x1
  __int64 v4; // x1
  __int64 v5; // x1
  __int64 v6; // x1
  __int64 v7; // x1
  __int64 v8; // x1
  __int64 v9; // x1
  __int64 v10; // x1
  __int64 v11; // x1
  __int64 v12; // x1
  __int64 v13; // x1
  __int64 v14; // x1
  __int64 v15; // x1
  __int64 v16; // x1
  __int64 v17; // x1
  __int64 v18; // x1
  __int64 v19; // x1
  __int64 v20; // x1
  __int64 v21; // x1
  __int64 v22; // x1
  __int64 v23; // x1
  __int64 v24; // x1
  __int64 v25; // x1
  __int64 v26; // x1
  __int64 v27; // x1
  __int64 v28; // x1
  __int64 v29; // x1
  __int64 v30; // x1
  __int64 v31; // x1
  __int64 v32; // x1
  UnityEngine_Object_o *fsm; // x20
  PlayMakerFSM_o *v34; // x0
  HutongGames_PlayMaker_Fsm_o *v35; // x0
  HutongGames_PlayMaker_FsmGameObject_o *FsmGameObject; // x0
  struct BattlePerformance_o *perf; // x8
  HutongGames_PlayMaker_FsmGameObject_o *v38; // x20
  UnityEngine_Component_o *commandPerf; // x0
  UnityEngine_GameObject_o *gameObject; // x0
  PlayMakerFSM_o *v41; // x0
  HutongGames_PlayMaker_Fsm_o *v42; // x0
  HutongGames_PlayMaker_FsmGameObject_o *v43; // x0
  HutongGames_PlayMaker_FsmGameObject_o *v44; // x20
  UnityEngine_GameObject_o *v45; // x0
  PlayMakerFSM_o *v46; // x0
  HutongGames_PlayMaker_Fsm_o *v47; // x0
  HutongGames_PlayMaker_FsmGameObject_o *v48; // x0
  HutongGames_PlayMaker_FsmGameObject_o *v49; // x20
  UnityEngine_GameObject_o *v50; // x0
  PlayMakerFSM_o *v51; // x0
  HutongGames_PlayMaker_Fsm_o *v52; // x0
  HutongGames_PlayMaker_FsmGameObject_o *v53; // x0
  HutongGames_PlayMaker_FsmGameObject_o *v54; // x20
  UnityEngine_GameObject_o *v55; // x0
  PlayMakerFSM_o *v56; // x0
  HutongGames_PlayMaker_Fsm_o *v57; // x0
  HutongGames_PlayMaker_FsmGameObject_o *v58; // x0
  struct BattlePerformance_o *v59; // x8
  HutongGames_PlayMaker_FsmGameObject_o *v60; // x20
  UnityEngine_Component_o *statusPerf; // x0
  UnityEngine_GameObject_o *v62; // x0
  System_Collections_Generic_List_int__o *lockTargetIdList; // x0
  __int64 v64; // x1
  __int64 v65; // x2
  __int64 v66; // x3
  __int64 v67; // x4
  System_Collections_Generic_Dictionary_XmlQualifiedName__XmlSchemaObject__o *v68; // x20
  __int64 v69; // x1
  __int64 v70; // x2
  __int64 v71; // x3
  __int64 v72; // x4
  System_Collections_Generic_HashSet_WarBoardAIRoute_RouteData__o *v73; // x20
  __int64 v74; // x1
  __int64 v75; // x2
  __int64 v76; // x3
  __int64 v77; // x4
  UseSkillEachTurn_o *v78; // x20
  __int64 v79; // x1
  __int64 v80; // x2
  __int64 v81; // x3
  __int64 v82; // x4
  ChangeBattlePhaseNotify_o *v83; // x20
  __int64 v84; // x1
  __int64 v85; // x2
  __int64 v86; // x3
  __int64 v87; // x4
  System_Collections_Generic_Dictionary_int__int__o *v88; // x20
  __int64 v89; // x1
  __int64 v90; // x2
  __int64 v91; // x3
  __int64 v92; // x4
  DrawLotsDisplayMessage_o *v93; // x20
  __int64 v94; // x1
  __int64 v95; // x2
  __int64 v96; // x3
  __int64 v97; // x4
  System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData__o *v98; // x20
  __int64 v99; // x1
  __int64 v100; // x2
  __int64 v101; // x3
  __int64 v102; // x4
  System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData__o *v103; // x20
  __int64 v104; // x1
  __int64 v105; // x2
  __int64 v106; // x3
  __int64 v107; // x4
  System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData__o *v108; // x20
  __int64 v109; // x2
  struct System_Int32_array *v110; // x0
  struct System_Int32_array **p_p_entryid; // x20
  __int64 v112; // x0
  __int64 v113; // x1
  __int64 v114; // x2
  struct System_Int32_array *p_entryid; // x9
  unsigned __int64 v116; // x8
  unsigned __int64 max_length; // x11
  struct System_Int32_array *v118; // x0
  struct System_Int32_array **p_e_entryid; // x20
  __int64 v120; // x3
  __int64 v121; // x4
  struct System_Int32_array *e_entryid; // x9
  unsigned __int64 v123; // x8
  unsigned __int64 v124; // x11
  System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData__o *v125; // x20
  __int64 v126; // x1
  __int64 v127; // x2
  __int64 v128; // x3
  __int64 v129; // x4
  System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData__o *v130; // x20
  __int64 v131; // x2
  struct BattleCommandData_array *v132; // x0
  __int64 v133; // x2
  struct BattleCommandData_array *v134; // x0
  __int64 v135; // x1
  __int64 v136; // x2
  __int64 v137; // x3
  __int64 v138; // x4
  System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData__o *v139; // x20
  PlayerServantNoblePhantasmUsageData_o *playerServantNoblePhantasmUsageData; // x0
  const MethodInfo *v141; // x1
  const MethodInfo *v142; // x1
  const MethodInfo *v143; // x1
  const MethodInfo *v144; // x1
  const MethodInfo *v145; // x1
  __int64 v146; // x1
  __int64 v147; // x2
  __int64 v148; // x3
  __int64 v149; // x4
  BattleFieldEnvironmentData_o *v150; // x20
  __int64 v151; // x1
  __int64 v152; // x2
  __int64 v153; // x3
  __int64 v154; // x4
  System_Collections_Generic_List_int__o *v155; // x20

  if ( (byte_40F6A0B & 1) == 0 )
  {
    sub_B16FFC(&BattleCommandData___TypeInfo, method);
    sub_B16FFC(&BattleFieldEnvironmentData_TypeInfo, v3);
    sub_B16FFC(&ChangeBattlePhaseNotify_TypeInfo, v4);
    sub_B16FFC(&Method_System_Collections_Generic_Dictionary_string__object___ctor__, v5);
    sub_B16FFC(&Method_System_Collections_Generic_Dictionary_int__int___ctor__, v6);
    sub_B16FFC(&System_Collections_Generic_Dictionary_int__int__TypeInfo, v7);
    sub_B16FFC(&System_Collections_Generic_Dictionary_string__object__TypeInfo, v8);
    sub_B16FFC(&DrawLotsDisplayMessage_TypeInfo, v9);
    sub_B16FFC(&Method_System_Collections_Generic_HashSet_string___ctor__, v10);
    sub_B16FFC(&System_Collections_Generic_HashSet_string__TypeInfo, v11);
    sub_B16FFC(&int___TypeInfo, v12);
    sub_B16FFC(&Method_System_Collections_Generic_List_int__Clear__, v13);
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleDropItem___ctor__, v14);
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleSkillInfoData___ctor__, v15);
    sub_B16FFC(&Method_System_Collections_Generic_List_int___ctor__, v16);
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleServantData___ctor__, v17);
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleData_CommandHistory___ctor__, v18);
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleBoostItemInfoData___ctor__, v19);
    sub_B16FFC(&System_Collections_Generic_List_int__TypeInfo, v20);
    sub_B16FFC(&System_Collections_Generic_List_BattleServantData__TypeInfo, v21);
    sub_B16FFC(&System_Collections_Generic_List_BattleData_CommandHistory__TypeInfo, v22);
    sub_B16FFC(&System_Collections_Generic_List_BattleSkillInfoData__TypeInfo, v23);
    sub_B16FFC(&System_Collections_Generic_List_BattleDropItem__TypeInfo, v24);
    sub_B16FFC(&System_Collections_Generic_List_BattleBoostItemInfoData__TypeInfo, v25);
    sub_B16FFC(&UnityEngine_Object_TypeInfo, v26);
    sub_B16FFC(&UseSkillEachTurn_TypeInfo, v27);
    sub_B16FFC(&StringLiteral_4149/*"CommandFSM"*/, v28);
    sub_B16FFC(&StringLiteral_11492/*"RootFSM"*/, v29);
    sub_B16FFC(&StringLiteral_14620/*"UIFSM"*/, v30);
    sub_B16FFC(&StringLiteral_8551/*"Logic"*/, v31);
    sub_B16FFC(&StringLiteral_10602/*"Performance"*/, v32);
    byte_40F6A0B = 1;
  }
  fsm = (UnityEngine_Object_o *)this->fields.fsm;
  if ( (BYTE3(UnityEngine_Object_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0
    && !UnityEngine_Object_TypeInfo->_2.cctor_finished )
  {
    j_il2cpp_runtime_class_init_0(UnityEngine_Object_TypeInfo);
  }
  if ( UnityEngine_Object__op_Inequality(fsm, 0LL, 0LL) )
  {
    v34 = this->fields.fsm;
    if ( !v34 )
      goto LABEL_45;
    v35 = PlayMakerFSM__get_Fsm(v34, 0LL);
    if ( !v35 )
      goto LABEL_45;
    FsmGameObject = HutongGames_PlayMaker_Fsm__GetFsmGameObject(v35, (System_String_o *)StringLiteral_4149/*"CommandFSM"*/, 0LL);
    perf = this->fields.perf;
    if ( !perf )
      goto LABEL_45;
    v38 = FsmGameObject;
    commandPerf = (UnityEngine_Component_o *)perf->fields.commandPerf;
    if ( !commandPerf )
      goto LABEL_45;
    gameObject = UnityEngine_Component__get_gameObject(commandPerf, 0LL);
    if ( !v38 )
      goto LABEL_45;
    HutongGames_PlayMaker_FsmGameObject__set_Value(v38, gameObject, 0LL);
    v41 = this->fields.fsm;
    if ( !v41 )
      goto LABEL_45;
    v42 = PlayMakerFSM__get_Fsm(v41, 0LL);
    if ( !v42 )
      goto LABEL_45;
    v43 = HutongGames_PlayMaker_Fsm__GetFsmGameObject(v42, (System_String_o *)StringLiteral_8551/*"Logic"*/, 0LL);
    if ( !this->fields.logic )
      goto LABEL_45;
    v44 = v43;
    v45 = UnityEngine_Component__get_gameObject((UnityEngine_Component_o *)this->fields.logic, 0LL);
    if ( !v44 )
      goto LABEL_45;
    HutongGames_PlayMaker_FsmGameObject__set_Value(v44, v45, 0LL);
    v46 = this->fields.fsm;
    if ( !v46 )
      goto LABEL_45;
    v47 = PlayMakerFSM__get_Fsm(v46, 0LL);
    if ( !v47 )
      goto LABEL_45;
    v48 = HutongGames_PlayMaker_Fsm__GetFsmGameObject(v47, (System_String_o *)StringLiteral_10602/*"Performance"*/, 0LL);
    if ( !this->fields.perf )
      goto LABEL_45;
    v49 = v48;
    v50 = UnityEngine_Component__get_gameObject((UnityEngine_Component_o *)this->fields.perf, 0LL);
    if ( !v49 )
      goto LABEL_45;
    HutongGames_PlayMaker_FsmGameObject__set_Value(v49, v50, 0LL);
    v51 = this->fields.fsm;
    if ( !v51 )
      goto LABEL_45;
    v52 = PlayMakerFSM__get_Fsm(v51, 0LL);
    if ( !v52 )
      goto LABEL_45;
    v53 = HutongGames_PlayMaker_Fsm__GetFsmGameObject(v52, (System_String_o *)StringLiteral_11492/*"RootFSM"*/, 0LL);
    if ( !this->fields.rootfsm )
      goto LABEL_45;
    v54 = v53;
    v55 = UnityEngine_Component__get_gameObject((UnityEngine_Component_o *)this->fields.rootfsm, 0LL);
    if ( !v54 )
      goto LABEL_45;
    HutongGames_PlayMaker_FsmGameObject__set_Value(v54, v55, 0LL);
    v56 = this->fields.fsm;
    if ( !v56 )
      goto LABEL_45;
    v57 = PlayMakerFSM__get_Fsm(v56, 0LL);
    if ( !v57 )
      goto LABEL_45;
    v58 = HutongGames_PlayMaker_Fsm__GetFsmGameObject(v57, (System_String_o *)StringLiteral_14620/*"UIFSM"*/, 0LL);
    v59 = this->fields.perf;
    if ( !v59 )
      goto LABEL_45;
    v60 = v58;
    statusPerf = (UnityEngine_Component_o *)v59->fields.statusPerf;
    if ( !statusPerf )
      goto LABEL_45;
    v62 = UnityEngine_Component__get_gameObject(statusPerf, 0LL);
    if ( !v60 )
      goto LABEL_45;
    HutongGames_PlayMaker_FsmGameObject__set_Value(v60, v62, 0LL);
  }
  *(_QWORD *)&this->fields.wavecount = 0x100000000LL;
  *(_QWORD *)&this->fields.p_maxcommand = 0xFFFFFFFF00000003LL;
  lockTargetIdList = this->fields.lockTargetIdList;
  if ( !lockTargetIdList )
    goto LABEL_45;
  System_Collections_Generic_List_int___Clear(
    lockTargetIdList,
    (const MethodInfo_2F108FC *)Method_System_Collections_Generic_List_int__Clear__);
  this->fields.prevCriticalstars = 0;
  this->fields.countEnemyAttack = 0;
  *(_OWORD *)&this->fields.criticalstars = 0u;
  *(_OWORD *)&this->fields.maxTurnDamageInBattle = 0u;
  v68 = (System_Collections_Generic_Dictionary_XmlQualifiedName__XmlSchemaObject__o *)sub_B170CC(
                                                                                        System_Collections_Generic_Dictionary_string__object__TypeInfo,
                                                                                        v64,
                                                                                        v65,
                                                                                        v66,
                                                                                        v67);
  System_Collections_Generic_Dictionary_XmlQualifiedName__XmlSchemaObject____ctor(
    v68,
    (const MethodInfo_2DA3068 *)Method_System_Collections_Generic_Dictionary_string__object___ctor__);
  this->fields.voicePlayedInfo = (struct System_Collections_Generic_Dictionary_string__object__o *)v68;
  sub_B16F98(&this->fields.voicePlayedInfo, v68);
  v73 = (System_Collections_Generic_HashSet_WarBoardAIRoute_RouteData__o *)sub_B170CC(
                                                                             System_Collections_Generic_HashSet_string__TypeInfo,
                                                                             v69,
                                                                             v70,
                                                                             v71,
                                                                             v72);
  System_Collections_Generic_HashSet_WarBoardAIRoute_RouteData____ctor(
    v73,
    (const MethodInfo_21DE95C *)Method_System_Collections_Generic_HashSet_string___ctor__);
  this->fields.voicePlayedOver64Info = (struct System_Collections_Generic_HashSet_string__o *)v73;
  sub_B16F98(&this->fields.voicePlayedOver64Info, v73);
  this->fields.initturn = 0;
  this->fields.masterSkillUseWaveTurn = -1LL;
  v78 = (UseSkillEachTurn_o *)sub_B170CC(UseSkillEachTurn_TypeInfo, v74, v75, v76, v77);
  UseSkillEachTurn___ctor(v78, 0LL);
  this->fields.useSkillEachTurn = v78;
  sub_B16F98(&this->fields.useSkillEachTurn, v78);
  v83 = (ChangeBattlePhaseNotify_o *)sub_B170CC(ChangeBattlePhaseNotify_TypeInfo, v79, v80, v81, v82);
  ChangeBattlePhaseNotify___ctor(v83, 0LL);
  this->fields.changePhaseNotify = v83;
  sub_B16F98(&this->fields.changePhaseNotify, v83);
  v88 = (System_Collections_Generic_Dictionary_int__int__o *)sub_B170CC(
                                                               System_Collections_Generic_Dictionary_int__int__TypeInfo,
                                                               v84,
                                                               v85,
                                                               v86,
                                                               v87);
  System_Collections_Generic_Dictionary_int__int____ctor(
    v88,
    (const MethodInfo_2DDC410 *)Method_System_Collections_Generic_Dictionary_int__int___ctor__);
  this->fields.chainCountDict = v88;
  sub_B16F98(&this->fields.chainCountDict, v88);
  v93 = (DrawLotsDisplayMessage_o *)sub_B170CC(DrawLotsDisplayMessage_TypeInfo, v89, v90, v91, v92);
  DrawLotsDisplayMessage___ctor(v93, 0LL);
  this->fields._DrawLotsDispMsg_k__BackingField = v93;
  sub_B16F98(&this->fields._DrawLotsDispMsg_k__BackingField, v93);
  v98 = (System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData__o *)sub_B170CC(
                                                                                                  System_Collections_Generic_List_BattleSkillInfoData__TypeInfo,
                                                                                                  v94,
                                                                                                  v95,
                                                                                                  v96,
                                                                                                  v97);
  System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData____ctor(
    v98,
    (const MethodInfo_2F25014 *)Method_System_Collections_Generic_List_BattleSkillInfoData___ctor__);
  this->fields.masterSkillInfo = (struct System_Collections_Generic_List_BattleSkillInfoData__o *)v98;
  sub_B16F98(&this->fields.masterSkillInfo, v98);
  v103 = (System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData__o *)sub_B170CC(
                                                                                                   System_Collections_Generic_List_BattleBoostItemInfoData__TypeInfo,
                                                                                                   v99,
                                                                                                   v100,
                                                                                                   v101,
                                                                                                   v102);
  System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData____ctor(
    v103,
    (const MethodInfo_2F25014 *)Method_System_Collections_Generic_List_BattleBoostItemInfoData___ctor__);
  this->fields.boostSkillInfo = (struct System_Collections_Generic_List_BattleBoostItemInfoData__o *)v103;
  sub_B16F98(&this->fields.boostSkillInfo, v103);
  v108 = (System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData__o *)sub_B170CC(
                                                                                                   System_Collections_Generic_List_BattleSkillInfoData__TypeInfo,
                                                                                                   v104,
                                                                                                   v105,
                                                                                                   v106,
                                                                                                   v107);
  System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData____ctor(
    v108,
    (const MethodInfo_2F25014 *)Method_System_Collections_Generic_List_BattleSkillInfoData___ctor__);
  this->fields.boostInfoList = (struct System_Collections_Generic_List_BattleSkillInfoData__o *)v108;
  sub_B16F98(&this->fields.boostInfoList, v108);
  v110 = (struct System_Int32_array *)sub_B17014(int___TypeInfo, 3LL, v109);
  p_p_entryid = &this->fields.p_entryid;
  this->fields.p_entryid = v110;
  v112 = sub_B16F98(&this->fields.p_entryid, v110);
  p_entryid = this->fields.p_entryid;
  if ( !p_entryid )
    goto LABEL_45;
  v116 = 0LL;
  while ( 1 )
  {
    max_length = p_entryid->max_length;
    if ( (__int64)v116 >= (int)max_length )
      break;
    if ( v116 >= max_length )
    {
LABEL_46:
      sub_B17100(v112, v113, v114);
      sub_B170A0();
    }
    p_entryid->m_Items[v116 + 1] = -1;
    p_entryid = *p_p_entryid;
    ++v116;
    if ( !*p_p_entryid )
      goto LABEL_45;
  }
  v118 = (struct System_Int32_array *)sub_B17014(int___TypeInfo, 3LL, v114);
  p_e_entryid = &this->fields.e_entryid;
  this->fields.e_entryid = v118;
  v112 = sub_B16F98(&this->fields.e_entryid, v118);
  e_entryid = this->fields.e_entryid;
  if ( !e_entryid )
    goto LABEL_45;
  v123 = 0LL;
  while ( 1 )
  {
    v124 = e_entryid->max_length;
    if ( (__int64)v123 >= (int)v124 )
      break;
    if ( v123 >= v124 )
      goto LABEL_46;
    e_entryid->m_Items[v123 + 1] = -1;
    e_entryid = *p_e_entryid;
    ++v123;
    if ( !*p_e_entryid )
      goto LABEL_45;
  }
  this->fields.win_lose = 0;
  v125 = (System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData__o *)sub_B170CC(
                                                                                                   System_Collections_Generic_List_BattleData_CommandHistory__TypeInfo,
                                                                                                   v113,
                                                                                                   v114,
                                                                                                   v120,
                                                                                                   v121);
  System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData____ctor(
    v125,
    (const MethodInfo_2F25014 *)Method_System_Collections_Generic_List_BattleData_CommandHistory___ctor__);
  this->fields.comhistory = (struct System_Collections_Generic_List_BattleData_CommandHistory__o *)v125;
  sub_B16F98(&this->fields.comhistory, v125);
  v130 = (System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData__o *)sub_B170CC(
                                                                                                   System_Collections_Generic_List_BattleDropItem__TypeInfo,
                                                                                                   v126,
                                                                                                   v127,
                                                                                                   v128,
                                                                                                   v129);
  System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData____ctor(
    v130,
    (const MethodInfo_2F25014 *)Method_System_Collections_Generic_List_BattleDropItem___ctor__);
  this->fields.droplist = (struct System_Collections_Generic_List_BattleDropItem__o *)v130;
  sub_B16F98(&this->fields.droplist, v130);
  v132 = (struct BattleCommandData_array *)sub_B17014(BattleCommandData___TypeInfo, 0LL, v131);
  this->fields.p_shcmlist = v132;
  sub_B16F98(&this->fields.p_shcmlist, v132);
  v134 = (struct BattleCommandData_array *)sub_B17014(BattleCommandData___TypeInfo, 0LL, v133);
  this->fields.draw_commandlist = v134;
  sub_B16F98(&this->fields.draw_commandlist, v134);
  v139 = (System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData__o *)sub_B170CC(
                                                                                                   System_Collections_Generic_List_BattleServantData__TypeInfo,
                                                                                                   v135,
                                                                                                   v136,
                                                                                                   v137,
                                                                                                   v138);
  System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData____ctor(
    v139,
    (const MethodInfo_2F25014 *)Method_System_Collections_Generic_List_BattleServantData___ctor__);
  this->fields.enemy_datalist = (struct System_Collections_Generic_List_BattleServantData__o *)v139;
  sub_B16F98(&this->fields.enemy_datalist, v139);
  playerServantNoblePhantasmUsageData = this->fields.playerServantNoblePhantasmUsageData;
  if ( !playerServantNoblePhantasmUsageData )
LABEL_45:
    sub_B170D4();
  PlayerServantNoblePhantasmUsageData__Clear(playerServantNoblePhantasmUsageData, 0LL);
  BattleData__loadSkipSkillConf(this, v141);
  BattleData__loadHighSpeedMode(this, v142);
  BattleData__loadTdConstantVelocity(this, v143);
  BattleData__loadSkipDead(this, v144);
  BattleData__InitializeTemporaryCommandSpell(this, v145);
  this->fields._overwriteBgmData_k__BackingField = 0LL;
  sub_B16F98(&this->fields._overwriteBgmData_k__BackingField, 0LL);
  v150 = (BattleFieldEnvironmentData_o *)sub_B170CC(BattleFieldEnvironmentData_TypeInfo, v146, v147, v148, v149);
  BattleFieldEnvironmentData___ctor(v150, this, 0LL);
  this->fields._FieldEnvData_k__BackingField = v150;
  sub_B16F98(&this->fields._FieldEnvData_k__BackingField, v150);
  v155 = (System_Collections_Generic_List_int__o *)sub_B170CC(
                                                     System_Collections_Generic_List_int__TypeInfo,
                                                     v151,
                                                     v152,
                                                     v153,
                                                     v154);
  System_Collections_Generic_List_int____ctor(
    v155,
    (const MethodInfo_2F0F794 *)Method_System_Collections_Generic_List_int___ctor__);
  this->fields.listQuestRouteId = v155;
  sub_B16F98(&this->fields.listQuestRouteId, v155);
}


void __fastcall BattleData__InitializeForWarBoard(
        BattleData_o *this,
        BattleInfoData_o *battleInfo,
        const MethodInfo *method)
{
  __int64 v5; // x1
  __int64 v6; // x1
  __int64 v7; // x1
  __int64 v8; // x1
  __int64 v9; // x1
  __int64 v10; // x1
  __int64 v11; // x1
  __int64 v12; // x1
  __int64 v13; // x1
  __int64 v14; // x1
  __int64 v15; // x1
  __int64 v16; // x1
  __int64 v17; // x1
  __int64 v18; // x1
  __int64 v19; // x1
  __int64 v20; // x1
  __int64 v21; // x1
  __int64 v22; // x1
  System_Collections_Generic_List_int__o *lockTargetIdList; // x0
  __int64 v24; // x1
  __int64 v25; // x2
  __int64 v26; // x3
  __int64 v27; // x4
  System_Collections_Generic_Dictionary_XmlQualifiedName__XmlSchemaObject__o *v28; // x21
  __int64 v29; // x1
  __int64 v30; // x2
  __int64 v31; // x3
  __int64 v32; // x4
  System_Collections_Generic_HashSet_WarBoardAIRoute_RouteData__o *v33; // x21
  __int64 v34; // x1
  __int64 v35; // x2
  __int64 v36; // x3
  __int64 v37; // x4
  ChangeBattlePhaseNotify_o *v38; // x21
  __int64 v39; // x1
  __int64 v40; // x2
  __int64 v41; // x3
  __int64 v42; // x4
  System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData__o *v43; // x21
  __int64 v44; // x1
  __int64 v45; // x2
  __int64 v46; // x3
  __int64 v47; // x4
  System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData__o *v48; // x21
  __int64 v49; // x1
  __int64 v50; // x2
  __int64 v51; // x3
  __int64 v52; // x4
  System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData__o *v53; // x21
  __int64 v54; // x2
  struct System_Int32_array *v55; // x0
  struct System_Int32_array **p_p_entryid; // x21
  __int64 v57; // x0
  __int64 v58; // x1
  __int64 v59; // x2
  struct System_Int32_array *p_entryid; // x9
  unsigned __int64 v61; // x8
  unsigned __int64 max_length; // x11
  struct System_Int32_array *v63; // x0
  struct System_Int32_array **p_e_entryid; // x21
  __int64 v65; // x3
  __int64 v66; // x4
  struct System_Int32_array *e_entryid; // x9
  unsigned __int64 v68; // x8
  unsigned __int64 v69; // x11
  System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData__o *v70; // x21
  __int64 v71; // x1
  __int64 v72; // x2
  __int64 v73; // x3
  __int64 v74; // x4
  System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData__o *v75; // x21
  __int64 v76; // x2
  struct BattleCommandData_array *v77; // x0
  __int64 v78; // x2
  struct BattleCommandData_array *v79; // x0
  __int64 v80; // x1
  __int64 v81; // x2
  __int64 v82; // x3
  __int64 v83; // x4
  System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData__o *v84; // x21
  PlayerServantNoblePhantasmUsageData_o *playerServantNoblePhantasmUsageData; // x0
  __int64 v86; // x1
  __int64 v87; // x2
  __int64 v88; // x3
  __int64 v89; // x4
  WarboardBattleFieldEnvironmentData_o *v90; // x20

  if ( (byte_40F6A0C & 1) == 0 )
  {
    sub_B16FFC(&BattleCommandData___TypeInfo, battleInfo);
    sub_B16FFC(&ChangeBattlePhaseNotify_TypeInfo, v5);
    sub_B16FFC(&Method_System_Collections_Generic_Dictionary_string__object___ctor__, v6);
    sub_B16FFC(&System_Collections_Generic_Dictionary_string__object__TypeInfo, v7);
    sub_B16FFC(&Method_System_Collections_Generic_HashSet_string___ctor__, v8);
    sub_B16FFC(&System_Collections_Generic_HashSet_string__TypeInfo, v9);
    sub_B16FFC(&int___TypeInfo, v10);
    sub_B16FFC(&Method_System_Collections_Generic_List_int__Clear__, v11);
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleDropItem___ctor__, v12);
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleSkillInfoData___ctor__, v13);
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleServantData___ctor__, v14);
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleData_CommandHistory___ctor__, v15);
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleBoostItemInfoData___ctor__, v16);
    sub_B16FFC(&System_Collections_Generic_List_BattleServantData__TypeInfo, v17);
    sub_B16FFC(&System_Collections_Generic_List_BattleData_CommandHistory__TypeInfo, v18);
    sub_B16FFC(&System_Collections_Generic_List_BattleSkillInfoData__TypeInfo, v19);
    sub_B16FFC(&System_Collections_Generic_List_BattleDropItem__TypeInfo, v20);
    sub_B16FFC(&System_Collections_Generic_List_BattleBoostItemInfoData__TypeInfo, v21);
    sub_B16FFC(&WarboardBattleFieldEnvironmentData_TypeInfo, v22);
    byte_40F6A0C = 1;
  }
  *(_QWORD *)&this->fields.wavecount = 0x100000000LL;
  *(_QWORD *)&this->fields.p_maxcommand = 0xFFFFFFFF00000003LL;
  lockTargetIdList = this->fields.lockTargetIdList;
  if ( !lockTargetIdList )
    goto LABEL_19;
  System_Collections_Generic_List_int___Clear(
    lockTargetIdList,
    (const MethodInfo_2F108FC *)Method_System_Collections_Generic_List_int__Clear__);
  this->fields.criticalstars = 0;
  this->fields.countEnemyAttack = 0;
  this->fields.maxTurnDamageInBattle = 0LL;
  this->fields.totalDamageInTurn = 0LL;
  v28 = (System_Collections_Generic_Dictionary_XmlQualifiedName__XmlSchemaObject__o *)sub_B170CC(
                                                                                        System_Collections_Generic_Dictionary_string__object__TypeInfo,
                                                                                        v24,
                                                                                        v25,
                                                                                        v26,
                                                                                        v27);
  System_Collections_Generic_Dictionary_XmlQualifiedName__XmlSchemaObject____ctor(
    v28,
    (const MethodInfo_2DA3068 *)Method_System_Collections_Generic_Dictionary_string__object___ctor__);
  this->fields.voicePlayedInfo = (struct System_Collections_Generic_Dictionary_string__object__o *)v28;
  sub_B16F98(&this->fields.voicePlayedInfo, v28);
  v33 = (System_Collections_Generic_HashSet_WarBoardAIRoute_RouteData__o *)sub_B170CC(
                                                                             System_Collections_Generic_HashSet_string__TypeInfo,
                                                                             v29,
                                                                             v30,
                                                                             v31,
                                                                             v32);
  System_Collections_Generic_HashSet_WarBoardAIRoute_RouteData____ctor(
    v33,
    (const MethodInfo_21DE95C *)Method_System_Collections_Generic_HashSet_string___ctor__);
  this->fields.voicePlayedOver64Info = (struct System_Collections_Generic_HashSet_string__o *)v33;
  sub_B16F98(&this->fields.voicePlayedOver64Info, v33);
  this->fields.initturn = 0;
  v38 = (ChangeBattlePhaseNotify_o *)sub_B170CC(ChangeBattlePhaseNotify_TypeInfo, v34, v35, v36, v37);
  ChangeBattlePhaseNotify___ctor(v38, 0LL);
  this->fields.changePhaseNotify = v38;
  sub_B16F98(&this->fields.changePhaseNotify, v38);
  v43 = (System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData__o *)sub_B170CC(
                                                                                                  System_Collections_Generic_List_BattleSkillInfoData__TypeInfo,
                                                                                                  v39,
                                                                                                  v40,
                                                                                                  v41,
                                                                                                  v42);
  System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData____ctor(
    v43,
    (const MethodInfo_2F25014 *)Method_System_Collections_Generic_List_BattleSkillInfoData___ctor__);
  this->fields.masterSkillInfo = (struct System_Collections_Generic_List_BattleSkillInfoData__o *)v43;
  sub_B16F98(&this->fields.masterSkillInfo, v43);
  v48 = (System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData__o *)sub_B170CC(
                                                                                                  System_Collections_Generic_List_BattleBoostItemInfoData__TypeInfo,
                                                                                                  v44,
                                                                                                  v45,
                                                                                                  v46,
                                                                                                  v47);
  System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData____ctor(
    v48,
    (const MethodInfo_2F25014 *)Method_System_Collections_Generic_List_BattleBoostItemInfoData___ctor__);
  this->fields.boostSkillInfo = (struct System_Collections_Generic_List_BattleBoostItemInfoData__o *)v48;
  sub_B16F98(&this->fields.boostSkillInfo, v48);
  v53 = (System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData__o *)sub_B170CC(
                                                                                                  System_Collections_Generic_List_BattleSkillInfoData__TypeInfo,
                                                                                                  v49,
                                                                                                  v50,
                                                                                                  v51,
                                                                                                  v52);
  System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData____ctor(
    v53,
    (const MethodInfo_2F25014 *)Method_System_Collections_Generic_List_BattleSkillInfoData___ctor__);
  this->fields.boostInfoList = (struct System_Collections_Generic_List_BattleSkillInfoData__o *)v53;
  sub_B16F98(&this->fields.boostInfoList, v53);
  v55 = (struct System_Int32_array *)sub_B17014(int___TypeInfo, 3LL, v54);
  p_p_entryid = &this->fields.p_entryid;
  this->fields.p_entryid = v55;
  v57 = sub_B16F98(&this->fields.p_entryid, v55);
  p_entryid = this->fields.p_entryid;
  if ( !p_entryid )
    goto LABEL_19;
  v61 = 0LL;
  while ( 1 )
  {
    max_length = p_entryid->max_length;
    if ( (__int64)v61 >= (int)max_length )
      break;
    if ( v61 >= max_length )
    {
LABEL_18:
      sub_B17100(v57, v58, v59);
      sub_B170A0();
    }
    p_entryid->m_Items[v61 + 1] = -1;
    p_entryid = *p_p_entryid;
    ++v61;
    if ( !*p_p_entryid )
      goto LABEL_19;
  }
  v63 = (struct System_Int32_array *)sub_B17014(int___TypeInfo, 3LL, v59);
  p_e_entryid = &this->fields.e_entryid;
  this->fields.e_entryid = v63;
  v57 = sub_B16F98(&this->fields.e_entryid, v63);
  e_entryid = this->fields.e_entryid;
  if ( !e_entryid )
    goto LABEL_19;
  v68 = 0LL;
  while ( 1 )
  {
    v69 = e_entryid->max_length;
    if ( (__int64)v68 >= (int)v69 )
      break;
    if ( v68 >= v69 )
      goto LABEL_18;
    e_entryid->m_Items[v68 + 1] = -1;
    e_entryid = *p_e_entryid;
    ++v68;
    if ( !*p_e_entryid )
      goto LABEL_19;
  }
  this->fields.win_lose = 0;
  v70 = (System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData__o *)sub_B170CC(
                                                                                                  System_Collections_Generic_List_BattleData_CommandHistory__TypeInfo,
                                                                                                  v58,
                                                                                                  v59,
                                                                                                  v65,
                                                                                                  v66);
  System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData____ctor(
    v70,
    (const MethodInfo_2F25014 *)Method_System_Collections_Generic_List_BattleData_CommandHistory___ctor__);
  this->fields.comhistory = (struct System_Collections_Generic_List_BattleData_CommandHistory__o *)v70;
  sub_B16F98(&this->fields.comhistory, v70);
  v75 = (System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData__o *)sub_B170CC(
                                                                                                  System_Collections_Generic_List_BattleDropItem__TypeInfo,
                                                                                                  v71,
                                                                                                  v72,
                                                                                                  v73,
                                                                                                  v74);
  System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData____ctor(
    v75,
    (const MethodInfo_2F25014 *)Method_System_Collections_Generic_List_BattleDropItem___ctor__);
  this->fields.droplist = (struct System_Collections_Generic_List_BattleDropItem__o *)v75;
  sub_B16F98(&this->fields.droplist, v75);
  v77 = (struct BattleCommandData_array *)sub_B17014(BattleCommandData___TypeInfo, 0LL, v76);
  this->fields.p_shcmlist = v77;
  sub_B16F98(&this->fields.p_shcmlist, v77);
  v79 = (struct BattleCommandData_array *)sub_B17014(BattleCommandData___TypeInfo, 0LL, v78);
  this->fields.draw_commandlist = v79;
  sub_B16F98(&this->fields.draw_commandlist, v79);
  v84 = (System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData__o *)sub_B170CC(
                                                                                                  System_Collections_Generic_List_BattleServantData__TypeInfo,
                                                                                                  v80,
                                                                                                  v81,
                                                                                                  v82,
                                                                                                  v83);
  System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData____ctor(
    v84,
    (const MethodInfo_2F25014 *)Method_System_Collections_Generic_List_BattleServantData___ctor__);
  this->fields.enemy_datalist = (struct System_Collections_Generic_List_BattleServantData__o *)v84;
  sub_B16F98(&this->fields.enemy_datalist, v84);
  playerServantNoblePhantasmUsageData = this->fields.playerServantNoblePhantasmUsageData;
  if ( !playerServantNoblePhantasmUsageData )
LABEL_19:
    sub_B170D4();
  PlayerServantNoblePhantasmUsageData__Clear(playerServantNoblePhantasmUsageData, 0LL);
  this->fields.battle_info = battleInfo;
  sub_B16F98(&this->fields.battle_info, battleInfo);
  v90 = (WarboardBattleFieldEnvironmentData_o *)sub_B170CC(
                                                  WarboardBattleFieldEnvironmentData_TypeInfo,
                                                  v86,
                                                  v87,
                                                  v88,
                                                  v89);
  WarboardBattleFieldEnvironmentData___ctor(v90, this, 0LL);
  this->fields._FieldEnvData_k__BackingField = (struct BattleFieldEnvironmentData_o *)v90;
  sub_B16F98(&this->fields._FieldEnvData_k__BackingField, v90);
}


void __fastcall BattleData__InitializeTemporaryCommandSpell(BattleData_o *this, const MethodInfo *method)
{
  __int64 v3; // x1
  __int64 v4; // x1
  BattleEntity_o **p_battle_ent; // x21
  QuestPhaseEntity_o *questphase_ent; // x0
  QuestPhaseEntity_o **p_questphase_ent; // x20
  DataMasterBase_TMaster__TEntity__PKType__o *Master_WarQuestSelectionMaster; // x0
  Il2CppObject *SingleEntity; // x0
  int32_t TemporaryCommandSpell; // w21
  UserGameEntity_o *SelfUserGame; // x0

  if ( (byte_40F6AC4 & 1) == 0 )
  {
    sub_B16FFC(&Method_DataManager_GetMaster_BattleMaster___, method);
    sub_B16FFC(&DataManager_TypeInfo, v3);
    sub_B16FFC(&Method_DataMasterBase_BattleMaster__BattleEntity__long__GetSingleEntity__, v4);
    byte_40F6AC4 = 1;
  }
  p_battle_ent = &this->fields.battle_ent;
  if ( !this->fields.battle_ent
    || (p_questphase_ent = &this->fields.questphase_ent, (questphase_ent = this->fields.questphase_ent) == 0LL) )
  {
    if ( (BYTE3(DataManager_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0 && !DataManager_TypeInfo->_2.cctor_finished )
      j_il2cpp_runtime_class_init_0(DataManager_TypeInfo);
    Master_WarQuestSelectionMaster = (DataMasterBase_TMaster__TEntity__PKType__o *)DataManager__GetMaster_WarQuestSelectionMaster_((const MethodInfo_18C3224 *)Method_DataManager_GetMaster_BattleMaster___);
    if ( !Master_WarQuestSelectionMaster )
      goto LABEL_18;
    SingleEntity = DataMasterBase_object__object__long___GetSingleEntity(
                     Master_WarQuestSelectionMaster,
                     (const MethodInfo_266F674 *)Method_DataMasterBase_BattleMaster__BattleEntity__long__GetSingleEntity__);
    *p_battle_ent = (BattleEntity_o *)SingleEntity;
    sub_B16F98(&this->fields.battle_ent, SingleEntity);
    if ( !*p_battle_ent )
      goto LABEL_18;
    p_questphase_ent = &this->fields.questphase_ent;
    BattleEntity__GetQuestInvolvedEntitys(*p_battle_ent, &this->fields.quest_ent, &this->fields.questphase_ent, 0LL);
    questphase_ent = this->fields.questphase_ent;
    if ( !questphase_ent )
      goto LABEL_18;
  }
  TemporaryCommandSpell = QuestPhaseEntity__GetTemporaryCommandSpell(questphase_ent, 0LL);
  if ( TemporaryCommandSpell == -1 )
  {
    SelfUserGame = UserGameMaster__getSelfUserGame(0LL);
    if ( !SelfUserGame )
      goto LABEL_18;
    TemporaryCommandSpell = UserGameEntity__getCommandSpell(SelfUserGame, 0LL);
  }
  if ( !*p_questphase_ent )
LABEL_18:
    sub_B170D4();
  if ( QuestPhaseEntity__IsUseTemporaryCommandSpell(*p_questphase_ent, 0LL) )
    this->fields.temporarySpell = TemporaryCommandSpell;
}


bool __fastcall BattleData__IsAiNpcID(BattleData_o *this, int32_t id, const MethodInfo *method)
{
  return BattleData__GetAiNpcServantData(this, id, method) != 0LL;
}


// local variable allocation has failed, the output may be wrong!
bool __fastcall BattleData__IsAliveLogic(BattleData_o *this, bool isEnemy, const MethodInfo *method)
{
  __int64 v5; // x1
  __int64 v6; // x8
  __int64 v7; // x20
  __int64 v8; // x8
  __int64 i; // x21
  BattleServantData_o *v10; // x0
  bool v11; // w19
  __int64 v12; // x9

  if ( (byte_40F6A67 & 1) == 0 )
  {
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleServantData__get_Count__, isEnemy);
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleServantData__get_Item__, v5);
    byte_40F6A67 = 1;
  }
  v6 = 128LL;
  if ( isEnemy )
    v6 = 168LL;
  v7 = *(__int64 *)((char *)&this->klass + v6);
  if ( !v7 )
    sub_B170D4();
  LODWORD(v8) = *(_DWORD *)(v7 + 24);
  if ( (int)v8 < 1 )
    return 0;
  for ( i = 4LL; ; ++i )
  {
    if ( i - 4 >= (unsigned __int64)(unsigned int)v8 )
      System_ThrowHelper__ThrowArgumentOutOfRangeException_41329284(0LL);
    v10 = *(BattleServantData_o **)(*(_QWORD *)(v7 + 16) + 8 * i);
    if ( v10 )
    {
      if ( i - 4 >= (unsigned __int64)*(unsigned int *)(v7 + 24) )
        System_ThrowHelper__ThrowArgumentOutOfRangeException_41329284(0LL);
      v11 = 1;
      if ( BattleServantData__isAliveLogic(v10, 1, 0LL) )
        break;
    }
    v8 = *(int *)(v7 + 24);
    v12 = i - 3;
    if ( v12 >= v8 )
      return 0;
  }
  return v11;
}


bool __fastcall BattleData__IsAliveOtherRaidTypeBoss(BattleData_o *this, const MethodInfo *method)
{
  const MethodInfo *v2; // x2
  __int64 v4; // x1
  __int64 v5; // x1
  __int64 v6; // x1
  __int64 v7; // x1
  __int64 v8; // x1
  __int64 v9; // x1
  __int64 v10; // x2
  __int64 v11; // x3
  __int64 v12; // x4
  System_Collections_Generic_IEnumerable_TSource__o *FieldEnemyServantList; // x19
  BattleData___c_c *v14; // x8
  struct BattleData___c_StaticFields *static_fields; // x9
  System_Func_WarBoardManager_WarBoardOnboardSkillTarget__bool__o *_9__577_0; // x20
  Il2CppObject *v17; // x21
  struct BattleData___c_StaticFields *v18; // x0
  System_Collections_Generic_IEnumerable_TSource__o *v19; // x0

  if ( (byte_40F6AA5 & 1) == 0 )
  {
    sub_B16FFC(&Method_System_Linq_Enumerable_Count_BattleServantData___, method);
    sub_B16FFC(&Method_System_Linq_Enumerable_Where_BattleServantData___, v4);
    sub_B16FFC(&Method_System_Func_BattleServantData__bool___ctor__, v5);
    sub_B16FFC(&System_Func_BattleServantData__bool__TypeInfo, v6);
    sub_B16FFC(&Method_BattleData___c__IsAliveOtherRaidTypeBoss_b__577_0__, v7);
    sub_B16FFC(&BattleData___c_TypeInfo, v8);
    byte_40F6AA5 = 1;
  }
  FieldEnemyServantList = (System_Collections_Generic_IEnumerable_TSource__o *)BattleData__getFieldEnemyServantList(
                                                                                 this,
                                                                                 0,
                                                                                 v2);
  v14 = BattleData___c_TypeInfo;
  if ( (BYTE3(BattleData___c_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0
    && !BattleData___c_TypeInfo->_2.cctor_finished )
  {
    j_il2cpp_runtime_class_init_0(BattleData___c_TypeInfo);
    v14 = BattleData___c_TypeInfo;
  }
  static_fields = v14->static_fields;
  _9__577_0 = (System_Func_WarBoardManager_WarBoardOnboardSkillTarget__bool__o *)static_fields->__9__577_0;
  if ( !_9__577_0 )
  {
    if ( (BYTE3(v14->vtable._0_Equals.methodPtr) & 4) != 0 && !v14->_2.cctor_finished )
    {
      j_il2cpp_runtime_class_init_0(v14);
      static_fields = BattleData___c_TypeInfo->static_fields;
    }
    v17 = (Il2CppObject *)static_fields->__9;
    _9__577_0 = (System_Func_WarBoardManager_WarBoardOnboardSkillTarget__bool__o *)sub_B170CC(
                                                                                     System_Func_BattleServantData__bool__TypeInfo,
                                                                                     v9,
                                                                                     v10,
                                                                                     v11,
                                                                                     v12);
    System_Func_WarBoardManager_WarBoardOnboardSkillTarget__bool____ctor(
      _9__577_0,
      v17,
      Method_BattleData___c__IsAliveOtherRaidTypeBoss_b__577_0__,
      (const MethodInfo_2B6AB40 *)Method_System_Func_BattleServantData__bool___ctor__);
    v18 = BattleData___c_TypeInfo->static_fields;
    v18->__9__577_0 = (struct System_Func_BattleServantData__bool__o *)_9__577_0;
    sub_B16F98(&v18->__9__577_0, _9__577_0);
  }
  v19 = System_Linq_Enumerable__Where_WarBoardManager_WarBoardOnboardSkillTarget_(
          FieldEnemyServantList,
          (System_Func_TSource__bool__o *)_9__577_0,
          (const MethodInfo_19C8FE8 *)Method_System_Linq_Enumerable_Where_BattleServantData___);
  return System_Linq_Enumerable__Count_WarBoardSquareIndexData_SaveData_(
           v19,
           (const MethodInfo_18D3CD8 *)Method_System_Linq_Enumerable_Count_BattleServantData___) > 0;
}


bool __fastcall BattleData__IsAliveTarget(BattleData_o *this, int32_t uniqueId, const MethodInfo *method)
{
  BattleServantData_o *ServantData; // x0

  ServantData = BattleData__getServantData(this, uniqueId, method);
  if ( ServantData )
    LOBYTE(ServantData) = BattleServantData__isAlive(ServantData, 0, 0LL);
  return (char)ServantData;
}


bool __fastcall BattleData__IsAllEnemyDeadEachBossType(BattleData_o *this, const MethodInfo *method)
{
  const MethodInfo *v3; // x1

  if ( BattleData__isSuperBossBattle(this, method) )
    return BattleData__isSuperBossDown(this, v3);
  else
    return !BattleData__checkAliveAllEnemy(this, v3);
}


bool __fastcall BattleData__IsBattleStartFadeIn(BattleData_o *this, const MethodInfo *method)
{
  StageEntity_o *StageEntity; // x0

  StageEntity = BattleData__getStageEntity(this, method);
  if ( !StageEntity )
    sub_B170D4();
  return StageEntity__GetFadeType(StageEntity, 0LL) == 1;
}


bool __fastcall BattleData__IsBattleStartFadeOff(BattleData_o *this, const MethodInfo *method)
{
  StageEntity_o *StageEntity; // x0

  StageEntity = BattleData__getStageEntity(this, method);
  if ( !StageEntity )
    sub_B170D4();
  return StageEntity__GetFadeType(StageEntity, 0LL) == 2;
}


bool __fastcall BattleData__IsCalcStar(BattleData_o *this, const MethodInfo *method)
{
  return this->fields.isCalcCritical;
}


bool __fastcall BattleData__IsDeadOkTurn(BattleData_o *this, int32_t uniqueId, const MethodInfo *method)
{
  BattleServantData_o *ServantData; // x0
  BattleServantData_o *v5; // x20
  bool result; // w0

  ServantData = BattleData__getServantData(this, uniqueId, method);
  result = !ServantData
        || (v5 = ServantData, !BattleServantData__isShiftableServant(ServantData, 0LL))
        || !v5->fields.isEnemy
        || this->fields.typeTurn != 2;
  return result;
}


bool __fastcall BattleData__IsDeckNoUserSvt(BattleData_o *this, const MethodInfo *method)
{
  __int64 v3; // x1
  __int64 v4; // x1
  __int64 v5; // x1
  __int64 v6; // x1
  __int64 v7; // x1
  __int64 v8; // x1
  __int64 v9; // x1
  __int64 v10; // x1
  __int64 v11; // x1
  __int64 v12; // x1
  __int64 v13; // x1
  __int64 v14; // x20
  __int64 v15; // x20
  DataManager_o *v16; // x0
  QuestRestrictionInfoMaster_o *MasterData_WarQuestSelectionMaster; // x0
  struct QuestPhaseEntity_o *questphase_ent; // x8
  QuestEntity_o *quest_ent; // x0
  QuestEntity_o *v20; // x0
  __int64 v21; // x20
  __int64 v22; // x20
  DataManager_o *v23; // x0
  QuestRestrictionMaster_o *v24; // x0
  struct QuestPhaseEntity_o *v25; // x8
  RestrictionEntity_array *RestrictionList; // x0
  __int64 v27; // x1
  __int64 v28; // x2
  __int64 v29; // x3
  __int64 v30; // x4
  WellFired_USFGOPlayBgmEventConditional_CondBGM_array *v31; // x20
  BattleData___c_c *v32; // x0
  struct BattleData___c_StaticFields *static_fields; // x8
  System_Func_WarBoardManager_WarBoardOnboardSkillTarget__bool__o *_9__304_0; // x21
  Il2CppObject *v35; // x22
  struct BattleData___c_StaticFields *v36; // x0
  struct System_Collections_Generic_List_BattleServantData__o *player_datalist; // x0
  int v39; // w19
  System_Collections_Generic_List_Enumerator_T__o v40; // [xsp+8h] [xbp-48h] BYREF
  QuestRestrictionInfoEntity_o *entity; // [xsp+28h] [xbp-28h] BYREF

  if ( (byte_40F6A18 & 1) == 0 )
  {
    sub_B16FFC(&Method_BasicHelper_Any_RestrictionEntity___, method);
    sub_B16FFC(&Method_DataManager_GetMasterData_QuestRestrictionInfoMaster___, v3);
    sub_B16FFC(&Method_DataManager_GetMasterData_QuestRestrictionMaster___, v4);
    sub_B16FFC(&Method_System_Collections_Generic_List_Enumerator_BattleServantData__Dispose__, v5);
    sub_B16FFC(&Method_System_Collections_Generic_List_Enumerator_BattleServantData__MoveNext__, v6);
    sub_B16FFC(&Method_System_Collections_Generic_List_Enumerator_BattleServantData__get_Current__, v7);
    sub_B16FFC(&Method_System_Func_RestrictionEntity__bool___ctor__, v8);
    sub_B16FFC(&System_Func_RestrictionEntity__bool__TypeInfo, v9);
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleServantData__GetEnumerator__, v10);
    sub_B16FFC(&Method_SingletonMonoBehaviour_DataManager__getInstance__, v11);
    sub_B16FFC(&Method_BattleData___c__IsDeckNoUserSvt_b__304_0__, v12);
    sub_B16FFC(&BattleData___c_TypeInfo, v13);
    byte_40F6A18 = 1;
  }
  entity = 0LL;
  memset(&v40, 0, sizeof(v40));
  v14 = *((_QWORD *)Method_SingletonMonoBehaviour_DataManager__getInstance__ + 3);
  if ( (*(_BYTE *)(v14 + 306) & 1) == 0 )
    sub_AAFCFC(*((_QWORD *)Method_SingletonMonoBehaviour_DataManager__getInstance__ + 3));
  v15 = **(_QWORD **)(v14 + 192);
  if ( (*(_BYTE *)(v15 + 306) & 1) == 0 )
    sub_AAFCFC(v15);
  v16 = **(DataManager_o ***)(v15 + 184);
  if ( !v16 )
    goto LABEL_47;
  MasterData_WarQuestSelectionMaster = (QuestRestrictionInfoMaster_o *)DataManager__GetMasterData_WarQuestSelectionMaster_(
                                                                         v16,
                                                                         (const MethodInfo_18C3284 *)Method_DataManager_GetMasterData_QuestRestrictionInfoMaster___);
  questphase_ent = this->fields.questphase_ent;
  if ( !questphase_ent || !MasterData_WarQuestSelectionMaster )
    goto LABEL_47;
  if ( QuestRestrictionInfoMaster__TryGetEntity(
         MasterData_WarQuestSelectionMaster,
         &entity,
         questphase_ent->fields.questId,
         questphase_ent->fields.phase,
         0LL) )
  {
    if ( !entity )
      goto LABEL_47;
    if ( !QuestRestrictionInfoEntity__HasFlag(entity, 0x80000LL, 0LL) )
    {
      if ( !entity )
        goto LABEL_47;
      if ( QuestRestrictionInfoEntity__HasFlag(entity, 0x20000000LL, 0LL) )
        return 1;
      goto LABEL_20;
    }
    return 1;
  }
  quest_ent = this->fields.quest_ent;
  if ( !quest_ent )
    goto LABEL_47;
  if ( QuestEntity__HasFlag(quest_ent, 0x80000LL, 0LL) )
    return 1;
  v20 = this->fields.quest_ent;
  if ( !v20 )
    goto LABEL_47;
  if ( QuestEntity__HasFlag(v20, 0x20000000LL, 0LL) )
    return 1;
LABEL_20:
  v21 = *((_QWORD *)Method_SingletonMonoBehaviour_DataManager__getInstance__ + 3);
  if ( (*(_BYTE *)(v21 + 306) & 1) == 0 )
    sub_AAFCFC(*((_QWORD *)Method_SingletonMonoBehaviour_DataManager__getInstance__ + 3));
  v22 = **(_QWORD **)(v21 + 192);
  if ( (*(_BYTE *)(v22 + 306) & 1) == 0 )
    sub_AAFCFC(v22);
  v23 = **(DataManager_o ***)(v22 + 184);
  if ( !v23 )
    goto LABEL_47;
  v24 = (QuestRestrictionMaster_o *)DataManager__GetMasterData_WarQuestSelectionMaster_(
                                      v23,
                                      (const MethodInfo_18C3284 *)Method_DataManager_GetMasterData_QuestRestrictionMaster___);
  v25 = this->fields.questphase_ent;
  if ( !v25 || !v24 )
    goto LABEL_47;
  RestrictionList = QuestRestrictionMaster__getRestrictionList(v24, v25->fields.questId, v25->fields.phase, 0LL);
  if ( RestrictionList )
  {
    v31 = (WellFired_USFGOPlayBgmEventConditional_CondBGM_array *)RestrictionList;
    v32 = BattleData___c_TypeInfo;
    if ( (BYTE3(BattleData___c_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0
      && !BattleData___c_TypeInfo->_2.cctor_finished )
    {
      j_il2cpp_runtime_class_init_0(BattleData___c_TypeInfo);
      v32 = BattleData___c_TypeInfo;
    }
    static_fields = v32->static_fields;
    _9__304_0 = (System_Func_WarBoardManager_WarBoardOnboardSkillTarget__bool__o *)static_fields->__9__304_0;
    if ( !_9__304_0 )
    {
      if ( (BYTE3(v32->vtable._0_Equals.methodPtr) & 4) != 0 && !v32->_2.cctor_finished )
      {
        j_il2cpp_runtime_class_init_0(v32);
        static_fields = BattleData___c_TypeInfo->static_fields;
      }
      v35 = (Il2CppObject *)static_fields->__9;
      _9__304_0 = (System_Func_WarBoardManager_WarBoardOnboardSkillTarget__bool__o *)sub_B170CC(
                                                                                       System_Func_RestrictionEntity__bool__TypeInfo,
                                                                                       v27,
                                                                                       v28,
                                                                                       v29,
                                                                                       v30);
      System_Func_WarBoardManager_WarBoardOnboardSkillTarget__bool____ctor(
        _9__304_0,
        v35,
        Method_BattleData___c__IsDeckNoUserSvt_b__304_0__,
        (const MethodInfo_2B6AB40 *)Method_System_Func_RestrictionEntity__bool___ctor__);
      v36 = BattleData___c_TypeInfo->static_fields;
      v36->__9__304_0 = (struct System_Func_RestrictionEntity__bool__o *)_9__304_0;
      sub_B16F98(&v36->__9__304_0, _9__304_0);
    }
    if ( BasicHelper__Any_USFGOPlayBgmEventConditional_CondBGM_(
           v31,
           (System_Func_T__bool__o *)_9__304_0,
           (const MethodInfo_18B6074 *)Method_BasicHelper_Any_RestrictionEntity___) )
    {
      return 1;
    }
  }
  player_datalist = this->fields.player_datalist;
  if ( !player_datalist )
LABEL_47:
    sub_B170D4();
  System_Collections_Generic_List_BattleLogicBuff_ReduceHpProcess_BuffInfo___GetEnumerator(
    &v40,
    (System_Collections_Generic_List_BattleLogicBuff_ReduceHpProcess_BuffInfo__o *)player_datalist,
    (const MethodInfo_2F26B54 *)Method_System_Collections_Generic_List_BattleServantData__GetEnumerator__);
  while ( System_Collections_Generic_List_Enumerator_BattleLogicBuff_ReduceHpProcess_BuffInfo___MoveNext(
            &v40,
            (const MethodInfo_2074054 *)Method_System_Collections_Generic_List_Enumerator_BattleServantData__MoveNext__) )
  {
    if ( !v40.fields.current )
      sub_B170D4();
    if ( !Follower__IsNpc(HIDWORD(v40.fields.current[18].monitor), 0LL) )
    {
      v39 = 257;
      goto LABEL_46;
    }
  }
  v39 = 255;
LABEL_46:
  System_Collections_Generic_List_Enumerator_BattleLogicBuff_ReduceHpProcess_BuffInfo___Dispose(
    &v40,
    (const MethodInfo_2074050 *)Method_System_Collections_Generic_List_Enumerator_BattleServantData__Dispose__);
  return v39 != 257;
}


bool __fastcall BattleData__IsEndAllWaveBattle(BattleData_o *this, const MethodInfo *method)
{
  const MethodInfo *v3; // x1

  return !BattleData__existsNextBattle(this, method) && BattleData__IsEndWaveBattle(this, v3);
}


bool __fastcall BattleData__IsEndWaveBattle(BattleData_o *this, const MethodInfo *method)
{
  const MethodInfo *v3; // x1
  int32_t limitTurnCount; // w8
  struct BattleAttackManager_o *battleAtkManager; // x8

  if ( this->fields.winBattleNotRelatedSurvivalStatus
    || !BattleData__checkAlivePlayers(this, method)
    || !BattleData__checkAliveEnemys(this, v3)
    || this->fields.endbattleFlg )
  {
    return 1;
  }
  limitTurnCount = this->fields.limitTurnCount;
  if ( limitTurnCount < 1 || limitTurnCount > this->fields.turnCount )
    return 0;
  battleAtkManager = this->fields.battleAtkManager;
  if ( !battleAtkManager )
    sub_B170D4();
  return battleAtkManager->fields._IsTurnEnd_k__BackingField;
}


bool __fastcall BattleData__IsEnemyEntryOverLimit(BattleData_o *this, const MethodInfo *method)
{
  int32_t EnemyEntryMaxCountEachTurn_k__BackingField; // w8

  EnemyEntryMaxCountEachTurn_k__BackingField = this->fields._EnemyEntryMaxCountEachTurn_k__BackingField;
  return (EnemyEntryMaxCountEachTurn_k__BackingField & 0x80000000) == 0
      && EnemyEntryMaxCountEachTurn_k__BackingField <= this->fields._EnemyEntryCountOnThisTurn_k__BackingField;
}


// local variable allocation has failed, the output may be wrong!
bool __fastcall BattleData__IsEntry(BattleData_o *this, int32_t deckIndex, bool isEnemy, const MethodInfo *method)
{
  __int64 v4; // x8
  __int64 v5; // x8
  int32_t v6; // w9

  v4 = 288LL;
  if ( isEnemy )
    v4 = 296LL;
  if ( (deckIndex & 0x80000000) != 0 )
    return 1;
  v5 = *(__int64 *)((char *)&this->klass + v4);
  if ( !v5 )
    sub_B170D4();
  v6 = *(_DWORD *)(v5 + 24);
  if ( v6 <= deckIndex )
    return 1;
  if ( v6 <= (unsigned int)deckIndex )
  {
    sub_B17100(this, *(_QWORD *)&deckIndex, isEnemy);
    sub_B170A0();
  }
  return *(_DWORD *)(v5 + 4LL * deckIndex + 32) != -1;
}


bool __fastcall BattleData__IsFixedCommandData(BattleData_o *this, const MethodInfo *method)
{
  struct BattleCommandData_array *fixedCommands; // x8
  _DWORD *FieldPlayerServantList; // x0
  __int64 v5; // x1
  __int64 v6; // x2
  int v7; // w8
  _DWORD *v8; // x20
  unsigned int v9; // w21
  BattleServantData_o *v10; // x0
  struct BattleCommandData_array *wkCommands; // x1

  fixedCommands = this->fields.fixedCommands;
  if ( !fixedCommands )
    goto LABEL_14;
  if ( !*(_QWORD *)&fixedCommands->max_length )
    return 0;
  FieldPlayerServantList = BattleData__getFieldPlayerServantList(this, method);
  if ( !FieldPlayerServantList )
LABEL_14:
    sub_B170D4();
  v7 = FieldPlayerServantList[6];
  v8 = FieldPlayerServantList;
  if ( v7 < 1 )
  {
LABEL_11:
    wkCommands = this->fields.wkCommands;
    this->fields.fixedCommands = wkCommands;
    sub_B16F98(&this->fields.fixedCommands, wkCommands);
    return 0;
  }
  v9 = 0;
  while ( 1 )
  {
    if ( v9 >= v7 )
    {
      sub_B17100(FieldPlayerServantList, v5, v6);
      sub_B170A0();
    }
    v10 = *(BattleServantData_o **)&v8[2 * v9 + 8];
    if ( !v10 )
      goto LABEL_14;
    FieldPlayerServantList = BattleServantData__getFixCommandCardBuff(v10, 0LL);
    if ( !FieldPlayerServantList )
      goto LABEL_14;
    if ( *((_QWORD *)FieldPlayerServantList + 3) )
      return 1;
    v7 = v8[6];
    if ( (int)++v9 >= v7 )
      goto LABEL_11;
  }
}


bool __fastcall BattleData__IsFriendChocolateQuest(BattleData_o *this, const MethodInfo *method)
{
  __int64 v3; // x1
  __int64 v4; // x1
  WebViewManager_o *Instance; // x0
  DataMasterBase_WarMaster__WarEntity__int__o *MasterData_WarQuestSelectionMaster; // x0
  struct BattleEntity_o *battle_ent; // x8
  WarEntity_o *entity; // [xsp+8h] [xbp-18h] BYREF

  if ( (byte_40F6A2E & 1) == 0 )
  {
    sub_B16FFC(&Method_DataManager_GetMasterData_EventDetailMaster___, method);
    sub_B16FFC(&Method_DataMasterBase_EventDetailMaster__EventDetailEntity__int__TryGetEntity__, v3);
    sub_B16FFC(&Method_SingletonMonoBehaviour_DataManager__get_Instance__, v4);
    byte_40F6A2E = 1;
  }
  entity = 0LL;
  Instance = SingletonMonoBehaviour_WebViewManager___get_Instance((const MethodInfo_2A54F38 *)Method_SingletonMonoBehaviour_DataManager__get_Instance__);
  if ( !Instance )
    goto LABEL_11;
  MasterData_WarQuestSelectionMaster = (DataMasterBase_WarMaster__WarEntity__int__o *)DataManager__GetMasterData_WarQuestSelectionMaster_(
                                                                                        (DataManager_o *)Instance,
                                                                                        (const MethodInfo_18C3284 *)Method_DataManager_GetMasterData_EventDetailMaster___);
  entity = 0LL;
  battle_ent = this->fields.battle_ent;
  if ( !battle_ent || !MasterData_WarQuestSelectionMaster )
    goto LABEL_11;
  if ( !DataMasterBase_WarMaster__WarEntity__int___TryGetEntity(
          MasterData_WarQuestSelectionMaster,
          &entity,
          battle_ent->fields.eventId,
          (const MethodInfo_266F3E4 *)Method_DataMasterBase_EventDetailMaster__EventDetailEntity__int__TryGetEntity__) )
    return 0;
  if ( !entity )
LABEL_11:
    sub_B170D4();
  return EventDetailEntity__HasFlag((EventDetailEntity_o *)entity, 0x1000000000LL, 0LL);
}


bool __fastcall BattleData__IsHighSpeedOption(BattleData_o *this, const MethodInfo *method)
{
  return this->fields.systemflg_acceleration > 1;
}


bool __fastcall BattleData__IsIgnoreBattleLoseDialog(BattleData_o *this, const MethodInfo *method)
{
  QuestPhaseEntity_o *questphase_ent; // x0

  questphase_ent = this->fields.questphase_ent;
  if ( !questphase_ent )
    sub_B170D4();
  return QuestPhaseEntity__IsIgnoreBattleLoseDialog(questphase_ent, 0LL);
}


bool __fastcall BattleData__IsKeepSubBgmAfterBattleResult(BattleData_o *this, const MethodInfo *method)
{
  QuestPhaseEntity_o *questphase_ent; // x0

  questphase_ent = this->fields.questphase_ent;
  if ( !questphase_ent )
    sub_B170D4();
  return QuestPhaseEntity__IsKeepSubBgmAfterBattleResult(questphase_ent, 0LL);
}


bool __fastcall BattleData__IsMasterSkillOverWritten(BattleData_o *this, const MethodInfo *method)
{
  return this->fields.masterSkillIconId != 0;
}


bool __fastcall BattleData__IsMovieAfterCrossFade(BattleData_o *this, const MethodInfo *method)
{
  QuestPhaseEntity_o *questphase_ent; // x0

  questphase_ent = this->fields.questphase_ent;
  if ( !questphase_ent )
    sub_B170D4();
  return QuestPhaseEntity__GetMovieAfterCrossFadeTime(questphase_ent, 0LL) != 0;
}


bool __fastcall BattleData__IsNoSkipDeadFirst(
        BattleData_o *this,
        BattleServantData_o *svtData,
        const MethodInfo *method)
{
  __int64 v5; // x1
  int32_t NoSkipDeadFirstId; // w0
  const MethodInfo *v7; // x1
  int32_t v8; // w20
  System_Collections_Generic_List_int__o *noSkipDeadFirstIdList; // x0
  struct System_Collections_Generic_List_int__o *v10; // x0
  System_Collections_Generic_List_int__o *noSkipDeadFirstIdUseThisTurn; // x0
  System_Collections_Generic_List_int__o *v12; // x0

  if ( (byte_40F6A14 & 1) == 0 )
  {
    sub_B16FFC(&Method_System_Collections_Generic_List_int__Add__, svtData);
    sub_B16FFC(&Method_System_Collections_Generic_List_int__Contains__, v5);
    byte_40F6A14 = 1;
  }
  if ( !svtData )
    goto LABEL_8;
  NoSkipDeadFirstId = BattleServantData__GetNoSkipDeadFirstId(svtData, 0LL);
  if ( !NoSkipDeadFirstId )
    return NoSkipDeadFirstId;
  v8 = NoSkipDeadFirstId;
  noSkipDeadFirstIdList = this->fields.noSkipDeadFirstIdList;
  if ( !noSkipDeadFirstIdList )
  {
    v10 = BattleData__LoadNoSkipDeadFirstIdList(0LL, v7);
    this->fields.noSkipDeadFirstIdList = v10;
    sub_B16F98(&this->fields.noSkipDeadFirstIdList, v10);
    noSkipDeadFirstIdList = this->fields.noSkipDeadFirstIdList;
    if ( !noSkipDeadFirstIdList )
      goto LABEL_15;
  }
  if ( !System_Collections_Generic_List_int___Contains(
          noSkipDeadFirstIdList,
          v8,
          (const MethodInfo_2F10944 *)Method_System_Collections_Generic_List_int__Contains__) )
  {
    noSkipDeadFirstIdUseThisTurn = this->fields.noSkipDeadFirstIdUseThisTurn;
    if ( noSkipDeadFirstIdUseThisTurn )
    {
      if ( System_Collections_Generic_List_int___Contains(
             noSkipDeadFirstIdUseThisTurn,
             v8,
             (const MethodInfo_2F10944 *)Method_System_Collections_Generic_List_int__Contains__) )
      {
LABEL_13:
        LOBYTE(NoSkipDeadFirstId) = 1;
        return NoSkipDeadFirstId;
      }
      v12 = this->fields.noSkipDeadFirstIdUseThisTurn;
      if ( v12 )
      {
        System_Collections_Generic_List_int___Add(
          v12,
          v8,
          (const MethodInfo_2F104F0 *)Method_System_Collections_Generic_List_int__Add__);
        goto LABEL_13;
      }
    }
LABEL_15:
    sub_B170D4();
  }
LABEL_8:
  LOBYTE(NoSkipDeadFirstId) = 0;
  return NoSkipDeadFirstId;
}


bool __fastcall BattleData__IsNotAliveTarget(BattleData_o *this, int32_t uniqueId, const MethodInfo *method)
{
  return !BattleData__IsAliveTarget(this, uniqueId, method);
}


bool __fastcall BattleData__IsNotResetResultDispFlag(BattleData_o *this, const MethodInfo *method)
{
  QuestPhaseEntity_o *questphase_ent; // x0

  questphase_ent = this->fields.questphase_ent;
  if ( !questphase_ent )
    sub_B170D4();
  return QuestPhaseEntity__IsNotResetResultDispFlag(questphase_ent, 0LL);
}


bool __fastcall BattleData__IsNpDetailActive(
        BattleData_o *this,
        BattleServantData_o *bsvtData,
        bool defaultActive,
        const MethodInfo *method)
{
  __int64 v7; // x1
  __int64 v8; // x1
  WarQuestSelectionMaster_o *Master_WarQuestSelectionMaster; // x0
  struct QuestPhaseEntity_o *questphase_ent; // x8
  int32_t questId; // w22
  int32_t phase; // w23
  NpcServantFollowerMaster_o *v13; // x21
  __int64 v14; // x20
  __int64 v15; // x24
  int32_t v16; // w0
  NpcServantFollowerEntity_o *npcServantFollowerEntity; // [xsp+8h] [xbp-38h] BYREF
  CodeStage_AntiCheat_ObscuredTypes_ObscuredInt_o v19; // 0:x0.16

  if ( (byte_40F6ACF & 1) == 0 )
  {
    sub_B16FFC(&Method_DataManager_GetMaster_NpcServantFollowerMaster___, bsvtData);
    sub_B16FFC(&DataManager_TypeInfo, v7);
    sub_B16FFC(&CodeStage_AntiCheat_ObscuredTypes_ObscuredInt_TypeInfo, v8);
    byte_40F6ACF = 1;
  }
  npcServantFollowerEntity = 0LL;
  if ( (BYTE3(DataManager_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0 && !DataManager_TypeInfo->_2.cctor_finished )
    j_il2cpp_runtime_class_init_0(DataManager_TypeInfo);
  Master_WarQuestSelectionMaster = DataManager__GetMaster_WarQuestSelectionMaster_((const MethodInfo_18C3224 *)Method_DataManager_GetMaster_NpcServantFollowerMaster___);
  questphase_ent = this->fields.questphase_ent;
  if ( !questphase_ent || !bsvtData )
    goto LABEL_17;
  questId = questphase_ent->fields.questId;
  phase = questphase_ent->fields.phase;
  v13 = (NpcServantFollowerMaster_o *)Master_WarQuestSelectionMaster;
  if ( BattleServantData__IsNpc(bsvtData, 0LL) )
  {
    v15 = *(_QWORD *)&bsvtData->fields.svtId.fields.currentCryptoKey;
    v14 = *(_QWORD *)&bsvtData->fields.svtId.fields.fakeValue;
    if ( (BYTE3(CodeStage_AntiCheat_ObscuredTypes_ObscuredInt_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0
      && !CodeStage_AntiCheat_ObscuredTypes_ObscuredInt_TypeInfo->_2.cctor_finished )
    {
      j_il2cpp_runtime_class_init_0(CodeStage_AntiCheat_ObscuredTypes_ObscuredInt_TypeInfo);
    }
    *(_QWORD *)&v19.fields.currentCryptoKey = v15;
    *(_QWORD *)&v19.fields.fakeValue = v14;
    v16 = CodeStage_AntiCheat_ObscuredTypes_ObscuredInt__op_Implicit_44068536(v19, 0LL);
    if ( !v13 )
      goto LABEL_17;
    if ( NpcServantFollowerMaster__TryGetEntityByQuestIdAndSvtId(
           v13,
           &npcServantFollowerEntity,
           questId,
           phase,
           v16,
           0LL) )
    {
      if ( npcServantFollowerEntity )
      {
        defaultActive &= !NpcServantFollowerEntity__IsHideTreasureDeviceDetail(
                            npcServantFollowerEntity->fields.flag,
                            0LL);
        return defaultActive;
      }
LABEL_17:
      sub_B170D4();
    }
  }
  return defaultActive;
}


bool __fastcall BattleData__IsOffWinVoice(BattleData_o *this, const MethodInfo *method)
{
  QuestPhaseEntity_o *questphase_ent; // x0

  questphase_ent = this->fields.questphase_ent;
  if ( !questphase_ent )
    sub_B170D4();
  return QuestPhaseEntity__GetWinVoiceOffFlg(questphase_ent, 0LL) == 1;
}


// local variable allocation has failed, the output may be wrong!
bool __fastcall BattleData__IsOpponentPTUniqueID(
        BattleData_o *this,
        int32_t aId,
        int32_t bId,
        const MethodInfo *method)
{
  bool v6; // w21
  const MethodInfo *v7; // x2

  v6 = BattleData__getEnemyServantData(this, aId, *(const MethodInfo **)&bId) != 0LL;
  return v6 ^ (BattleData__getEnemyServantData(this, bId, v7) != 0LL);
}


bool __fastcall BattleData__IsPlayLimitTurnEffect(BattleData_o *this, const MethodInfo *method)
{
  BattleAttackManager_o *battleAtkManager; // x0

  if ( this->fields.limitTurnCount < 1 )
    return 0;
  battleAtkManager = this->fields.battleAtkManager;
  if ( !battleAtkManager )
    sub_B170D4();
  return BattleAttackManager__get_IsTurnStart(battleAtkManager, 0LL);
}


bool __fastcall BattleData__IsResetCommandAssistInfoArrayOversight(
        BattleData_o *this,
        System_Collections_Generic_List_List_EventCommandAssistEntity___o *commandAssistInfoOversightList,
        System_Collections_Generic_List_commandAssistData__o *commandAssistDataList,
        BattleDeckServantData_array *svtDeckArray,
        const MethodInfo *method)
{
  __int64 v9; // x1
  __int64 v10; // x1
  __int64 v11; // x1
  __int64 v12; // x1
  __int64 v13; // x1
  __int64 v14; // x1
  __int64 v15; // x1
  __int64 v16; // x1
  __int64 v17; // x1
  __int64 v18; // x1
  struct System_Collections_Generic_List_EventCommandAssistEntity__array *items; // x8
  System_Collections_Generic_List_EventCommandAssistEntity__o *v20; // x9
  System_Collections_Generic_List_EventCommandAssistEntity__o *v21; // x9
  System_Collections_Generic_List_EventCommandAssistEntity__o *v22; // x8
  DataMasterBase_WarMaster__WarEntity__int__o *Master_WarQuestSelectionMaster; // x24
  EventCommandAssistMaster_o *Entity; // x0
  __int64 v25; // x1
  __int64 v26; // x2
  signed int max_length; // w8
  EventCommandAssistMaster_o *v28; // x23
  unsigned int v29; // w19
  int v30; // w27
  int v31; // w28
  int v32; // w21
  struct BattleEntity_o *battle_ent; // x8
  BattleDeckServantData_o *v34; // x9
  BattleInfoData_o *battleInfo; // x0
  BattleUserServantData_o *UserServantFromID; // x0
  __int64 v37; // x25
  __int64 v38; // x26
  int32_t v39; // w0
  __int64 v40; // x11
  unsigned __int64 v41; // x8
  unsigned __int64 v42; // x9
  __int64 v43; // x11
  int v44; // w12
  int v45; // w22
  int v46; // w24
  int v47; // w25
  struct BattleEntity_o *v48; // x8
  EventCommandAssistEntity_o *CurrentEntity; // x0
  int32_t assistCardId; // w8
  System_Collections_Generic_List_EventCommandAssistEntity__o *v51; // x8
  int v52; // w25
  _BOOL4 v53; // w19
  int v54; // w23
  System_Collections_Generic_List_List_EventCommandAssistEntity___o *v55; // x26
  System_Collections_Generic_List_EventCommandAssistEntity__o *v56; // x8
  _BOOL4 v57; // w20
  int v58; // w22
  System_Collections_Generic_List_EventCommandAssistEntity__o *v59; // x8
  _BOOL4 v60; // w21
  _BOOL4 v61; // w24
  System_Collections_Generic_List_EventCommandAssistEntity__o *v62; // x8
  _BOOL4 v63; // w23
  System_Collections_Generic_List_EventCommandAssistEntity__o *v64; // x8
  _BOOL4 v65; // w8
  System_Collections_Generic_List_EventCommandAssistEntity__o *v66; // x8
  System_Collections_Generic_List_commandAssistData__o *v68; // [xsp+8h] [xbp-98h]
  System_Collections_Generic_List_List_EventCommandAssistEntity___o *v69; // [xsp+10h] [xbp-90h]
  System_Collections_Generic_List_Enumerator_T__o v70; // [xsp+18h] [xbp-88h] BYREF
  System_Collections_Generic_List_Enumerator_T__o v71; // [xsp+30h] [xbp-70h] BYREF
  CodeStage_AntiCheat_ObscuredTypes_ObscuredInt_o v72; // 0:x0.16

  if ( (byte_40F6A96 & 1) == 0 )
  {
    sub_B16FFC(&Method_DataManager_GetMaster_EventCommandAssistMaster___, commandAssistInfoOversightList);
    sub_B16FFC(&Method_DataManager_GetMaster_ServantMaster___, v9);
    sub_B16FFC(&DataManager_TypeInfo, v10);
    sub_B16FFC(&Method_DataMasterBase_ServantMaster__ServantEntity__int__GetEntity__, v11);
    sub_B16FFC(&Method_System_Collections_Generic_List_Enumerator_commandAssistData__Dispose__, v12);
    sub_B16FFC(&Method_System_Collections_Generic_List_Enumerator_commandAssistData__MoveNext__, v13);
    sub_B16FFC(&Method_System_Collections_Generic_List_Enumerator_commandAssistData__get_Current__, v14);
    sub_B16FFC(&Method_System_Collections_Generic_List_commandAssistData__GetEnumerator__, v15);
    sub_B16FFC(&Method_System_Collections_Generic_List_EventCommandAssistEntity__get_Count__, v16);
    sub_B16FFC(&Method_System_Collections_Generic_List_List_EventCommandAssistEntity___get_Item__, v17);
    sub_B16FFC(&CodeStage_AntiCheat_ObscuredTypes_ObscuredInt_TypeInfo, v18);
    byte_40F6A96 = 1;
  }
  memset(&v71, 0, sizeof(v71));
  if ( !commandAssistInfoOversightList )
    goto LABEL_97;
  if ( !commandAssistInfoOversightList->fields._size )
    System_ThrowHelper__ThrowArgumentOutOfRangeException_41329284(0LL);
  items = commandAssistInfoOversightList->fields._items;
  v20 = items->m_Items[0];
  if ( !v20 )
    goto LABEL_97;
  if ( v20->fields._size )
    goto LABEL_16;
  if ( commandAssistInfoOversightList->fields._size <= 1u )
    System_ThrowHelper__ThrowArgumentOutOfRangeException_41329284(0LL);
  v21 = items->m_Items[1];
  if ( !v21 )
    goto LABEL_97;
  if ( v21->fields._size )
    goto LABEL_16;
  if ( commandAssistInfoOversightList->fields._size <= 2u )
    System_ThrowHelper__ThrowArgumentOutOfRangeException_41329284(0LL);
  v22 = items->m_Items[2];
  if ( !v22 )
    goto LABEL_97;
  if ( v22->fields._size )
  {
LABEL_16:
    v68 = commandAssistDataList;
    if ( (BYTE3(DataManager_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0 && !DataManager_TypeInfo->_2.cctor_finished )
      j_il2cpp_runtime_class_init_0(DataManager_TypeInfo);
    Master_WarQuestSelectionMaster = (DataMasterBase_WarMaster__WarEntity__int__o *)DataManager__GetMaster_WarQuestSelectionMaster_((const MethodInfo_18C3224 *)Method_DataManager_GetMaster_ServantMaster___);
    Entity = (EventCommandAssistMaster_o *)DataManager__GetMaster_WarQuestSelectionMaster_((const MethodInfo_18C3224 *)Method_DataManager_GetMaster_EventCommandAssistMaster___);
    if ( !svtDeckArray )
      goto LABEL_97;
    max_length = svtDeckArray->max_length;
    v28 = Entity;
    v69 = commandAssistInfoOversightList;
    if ( max_length >= 1 )
    {
      v29 = 0;
      v30 = 0;
      v31 = 0;
      v32 = 0;
      while ( 1 )
      {
        if ( v29 >= max_length )
          goto LABEL_96;
        battle_ent = this->fields.battle_ent;
        if ( !battle_ent )
          goto LABEL_97;
        v34 = svtDeckArray->m_Items[v29];
        if ( !v34 )
          goto LABEL_97;
        battleInfo = battle_ent->fields.battleInfo;
        if ( !battleInfo )
          goto LABEL_97;
        UserServantFromID = BattleInfoData__getUserServantFromID(battleInfo, v34->fields.userSvtId, 0LL);
        if ( !UserServantFromID )
          goto LABEL_97;
        v38 = *(_QWORD *)&UserServantFromID->fields.svtId.fields.currentCryptoKey;
        v37 = *(_QWORD *)&UserServantFromID->fields.svtId.fields.fakeValue;
        if ( (BYTE3(CodeStage_AntiCheat_ObscuredTypes_ObscuredInt_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0
          && !CodeStage_AntiCheat_ObscuredTypes_ObscuredInt_TypeInfo->_2.cctor_finished )
        {
          j_il2cpp_runtime_class_init_0(CodeStage_AntiCheat_ObscuredTypes_ObscuredInt_TypeInfo);
        }
        *(_QWORD *)&v72.fields.currentCryptoKey = v38;
        *(_QWORD *)&v72.fields.fakeValue = v37;
        v39 = CodeStage_AntiCheat_ObscuredTypes_ObscuredInt__op_Implicit_44068536(v72, 0LL);
        if ( !Master_WarQuestSelectionMaster )
          goto LABEL_97;
        Entity = (EventCommandAssistMaster_o *)DataMasterBase_WarMaster__WarEntity__int___GetEntity(
                                                 Master_WarQuestSelectionMaster,
                                                 v39,
                                                 (const MethodInfo_266F388 *)Method_DataMasterBase_ServantMaster__ServantEntity__int__GetEntity__);
        if ( !Entity )
          goto LABEL_97;
        v40 = *(_QWORD *)&Entity[1].fields.revision;
        if ( !v40 )
          goto LABEL_97;
        v41 = *(unsigned int *)(v40 + 24);
        if ( (__int64)(v41 << 32) >= 1 )
          break;
LABEL_43:
        max_length = svtDeckArray->max_length;
        if ( (int)++v29 >= max_length )
          goto LABEL_46;
      }
      v42 = 0LL;
      v43 = v40 + 32;
      while ( v42 < v41 )
      {
        v44 = *(_DWORD *)(v43 + 4 * v42);
        switch ( v44 )
        {
          case 3:
            ++v30;
            break;
          case 2:
            ++v31;
            break;
          case 1:
            ++v32;
            break;
        }
        if ( (__int64)++v42 >= (int)v41 )
          goto LABEL_43;
      }
LABEL_96:
      sub_B17100(Entity, v25, v26);
      sub_B170A0();
    }
    v32 = 0;
    v31 = 0;
    v30 = 0;
LABEL_46:
    if ( !v68 )
      goto LABEL_97;
    System_Collections_Generic_List_BattleLogicBuff_ReduceHpProcess_BuffInfo___GetEnumerator(
      &v70,
      (System_Collections_Generic_List_BattleLogicBuff_ReduceHpProcess_BuffInfo__o *)v68,
      (const MethodInfo_2F26B54 *)Method_System_Collections_Generic_List_commandAssistData__GetEnumerator__);
    v45 = 0;
    v71 = v70;
    v46 = 0;
    v47 = 0;
    while ( System_Collections_Generic_List_Enumerator_BattleLogicBuff_ReduceHpProcess_BuffInfo___MoveNext(
              &v71,
              (const MethodInfo_2074054 *)Method_System_Collections_Generic_List_Enumerator_commandAssistData__MoveNext__) )
    {
      v48 = this->fields.battle_ent;
      if ( !v48 )
        sub_B170D4();
      if ( !v71.fields.current )
        sub_B170D4();
      if ( !v28 )
        sub_B170D4();
      CurrentEntity = EventCommandAssistMaster__GetCurrentEntity(
                        v28,
                        v48->fields.eventId,
                        (int32_t)v71.fields.current[1].klass,
                        -1,
                        1,
                        0LL);
      if ( CurrentEntity )
      {
        assistCardId = CurrentEntity->fields.assistCardId;
        switch ( assistCardId )
        {
          case 3:
            ++v45;
            break;
          case 2:
            ++v46;
            break;
          case 1:
            ++v47;
            break;
        }
      }
    }
    System_Collections_Generic_List_Enumerator_BattleLogicBuff_ReduceHpProcess_BuffInfo___Dispose(
      &v71,
      (const MethodInfo_2074050 *)Method_System_Collections_Generic_List_Enumerator_commandAssistData__Dispose__);
    if ( v32 - v47 < 1 )
    {
      v52 = 0;
      v53 = 1;
    }
    else
    {
      if ( !v69->fields._size )
        System_ThrowHelper__ThrowArgumentOutOfRangeException_41329284(0LL);
      v51 = v69->fields._items->m_Items[0];
      if ( !v51 )
        goto LABEL_97;
      v52 = 1;
      v53 = v51->fields._size < 1;
    }
    v54 = v31 - v46;
    if ( v31 - v46 < 1 )
    {
      v55 = v69;
      v57 = 1;
    }
    else
    {
      v55 = v69;
      if ( v69->fields._size <= 1u )
        System_ThrowHelper__ThrowArgumentOutOfRangeException_41329284(0LL);
      v56 = v69->fields._items->m_Items[1];
      if ( !v56 )
        goto LABEL_97;
      v57 = v56->fields._size < 1;
    }
    v58 = v30 - v45;
    if ( v58 < 1 )
    {
      v60 = 1;
      if ( v52 )
      {
LABEL_76:
        v61 = 0;
LABEL_82:
        if ( v54 <= 0 )
        {
          if ( v55->fields._size <= 1u )
            System_ThrowHelper__ThrowArgumentOutOfRangeException_41329284(0LL);
          v64 = v55->fields._items->m_Items[1];
          if ( !v64 )
            goto LABEL_97;
          v63 = v64->fields._size > 0;
        }
        else
        {
          v63 = 0;
        }
        if ( v58 > 0 )
        {
          v65 = 0;
          return (v61 || v53) && (v63 || v57) && (v65 || v60);
        }
        if ( v55->fields._size <= 2u )
          System_ThrowHelper__ThrowArgumentOutOfRangeException_41329284(0LL);
        v66 = v55->fields._items->m_Items[2];
        if ( v66 )
        {
          v65 = v66->fields._size > 0;
          return (v61 || v53) && (v63 || v57) && (v65 || v60);
        }
LABEL_97:
        sub_B170D4();
      }
    }
    else
    {
      if ( v55->fields._size <= 2u )
        System_ThrowHelper__ThrowArgumentOutOfRangeException_41329284(0LL);
      v59 = v55->fields._items->m_Items[2];
      if ( !v59 )
        goto LABEL_97;
      v60 = v59->fields._size < 1;
      if ( v52 )
        goto LABEL_76;
    }
    if ( !v55->fields._size )
      System_ThrowHelper__ThrowArgumentOutOfRangeException_41329284(0LL);
    v62 = v55->fields._items->m_Items[0];
    if ( !v62 )
      goto LABEL_97;
    v61 = v62->fields._size > 0;
    goto LABEL_82;
  }
  return 1;
}


bool __fastcall BattleData__IsRetryable(BattleData_o *this, const MethodInfo *method)
{
  return this->fields.isRetryable;
}


bool __fastcall BattleData__IsRetryableQuestPhase(BattleData_o *this, const MethodInfo *method)
{
  __int64 v3; // x1
  __int64 v4; // x1
  __int64 v5; // x1
  __int64 v6; // x1
  struct BattleData_o *data; // x8
  QuestEntity_o *quest_ent; // x0
  BattleInfoData_o *battle_info; // x0
  BattleBoostItem_array *BattleBoostItemList; // x0
  const MethodInfo *v12; // x1
  WebViewManager_o *Instance; // x0
  QuestPhaseMaster_o *MasterData_WarQuestSelectionMaster; // x0
  struct BattleData_o *v15; // x8
  struct QuestPhaseEntity_o *questphase_ent; // x8
  QuestPhaseEntity_array *List; // x0
  struct BattleData_o *v18; // x9
  struct QuestPhaseEntity_o *v19; // x8
  struct QuestEntity_o *v20; // x9
  il2cpp_array_size_t max_length; // w21
  int32_t phase; // w22
  int32_t afterClear; // w23
  WebViewManager_o *v24; // x0
  UserQuestMaster_o *v25; // x20
  int64_t UserId; // x0
  struct BattleData_o *v27; // x8
  struct QuestPhaseEntity_o *v28; // x8
  bool v29; // w20
  struct BattleData_o *v30; // x8
  QuestEntity_o *v31; // x0
  int64_t EndTime; // x19
  int64_t Time; // x0
  UserQuestEntity_o *entity; // [xsp+8h] [xbp-38h] BYREF

  if ( (byte_40F6AB8 & 1) == 0 )
  {
    sub_B16FFC(&Method_DataManager_GetMasterData_QuestPhaseMaster___, method);
    sub_B16FFC(&Method_DataManager_GetMasterData_UserQuestMaster___, v3);
    sub_B16FFC(&NetworkManager_TypeInfo, v4);
    sub_B16FFC(&Method_SingletonMonoBehaviour_DataManager__get_Instance__, v5);
    sub_B16FFC(&StringLiteral_6342/*"FLAG_BATTLE_RETRY_UNAVAILABLE"*/, v6);
    byte_40F6AB8 = 1;
  }
  entity = 0LL;
  if ( ConstantMaster__getValue((System_String_o *)StringLiteral_6342/*"FLAG_BATTLE_RETRY_UNAVAILABLE"*/, 0LL) > 0 )
    return 0;
  data = this->fields.data;
  if ( !data )
    goto LABEL_42;
  quest_ent = data->fields.quest_ent;
  if ( !quest_ent )
    goto LABEL_42;
  if ( !QuestEntity__HasFlag(quest_ent, 0x4000000000LL, 0LL) )
  {
    battle_info = this->fields.battle_info;
    if ( battle_info )
    {
      BattleBoostItemList = BattleInfoData__getBattleBoostItemList(battle_info, this->fields.flg_resumebattle, 0LL);
      if ( BattleBoostItemList
        && *(_QWORD *)&BattleBoostItemList->max_length
        && BattleData__IsFriendChocolateQuest(this, v12) )
      {
        return 0;
      }
      Instance = SingletonMonoBehaviour_WebViewManager___get_Instance((const MethodInfo_2A54F38 *)Method_SingletonMonoBehaviour_DataManager__get_Instance__);
      if ( Instance )
      {
        MasterData_WarQuestSelectionMaster = (QuestPhaseMaster_o *)DataManager__GetMasterData_WarQuestSelectionMaster_(
                                                                     (DataManager_o *)Instance,
                                                                     (const MethodInfo_18C3284 *)Method_DataManager_GetMasterData_QuestPhaseMaster___);
        v15 = this->fields.data;
        if ( v15 )
        {
          questphase_ent = v15->fields.questphase_ent;
          if ( questphase_ent )
          {
            if ( MasterData_WarQuestSelectionMaster )
            {
              List = QuestPhaseMaster__getList(MasterData_WarQuestSelectionMaster, questphase_ent->fields.questId, 0LL);
              if ( List )
              {
                v18 = this->fields.data;
                if ( v18 )
                {
                  v19 = v18->fields.questphase_ent;
                  if ( v19 )
                  {
                    v20 = v18->fields.quest_ent;
                    if ( v20 )
                    {
                      max_length = List->max_length;
                      phase = v19->fields.phase;
                      afterClear = v20->fields.afterClear;
                      entity = 0LL;
                      v24 = SingletonMonoBehaviour_WebViewManager___get_Instance((const MethodInfo_2A54F38 *)Method_SingletonMonoBehaviour_DataManager__get_Instance__);
                      if ( v24 )
                      {
                        v25 = (UserQuestMaster_o *)DataManager__GetMasterData_WarQuestSelectionMaster_(
                                                     (DataManager_o *)v24,
                                                     (const MethodInfo_18C3284 *)Method_DataManager_GetMasterData_UserQuestMaster___);
                        if ( (BYTE3(NetworkManager_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0
                          && !NetworkManager_TypeInfo->_2.cctor_finished )
                        {
                          j_il2cpp_runtime_class_init_0(NetworkManager_TypeInfo);
                        }
                        UserId = NetworkManager__get_UserId(0LL);
                        v27 = this->fields.data;
                        if ( v27 )
                        {
                          v28 = v27->fields.questphase_ent;
                          if ( v28 )
                          {
                            if ( v25 )
                            {
                              if ( UserQuestMaster__TryGetEntity(v25, &entity, UserId, v28->fields.questId, 0LL) )
                              {
                                if ( !entity )
                                  goto LABEL_42;
                                v29 = UserQuestEntity__getClearNum(entity, 0LL) > 0;
                              }
                              else
                              {
                                v29 = 0;
                              }
                              if ( !entity || UserQuestEntity__IsNotExpired(entity, 0LL) )
                                return v29 && phase == max_length && afterClear != 1;
                              v30 = this->fields.data;
                              if ( v30 )
                              {
                                v31 = v30->fields.quest_ent;
                                if ( v31 )
                                {
                                  EndTime = QuestEntity__GetEndTime(v31, 0, 0LL);
                                  if ( (BYTE3(NetworkManager_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0
                                    && !NetworkManager_TypeInfo->_2.cctor_finished )
                                  {
                                    j_il2cpp_runtime_class_init_0(NetworkManager_TypeInfo);
                                  }
                                  Time = NetworkManager__getTime(0LL);
                                  if ( EndTime >= 1 && EndTime - Time < 1 )
                                    return 0;
                                  return v29 && phase == max_length && afterClear != 1;
                                }
                              }
                            }
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    }
LABEL_42:
    sub_B170D4();
  }
  return 0;
}


bool __fastcall BattleData__IsShowMasterSkillCutIn(BattleData_o *this, const MethodInfo *method)
{
  return this->fields.isShowMasterSkillCutIn;
}


bool __fastcall BattleData__IsSkipBattleFinish(BattleData_o *this, const MethodInfo *method)
{
  QuestPhaseEntity_o *questphase_ent; // x0

  questphase_ent = this->fields.questphase_ent;
  if ( !questphase_ent )
    sub_B170D4();
  return QuestPhaseEntity__IsSkipBattleFinish(questphase_ent, 0LL);
}


bool __fastcall BattleData__IsSkipWaveStartFadeInSe(BattleData_o *this, const MethodInfo *method)
{
  BattleEntity_o *battle_ent; // x0
  StageEntity_o *StageEntityAtWave; // x0

  battle_ent = this->fields.battle_ent;
  if ( !battle_ent
    || (StageEntityAtWave = BattleEntity__GetStageEntityAtWave(battle_ent, this->fields.wavecount, 0LL)) == 0LL )
  {
    sub_B170D4();
  }
  return StageEntity__IsSkipWaveStartFadeInSe(StageEntityAtWave, 0LL);
}


bool __fastcall BattleData__IsStartBgmOff(BattleData_o *this, const MethodInfo *method)
{
  StageEntity_o *StageEntity; // x0

  StageEntity = BattleData__getStageEntity(this, method);
  if ( !StageEntity )
    sub_B170D4();
  return StageEntity__GetStartBgmOffFlag(StageEntity, 0LL) == 1;
}


bool __fastcall BattleData__IsTutorialCriticalEnabled(BattleData_o *this, const MethodInfo *method)
{
  return this->fields.tutorialId != 1 || this->fields.turnCount > 2;
}


bool __fastcall BattleData__IsUseTemporaryCommandSpell(BattleData_o *this, const MethodInfo *method)
{
  QuestPhaseEntity_o *questphase_ent; // x0

  questphase_ent = this->fields.questphase_ent;
  if ( questphase_ent )
    LOBYTE(questphase_ent) = QuestPhaseEntity__IsUseTemporaryCommandSpell(questphase_ent, 0LL);
  return (char)questphase_ent;
}


// local variable allocation has failed, the output may be wrong!
bool __fastcall BattleData__IsVoiceOffSvt(BattleData_o *this, int32_t svtId, const MethodInfo *method)
{
  __int64 v5; // x1
  System_Collections_Generic_HashSet_int__o *VoiceOffPlayerSvtIdHash; // x0
  System_Collections_Generic_HashSet_int__o *voiceOffSvtIdHash; // x0
  System_Collections_Generic_HashSet_int__o *v9; // x0

  if ( (byte_40F6ACE & 1) == 0 )
  {
    sub_B16FFC(&Method_System_Collections_Generic_HashSet_int__Contains__, *(_QWORD *)&svtId);
    sub_B16FFC(&Method_System_Collections_Generic_HashSet_int__get_Count__, v5);
    byte_40F6ACE = 1;
  }
  VoiceOffPlayerSvtIdHash = BattleData__GetVoiceOffPlayerSvtIdHash(this, *(const MethodInfo **)&svtId);
  if ( !VoiceOffPlayerSvtIdHash )
    goto LABEL_11;
  if ( VoiceOffPlayerSvtIdHash->fields._count < 1 )
    return 0;
  voiceOffSvtIdHash = this->fields.voiceOffSvtIdHash;
  if ( !voiceOffSvtIdHash )
    goto LABEL_11;
  if ( System_Collections_Generic_HashSet_int___Contains(
         voiceOffSvtIdHash,
         0,
         (const MethodInfo_21D8604 *)Method_System_Collections_Generic_HashSet_int__Contains__) )
  {
    return 1;
  }
  v9 = this->fields.voiceOffSvtIdHash;
  if ( !v9 )
LABEL_11:
    sub_B170D4();
  return System_Collections_Generic_HashSet_int___Contains(
           v9,
           svtId,
           (const MethodInfo_21D8604 *)Method_System_Collections_Generic_HashSet_int__Contains__);
}


bool __fastcall BattleData__IsWarBoard(BattleData_o *this, const MethodInfo *method)
{
  __int64 v3; // x1
  __int64 v4; // x1
  QuestEntity_o *quest_ent; // x0
  struct QuestEntity_o **p_quest_ent; // x20
  BattleEntity_o *battle_ent; // x0
  struct BattleEntity_o **p_battle_ent; // x21
  DataMasterBase_TMaster__TEntity__PKType__o *Master_WarQuestSelectionMaster; // x0
  Il2CppObject *SingleEntity; // x0
  QuestEntity_o *v11; // x0
  QuestEntity_o *PhaseDetailedEntity; // x0

  if ( (byte_40F6A12 & 1) == 0 )
  {
    sub_B16FFC(&Method_DataManager_GetMaster_BattleMaster___, method);
    sub_B16FFC(&DataManager_TypeInfo, v3);
    sub_B16FFC(&Method_DataMasterBase_BattleMaster__BattleEntity__long__GetSingleEntity__, v4);
    byte_40F6A12 = 1;
  }
  p_quest_ent = &this->fields.quest_ent;
  quest_ent = this->fields.quest_ent;
  if ( !quest_ent )
  {
    p_battle_ent = &this->fields.battle_ent;
    battle_ent = this->fields.battle_ent;
    if ( !battle_ent )
    {
      if ( (BYTE3(DataManager_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0
        && !DataManager_TypeInfo->_2.cctor_finished )
      {
        j_il2cpp_runtime_class_init_0(DataManager_TypeInfo);
      }
      Master_WarQuestSelectionMaster = (DataMasterBase_TMaster__TEntity__PKType__o *)DataManager__GetMaster_WarQuestSelectionMaster_((const MethodInfo_18C3224 *)Method_DataManager_GetMaster_BattleMaster___);
      if ( !Master_WarQuestSelectionMaster )
        goto LABEL_13;
      SingleEntity = DataMasterBase_object__object__long___GetSingleEntity(
                       Master_WarQuestSelectionMaster,
                       (const MethodInfo_266F674 *)Method_DataMasterBase_BattleMaster__BattleEntity__long__GetSingleEntity__);
      *p_battle_ent = (struct BattleEntity_o *)SingleEntity;
      sub_B16F98(&this->fields.battle_ent, SingleEntity);
      battle_ent = *p_battle_ent;
      if ( !*p_battle_ent )
        goto LABEL_13;
    }
    BattleEntity__GetQuestInvolvedEntitys(battle_ent, &this->fields.quest_ent, &this->fields.questphase_ent, 0LL);
    v11 = this->fields.quest_ent;
    if ( !v11
      || (PhaseDetailedEntity = QuestEntity__GetPhaseDetailedEntity(v11, 0LL),
          *p_quest_ent = PhaseDetailedEntity,
          sub_B16F98(&this->fields.quest_ent, PhaseDetailedEntity),
          (quest_ent = *p_quest_ent) == 0LL) )
    {
LABEL_13:
      sub_B170D4();
    }
  }
  return QuestEntity__GetTypeFlag(quest_ent, 0LL) == 128;
}


bool __fastcall BattleData__IsWinBgmOff(BattleData_o *this, const MethodInfo *method)
{
  QuestPhaseEntity_o *questphase_ent; // x0

  questphase_ent = this->fields.questphase_ent;
  if ( !questphase_ent )
    sub_B170D4();
  return QuestPhaseEntity__GetWinBgmOffFlg(questphase_ent, 0LL) == 1;
}


void __fastcall BattleData__LoadAiNpcServant(
        BattleData_o *this,
        BattleServantData_SaveData_array *saveNpcSvts,
        const MethodInfo *method)
{
  __int64 v5; // x1
  __int64 v6; // x1
  __int64 v7; // x1
  __int64 v8; // x1
  __int64 v9; // x1
  __int64 v10; // x1
  __int64 v11; // x1
  __int64 v12; // x1
  __int64 v13; // x1
  QuestPhaseEntity_o *questphase_ent; // x0
  System_Collections_Generic_Dictionary_int__int____o *NpcAiInfo; // x21
  __int64 v16; // x1
  __int64 v17; // x2
  __int64 v18; // x3
  __int64 v19; // x4
  System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData__o *v20; // x22
  BattleInfoData_o *battle_info; // x0
  BattleDeckServantData_array *AiNpcDeckSvts; // x0
  __int64 v23; // x1
  __int64 v24; // x2
  __int64 v25; // x3
  __int64 v26; // x4
  BattleDeckServantData_array *v27; // x22
  unsigned __int64 v28; // x27
  BattleData___c__DisplayClass555_0_o *v29; // x24
  __int64 v30; // x0
  __int64 v31; // x1
  __int64 v32; // x2
  struct BattleDeckServantData_o *v33; // x1
  BattleDeckServantData_o **p_deckSvt; // x23
  System_Int32_array *Value_int__object; // x25
  __int64 v36; // x1
  __int64 v37; // x2
  __int64 v38; // x3
  __int64 v39; // x4
  System_Func_WarBoardManager_WarBoardOnboardSkillTarget__bool__o *v40; // x26
  BattleServantData_SaveData_o *USFGOActorBattleActionEventConditional_OverwriteParamCondition; // x26
  __int64 v42; // x1
  __int64 v43; // x2
  __int64 v44; // x3
  __int64 v45; // x4
  AiNpcBattleServantData_o *v46; // x24
  struct System_Collections_Generic_List_AiNpcBattleServantData__o *aiNpcDataList; // x0

  if ( (byte_40F6A98 & 1) == 0 )
  {
    sub_B16FFC(&AiNpcBattleServantData_TypeInfo, saveNpcSvts);
    sub_B16FFC(&Method_BasicHelper_Find_BattleServantData_SaveData___, v5);
    sub_B16FFC(&Method_BasicHelper_GetValue_int__int_____, v6);
    sub_B16FFC(&Method_System_Func_BattleServantData_SaveData__bool___ctor__, v7);
    sub_B16FFC(&System_Func_BattleServantData_SaveData__bool__TypeInfo, v8);
    sub_B16FFC(&Method_System_Collections_Generic_List_AiNpcBattleServantData__Add__, v9);
    sub_B16FFC(&Method_System_Collections_Generic_List_AiNpcBattleServantData___ctor__, v10);
    sub_B16FFC(&System_Collections_Generic_List_AiNpcBattleServantData__TypeInfo, v11);
    sub_B16FFC(&Method_BattleData___c__DisplayClass555_0__LoadAiNpcServant_b__0__, v12);
    sub_B16FFC(&BattleData___c__DisplayClass555_0_TypeInfo, v13);
    byte_40F6A98 = 1;
  }
  questphase_ent = this->fields.questphase_ent;
  if ( !questphase_ent )
    goto LABEL_15;
  NpcAiInfo = QuestPhaseEntity__GetNpcAiInfo(questphase_ent, 0LL);
  v20 = (System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData__o *)sub_B170CC(
                                                                                                  System_Collections_Generic_List_AiNpcBattleServantData__TypeInfo,
                                                                                                  v16,
                                                                                                  v17,
                                                                                                  v18,
                                                                                                  v19);
  System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData____ctor(
    v20,
    (const MethodInfo_2F25014 *)Method_System_Collections_Generic_List_AiNpcBattleServantData___ctor__);
  this->fields.aiNpcDataList = (struct System_Collections_Generic_List_AiNpcBattleServantData__o *)v20;
  sub_B16F98(&this->fields.aiNpcDataList, v20);
  battle_info = this->fields.battle_info;
  if ( !battle_info )
    goto LABEL_15;
  AiNpcDeckSvts = BattleInfoData__get_AiNpcDeckSvts(battle_info, 0LL);
  if ( !AiNpcDeckSvts )
    goto LABEL_15;
  v27 = AiNpcDeckSvts;
  if ( (int)AiNpcDeckSvts->max_length >= 1 )
  {
    v28 = 0LL;
    while ( 1 )
    {
      v29 = (BattleData___c__DisplayClass555_0_o *)sub_B170CC(
                                                     BattleData___c__DisplayClass555_0_TypeInfo,
                                                     v23,
                                                     v24,
                                                     v25,
                                                     v26);
      BattleData___c__DisplayClass555_0___ctor(v29, 0LL);
      if ( v28 >= v27->max_length )
      {
        sub_B17100(v30, v31, v32);
        sub_B170A0();
      }
      if ( !v29 )
        break;
      v33 = v27->m_Items[v28];
      v29->fields.deckSvt = v33;
      p_deckSvt = &v29->fields.deckSvt;
      sub_B16F98(&v29->fields, v33);
      if ( !v29->fields.deckSvt )
        break;
      Value_int__object = (System_Int32_array *)BasicHelper__GetValue_int__object_(
                                                  (System_Collections_Generic_Dictionary_K__V__o *)NpcAiInfo,
                                                  v29->fields.deckSvt->fields.npcId,
                                                  0LL,
                                                  (const MethodInfo_18B7E58 *)Method_BasicHelper_GetValue_int__int_____);
      v40 = (System_Func_WarBoardManager_WarBoardOnboardSkillTarget__bool__o *)sub_B170CC(
                                                                                 System_Func_BattleServantData_SaveData__bool__TypeInfo,
                                                                                 v36,
                                                                                 v37,
                                                                                 v38,
                                                                                 v39);
      System_Func_WarBoardManager_WarBoardOnboardSkillTarget__bool____ctor(
        v40,
        (Il2CppObject *)v29,
        Method_BattleData___c__DisplayClass555_0__LoadAiNpcServant_b__0__,
        (const MethodInfo_2B6AB40 *)Method_System_Func_BattleServantData_SaveData__bool___ctor__);
      USFGOActorBattleActionEventConditional_OverwriteParamCondition = (BattleServantData_SaveData_o *)BasicHelper__Find_USFGOActorBattleActionEventConditional_OverwriteParamCondition_((WellFired_USFGOActorBattleActionEventConditional_OverwriteParamCondition_array *)saveNpcSvts, (System_Func_T__bool__o *)v40, (const MethodInfo_18B650C *)Method_BasicHelper_Find_BattleServantData_SaveData___);
      v46 = (AiNpcBattleServantData_o *)sub_B170CC(AiNpcBattleServantData_TypeInfo, v42, v43, v44, v45);
      AiNpcBattleServantData___ctor(v46, 0LL);
      if ( !v46 )
        break;
      AiNpcBattleServantData__SetNpcServant(
        v46,
        this,
        *p_deckSvt,
        Value_int__object,
        USFGOActorBattleActionEventConditional_OverwriteParamCondition,
        0LL);
      v46->fields.index = v28;
      aiNpcDataList = this->fields.aiNpcDataList;
      if ( !aiNpcDataList )
        break;
      System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData___Add(
        (System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData__o *)aiNpcDataList,
        (EventMissionProgressRequest_Argument_ProgressData_o *)v46,
        (const MethodInfo_2F25CD8 *)Method_System_Collections_Generic_List_AiNpcBattleServantData__Add__);
      if ( (__int64)++v28 >= (int)v27->max_length )
        return;
    }
LABEL_15:
    sub_B170D4();
  }
}


void __fastcall BattleData__LoadBattleStartVoice(BattleData_o *this, const MethodInfo *method)
{
  struct BattleData_o *data; // x8
  BattleEntity_o *battle_ent; // x0
  StageEntity_o *StageEntityAtWave; // x0
  int32_t v6; // w19
  int32_t v7; // w20
  int32_t limit[2]; // [xsp+8h] [xbp-18h] BYREF

  if ( (byte_40F6AC5 & 1) == 0 )
  {
    sub_B16FFC(&ServantAssetLoadManager_TypeInfo, method);
    byte_40F6AC5 = 1;
  }
  *(_QWORD *)limit = 0LL;
  data = this->fields.data;
  if ( !data
    || (battle_ent = this->fields.battle_ent) == 0LL
    || (StageEntityAtWave = BattleEntity__GetStageEntityAtWave(battle_ent, data->fields.wavecount, 0LL),
        limit[0] = -1,
        limit[1] = 0,
        !StageEntityAtWave) )
  {
    sub_B170D4();
  }
  if ( StageEntity__IsSpecifiedBattleStartVoice_26825524(StageEntityAtWave, &limit[1], limit, 0LL) )
  {
    v7 = limit[0];
    v6 = limit[1];
    if ( (BYTE3(ServantAssetLoadManager_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0
      && !ServantAssetLoadManager_TypeInfo->_2.cctor_finished )
    {
      j_il2cpp_runtime_class_init_0(ServantAssetLoadManager_TypeInfo);
    }
    ServantAssetLoadManager__preloadServantVoice(v6, v7, 0, 0LL);
  }
}


bool __fastcall BattleData__LoadNStagePlayer(BattleData_o *this, const MethodInfo *method)
{
  __int64 v3; // x1
  __int64 v4; // x1
  __int64 v5; // x1
  __int64 v6; // x1
  __int64 v7; // x1
  BattleInfoData_o *battle_info; // x0
  struct System_Collections_Generic_List_BattleServantData__o *player_datalist; // x0
  BattleFieldEnvironmentData_o *FieldEnvData_k__BackingField; // x0
  Il2CppObject *current; // x21
  BattleBuffData_o *BuffData; // x0
  BattleInfoData_o *v13; // x0
  DeckData_o *WaveMyDeck; // x20
  System_Collections_Generic_IEnumerable_TSource__o *v15; // x0
  struct System_Int32_array *v16; // x0
  const MethodInfo *v17; // x2
  const MethodInfo *v18; // x1
  const MethodInfo *v19; // x1
  BattleLogic_o *logic; // x0
  System_Collections_Generic_List_Enumerator_T__o v22; // [xsp+8h] [xbp-58h] BYREF
  System_Collections_Generic_List_Enumerator_T__o v23; // [xsp+20h] [xbp-40h] BYREF

  if ( (byte_40F6AD2 & 1) == 0 )
  {
    sub_B16FFC(&Method_System_Linq_Enumerable_Repeat_int___, method);
    sub_B16FFC(&Method_System_Linq_Enumerable_ToArray_int___, v3);
    sub_B16FFC(&Method_System_Collections_Generic_List_Enumerator_BattleServantData__Dispose__, v4);
    sub_B16FFC(&Method_System_Collections_Generic_List_Enumerator_BattleServantData__MoveNext__, v5);
    sub_B16FFC(&Method_System_Collections_Generic_List_Enumerator_BattleServantData__get_Current__, v6);
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleServantData__GetEnumerator__, v7);
    byte_40F6AD2 = 1;
  }
  memset(&v23, 0, sizeof(v23));
  battle_info = this->fields.battle_info;
  if ( battle_info )
  {
    if ( BattleInfoData__IsWaveMyDecks(battle_info, 0LL) )
    {
      player_datalist = this->fields.player_datalist;
      if ( !player_datalist )
        goto LABEL_20;
      System_Collections_Generic_List_BattleLogicBuff_ReduceHpProcess_BuffInfo___GetEnumerator(
        &v22,
        (System_Collections_Generic_List_BattleLogicBuff_ReduceHpProcess_BuffInfo__o *)player_datalist,
        (const MethodInfo_2F26B54 *)Method_System_Collections_Generic_List_BattleServantData__GetEnumerator__);
      v23 = v22;
      while ( System_Collections_Generic_List_Enumerator_BattleLogicBuff_ReduceHpProcess_BuffInfo___MoveNext(
                &v23,
                (const MethodInfo_2074054 *)Method_System_Collections_Generic_List_Enumerator_BattleServantData__MoveNext__) )
      {
        FieldEnvData_k__BackingField = this->fields._FieldEnvData_k__BackingField;
        if ( !FieldEnvData_k__BackingField )
          sub_B170D4();
        current = v23.fields.current;
        BuffData = BattleFieldEnvironmentData__get_BuffData(FieldEnvData_k__BackingField, 0LL);
        if ( !current )
          sub_B170D4();
        if ( !BuffData )
          sub_B170D4();
        BattleBuffData__SubBuffFromDeadActorId(BuffData, (int32_t)current[1].monitor, 0, 0LL);
      }
      System_Collections_Generic_List_Enumerator_BattleLogicBuff_ReduceHpProcess_BuffInfo___Dispose(
        &v23,
        (const MethodInfo_2074050 *)Method_System_Collections_Generic_List_Enumerator_BattleServantData__Dispose__);
      v13 = this->fields.battle_info;
      if ( !v13 )
        goto LABEL_20;
      WaveMyDeck = BattleInfoData__GetWaveMyDeck(v13, this->fields.wavecount, 0LL);
      v15 = (System_Collections_Generic_IEnumerable_TSource__o *)System_Linq_Enumerable__Repeat_int_(
                                                                   -1,
                                                                   3,
                                                                   (const MethodInfo_19BDCB0 *)Method_System_Linq_Enumerable_Repeat_int___);
      v16 = System_Linq_Enumerable__ToArray_int_(
              v15,
              (const MethodInfo_19C4A28 *)Method_System_Linq_Enumerable_ToArray_int___);
      this->fields.p_entryid = v16;
      sub_B16F98(&this->fields.p_entryid, v16);
      BattleData__InitPlayerDataList(this, WaveMyDeck, v17);
      BattleData__createCommandCard(this, v18);
      BattleData__shuffleCommand(this, v19);
      logic = this->fields.logic;
      if ( !logic )
LABEL_20:
        sub_B170D4();
      BattleLogic__actPtPassiveSkill(logic, 0, 0LL);
      LOBYTE(battle_info) = 1;
    }
    else
    {
      LOBYTE(battle_info) = 0;
    }
  }
  return (char)battle_info;
}


System_Collections_Generic_List_int__o *__fastcall BattleData__LoadNoSkipDeadFirstIdList(
        BattleData_o *this,
        const MethodInfo *method)
{
  __int64 v2; // x1
  __int64 v3; // x1
  __int64 v4; // x1
  __int64 v5; // x1
  __int64 v6; // x1
  __int64 v7; // x1
  __int64 v8; // x1
  __int64 v9; // x1
  __int64 v10; // x1
  __int64 v11; // x1
  BattleData_c *v12; // x0
  System_String_o *NO_SKIP_DEAD_FIRST_ID_LIST_KEY; // x19
  System_String_o *String; // x19
  __int64 v15; // x1
  __int64 v16; // x2
  __int64 v17; // x3
  __int64 v18; // x4
  System_Collections_Generic_List_int__o *v19; // x19
  System_Char_array *v20; // x0
  __int64 v21; // x2
  __int64 v22; // x1
  __int64 v23; // x2
  __int64 v24; // x3
  __int64 v25; // x4
  System_Collections_Generic_IEnumerable_TSource__o *v26; // x19
  BattleData___c_c *v27; // x0
  struct BattleData___c_StaticFields *static_fields; // x8
  System_Func_BattleLogicBuff_ReduceHpProcess_BuffInfo__int__o *_9__270_0; // x20
  Il2CppObject *v30; // x21
  struct BattleData___c_StaticFields *v31; // x0
  System_Collections_Generic_IEnumerable_TSource__o *v32; // x0

  if ( (byte_40F6A15 & 1) == 0 )
  {
    sub_B16FFC(&BattleData_TypeInfo, method);
    sub_B16FFC(&char___TypeInfo, v2);
    sub_B16FFC(&EncryptedPlayerPrefs_TypeInfo, v3);
    sub_B16FFC(&Method_System_Linq_Enumerable_Select_string__int___, v4);
    sub_B16FFC(&Method_System_Linq_Enumerable_ToList_int___, v5);
    sub_B16FFC(&Method_System_Func_string__int___ctor__, v6);
    sub_B16FFC(&System_Func_string__int__TypeInfo, v7);
    sub_B16FFC(&Method_System_Collections_Generic_List_int___ctor__, v8);
    sub_B16FFC(&System_Collections_Generic_List_int__TypeInfo, v9);
    sub_B16FFC(&Method_BattleData___c__LoadNoSkipDeadFirstIdList_b__270_0__, v10);
    sub_B16FFC(&BattleData___c_TypeInfo, v11);
    byte_40F6A15 = 1;
  }
  v12 = BattleData_TypeInfo;
  if ( (BYTE3(BattleData_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0 && !BattleData_TypeInfo->_2.cctor_finished )
  {
    j_il2cpp_runtime_class_init_0(BattleData_TypeInfo);
    v12 = BattleData_TypeInfo;
  }
  NO_SKIP_DEAD_FIRST_ID_LIST_KEY = v12->static_fields->NO_SKIP_DEAD_FIRST_ID_LIST_KEY;
  if ( (BYTE3(EncryptedPlayerPrefs_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0
    && !EncryptedPlayerPrefs_TypeInfo->_2.cctor_finished )
  {
    j_il2cpp_runtime_class_init_0(EncryptedPlayerPrefs_TypeInfo);
  }
  String = EncryptedPlayerPrefs__GetString(NO_SKIP_DEAD_FIRST_ID_LIST_KEY, 0LL);
  if ( System_String__IsNullOrEmpty(String, 0LL) )
  {
    v19 = (System_Collections_Generic_List_int__o *)sub_B170CC(
                                                      System_Collections_Generic_List_int__TypeInfo,
                                                      v15,
                                                      v16,
                                                      v17,
                                                      v18);
    System_Collections_Generic_List_int____ctor(
      v19,
      (const MethodInfo_2F0F794 *)Method_System_Collections_Generic_List_int___ctor__);
  }
  else
  {
    v20 = (System_Char_array *)sub_B17014(char___TypeInfo, 1LL, v16);
    if ( !v20 )
      sub_B170D4();
    if ( !v20->max_length )
    {
      sub_B17100(v20, v20, v21);
      sub_B170A0();
    }
    v20->m_Items[2] = 44;
    if ( !String )
      sub_B170D4();
    v26 = (System_Collections_Generic_IEnumerable_TSource__o *)System_String__Split(String, v20, 0LL);
    v27 = BattleData___c_TypeInfo;
    if ( (BYTE3(BattleData___c_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0
      && !BattleData___c_TypeInfo->_2.cctor_finished )
    {
      j_il2cpp_runtime_class_init_0(BattleData___c_TypeInfo);
      v27 = BattleData___c_TypeInfo;
    }
    static_fields = v27->static_fields;
    _9__270_0 = (System_Func_BattleLogicBuff_ReduceHpProcess_BuffInfo__int__o *)static_fields->__9__270_0;
    if ( !_9__270_0 )
    {
      if ( (BYTE3(v27->vtable._0_Equals.methodPtr) & 4) != 0 && !v27->_2.cctor_finished )
      {
        j_il2cpp_runtime_class_init_0(v27);
        static_fields = BattleData___c_TypeInfo->static_fields;
      }
      v30 = (Il2CppObject *)static_fields->__9;
      _9__270_0 = (System_Func_BattleLogicBuff_ReduceHpProcess_BuffInfo__int__o *)sub_B170CC(
                                                                                    System_Func_string__int__TypeInfo,
                                                                                    v22,
                                                                                    v23,
                                                                                    v24,
                                                                                    v25);
      System_Func_BattleLogicBuff_ReduceHpProcess_BuffInfo__int____ctor(
        _9__270_0,
        v30,
        Method_BattleData___c__LoadNoSkipDeadFirstIdList_b__270_0__,
        (const MethodInfo_2B6B6EC *)Method_System_Func_string__int___ctor__);
      v31 = BattleData___c_TypeInfo->static_fields;
      v31->__9__270_0 = (struct System_Func_string__int__o *)_9__270_0;
      sub_B16F98(&v31->__9__270_0, _9__270_0);
    }
    v32 = (System_Collections_Generic_IEnumerable_TSource__o *)System_Linq_Enumerable__Select_BattleLogicBuff_ReduceHpProcess_BuffInfo__int_(
                                                                 v26,
                                                                 (System_Func_TSource__TResult__o *)_9__270_0,
                                                                 (const MethodInfo_19C05C4 *)Method_System_Linq_Enumerable_Select_string__int___);
    return (System_Collections_Generic_List_int__o *)System_Linq_Enumerable__ToList_int_(
                                                       v32,
                                                       (const MethodInfo_19C78D8 *)Method_System_Linq_Enumerable_ToList_int___);
  }
  return v19;
}


void __fastcall BattleData__LossTemporaryCommandSpell(BattleData_o *this, int32_t val, const MethodInfo *method)
{
  this->fields.temporarySpell = (this->fields.temporarySpell - val) & ~((this->fields.temporarySpell - val) >> 31);
}


// local variable allocation has failed, the output may be wrong!
void __fastcall BattleData__PartsIntoTheBody(BattleData_o *this, const MethodInfo *method)
{
  const MethodInfo *v2; // x2
  __int64 v4; // x1
  __int64 v5; // x1
  __int64 v6; // x1
  __int64 v7; // x1
  __int64 v8; // x1
  UnityEngine_Component_o *PartsActor; // x0
  UnityEngine_Component_o *v10; // x20
  UnityEngine_Transform_o *transform; // x0
  struct BattlePerformance_o *perf; // x8
  UnityEngine_Transform_o *v13; // x21
  int v14; // s0
  struct System_Collections_Generic_List_BattleServantData__o *enemy_datalist; // x21
  __int64 v18; // x25
  int size; // w8
  unsigned int v20; // w23
  BattleServantData_o *v21; // x0
  bool isMultiTargetUp; // w0
  __int64 *v23; // x8
  struct System_Collections_Generic_List_BattleServantData__o *v24; // x21
  BattleServantData_o *v25; // x0
  bool isMultiTargetUnder; // w0
  struct System_Collections_Generic_List_BattleServantData__o *v27; // x28
  System_String_o *v28; // x22
  __int64 v29; // x8
  UnityEngine_Component_o *ServantActor; // x21
  UnityEngine_Transform_o *v31; // x0
  const MethodInfo *v32; // x3
  UnityEngine_Component_o *TransformChild; // x22
  UnityEngine_Transform_o *v34; // x0
  UnityEngine_Transform_o *v35; // x23
  UnityEngine_Transform_o *v36; // x0
  UnityEngine_Transform_o *v37; // x22
  int v38; // s0
  UnityEngine_Component_o *klass; // x0
  UnityEngine_GameObject_o *gameObject; // x0
  UnityEngine_Behaviour_o *Component_WebViewObject; // x19

  if ( (byte_40F6AA1 & 1) == 0 )
  {
    sub_B16FFC(&Method_UnityEngine_Component_GetComponent_BillBoard___, method);
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleServantData__get_Count__, v4);
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleServantData__get_Item__, v5);
    sub_B16FFC(&UnityEngine_Object_TypeInfo, v6);
    sub_B16FFC(&StringLiteral_18250/*"en_Parts_Up01"*/, v7);
    sub_B16FFC(&StringLiteral_18249/*"en_Parts_Under01"*/, v8);
    byte_40F6AA1 = 1;
  }
  if ( this->fields.isMultiTargetBattle )
  {
    PartsActor = (UnityEngine_Component_o *)BattleData__GetPartsActor(this, 1, v2);
    if ( !PartsActor )
      goto LABEL_49;
    v10 = PartsActor;
    transform = UnityEngine_Component__get_transform(PartsActor, 0LL);
    perf = this->fields.perf;
    if ( !perf )
      goto LABEL_49;
    if ( !transform )
      goto LABEL_49;
    UnityEngine_Transform__set_parent(transform, perf->fields.root_field, 0LL);
    v13 = UnityEngine_Component__get_transform(v10, 0LL);
    *(UnityEngine_Vector3_o *)&v14 = UnityEngine_Vector3__get_zero(0LL);
    if ( !v13 )
      goto LABEL_49;
    UnityEngine_Transform__set_localPosition(v13, *(UnityEngine_Vector3_o *)&v14, 0LL);
    enemy_datalist = this->fields.enemy_datalist;
    if ( !enemy_datalist )
      goto LABEL_49;
    v18 = 4LL;
    while ( 1 )
    {
      size = enemy_datalist->fields._size;
      v20 = v18 - 4;
      if ( (int)v18 - 4 >= size )
        break;
      if ( size <= v20 )
        System_ThrowHelper__ThrowArgumentOutOfRangeException_41329284(0LL);
      v21 = (BattleServantData_o *)*((_QWORD *)&enemy_datalist->fields._items->obj.klass + v18);
      if ( !v21 )
        goto LABEL_49;
      isMultiTargetUp = BattleServantData__isMultiTargetUp(v21, 0LL);
      v23 = &StringLiteral_18250/*"en_Parts_Up01"*/;
      if ( isMultiTargetUp )
        goto LABEL_20;
      v24 = this->fields.enemy_datalist;
      if ( !v24 )
        goto LABEL_49;
      if ( v24->fields._size <= v20 )
        System_ThrowHelper__ThrowArgumentOutOfRangeException_41329284(0LL);
      v25 = (BattleServantData_o *)*((_QWORD *)&v24->fields._items->obj.klass + v18);
      if ( !v25 )
        goto LABEL_49;
      isMultiTargetUnder = BattleServantData__isMultiTargetUnder(v25, 0LL);
      v23 = &StringLiteral_18249/*"en_Parts_Under01"*/;
      if ( isMultiTargetUnder )
      {
LABEL_20:
        v27 = this->fields.enemy_datalist;
        if ( !v27 )
          goto LABEL_49;
        v28 = (System_String_o *)*v23;
        if ( v27->fields._size <= v20 )
          System_ThrowHelper__ThrowArgumentOutOfRangeException_41329284(0LL);
        v29 = *((_QWORD *)&v27->fields._items->obj.klass + v18);
        if ( !v29 || !this->fields.perf )
          goto LABEL_49;
        ServantActor = (UnityEngine_Component_o *)BattlePerformance__getServantActor(
                                                    this->fields.perf,
                                                    *(_DWORD *)(v29 + 24),
                                                    0LL);
        if ( (BYTE3(UnityEngine_Object_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0
          && !UnityEngine_Object_TypeInfo->_2.cctor_finished )
        {
          j_il2cpp_runtime_class_init_0(UnityEngine_Object_TypeInfo);
        }
        if ( !UnityEngine_Object__op_Equality((UnityEngine_Object_o *)ServantActor, 0LL, 0LL) )
        {
          v31 = UnityEngine_Component__get_transform(v10, 0LL);
          TransformChild = (UnityEngine_Component_o *)BattleData__FindTransformChild(this, v31, v28, v32);
          if ( (BYTE3(UnityEngine_Object_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0
            && !UnityEngine_Object_TypeInfo->_2.cctor_finished )
          {
            j_il2cpp_runtime_class_init_0(UnityEngine_Object_TypeInfo);
          }
          if ( UnityEngine_Object__op_Inequality((UnityEngine_Object_o *)TransformChild, 0LL, 0LL) )
          {
            if ( !ServantActor )
              goto LABEL_49;
            v34 = UnityEngine_Component__get_transform(ServantActor, 0LL);
            if ( !TransformChild )
              goto LABEL_49;
            v35 = v34;
            v36 = UnityEngine_Component__get_transform(TransformChild, 0LL);
            if ( !v35 )
              goto LABEL_49;
            UnityEngine_Transform__set_parent(v35, v36, 0LL);
            v37 = UnityEngine_Component__get_transform(ServantActor, 0LL);
            *(UnityEngine_Vector3_o *)&v38 = UnityEngine_Vector3__get_zero(0LL);
            if ( !v37 )
              goto LABEL_49;
            UnityEngine_Transform__set_localPosition(v37, *(UnityEngine_Vector3_o *)&v38, 0LL);
            klass = (UnityEngine_Component_o *)ServantActor[2].klass;
            if ( !klass )
              goto LABEL_49;
            gameObject = UnityEngine_Component__get_gameObject(klass, 0LL);
            if ( !gameObject )
              goto LABEL_49;
            UnityEngine_GameObject__SetActive(gameObject, 0, 0LL);
          }
        }
      }
      enemy_datalist = this->fields.enemy_datalist;
      ++v18;
      if ( !enemy_datalist )
        goto LABEL_49;
    }
    Component_WebViewObject = (UnityEngine_Behaviour_o *)UnityEngine_Component__GetComponent_WebViewObject_(
                                                           v10,
                                                           (const MethodInfo_18BD428 *)Method_UnityEngine_Component_GetComponent_BillBoard___);
    if ( (BYTE3(UnityEngine_Object_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0
      && !UnityEngine_Object_TypeInfo->_2.cctor_finished )
    {
      j_il2cpp_runtime_class_init_0(UnityEngine_Object_TypeInfo);
    }
    if ( UnityEngine_Object__op_Inequality((UnityEngine_Object_o *)Component_WebViewObject, 0LL, 0LL) )
    {
      if ( Component_WebViewObject )
      {
        UnityEngine_Behaviour__set_enabled(Component_WebViewObject, 1, 0LL);
        return;
      }
LABEL_49:
      sub_B170D4();
    }
  }
}


System_Collections_IEnumerator_o *__fastcall BattleData__PartsIntoTheBodyDelay(
        BattleData_o *this,
        const MethodInfo *method)
{
  __int64 v2; // x2
  __int64 v3; // x3
  __int64 v4; // x4
  BattleData__PartsIntoTheBodyDelay_d__562_o *v6; // x20

  if ( (byte_40F6A9E & 1) == 0 )
  {
    sub_B16FFC(&BattleData__PartsIntoTheBodyDelay_d__562_TypeInfo, method);
    byte_40F6A9E = 1;
  }
  v6 = (BattleData__PartsIntoTheBodyDelay_d__562_o *)sub_B170CC(
                                                       BattleData__PartsIntoTheBodyDelay_d__562_TypeInfo,
                                                       method,
                                                       v2,
                                                       v3,
                                                       v4);
  BattleData__PartsIntoTheBodyDelay_d__562___ctor(v6, 0, 0LL);
  if ( !v6 )
    sub_B170D4();
  v6->fields.__4__this = this;
  sub_B16F98(&v6->fields.__4__this, this);
  return (System_Collections_IEnumerator_o *)v6;
}


void __fastcall BattleData__RefreshAllSubServantDeckIndex(BattleData_o *this, const MethodInfo *method)
{
  __int64 v2; // x2
  __int64 v3; // x3
  __int64 v4; // x4
  __int64 v6; // x1
  __int64 v7; // x1
  __int64 v8; // x1
  System_Action_bool__o *v9; // x20

  if ( (byte_40F6A1F & 1) == 0 )
  {
    sub_B16FFC(&Method_System_Action_bool__Invoke__, method);
    sub_B16FFC(&Method_System_Action_bool___ctor__, v6);
    sub_B16FFC(&System_Action_bool__TypeInfo, v7);
    sub_B16FFC(&Method_BattleData__RefreshAllSubServantDeckIndex_b__324_0__, v8);
    byte_40F6A1F = 1;
  }
  v9 = (System_Action_bool__o *)sub_B170CC(System_Action_bool__TypeInfo, method, v2, v3, v4);
  System_Action_bool____ctor(
    v9,
    (Il2CppObject *)this,
    Method_BattleData__RefreshAllSubServantDeckIndex_b__324_0__,
    (const MethodInfo_24B33C8 *)Method_System_Action_bool___ctor__);
  if ( !v9 )
    sub_B170D4();
  System_Action_bool___Invoke(v9, 0, (const MethodInfo_24B33DC *)Method_System_Action_bool__Invoke__);
  System_Action_bool___Invoke(v9, 1, (const MethodInfo_24B33DC *)Method_System_Action_bool__Invoke__);
}


void __fastcall BattleData__RegisterItemDroppedSkillShiftInfo(
        BattleData_o *this,
        BattleServantData_o *svtData,
        const MethodInfo *method)
{
  ItemDroppedSkillShiftInfo_o *itemDroppedSkillShiftInfo; // x0

  itemDroppedSkillShiftInfo = this->fields.itemDroppedSkillShiftInfo;
  if ( !itemDroppedSkillShiftInfo )
    sub_B170D4();
  ItemDroppedSkillShiftInfo__Register(itemDroppedSkillShiftInfo, svtData, 0LL);
}


// local variable allocation has failed, the output may be wrong!
void __fastcall BattleData__RemoveDoNotSelectCommandCardBuff(
        BattleData_o *this,
        int32_t buffId,
        BattleServantData_o *target,
        const MethodInfo *method)
{
  __int64 v7; // x1
  __int64 v8; // x1
  DataMasterBase_WarMaster__WarEntity__int__o *Master_WarQuestSelectionMaster; // x0
  const MethodInfo *v10; // x2
  WarEntity_o *entity; // [xsp+8h] [xbp-28h] BYREF

  if ( (byte_40F6AD5 & 1) == 0 )
  {
    sub_B16FFC(&Method_DataManager_GetMaster_BuffMaster___, *(_QWORD *)&buffId);
    sub_B16FFC(&DataManager_TypeInfo, v7);
    sub_B16FFC(&Method_DataMasterBase_BuffMaster__BuffEntity__int__TryGetEntity__, v8);
    byte_40F6AD5 = 1;
  }
  entity = 0LL;
  if ( (BYTE3(DataManager_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0 && !DataManager_TypeInfo->_2.cctor_finished )
    j_il2cpp_runtime_class_init_0(DataManager_TypeInfo);
  Master_WarQuestSelectionMaster = (DataMasterBase_WarMaster__WarEntity__int__o *)DataManager__GetMaster_WarQuestSelectionMaster_((const MethodInfo_18C3224 *)Method_DataManager_GetMaster_BuffMaster___);
  if ( !Master_WarQuestSelectionMaster )
    goto LABEL_12;
  if ( !DataMasterBase_WarMaster__WarEntity__int___TryGetEntity(
          Master_WarQuestSelectionMaster,
          &entity,
          buffId,
          (const MethodInfo_266F3E4 *)Method_DataMasterBase_BuffMaster__BuffEntity__int__TryGetEntity__) )
    return;
  if ( !entity )
LABEL_12:
    sub_B170D4();
  if ( BuffEntity__checkBuffType((BuffEntity_o *)entity, 140, 0LL) )
    BattleData__SubBuffFromPT_18778888(this, target, v10);
}


void __fastcall BattleData__RemoveEntry(BattleData_o *this, BattleServantData_o *servantData, const MethodInfo *method)
{
  const MethodInfo *v3; // x3
  _BOOL4 isEnemy; // w8
  __int64 v5; // x9
  __int64 v7; // x9
  int v8; // w10
  __int64 v9; // x1

  if ( servantData )
  {
    isEnemy = servantData->fields.isEnemy;
    v5 = 288LL;
    if ( servantData->fields.isEnemy )
      v5 = 296LL;
    v7 = *(__int64 *)((char *)&this->klass + v5);
    if ( !v7 )
      sub_B170D4();
    v8 = *(_DWORD *)(v7 + 24);
    if ( v8 >= 1 )
    {
      v9 = 0LL;
      while ( 1 )
      {
        if ( (unsigned int)v9 >= v8 )
        {
          sub_B17100(this, v9, method);
          sub_B170A0();
        }
        if ( *(_DWORD *)(v7 + 4LL * (int)v9 + 32) == servantData->fields.uniqueId )
          break;
        v9 = (unsigned int)(v9 + 1);
        if ( (int)v9 >= v8 )
          return;
      }
      BattleData__FreeEntryByIndex(this, v9, isEnemy, v3);
      servantData->fields.isEntry = 0;
    }
  }
}


void __fastcall BattleData__RenewTurnDamageRecord(BattleData_o *this, const MethodInfo *method)
{
  QuestEntity_o *quest_ent; // x0
  int64_t totalDamageInTurn; // x8

  quest_ent = this->fields.quest_ent;
  if ( !quest_ent )
    sub_B170D4();
  if ( QuestEntity__HasFlag(quest_ent, 0x4000000LL, 0LL) )
  {
    totalDamageInTurn = this->fields.totalDamageInTurn;
    if ( totalDamageInTurn > this->fields.maxTurnDamageInBattle )
      this->fields.maxTurnDamageInBattle = totalDamageInTurn;
    this->fields.totalDamageInTurn = 0LL;
  }
}


void __fastcall BattleData__ResetAllCriticalInfo(BattleData_o *this, const MethodInfo *method)
{
  this->fields.prevCriticalstars = 0;
  *(_OWORD *)&this->fields.criticalstars = 0u;
}


void __fastcall BattleData__ResetEnemyEntryCount(BattleData_o *this, const MethodInfo *method)
{
  this->fields._EnemyEntryCountOnThisTurn_k__BackingField = 0;
}


// local variable allocation has failed, the output may be wrong!
void __fastcall BattleData__ResetFieldEnemyUseBuff(
        BattleData_o *this,
        int32_t targetType,
        bool isIntervalOnly,
        const MethodInfo *method)
{
  __int64 v4; // x4
  __int64 v8; // x1
  __int64 v9; // x1
  __int64 v10; // x1
  __int64 v11; // x1
  BattleData___c__DisplayClass722_0_o *v12; // x22
  const MethodInfo *v13; // x2
  System_Collections_Generic_IEnumerable_T__o *FieldEnemyServantList; // x19
  __int64 v15; // x1
  __int64 v16; // x2
  __int64 v17; // x3
  __int64 v18; // x4
  System_Action_DrawLotsDisplayMessage_DisplayedInGroup_SaveData__o *v19; // x20

  if ( (byte_40F6AD3 & 1) == 0 )
  {
    sub_B16FFC(&Method_System_Action_BattleServantData___ctor__, *(_QWORD *)&targetType);
    sub_B16FFC(&System_Action_BattleServantData__TypeInfo, v8);
    sub_B16FFC(&Method_BasicHelper_ForEach_BattleServantData___, v9);
    sub_B16FFC(&Method_BattleData___c__DisplayClass722_0__ResetFieldEnemyUseBuff_b__0__, v10);
    sub_B16FFC(&BattleData___c__DisplayClass722_0_TypeInfo, v11);
    byte_40F6AD3 = 1;
  }
  v12 = (BattleData___c__DisplayClass722_0_o *)sub_B170CC(
                                                 BattleData___c__DisplayClass722_0_TypeInfo,
                                                 *(_QWORD *)&targetType,
                                                 isIntervalOnly,
                                                 method,
                                                 v4);
  BattleData___c__DisplayClass722_0___ctor(v12, 0LL);
  if ( !v12 )
    sub_B170D4();
  v12->fields.targetType = targetType;
  v12->fields.isIntervalOnly = isIntervalOnly;
  FieldEnemyServantList = (System_Collections_Generic_IEnumerable_T__o *)BattleData__getFieldEnemyServantList(
                                                                           this,
                                                                           0,
                                                                           v13);
  v19 = (System_Action_DrawLotsDisplayMessage_DisplayedInGroup_SaveData__o *)sub_B170CC(
                                                                               System_Action_BattleServantData__TypeInfo,
                                                                               v15,
                                                                               v16,
                                                                               v17,
                                                                               v18);
  System_Action_DrawLotsDisplayMessage_DisplayedInGroup_SaveData____ctor(
    v19,
    (Il2CppObject *)v12,
    Method_BattleData___c__DisplayClass722_0__ResetFieldEnemyUseBuff_b__0__,
    (const MethodInfo_24B7310 *)Method_System_Action_BattleServantData___ctor__);
  BasicHelper__ForEach_DrawLotsDisplayMessage_DisplayedInGroup_SaveData_(
    FieldEnemyServantList,
    (System_Action_T__o *)v19,
    (const MethodInfo_18B756C *)Method_BasicHelper_ForEach_BattleServantData___);
}


void __fastcall BattleData__ResetFreshBuffList(BattleData_o *this, const MethodInfo *method)
{
  struct System_Collections_Generic_List_BattleActionData_BuffData__o *freshBuffDataList; // x0

  if ( (byte_40F6A40 & 1) == 0 )
  {
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleActionData_BuffData__Clear__, method);
    byte_40F6A40 = 1;
  }
  freshBuffDataList = this->fields.freshBuffDataList;
  if ( !freshBuffDataList )
    sub_B170D4();
  System_Collections_Generic_List_XWeaponTrail_Element___Clear(
    (System_Collections_Generic_List_XWeaponTrail_Element__o *)freshBuffDataList,
    (const MethodInfo_2F260E0 *)Method_System_Collections_Generic_List_BattleActionData_BuffData__Clear__);
}


void __fastcall BattleData__ResetPerformedVals(BattleData_o *this, const MethodInfo *method)
{
  struct System_Collections_Generic_List_DataVals__o *performedValsList; // x0

  if ( (byte_40F6A3D & 1) == 0 )
  {
    sub_B16FFC(&Method_System_Collections_Generic_List_DataVals__Clear__, method);
    byte_40F6A3D = 1;
  }
  performedValsList = this->fields.performedValsList;
  if ( !performedValsList )
    sub_B170D4();
  System_Collections_Generic_List_XWeaponTrail_Element___Clear(
    (System_Collections_Generic_List_XWeaponTrail_Element__o *)performedValsList,
    (const MethodInfo_2F260E0 *)Method_System_Collections_Generic_List_DataVals__Clear__);
}


void __fastcall BattleData__ResetWasAttackTargetId(BattleData_o *this, const MethodInfo *method)
{
  const MethodInfo *v2; // x2
  struct System_Int32_array *p_entryid; // x20
  __int64 v4; // x8
  BattleData_o *v5; // x19
  unsigned __int64 v6; // x21
  struct System_Int32_array *e_entryid; // x20
  __int64 v8; // x8
  unsigned __int64 v9; // x21

  p_entryid = this->fields.p_entryid;
  if ( !p_entryid )
    goto LABEL_17;
  v4 = *(_QWORD *)&p_entryid->max_length;
  v5 = this;
  if ( (int)v4 >= 1 )
  {
    v6 = 0LL;
    while ( v6 < (unsigned int)v4 )
    {
      this = (BattleData_o *)BattleData__getPlayerServantData(v5, p_entryid->m_Items[v6 + 1], v2);
      if ( this )
        HIDWORD(this->fields.chainTypeList) = -1;
      LODWORD(v4) = p_entryid->max_length;
      if ( (__int64)++v6 >= (int)v4 )
        goto LABEL_8;
    }
LABEL_16:
    sub_B17100(this, method, v2);
    sub_B170A0();
  }
LABEL_8:
  e_entryid = v5->fields.e_entryid;
  if ( !e_entryid )
LABEL_17:
    sub_B170D4();
  v8 = *(_QWORD *)&e_entryid->max_length;
  if ( (int)v8 >= 1 )
  {
    v9 = 0LL;
    while ( v9 < (unsigned int)v8 )
    {
      this = (BattleData_o *)BattleData__getEnemyServantData(v5, e_entryid->m_Items[v9 + 1], v2);
      if ( this )
        HIDWORD(this->fields.chainTypeList) = -1;
      LODWORD(v8) = e_entryid->max_length;
      if ( (__int64)++v9 >= (int)v8 )
        return;
    }
    goto LABEL_16;
  }
}


// local variable allocation has failed, the output may be wrong!
void __fastcall BattleData__SaveBattleUseItemParameter(System_String_o *param, bool save, const MethodInfo *method)
{
  __int64 v5; // x1

  if ( (byte_40F6A7B & 1) == 0 )
  {
    sub_B16FFC(&EncryptedPlayerPrefs_TypeInfo, save);
    sub_B16FFC(&StringLiteral_2526/*"BATTLE_USE_ITEM_SAVEKEY"*/, v5);
    byte_40F6A7B = 1;
  }
  if ( (BYTE3(EncryptedPlayerPrefs_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0
    && !EncryptedPlayerPrefs_TypeInfo->_2.cctor_finished )
  {
    j_il2cpp_runtime_class_init_0(EncryptedPlayerPrefs_TypeInfo);
  }
  EncryptedPlayerPrefs__SetString((System_String_o *)StringLiteral_2526/*"BATTLE_USE_ITEM_SAVEKEY"*/, param, 0LL);
  if ( save )
    UnityEngine_PlayerPrefs__Save(0LL);
}


// local variable allocation has failed, the output may be wrong!
void __fastcall BattleData__SaveContinueItemId(int32_t continueItemId, bool save, const MethodInfo *method)
{
  __int64 v5; // x1

  if ( (byte_40F6A79 & 1) == 0 )
  {
    sub_B16FFC(&EncryptedPlayerPrefs_TypeInfo, save);
    sub_B16FFC(&StringLiteral_3375/*"CONTINUE_ITEM_SAVEKEY"*/, v5);
    byte_40F6A79 = 1;
  }
  if ( (BYTE3(EncryptedPlayerPrefs_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0
    && !EncryptedPlayerPrefs_TypeInfo->_2.cctor_finished )
  {
    j_il2cpp_runtime_class_init_0(EncryptedPlayerPrefs_TypeInfo);
  }
  EncryptedPlayerPrefs__SetInt((System_String_o *)StringLiteral_3375/*"CONTINUE_ITEM_SAVEKEY"*/, continueItemId, 0LL);
  if ( save )
    UnityEngine_PlayerPrefs__Save(0LL);
}


void __fastcall BattleData__SaveNoSkipDeadFirstIdList(BattleData_o *this, const MethodInfo *method)
{
  __int64 v3; // x1
  __int64 v4; // x1
  __int64 v5; // x1
  __int64 v6; // x1
  __int64 v7; // x1
  __int64 v8; // x1
  __int64 v9; // x1
  __int64 v10; // x1
  __int64 v11; // x1
  __int64 v12; // x1
  __int64 v13; // x1
  struct System_Collections_Generic_List_int__o *noSkipDeadFirstIdUseThisTurn; // x0
  System_Collections_Generic_List_int__o **p_noSkipDeadFirstIdList; // x21
  struct System_Collections_Generic_List_int__o *NoSkipDeadFirstIdList; // x0
  int32_t current; // w20
  __int64 v18; // x1
  __int64 v19; // x2
  __int64 v20; // x3
  __int64 v21; // x4
  System_Text_StringBuilder_o *v22; // x20
  int v23; // w21
  int32_t Length; // w0
  BattleData_c *v25; // x0
  System_String_o *NO_SKIP_DEAD_FIRST_ID_LIST_KEY; // x21
  System_String_o *v27; // x20
  System_Collections_Generic_List_int__o *v28; // x0
  System_Collections_Generic_List_Enumerator_int__o v29; // [xsp+8h] [xbp-88h] BYREF
  int v30[2]; // [xsp+20h] [xbp-70h]
  int v31; // [xsp+28h] [xbp-68h]
  System_Collections_Generic_List_Enumerator_int__o v32; // [xsp+30h] [xbp-60h] BYREF

  if ( (byte_40F6A16 & 1) == 0 )
  {
    sub_B16FFC(&BattleData_TypeInfo, method);
    sub_B16FFC(&EncryptedPlayerPrefs_TypeInfo, v3);
    sub_B16FFC(&Method_System_Collections_Generic_List_Enumerator_int__Dispose__, v4);
    sub_B16FFC(&Method_System_Collections_Generic_List_Enumerator_int__MoveNext__, v5);
    sub_B16FFC(&Method_System_Collections_Generic_List_Enumerator_int__get_Current__, v6);
    sub_B16FFC(&Method_System_Collections_Generic_List_int__Add__, v7);
    sub_B16FFC(&Method_System_Collections_Generic_List_int__Clear__, v8);
    sub_B16FFC(&Method_System_Collections_Generic_List_int__Contains__, v9);
    sub_B16FFC(&Method_System_Collections_Generic_List_int__GetEnumerator__, v10);
    sub_B16FFC(&Method_System_Collections_Generic_List_int__get_Count__, v11);
    sub_B16FFC(&System_Text_StringBuilder_TypeInfo, v12);
    sub_B16FFC(&StringLiteral_698/*","*/, v13);
    byte_40F6A16 = 1;
  }
  memset(&v32, 0, sizeof(v32));
  v31 = 0;
  noSkipDeadFirstIdUseThisTurn = this->fields.noSkipDeadFirstIdUseThisTurn;
  if ( !noSkipDeadFirstIdUseThisTurn )
    goto LABEL_36;
  if ( !noSkipDeadFirstIdUseThisTurn->fields._size )
    return;
  p_noSkipDeadFirstIdList = &this->fields.noSkipDeadFirstIdList;
  if ( !this->fields.noSkipDeadFirstIdList )
  {
    NoSkipDeadFirstIdList = BattleData__LoadNoSkipDeadFirstIdList((BattleData_o *)noSkipDeadFirstIdUseThisTurn, method);
    this->fields.noSkipDeadFirstIdList = NoSkipDeadFirstIdList;
    sub_B16F98(&this->fields.noSkipDeadFirstIdList, NoSkipDeadFirstIdList);
    noSkipDeadFirstIdUseThisTurn = this->fields.noSkipDeadFirstIdUseThisTurn;
    if ( !noSkipDeadFirstIdUseThisTurn )
      goto LABEL_36;
  }
  System_Collections_Generic_List_int___GetEnumerator(
    (System_Collections_Generic_List_Enumerator_T__o *)&v29,
    noSkipDeadFirstIdUseThisTurn,
    (const MethodInfo_2F11334 *)Method_System_Collections_Generic_List_int__GetEnumerator__);
  v32 = v29;
  while ( System_Collections_Generic_List_Enumerator_int___MoveNext(
            &v32,
            (const MethodInfo_2071AE8 *)Method_System_Collections_Generic_List_Enumerator_int__MoveNext__) )
  {
    if ( !*p_noSkipDeadFirstIdList )
      sub_B170D4();
    current = v32.fields.current;
    if ( !System_Collections_Generic_List_int___Contains(
            *p_noSkipDeadFirstIdList,
            v32.fields.current,
            (const MethodInfo_2F10944 *)Method_System_Collections_Generic_List_int__Contains__) )
    {
      if ( !*p_noSkipDeadFirstIdList )
        sub_B170D4();
      System_Collections_Generic_List_int___Add(
        *p_noSkipDeadFirstIdList,
        current,
        (const MethodInfo_2F104F0 *)Method_System_Collections_Generic_List_int__Add__);
    }
  }
  v30[0] = 107;
  v31 = 1;
  System_Collections_Generic_List_Enumerator_int___Dispose(
    &v32,
    (const MethodInfo_2071AE4 *)Method_System_Collections_Generic_List_Enumerator_int__Dispose__);
  v31 = 0;
  v22 = (System_Text_StringBuilder_o *)sub_B170CC(System_Text_StringBuilder_TypeInfo, v18, v19, v20, v21);
  System_Text_StringBuilder___ctor(v22, 0LL);
  if ( !*p_noSkipDeadFirstIdList )
    goto LABEL_36;
  System_Collections_Generic_List_int___GetEnumerator(
    (System_Collections_Generic_List_Enumerator_T__o *)&v29,
    *p_noSkipDeadFirstIdList,
    (const MethodInfo_2F11334 *)Method_System_Collections_Generic_List_int__GetEnumerator__);
  v32 = v29;
  while ( System_Collections_Generic_List_Enumerator_int___MoveNext(
            &v32,
            (const MethodInfo_2071AE8 *)Method_System_Collections_Generic_List_Enumerator_int__MoveNext__) )
  {
    if ( !v22 )
      sub_B170D4();
    System_Text_StringBuilder__Append_41917580(v22, v32.fields.current, 0LL);
    System_Text_StringBuilder__Append_41914240(v22, (System_String_o *)StringLiteral_698/*","*/, 0LL);
  }
  v30[0] = 180;
  v23 = ++v31;
  System_Collections_Generic_List_Enumerator_int___Dispose(
    &v32,
    (const MethodInfo_2071AE4 *)Method_System_Collections_Generic_List_Enumerator_int__Dispose__);
  if ( v23 && v30[v23 - 1] == 180 )
    v31 = v23 - 1;
  if ( !v22 )
    goto LABEL_36;
  if ( System_Text_StringBuilder__get_Length(v22, 0LL) >= 1 )
  {
    Length = System_Text_StringBuilder__get_Length(v22, 0LL);
    System_Text_StringBuilder__Remove(v22, Length - 1, 1, 0LL);
  }
  v25 = BattleData_TypeInfo;
  if ( (BYTE3(BattleData_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0 && !BattleData_TypeInfo->_2.cctor_finished )
  {
    j_il2cpp_runtime_class_init_0(BattleData_TypeInfo);
    v25 = BattleData_TypeInfo;
  }
  NO_SKIP_DEAD_FIRST_ID_LIST_KEY = v25->static_fields->NO_SKIP_DEAD_FIRST_ID_LIST_KEY;
  v27 = (System_String_o *)((__int64 (__fastcall *)(System_Text_StringBuilder_o *, Il2CppMethodPointer))v22->klass->vtable._3_ToString.method)(
                             v22,
                             v22->klass->vtable._4_System_Runtime_Serialization_ISerializable_GetObjectData.methodPtr);
  if ( (BYTE3(EncryptedPlayerPrefs_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0
    && !EncryptedPlayerPrefs_TypeInfo->_2.cctor_finished )
  {
    j_il2cpp_runtime_class_init_0(EncryptedPlayerPrefs_TypeInfo);
  }
  EncryptedPlayerPrefs__SetString(NO_SKIP_DEAD_FIRST_ID_LIST_KEY, v27, 0LL);
  v28 = this->fields.noSkipDeadFirstIdUseThisTurn;
  if ( !v28 )
LABEL_36:
    sub_B170D4();
  System_Collections_Generic_List_int___Clear(
    v28,
    (const MethodInfo_2F108FC *)Method_System_Collections_Generic_List_int__Clear__);
}


// local variable allocation has failed, the output may be wrong!
void __fastcall BattleData__SaveServantCommonFlag(int32_t servantId, int32_t commonFlag, const MethodInfo *method)
{
  __int64 v5; // x1
  __int64 v6; // x1
  __int64 v7; // x1
  __int64 v8; // x1
  __int64 v9; // x1
  __int64 v10; // x1
  __int64 v11; // x1
  __int64 v12; // x1
  __int64 v13; // x1
  __int64 v14; // x1
  __int64 v15; // x1
  __int64 v16; // x1
  __int64 v17; // x1
  __int64 v18; // x1
  System_String_o *v19; // x19
  BattleData_c *inited; // x0
  System_Collections_Generic_Dictionary_int__int__o *SavedServantCommonFlagDict; // x0
  System_Collections_Generic_Dictionary_int__int__o *v22; // x22
  Il2CppObject *v23; // x21
  Il2CppObject *v24; // x0
  System_String_o *v25; // x19
  System_String_o *v26; // x0
  System_String_o *v27; // x1
  System_String_o *Empty; // x20
  int32_t key_high; // x26^4
  Il2CppObject *v30; // x21
  Il2CppObject *v31; // x2
  System_String_o *v32; // x1
  System_Collections_Generic_Dictionary_Enumerator_TKey__TValue__o v33; // [xsp+8h] [xbp-88h] BYREF
  System_Collections_Generic_Dictionary_Enumerator_TKey__TValue__o v34; // [xsp+30h] [xbp-60h] BYREF

  if ( (byte_40F6ABC & 1) == 0 )
  {
    sub_B16FFC(&BattleData_TypeInfo, *(_QWORD *)&commonFlag);
    sub_B16FFC(&Method_System_Collections_Generic_Dictionary_int__int__Add__, v5);
    sub_B16FFC(&Method_System_Collections_Generic_Dictionary_int__int__ContainsKey__, v6);
    sub_B16FFC(&Method_System_Collections_Generic_Dictionary_int__int__GetEnumerator__, v7);
    sub_B16FFC(&Method_System_Collections_Generic_Dictionary_int__int__set_Item__, v8);
    sub_B16FFC(&EncryptedPlayerPrefs_TypeInfo, v9);
    sub_B16FFC(&Method_System_Collections_Generic_Dictionary_Enumerator_int__int__Dispose__, v10);
    sub_B16FFC(&Method_System_Collections_Generic_Dictionary_Enumerator_int__int__MoveNext__, v11);
    sub_B16FFC(&Method_System_Collections_Generic_Dictionary_Enumerator_int__int__get_Current__, v12);
    sub_B16FFC(&int_TypeInfo, v13);
    sub_B16FFC(&Method_System_Collections_Generic_KeyValuePair_int__int__get_Key__, v14);
    sub_B16FFC(&Method_System_Collections_Generic_KeyValuePair_int__int__get_Value__, v15);
    sub_B16FFC(&string_TypeInfo, v16);
    sub_B16FFC(&StringLiteral_23535/*"{0}:{1},"*/, v17);
    sub_B16FFC(&StringLiteral_2522/*"BATTLE_SVT_COMMON_FLAG"*/, v18);
    byte_40F6ABC = 1;
  }
  memset(&v34, 0, 32);
  v19 = (System_String_o *)StringLiteral_23535/*"{0}:{1},"*/;
  if ( (BYTE3(EncryptedPlayerPrefs_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0
    && !EncryptedPlayerPrefs_TypeInfo->_2.cctor_finished )
  {
    j_il2cpp_runtime_class_init_0(EncryptedPlayerPrefs_TypeInfo);
  }
  if ( EncryptedPlayerPrefs__HasKey((System_String_o *)StringLiteral_2522/*"BATTLE_SVT_COMMON_FLAG"*/, 0LL) )
  {
    inited = BattleData_TypeInfo;
    if ( (BYTE3(BattleData_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0 && !BattleData_TypeInfo->_2.cctor_finished )
      inited = (BattleData_c *)j_il2cpp_runtime_class_init_0(BattleData_TypeInfo);
    SavedServantCommonFlagDict = BattleData__GetSavedServantCommonFlagDict((const MethodInfo *)inited);
    if ( !SavedServantCommonFlagDict )
      sub_B170D4();
    v22 = SavedServantCommonFlagDict;
    if ( System_Collections_Generic_Dictionary_int__int___ContainsKey(
           SavedServantCommonFlagDict,
           servantId,
           (const MethodInfo_2DDD218 *)Method_System_Collections_Generic_Dictionary_int__int__ContainsKey__) )
    {
      System_Collections_Generic_Dictionary_int__int___set_Item(
        v22,
        servantId,
        commonFlag,
        (const MethodInfo_2DDCF8C *)Method_System_Collections_Generic_Dictionary_int__int__set_Item__);
    }
    else
    {
      System_Collections_Generic_Dictionary_int__int___Add(
        v22,
        servantId,
        commonFlag,
        (const MethodInfo_2DDCFB4 *)Method_System_Collections_Generic_Dictionary_int__int__Add__);
    }
    Empty = string_TypeInfo->static_fields->Empty;
    System_Collections_Generic_Dictionary_int__int___GetEnumerator(
      &v33,
      v22,
      (const MethodInfo_2DDD528 *)Method_System_Collections_Generic_Dictionary_int__int__GetEnumerator__);
    *(_OWORD *)&v34.fields.dictionary = *(_OWORD *)&v33.fields.dictionary;
    v34.fields.current = v33.fields.current;
    while ( System_Collections_Generic_Dictionary_Enumerator_int__int___MoveNext(
              &v34,
              (const MethodInfo_272605C *)Method_System_Collections_Generic_Dictionary_Enumerator_int__int__MoveNext__) )
    {
      key_high = HIDWORD(v34.fields.current.fields.key);
      LODWORD(v33.fields.dictionary) = v34.fields.current.fields.key;
      v30 = (Il2CppObject *)j_il2cpp_value_box_0(int_TypeInfo, &v33);
      *(&v33.fields.getEnumeratorRetType + 1) = key_high;
      v31 = (Il2CppObject *)j_il2cpp_value_box_0(int_TypeInfo, &v33.fields.getEnumeratorRetType + 1);
      v32 = System_String__Format_43739268(v19, v30, v31, 0LL);
      Empty = System_String__Concat_43743732(Empty, v32, 0LL);
    }
    System_Collections_Generic_Dictionary_Enumerator_int__int___Dispose(
      &v34,
      (const MethodInfo_27261A4 *)Method_System_Collections_Generic_Dictionary_Enumerator_int__int__Dispose__);
    if ( (BYTE3(EncryptedPlayerPrefs_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0
      && !EncryptedPlayerPrefs_TypeInfo->_2.cctor_finished )
    {
      j_il2cpp_runtime_class_init_0(EncryptedPlayerPrefs_TypeInfo);
    }
    v26 = (System_String_o *)StringLiteral_2522/*"BATTLE_SVT_COMMON_FLAG"*/;
    v27 = Empty;
  }
  else
  {
    LODWORD(v33.fields.dictionary) = servantId;
    v23 = (Il2CppObject *)j_il2cpp_value_box_0(int_TypeInfo, &v33);
    *(&v33.fields.getEnumeratorRetType + 1) = commonFlag;
    v24 = (Il2CppObject *)j_il2cpp_value_box_0(int_TypeInfo, &v33.fields.getEnumeratorRetType + 1);
    v25 = System_String__Format_43739268(v19, v23, v24, 0LL);
    if ( (BYTE3(EncryptedPlayerPrefs_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0
      && !EncryptedPlayerPrefs_TypeInfo->_2.cctor_finished )
    {
      j_il2cpp_runtime_class_init_0(EncryptedPlayerPrefs_TypeInfo);
    }
    v26 = (System_String_o *)StringLiteral_2522/*"BATTLE_SVT_COMMON_FLAG"*/;
    v27 = v25;
  }
  EncryptedPlayerPrefs__SetString(v26, v27, 0LL);
  UnityEngine_PlayerPrefs__Save(0LL);
}


void __fastcall BattleData__SaveTurnData(BattleData_o *this, const MethodInfo *method)
{
  __int64 v3; // x1
  __int64 v4; // x1
  __int64 v5; // x1
  __int64 v6; // x1
  __int64 v7; // x1
  __int64 v8; // x1
  __int64 v9; // x1
  __int64 v10; // x1
  __int64 v11; // x1
  __int64 v12; // x1
  __int64 v13; // x1
  __int64 v14; // x1
  __int64 v15; // x1
  __int64 v16; // x1
  __int64 v17; // x1
  __int64 v18; // x1
  __int64 v19; // x1
  __int64 v20; // x1
  __int64 v21; // x1
  __int64 v22; // x1
  __int64 v23; // x1
  __int64 v24; // x1
  __int64 v25; // x1
  __int64 v26; // x1
  __int64 v27; // x1
  __int64 v28; // x1
  __int64 v29; // x1
  __int64 v30; // x1
  __int64 v31; // x1
  __int64 v32; // x1
  __int64 v33; // x1
  __int64 v34; // x1
  __int64 v35; // x1
  __int64 v36; // x1
  __int64 v37; // x1
  __int64 v38; // x1
  __int64 v39; // x1
  __int64 v40; // x1
  __int64 v41; // x1
  __int64 v42; // x1
  __int64 v43; // x1
  __int64 v44; // x1
  __int64 v45; // x1
  __int64 v46; // x1
  __int64 v47; // x1
  __int64 v48; // x2
  __int64 v49; // x3
  __int64 v50; // x4
  BattleData_SaveData_o *v51; // x27
  struct System_Int32_array *commandCriticalArray; // x1
  struct System_Int32_array *p_entryid; // x1
  struct System_Int32_array *e_entryid; // x1
  struct System_Boolean_array *enemyAppearValid; // x1
  struct System_Collections_Generic_List_BattleData_CommandHistory__o *comhistory; // x0
  WarBoardUiData_SaveData_array *v57; // x0
  struct BattleCommandData_array *draw_commandlist; // x1
  struct BattleCommandData_array *p_shcmlist; // x1
  struct System_Collections_Generic_Dictionary_string__object__o *voicePlayedInfo; // x1
  struct BattleEntity_o *battle_ent; // x8
  unsigned __int64 v62; // x8
  struct System_Int32_array *waveClearNeedTurn; // x1
  struct BattleCommandData_array *fixedCommands; // x1
  struct System_Int32_array *waveKnockdownNums; // x1
  struct System_Int32_array *overwriteBgIndividuality; // x1
  System_Collections_Generic_Dictionary_string__object__o *v67; // x0
  struct BattleActionLogManagerInterface_o *actionLogManager; // x21
  BattleActionLogManagerInterface_c *klass; // x8
  unsigned __int64 v70; // x10
  BattleActionLogManagerInterface_c **p_offset; // x11
  __int64 p_method; // x0
  __int64 v73; // x0
  struct BattleActionLogManagerInterface_o *v74; // x21
  BattleActionLogManagerInterface_c *v75; // x8
  unsigned __int64 v76; // x10
  BattleActionLogManagerInterface_c **v77; // x11
  __int64 v78; // x0
  __int64 v79; // x0
  OverwriteBattleBgmData_SaveData_o *v80; // x0
  const MethodInfo *v81; // x1
  struct System_Int32_array *intParamArray; // x1
  OverwriteBattleBgmData_SaveData_o *v83; // x21
  struct System_String_array *strParamArray; // x1
  System_Collections_Generic_Dictionary_string__object__o *v85; // x0
  __int64 v86; // x2
  struct BattleFieldData_array *field_datalist; // x8
  __int64 v88; // x0
  __int64 SaveData; // x0
  __int64 v90; // x1
  __int64 v91; // x2
  struct BattleFieldData_array *v92; // x8
  il2cpp_array_size_t v93; // w19
  __int64 v94; // x20
  il2cpp_array_size_t max_length; // w9
  BattleFieldData_o *v96; // x0
  struct BattleFieldData_SaveData_array *savefield_datalist; // x23
  __int64 v98; // x22
  struct BattlePerformance_o *perf; // x8
  BattlePerformanceBg_o *bgPerf; // x0
  BattlePerformanceBg_SaveData_o *v101; // x0
  __int64 v102; // x21
  __int64 v103; // x21
  UnityEngine_Object_o *v104; // x21
  __int64 v105; // x2
  __int64 v106; // x21
  __int64 v107; // x21
  __int64 v108; // x8
  __int64 v109; // x21
  __int64 v110; // x21
  __int64 v111; // x8
  struct System_Collections_Generic_List_BattleSkillInfoData__o *masterSkillInfo; // x8
  int size; // w21
  __int64 v114; // x0
  __int64 v115; // x2
  __int64 v116; // x0
  __int64 v117; // x2
  __int64 v118; // x0
  __int64 v119; // x19
  struct System_Collections_Generic_List_BattleSkillInfoData__o *v120; // x25
  struct System_Int32_array *master_infoId; // x20
  BattleSkillInfoData_o *v122; // x0
  struct System_Collections_Generic_List_BattleSkillInfoData__o *v123; // x25
  struct System_Int32_array *master_skillTurn; // x20
  BattleSkillInfoData_o *v125; // x8
  struct System_Collections_Generic_List_BattleSkillInfoData__o *v126; // x25
  struct System_Int32_array *master_sealedTurn; // x20
  BattleSkillInfoData_o *v128; // x8
  char *v129; // x9
  struct System_Collections_Generic_List_BattleDropItem__o *droplist; // x0
  WarBoardUiData_SaveData_array *v131; // x0
  __int64 v132; // x2
  struct System_Collections_Generic_List_BattleServantData__o *player_datalist; // x8
  int v134; // w21
  __int64 v135; // x0
  __int64 v136; // x2
  unsigned int v137; // w19
  __int64 v138; // x26
  struct System_Collections_Generic_List_BattleServantData__o *v139; // x23
  __int64 v140; // x23
  struct BattleServantData_SaveData_array *p_svlist_MP; // x25
  __int64 v142; // x24
  System_String_o *v143; // x0
  System_String_o *v144; // x23
  struct System_Collections_Generic_List_BattleServantData__o *enemy_datalist; // x8
  int v146; // w21
  __int64 v147; // x0
  struct BattleServantData_SaveData_array **p_e_svlist_MP; // x22
  __int64 v149; // x1
  __int64 v150; // x2
  __int64 v151; // x3
  __int64 v152; // x4
  unsigned int v153; // w19
  __int64 v154; // x20
  struct System_Collections_Generic_List_BattleServantData__o *v155; // x23
  _DWORD *v156; // x0
  struct BattleServantData_SaveData_array *v157; // x27
  __int64 v158; // x23
  System_String_o *v159; // x0
  System_String_o *v160; // x23
  System_Collections_Generic_IEnumerable_TSource__o *aiNpcDataList; // x21
  BattleData___c_c *v162; // x0
  struct BattleData___c_StaticFields *static_fields; // x8
  System_Func_WarBoardManager_WarBoardOnboardSkillTarget__WarBoardPieceData__o *_9__520_0; // x22
  Il2CppObject *v165; // x23
  struct BattleData___c_StaticFields *v166; // x0
  System_Collections_Generic_IEnumerable_TSource__o *v167; // x0
  DrawLotsDisplayMessage_DisplayedInGroup_SaveData_array *v168; // x0
  __int64 v169; // x2
  struct System_Collections_Generic_List_Dictionary_string__object___o *firstNpPlayList; // x8
  __int64 v171; // x0
  __int64 v172; // x2
  struct System_Collections_Generic_List_Dictionary_string__object___o *v173; // x8
  __int64 v174; // x0
  __int64 v175; // x2
  struct System_Collections_Generic_List_Dictionary_string__object___o *v176; // x8
  __int64 v177; // x0
  struct System_Collections_Generic_List_Dictionary_string__object___o *v178; // x24
  __int64 v179; // x26
  __int64 v180; // x27
  int v181; // w8
  unsigned int v182; // w19
  struct System_Collections_Generic_Dictionary_string__object__array *items; // x8
  System_Collections_Generic_Dictionary_Type__IStoreExtension__o *v184; // x24
  struct System_String_array *firstNpPlayUserSvtIdList; // x21
  UnityEngine_Purchasing_IStoreExtension_o *Item; // x0
  __int64 v187; // x25
  struct System_Int32_array *firstNpPlaySeqIdList; // x21
  UnityEngine_Purchasing_IStoreExtension_o *v189; // x0
  struct System_Int32_array *firstNpPlaySvtIdList; // x21
  PlayerServantNoblePhantasmUsageData_o *playerServantNoblePhantasmUsageData; // x0
  PlayerServantNoblePhantasmUsageData_SaveData_o *v192; // x0
  BattleDefenceTargetData_o *defenceTargetData; // x0
  BattleDefenceTargetData_SaveData_o *v194; // x1
  UseSkillEachTurn_o *useSkillEachTurn; // x0
  UseSkillEachTurn_SaveData_o *v196; // x0
  DrawLotsDisplayMessage_o *DrawLotsDispMsg_k__BackingField; // x0
  DrawLotsDisplayMessage_DisplayedInGroup_SaveData_array *v198; // x0
  ItemDroppedSkillShiftInfo_o *itemDroppedSkillShiftInfo; // x0
  System_Int32_array *UniqueIdArray; // x0
  ItemDroppedSkillShiftInfo_o *v201; // x0
  System_Int64_array *NpcSvtIdArray; // x0
  struct System_Collections_Generic_HashSet_string__o *voicePlayedOver64Info; // x0
  DrawLotsDisplayMessage_DisplayedInGroup_SaveData_array *v204; // x1
  BattleFieldEnvironmentData_o *FieldEnvData_k__BackingField; // x0
  BattleFieldEnvironmentData_SaveData_o *v206; // x0
  const MethodInfo *v207; // x1
  System_Int32_array *QuestRouteIdArray; // x0
  struct BattleAttackManager_o *battleAtkManager; // x0
  struct BaseBattleEvent_o *battleEvent; // x0
  struct System_Collections_Generic_HashSet_int__o *calledEnemyUniqueIdHash; // x0
  System_Int32_array *v212; // x1
  __int64 v213; // x1
  __int64 v214; // x2
  __int64 v215; // x3
  __int64 v216; // x4
  MiniMessagePack_MiniMessagePacker_o *v217; // x21
  System_Byte_array *v218; // x20
  System_String_o *v219; // x20
  struct BattleEntity_o *v220; // x8
  struct BattleEntity_o *v221; // x8
  const MethodInfo *v222; // x1
  System_Int32_array *v223; // x20
  const MethodInfo *v224; // x1
  BattleLogic_o *logic; // x0
  BattleData_o *v226; // x0
  const MethodInfo *v227; // x1
  BattleData_SaveData_o *v228; // [xsp+0h] [xbp-70h]
  BattleData_o *v229; // [xsp+10h] [xbp-60h]
  int v230; // [xsp+1Ch] [xbp-54h] BYREF

  if ( (byte_40F6A85 & 1) == 0 )
  {
    sub_B16FFC(&BattleActionLogManagerInterface_TypeInfo, method);
    sub_B16FFC(&BattleData_TypeInfo, v3);
    sub_B16FFC(&CatAndMouseGame_TypeInfo, v4);
    sub_B16FFC(&Method_System_Collections_Generic_Dictionary_string__object__get_Item__, v5);
    sub_B16FFC(&EncryptedPlayerPrefs_TypeInfo, v6);
    sub_B16FFC(&Method_System_Linq_Enumerable_Select_AiNpcBattleServantData__BattleServantData_SaveData___, v7);
    sub_B16FFC(&Method_System_Linq_Enumerable_ToArray_int___, v8);
    sub_B16FFC(&Method_System_Linq_Enumerable_ToArray_BattleServantData_SaveData___, v9);
    sub_B16FFC(&Method_System_Linq_Enumerable_ToArray_string___, v10);
    sub_B16FFC(&Method_System_Func_AiNpcBattleServantData__BattleServantData_SaveData___ctor__, v11);
    sub_B16FFC(&System_Func_AiNpcBattleServantData__BattleServantData_SaveData__TypeInfo, v12);
    sub_B16FFC(&Method_System_Collections_Generic_HashSet_int__get_Count__, v13);
    sub_B16FFC(&Method_System_Collections_Generic_HashSet_string__get_Count__, v14);
    sub_B16FFC(&int___TypeInfo, v15);
    sub_B16FFC(&int_TypeInfo, v16);
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleDropItem__ToArray__, v17);
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleData_CommandHistory__ToArray__, v18);
    sub_B16FFC(&Method_System_Collections_Generic_List_Dictionary_string__object___get_Count__, v19);
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleSkillInfoData__get_Count__, v20);
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleServantData__get_Count__, v21);
    sub_B16FFC(&Method_System_Collections_Generic_List_Dictionary_string__object___get_Item__, v22);
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleServantData__get_Item__, v23);
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleSkillInfoData__get_Item__, v24);
    sub_B16FFC(&Method_MiniMessagePackerUtility_EncodeDict_int__int___, v25);
    sub_B16FFC(&MiniMessagePack_MiniMessagePacker_TypeInfo, v26);
    sub_B16FFC(&UnityEngine_Object_TypeInfo, v27);
    sub_B16FFC(&BattleServantData_SaveData___TypeInfo, v28);
    sub_B16FFC(&BattleFieldData_SaveData___TypeInfo, v29);
    sub_B16FFC(&BattleData_SaveData_TypeInfo, v30);
    sub_B16FFC(&Method_SingletonMonoBehaviour_BattleRandom__getInstance__, v31);
    sub_B16FFC(&string___TypeInfo, v32);
    sub_B16FFC(&Method_BattleData___c__SaveTurnData_b__520_0__, v33);
    sub_B16FFC(&BattleData___c_TypeInfo, v34);
    sub_B16FFC(&StringLiteral_22376/*"svtId"*/, v35);
    sub_B16FFC(&StringLiteral_5049/*"DUEL"*/, v36);
    sub_B16FFC(&StringLiteral_22973/*"userSvtId"*/, v37);
    sub_B16FFC(&StringLiteral_10848/*"QUESTID"*/, v38);
    sub_B16FFC(&StringLiteral_11516/*"SAVEKEY_"*/, v39);
    sub_B16FFC(&StringLiteral_21301/*"p_svlist"*/, v40);
    sub_B16FFC(&StringLiteral_21876/*"seqId"*/, v41);
    sub_B16FFC(&StringLiteral_8097/*"IsDuelMessagePack"*/, v42);
    sub_B16FFC(&StringLiteral_18014/*"e_svlist"*/, v43);
    sub_B16FFC(&StringLiteral_957/*"0.6.17.1"*/, v44);
    sub_B16FFC(&StringLiteral_15123/*"Version"*/, v45);
    sub_B16FFC(&StringLiteral_2740/*"Battle"*/, v46);
    byte_40F6A85 = 1;
  }
  v230 = 0;
  BattleData__DeleteDummyBuffDataAll(this, method);
  if ( this->fields.systemflg_autosave )
  {
    v51 = (BattleData_SaveData_o *)sub_B170CC(BattleData_SaveData_TypeInfo, v47, v48, v49, v50);
    BattleData_SaveData___ctor(v51, 0LL);
    if ( !v51 )
      goto LABEL_193;
    v51->fields.initturn = this->fields.initturn;
    v51->fields.wavecount = this->fields.wavecount;
    v51->fields.turnCount = this->fields.turnCount;
    v51->fields.totalTurnCount = this->fields.totalTurnCount;
    v51->fields.globaltargetId = this->fields.globaltargetId;
    v51->fields.criticalstars = this->fields.criticalstars;
    v51->fields.totalCriticalstars = this->fields.totalCriticalStars;
    v51->fields.addCriticalstars = this->fields.addCriticalstars;
    v51->fields.subCriticalCount = this->fields.subCriticalCount;
    v51->fields.prevCriticalstars = this->fields.prevCriticalstars;
    commandCriticalArray = this->fields.commandCriticalArray;
    v51->fields.commandCriticalArray = commandCriticalArray;
    sub_B16F98(&v51->fields.commandCriticalArray, commandCriticalArray);
    p_entryid = this->fields.p_entryid;
    v51->fields.p_entryid = p_entryid;
    sub_B16F98(&v51->fields.p_entryid, p_entryid);
    e_entryid = this->fields.e_entryid;
    v51->fields.e_entryid = e_entryid;
    sub_B16F98(&v51->fields.e_entryid, e_entryid);
    enemyAppearValid = this->fields.enemyAppearValid;
    v51->fields.enemyAppearValids = enemyAppearValid;
    sub_B16F98(&v51->fields.enemyAppearValids, enemyAppearValid);
    comhistory = this->fields.comhistory;
    if ( !comhistory )
      goto LABEL_193;
    v57 = System_Collections_Generic_List_WarBoardUiData_SaveData___ToArray(
            (System_Collections_Generic_List_WarBoardUiData_SaveData__o *)comhistory,
            (const MethodInfo_2F27E24 *)Method_System_Collections_Generic_List_BattleData_CommandHistory__ToArray__);
    v51->fields.history = (struct BattleData_CommandHistory_array *)v57;
    sub_B16F98(&v51->fields.history, v57);
    v51->fields.shuffleIndex = this->fields.shuffleindex;
    draw_commandlist = this->fields.draw_commandlist;
    v51->fields.drawcard = draw_commandlist;
    sub_B16F98(&v51->fields.drawcard, draw_commandlist);
    p_shcmlist = this->fields.p_shcmlist;
    v51->fields.shufflecard = p_shcmlist;
    sub_B16F98(&v51->fields.shufflecard, p_shcmlist);
    voicePlayedInfo = this->fields.voicePlayedInfo;
    v51->fields.voicePlayedList = voicePlayedInfo;
    sub_B16F98(&v51->fields.voicePlayedList, voicePlayedInfo);
    if ( this->fields.endbattleFlg )
    {
      battle_ent = this->fields.battle_ent;
      if ( !battle_ent )
        goto LABEL_193;
      v62 = battle_ent->fields.id ^ 0xFFFFFFFFFFED5CD0LL;
    }
    else
    {
      v62 = 0LL;
    }
    v51->fields.bstate = v62;
    waveClearNeedTurn = this->fields.waveClearNeedTurn;
    v51->fields.usedTurnArray = waveClearNeedTurn;
    sub_B16F98(&v51->fields.usedTurnArray, waveClearNeedTurn);
    fixedCommands = this->fields.fixedCommands;
    v51->fields.fixedCommands = fixedCommands;
    sub_B16F98(&v51->fields.fixedCommands, fixedCommands);
    waveKnockdownNums = this->fields.waveKnockdownNums;
    v51->fields.waveKnockdownNums = waveKnockdownNums;
    sub_B16F98(&v51->fields.waveKnockdownNums, waveKnockdownNums);
    v51->fields.loseBattleFlg = this->fields.loseBattleFlg;
    overwriteBgIndividuality = this->fields.overwriteBgIndividuality;
    v51->fields.overwriteBgIndividuality = overwriteBgIndividuality;
    sub_B16F98(&v51->fields.overwriteBgIndividuality, overwriteBgIndividuality);
    v67 = MiniMessagePackerUtility__EncodeDict_int__int_(
            (System_Collections_Generic_Dictionary_TKey__TValue__o *)this->fields.chainCountDict,
            (const MethodInfo_19DC7B0 *)Method_MiniMessagePackerUtility_EncodeDict_int__int___);
    v51->fields.chainCountIntKeyDict = v67;
    sub_B16F98(&v51->fields.chainCountIntKeyDict, v67);
    actionLogManager = this->fields.actionLogManager;
    if ( !actionLogManager )
      goto LABEL_193;
    klass = actionLogManager->klass;
    if ( *(_WORD *)&actionLogManager->klass->_2.bitflags1 )
    {
      v70 = 0LL;
      p_offset = (BattleActionLogManagerInterface_c **)&klass->_1.interfaceOffsets->offset;
      while ( *(p_offset - 1) != BattleActionLogManagerInterface_TypeInfo )
      {
        ++v70;
        p_offset += 2;
        if ( v70 >= *(unsigned __int16 *)&actionLogManager->klass->_2.bitflags1 )
          goto LABEL_15;
      }
      p_method = (__int64)&klass->vtable[*(_DWORD *)p_offset + 1].method;
    }
    else
    {
LABEL_15:
      p_method = sub_AAFEF8(this->fields.actionLogManager, BattleActionLogManagerInterface_TypeInfo, 1LL);
    }
    v73 = (*(__int64 (__fastcall **)(struct BattleActionLogManagerInterface_o *, _QWORD))p_method)(
            actionLogManager,
            *(_QWORD *)(p_method + 8));
    v51->fields.logHeader_MP = (struct System_Byte_array *)v73;
    sub_B16F98(&v51->fields.logHeader_MP, v73);
    v74 = this->fields.actionLogManager;
    if ( !v74 )
      goto LABEL_193;
    v75 = v74->klass;
    if ( *(_WORD *)&v74->klass->_2.bitflags1 )
    {
      v76 = 0LL;
      v77 = (BattleActionLogManagerInterface_c **)&v75->_1.interfaceOffsets->offset;
      while ( *(v77 - 1) != BattleActionLogManagerInterface_TypeInfo )
      {
        ++v76;
        v77 += 2;
        if ( v76 >= *(unsigned __int16 *)&v74->klass->_2.bitflags1 )
          goto LABEL_22;
      }
      v78 = (__int64)&v75->vtable[*(_DWORD *)v77 + 2].method;
    }
    else
    {
LABEL_22:
      v78 = sub_AAFEF8(this->fields.actionLogManager, BattleActionLogManagerInterface_TypeInfo, 2LL);
    }
    v79 = (*(__int64 (__fastcall **)(struct BattleActionLogManagerInterface_o *, _QWORD))v78)(v74, *(_QWORD *)(v78 + 8));
    v51->fields.logData_MP = (struct System_Byte_array *)v79;
    sub_B16F98(&v51->fields.logData_MP, v79);
    v51->fields.maxEnemyUniqueID = this->fields.maxEnemyUniqueID;
    v51->fields.maxEnemyIndex = this->fields.maxEnemyIndex;
    v51->fields.progresslistflg = this->fields.progresslistflg;
    v80 = OverwriteBattleBgmData__ConvertToSaveData(this->fields._overwriteBgmData_k__BackingField, 0LL);
    if ( v80 )
    {
      intParamArray = v80->fields.intParamArray;
      v83 = v80;
      v51->fields.overrideBgmData = intParamArray;
      sub_B16F98(&v51->fields.overrideBgmData, intParamArray);
      strParamArray = v83->fields.strParamArray;
      v51->fields.overrideStrBgmData = strParamArray;
      sub_B16F98(&v51->fields.overrideStrBgmData, strParamArray);
    }
    v85 = BattleData__convertUsedEventMasterSkillDictFormatSave(this, v81);
    v51->fields.usedEventMasterSkillDict = v85;
    sub_B16F98(&v51->fields.usedEventMasterSkillDict, v85);
    field_datalist = this->fields.field_datalist;
    if ( !field_datalist )
      goto LABEL_193;
    v88 = sub_B17014(BattleFieldData_SaveData___TypeInfo, field_datalist->max_length, v86);
    v51->fields.savefield_datalist = (struct BattleFieldData_SaveData_array *)v88;
    SaveData = sub_B16F98(&v51->fields.savefield_datalist, v88);
    v92 = this->fields.field_datalist;
    if ( !v92 )
      goto LABEL_193;
    v93 = 0;
    v94 = 32LL;
    while ( 1 )
    {
      max_length = v92->max_length;
      if ( (int)v93 >= (int)max_length )
        break;
      if ( v93 >= max_length )
        goto LABEL_194;
      v96 = *(BattleFieldData_o **)((char *)&v92->obj.klass + v94);
      if ( v96 )
      {
        savefield_datalist = v51->fields.savefield_datalist;
        SaveData = (__int64)BattleFieldData__getSaveData(v96, 0LL);
        if ( savefield_datalist )
        {
          v98 = SaveData;
          if ( SaveData )
          {
            SaveData = sub_B170BC(SaveData, savefield_datalist->obj.klass->_1.element_class);
            if ( !SaveData )
            {
LABEL_195:
              sub_B170F4();
              sub_B170A0();
            }
          }
          if ( v93 >= savefield_datalist->max_length )
          {
LABEL_194:
            sub_B17100(SaveData, v90, v91);
            sub_B170A0();
          }
          *(Il2CppClass **)((char *)&savefield_datalist->obj.klass + v94) = (Il2CppClass *)v98;
          SaveData = sub_B16F98((char *)savefield_datalist + v94, v98);
          v92 = this->fields.field_datalist;
          ++v93;
          v94 += 8LL;
          if ( v92 )
            continue;
        }
      }
      goto LABEL_193;
    }
    perf = this->fields.perf;
    if ( !perf || (bgPerf = perf->fields.bgPerf) == 0LL )
LABEL_193:
      sub_B170D4();
    v101 = BattlePerformanceBg__getSaveData(bgPerf, 0LL);
    v51->fields.savebgData = v101;
    sub_B16F98(&v51->fields.savebgData, v101);
    v102 = *((_QWORD *)Method_SingletonMonoBehaviour_BattleRandom__getInstance__ + 3);
    if ( (*(_BYTE *)(v102 + 306) & 1) == 0 )
      sub_AAFCFC(*((_QWORD *)Method_SingletonMonoBehaviour_BattleRandom__getInstance__ + 3));
    v103 = **(_QWORD **)(v102 + 192);
    if ( (*(_BYTE *)(v103 + 306) & 1) == 0 )
      sub_AAFCFC(v103);
    v104 = **(UnityEngine_Object_o ***)(v103 + 184);
    if ( (BYTE3(UnityEngine_Object_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0
      && !UnityEngine_Object_TypeInfo->_2.cctor_finished )
    {
      j_il2cpp_runtime_class_init_0(UnityEngine_Object_TypeInfo);
    }
    if ( UnityEngine_Object__op_Inequality(v104, 0LL, 0LL) )
    {
      v106 = *((_QWORD *)Method_SingletonMonoBehaviour_BattleRandom__getInstance__ + 3);
      if ( (*(_BYTE *)(v106 + 306) & 1) == 0 )
        sub_AAFCFC(*((_QWORD *)Method_SingletonMonoBehaviour_BattleRandom__getInstance__ + 3));
      v107 = **(_QWORD **)(v106 + 192);
      if ( (*(_BYTE *)(v107 + 306) & 1) == 0 )
        sub_AAFCFC(v107);
      v108 = **(_QWORD **)(v107 + 184);
      if ( !v108 )
        goto LABEL_193;
      v51->fields.randLogicCount = *(_DWORD *)(v108 + 40);
      v109 = *((_QWORD *)Method_SingletonMonoBehaviour_BattleRandom__getInstance__ + 3);
      if ( (*(_BYTE *)(v109 + 306) & 1) == 0 )
        sub_AAFCFC(*((_QWORD *)Method_SingletonMonoBehaviour_BattleRandom__getInstance__ + 3));
      v110 = **(_QWORD **)(v109 + 192);
      if ( (*(_BYTE *)(v110 + 306) & 1) == 0 )
        sub_AAFCFC(v110);
      v111 = **(_QWORD **)(v110 + 184);
      if ( !v111 )
        goto LABEL_193;
      v51->fields.randGutsCount = *(_DWORD *)(v111 + 44);
    }
    masterSkillInfo = this->fields.masterSkillInfo;
    if ( !masterSkillInfo )
      goto LABEL_193;
    size = masterSkillInfo->fields._size;
    v114 = sub_B17014(int___TypeInfo, (unsigned int)size, v105);
    v51->fields.master_infoId = (struct System_Int32_array *)v114;
    sub_B16F98(&v51->fields.master_infoId, v114);
    v116 = sub_B17014(int___TypeInfo, (unsigned int)size, v115);
    v51->fields.master_skillTurn = (struct System_Int32_array *)v116;
    sub_B16F98(&v51->fields.master_skillTurn, v116);
    v118 = sub_B17014(int___TypeInfo, (unsigned int)size, v117);
    v51->fields.master_sealedTurn = (struct System_Int32_array *)v118;
    sub_B16F98(&v51->fields.master_sealedTurn, v118);
    if ( size >= 1 )
    {
      v119 = 0LL;
      do
      {
        v120 = this->fields.masterSkillInfo;
        if ( !v120 )
          goto LABEL_193;
        master_infoId = v51->fields.master_infoId;
        if ( v120->fields._size <= (unsigned int)v119 )
          System_ThrowHelper__ThrowArgumentOutOfRangeException_41329284(0LL);
        v122 = v120->fields._items->m_Items[v119];
        if ( !v122 )
          goto LABEL_193;
        SaveData = BattleSkillInfoData__getInfoId(v122, 0LL);
        if ( !master_infoId )
          goto LABEL_193;
        if ( (unsigned int)v119 >= master_infoId->max_length )
          goto LABEL_194;
        master_infoId->m_Items[v119 + 1] = SaveData;
        v123 = this->fields.masterSkillInfo;
        if ( !v123 )
          goto LABEL_193;
        master_skillTurn = v51->fields.master_skillTurn;
        if ( v123->fields._size <= (unsigned int)v119 )
          System_ThrowHelper__ThrowArgumentOutOfRangeException_41329284(0LL);
        v125 = v123->fields._items->m_Items[v119];
        if ( !v125 || !master_skillTurn )
          goto LABEL_193;
        if ( (unsigned int)v119 >= master_skillTurn->max_length )
          goto LABEL_194;
        master_skillTurn->m_Items[v119 + 1] = v125->fields.chargeTurn;
        v126 = this->fields.masterSkillInfo;
        if ( !v126 )
          goto LABEL_193;
        master_sealedTurn = v51->fields.master_sealedTurn;
        if ( v126->fields._size <= (unsigned int)v119 )
          System_ThrowHelper__ThrowArgumentOutOfRangeException_41329284(0LL);
        v128 = v126->fields._items->m_Items[v119];
        if ( !v128 || !master_sealedTurn )
          goto LABEL_193;
        if ( (unsigned int)v119 >= master_sealedTurn->max_length )
          goto LABEL_194;
        v129 = (char *)master_sealedTurn + 4 * v119++;
        *((_DWORD *)v129 + 8) = v128->fields.sealedTurn;
      }
      while ( (int)v119 < size );
    }
    droplist = this->fields.droplist;
    if ( !droplist )
      goto LABEL_193;
    v131 = System_Collections_Generic_List_WarBoardUiData_SaveData___ToArray(
             (System_Collections_Generic_List_WarBoardUiData_SaveData__o *)droplist,
             (const MethodInfo_2F27E24 *)Method_System_Collections_Generic_List_BattleDropItem__ToArray__);
    v51->fields.drop = (struct BattleDropItem_array *)v131;
    sub_B16F98(&v51->fields.drop, v131);
    player_datalist = this->fields.player_datalist;
    v229 = this;
    if ( !player_datalist )
      goto LABEL_193;
    v134 = player_datalist->fields._size;
    v135 = sub_B17014(BattleServantData_SaveData___TypeInfo, (unsigned int)v134, v132);
    v51->fields.p_svlist_MP = (struct BattleServantData_SaveData_array *)v135;
    v228 = v51;
    sub_B16F98(&v51->fields.p_svlist_MP, v135);
    if ( v134 >= 1 )
    {
      v137 = 0;
      v138 = 32LL;
      do
      {
        v139 = v229->fields.player_datalist;
        if ( !v139 )
          goto LABEL_193;
        if ( v139->fields._size <= v137 )
          System_ThrowHelper__ThrowArgumentOutOfRangeException_41329284(0LL);
        v140 = *(__int64 *)((char *)&v139->fields._items->obj.klass + v138);
        if ( !v140 )
          goto LABEL_193;
        p_svlist_MP = v51->fields.p_svlist_MP;
        SaveData = (*(__int64 (__fastcall **)(__int64, _QWORD))(*(_QWORD *)v140 + 568LL))(
                     v140,
                     *(_QWORD *)(*(_QWORD *)v140 + 576LL));
        if ( !p_svlist_MP )
          goto LABEL_193;
        v142 = SaveData;
        if ( SaveData )
        {
          SaveData = sub_B170BC(SaveData, p_svlist_MP->obj.klass->_1.element_class);
          if ( !SaveData )
            goto LABEL_195;
        }
        if ( v137 >= p_svlist_MP->max_length )
          goto LABEL_194;
        *(Il2CppClass **)((char *)&p_svlist_MP->obj.klass + v138) = (Il2CppClass *)v142;
        sub_B16F98((char *)p_svlist_MP + v138, v142);
        v143 = System_Int32__ToString((int)v140 + 16, 0LL);
        v144 = System_String__Concat_43743732((System_String_o *)StringLiteral_21301/*"p_svlist"*/, v143, 0LL);
        if ( (BYTE3(EncryptedPlayerPrefs_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0
          && !EncryptedPlayerPrefs_TypeInfo->_2.cctor_finished )
        {
          j_il2cpp_runtime_class_init_0(EncryptedPlayerPrefs_TypeInfo);
        }
        if ( EncryptedPlayerPrefs__HasKey(v144, 0LL) )
        {
          if ( (BYTE3(EncryptedPlayerPrefs_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0
            && !EncryptedPlayerPrefs_TypeInfo->_2.cctor_finished )
          {
            j_il2cpp_runtime_class_init_0(EncryptedPlayerPrefs_TypeInfo);
          }
          EncryptedPlayerPrefs__DeleteKey(v144, 0LL);
        }
        ++v137;
        v138 += 8LL;
      }
      while ( (int)v137 < v134 );
    }
    enemy_datalist = v229->fields.enemy_datalist;
    if ( !enemy_datalist )
      goto LABEL_193;
    v146 = enemy_datalist->fields._size;
    v147 = sub_B17014(BattleServantData_SaveData___TypeInfo, (unsigned int)v146, v136);
    v51->fields.e_svlist_MP = (struct BattleServantData_SaveData_array *)v147;
    p_e_svlist_MP = &v51->fields.e_svlist_MP;
    sub_B16F98(&v51->fields.e_svlist_MP, v147);
    if ( v146 >= 1 )
    {
      v153 = 0;
      v154 = 32LL;
      do
      {
        v155 = v229->fields.enemy_datalist;
        if ( !v155 )
          goto LABEL_193;
        if ( v155->fields._size <= v153 )
          System_ThrowHelper__ThrowArgumentOutOfRangeException_41329284(0LL);
        v156 = *(Il2CppClass **)((char *)&v155->fields._items->obj.klass + v154);
        if ( !v156 )
          goto LABEL_193;
        v230 = v156[4];
        v157 = *p_e_svlist_MP;
        SaveData = (*(__int64 (__fastcall **)(_DWORD *, _QWORD))(*(_QWORD *)v156 + 568LL))(
                     v156,
                     *(_QWORD *)(*(_QWORD *)v156 + 576LL));
        if ( !v157 )
          goto LABEL_193;
        v158 = SaveData;
        if ( SaveData )
        {
          SaveData = sub_B170BC(SaveData, v157->obj.klass->_1.element_class);
          if ( !SaveData )
            goto LABEL_195;
        }
        if ( v153 >= v157->max_length )
          goto LABEL_194;
        *(Il2CppClass **)((char *)&v157->obj.klass + v154) = (Il2CppClass *)v158;
        sub_B16F98((char *)v157 + v154, v158);
        v159 = System_Int32__ToString((int32_t)&v230, 0LL);
        v160 = System_String__Concat_43743732((System_String_o *)StringLiteral_18014/*"e_svlist"*/, v159, 0LL);
        if ( (BYTE3(EncryptedPlayerPrefs_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0
          && !EncryptedPlayerPrefs_TypeInfo->_2.cctor_finished )
        {
          j_il2cpp_runtime_class_init_0(EncryptedPlayerPrefs_TypeInfo);
        }
        if ( EncryptedPlayerPrefs__HasKey(v160, 0LL) )
        {
          if ( (BYTE3(EncryptedPlayerPrefs_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0
            && !EncryptedPlayerPrefs_TypeInfo->_2.cctor_finished )
          {
            j_il2cpp_runtime_class_init_0(EncryptedPlayerPrefs_TypeInfo);
          }
          EncryptedPlayerPrefs__DeleteKey(v160, 0LL);
        }
        ++v153;
        v154 += 8LL;
      }
      while ( (int)v153 < v146 );
    }
    v228->fields.enemyMasterSpellUseCnt = v229->fields.enemyMasterCommandSpellUseCnt;
    v228->fields.maxTurnDamage = v229->fields.maxTurnDamageInBattle;
    aiNpcDataList = (System_Collections_Generic_IEnumerable_TSource__o *)v229->fields.aiNpcDataList;
    v162 = BattleData___c_TypeInfo;
    if ( (BYTE3(BattleData___c_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0
      && !BattleData___c_TypeInfo->_2.cctor_finished )
    {
      j_il2cpp_runtime_class_init_0(BattleData___c_TypeInfo);
      v162 = BattleData___c_TypeInfo;
    }
    static_fields = v162->static_fields;
    _9__520_0 = (System_Func_WarBoardManager_WarBoardOnboardSkillTarget__WarBoardPieceData__o *)static_fields->__9__520_0;
    if ( !_9__520_0 )
    {
      if ( (BYTE3(v162->vtable._0_Equals.methodPtr) & 4) != 0 && !v162->_2.cctor_finished )
      {
        j_il2cpp_runtime_class_init_0(v162);
        static_fields = BattleData___c_TypeInfo->static_fields;
      }
      v165 = (Il2CppObject *)static_fields->__9;
      _9__520_0 = (System_Func_WarBoardManager_WarBoardOnboardSkillTarget__WarBoardPieceData__o *)sub_B170CC(
                                                                                                    System_Func_AiNpcBattleServantData__BattleServantData_SaveData__TypeInfo,
                                                                                                    v149,
                                                                                                    v150,
                                                                                                    v151,
                                                                                                    v152);
      System_Func_WarBoardManager_WarBoardOnboardSkillTarget__WarBoardPieceData____ctor(
        _9__520_0,
        v165,
        Method_BattleData___c__SaveTurnData_b__520_0__,
        (const MethodInfo_2B6C28C *)Method_System_Func_AiNpcBattleServantData__BattleServantData_SaveData___ctor__);
      v166 = BattleData___c_TypeInfo->static_fields;
      v166->__9__520_0 = (struct System_Func_AiNpcBattleServantData__BattleServantData_SaveData__o *)_9__520_0;
      sub_B16F98(&v166->__9__520_0, _9__520_0);
    }
    v167 = (System_Collections_Generic_IEnumerable_TSource__o *)System_Linq_Enumerable__Select_WarBoardManager_WarBoardOnboardSkillTarget__WarBoardPieceData_(
                                                                  aiNpcDataList,
                                                                  (System_Func_TSource__TResult__o *)_9__520_0,
                                                                  (const MethodInfo_19C0B1C *)Method_System_Linq_Enumerable_Select_AiNpcBattleServantData__BattleServantData_SaveData___);
    v168 = System_Linq_Enumerable__ToArray_DrawLotsDisplayMessage_DisplayedInGroup_SaveData_(
             v167,
             (const MethodInfo_19C4BCC *)Method_System_Linq_Enumerable_ToArray_BattleServantData_SaveData___);
    v228->fields.aiNpcSvts = (struct BattleServantData_SaveData_array *)v168;
    sub_B16F98(&v228->fields.aiNpcSvts, v168);
    firstNpPlayList = v229->fields.firstNpPlayList;
    if ( !firstNpPlayList )
      goto LABEL_193;
    v171 = sub_B17014(string___TypeInfo, (unsigned int)firstNpPlayList->fields._size, v169);
    v228->fields.firstNpPlayUserSvtIdList = (struct System_String_array *)v171;
    sub_B16F98(&v228->fields.firstNpPlayUserSvtIdList, v171);
    v173 = v229->fields.firstNpPlayList;
    if ( !v173 )
      goto LABEL_193;
    v174 = sub_B17014(int___TypeInfo, (unsigned int)v173->fields._size, v172);
    v228->fields.firstNpPlaySeqIdList = (struct System_Int32_array *)v174;
    sub_B16F98(&v228->fields.firstNpPlaySeqIdList, v174);
    v176 = v229->fields.firstNpPlayList;
    if ( !v176 )
      goto LABEL_193;
    v177 = sub_B17014(int___TypeInfo, (unsigned int)v176->fields._size, v175);
    v228->fields.firstNpPlaySvtIdList = (struct System_Int32_array *)v177;
    sub_B16F98(&v228->fields.firstNpPlaySvtIdList, v177);
    v178 = v229->fields.firstNpPlayList;
    if ( !v178 )
      goto LABEL_193;
    v179 = 8LL;
    v180 = 32LL;
    while ( 1 )
    {
      v181 = v178->fields._size;
      v182 = v179 - 8;
      if ( (int)v179 - 8 >= v181 )
        break;
      if ( v181 <= v182 )
        System_ThrowHelper__ThrowArgumentOutOfRangeException_41329284(0LL);
      items = v178->fields._items;
      v184 = *(System_Collections_Generic_Dictionary_Type__IStoreExtension__o **)((char *)&items->obj.klass + v180);
      if ( !v184 )
        goto LABEL_193;
      firstNpPlayUserSvtIdList = v228->fields.firstNpPlayUserSvtIdList;
      Item = System_Collections_Generic_Dictionary_Type__IStoreExtension___get_Item(
               *(System_Collections_Generic_Dictionary_Type__IStoreExtension__o **)((char *)&items->obj.klass + v180),
               (System_Type_o *)StringLiteral_22973/*"userSvtId"*/,
               (const MethodInfo_2DA3B54 *)Method_System_Collections_Generic_Dictionary_string__object__get_Item__);
      if ( !Item )
        goto LABEL_193;
      SaveData = ((__int64 (__fastcall *)(UnityEngine_Purchasing_IStoreExtension_o *, Il2CppMethodPointer))Item->klass->vtable[3].method)(
                   Item,
                   Item->klass->vtable[4].methodPtr);
      if ( !firstNpPlayUserSvtIdList )
        goto LABEL_193;
      v187 = SaveData;
      if ( SaveData )
      {
        SaveData = sub_B170BC(SaveData, firstNpPlayUserSvtIdList->obj.klass->_1.element_class);
        if ( !SaveData )
          goto LABEL_195;
      }
      if ( v182 >= firstNpPlayUserSvtIdList->max_length )
        goto LABEL_194;
      *(Il2CppClass **)((char *)&firstNpPlayUserSvtIdList->obj.klass + v180) = (Il2CppClass *)v187;
      sub_B16F98((char *)firstNpPlayUserSvtIdList + v180, v187);
      firstNpPlaySeqIdList = v228->fields.firstNpPlaySeqIdList;
      v189 = System_Collections_Generic_Dictionary_Type__IStoreExtension___get_Item(
               v184,
               (System_Type_o *)StringLiteral_21876/*"seqId"*/,
               (const MethodInfo_2DA3B54 *)Method_System_Collections_Generic_Dictionary_string__object__get_Item__);
      if ( !firstNpPlaySeqIdList || !v189 )
        goto LABEL_193;
      if ( v189->klass->_1.element_class != int_TypeInfo->_1.element_class )
        goto LABEL_196;
      SaveData = j_il2cpp_object_unbox_0(v189);
      if ( v182 >= firstNpPlaySeqIdList->max_length )
        goto LABEL_194;
      *((_DWORD *)&firstNpPlaySeqIdList->obj.klass + v179) = *(_DWORD *)SaveData;
      firstNpPlaySvtIdList = v228->fields.firstNpPlaySvtIdList;
      v189 = System_Collections_Generic_Dictionary_Type__IStoreExtension___get_Item(
               v184,
               (System_Type_o *)StringLiteral_22376/*"svtId"*/,
               (const MethodInfo_2DA3B54 *)Method_System_Collections_Generic_Dictionary_string__object__get_Item__);
      if ( !firstNpPlaySvtIdList || !v189 )
        goto LABEL_193;
      if ( v189->klass->_1.element_class != int_TypeInfo->_1.element_class )
      {
LABEL_196:
        v226 = (BattleData_o *)sub_B173C8(v189);
        BattleData__isResumeBattle(v226, v227);
        return;
      }
      SaveData = j_il2cpp_object_unbox_0(v189);
      if ( v182 >= firstNpPlaySvtIdList->max_length )
        goto LABEL_194;
      v180 += 8LL;
      *((_DWORD *)&firstNpPlaySvtIdList->obj.klass + v179++) = *(_DWORD *)SaveData;
      v178 = v229->fields.firstNpPlayList;
      if ( !v178 )
        goto LABEL_193;
    }
    playerServantNoblePhantasmUsageData = v229->fields.playerServantNoblePhantasmUsageData;
    if ( !playerServantNoblePhantasmUsageData )
      goto LABEL_193;
    v192 = PlayerServantNoblePhantasmUsageData__GetSaveData(playerServantNoblePhantasmUsageData, 0LL);
    v228->fields.playerServantNoblePhantasmUsageDataSaveData = v192;
    sub_B16F98(&v228->fields.playerServantNoblePhantasmUsageDataSaveData, v192);
    v228->fields.winBattleNotRelatedSurvivalStatusFlg = v229->fields.winBattleNotRelatedSurvivalStatus;
    v228->fields.temporarySpell = v229->fields.temporarySpell;
    defenceTargetData = v229->fields.defenceTargetData;
    v194 = defenceTargetData ? BattleDefenceTargetData__GetSaveData(defenceTargetData, 0LL) : 0LL;
    v228->fields.saveDefenceTargetData = v194;
    sub_B16F98(&v228->fields.saveDefenceTargetData, v194);
    v228->fields.masterSkillUseWaveTurn = v229->fields.masterSkillUseWaveTurn;
    useSkillEachTurn = v229->fields.useSkillEachTurn;
    if ( !useSkillEachTurn )
      goto LABEL_193;
    v196 = UseSkillEachTurn__GetSaveData(useSkillEachTurn, 0LL);
    v228->fields.useSkillEachTurn = v196;
    sub_B16F98(&v228->fields.useSkillEachTurn, v196);
    DrawLotsDispMsg_k__BackingField = v229->fields._DrawLotsDispMsg_k__BackingField;
    if ( !DrawLotsDispMsg_k__BackingField )
      goto LABEL_193;
    v198 = DrawLotsDisplayMessage__GetSaveData(DrawLotsDispMsg_k__BackingField, 0LL);
    v228->fields.displayedMsgs = v198;
    sub_B16F98(&v228->fields.displayedMsgs, v198);
    itemDroppedSkillShiftInfo = v229->fields.itemDroppedSkillShiftInfo;
    if ( !itemDroppedSkillShiftInfo )
      goto LABEL_193;
    UniqueIdArray = ItemDroppedSkillShiftInfo__GetUniqueIdArray(itemDroppedSkillShiftInfo, 0LL);
    v228->fields.skillShiftUniqueIds = UniqueIdArray;
    sub_B16F98(&v228->fields.skillShiftUniqueIds, UniqueIdArray);
    v201 = v229->fields.itemDroppedSkillShiftInfo;
    if ( !v201 )
      goto LABEL_193;
    NpcSvtIdArray = ItemDroppedSkillShiftInfo__GetNpcSvtIdArray(v201, 0LL);
    v228->fields.skillShiftNpcSvtIds = NpcSvtIdArray;
    sub_B16F98(&v228->fields.skillShiftNpcSvtIds, NpcSvtIdArray);
    voicePlayedOver64Info = v229->fields.voicePlayedOver64Info;
    if ( voicePlayedOver64Info && voicePlayedOver64Info->fields._count >= 1 )
      v204 = System_Linq_Enumerable__ToArray_DrawLotsDisplayMessage_DisplayedInGroup_SaveData_(
               (System_Collections_Generic_IEnumerable_TSource__o *)voicePlayedOver64Info,
               (const MethodInfo_19C4BCC *)Method_System_Linq_Enumerable_ToArray_string___);
    else
      v204 = 0LL;
    v228->fields.voicePlayedOver64Info = (struct System_String_array *)v204;
    sub_B16F98(&v228->fields.voicePlayedOver64Info, v204);
    FieldEnvData_k__BackingField = v229->fields._FieldEnvData_k__BackingField;
    if ( !FieldEnvData_k__BackingField )
      goto LABEL_193;
    v206 = BattleFieldEnvironmentData__GetSaveData(FieldEnvData_k__BackingField, 0LL);
    v228->fields.fieldEnvData = v206;
    sub_B16F98(&v228->fields.fieldEnvData, v206);
    QuestRouteIdArray = BattleData__GetQuestRouteIdArray(v229, v207);
    v228->fields.questRouteIds = QuestRouteIdArray;
    sub_B16F98(&v228->fields.questRouteIds, QuestRouteIdArray);
    v228->fields.playerNpCount = v229->fields.playerNpCount;
    v228->fields.playerSkillCount = v229->fields.playerSkillCount;
    v228->fields.playerMasterSkillCount = v229->fields.playerMasterSkillCount;
    v228->fields.enemyEntryMaxCountEachTurn = v229->fields._EnemyEntryMaxCountEachTurn_k__BackingField;
    v228->fields.enemyMasterChangedFaceId = v229->fields.enemyMasterChangedFaceId;
    battleAtkManager = v229->fields.battleAtkManager;
    if ( !battleAtkManager )
      goto LABEL_193;
    ((void (__fastcall *)(struct BattleAttackManager_o *, BattleData_SaveData_o *, Il2CppMethodPointer))battleAtkManager->klass->vtable._8_GetSaveData.method)(
      battleAtkManager,
      v228,
      battleAtkManager->klass->vtable._9_SetSaveData.methodPtr);
    battleEvent = v229->fields.battleEvent;
    if ( !battleEvent )
      goto LABEL_193;
    ((void (__fastcall *)(struct BaseBattleEvent_o *, BattleData_SaveData_o *, Il2CppMethodPointer))battleEvent->klass->vtable._17_GetSaveData.method)(
      battleEvent,
      v228,
      battleEvent->klass->vtable._18_SetSaveData.methodPtr);
    calledEnemyUniqueIdHash = v229->fields.calledEnemyUniqueIdHash;
    if ( calledEnemyUniqueIdHash && calledEnemyUniqueIdHash->fields._count >= 1 )
      v212 = System_Linq_Enumerable__ToArray_int_(
               (System_Collections_Generic_IEnumerable_TSource__o *)calledEnemyUniqueIdHash,
               (const MethodInfo_19C4A28 *)Method_System_Linq_Enumerable_ToArray_int___);
    else
      v212 = 0LL;
    v228->fields.calledEnemyUniqueIds = v212;
    sub_B16F98(&v228->fields.calledEnemyUniqueIds, v212);
    v217 = (MiniMessagePack_MiniMessagePacker_o *)sub_B170CC(
                                                    MiniMessagePack_MiniMessagePacker_TypeInfo,
                                                    v213,
                                                    v214,
                                                    v215,
                                                    v216);
    MiniMessagePack_MiniMessagePacker___ctor(v217, 0LL);
    if ( !v217 )
      goto LABEL_193;
    v218 = MiniMessagePack_MiniMessagePacker__PackClass(v217, (Il2CppObject *)v228, 0LL);
    if ( (BYTE3(CatAndMouseGame_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0
      && !CatAndMouseGame_TypeInfo->_2.cctor_finished )
    {
      j_il2cpp_runtime_class_init_0(CatAndMouseGame_TypeInfo);
    }
    v219 = CatAndMouseGame__CatGame6_30577744(v218, 0LL);
    if ( (BYTE3(EncryptedPlayerPrefs_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0
      && !EncryptedPlayerPrefs_TypeInfo->_2.cctor_finished )
    {
      j_il2cpp_runtime_class_init_0(EncryptedPlayerPrefs_TypeInfo);
    }
    EncryptedPlayerPrefs__SetString((System_String_o *)StringLiteral_5049/*"DUEL"*/, v219, 0LL);
    v220 = v229->fields.battle_ent;
    if ( !v220 )
      goto LABEL_193;
    EncryptedPlayerPrefs__SetInt((System_String_o *)StringLiteral_10848/*"QUESTID"*/, v220->fields.questId, 0LL);
    EncryptedPlayerPrefs__SetInt((System_String_o *)StringLiteral_8097/*"IsDuelMessagePack"*/, 1, 0LL);
    EncryptedPlayerPrefs__SetString((System_String_o *)StringLiteral_15123/*"Version"*/, (System_String_o *)StringLiteral_957/*"0.6.17.1"*/, 0LL);
    v221 = v229->fields.battle_ent;
    if ( !v221 )
      goto LABEL_193;
    EncryptedPlayerPrefs__SetLong((System_String_o *)StringLiteral_11516/*"SAVEKEY_"*/, v221->fields.id, 0LL);
    if ( EncryptedPlayerPrefs__HasKey((System_String_o *)StringLiteral_2740/*"Battle"*/, 0LL) )
    {
      if ( (BYTE3(EncryptedPlayerPrefs_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0
        && !EncryptedPlayerPrefs_TypeInfo->_2.cctor_finished )
      {
        j_il2cpp_runtime_class_init_0(EncryptedPlayerPrefs_TypeInfo);
      }
      EncryptedPlayerPrefs__DeleteKey((System_String_o *)StringLiteral_2740/*"Battle"*/, 0LL);
    }
    v223 = v229->fields.waveClearNeedTurn;
    if ( (BYTE3(BattleData_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0 && !BattleData_TypeInfo->_2.cctor_finished )
      j_il2cpp_runtime_class_init_0(BattleData_TypeInfo);
    BattleData__saveWaveClearTurn(v223, v222);
    BattleData__SaveNoSkipDeadFirstIdList(v229, v224);
    logic = v229->fields.logic;
    if ( !logic )
      goto LABEL_193;
    BattleLogic__SaveCutinFirstIdList(logic, 0LL);
    UnityEngine_PlayerPrefs__Save(0LL);
  }
}


void __fastcall BattleData__SetBattleEntity(BattleData_o *this, BattleEntity_o *battleEntity, const MethodInfo *method)
{
  this->fields.battle_ent = battleEntity;
  sub_B16F98(&this->fields.battle_ent, battleEntity);
}


void __fastcall BattleData__SetBoostInfo(BattleData_o *this, SkillMaster_o *skillMaster, const MethodInfo *method)
{
  DataMasterBase_WarMaster__WarEntity__int__o *MasterData_WarQuestSelectionMaster; // x20
  __int64 v5; // x1
  __int64 v6; // x1
  __int64 v7; // x1
  __int64 v8; // x1
  __int64 v9; // x20
  __int64 v10; // x20
  DataManager_o *v11; // x0
  BattleInfoData_o *battle_info; // x0
  System_Int32_array *BoostSkillArray; // x0
  __int64 v14; // x1
  __int64 v15; // x2
  __int64 v16; // x3
  __int64 v17; // x4
  __int64 v18; // x8
  System_Int32_array *v19; // x21
  unsigned __int64 v20; // x24
  unsigned int v21; // w23
  __int64 v22; // x22
  __int64 v23; // x8
  SkillEntity_o *Entity; // x0
  struct System_Collections_Generic_List_BattleSkillInfoData__o *boostInfoList; // x0

  MasterData_WarQuestSelectionMaster = (DataMasterBase_WarMaster__WarEntity__int__o *)skillMaster;
  if ( (byte_40F6A2D & 1) == 0 )
  {
    sub_B16FFC(&BattleSkillInfoData_TypeInfo, skillMaster);
    sub_B16FFC(&Method_DataManager_GetMasterData_SkillMaster___, v5);
    sub_B16FFC(&Method_DataMasterBase_SkillMaster__SkillEntity__int__GetEntity__, v6);
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleSkillInfoData__Add__, v7);
    sub_B16FFC(&Method_SingletonMonoBehaviour_DataManager__getInstance__, v8);
    byte_40F6A2D = 1;
  }
  if ( !MasterData_WarQuestSelectionMaster )
  {
    v9 = *((_QWORD *)Method_SingletonMonoBehaviour_DataManager__getInstance__ + 3);
    if ( (*(_BYTE *)(v9 + 306) & 1) == 0 )
      sub_AAFCFC(*((_QWORD *)Method_SingletonMonoBehaviour_DataManager__getInstance__ + 3));
    v10 = **(_QWORD **)(v9 + 192);
    if ( (*(_BYTE *)(v10 + 306) & 1) == 0 )
      sub_AAFCFC(v10);
    v11 = **(DataManager_o ***)(v10 + 184);
    if ( !v11 )
      goto LABEL_23;
    MasterData_WarQuestSelectionMaster = (DataMasterBase_WarMaster__WarEntity__int__o *)DataManager__GetMasterData_WarQuestSelectionMaster_(
                                                                                          v11,
                                                                                          (const MethodInfo_18C3284 *)Method_DataManager_GetMasterData_SkillMaster___);
  }
  battle_info = this->fields.battle_info;
  if ( !battle_info )
    goto LABEL_23;
  BoostSkillArray = BattleInfoData__getBoostSkillArray(battle_info, 0LL);
  if ( BoostSkillArray )
  {
    v18 = *(_QWORD *)&BoostSkillArray->max_length;
    v19 = BoostSkillArray;
    if ( v18 )
    {
      if ( (int)v18 >= 1 )
      {
        v20 = 0LL;
        while ( 1 )
        {
          if ( v20 >= (unsigned int)v18 )
          {
            sub_B17100(BoostSkillArray, v14, v15);
            sub_B170A0();
          }
          v21 = v19->m_Items[v20 + 1];
          v22 = sub_B170CC(BattleSkillInfoData_TypeInfo, v14, v15, v16, v17);
          BattleSkillInfoData___ctor((BattleSkillInfoData_o *)v22, 0LL);
          if ( !v22 )
            break;
          v23 = *(_QWORD *)v22;
          *(_BYTE *)(v22 + 52) = 0;
          *(_DWORD *)(v22 + 20) = v20;
          *(_DWORD *)(v22 + 24) = -1;
          *(_DWORD *)(v22 + 16) = 21;
          (*(void (__fastcall **)(__int64, _QWORD, _QWORD))(v23 + 376))(v22, v21, *(_QWORD *)(v23 + 384));
          *(_DWORD *)(v22 + 48) = 0;
          *(_QWORD *)(v22 + 36) = 1LL;
          *(_DWORD *)(v22 + 64) = -1;
          if ( !MasterData_WarQuestSelectionMaster )
            break;
          Entity = (SkillEntity_o *)DataMasterBase_WarMaster__WarEntity__int___GetEntity(
                                      MasterData_WarQuestSelectionMaster,
                                      v21,
                                      (const MethodInfo_266F388 *)Method_DataMasterBase_SkillMaster__SkillEntity__int__GetEntity__);
          if ( Entity )
          {
            *(_BYTE *)(v22 + 52) = 1;
            *(_BYTE *)(v22 + 28) = SkillEntity__isPassive(Entity, 0LL);
          }
          boostInfoList = this->fields.boostInfoList;
          if ( !boostInfoList )
            break;
          System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData___Add(
            (System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData__o *)boostInfoList,
            (EventMissionProgressRequest_Argument_ProgressData_o *)v22,
            (const MethodInfo_2F25CD8 *)Method_System_Collections_Generic_List_BattleSkillInfoData__Add__);
          LODWORD(v18) = v19->max_length;
          if ( (__int64)++v20 >= (int)v18 )
            return;
        }
LABEL_23:
        sub_B170D4();
      }
    }
  }
}


// local variable allocation has failed, the output may be wrong!
void __fastcall BattleData__SetEnemyCountStartValue(BattleData_o *this, int32_t waveCount, const MethodInfo *method)
{
  BattleEntity_o *battle_ent; // x0
  StageEntity_o *StageEntityAtWave; // x0
  int32_t EnemyCountStartValue; // w0
  struct System_Collections_Generic_List_BattleServantData__o *enemy_datalist; // x8

  if ( (byte_40F6A9B & 1) == 0 )
  {
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleServantData__get_Count__, *(_QWORD *)&waveCount);
    byte_40F6A9B = 1;
  }
  battle_ent = this->fields.battle_ent;
  if ( !battle_ent
    || (StageEntityAtWave = BattleEntity__GetStageEntityAtWave(battle_ent, waveCount, 0LL)) == 0LL
    || (EnemyCountStartValue = StageEntity__GetEnemyCountStartValue(StageEntityAtWave, 0LL),
        (enemy_datalist = this->fields.enemy_datalist) == 0LL) )
  {
    sub_B170D4();
  }
  this->fields._EnemyCountStartValue_k__BackingField = (EnemyCountStartValue - enemy_datalist->fields._size) & ~((EnemyCountStartValue - enemy_datalist->fields._size) >> 31);
}


bool __fastcall BattleData__SetEntry(
        BattleData_o *this,
        BattleServantData_o *servantData,
        int32_t deckIndex,
        const MethodInfo *method)
{
  _BOOL8 IsEntry; // x0
  __int64 v8; // x1
  __int64 v9; // x2
  bool result; // w0
  __int64 v11; // x8
  __int64 v12; // x8

  if ( !servantData )
    return 0;
  if ( servantData->fields.isEntry )
    return 0;
  IsEntry = BattleData__IsEntry(this, deckIndex, servantData->fields.isEnemy, method);
  if ( IsEntry )
    return 0;
  v11 = 288LL;
  if ( servantData->fields.isEnemy )
    v11 = 296LL;
  v12 = *(__int64 *)((char *)&this->klass + v11);
  if ( !v12 )
    sub_B170D4();
  if ( *(_DWORD *)(v12 + 24) <= (unsigned int)deckIndex )
  {
    sub_B17100(IsEntry, v8, v9);
    sub_B170A0();
  }
  result = 1;
  *(_DWORD *)(v12 + 4LL * deckIndex + 32) = servantData->fields.uniqueId;
  servantData->fields.isEntry = 1;
  servantData->fields.deckIndex = deckIndex;
  return result;
}


void __fastcall BattleData__SetFixCommandData(
        BattleData_o *this,
        BattleCommandData_array *commands,
        const MethodInfo *method)
{
  this->fields.fixedCommands = commands;
  sub_B16F98(&this->fields.fixedCommands, commands);
}


void __fastcall BattleData__SetLastUsedPlayerSkillInfo(
        BattleData_o *this,
        BattleSkillInfoData_o *skillInfo,
        const MethodInfo *method)
{
  __int64 v3; // x3
  __int64 v4; // x4
  BattleSkillInfoData_o *v7; // x22
  BattleSkillInfoData_o **p_lastUsedPlayerSkillInfo_k__BackingField; // x20
  struct BattleSkillInfoData_o *lastUsedPlayerSkillInfo_k__BackingField; // x21
  unsigned int v10; // w0

  if ( (byte_40F6AD0 & 1) == 0 )
  {
    sub_B16FFC(&BattleSkillInfoData_TypeInfo, skillInfo);
    byte_40F6AD0 = 1;
  }
  v7 = (BattleSkillInfoData_o *)sub_B170CC(BattleSkillInfoData_TypeInfo, skillInfo, method, v3, v4);
  BattleSkillInfoData___ctor(v7, 0LL);
  p_lastUsedPlayerSkillInfo_k__BackingField = &this->fields._lastUsedPlayerSkillInfo_k__BackingField;
  this->fields._lastUsedPlayerSkillInfo_k__BackingField = v7;
  sub_B16F98(&this->fields._lastUsedPlayerSkillInfo_k__BackingField, v7);
  if ( !skillInfo
    || (lastUsedPlayerSkillInfo_k__BackingField = this->fields._lastUsedPlayerSkillInfo_k__BackingField,
        v10 = ((__int64 (__fastcall *)(BattleSkillInfoData_o *, Il2CppMethodPointer))skillInfo->klass->vtable._5_get_skillId.method)(
                skillInfo,
                skillInfo->klass->vtable._6_get_IndividualityArray.methodPtr),
        !lastUsedPlayerSkillInfo_k__BackingField)
    || (((void (__fastcall *)(struct BattleSkillInfoData_o *, _QWORD, Il2CppMethodPointer))lastUsedPlayerSkillInfo_k__BackingField->klass->vtable._4_set_skillId.method)(
          lastUsedPlayerSkillInfo_k__BackingField,
          v10,
          lastUsedPlayerSkillInfo_k__BackingField->klass->vtable._5_get_skillId.methodPtr),
        !*p_lastUsedPlayerSkillInfo_k__BackingField)
    || ((*p_lastUsedPlayerSkillInfo_k__BackingField)->fields.skilllv = skillInfo->fields.skilllv,
        !*p_lastUsedPlayerSkillInfo_k__BackingField) )
  {
    sub_B170D4();
  }
  BattleSkillInfoData__UpdateSelectAddIndex(
    *p_lastUsedPlayerSkillInfo_k__BackingField,
    skillInfo->fields._SelectAddIndex_k__BackingField,
    0LL);
}


void __fastcall BattleData__SetOriginalCallEnemyUniqueId(BattleData_o *this, const MethodInfo *method)
{
  __int64 v2; // x2
  __int64 v3; // x3
  __int64 v4; // x4
  __int64 v6; // x1
  __int64 v7; // x1
  __int64 v8; // x1
  System_Collections_Generic_Dictionary_int__int__o *v9; // x21
  System_Collections_Generic_Dictionary_int__int__o **p_originalCallEnemyUniqueIdDict; // x19
  __int64 v11; // x0
  __int64 v12; // x1
  __int64 v13; // x2
  struct BattleInfoData_o *battle_info; // x8
  struct DeckData_array *callDeck; // x20
  __int64 v16; // x8
  unsigned __int64 i; // x21
  DeckData_o *v18; // x9
  struct BattleDeckServantData_array *svts; // x24
  __int64 v20; // x8
  unsigned __int64 v21; // x25
  BattleDeckServantData_o *v22; // x27

  if ( (byte_40F6ACA & 1) == 0 )
  {
    sub_B16FFC(&Method_System_Collections_Generic_Dictionary_int__int__Add__, method);
    sub_B16FFC(&Method_System_Collections_Generic_Dictionary_int__int__ContainsKey__, v6);
    sub_B16FFC(&Method_System_Collections_Generic_Dictionary_int__int___ctor__, v7);
    sub_B16FFC(&System_Collections_Generic_Dictionary_int__int__TypeInfo, v8);
    byte_40F6ACA = 1;
  }
  v9 = (System_Collections_Generic_Dictionary_int__int__o *)sub_B170CC(
                                                              System_Collections_Generic_Dictionary_int__int__TypeInfo,
                                                              method,
                                                              v2,
                                                              v3,
                                                              v4);
  System_Collections_Generic_Dictionary_int__int____ctor(
    v9,
    (const MethodInfo_2DDC410 *)Method_System_Collections_Generic_Dictionary_int__int___ctor__);
  p_originalCallEnemyUniqueIdDict = &this->fields.originalCallEnemyUniqueIdDict;
  this->fields.originalCallEnemyUniqueIdDict = v9;
  v11 = sub_B16F98(&this->fields.originalCallEnemyUniqueIdDict, v9);
  battle_info = this->fields.battle_info;
  if ( battle_info )
  {
    callDeck = battle_info->fields.callDeck;
    if ( callDeck )
    {
      v16 = *(_QWORD *)&callDeck->max_length;
      if ( (int)v16 >= 1 )
      {
        for ( i = 0LL; (__int64)i < (int)v16; ++i )
        {
          if ( i >= (unsigned int)v16 )
            goto LABEL_22;
          v18 = callDeck->m_Items[i];
          if ( v18 )
          {
            svts = v18->fields.svts;
            if ( !svts )
LABEL_23:
              sub_B170D4();
            v20 = *(_QWORD *)&svts->max_length;
            if ( (int)v20 >= 1 )
            {
              v21 = 0LL;
              while ( v21 < (unsigned int)v20 )
              {
                v22 = svts->m_Items[v21];
                if ( v22 )
                {
                  if ( !*p_originalCallEnemyUniqueIdDict )
                    goto LABEL_23;
                  v11 = System_Collections_Generic_Dictionary_int__int___ContainsKey(
                          *p_originalCallEnemyUniqueIdDict,
                          v22->fields.npcId,
                          (const MethodInfo_2DDD218 *)Method_System_Collections_Generic_Dictionary_int__int__ContainsKey__);
                  if ( (v11 & 1) == 0 )
                  {
                    if ( !*p_originalCallEnemyUniqueIdDict )
                      goto LABEL_23;
                    System_Collections_Generic_Dictionary_int__int___Add(
                      *p_originalCallEnemyUniqueIdDict,
                      v22->fields.npcId,
                      v22->fields.uniqueId,
                      (const MethodInfo_2DDCFB4 *)Method_System_Collections_Generic_Dictionary_int__int__Add__);
                  }
                }
                LODWORD(v20) = svts->max_length;
                if ( (__int64)++v21 >= (int)v20 )
                  goto LABEL_19;
              }
LABEL_22:
              sub_B17100(v11, v12, v13);
              sub_B170A0();
            }
LABEL_19:
            LODWORD(v16) = callDeck->max_length;
          }
        }
      }
    }
  }
}


void __fastcall BattleData__SetOverrideBgmData(
        BattleData_o *this,
        BattleFieldEnvironmentData_BGMData_o *bgmData,
        const MethodInfo *method)
{
  struct OverwriteBattleBgmData_o *BgmData_k__BackingField; // x1
  BattleLogic_o *logic; // x0

  if ( bgmData )
  {
    BgmData_k__BackingField = bgmData->fields._BgmData_k__BackingField;
    this->fields._overwriteBgmData_k__BackingField = BgmData_k__BackingField;
    sub_B16F98(&this->fields._overwriteBgmData_k__BackingField, BgmData_k__BackingField);
    logic = this->fields.logic;
    if ( !logic )
      sub_B170D4();
    BattleLogic__loadBgmName(logic, 0LL, 0LL);
  }
}


void __fastcall BattleData__SetProcesssFlgOnBattleResume(BattleData_o *this, const MethodInfo *method)
{
  this->fields.progresslistflg |= 0x800u;
}


void __fastcall BattleData__SetSavedCommandCardBuffData(BattleData_o *this, const MethodInfo *method)
{
  const MethodInfo *v2; // x2
  struct BattleCommandData_array *draw_commandlist; // x8
  BattleData_o *v4; // x19
  __int64 v5; // x9
  unsigned int v6; // w21
  BattleCommandData_o *v7; // x20
  BattleServantData_o *ServantData; // x0
  struct BattleBuffData_o *buffData; // x1
  struct BattleCommandData_array *p_shcmlist; // x8
  __int64 v11; // x9
  unsigned int v12; // w21
  BattleCommandData_o *v13; // x20
  BattleServantData_o *v14; // x0
  struct BattleBuffData_o *v15; // x1
  struct BattleCommandData_array *fixedCommands; // x8
  __int64 v17; // x9
  unsigned int v18; // w21
  BattleCommandData_o *v19; // x20
  BattleServantData_o *v20; // x0
  struct BattleBuffData_o *v21; // x1

  draw_commandlist = this->fields.draw_commandlist;
  v4 = this;
  if ( draw_commandlist )
  {
    v5 = *(_QWORD *)&draw_commandlist->max_length;
    if ( v5 )
    {
      if ( (int)v5 >= 1 )
      {
        v6 = 0;
        while ( v6 < (unsigned int)v5 )
        {
          v7 = draw_commandlist->m_Items[v6];
          if ( !v7
            || (ServantData = BattleData__getServantData(v4, v7->fields.uniqueId, v2)) == 0LL
            || (buffData = ServantData->fields.buffData,
                v7->fields.battleBuffData = buffData,
                this = (BattleData_o *)sub_B16F98(&v7->fields.battleBuffData, buffData),
                (draw_commandlist = v4->fields.draw_commandlist) == 0LL) )
          {
LABEL_29:
            sub_B170D4();
          }
          LODWORD(v5) = draw_commandlist->max_length;
          if ( (int)++v6 >= (int)v5 )
            goto LABEL_10;
        }
LABEL_30:
        sub_B17100(this, method, v2);
        sub_B170A0();
      }
    }
  }
LABEL_10:
  p_shcmlist = v4->fields.p_shcmlist;
  if ( p_shcmlist )
  {
    v11 = *(_QWORD *)&p_shcmlist->max_length;
    if ( v11 )
    {
      if ( (int)v11 >= 1 )
      {
        v12 = 0;
        while ( v12 < (unsigned int)v11 )
        {
          v13 = p_shcmlist->m_Items[v12];
          if ( !v13 )
            goto LABEL_29;
          v14 = BattleData__getServantData(v4, v13->fields.uniqueId, v2);
          if ( !v14 )
            goto LABEL_29;
          v15 = v14->fields.buffData;
          v13->fields.battleBuffData = v15;
          this = (BattleData_o *)sub_B16F98(&v13->fields.battleBuffData, v15);
          p_shcmlist = v4->fields.p_shcmlist;
          if ( !p_shcmlist )
            goto LABEL_29;
          LODWORD(v11) = p_shcmlist->max_length;
          if ( (int)++v12 >= (int)v11 )
            goto LABEL_19;
        }
        goto LABEL_30;
      }
    }
  }
LABEL_19:
  fixedCommands = v4->fields.fixedCommands;
  if ( fixedCommands )
  {
    v17 = *(_QWORD *)&fixedCommands->max_length;
    if ( v17 )
    {
      if ( (int)v17 >= 1 )
      {
        v18 = 0;
        while ( v18 < (unsigned int)v17 )
        {
          v19 = fixedCommands->m_Items[v18];
          if ( !v19 )
            goto LABEL_29;
          v20 = BattleData__getServantData(v4, v19->fields.uniqueId, v2);
          if ( !v20 )
            goto LABEL_29;
          v21 = v20->fields.buffData;
          v19->fields.battleBuffData = v21;
          this = (BattleData_o *)sub_B16F98(&v19->fields.battleBuffData, v21);
          fixedCommands = v4->fields.fixedCommands;
          if ( !fixedCommands )
            goto LABEL_29;
          LODWORD(v17) = fixedCommands->max_length;
          if ( (int)++v18 >= (int)v17 )
            return;
        }
        goto LABEL_30;
      }
    }
  }
}


void __fastcall BattleData__SetUsedTurn(BattleData_o *this, const MethodInfo *method)
{
  __int64 v2; // x2
  struct System_Int32_array *waveClearNeedTurn; // x8
  __int64 wavecount; // x9

  waveClearNeedTurn = this->fields.waveClearNeedTurn;
  if ( !waveClearNeedTurn )
    sub_B170D4();
  wavecount = this->fields.wavecount;
  if ( (unsigned int)wavecount >= waveClearNeedTurn->max_length )
  {
    sub_B17100(this, method, v2);
    sub_B170A0();
  }
  waveClearNeedTurn->m_Items[wavecount + 1] = this->fields.turnCount;
}


// local variable allocation has failed, the output may be wrong!
void __fastcall BattleData__SetWasAttackTargetId(
        BattleData_o *this,
        int32_t actorId,
        int32_t targetId,
        const MethodInfo *method)
{
  BattleData_o *data; // x0
  BattleServantData_o *ServantData; // x0

  data = this->fields.data;
  if ( !data )
    sub_B170D4();
  ServantData = BattleData__getServantData(data, targetId, *(const MethodInfo **)&targetId);
  if ( ServantData )
    ServantData->fields.wasAttackTargetId = actorId;
}


// local variable allocation has failed, the output may be wrong!
void __fastcall BattleData__SetWasAttackTargetIdList(
        BattleData_o *this,
        int32_t actorId,
        System_Int32_array *targetIdlist,
        const MethodInfo *method)
{
  __int64 v4; // x8
  unsigned __int64 v8; // x22

  if ( !targetIdlist )
    sub_B170D4();
  v4 = *(_QWORD *)&targetIdlist->max_length;
  if ( (int)v4 >= 1 )
  {
    v8 = 0LL;
    do
    {
      if ( v8 >= (unsigned int)v4 )
      {
        sub_B17100(this, *(_QWORD *)&actorId, targetIdlist);
        sub_B170A0();
      }
      BattleData__SetWasAttackTargetId(this, actorId, targetIdlist->m_Items[v8 + 1], method);
      LODWORD(v4) = targetIdlist->max_length;
      ++v8;
    }
    while ( (__int64)v8 < (int)v4 );
  }
}


void __fastcall BattleData__SubBuff(
        BattleData_o *this,
        System_String_o *key,
        BattleServantData_o *targetSvt,
        const MethodInfo *method)
{
  System_String_o *Value; // x21
  const MethodInfo *v7; // x1
  System_Int32_array *v8; // x0
  const MethodInfo *v9; // x3
  BattleData_o *data; // x0
  System_Int32_array *v11; // x2
  BattleData_o *v12; // x0

  Value = ConstantStrMaster__getValue(key, 0LL);
  if ( !System_String__IsNullOrEmpty(Value, 0LL) )
  {
    if ( targetSvt )
    {
      v8 = BasicHelper__Convert2IntArray(Value, 0x2Cu, 0LL);
    }
    else
    {
      data = this->fields.data;
      if ( !data )
        goto LABEL_8;
      targetSvt = BattleData__getTopFieldPlayerServant(data, v7);
      v8 = BasicHelper__Convert2IntArray(Value, 0x2Cu, 0LL);
      if ( !targetSvt )
        goto LABEL_8;
    }
    v11 = v8;
    v12 = this->fields.data;
    if ( v12 )
    {
      BattleData__SubBuffFromPT(v12, targetSvt->fields.uniqueId, v11, v9);
      return;
    }
LABEL_8:
    sub_B170D4();
  }
}


void __fastcall BattleData__SubBuffExitSvt(
        BattleData_o *this,
        BattleServantData_o *targetSvt,
        const MethodInfo *method)
{
  const MethodInfo *v3; // x3

  if ( (byte_40F6A37 & 1) == 0 )
  {
    sub_B16FFC(&StringLiteral_12508/*"SVT_EXIT_PT_BUFF_INDIVI"*/, targetSvt);
    byte_40F6A37 = 1;
  }
  BattleData__SubBuffTarget(this, (System_String_o *)StringLiteral_12508/*"SVT_EXIT_PT_BUFF_INDIVI"*/, targetSvt, v3);
}


void __fastcall BattleData__SubBuffFromPT(
        BattleData_o *this,
        int32_t uniqueId,
        System_Int32_array *indivi,
        const MethodInfo *method)
{
  BattleData_o *data; // x0
  _DWORD *PTList; // x0
  __int64 v7; // x1
  __int64 v8; // x2
  int v9; // w8
  _DWORD *v10; // x20
  unsigned int v11; // w21
  BattleServantData_o *v12; // x0

  data = this->fields.data;
  if ( !data )
    goto LABEL_10;
  PTList = BattleData__getPTList(data, uniqueId, (const MethodInfo *)indivi);
  if ( !PTList )
    goto LABEL_10;
  v9 = PTList[6];
  v10 = PTList;
  if ( v9 >= 1 )
  {
    v11 = 0;
    while ( 1 )
    {
      if ( v11 >= v9 )
      {
        sub_B17100(PTList, v7, v8);
        sub_B170A0();
      }
      v12 = *(BattleServantData_o **)&v10[2 * v11 + 8];
      if ( !v12 )
        break;
      PTList = BattleServantData__subBuffFromIndividualites(v12, indivi, 0, 0, 0, 0, 0LL);
      v9 = v10[6];
      if ( (int)++v11 >= v9 )
        return;
    }
LABEL_10:
    sub_B170D4();
  }
}


void __fastcall BattleData__SubBuffFromPT_18778888(
        BattleData_o *this,
        BattleServantData_o *targetSvt,
        const MethodInfo *method)
{
  const MethodInfo *v3; // x3

  if ( (byte_40F6A36 & 1) == 0 )
  {
    sub_B16FFC(&StringLiteral_12354/*"SUB_PT_BUFF_INDIVI"*/, targetSvt);
    byte_40F6A36 = 1;
  }
  BattleData__SubBuff(this, (System_String_o *)StringLiteral_12354/*"SUB_PT_BUFF_INDIVI"*/, targetSvt, v3);
}


void __fastcall BattleData__SubBuffTarget(
        BattleData_o *this,
        System_String_o *key,
        BattleServantData_o *targetSvt,
        const MethodInfo *method)
{
  System_String_o *Value; // x19
  const MethodInfo *v8; // x1
  __int64 v9; // x2
  System_Int32_array *v10; // x19
  __int64 v11; // x0
  _DWORD *v12; // x20
  _DWORD *PlayerServantList; // x0
  __int64 v14; // x1
  __int64 v15; // x2
  int v16; // w8
  unsigned int v17; // w21
  BattleServantData_o *v18; // x0

  if ( (byte_40F6A38 & 1) == 0 )
  {
    sub_B16FFC(&BattleServantData___TypeInfo, key);
    byte_40F6A38 = 1;
  }
  Value = ConstantStrMaster__getValue(key, 0LL);
  if ( System_String__IsNullOrEmpty(Value, 0LL) )
    return;
  v10 = BasicHelper__Convert2IntArray(Value, 0x2Cu, 0LL);
  if ( !targetSvt )
  {
    PlayerServantList = BattleData__getPlayerServantList(this, v8);
    v12 = PlayerServantList;
    if ( PlayerServantList )
      goto LABEL_10;
LABEL_16:
    sub_B170D4();
  }
  v11 = sub_B17014(BattleServantData___TypeInfo, 1LL, v9);
  if ( !v11 )
    goto LABEL_16;
  v12 = (_DWORD *)v11;
  PlayerServantList = (_DWORD *)sub_B170BC(targetSvt, *(_QWORD *)(*(_QWORD *)v11 + 64LL));
  if ( !PlayerServantList )
  {
    sub_B170F4();
    sub_B170A0();
  }
  if ( !v12[6] )
    goto LABEL_17;
  *((_QWORD *)v12 + 4) = targetSvt;
  PlayerServantList = (_DWORD *)sub_B16F98(v12 + 8, targetSvt);
LABEL_10:
  v16 = v12[6];
  if ( v16 >= 1 )
  {
    v17 = 0;
    while ( v17 < v16 )
    {
      v18 = *(BattleServantData_o **)&v12[2 * v17 + 8];
      if ( !v18 )
        goto LABEL_16;
      PlayerServantList = BattleServantData__subBuffFromIndividualites(v18, v10, 0, 0, 0, 0, 0LL);
      v16 = v12[6];
      if ( (int)++v17 >= v16 )
        return;
    }
LABEL_17:
    sub_B17100(PlayerServantList, v14, v15);
    sub_B170A0();
  }
}


void __fastcall BattleData__SuccessContinue(BattleData_o *this, const MethodInfo *method)
{
  int32_t v3; // w19

  if ( (byte_40F6A19 & 1) == 0 )
  {
    sub_B16FFC(&BattleData_TypeInfo, method);
    byte_40F6A19 = 1;
  }
  v3 = this->fields.continueCount + 1;
  this->fields.continueCount = v3;
  if ( (BYTE3(BattleData_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0 && !BattleData_TypeInfo->_2.cctor_finished )
    j_il2cpp_runtime_class_init_0(BattleData_TypeInfo);
  BattleData__saveContinueCount(v3, method);
}


bool __fastcall BattleData__TryGetRaidEntity(
        BattleData_o *this,
        EventRaidEntity_o **raidEnt,
        int32_t raidId,
        const MethodInfo *method)
{
  __int64 v7; // x1
  WebViewManager_o *Instance; // x0
  EventRaidMaster_o *MasterData_WarQuestSelectionMaster; // x0
  struct BattleEntity_o *battle_ent; // x8

  if ( (byte_40F6AA7 & 1) == 0 )
  {
    sub_B16FFC(&Method_DataManager_GetMasterData_EventRaidMaster___, raidEnt);
    sub_B16FFC(&Method_SingletonMonoBehaviour_DataManager__get_Instance__, v7);
    byte_40F6AA7 = 1;
  }
  Instance = SingletonMonoBehaviour_WebViewManager___get_Instance((const MethodInfo_2A54F38 *)Method_SingletonMonoBehaviour_DataManager__get_Instance__);
  if ( !Instance
    || (MasterData_WarQuestSelectionMaster = (EventRaidMaster_o *)DataManager__GetMasterData_WarQuestSelectionMaster_(
                                                                    (DataManager_o *)Instance,
                                                                    (const MethodInfo_18C3284 *)Method_DataManager_GetMasterData_EventRaidMaster___),
        (battle_ent = this->fields.battle_ent) == 0LL)
    || !MasterData_WarQuestSelectionMaster )
  {
    sub_B170D4();
  }
  return EventRaidMaster__TryGetEntity(
           MasterData_WarQuestSelectionMaster,
           raidEnt,
           battle_ent->fields.eventId,
           raidId,
           0LL);
}


void __fastcall BattleData__UpdateCommandData(
        BattleData_o *this,
        BattleCommandData_array *commandArray,
        BattleServantData_o *svtData,
        const MethodInfo *method)
{
  __int64 IsNullOrEmpty; // x0
  __int64 v7; // x1
  __int64 v8; // x2
  signed int max_length; // w8
  unsigned int v10; // w23
  BattleCommandData_o *v11; // x25
  __int64 v12; // x21
  __int64 v13; // x22
  CodeStage_AntiCheat_ObscuredTypes_ObscuredInt_o v14; // 0:x0.16

  if ( (byte_40F6A11 & 1) == 0 )
  {
    sub_B16FFC(&CodeStage_AntiCheat_ObscuredTypes_ObscuredInt_TypeInfo, commandArray);
    byte_40F6A11 = 1;
  }
  IsNullOrEmpty = BasicHelper__IsNullOrEmpty((System_Collections_ICollection_o *)commandArray, 0LL);
  if ( svtData && (IsNullOrEmpty & 1) == 0 )
  {
    if ( !commandArray )
      goto LABEL_18;
    max_length = commandArray->max_length;
    if ( max_length >= 1 )
    {
      v10 = 0;
      while ( 1 )
      {
        if ( v10 >= max_length )
        {
          sub_B17100(IsNullOrEmpty, v7, v8);
          sub_B170A0();
        }
        v11 = commandArray->m_Items[v10];
        if ( !v11 )
          break;
        if ( v11->fields.uniqueId == svtData->fields.uniqueId )
        {
          v13 = *(_QWORD *)&svtData->fields.svtId.fields.currentCryptoKey;
          v12 = *(_QWORD *)&svtData->fields.svtId.fields.fakeValue;
          if ( (BYTE3(CodeStage_AntiCheat_ObscuredTypes_ObscuredInt_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0
            && !CodeStage_AntiCheat_ObscuredTypes_ObscuredInt_TypeInfo->_2.cctor_finished )
          {
            j_il2cpp_runtime_class_init_0(CodeStage_AntiCheat_ObscuredTypes_ObscuredInt_TypeInfo);
          }
          *(_QWORD *)&v14.fields.currentCryptoKey = v13;
          *(_QWORD *)&v14.fields.fakeValue = v12;
          v11->fields.svtId = CodeStage_AntiCheat_ObscuredTypes_ObscuredInt__op_Implicit_44068536(v14, 0LL);
          v11->fields.imageSvtId = BattleServantData__GetCommandImageSvtId(svtData, 0LL);
          v11->fields.svtlimit = BattleServantData__getCommandDispLimitCount(svtData, 0LL);
          v11->fields._loadsvtLimit = BattleServantData__getDispLimitCount(svtData, 1, 0LL);
          IsNullOrEmpty = BattleServantData__getAttri(svtData, 0LL);
          v11->fields.attri = IsNullOrEmpty;
        }
        max_length = commandArray->max_length;
        if ( (int)++v10 >= max_length )
          return;
      }
LABEL_18:
      sub_B170D4();
    }
  }
}


void __fastcall BattleData__UpdateContinueItemInfo(BattleData_o *this, const MethodInfo *method)
{
  __int64 v3; // x1
  __int64 v4; // x1
  __int64 v5; // x1
  __int64 v6; // x1
  __int64 v7; // x1
  __int64 v8; // x1
  __int64 v9; // x1
  WebViewManager_o *Instance; // x0
  ItemMaster_o *MasterData_WarQuestSelectionMaster; // x0
  System_Collections_Generic_List_ItemEntity__o *EntityListByType; // x21
  WebViewManager_o *v13; // x0
  WarQuestSelectionMaster_o *v14; // x0
  UserItemMaster_o *v15; // x20
  Il2CppObject *current; // x23
  int64_t UserId; // x0
  UserItemEntity_o *v18; // x8
  System_Collections_Generic_List_Enumerator_T__o v19; // [xsp+8h] [xbp-68h] BYREF
  System_Collections_Generic_List_Enumerator_T__o v20; // [xsp+20h] [xbp-50h] BYREF
  UserItemEntity_o *entity; // [xsp+48h] [xbp-28h] BYREF

  if ( (byte_40F6ABF & 1) == 0 )
  {
    sub_B16FFC(&Method_DataManager_GetMasterData_ItemMaster___, method);
    sub_B16FFC(&Method_DataManager_GetMasterData_UserItemMaster___, v3);
    sub_B16FFC(&Method_System_Collections_Generic_List_Enumerator_ItemEntity__Dispose__, v4);
    sub_B16FFC(&Method_System_Collections_Generic_List_Enumerator_ItemEntity__MoveNext__, v5);
    sub_B16FFC(&Method_System_Collections_Generic_List_Enumerator_ItemEntity__get_Current__, v6);
    sub_B16FFC(&Method_System_Collections_Generic_List_ItemEntity__GetEnumerator__, v7);
    sub_B16FFC(&NetworkManager_TypeInfo, v8);
    sub_B16FFC(&Method_SingletonMonoBehaviour_DataManager__get_Instance__, v9);
    byte_40F6ABF = 1;
  }
  entity = 0LL;
  memset(&v20, 0, sizeof(v20));
  HIDWORD(this->fields.continueItemDeadLine) = 0;
  *(_OWORD *)&this->fields.continueUseItemId = 0u;
  Instance = SingletonMonoBehaviour_WebViewManager___get_Instance((const MethodInfo_2A54F38 *)Method_SingletonMonoBehaviour_DataManager__get_Instance__);
  if ( !Instance
    || (MasterData_WarQuestSelectionMaster = (ItemMaster_o *)DataManager__GetMasterData_WarQuestSelectionMaster_(
                                                               (DataManager_o *)Instance,
                                                               (const MethodInfo_18C3284 *)Method_DataManager_GetMasterData_ItemMaster___)) == 0LL
    || (EntityListByType = ItemMaster__GetEntityListByType(MasterData_WarQuestSelectionMaster, 27, 0LL),
        (v13 = SingletonMonoBehaviour_WebViewManager___get_Instance((const MethodInfo_2A54F38 *)Method_SingletonMonoBehaviour_DataManager__get_Instance__)) == 0LL)
    || (v14 = DataManager__GetMasterData_WarQuestSelectionMaster_(
                (DataManager_o *)v13,
                (const MethodInfo_18C3284 *)Method_DataManager_GetMasterData_UserItemMaster___),
        !EntityListByType) )
  {
    sub_B170D4();
  }
  v15 = (UserItemMaster_o *)v14;
  System_Collections_Generic_List_BattleLogicBuff_ReduceHpProcess_BuffInfo___GetEnumerator(
    &v19,
    (System_Collections_Generic_List_BattleLogicBuff_ReduceHpProcess_BuffInfo__o *)EntityListByType,
    (const MethodInfo_2F26B54 *)Method_System_Collections_Generic_List_ItemEntity__GetEnumerator__);
  v20 = v19;
  while ( System_Collections_Generic_List_Enumerator_BattleLogicBuff_ReduceHpProcess_BuffInfo___MoveNext(
            &v20,
            (const MethodInfo_2074054 *)Method_System_Collections_Generic_List_Enumerator_ItemEntity__MoveNext__) )
  {
    current = v20.fields.current;
    if ( v20.fields.current )
    {
      this->fields.continueItemDeadLine = (int64_t)v20.fields.current[6].klass;
      this->fields.continueItemImageId = (int32_t)current[2].monitor;
      if ( (BYTE3(NetworkManager_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0
        && !NetworkManager_TypeInfo->_2.cctor_finished )
      {
        j_il2cpp_runtime_class_init_0(NetworkManager_TypeInfo);
      }
      UserId = NetworkManager__get_UserId(0LL);
      if ( !v15 )
        sub_B170D4();
      if ( UserItemMaster__TryGetEntity(v15, &entity, UserId, (int32_t)current[1].klass, 0LL) )
      {
        v18 = entity;
        if ( !entity )
          sub_B170D4();
        if ( entity->fields.num >= 1 )
        {
          this->fields.continueUseItemId = entity->fields.itemId;
          this->fields.continueItemNum = v18->fields.num;
          break;
        }
      }
    }
  }
  System_Collections_Generic_List_Enumerator_BattleLogicBuff_ReduceHpProcess_BuffInfo___Dispose(
    &v20,
    (const MethodInfo_2074050 *)Method_System_Collections_Generic_List_Enumerator_ItemEntity__Dispose__);
}


// local variable allocation has failed, the output may be wrong!
void __fastcall BattleData__UpdateTargetPosEnemyAppearValid(
        BattleData_o *this,
        System_Int32_array *positions,
        bool isValid,
        const MethodInfo *method)
{
  signed int max_length; // w11
  __int64 v5; // x8
  struct System_Boolean_array *enemyAppearValid; // x11
  int v7; // w12

  if ( positions )
  {
    max_length = positions->max_length;
    if ( max_length >= 1 )
    {
      v5 = 0LL;
      do
      {
        if ( (unsigned int)v5 >= max_length )
          goto LABEL_9;
        enemyAppearValid = this->fields.enemyAppearValid;
        if ( !enemyAppearValid )
          sub_B170D4();
        v7 = positions->m_Items[v5 + 1] - 1;
        if ( v7 >= enemyAppearValid->max_length )
        {
LABEL_9:
          sub_B17100(this, positions, isValid);
          sub_B170A0();
        }
        enemyAppearValid->m_Items[v7 + 4] = isValid;
        max_length = positions->max_length;
        ++v5;
      }
      while ( (int)v5 < max_length );
    }
  }
}


// local variable allocation has failed, the output may be wrong!
void __fastcall BattleData___RefreshAllSubServantDeckIndex_b__324_0(
        BattleData_o *this,
        bool isEnemy,
        const MethodInfo *method)
{
  __int64 v3; // x3
  __int64 v4; // x4
  __int64 v7; // x1
  __int64 v8; // x1
  __int64 v9; // x1
  __int64 v10; // x1
  BattleData___c__DisplayClass324_0_o *v11; // x21
  const MethodInfo *v12; // x2
  BattleServantData_array *SubServantArray; // x0
  __int64 v14; // x1
  __int64 v15; // x2
  __int64 v16; // x3
  __int64 v17; // x4
  __int64 v18; // x8
  __int64 v19; // x8
  System_Collections_Generic_IEnumerable_T__o *v20; // x19
  System_Action_DrawLotsDisplayMessage_DisplayedInGroup_SaveData__o *v21; // x20

  if ( (byte_40F6AD9 & 1) == 0 )
  {
    sub_B16FFC(&Method_System_Action_BattleServantData___ctor__, isEnemy);
    sub_B16FFC(&System_Action_BattleServantData__TypeInfo, v7);
    sub_B16FFC(&Method_BasicHelper_ForEach_BattleServantData___, v8);
    sub_B16FFC(&Method_BattleData___c__DisplayClass324_0__RefreshAllSubServantDeckIndex_b__1__, v9);
    sub_B16FFC(&BattleData___c__DisplayClass324_0_TypeInfo, v10);
    byte_40F6AD9 = 1;
  }
  v11 = (BattleData___c__DisplayClass324_0_o *)sub_B170CC(
                                                 BattleData___c__DisplayClass324_0_TypeInfo,
                                                 isEnemy,
                                                 method,
                                                 v3,
                                                 v4);
  BattleData___c__DisplayClass324_0___ctor(v11, 0LL);
  SubServantArray = BattleData__GetSubServantArray(this, isEnemy, v12);
  v18 = 288LL;
  if ( isEnemy )
    v18 = 296LL;
  v19 = *(__int64 *)((char *)&this->klass + v18);
  if ( !v19 || !v11 )
    sub_B170D4();
  v20 = (System_Collections_Generic_IEnumerable_T__o *)SubServantArray;
  v11->fields.deckIndex = *(_QWORD *)(v19 + 24);
  v21 = (System_Action_DrawLotsDisplayMessage_DisplayedInGroup_SaveData__o *)sub_B170CC(
                                                                               System_Action_BattleServantData__TypeInfo,
                                                                               v14,
                                                                               v15,
                                                                               v16,
                                                                               v17);
  System_Action_DrawLotsDisplayMessage_DisplayedInGroup_SaveData____ctor(
    v21,
    (Il2CppObject *)v11,
    Method_BattleData___c__DisplayClass324_0__RefreshAllSubServantDeckIndex_b__1__,
    (const MethodInfo_24B7310 *)Method_System_Action_BattleServantData___ctor__);
  BasicHelper__ForEach_DrawLotsDisplayMessage_DisplayedInGroup_SaveData_(
    v20,
    (System_Action_T__o *)v21,
    (const MethodInfo_18B756C *)Method_BasicHelper_ForEach_BattleServantData___);
}


void __fastcall BattleData__addCriticalPoint(
        BattleData_o *this,
        int32_t count,
        bool multipleGainStar,
        const MethodInfo *method)
{
  int v4; // w8
  int32_t totalCriticalStars; // w10
  int32_t criticalstars; // w9
  int32_t v7; // w9
  int32_t v8; // w8

  v4 = count;
  if ( multipleGainStar )
    v4 = this->fields.addCriticalstars + count;
  totalCriticalStars = this->fields.totalCriticalStars;
  criticalstars = this->fields.criticalstars;
  this->fields.addCriticalstars = v4;
  this->fields.prevCriticalstars = criticalstars;
  v7 = criticalstars + count;
  if ( totalCriticalStars + v4 - 50 <= 49 )
    v8 = v7;
  else
    v8 = 49;
  if ( v8 >= 99 )
    v8 = 99;
  this->fields.criticalstars = v8;
}


// local variable allocation has failed, the output may be wrong!
void __fastcall BattleData__addDamage(
        BattleData_o *this,
        int32_t targetId,
        int32_t damage,
        bool noAccumulation,
        const MethodInfo *method)
{
  BattleServantData_o *ServantData; // x0
  BattleServantData_o *v9; // x22
  const MethodInfo *v10; // x2

  ServantData = BattleData__getServantData(this, targetId, *(const MethodInfo **)&damage);
  if ( !ServantData )
    sub_B170D4();
  v9 = ServantData;
  BattleServantData__addDamage(ServantData, damage, noAccumulation, 0LL);
  if ( v9->fields.isEnemy )
    BattleData__AddTotalTurnDamage(this, damage, v10);
}


void __fastcall BattleData__addDropItems(BattleData_o *this, DropInfo_o *item, const MethodInfo *method)
{
  __int64 v3; // x3
  __int64 v4; // x4
  __int64 v7; // x1
  BattleDropItem_o *v8; // x21
  struct System_Collections_Generic_List_BattleDropItem__o *droplist; // x0

  if ( (byte_40F6A30 & 1) == 0 )
  {
    sub_B16FFC(&BattleDropItem_TypeInfo, item);
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleDropItem__Add__, v7);
    byte_40F6A30 = 1;
  }
  v8 = (BattleDropItem_o *)sub_B170CC(BattleDropItem_TypeInfo, item, method, v3, v4);
  BattleDropItem___ctor(v8, 0LL);
  if ( !v8 || (BattleDropItem__setData(v8, item, 0LL), (droplist = this->fields.droplist) == 0LL) )
    sub_B170D4();
  System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData___Add(
    (System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData__o *)droplist,
    (EventMissionProgressRequest_Argument_ProgressData_o *)v8,
    (const MethodInfo_2F25CD8 *)Method_System_Collections_Generic_List_BattleDropItem__Add__);
}


// local variable allocation has failed, the output may be wrong!
void __fastcall BattleData__addHeal(
        BattleData_o *this,
        int32_t targetId,
        int32_t heal,
        bool isForce,
        const MethodInfo *method)
{
  BattleServantData_o *ServantData; // x0

  ServantData = BattleData__getServantData(this, targetId, *(const MethodInfo **)&heal);
  if ( !ServantData )
    sub_B170D4();
  BattleServantData__healHp(ServantData, heal, isForce, 0LL);
}


void __fastcall BattleData__addLoadedCommonEffectPath(
        BattleData_o *this,
        System_String_array *pathArray,
        const MethodInfo *method)
{
  struct System_Collections_Generic_List_string__o *commonEffectPathList; // x0

  if ( (byte_40F69FB & 1) == 0 )
  {
    sub_B16FFC(&Method_System_Collections_Generic_List_string__AddRange__, pathArray);
    byte_40F69FB = 1;
  }
  commonEffectPathList = this->fields.commonEffectPathList;
  if ( !commonEffectPathList )
    sub_B170D4();
  System_Collections_Generic_List_TimeZoneInfo_AdjustmentRule___AddRange(
    (System_Collections_Generic_List_TimeZoneInfo_AdjustmentRule__o *)commonEffectPathList,
    (System_Collections_Generic_IEnumerable_T__o *)pathArray,
    (const MethodInfo_2F25F28 *)Method_System_Collections_Generic_List_string__AddRange__);
}


void __fastcall BattleData__addLogCommand(BattleData_o *this, const MethodInfo *method)
{
  __int64 v2; // x2
  __int64 v3; // x3
  __int64 v4; // x4
  __int64 v6; // x1
  struct BattleCommandData_array *selectcommandlist; // x8
  __int64 v8; // x21
  il2cpp_array_size_t v9; // w24
  BattleData_CommandHistory_o *v10; // x20
  __int64 v11; // x0
  const MethodInfo *v12; // x1
  __int64 v13; // x2
  struct BattleCommandData_array *v14; // x8
  __int64 v15; // x8
  struct BattleCommandData_array *v16; // x8
  BattleCommandData_o *v17; // x0
  struct System_Collections_Generic_List_BattleData_CommandHistory__o *comhistory; // x0

  if ( (byte_40F6A87 & 1) == 0 )
  {
    sub_B16FFC(&BattleData_CommandHistory_TypeInfo, method);
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleData_CommandHistory__Add__, v6);
    byte_40F6A87 = 1;
  }
  selectcommandlist = this->fields.selectcommandlist;
  if ( !selectcommandlist )
LABEL_15:
    sub_B170D4();
  v8 = 4LL;
  while ( 1 )
  {
    v9 = v8 - 4;
    if ( (int)v8 - 4 >= (signed int)selectcommandlist->max_length )
      break;
    v10 = (BattleData_CommandHistory_o *)sub_B170CC(BattleData_CommandHistory_TypeInfo, method, v2, v3, v4);
    BattleData_CommandHistory___ctor(v10, 0LL);
    v14 = this->fields.selectcommandlist;
    if ( !v14 )
      goto LABEL_15;
    if ( v9 >= v14->max_length )
    {
LABEL_17:
      sub_B17100(v11, v12, v13);
      sub_B170A0();
    }
    v15 = *((_QWORD *)&v14->obj.klass + v8);
    if ( v15 )
    {
      if ( v10 )
      {
        v10->fields.uid = *(_DWORD *)(v15 + 40);
        v16 = this->fields.selectcommandlist;
        if ( v16 )
        {
          if ( v9 >= v16->max_length )
            goto LABEL_17;
          v17 = (BattleCommandData_o *)*((_QWORD *)&v16->obj.klass + v8);
          if ( v17 )
          {
            v10->fields.ty = BattleCommandData__get_type(v17, v12);
            comhistory = this->fields.comhistory;
            if ( comhistory )
            {
              System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData___Add(
                (System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData__o *)comhistory,
                (EventMissionProgressRequest_Argument_ProgressData_o *)v10,
                (const MethodInfo_2F25CD8 *)Method_System_Collections_Generic_List_BattleData_CommandHistory__Add__);
              selectcommandlist = this->fields.selectcommandlist;
              ++v8;
              if ( selectcommandlist )
                continue;
            }
          }
        }
      }
    }
    goto LABEL_15;
  }
}


// local variable allocation has failed, the output may be wrong!
void __fastcall BattleData__addMasterSkillInfo(
        BattleData_o *this,
        int32_t type,
        int32_t index,
        int32_t skillId,
        int32_t skillLv,
        int32_t condId,
        bool isAdd,
        const MethodInfo *method)
{
  __int64 v15; // x1
  __int64 v16; // x1
  __int64 v17; // x1
  __int64 v18; // x1
  BattleSkillInfoData_o *SkillData; // x0
  BattleSkillInfoData_c *klass; // x9
  BattleSkillInfoData_o *v21; // x20
  __int64 v22; // x22
  __int64 v23; // x22
  DataManager_o *v24; // x0
  DataMasterBase_WarMaster__WarEntity__int__o *MasterData_WarQuestSelectionMaster; // x0
  SkillEntity_o *Entity; // x0
  bool isPassive; // w0
  struct System_Collections_Generic_List_BattleSkillInfoData__o *masterSkillInfo; // x0

  if ( (byte_40F6A2B & 1) == 0 )
  {
    sub_B16FFC(&Method_DataManager_GetMasterData_SkillMaster___, *(_QWORD *)&type);
    sub_B16FFC(&Method_DataMasterBase_SkillMaster__SkillEntity__int__GetEntity__, v15);
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleSkillInfoData__Add__, v16);
    sub_B16FFC(&ServantAssetLoadManager_TypeInfo, v17);
    sub_B16FFC(&Method_SingletonMonoBehaviour_DataManager__getInstance__, v18);
    byte_40F6A2B = 1;
  }
  SkillData = BattleSkillInfoData__MakeSkillData(type, 0LL);
  if ( !SkillData )
    goto LABEL_18;
  klass = SkillData->klass;
  SkillData->fields.type = type;
  SkillData->fields.index = index;
  SkillData->fields.svtUniqueId = -1;
  v21 = SkillData;
  ((void (__fastcall *)(BattleSkillInfoData_o *, _QWORD, Il2CppMethodPointer))klass->vtable._4_set_skillId.method)(
    SkillData,
    (unsigned int)skillId,
    klass->vtable._5_get_skillId.methodPtr);
  v21->fields.skilllv = skillLv;
  v21->fields.commonReleaseCondId = condId;
  v21->fields.isAdd = isAdd;
  v22 = *((_QWORD *)Method_SingletonMonoBehaviour_DataManager__getInstance__ + 3);
  if ( (*(_BYTE *)(v22 + 306) & 1) == 0 )
    sub_AAFCFC(*((_QWORD *)Method_SingletonMonoBehaviour_DataManager__getInstance__ + 3));
  v23 = **(_QWORD **)(v22 + 192);
  if ( (*(_BYTE *)(v23 + 306) & 1) == 0 )
    sub_AAFCFC(v23);
  v24 = **(DataManager_o ***)(v23 + 184);
  if ( !v24 )
    goto LABEL_18;
  MasterData_WarQuestSelectionMaster = (DataMasterBase_WarMaster__WarEntity__int__o *)DataManager__GetMasterData_WarQuestSelectionMaster_(
                                                                                        v24,
                                                                                        (const MethodInfo_18C3284 *)Method_DataManager_GetMasterData_SkillMaster___);
  if ( !MasterData_WarQuestSelectionMaster )
    goto LABEL_18;
  Entity = (SkillEntity_o *)DataMasterBase_WarMaster__WarEntity__int___GetEntity(
                              MasterData_WarQuestSelectionMaster,
                              skillId,
                              (const MethodInfo_266F388 *)Method_DataMasterBase_SkillMaster__SkillEntity__int__GetEntity__);
  if ( Entity )
  {
    v21->fields.isUseSkill = 1;
    isPassive = SkillEntity__isPassive(Entity, 0LL);
    v21->fields.chargeTurn = 0;
    v21->fields.isPassive = isPassive;
    v21->fields.sealedTurn = 0;
  }
  else
  {
    v21->fields.isUseSkill = 0;
  }
  masterSkillInfo = this->fields.masterSkillInfo;
  if ( !masterSkillInfo )
LABEL_18:
    sub_B170D4();
  System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData___Add(
    (System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData__o *)masterSkillInfo,
    (EventMissionProgressRequest_Argument_ProgressData_o *)v21,
    (const MethodInfo_2F25CD8 *)Method_System_Collections_Generic_List_BattleSkillInfoData__Add__);
  if ( (BYTE3(ServantAssetLoadManager_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0
    && !ServantAssetLoadManager_TypeInfo->_2.cctor_finished )
  {
    j_il2cpp_runtime_class_init_0(ServantAssetLoadManager_TypeInfo);
  }
  ServantAssetLoadManager__preloadSkillAnyVoice(v21, 0, 0LL);
}


void __fastcall BattleData__addTotalCriticalStars(BattleData_o *this, int32_t count, const MethodInfo *method)
{
  int32_t v3; // w8

  v3 = this->fields.totalCriticalStars + count;
  if ( v3 >= 99 )
    v3 = 99;
  this->fields.totalCriticalStars = v3;
}


void __fastcall BattleData__changeTutorialBattleSpeed(BattleData_o *this, const MethodInfo *method)
{
  __int64 v3; // x1
  int32_t systemflg_acceleration; // w19
  BattleData_c *v5; // x0
  System_String_o *speedKey; // x20

  if ( (byte_40F6A8E & 1) == 0 )
  {
    sub_B16FFC(&BattleData_TypeInfo, method);
    sub_B16FFC(&EncryptedPlayerPrefs_TypeInfo, v3);
    byte_40F6A8E = 1;
  }
  if ( this->fields.tutorialId == 2 )
  {
    systemflg_acceleration = 2;
    this->fields.systemflg_acceleration = 2;
    v5 = BattleData_TypeInfo;
    if ( (BYTE3(BattleData_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0 )
    {
      if ( BattleData_TypeInfo->_2.cctor_finished )
      {
        systemflg_acceleration = 2;
      }
      else
      {
        j_il2cpp_runtime_class_init_0(BattleData_TypeInfo);
        v5 = BattleData_TypeInfo;
        systemflg_acceleration = this->fields.systemflg_acceleration;
      }
    }
    speedKey = v5->static_fields->speedKey;
    if ( (BYTE3(EncryptedPlayerPrefs_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0
      && !EncryptedPlayerPrefs_TypeInfo->_2.cctor_finished )
    {
      j_il2cpp_runtime_class_init_0(EncryptedPlayerPrefs_TypeInfo);
    }
    EncryptedPlayerPrefs__SetInt(speedKey, systemflg_acceleration, 0LL);
  }
}


bool __fastcall BattleData__checkAliveAllEnemy(BattleData_o *this, const MethodInfo *method)
{
  __int64 v3; // x1
  struct System_Collections_Generic_List_BattleServantData__o *enemy_datalist; // x23
  __int64 size; // x21
  int v6; // w20
  __int64 v7; // x22
  struct System_Collections_Generic_List_BattleServantData__o *v8; // x23
  BattleServantData_o *v9; // x0

  if ( (byte_40F6A66 & 1) == 0 )
  {
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleServantData__get_Count__, method);
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleServantData__get_Item__, v3);
    byte_40F6A66 = 1;
  }
  enemy_datalist = this->fields.enemy_datalist;
  if ( !enemy_datalist )
    goto LABEL_16;
  size = enemy_datalist->fields._size;
  if ( (int)size >= 1 )
  {
    v6 = 0;
    v7 = 4LL;
    do
    {
      if ( v7 - 4 >= (unsigned __int64)(unsigned int)enemy_datalist->fields._size )
        System_ThrowHelper__ThrowArgumentOutOfRangeException_41329284(0LL);
      if ( *((_QWORD *)&enemy_datalist->fields._items->obj.klass + v7) )
      {
        v8 = this->fields.enemy_datalist;
        if ( !v8 )
          break;
        if ( v7 - 4 >= (unsigned __int64)(unsigned int)v8->fields._size )
          System_ThrowHelper__ThrowArgumentOutOfRangeException_41329284(0LL);
        v9 = (BattleServantData_o *)*((_QWORD *)&v8->fields._items->obj.klass + v7);
        if ( !v9 )
          break;
        v6 |= BattleServantData__isAlive(v9, 0, 0LL);
      }
      if ( v7 - 3 >= size )
        return v6 & 1;
      enemy_datalist = this->fields.enemy_datalist;
      ++v7;
    }
    while ( enemy_datalist );
LABEL_16:
    sub_B170D4();
  }
  LOBYTE(v6) = 0;
  return v6 & 1;
}


bool __fastcall BattleData__checkAliveEnemys(BattleData_o *this, const MethodInfo *method)
{
  __int64 v3; // x1
  struct System_Collections_Generic_List_BattleServantData__o *enemy_datalist; // x23
  __int64 size; // x21
  int v6; // w20
  __int64 v7; // x22
  struct System_Collections_Generic_List_BattleServantData__o *v8; // x23
  BattleServantData_o *v9; // x0

  if ( (byte_40F6A65 & 1) == 0 )
  {
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleServantData__get_Count__, method);
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleServantData__get_Item__, v3);
    byte_40F6A65 = 1;
  }
  enemy_datalist = this->fields.enemy_datalist;
  if ( !enemy_datalist )
    goto LABEL_16;
  size = enemy_datalist->fields._size;
  if ( (int)size >= 1 )
  {
    v6 = 0;
    v7 = 4LL;
    do
    {
      if ( v7 - 4 >= (unsigned __int64)(unsigned int)enemy_datalist->fields._size )
        System_ThrowHelper__ThrowArgumentOutOfRangeException_41329284(0LL);
      if ( *((_QWORD *)&enemy_datalist->fields._items->obj.klass + v7) )
      {
        v8 = this->fields.enemy_datalist;
        if ( !v8 )
          break;
        if ( v7 - 4 >= (unsigned __int64)(unsigned int)v8->fields._size )
          System_ThrowHelper__ThrowArgumentOutOfRangeException_41329284(0LL);
        v9 = (BattleServantData_o *)*((_QWORD *)&v8->fields._items->obj.klass + v7);
        if ( !v9 )
          break;
        v6 |= BattleServantData__isAlive(v9, 0, 0LL);
      }
      if ( v7 - 3 >= size )
        goto LABEL_18;
      enemy_datalist = this->fields.enemy_datalist;
      ++v7;
    }
    while ( enemy_datalist );
LABEL_16:
    sub_B170D4();
  }
  LOBYTE(v6) = 0;
LABEL_18:
  if ( this->fields.leaderDown )
    return 0;
  else
    return v6 & !this->fields.endbattleFlg;
}


// local variable allocation has failed, the output may be wrong!
bool __fastcall BattleData__checkAliveOther(BattleData_o *this, int32_t uniqueId, const MethodInfo *method)
{
  BattleData_o *data; // x0
  const MethodInfo *v6; // x2
  BattleServantData_o *EnemyServantData; // x0
  BattleData_o *v8; // x0
  const MethodInfo *v9; // x1

  data = this->fields.data;
  if ( !data )
    goto LABEL_9;
  if ( uniqueId == -1 || BattleData__getPlayerServantData(data, uniqueId, method) )
  {
    LOBYTE(EnemyServantData) = BattleData__checkAliveEnemys(this, *(const MethodInfo **)&uniqueId);
    return (char)EnemyServantData;
  }
  v8 = this->fields.data;
  if ( !v8 )
LABEL_9:
    sub_B170D4();
  EnemyServantData = BattleData__getEnemyServantData(v8, uniqueId, v6);
  if ( EnemyServantData )
    LOBYTE(EnemyServantData) = BattleData__checkAlivePlayers(this, v9);
  return (char)EnemyServantData;
}


bool __fastcall BattleData__checkAlivePlayers(BattleData_o *this, const MethodInfo *method)
{
  __int64 v3; // x1
  struct System_Collections_Generic_List_BattleServantData__o *player_datalist; // x23
  int size; // w20
  int v6; // w22
  int v7; // w21
  BattleServantData_o *v8; // x0

  if ( (byte_40F6A63 & 1) == 0 )
  {
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleServantData__get_Count__, method);
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleServantData__get_Item__, v3);
    byte_40F6A63 = 1;
  }
  player_datalist = this->fields.player_datalist;
  if ( !player_datalist )
    goto LABEL_11;
  size = player_datalist->fields._size;
  if ( size >= 1 )
  {
    v6 = 0;
    v7 = 0;
    do
    {
      if ( player_datalist->fields._size <= (unsigned int)v6 )
        System_ThrowHelper__ThrowArgumentOutOfRangeException_41329284(0LL);
      v8 = player_datalist->fields._items->m_Items[v6];
      if ( !v8 )
        break;
      ++v6;
      v7 |= BattleServantData__isAlive(v8, 0, 0LL);
      if ( v6 >= size )
        return v7 & 1;
      player_datalist = this->fields.player_datalist;
    }
    while ( player_datalist );
LABEL_11:
    sub_B170D4();
  }
  LOBYTE(v7) = 0;
  return v7 & 1;
}


bool __fastcall BattleData__checkAndGetOverrideBgm(
        BattleData_o *this,
        System_String_o **bgmName,
        const MethodInfo *method)
{
  struct OverwriteBattleBgmData_o *overwriteBgmData_k__BackingField; // x8
  struct OverwriteBattleBgmData_o *v7; // x8
  System_String_o *BgmName_k__BackingField; // x1
  struct OverwriteBattleBgmData_o *v9; // x8

  if ( (byte_40F6A05 & 1) == 0 )
  {
    sub_B16FFC(&StringLiteral_1/*""*/, bgmName);
    byte_40F6A05 = 1;
  }
  *bgmName = (System_String_o *)StringLiteral_1/*""*/;
  sub_B16F98(bgmName, StringLiteral_1/*""*/);
  overwriteBgmData_k__BackingField = this->fields._overwriteBgmData_k__BackingField;
  if ( !overwriteBgmData_k__BackingField
    || System_String__IsNullOrEmpty(overwriteBgmData_k__BackingField->fields._BgmName_k__BackingField, 0LL) )
  {
    return 0;
  }
  v7 = this->fields._overwriteBgmData_k__BackingField;
  if ( !v7
    || (BgmName_k__BackingField = v7->fields._BgmName_k__BackingField,
        *bgmName = BgmName_k__BackingField,
        sub_B16F98(bgmName, BgmName_k__BackingField),
        (v9 = this->fields._overwriteBgmData_k__BackingField) == 0LL) )
  {
    sub_B170D4();
  }
  return v9->fields._WaveCount_k__BackingField == this->fields.wavecount;
}


bool __fastcall BattleData__checkBattleContinuationEnemys(BattleData_o *this, const MethodInfo *method)
{
  const MethodInfo *v2; // x2

  return !this->fields.leaderDown && !this->fields.endbattleFlg && BattleData__IsAliveLogic(this, 1, v2);
}


// local variable allocation has failed, the output may be wrong!
bool __fastcall BattleData__checkDefeatPoint(BattleData_o *this, bool isEnemy, const MethodInfo *method)
{
  __int64 v5; // x1
  __int64 v6; // x8
  __int64 v7; // x19
  int v8; // w8
  unsigned int v9; // w20
  BattleServantData_o *v10; // x0

  if ( (byte_40F6A68 & 1) == 0 )
  {
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleServantData__get_Count__, isEnemy);
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleServantData__get_Item__, v5);
    byte_40F6A68 = 1;
  }
  v6 = 128LL;
  if ( isEnemy )
    v6 = 168LL;
  v7 = *(__int64 *)((char *)&this->klass + v6);
  if ( !v7 )
LABEL_15:
    sub_B170D4();
  v8 = *(_DWORD *)(v7 + 24);
  if ( v8 < 1 )
    return 0;
  v9 = 0;
  while ( 1 )
  {
    if ( v8 <= v9 )
      System_ThrowHelper__ThrowArgumentOutOfRangeException_41329284(0LL);
    v10 = *(BattleServantData_o **)(*(_QWORD *)(v7 + 16) + 8LL * (int)v9 + 32);
    if ( !v10 )
      goto LABEL_15;
    if ( BattleServantData__getDefeatPoint(v10, 0LL) >= 1 )
      return 1;
    v8 = *(_DWORD *)(v7 + 24);
    if ( (int)++v9 >= v8 )
      return 0;
  }
}


// local variable allocation has failed, the output may be wrong!
bool __fastcall BattleData__checkEnablePlaySpeedOneFromFieldIdList(
        BattleData_o *this,
        int32_t id,
        int32_t idx,
        const MethodInfo *method)
{
  __int64 v5; // x1
  __int64 v6; // x1
  __int64 v7; // x1
  System_String_o *v8; // x20
  System_String_o *v9; // x0
  System_String_o *v10; // x0
  System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData__o *playedSpeedOneFieldIdList; // x21
  EventMissionProgressRequest_Argument_ProgressData_o *v12; // x20
  __int64 v13; // x22
  int size; // w8
  System_String_o *v15; // x0
  int32_t v17; // [xsp+8h] [xbp-28h] BYREF
  int32_t v18; // [xsp+Ch] [xbp-24h] BYREF

  v17 = idx;
  v18 = id;
  if ( (byte_40F6A04 & 1) == 0 )
  {
    sub_B16FFC(&Method_System_Collections_Generic_List_string__Add__, *(_QWORD *)&id);
    sub_B16FFC(&Method_System_Collections_Generic_List_string__get_Count__, v5);
    sub_B16FFC(&Method_System_Collections_Generic_List_string__get_Item__, v6);
    sub_B16FFC(&StringLiteral_1223/*":"*/, v7);
    byte_40F6A04 = 1;
  }
  v8 = System_Int32__ToString((int32_t)&v18, 0LL);
  v9 = System_Int32__ToString((int32_t)&v17, 0LL);
  v10 = System_String__Concat_43746016(v8, (System_String_o *)StringLiteral_1223/*":"*/, v9, 0LL);
  playedSpeedOneFieldIdList = (System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData__o *)this->fields.playedSpeedOneFieldIdList;
  if ( !playedSpeedOneFieldIdList )
LABEL_11:
    sub_B170D4();
  v12 = (EventMissionProgressRequest_Argument_ProgressData_o *)v10;
  v13 = 0LL;
  while ( 1 )
  {
    size = playedSpeedOneFieldIdList->fields._size;
    if ( (int)v13 >= size )
    {
      System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData___Add(
        playedSpeedOneFieldIdList,
        v12,
        (const MethodInfo_2F25CD8 *)Method_System_Collections_Generic_List_string__Add__);
      return 1;
    }
    if ( size <= (unsigned int)v13 )
      System_ThrowHelper__ThrowArgumentOutOfRangeException_41329284(0LL);
    v15 = (System_String_o *)playedSpeedOneFieldIdList->fields._items->m_Items[v13];
    if ( !v15 )
      goto LABEL_11;
    if ( System_String__Equals_43731072(v15, (System_String_o *)v12, 0LL) )
      return 0;
    playedSpeedOneFieldIdList = (System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData__o *)this->fields.playedSpeedOneFieldIdList;
    ++v13;
    if ( !playedSpeedOneFieldIdList )
      goto LABEL_11;
  }
}


// local variable allocation has failed, the output may be wrong!
bool __fastcall BattleData__checkEnablePlaySpeedOneFromSkillIdList(
        BattleData_o *this,
        int32_t id,
        const MethodInfo *method)
{
  __int64 v5; // x1
  __int64 v6; // x1
  struct System_Collections_Generic_List_int__o *playedSpeedOneSkillIdList; // x21
  __int64 v8; // x22
  int size; // w8

  if ( (byte_40F6A03 & 1) == 0 )
  {
    sub_B16FFC(&Method_System_Collections_Generic_List_int__Add__, *(_QWORD *)&id);
    sub_B16FFC(&Method_System_Collections_Generic_List_int__get_Count__, v5);
    sub_B16FFC(&Method_System_Collections_Generic_List_int__get_Item__, v6);
    byte_40F6A03 = 1;
  }
  playedSpeedOneSkillIdList = this->fields.playedSpeedOneSkillIdList;
  if ( !playedSpeedOneSkillIdList )
LABEL_10:
    sub_B170D4();
  v8 = 0LL;
  while ( 1 )
  {
    size = playedSpeedOneSkillIdList->fields._size;
    if ( (int)v8 >= size )
    {
      System_Collections_Generic_List_int___Add(
        playedSpeedOneSkillIdList,
        id,
        (const MethodInfo_2F104F0 *)Method_System_Collections_Generic_List_int__Add__);
      return 1;
    }
    if ( size <= (unsigned int)v8 )
      System_ThrowHelper__ThrowArgumentOutOfRangeException_41329284(0LL);
    if ( playedSpeedOneSkillIdList->fields._items->m_Items[v8 + 1] == id )
      return 0;
    playedSpeedOneSkillIdList = this->fields.playedSpeedOneSkillIdList;
    ++v8;
    if ( !playedSpeedOneSkillIdList )
      goto LABEL_10;
  }
}


bool __fastcall BattleData__checkLimitTurn(BattleData_o *this, const MethodInfo *method)
{
  return this->fields.limitTurnCount > 0;
}


bool __fastcall BattleData__checkProgressflg(BattleData_o *this, int32_t instate, const MethodInfo *method)
{
  char v3; // vf

  return !(((this->fields.progresslistflg & instate) < 0) ^ v3 | ((this->fields.progresslistflg & instate) == 0));
}


// local variable allocation has failed, the output may be wrong!
bool __fastcall BattleData__checkServantVoicePlayed(
        BattleData_o *this,
        int32_t svtId,
        int32_t condValue,
        const MethodInfo *method)
{
  __int64 v7; // x1
  __int64 v8; // x1
  __int64 v9; // x1
  __int64 v10; // x1
  __int64 v11; // x1
  Il2CppObject *v12; // x21
  Il2CppObject *v13; // x0
  System_String_o *v14; // x0
  System_String_o *v16; // x0
  System_Type_o *v17; // x21
  struct System_Collections_Generic_Dictionary_string__object__o *voicePlayedInfo; // x0
  UnityEngine_Purchasing_IStoreExtension_o *Item; // x0
  bool result; // w0
  BattleData_o *v21; // x0
  const MethodInfo *v22; // x1
  int32_t v23; // [xsp+4h] [xbp-2Ch] BYREF
  int32_t v24; // [xsp+8h] [xbp-28h] BYREF
  int32_t v25; // [xsp+Ch] [xbp-24h] BYREF

  v25 = svtId;
  if ( (byte_40F6A0A & 1) == 0 )
  {
    sub_B16FFC(&Method_System_Collections_Generic_Dictionary_string__object__ContainsKey__, *(_QWORD *)&svtId);
    sub_B16FFC(&Method_System_Collections_Generic_Dictionary_string__object__get_Item__, v7);
    sub_B16FFC(&Method_System_Collections_Generic_HashSet_string__Contains__, v8);
    sub_B16FFC(&int_TypeInfo, v9);
    sub_B16FFC(&long_TypeInfo, v10);
    sub_B16FFC(&StringLiteral_23493/*"{0},{1}"*/, v11);
    byte_40F6A0A = 1;
  }
  if ( condValue > 63 )
  {
    v24 = svtId;
    v12 = (Il2CppObject *)j_il2cpp_value_box_0(int_TypeInfo, &v24);
    v23 = condValue;
    v13 = (Il2CppObject *)j_il2cpp_value_box_0(int_TypeInfo, &v23);
    v14 = System_String__Format_43739268((System_String_o *)StringLiteral_23493/*"{0},{1}"*/, v12, v13, 0LL);
    if ( this->fields.voicePlayedOver64Info )
      return System_Collections_Generic_HashSet_BattleBuffData_BuffData___Contains(
               (System_Collections_Generic_HashSet_BattleBuffData_BuffData__o *)this->fields.voicePlayedOver64Info,
               (BattleBuffData_BuffData_o *)v14,
               (const MethodInfo_21DEFE0 *)Method_System_Collections_Generic_HashSet_string__Contains__);
LABEL_14:
    sub_B170D4();
  }
  v16 = System_Int32__ToString((int32_t)&v25, 0LL);
  if ( !this->fields.voicePlayedInfo )
    goto LABEL_14;
  v17 = (System_Type_o *)v16;
  if ( !System_Collections_Generic_Dictionary_XmlQualifiedName__XmlSchemaObject___ContainsKey(
          (System_Collections_Generic_Dictionary_XmlQualifiedName__XmlSchemaObject__o *)this->fields.voicePlayedInfo,
          (System_Xml_XmlQualifiedName_o *)v16,
          (const MethodInfo_2DA3E8C *)Method_System_Collections_Generic_Dictionary_string__object__ContainsKey__) )
    return 0;
  voicePlayedInfo = this->fields.voicePlayedInfo;
  if ( !voicePlayedInfo )
    goto LABEL_14;
  Item = System_Collections_Generic_Dictionary_Type__IStoreExtension___get_Item(
           (System_Collections_Generic_Dictionary_Type__IStoreExtension__o *)voicePlayedInfo,
           v17,
           (const MethodInfo_2DA3B54 *)Method_System_Collections_Generic_Dictionary_string__object__get_Item__);
  if ( !Item )
    goto LABEL_14;
  if ( Item->klass->_1.element_class == long_TypeInfo->_1.element_class )
    return (*(_QWORD *)j_il2cpp_object_unbox_0(Item) & (1LL << condValue)) != 0;
  v21 = (BattleData_o *)sub_B173C8(Item);
  BattleData__Initialize(v21, v22);
  return result;
}


bool __fastcall BattleData__checkTurnData(BattleData_o *this, const MethodInfo *method)
{
  __int64 v2; // x1
  __int64 v3; // x1
  __int64 v4; // x1
  __int64 v5; // x1
  __int64 v6; // x1
  __int64 v7; // x1
  __int64 v8; // x1
  __int64 v9; // x1
  __int64 v10; // x1
  WebViewManager_o *Instance; // x0
  System_String_o *String; // x0
  int32_t Int; // w19
  DataMasterBase_TMaster__TEntity__PKType__o *Master_WarQuestSelectionMaster; // x0
  Il2CppObject *SingleEntity; // x0
  System_String_o *v17; // x0

  if ( (byte_40F6A8A & 1) == 0 )
  {
    sub_B16FFC(&Method_DataManager_GetMaster_BattleMaster___, method);
    sub_B16FFC(&DataManager_TypeInfo, v2);
    sub_B16FFC(&Method_DataMasterBase_BattleMaster__BattleEntity__long__GetSingleEntity__, v3);
    sub_B16FFC(&EncryptedPlayerPrefs_TypeInfo, v4);
    sub_B16FFC(&Method_SingletonMonoBehaviour_BattleSequenceManager__get_Instance__, v5);
    sub_B16FFC(&StringLiteral_10848/*"QUESTID"*/, v6);
    sub_B16FFC(&StringLiteral_11516/*"SAVEKEY_"*/, v7);
    sub_B16FFC(&StringLiteral_7590/*"Initial"*/, v8);
    sub_B16FFC(&StringLiteral_957/*"0.6.17.1"*/, v9);
    sub_B16FFC(&StringLiteral_15123/*"Version"*/, v10);
    byte_40F6A8A = 1;
  }
  Instance = SingletonMonoBehaviour_WebViewManager___get_Instance((const MethodInfo_2A54F38 *)Method_SingletonMonoBehaviour_BattleSequenceManager__get_Instance__);
  if ( !Instance )
    goto LABEL_38;
  if ( !BYTE4(Instance->fields.webViewBase) )
  {
    if ( (BYTE3(EncryptedPlayerPrefs_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0
      && !EncryptedPlayerPrefs_TypeInfo->_2.cctor_finished )
    {
      j_il2cpp_runtime_class_init_0(EncryptedPlayerPrefs_TypeInfo);
    }
    if ( !EncryptedPlayerPrefs__HasKey((System_String_o *)StringLiteral_11516/*"SAVEKEY_"*/, 0LL) )
      goto LABEL_33;
    if ( (BYTE3(EncryptedPlayerPrefs_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0
      && !EncryptedPlayerPrefs_TypeInfo->_2.cctor_finished )
    {
      j_il2cpp_runtime_class_init_0(EncryptedPlayerPrefs_TypeInfo);
    }
    String = EncryptedPlayerPrefs__GetString((System_String_o *)StringLiteral_15123/*"Version"*/, 0LL);
    if ( !StringLiteral_957/*"0.6.17.1"*/ )
      goto LABEL_38;
    if ( System_String__Equals_43731072((System_String_o *)StringLiteral_957/*"0.6.17.1"*/, String, 0LL) )
    {
      if ( (WORD1(EncryptedPlayerPrefs_TypeInfo->vtable._0_Equals.methodPtr) & 0x400) != 0
        && !EncryptedPlayerPrefs_TypeInfo->_2.cctor_finished )
      {
        j_il2cpp_runtime_class_init_0(EncryptedPlayerPrefs_TypeInfo);
      }
      if ( EncryptedPlayerPrefs__HasKey((System_String_o *)StringLiteral_10848/*"QUESTID"*/, 0LL) )
      {
        if ( (BYTE3(EncryptedPlayerPrefs_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0
          && !EncryptedPlayerPrefs_TypeInfo->_2.cctor_finished )
        {
          j_il2cpp_runtime_class_init_0(EncryptedPlayerPrefs_TypeInfo);
        }
        Int = EncryptedPlayerPrefs__GetInt((System_String_o *)StringLiteral_10848/*"QUESTID"*/, 0LL);
        if ( (BYTE3(DataManager_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0
          && !DataManager_TypeInfo->_2.cctor_finished )
        {
          j_il2cpp_runtime_class_init_0(DataManager_TypeInfo);
        }
        Master_WarQuestSelectionMaster = (DataMasterBase_TMaster__TEntity__PKType__o *)DataManager__GetMaster_WarQuestSelectionMaster_((const MethodInfo_18C3224 *)Method_DataManager_GetMaster_BattleMaster___);
        if ( Master_WarQuestSelectionMaster )
        {
          SingleEntity = DataMasterBase_object__object__long___GetSingleEntity(
                           Master_WarQuestSelectionMaster,
                           (const MethodInfo_266F674 *)Method_DataMasterBase_BattleMaster__BattleEntity__long__GetSingleEntity__);
          if ( SingleEntity )
          {
            if ( HIDWORD(SingleEntity[2].klass) == Int )
              return 1;
            goto LABEL_33;
          }
        }
LABEL_38:
        sub_B170D4();
      }
LABEL_33:
      if ( (BYTE3(EncryptedPlayerPrefs_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0
        && !EncryptedPlayerPrefs_TypeInfo->_2.cctor_finished )
      {
        j_il2cpp_runtime_class_init_0(EncryptedPlayerPrefs_TypeInfo);
      }
      EncryptedPlayerPrefs__DeleteKey((System_String_o *)StringLiteral_11516/*"SAVEKEY_"*/, 0LL);
      UnityEngine_PlayerPrefs__Save(0LL);
      return 0;
    }
    if ( (WORD1(EncryptedPlayerPrefs_TypeInfo->vtable._0_Equals.methodPtr) & 0x400) != 0
      && !EncryptedPlayerPrefs_TypeInfo->_2.cctor_finished )
    {
      j_il2cpp_runtime_class_init_0(EncryptedPlayerPrefs_TypeInfo);
    }
    v17 = EncryptedPlayerPrefs__GetString((System_String_o *)StringLiteral_15123/*"Version"*/, 0LL);
    if ( !StringLiteral_7590/*"Initial"*/ )
      goto LABEL_38;
    if ( !System_String__Equals_43731072((System_String_o *)StringLiteral_7590/*"Initial"*/, v17, 0LL) )
      goto LABEL_33;
  }
  return 0;
}


void __fastcall BattleData__checkTutorialData(BattleData_o *this, const MethodInfo *method)
{
  __int64 v3; // x1
  __int64 v4; // x1
  __int64 v5; // x1
  __int64 v6; // x1
  struct BattleEntity_o *battle_ent; // x20
  int32_t questId; // w21
  int32_t v9; // w8
  int32_t v10; // w21
  int32_t v11; // w21
  int32_t v12; // w21
  int32_t questPhase; // w20

  if ( (byte_40F6A8D & 1) == 0 )
  {
    sub_B16FFC(&StringLiteral_13476/*"TUTORIAL_QUEST_ID4_PHASE"*/, method);
    sub_B16FFC(&StringLiteral_13472/*"TUTORIAL_QUEST_ID1"*/, v3);
    sub_B16FFC(&StringLiteral_13473/*"TUTORIAL_QUEST_ID2"*/, v4);
    sub_B16FFC(&StringLiteral_13474/*"TUTORIAL_QUEST_ID3"*/, v5);
    sub_B16FFC(&StringLiteral_13475/*"TUTORIAL_QUEST_ID4"*/, v6);
    byte_40F6A8D = 1;
  }
  battle_ent = this->fields.battle_ent;
  this->fields.tutorialId = -1;
  if ( !battle_ent )
    sub_B170D4();
  questId = battle_ent->fields.questId;
  if ( questId == ConstantMaster__getValue((System_String_o *)StringLiteral_13472/*"TUTORIAL_QUEST_ID1"*/, 0LL) )
  {
    v9 = 1;
LABEL_10:
    this->fields.tutorialId = v9;
    return;
  }
  v10 = battle_ent->fields.questId;
  if ( v10 == ConstantMaster__getValue((System_String_o *)StringLiteral_13473/*"TUTORIAL_QUEST_ID2"*/, 0LL) )
  {
    v9 = 2;
    goto LABEL_10;
  }
  v11 = battle_ent->fields.questId;
  if ( v11 == ConstantMaster__getValue((System_String_o *)StringLiteral_13474/*"TUTORIAL_QUEST_ID3"*/, 0LL) )
  {
    v9 = 3;
    goto LABEL_10;
  }
  v12 = battle_ent->fields.questId;
  if ( v12 == ConstantMaster__getValue((System_String_o *)StringLiteral_13475/*"TUTORIAL_QUEST_ID4"*/, 0LL) )
  {
    questPhase = battle_ent->fields.questPhase;
    if ( questPhase == ConstantMaster__getValue((System_String_o *)StringLiteral_13476/*"TUTORIAL_QUEST_ID4_PHASE"*/, 0LL) )
    {
      v9 = 4;
      goto LABEL_10;
    }
  }
}


void __fastcall BattleData__clearLastActionActor(BattleData_o *this, const MethodInfo *method)
{
  this->fields.lastactorId = 0;
}


void __fastcall BattleData__commonQuestLoad(BattleData_o *this, const MethodInfo *method)
{
  __int64 v3; // x1
  __int64 v4; // x1
  __int64 v5; // x1
  __int64 v6; // x1
  __int64 v7; // x1
  __int64 v8; // x1
  DataMasterBase_TMaster__TEntity__PKType__o *Master_WarQuestSelectionMaster; // x0
  Il2CppObject *SingleEntity; // x0
  struct BattleEntity_o **p_battle_ent; // x20
  BattleEntity_o *battle_ent; // x0
  __int64 v13; // x1
  __int64 v14; // x2
  __int64 v15; // x3
  __int64 v16; // x4
  BattleActionLogManager_o *v17; // x21
  struct BattleInfoData_o *battleInfo; // x1
  struct BattleEntity_o *v19; // x8
  struct CommandCodeInfo_array *userCommandCode; // x1
  BattleEntity_o *v21; // x0
  QuestEntity_o *quest_ent; // x0
  struct QuestEntity_o *PhaseDetailedEntity; // x0
  int32_t questSelect; // w21
  const MethodInfo *v25; // x1
  BattleInfoData_o *battle_info; // x0
  int32_t LastWave; // w0
  __int64 v28; // x2
  struct System_Int32_array *v29; // x0
  BattleInfoData_o *v30; // x0
  int32_t v31; // w0
  __int64 v32; // x2
  struct System_Int32_array *v33; // x0
  QuestEntity_o *v34; // x0
  bool HasFlag; // w0
  const MethodInfo *v36; // x2
  const MethodInfo *v37; // x1
  struct BaseBattleEvent_o *BattleEvent; // x0
  struct BaseBattleEvent_o *v39; // x0
  struct BattleInfoData_o *v40; // x20
  __int64 v41; // x0
  const MethodInfo *v42; // x1
  BattleFieldEnvironmentData_o *FieldEnvData_k__BackingField; // x0
  struct BattleData_o *data; // x8
  struct BattleData_o *v45; // x8
  struct BattleData_o *v46; // x8

  if ( (byte_40F6A8F & 1) == 0 )
  {
    sub_B16FFC(&BattleActionLogManagerNOP_TypeInfo, method);
    sub_B16FFC(&BattleActionLogManager_TypeInfo, v3);
    sub_B16FFC(&Method_DataManager_GetMaster_BattleMaster___, v4);
    sub_B16FFC(&DataManager_TypeInfo, v5);
    sub_B16FFC(&Method_DataMasterBase_BattleMaster__BattleEntity__long__GetSingleEntity__, v6);
    sub_B16FFC(&int___TypeInfo, v7);
    sub_B16FFC(&ScriptManager_TypeInfo, v8);
    byte_40F6A8F = 1;
  }
  if ( (BYTE3(DataManager_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0 && !DataManager_TypeInfo->_2.cctor_finished )
    j_il2cpp_runtime_class_init_0(DataManager_TypeInfo);
  Master_WarQuestSelectionMaster = (DataMasterBase_TMaster__TEntity__PKType__o *)DataManager__GetMaster_WarQuestSelectionMaster_((const MethodInfo_18C3224 *)Method_DataManager_GetMaster_BattleMaster___);
  if ( !Master_WarQuestSelectionMaster )
    goto LABEL_32;
  SingleEntity = DataMasterBase_object__object__long___GetSingleEntity(
                   Master_WarQuestSelectionMaster,
                   (const MethodInfo_266F674 *)Method_DataMasterBase_BattleMaster__BattleEntity__long__GetSingleEntity__);
  this->fields.battle_ent = (struct BattleEntity_o *)SingleEntity;
  p_battle_ent = &this->fields.battle_ent;
  sub_B16F98(&this->fields.battle_ent, SingleEntity);
  battle_ent = this->fields.battle_ent;
  if ( !battle_ent )
    goto LABEL_32;
  if ( BattleEntity__isVerifyActionLog(battle_ent, 0LL) )
  {
    v17 = (BattleActionLogManager_o *)sub_B170CC(BattleActionLogManager_TypeInfo, v13, v14, v15, v16);
    BattleActionLogManager___ctor(v17, 0LL);
  }
  else
  {
    v17 = (BattleActionLogManager_o *)sub_B170CC(BattleActionLogManagerNOP_TypeInfo, v13, v14, v15, v16);
    BattleActionLogManagerNOP___ctor((BattleActionLogManagerNOP_o *)v17, 0LL);
  }
  this->fields.actionLogManager = (struct BattleActionLogManagerInterface_o *)v17;
  sub_B16F98(&this->fields.actionLogManager, v17);
  if ( !*p_battle_ent )
    goto LABEL_32;
  battleInfo = (*p_battle_ent)->fields.battleInfo;
  this->fields.battle_info = battleInfo;
  sub_B16F98(&this->fields.battle_info, battleInfo);
  v19 = this->fields.battle_ent;
  if ( !v19 )
    goto LABEL_32;
  userCommandCode = v19->fields.userCommandCode;
  this->fields.commandCodeInfos = userCommandCode;
  sub_B16F98(&this->fields.commandCodeInfos, userCommandCode);
  v21 = this->fields.battle_ent;
  if ( !v21 )
    goto LABEL_32;
  BattleEntity__GetQuestInvolvedEntitys(v21, &this->fields.quest_ent, &this->fields.questphase_ent, 0LL);
  quest_ent = this->fields.quest_ent;
  if ( !quest_ent )
    goto LABEL_32;
  PhaseDetailedEntity = QuestEntity__GetPhaseDetailedEntity(quest_ent, 0LL);
  this->fields.quest_ent = PhaseDetailedEntity;
  sub_B16F98(&this->fields.quest_ent, PhaseDetailedEntity);
  if ( !*p_battle_ent )
    goto LABEL_32;
  questSelect = (*p_battle_ent)->fields.questSelect;
  if ( (BYTE3(ScriptManager_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0
    && !ScriptManager_TypeInfo->_2.cctor_finished )
  {
    j_il2cpp_runtime_class_init_0(ScriptManager_TypeInfo);
  }
  ScriptManager__SetSelectBranchIndex(questSelect, 0LL);
  if ( !*p_battle_ent )
    goto LABEL_32;
  BattleRandom__setSeed((*p_battle_ent)->fields.seed, 0LL);
  BattleData__checkTutorialData(this, v25);
  battle_info = this->fields.battle_info;
  this->fields.wavecount = 0;
  *(_QWORD *)&this->fields.turnCount = 0LL;
  this->fields.criticalstars = 0;
  if ( !battle_info )
    goto LABEL_32;
  LastWave = BattleInfoData__getLastWave(battle_info, 0LL);
  v29 = (struct System_Int32_array *)sub_B17014(int___TypeInfo, (unsigned int)(LastWave + 1), v28);
  this->fields.waveClearNeedTurn = v29;
  sub_B16F98(&this->fields.waveClearNeedTurn, v29);
  v30 = this->fields.battle_info;
  *(_WORD *)&this->fields.leaderDown = 0;
  this->fields.loseBattleFlg = 0;
  if ( !v30 )
    goto LABEL_32;
  v31 = BattleInfoData__getLastWave(v30, 0LL);
  v33 = (struct System_Int32_array *)sub_B17014(int___TypeInfo, (unsigned int)(v31 + 1), v32);
  this->fields.waveKnockdownNums = v33;
  sub_B16F98(&this->fields.waveKnockdownNums, v33);
  v34 = this->fields.quest_ent;
  this->fields.winBattleNotRelatedSurvivalStatus = 0;
  if ( !v34 )
    goto LABEL_32;
  HasFlag = QuestEntity__HasFlag(v34, 0x1000000000000LL, 0LL);
  BattleData__InitGender(this, HasFlag, v36);
  this->fields.isRetryable = 0;
  if ( BattleData__IsRetryableQuestPhase(this, v37) )
    this->fields.isRetryable = 1;
  BattleEvent = BaseBattleEvent__MakeBattleEvent(this, 0LL);
  this->fields.battleEvent = BattleEvent;
  sub_B16F98(&this->fields.battleEvent, BattleEvent);
  v39 = this->fields.battleEvent;
  if ( !v39 )
    goto LABEL_32;
  v40 = this->fields.battle_info;
  v41 = ((__int64 (__fastcall *)(struct BaseBattleEvent_o *, Il2CppMethodPointer))v39->klass->vtable._6_GetServantEvent.method)(
          v39,
          v39->klass->vtable._7_InitWave.methodPtr);
  if ( !v40 )
    goto LABEL_32;
  v40->fields.servantEvent = (struct BaseBattleServantEvent_o *)v41;
  sub_B16F98(&v40->fields.servantEvent, v41);
  BattleData__SetOriginalCallEnemyUniqueId(this, v42);
  FieldEnvData_k__BackingField = this->fields._FieldEnvData_k__BackingField;
  if ( !FieldEnvData_k__BackingField
    || (BattleFieldEnvironmentData__InitBG(FieldEnvData_k__BackingField, 0LL),
        data = this->fields.data,
        this->fields.playerNpCount = 0,
        !data)
    || (data->fields.playerSkillCount = 0, (v45 = this->fields.data) == 0LL)
    || (v45->fields.playerMasterSkillCount = 0, (v46 = this->fields.data) == 0LL) )
  {
LABEL_32:
    sub_B170D4();
  }
  v46->fields.enemyMasterChangedFaceId = 0;
}


System_Collections_Generic_Dictionary_int__int__o *__fastcall BattleData__convertUsedEventMasterSkillDictFormatGamePlaying(
        BattleData_o *this,
        System_Collections_Generic_Dictionary_string__object__o *dict,
        const MethodInfo *method)
{
  __int64 v3; // x3
  __int64 v4; // x4
  __int64 v6; // x1
  __int64 v7; // x1
  __int64 v8; // x1
  __int64 v9; // x1
  __int64 v10; // x1
  __int64 v11; // x1
  __int64 v12; // x1
  __int64 v13; // x1
  __int64 v14; // x1
  System_Collections_Generic_Dictionary_int__int__o *v15; // x19
  struct System_Collections_Generic_KeyValuePair_TKey__TValue__o current; // kr00_16
  int32_t v17; // w20
  int32_t v18; // w0
  int32_t result; // [xsp+4h] [xbp-5Ch] BYREF
  System_Collections_Generic_Dictionary_Enumerator_TKey__TValue__o v21; // [xsp+8h] [xbp-58h] BYREF

  if ( (byte_40F69FF & 1) == 0 )
  {
    sub_B16FFC(&System_Convert_TypeInfo, dict);
    sub_B16FFC(&Method_System_Collections_Generic_Dictionary_int__int__Add__, v6);
    sub_B16FFC(&Method_System_Collections_Generic_Dictionary_string__object__GetEnumerator__, v7);
    sub_B16FFC(&Method_System_Collections_Generic_Dictionary_int__int___ctor__, v8);
    sub_B16FFC(&System_Collections_Generic_Dictionary_int__int__TypeInfo, v9);
    sub_B16FFC(&Method_System_Collections_Generic_Dictionary_Enumerator_string__object__Dispose__, v10);
    sub_B16FFC(&Method_System_Collections_Generic_Dictionary_Enumerator_string__object__MoveNext__, v11);
    sub_B16FFC(&Method_System_Collections_Generic_Dictionary_Enumerator_string__object__get_Current__, v12);
    sub_B16FFC(&Method_System_Collections_Generic_KeyValuePair_string__object__get_Key__, v13);
    sub_B16FFC(&Method_System_Collections_Generic_KeyValuePair_string__object__get_Value__, v14);
    byte_40F69FF = 1;
  }
  memset(&v21, 0, sizeof(v21));
  result = 0;
  v15 = (System_Collections_Generic_Dictionary_int__int__o *)sub_B170CC(
                                                               System_Collections_Generic_Dictionary_int__int__TypeInfo,
                                                               dict,
                                                               method,
                                                               v3,
                                                               v4);
  System_Collections_Generic_Dictionary_int__int____ctor(
    v15,
    (const MethodInfo_2DDC410 *)Method_System_Collections_Generic_Dictionary_int__int___ctor__);
  if ( !dict )
    sub_B170D4();
  System_Collections_Generic_Dictionary_XmlQualifiedName__SchemaElementDecl___GetEnumerator(
    &v21,
    (System_Collections_Generic_Dictionary_XmlQualifiedName__SchemaElementDecl__o *)dict,
    (const MethodInfo_2DA41F4 *)Method_System_Collections_Generic_Dictionary_string__object__GetEnumerator__);
  while ( System_Collections_Generic_Dictionary_Enumerator_XmlQualifiedName__SchemaElementDecl___MoveNext(
            (System_Collections_Generic_Dictionary_Enumerator_XmlQualifiedName__SchemaElementDecl__o *)&v21,
            (const MethodInfo_26BCF58 *)Method_System_Collections_Generic_Dictionary_Enumerator_string__object__MoveNext__) )
  {
    current = v21.fields.current;
    result = 0;
    System_Int32__TryParse((System_String_o *)v21.fields.current.fields.key, &result, 0LL);
    v17 = result;
    if ( (BYTE3(System_Convert_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0
      && !System_Convert_TypeInfo->_2.cctor_finished )
    {
      j_il2cpp_runtime_class_init_0(System_Convert_TypeInfo);
    }
    v18 = System_Convert__ToInt32(current.fields.value, 0LL);
    if ( !v15 )
      sub_B170D4();
    System_Collections_Generic_Dictionary_int__int___Add(
      v15,
      v17,
      v18,
      (const MethodInfo_2DDCFB4 *)Method_System_Collections_Generic_Dictionary_int__int__Add__);
  }
  System_Collections_Generic_Dictionary_Enumerator_XmlQualifiedName__SchemaElementDecl___Dispose(
    (System_Collections_Generic_Dictionary_Enumerator_XmlQualifiedName__SchemaElementDecl__o *)&v21,
    (const MethodInfo_26BD0C0 *)Method_System_Collections_Generic_Dictionary_Enumerator_string__object__Dispose__);
  return v15;
}


System_Collections_Generic_Dictionary_string__object__o *__fastcall BattleData__convertUsedEventMasterSkillDictFormatSave(
        BattleData_o *this,
        const MethodInfo *method)
{
  __int64 v2; // x2
  __int64 v3; // x3
  __int64 v4; // x4
  __int64 v6; // x1
  __int64 v7; // x1
  __int64 v8; // x1
  __int64 v9; // x1
  __int64 v10; // x1
  __int64 v11; // x1
  __int64 v12; // x1
  __int64 v13; // x1
  __int64 v14; // x1
  System_Collections_Generic_Dictionary_XmlQualifiedName__XmlSchemaObject__o *v15; // x19
  System_Collections_Generic_Dictionary_int__int__o *usedEventMasterSkillDict; // x0
  int key_high; // x24^4
  System_String_o *v18; // x20
  System_Xml_Schema_XmlSchemaObject_o *v19; // x0
  System_Collections_Generic_Dictionary_Enumerator_TKey__TValue__o v21; // [xsp+8h] [xbp-78h] BYREF
  System_Collections_Generic_Dictionary_Enumerator_TKey__TValue__o v22; // [xsp+30h] [xbp-50h] BYREF

  if ( (byte_40F69FE & 1) == 0 )
  {
    sub_B16FFC(&Method_System_Collections_Generic_Dictionary_string__object__Add__, method);
    sub_B16FFC(&Method_System_Collections_Generic_Dictionary_int__int__GetEnumerator__, v6);
    sub_B16FFC(&Method_System_Collections_Generic_Dictionary_string__object___ctor__, v7);
    sub_B16FFC(&System_Collections_Generic_Dictionary_string__object__TypeInfo, v8);
    sub_B16FFC(&Method_System_Collections_Generic_Dictionary_Enumerator_int__int__Dispose__, v9);
    sub_B16FFC(&Method_System_Collections_Generic_Dictionary_Enumerator_int__int__MoveNext__, v10);
    sub_B16FFC(&Method_System_Collections_Generic_Dictionary_Enumerator_int__int__get_Current__, v11);
    sub_B16FFC(&int_TypeInfo, v12);
    sub_B16FFC(&Method_System_Collections_Generic_KeyValuePair_int__int__get_Key__, v13);
    sub_B16FFC(&Method_System_Collections_Generic_KeyValuePair_int__int__get_Value__, v14);
    byte_40F69FE = 1;
  }
  memset(&v22, 0, 32);
  *(&v21.fields.getEnumeratorRetType + 1) = 0;
  v15 = (System_Collections_Generic_Dictionary_XmlQualifiedName__XmlSchemaObject__o *)sub_B170CC(
                                                                                        System_Collections_Generic_Dictionary_string__object__TypeInfo,
                                                                                        method,
                                                                                        v2,
                                                                                        v3,
                                                                                        v4);
  System_Collections_Generic_Dictionary_XmlQualifiedName__XmlSchemaObject____ctor(
    v15,
    (const MethodInfo_2DA3068 *)Method_System_Collections_Generic_Dictionary_string__object___ctor__);
  usedEventMasterSkillDict = this->fields.usedEventMasterSkillDict;
  if ( usedEventMasterSkillDict )
  {
    System_Collections_Generic_Dictionary_int__int___GetEnumerator(
      &v21,
      usedEventMasterSkillDict,
      (const MethodInfo_2DDD528 *)Method_System_Collections_Generic_Dictionary_int__int__GetEnumerator__);
    *(_OWORD *)&v22.fields.dictionary = *(_OWORD *)&v21.fields.dictionary;
    v22.fields.current = v21.fields.current;
    while ( System_Collections_Generic_Dictionary_Enumerator_int__int___MoveNext(
              &v22,
              (const MethodInfo_272605C *)Method_System_Collections_Generic_Dictionary_Enumerator_int__int__MoveNext__) )
    {
      key_high = HIDWORD(v22.fields.current.fields.key);
      *(&v21.fields.getEnumeratorRetType + 1) = (int32_t)v22.fields.current.fields.key;
      v18 = System_Int32__ToString((int32_t)(&v21.fields.getEnumeratorRetType + 1), 0LL);
      LODWORD(v21.fields.dictionary) = key_high;
      v19 = (System_Xml_Schema_XmlSchemaObject_o *)j_il2cpp_value_box_0(int_TypeInfo, &v21);
      if ( !v15 )
        sub_B170D4();
      System_Collections_Generic_Dictionary_XmlQualifiedName__XmlSchemaObject___Add(
        v15,
        (System_Xml_XmlQualifiedName_o *)v18,
        v19,
        (const MethodInfo_2DA3C18 *)Method_System_Collections_Generic_Dictionary_string__object__Add__);
    }
    System_Collections_Generic_Dictionary_Enumerator_int__int___Dispose(
      &v22,
      (const MethodInfo_27261A4 *)Method_System_Collections_Generic_Dictionary_Enumerator_int__int__Dispose__);
  }
  return (System_Collections_Generic_Dictionary_string__object__o *)v15;
}


void __fastcall BattleData__createCommandCard(BattleData_o *this, const MethodInfo *method)
{
  __int64 v2; // x2
  __int64 v3; // x3
  __int64 v4; // x4
  __int64 v6; // x1
  __int64 v7; // x1
  __int64 v8; // x1
  __int64 v9; // x1
  __int64 v10; // x1
  System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData__o *v11; // x20
  _DWORD *CommandList; // x0
  __int64 v13; // x1
  const MethodInfo *v14; // x2
  __int64 v15; // x3
  __int64 v16; // x4
  struct System_Int32_array *p_entryid; // x8
  unsigned __int64 v18; // x19
  unsigned __int64 max_length; // x9
  BattleServantData_o *PlayerServantData; // x0
  BattleServantData_o *v21; // x21
  _DWORD *v22; // x22
  unsigned __int64 v23; // x23
  BattleCommandData_o *v24; // x24
  const MethodInfo *v25; // x1
  __int64 v26; // x25
  __int64 v27; // x26
  struct BattleBuffData_o *buffData; // x1
  const MethodInfo *v29; // x3
  struct System_Int64_array *userCommandCodeIds; // x8
  __int64 v31; // x9
  struct System_Int64_array *v32; // x8
  struct System_Int32_array *commandAssistIds; // x8
  struct BattleInfoData_o *battle_info; // x8
  int v35; // w22
  __int64 v36; // x21
  const MethodInfo *v37; // x1
  struct BattleCommandData_array *v38; // x0
  struct BattleCommandData_array **p_p_cmlist; // x23
  __int64 v40; // x8
  BattleData_o *v41; // [xsp+8h] [xbp-58h]
  CodeStage_AntiCheat_ObscuredTypes_ObscuredInt_o v42; // 0:x0.16

  if ( (byte_40F6A0E & 1) == 0 )
  {
    sub_B16FFC(&BattleCommandData_TypeInfo, method);
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleCommandData__Add__, v6);
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleCommandData__ToArray__, v7);
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleCommandData___ctor__, v8);
    sub_B16FFC(&System_Collections_Generic_List_BattleCommandData__TypeInfo, v9);
    sub_B16FFC(&CodeStage_AntiCheat_ObscuredTypes_ObscuredInt_TypeInfo, v10);
    byte_40F6A0E = 1;
  }
  v11 = (System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData__o *)sub_B170CC(
                                                                                                  System_Collections_Generic_List_BattleCommandData__TypeInfo,
                                                                                                  method,
                                                                                                  v2,
                                                                                                  v3,
                                                                                                  v4);
  System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData____ctor(
    v11,
    (const MethodInfo_2F25014 *)Method_System_Collections_Generic_List_BattleCommandData___ctor__);
  p_entryid = this->fields.p_entryid;
  if ( !p_entryid )
    goto LABEL_41;
  v18 = 0LL;
  v41 = this;
  while ( 1 )
  {
    max_length = p_entryid->max_length;
    if ( (__int64)v18 >= (int)max_length )
      break;
    if ( v18 >= max_length )
      goto LABEL_42;
    v13 = (unsigned int)p_entryid->m_Items[v18 + 1];
    if ( (int)v13 >= 1 )
    {
      PlayerServantData = BattleData__getPlayerServantData(this, v13, v14);
      if ( !PlayerServantData )
        goto LABEL_41;
      v21 = PlayerServantData;
      CommandList = BattleServantData__getCommandList(PlayerServantData, 0LL);
      if ( !CommandList )
        goto LABEL_41;
      v22 = CommandList;
      if ( (int)CommandList[6] >= 1 )
      {
        v23 = 0LL;
        while ( 1 )
        {
          v24 = (BattleCommandData_o *)sub_B170CC(BattleCommandData_TypeInfo, v13, v14, v15, v16);
          BattleCommandData___ctor(v24, v25);
          if ( v23 >= (unsigned int)v22[6] )
            break;
          if ( !v24 )
            goto LABEL_41;
          v24->fields._type = v22[v23 + 8];
          v27 = *(_QWORD *)&v21->fields.svtId.fields.currentCryptoKey;
          v26 = *(_QWORD *)&v21->fields.svtId.fields.fakeValue;
          if ( (BYTE3(CodeStage_AntiCheat_ObscuredTypes_ObscuredInt_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0
            && !CodeStage_AntiCheat_ObscuredTypes_ObscuredInt_TypeInfo->_2.cctor_finished )
          {
            j_il2cpp_runtime_class_init_0(CodeStage_AntiCheat_ObscuredTypes_ObscuredInt_TypeInfo);
          }
          *(_QWORD *)&v42.fields.currentCryptoKey = v27;
          *(_QWORD *)&v42.fields.fakeValue = v26;
          v24->fields.svtId = CodeStage_AntiCheat_ObscuredTypes_ObscuredInt__op_Implicit_44068536(v42, 0LL);
          v24->fields.imageSvtId = BattleServantData__GetCommandImageSvtId(v21, 0LL);
          v24->fields.svtlimit = BattleServantData__getCommandDispLimitCount(v21, 0LL);
          v24->fields._loadsvtLimit = BattleServantData__getCommandDispLimitCount(v21, 0LL);
          v24->fields.uniqueId = v21->fields.uniqueId;
          v24->fields.attri = BattleServantData__getAttri(v21, 0LL);
          v24->fields.flgEventJoin = v21->fields.flgEventJoin;
          v24->fields.follower = v21->fields.followerType;
          buffData = v21->fields.buffData;
          v24->fields.battleBuffData = buffData;
          CommandList = (_DWORD *)sub_B16F98(&v24->fields.battleBuffData, buffData);
          v24->fields.servantCardIdsIndex = v23;
          userCommandCodeIds = v21->fields.userCommandCodeIds;
          if ( userCommandCodeIds )
          {
            v31 = *(_QWORD *)&userCommandCodeIds->max_length;
            if ( v31 )
            {
              if ( v23 >= (unsigned int)v31 )
                break;
              v24->fields.userCommandCodeId = userCommandCodeIds->m_Items[v23];
              v32 = v21->fields.userCommandCodeIds;
              if ( !v32 )
                goto LABEL_41;
              if ( v23 >= v32->max_length )
                break;
              CommandList = BattleServantData__GetCommandCodeInfo(v21, v32->m_Items[v23], 0LL);
              if ( CommandList )
                v24->fields.commandCodeId = CommandList[7];
            }
          }
          commandAssistIds = v21->fields.commandAssistIds;
          if ( !commandAssistIds )
            goto LABEL_41;
          if ( v23 >= commandAssistIds->max_length )
            break;
          v24->fields.commandAssistId = commandAssistIds->m_Items[v23 + 1];
          BattleCommandData__SetCommandCardParam(v24, v21->fields.commandCardParam, v23, v29);
          if ( !v11 )
            goto LABEL_41;
          System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData___Add(
            v11,
            (EventMissionProgressRequest_Argument_ProgressData_o *)v24,
            (const MethodInfo_2F25CD8 *)Method_System_Collections_Generic_List_BattleCommandData__Add__);
          if ( (__int64)++v23 >= (int)v22[6] )
            goto LABEL_28;
        }
LABEL_42:
        sub_B17100(CommandList, v13, v14);
        sub_B170A0();
      }
LABEL_28:
      this = v41;
      p_entryid = v41->fields.p_entryid;
    }
    ++v18;
    if ( !p_entryid )
      goto LABEL_41;
  }
  battle_info = this->fields.battle_info;
  if ( !battle_info )
    goto LABEL_41;
  v35 = -1;
  while ( ++v35 < battle_info->fields.blankCardCnt )
  {
    v36 = sub_B170CC(BattleCommandData_TypeInfo, v13, v14, v15, v16);
    BattleCommandData___ctor((BattleCommandData_o *)v36, v37);
    if ( v36 )
    {
      *(_QWORD *)(v36 + 16) = -4294967291LL;
      *(_DWORD *)(v36 + 40) = -1;
      if ( v11 )
      {
        System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData___Add(
          v11,
          (EventMissionProgressRequest_Argument_ProgressData_o *)v36,
          (const MethodInfo_2F25CD8 *)Method_System_Collections_Generic_List_BattleCommandData__Add__);
        battle_info = this->fields.battle_info;
        if ( battle_info )
          continue;
      }
    }
    goto LABEL_41;
  }
  if ( !v11
    || (v38 = (struct BattleCommandData_array *)System_Collections_Generic_List_WarBoardUiData_SaveData___ToArray(
                                                  (System_Collections_Generic_List_WarBoardUiData_SaveData__o *)v11,
                                                  (const MethodInfo_2F27E24 *)Method_System_Collections_Generic_List_BattleCommandData__ToArray__),
        this->fields.p_cmlist = v38,
        p_p_cmlist = &this->fields.p_cmlist,
        sub_B16F98(p_p_cmlist, v38),
        (v40 = (__int64)*(p_p_cmlist - 14)) == 0) )
  {
LABEL_41:
    sub_B170D4();
  }
  *(_BYTE *)(v40 + 768) = 1;
}


// local variable allocation has failed, the output may be wrong!
BattleServantData_o *__fastcall BattleData__createSummonEnemyServantData(
        BattleData_o *this,
        int32_t uniqueId,
        int32_t index,
        int32_t npcId,
        BattleServantData_SaveData_o *saveData,
        BattleData_o *battleData,
        const MethodInfo *method)
{
  __int64 v13; // x1
  __int64 v14; // x1
  __int64 v15; // x1
  BattleInfoData_o *battle_info; // x0
  BattleDeckServantData_o *SummonServantData; // x0
  System_Collections_Generic_HashSet_int__o *calledEnemyUniqueIdHash; // x26
  BattleDeckServantData_o *v19; // x24
  int32_t Item; // w0
  __int64 v21; // x1
  __int64 v22; // x2
  __int64 v23; // x3
  __int64 v24; // x4
  BattleServantData_o *v25; // x22
  struct System_Collections_Generic_List_BattleServantData__o *enemy_datalist; // x0

  if ( (byte_40F6AAD & 1) == 0 )
  {
    sub_B16FFC(&BattleServantData_TypeInfo, *(_QWORD *)&uniqueId);
    sub_B16FFC(&Method_System_Collections_Generic_Dictionary_int__int__get_Item__, v13);
    sub_B16FFC(&Method_System_Collections_Generic_HashSet_int__Add__, v14);
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleServantData__Add__, v15);
    byte_40F6AAD = 1;
  }
  battle_info = this->fields.battle_info;
  if ( !battle_info )
    goto LABEL_10;
  SummonServantData = BattleInfoData__getSummonServantData(battle_info, npcId, 0LL);
  if ( !this->fields.originalCallEnemyUniqueIdDict )
    goto LABEL_10;
  calledEnemyUniqueIdHash = this->fields.calledEnemyUniqueIdHash;
  v19 = SummonServantData;
  Item = System_Collections_Generic_Dictionary_int__int___get_Item(
           this->fields.originalCallEnemyUniqueIdDict,
           npcId,
           (const MethodInfo_2DDCEF4 *)Method_System_Collections_Generic_Dictionary_int__int__get_Item__);
  if ( !calledEnemyUniqueIdHash )
    goto LABEL_10;
  System_Collections_Generic_HashSet_int___Add(
    calledEnemyUniqueIdHash,
    Item,
    (const MethodInfo_21D915C *)Method_System_Collections_Generic_HashSet_int__Add__);
  if ( !v19 )
    goto LABEL_10;
  v19->fields.uniqueId = uniqueId;
  v19->fields.id = index;
  v25 = (BattleServantData_o *)sub_B170CC(BattleServantData_TypeInfo, v21, v22, v23, v24);
  BattleServantData___ctor(v25, 0LL);
  if ( !v25
    || (BattleServantData__setEnemy(v25, 0LL),
        BattleServantData__SetSummonNpc(v25, v19, 0LL),
        BattleServantData__setServantData_22718064(v25, v19, this->fields.battle_ent, 0, saveData, battleData, 0LL, 0LL),
        BattleServantData__setInitBattle(v25, 0LL),
        (enemy_datalist = this->fields.enemy_datalist) == 0LL) )
  {
LABEL_10:
    sub_B170D4();
  }
  System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData___Add(
    (System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData__o *)enemy_datalist,
    (EventMissionProgressRequest_Argument_ProgressData_o *)v25,
    (const MethodInfo_2F25CD8 *)Method_System_Collections_Generic_List_BattleServantData__Add__);
  return v25;
}


bool __fastcall BattleData__deleteSaveData(const MethodInfo *method)
{
  __int64 v1; // x1
  __int64 v2; // x1
  __int64 v3; // x1
  __int64 v4; // x1
  __int64 v5; // x1
  __int64 v6; // x1
  __int64 v7; // x1
  __int64 v8; // x1

  if ( (byte_40F6A8B & 1) == 0 )
  {
    sub_B16FFC(&EncryptedPlayerPrefs_TypeInfo, v1);
    sub_B16FFC(&StringLiteral_3353/*"CONTINUECOUNT"*/, v2);
    sub_B16FFC(&StringLiteral_3354/*"CONTINUE_BATTLE_SAVEKEY"*/, v3);
    sub_B16FFC(&StringLiteral_11516/*"SAVEKEY_"*/, v4);
    sub_B16FFC(&StringLiteral_3375/*"CONTINUE_ITEM_SAVEKEY"*/, v5);
    sub_B16FFC(&StringLiteral_3244/*"COMMAND_SPELL_BATTLE_SAVEKEY"*/, v6);
    sub_B16FFC(&StringLiteral_10850/*"QUESTUSEDTURNSAVEKEY"*/, v7);
    sub_B16FFC(&StringLiteral_2522/*"BATTLE_SVT_COMMON_FLAG"*/, v8);
    byte_40F6A8B = 1;
  }
  if ( (BYTE3(EncryptedPlayerPrefs_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0
    && !EncryptedPlayerPrefs_TypeInfo->_2.cctor_finished )
  {
    j_il2cpp_runtime_class_init_0(EncryptedPlayerPrefs_TypeInfo);
  }
  EncryptedPlayerPrefs__DeleteKey((System_String_o *)StringLiteral_3354/*"CONTINUE_BATTLE_SAVEKEY"*/, 0LL);
  EncryptedPlayerPrefs__DeleteKey((System_String_o *)StringLiteral_3244/*"COMMAND_SPELL_BATTLE_SAVEKEY"*/, 0LL);
  EncryptedPlayerPrefs__DeleteKey((System_String_o *)StringLiteral_3375/*"CONTINUE_ITEM_SAVEKEY"*/, 0LL);
  EncryptedPlayerPrefs__DeleteKey((System_String_o *)StringLiteral_11516/*"SAVEKEY_"*/, 0LL);
  EncryptedPlayerPrefs__DeleteKey((System_String_o *)StringLiteral_10850/*"QUESTUSEDTURNSAVEKEY"*/, 0LL);
  EncryptedPlayerPrefs__DeleteKey((System_String_o *)StringLiteral_3353/*"CONTINUECOUNT"*/, 0LL);
  EncryptedPlayerPrefs__DeleteKey((System_String_o *)StringLiteral_2522/*"BATTLE_SVT_COMMON_FLAG"*/, 0LL);
  UnityEngine_PlayerPrefs__Save(0LL);
  return 1;
}


bool __fastcall BattleData__disableSystemFadeStartBattle(BattleData_o *this, const MethodInfo *method)
{
  struct BattleData_o *data; // x8
  BattleEntity_o *battle_ent; // x0
  StageEntity_o *StageEntityAtWave; // x0

  data = this->fields.data;
  if ( !data
    || (battle_ent = this->fields.battle_ent) == 0LL
    || (StageEntityAtWave = BattleEntity__GetStageEntityAtWave(battle_ent, data->fields.wavecount, 0LL)) == 0LL )
  {
    sub_B170D4();
  }
  return StageEntity__disableSystemFadeStartBattle(StageEntityAtWave, 0LL);
}


void __fastcall BattleData__exchangeCommandCard(
        BattleData_o *this,
        BattleCommandData_o *command,
        BattleServantData_o *inSvtData,
        int32_t commandType,
        const MethodInfo *method)
{
  __int64 servantCardIdsIndex; // x21
  __int64 v9; // x22
  __int64 v10; // x23
  struct BattleBuffData_o *buffData; // x1
  CommandCodeInfo_o *CommandCodeInfo; // x0
  __int64 v13; // x1
  __int64 v14; // x2
  const MethodInfo *v15; // x3
  struct System_Int64_array *userCommandCodeIds; // x8
  int max_length; // w9
  int64_t v18; // x1
  struct System_Int32_array *commandAssistIds; // x8
  CodeStage_AntiCheat_ObscuredTypes_ObscuredInt_o v20; // 0:x0.16

  if ( (byte_40F6A10 & 1) == 0 )
  {
    sub_B16FFC(&CodeStage_AntiCheat_ObscuredTypes_ObscuredInt_TypeInfo, command);
    byte_40F6A10 = 1;
  }
  if ( !command )
    goto LABEL_16;
  servantCardIdsIndex = command->fields.servantCardIdsIndex;
  command->fields._type = commandType;
  if ( !inSvtData )
    goto LABEL_16;
  v10 = *(_QWORD *)&inSvtData->fields.svtId.fields.currentCryptoKey;
  v9 = *(_QWORD *)&inSvtData->fields.svtId.fields.fakeValue;
  if ( (BYTE3(CodeStage_AntiCheat_ObscuredTypes_ObscuredInt_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0
    && !CodeStage_AntiCheat_ObscuredTypes_ObscuredInt_TypeInfo->_2.cctor_finished )
  {
    j_il2cpp_runtime_class_init_0(CodeStage_AntiCheat_ObscuredTypes_ObscuredInt_TypeInfo);
  }
  *(_QWORD *)&v20.fields.currentCryptoKey = v10;
  *(_QWORD *)&v20.fields.fakeValue = v9;
  command->fields.svtId = CodeStage_AntiCheat_ObscuredTypes_ObscuredInt__op_Implicit_44068536(v20, 0LL);
  command->fields.imageSvtId = BattleServantData__GetCommandImageSvtId(inSvtData, 0LL);
  command->fields.svtlimit = BattleServantData__getCommandDispLimitCount(inSvtData, 0LL);
  command->fields._loadsvtLimit = BattleServantData__getDispLimitCount(inSvtData, 1, 0LL);
  command->fields.uniqueId = inSvtData->fields.uniqueId;
  command->fields.attri = BattleServantData__getAttri(inSvtData, 0LL);
  command->fields.flgEventJoin = inSvtData->fields.flgEventJoin;
  command->fields.follower = inSvtData->fields.followerType;
  buffData = inSvtData->fields.buffData;
  command->fields.battleBuffData = buffData;
  CommandCodeInfo = (CommandCodeInfo_o *)sub_B16F98(&command->fields.battleBuffData, buffData);
  command->fields.userCommandCodeId = -1LL;
  command->fields.commandCodeId = -1;
  userCommandCodeIds = inSvtData->fields.userCommandCodeIds;
  if ( userCommandCodeIds )
  {
    max_length = userCommandCodeIds->max_length;
    if ( (int)servantCardIdsIndex < max_length )
    {
      if ( (unsigned int)servantCardIdsIndex >= max_length )
        goto LABEL_17;
      v18 = userCommandCodeIds->m_Items[servantCardIdsIndex];
      command->fields.userCommandCodeId = v18;
      CommandCodeInfo = BattleServantData__GetCommandCodeInfo(inSvtData, v18, 0LL);
      if ( CommandCodeInfo )
        command->fields.commandCodeId = CommandCodeInfo->fields.commandCodeId;
    }
  }
  commandAssistIds = inSvtData->fields.commandAssistIds;
  if ( !commandAssistIds )
LABEL_16:
    sub_B170D4();
  if ( (unsigned int)servantCardIdsIndex >= commandAssistIds->max_length )
  {
LABEL_17:
    sub_B17100(CommandCodeInfo, v13, v14);
    sub_B170A0();
  }
  command->fields.commandAssistId = commandAssistIds->m_Items[servantCardIdsIndex + 1];
  BattleCommandData__SetCommandCardParam(command, inSvtData->fields.commandCardParam, servantCardIdsIndex, v15);
}


bool __fastcall BattleData__existsNextBattle(BattleData_o *this, const MethodInfo *method)
{
  BattleInfoData_o *battle_info; // x0

  battle_info = this->fields.battle_info;
  if ( !battle_info )
    sub_B170D4();
  return BattleInfoData__isNextBattle(battle_info, this->fields.wavecount, 0LL) && !this->fields.isTurnElapsedEndBattle;
}


System_String_o *__fastcall BattleData__getActionList(BattleData_o *this, const MethodInfo *method)
{
  __int64 v2; // x2
  __int64 v3; // x3
  __int64 v4; // x4
  __int64 v6; // x1
  __int64 v7; // x1
  __int64 v8; // x1
  __int64 v9; // x1
  __int64 v10; // x1
  __int64 v11; // x1
  __int64 v12; // x1
  __int64 v13; // x1
  __int64 v14; // x1
  __int64 v15; // x1
  __int64 v16; // x1
  __int64 v17; // x1
  __int64 v18; // x1
  __int64 v19; // x1
  __int64 v20; // x1
  __int64 v21; // x1
  __int64 v22; // x1
  __int64 v23; // x1
  __int64 v24; // x1
  __int64 v25; // x1
  __int64 v26; // x1
  __int64 v27; // x1
  __int64 v28; // x1
  System_Text_StringBuilder_o *v29; // x19
  System_Collections_Generic_IEnumerable_TSource__o *v30; // x0
  BattleData_o *v31; // x0
  const MethodInfo *v32; // x2
  System_String_o *CommandHistory; // x0
  const MethodInfo *v34; // x1
  System_Collections_Generic_IEnumerable_TSource__o *EnemyServantList; // x0
  __int64 v36; // x1
  __int64 v37; // x2
  __int64 v38; // x3
  __int64 v39; // x4
  System_Collections_Generic_IEnumerable_TSource__o *v40; // x20
  BattleData___c_c *v41; // x8
  struct BattleData___c_StaticFields *static_fields; // x9
  System_Func_WarBoardManager_WarBoardOnboardSkillTarget__WarBoardPieceData__o *_9__524_0; // x21
  Il2CppObject *v44; // x22
  struct BattleData___c_StaticFields *v45; // x0
  System_Collections_Generic_IEnumerable_TResult__o *v46; // x0
  __int64 v47; // x1
  __int64 v48; // x2
  __int64 v49; // x3
  __int64 v50; // x4
  BattleData___c_c *v51; // x8
  System_Collections_Generic_IEnumerable_TSource__o *v52; // x20
  struct BattleData___c_StaticFields *v53; // x9
  System_Func_WarBoardManager_WarBoardOnboardSkillTarget__WarBoardPieceData__o *_9__524_1; // x21
  Il2CppObject *v55; // x22
  struct BattleData___c_StaticFields *v56; // x0
  System_Collections_Generic_IEnumerable_TResult__o *v57; // x0
  __int64 v58; // x1
  __int64 v59; // x2
  __int64 v60; // x3
  __int64 v61; // x4
  BattleData___c_c *v62; // x8
  System_Collections_Generic_IEnumerable_TSource__o *v63; // x20
  struct BattleData___c_StaticFields *v64; // x9
  System_Func_LastUsedDeckNumberManager_LastUsedInfo__LastUsedDeckNumberManager_LastUsedInfo__LastUsedDeckNumberManager_LastUsedInfo__o *_9__524_2; // x21
  Il2CppObject *v66; // x22
  struct BattleData___c_StaticFields *v67; // x0
  System_String_o *UsedDeckNumberManager_LastUsedInfo; // x0

  if ( (byte_40F6A89 & 1) == 0 )
  {
    sub_B16FFC(&Method_System_Linq_Enumerable_Aggregate_string___, method);
    sub_B16FFC(&Method_System_Linq_Enumerable_Select_BattleServantData__BattleServantData_ConnectData___, v6);
    sub_B16FFC(&Method_System_Linq_Enumerable_Select_BattleServantData_ConnectData__string___, v7);
    sub_B16FFC(&Method_System_Linq_Enumerable_Take_BattleServantData___, v8);
    sub_B16FFC(&Method_System_Linq_Enumerable_Take_BattleData_CommandHistory___, v9);
    sub_B16FFC(&Method_System_Linq_Enumerable_ToList_BattleData_CommandHistory___, v10);
    sub_B16FFC(&Method_System_Func_BattleServantData_ConnectData__string___ctor__, v11);
    sub_B16FFC(&Method_System_Func_BattleServantData__BattleServantData_ConnectData___ctor__, v12);
    sub_B16FFC(&System_Func_BattleServantData__BattleServantData_ConnectData__TypeInfo, v13);
    sub_B16FFC(&System_Func_BattleServantData_ConnectData__string__TypeInfo, v14);
    sub_B16FFC(&Method_System_Func_string__string__string___ctor__, v15);
    sub_B16FFC(&System_Func_string__string__string__TypeInfo, v16);
    sub_B16FFC(&System_Text_StringBuilder_TypeInfo, v17);
    sub_B16FFC(&Method_BattleData___c__getActionList_b__524_0__, v18);
    sub_B16FFC(&Method_BattleData___c__getActionList_b__524_1__, v19);
    sub_B16FFC(&Method_BattleData___c__getActionList_b__524_2__, v20);
    sub_B16FFC(&BattleData___c_TypeInfo, v21);
    sub_B16FFC(&StringLiteral_307/*"\"logs\":"*/, v22);
    sub_B16FFC(&StringLiteral_305/*"\"dt\":"*/, v23);
    sub_B16FFC(&StringLiteral_700/*", "*/, v24);
    sub_B16FFC(&StringLiteral_306/*"\"hd\":"*/, v25);
    sub_B16FFC(&StringLiteral_23378/*"{ "*/, v26);
    sub_B16FFC(&StringLiteral_276/*" }"*/, v27);
    sub_B16FFC(&StringLiteral_304/*"\"data\":"*/, v28);
    byte_40F6A89 = 1;
  }
  v29 = (System_Text_StringBuilder_o *)sub_B170CC(System_Text_StringBuilder_TypeInfo, method, v2, v3, v4);
  System_Text_StringBuilder___ctor(v29, 0LL);
  if ( !v29 )
    sub_B170D4();
  System_Text_StringBuilder__Append_41914240(v29, (System_String_o *)StringLiteral_23378/*"{ "*/, 0LL);
  System_Text_StringBuilder__Append_41914240(v29, (System_String_o *)StringLiteral_307/*"\"logs\":"*/, 0LL);
  System_Text_StringBuilder__Append_41917484(v29, 0x22u, 0LL);
  v30 = System_Linq_Enumerable__Take_BattleData_CommandHistory_(
          (System_Collections_Generic_IEnumerable_TSource__o *)this->fields.comhistory,
          45,
          (const MethodInfo_19C4328 *)Method_System_Linq_Enumerable_Take_BattleData_CommandHistory___);
  v31 = (BattleData_o *)System_Linq_Enumerable__ToList_WarBoardManager_WarBoardOnboardSkillTarget_(
                          v30,
                          (const MethodInfo_19C7AA0 *)Method_System_Linq_Enumerable_ToList_BattleData_CommandHistory___);
  CommandHistory = BattleData__getCommandHistory(
                     v31,
                     (System_Collections_Generic_List_BattleData_CommandHistory__o *)v31,
                     v32);
  System_Text_StringBuilder__Append_41914240(v29, CommandHistory, 0LL);
  System_Text_StringBuilder__Append_41917484(v29, 0x22u, 0LL);
  System_Text_StringBuilder__Append_41914240(v29, (System_String_o *)StringLiteral_700/*", "*/, 0LL);
  System_Text_StringBuilder__Append_41914240(v29, (System_String_o *)StringLiteral_305/*"\"dt\":"*/, 0LL);
  System_Text_StringBuilder__Append_41917484(v29, 0x22u, 0LL);
  EnemyServantList = (System_Collections_Generic_IEnumerable_TSource__o *)BattleData__getEnemyServantList(this, v34);
  v40 = System_Linq_Enumerable__Take_BattleData_CommandHistory_(
          EnemyServantList,
          20,
          (const MethodInfo_19C4328 *)Method_System_Linq_Enumerable_Take_BattleServantData___);
  v41 = BattleData___c_TypeInfo;
  if ( (BYTE3(BattleData___c_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0
    && !BattleData___c_TypeInfo->_2.cctor_finished )
  {
    j_il2cpp_runtime_class_init_0(BattleData___c_TypeInfo);
    v41 = BattleData___c_TypeInfo;
  }
  static_fields = v41->static_fields;
  _9__524_0 = (System_Func_WarBoardManager_WarBoardOnboardSkillTarget__WarBoardPieceData__o *)static_fields->__9__524_0;
  if ( !_9__524_0 )
  {
    if ( (BYTE3(v41->vtable._0_Equals.methodPtr) & 4) != 0 && !v41->_2.cctor_finished )
    {
      j_il2cpp_runtime_class_init_0(v41);
      static_fields = BattleData___c_TypeInfo->static_fields;
    }
    v44 = (Il2CppObject *)static_fields->__9;
    _9__524_0 = (System_Func_WarBoardManager_WarBoardOnboardSkillTarget__WarBoardPieceData__o *)sub_B170CC(
                                                                                                  System_Func_BattleServantData__BattleServantData_ConnectData__TypeInfo,
                                                                                                  v36,
                                                                                                  v37,
                                                                                                  v38,
                                                                                                  v39);
    System_Func_WarBoardManager_WarBoardOnboardSkillTarget__WarBoardPieceData____ctor(
      _9__524_0,
      v44,
      Method_BattleData___c__getActionList_b__524_0__,
      (const MethodInfo_2B6C28C *)Method_System_Func_BattleServantData__BattleServantData_ConnectData___ctor__);
    v45 = BattleData___c_TypeInfo->static_fields;
    v45->__9__524_0 = (struct System_Func_BattleServantData__BattleServantData_ConnectData__o *)_9__524_0;
    sub_B16F98(&v45->__9__524_0, _9__524_0);
  }
  v46 = System_Linq_Enumerable__Select_WarBoardManager_WarBoardOnboardSkillTarget__WarBoardPieceData_(
          v40,
          (System_Func_TSource__TResult__o *)_9__524_0,
          (const MethodInfo_19C0B1C *)Method_System_Linq_Enumerable_Select_BattleServantData__BattleServantData_ConnectData___);
  v51 = BattleData___c_TypeInfo;
  v52 = (System_Collections_Generic_IEnumerable_TSource__o *)v46;
  if ( (BYTE3(BattleData___c_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0
    && !BattleData___c_TypeInfo->_2.cctor_finished )
  {
    j_il2cpp_runtime_class_init_0(BattleData___c_TypeInfo);
    v51 = BattleData___c_TypeInfo;
  }
  v53 = v51->static_fields;
  _9__524_1 = (System_Func_WarBoardManager_WarBoardOnboardSkillTarget__WarBoardPieceData__o *)v53->__9__524_1;
  if ( !_9__524_1 )
  {
    if ( (BYTE3(v51->vtable._0_Equals.methodPtr) & 4) != 0 && !v51->_2.cctor_finished )
    {
      j_il2cpp_runtime_class_init_0(v51);
      v53 = BattleData___c_TypeInfo->static_fields;
    }
    v55 = (Il2CppObject *)v53->__9;
    _9__524_1 = (System_Func_WarBoardManager_WarBoardOnboardSkillTarget__WarBoardPieceData__o *)sub_B170CC(
                                                                                                  System_Func_BattleServantData_ConnectData__string__TypeInfo,
                                                                                                  v47,
                                                                                                  v48,
                                                                                                  v49,
                                                                                                  v50);
    System_Func_WarBoardManager_WarBoardOnboardSkillTarget__WarBoardPieceData____ctor(
      _9__524_1,
      v55,
      Method_BattleData___c__getActionList_b__524_1__,
      (const MethodInfo_2B6C28C *)Method_System_Func_BattleServantData_ConnectData__string___ctor__);
    v56 = BattleData___c_TypeInfo->static_fields;
    v56->__9__524_1 = (struct System_Func_BattleServantData_ConnectData__string__o *)_9__524_1;
    sub_B16F98(&v56->__9__524_1, _9__524_1);
  }
  v57 = System_Linq_Enumerable__Select_WarBoardManager_WarBoardOnboardSkillTarget__WarBoardPieceData_(
          v52,
          (System_Func_TSource__TResult__o *)_9__524_1,
          (const MethodInfo_19C0B1C *)Method_System_Linq_Enumerable_Select_BattleServantData_ConnectData__string___);
  v62 = BattleData___c_TypeInfo;
  v63 = (System_Collections_Generic_IEnumerable_TSource__o *)v57;
  if ( (BYTE3(BattleData___c_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0
    && !BattleData___c_TypeInfo->_2.cctor_finished )
  {
    j_il2cpp_runtime_class_init_0(BattleData___c_TypeInfo);
    v62 = BattleData___c_TypeInfo;
  }
  v64 = v62->static_fields;
  _9__524_2 = (System_Func_LastUsedDeckNumberManager_LastUsedInfo__LastUsedDeckNumberManager_LastUsedInfo__LastUsedDeckNumberManager_LastUsedInfo__o *)v64->__9__524_2;
  if ( !_9__524_2 )
  {
    if ( (BYTE3(v62->vtable._0_Equals.methodPtr) & 4) != 0 && !v62->_2.cctor_finished )
    {
      j_il2cpp_runtime_class_init_0(v62);
      v64 = BattleData___c_TypeInfo->static_fields;
    }
    v66 = (Il2CppObject *)v64->__9;
    _9__524_2 = (System_Func_LastUsedDeckNumberManager_LastUsedInfo__LastUsedDeckNumberManager_LastUsedInfo__LastUsedDeckNumberManager_LastUsedInfo__o *)sub_B170CC(System_Func_string__string__string__TypeInfo, v58, v59, v60, v61);
    System_Func_LastUsedDeckNumberManager_LastUsedInfo__LastUsedDeckNumberManager_LastUsedInfo__LastUsedDeckNumberManager_LastUsedInfo____ctor(
      _9__524_2,
      v66,
      Method_BattleData___c__getActionList_b__524_2__,
      (const MethodInfo_2B75C40 *)Method_System_Func_string__string__string___ctor__);
    v67 = BattleData___c_TypeInfo->static_fields;
    v67->__9__524_2 = (struct System_Func_string__string__string__o *)_9__524_2;
    sub_B16F98(&v67->__9__524_2, _9__524_2);
  }
  UsedDeckNumberManager_LastUsedInfo = (System_String_o *)System_Linq_Enumerable__Aggregate_LastUsedDeckNumberManager_LastUsedInfo_(
                                                            v63,
                                                            (System_Func_TSource__TSource__TSource__o *)_9__524_2,
                                                            (const MethodInfo_18C6320 *)Method_System_Linq_Enumerable_Aggregate_string___);
  System_Text_StringBuilder__Append_41914240(v29, UsedDeckNumberManager_LastUsedInfo, 0LL);
  System_Text_StringBuilder__Append_41917484(v29, 0x22u, 0LL);
  System_Text_StringBuilder__Append_41914240(v29, (System_String_o *)StringLiteral_700/*", "*/, 0LL);
  System_Text_StringBuilder__Append_41914240(v29, (System_String_o *)StringLiteral_306/*"\"hd\":"*/, 0LL);
  System_Text_StringBuilder__Append_41917484(v29, 0x22u, 0LL);
  System_Text_StringBuilder__Append_41917484(v29, 0x22u, 0LL);
  System_Text_StringBuilder__Append_41914240(v29, (System_String_o *)StringLiteral_700/*", "*/, 0LL);
  System_Text_StringBuilder__Append_41914240(v29, (System_String_o *)StringLiteral_304/*"\"data\":"*/, 0LL);
  System_Text_StringBuilder__Append_41917484(v29, 0x22u, 0LL);
  System_Text_StringBuilder__Append_41917484(v29, 0x22u, 0LL);
  System_Text_StringBuilder__Append_41914240(v29, (System_String_o *)StringLiteral_276/*" }"*/, 0LL);
  return (System_String_o *)((__int64 (__fastcall *)(System_Text_StringBuilder_o *, Il2CppMethodPointer))v29->klass->vtable._3_ToString.method)(
                              v29,
                              v29->klass->vtable._4_System_Runtime_Serialization_ISerializable_GetObjectData.methodPtr);
}


int32_t __fastcall BattleData__getAddCriticalCount(BattleData_o *this, const MethodInfo *method)
{
  return this->fields.addCriticalstars;
}


// local variable allocation has failed, the output may be wrong!
System_Double_array *__fastcall BattleData__getAiParam(
        BattleData_o *this,
        BattleData_o *bData,
        int32_t param,
        int32_t turn,
        int32_t actCnt,
        System_Int64_array *checkParams,
        AiBaseEntity_o *aiBaseEntity,
        const MethodInfo *method)
{
  BattleData_o *v11; // x19
  __int64 v12; // x1
  __int64 v13; // x1
  __int64 v14; // x1
  __int64 v15; // x1
  __int64 v16; // x1
  __int64 v17; // x1
  __int64 v18; // x1
  __int64 v19; // x1
  __int64 v20; // x1
  __int64 v21; // x1
  __int64 v22; // x1
  __int64 v23; // x1
  __int64 v24; // x1
  System_Double_array *v25; // x20
  double v26; // d0
  int32_t playerMasterSkillCount; // w8
  int32_t playerSkillCount; // w9
  __int64 v29; // x22
  struct System_Collections_Generic_List_double__o *chainTypeList; // x8
  System_Double_array *v31; // x19
  int num; // w8
  struct EnemyMstBattleEntity_o *enemyMasterInfo; // x8
  int v34; // w21
  WebViewManager_o *Instance; // x0
  UserItemMaster_o *MasterData_WarQuestSelectionMaster; // x20
  UserItemEntity_o *Entity; // x0
  __int64 v38; // x2
  UserItemEntity_o *v39; // x21
  UserGameEntity_o *SelfUserGame; // x21
  __int64 v41; // x2
  const MethodInfo *v42; // x2
  __int64 v43; // x0
  BattleData_o *masterSkillUseWaveTurn; // x21
  const MethodInfo *v45; // x1
  __int64 v46; // x8
  __int64 v47; // x0
  struct BaseBattleEvent_o *battleEvent; // x8
  bool v49; // zf
  double v50; // d1
  __int64 v51; // x8
  System_Collections_Generic_Dictionary_int__int__o *chainCountDict; // x0
  int32_t v53; // w20
  __int64 v54; // x2
  double Item; // d8
  System_Collections_Generic_Dictionary_int__int__o *v56; // x0
  __int64 v57; // x0
  struct BaseBattleEvent_o *v59; // x0
  __int64 v60; // x20
  __int64 v61; // x1
  __int64 v62; // x2
  __int64 v63; // x3
  __int64 v64; // x4
  System_Collections_Generic_List_double__o *v65; // x19
  signed __int64 v66; // x8
  unsigned __int64 v67; // x21

  v11 = this;
  if ( (byte_40F6AB3 & 1) == 0 )
  {
    sub_B16FFC(&ConditionsInformation_TypeInfo, bData);
    sub_B16FFC(&Method_DataManager_GetMasterData_UserItemMaster___, v12);
    sub_B16FFC(&Method_System_Collections_Generic_Dictionary_int__int__ContainsKey__, v13);
    sub_B16FFC(&Method_System_Collections_Generic_Dictionary_int__int__get_Item__, v14);
    sub_B16FFC(&double___TypeInfo, v15);
    sub_B16FFC(&Method_System_Collections_Generic_List_double__Add__, v16);
    sub_B16FFC(&Method_System_Collections_Generic_List_double__ToArray__, v17);
    sub_B16FFC(&Method_System_Collections_Generic_List_double___ctor__, v18);
    sub_B16FFC(&Method_System_Collections_Generic_List_int__get_Count__, v19);
    sub_B16FFC(&Method_System_Collections_Generic_List_double__get_Count__, v20);
    sub_B16FFC(&Method_System_Collections_Generic_List_int__get_Item__, v21);
    sub_B16FFC(&System_Collections_Generic_List_double__TypeInfo, v22);
    sub_B16FFC(&NetworkManager_TypeInfo, v23);
    this = (BattleData_o *)sub_B16FFC(&Method_SingletonMonoBehaviour_DataManager__get_Instance__, v24);
    byte_40F6AB3 = 1;
  }
  switch ( param )
  {
    case 1:
      this = (BattleData_o *)sub_B17014(double___TypeInfo, 1LL, *(_QWORD *)&param);
      if ( !this )
        goto LABEL_98;
      v25 = (System_Double_array *)this;
      if ( !LODWORD(this->fields.rootfsm) )
        goto LABEL_99;
      v26 = (double)turn;
      goto LABEL_78;
    case 21:
      Instance = SingletonMonoBehaviour_WebViewManager___get_Instance((const MethodInfo_2A54F38 *)Method_SingletonMonoBehaviour_DataManager__get_Instance__);
      if ( !Instance )
        goto LABEL_98;
      MasterData_WarQuestSelectionMaster = (UserItemMaster_o *)DataManager__GetMasterData_WarQuestSelectionMaster_(
                                                                 (DataManager_o *)Instance,
                                                                 (const MethodInfo_18C3284 *)Method_DataManager_GetMasterData_UserItemMaster___);
      if ( (BYTE3(NetworkManager_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0
        && !NetworkManager_TypeInfo->_2.cctor_finished )
      {
        j_il2cpp_runtime_class_init_0(NetworkManager_TypeInfo);
      }
      this = (BattleData_o *)NetworkManager__get_UserId(0LL);
      if ( !checkParams )
        goto LABEL_98;
      if ( !checkParams->max_length )
        goto LABEL_99;
      if ( !MasterData_WarQuestSelectionMaster )
        goto LABEL_98;
      Entity = UserItemMaster__GetEntity(
                 MasterData_WarQuestSelectionMaster,
                 (int64_t)this,
                 checkParams->m_Items[0],
                 0LL);
      if ( !Entity )
        return v11->fields.wkZeroParam;
      v39 = Entity;
      this = (BattleData_o *)sub_B17014(double___TypeInfo, 1LL, v38);
      if ( !this )
        goto LABEL_98;
      v25 = (System_Double_array *)this;
      if ( !LODWORD(this->fields.rootfsm) )
        goto LABEL_99;
      num = v39->fields.num;
LABEL_58:
      v26 = (double)num;
      goto LABEL_78;
    case 24:
      enemyMasterInfo = v11->fields.enemyMasterInfo;
      if ( !enemyMasterInfo )
        return v11->fields.wkZeroParam;
      v34 = enemyMasterInfo->fields.maxCommandSpell - v11->fields.enemyMasterCommandSpellUseCnt;
      if ( v34 < 1 )
        return v11->fields.wkZeroParam;
      this = (BattleData_o *)sub_B17014(double___TypeInfo, 1LL, *(_QWORD *)&param);
      if ( !this )
        goto LABEL_98;
      v25 = (System_Double_array *)this;
      if ( !LODWORD(this->fields.rootfsm) )
        goto LABEL_99;
      v26 = (double)v34;
      goto LABEL_78;
    case 25:
      v25 = (System_Double_array *)sub_B17014(double___TypeInfo, 1LL, *(_QWORD *)&param);
      this = (BattleData_o *)BattleData__get_IsInTactical(v11, v45);
      v46 = 528LL;
      if ( ((unsigned __int8)this & 1) != 0 )
        v46 = 532LL;
      if ( !v25 )
        goto LABEL_98;
      if ( !v25->max_length )
        goto LABEL_99;
      num = *(_DWORD *)((char *)&v11->klass + v46);
      goto LABEL_58;
    case 29:
      v47 = sub_B17014(double___TypeInfo, 1LL, *(_QWORD *)&param);
      battleEvent = v11->fields.battleEvent;
      if ( !battleEvent )
        goto LABEL_98;
      v25 = (System_Double_array *)v47;
      this = (BattleData_o *)((__int64 (__fastcall *)(struct BaseBattleEvent_o *, Il2CppMethodPointer))battleEvent->klass->vtable._4_get_IsPrecedingPlayer.method)(
                               v11->fields.battleEvent,
                               battleEvent->klass->vtable._5_Init.methodPtr);
      v49 = ((unsigned __int8)this & 1) == 0;
      v26 = 1.0;
      v50 = 0.0;
      goto LABEL_74;
    case 30:
      this = (BattleData_o *)sub_B17014(double___TypeInfo, 1LL, *(_QWORD *)&param);
      if ( !this )
        goto LABEL_98;
      v25 = (System_Double_array *)this;
      if ( !LODWORD(this->fields.rootfsm) )
        goto LABEL_99;
      num = v11->fields.limitTurnCount + 1 - v11->fields.turnCount;
      goto LABEL_58;
    case 31:
      SelfUserGame = UserGameMaster__getSelfUserGame(0LL);
      v25 = (System_Double_array *)sub_B17014(double___TypeInfo, 1LL, v41);
      this = (BattleData_o *)BattleData__CheckCurrentTemporaryCommandSpell(v11, SelfUserGame, v42);
      if ( !v25 )
        goto LABEL_98;
      if ( !v25->max_length )
        goto LABEL_99;
      v26 = (double)(int)this;
      goto LABEL_78;
    case 32:
      v43 = sub_B17014(double___TypeInfo, 1LL, *(_QWORD *)&param);
      masterSkillUseWaveTurn = (BattleData_o *)v11->fields.masterSkillUseWaveTurn;
      v25 = (System_Double_array *)v43;
      this = (BattleData_o *)ServantWaveTurnEventOwner__CalcWaveTurnVal(
                               v11->fields.wavecount,
                               v11->fields.turnCount,
                               0LL);
      v26 = 0.0;
      if ( this == masterSkillUseWaveTurn )
        v26 = 1.0;
      if ( !v25 )
        goto LABEL_98;
      goto LABEL_77;
    case 33:
      if ( !checkParams )
        goto LABEL_98;
      v51 = *(_QWORD *)&checkParams->max_length;
      if ( !v51 )
        return v11->fields.wkZeroParam;
      if ( !(_DWORD)v51 )
        goto LABEL_99;
      chainCountDict = v11->fields.chainCountDict;
      if ( !chainCountDict )
        goto LABEL_98;
      v53 = checkParams->m_Items[0];
      Item = 0.0;
      if ( !System_Collections_Generic_Dictionary_int__int___ContainsKey(
              chainCountDict,
              v53,
              (const MethodInfo_2DDD218 *)Method_System_Collections_Generic_Dictionary_int__int__ContainsKey__) )
        goto LABEL_68;
      v56 = v11->fields.chainCountDict;
      if ( !v56 )
        goto LABEL_98;
      Item = (double)System_Collections_Generic_Dictionary_int__int___get_Item(
                       v56,
                       v53,
                       (const MethodInfo_2DDCEF4 *)Method_System_Collections_Generic_Dictionary_int__int__get_Item__);
LABEL_68:
      this = (BattleData_o *)sub_B17014(double___TypeInfo, 1LL, v54);
      if ( !this )
        goto LABEL_98;
      v25 = (System_Double_array *)this;
      if ( !LODWORD(this->fields.rootfsm) )
        goto LABEL_99;
      *(double *)&this->fields.fsm = Item;
      return v25;
    case 34:
      v57 = sub_B17014(double___TypeInfo, 1LL, *(_QWORD *)&param);
      if ( !v11->fields.useSkillEachTurn )
        goto LABEL_98;
      v25 = (System_Double_array *)v57;
      this = (BattleData_o *)UseSkillEachTurn__IsUseThisTurn(v11->fields.useSkillEachTurn, v11, checkParams, 0LL);
      goto LABEL_73;
    case 35:
      if ( !checkParams )
        goto LABEL_98;
      v29 = *(_QWORD *)&checkParams->max_length;
      this = (BattleData_o *)sub_B17014(double___TypeInfo, 1LL, *(_QWORD *)&param);
      chainTypeList = v11->fields.chainTypeList;
      if ( !chainTypeList )
        goto LABEL_98;
      v25 = (System_Double_array *)this;
      if ( !v29 )
      {
        v26 = 0.0;
        if ( chainTypeList->fields._size > 0 )
          v26 = 1.0;
        if ( this )
          goto LABEL_77;
LABEL_98:
        sub_B170D4();
      }
      v31 = System_Collections_Generic_List_double___ToArray(
              v11->fields.chainTypeList,
              (const MethodInfo_2ED6280 *)Method_System_Collections_Generic_List_double__ToArray__);
      if ( (BYTE3(ConditionsInformation_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0
        && !ConditionsInformation_TypeInfo->_2.cctor_finished )
      {
        j_il2cpp_runtime_class_init_0(ConditionsInformation_TypeInfo);
      }
      this = (BattleData_o *)ConditionsInformation__isExist(v31, checkParams, 0LL);
LABEL_73:
      v49 = ((unsigned __int8)this & 1) == 0;
      v26 = 0.0;
      v50 = 1.0;
LABEL_74:
      if ( !v49 )
        v26 = v50;
      if ( !v25 )
        goto LABEL_98;
LABEL_77:
      if ( !v25->max_length )
      {
LABEL_99:
        sub_B17100(this, bData, *(_QWORD *)&param);
        sub_B170A0();
      }
LABEL_78:
      v25->m_Items[0] = v26;
      return v25;
    case 36:
      this = (BattleData_o *)sub_B17014(double___TypeInfo, 1LL, *(_QWORD *)&param);
      if ( !this )
        goto LABEL_98;
      v25 = (System_Double_array *)this;
      if ( !LODWORD(this->fields.rootfsm) )
        goto LABEL_99;
      num = v11->fields.playerNpCount;
      goto LABEL_58;
    case 37:
      this = (BattleData_o *)sub_B17014(double___TypeInfo, 1LL, *(_QWORD *)&param);
      if ( !this )
        goto LABEL_98;
      v25 = (System_Double_array *)this;
      if ( !LODWORD(this->fields.rootfsm) )
        goto LABEL_99;
      num = v11->fields.playerSkillCount;
      goto LABEL_58;
    case 38:
      this = (BattleData_o *)sub_B17014(double___TypeInfo, 1LL, *(_QWORD *)&param);
      if ( !this )
        goto LABEL_98;
      v25 = (System_Double_array *)this;
      if ( !LODWORD(this->fields.rootfsm) )
        goto LABEL_99;
      playerMasterSkillCount = v11->fields.playerMasterSkillCount;
      playerSkillCount = v11->fields.playerSkillCount;
      goto LABEL_52;
    case 39:
      this = (BattleData_o *)sub_B17014(double___TypeInfo, 1LL, *(_QWORD *)&param);
      if ( !this )
        goto LABEL_98;
      v25 = (System_Double_array *)this;
      if ( !LODWORD(this->fields.rootfsm) )
        goto LABEL_99;
      playerMasterSkillCount = v11->fields.turnCount;
      playerSkillCount = v11->fields.totalTurnCount;
LABEL_52:
      num = playerSkillCount + playerMasterSkillCount;
      goto LABEL_58;
    case 40:
      v59 = v11->fields.battleEvent;
      if ( v59 )
        v60 = ((__int64 (__fastcall *)(struct BaseBattleEvent_o *, Il2CppMethodPointer, _QWORD, _QWORD, _QWORD, System_Int64_array *, AiBaseEntity_o *, const MethodInfo *))v59->klass->vtable._36_GetWarBoardSquareIndividualityList.method)(
                v59,
                v59->klass->vtable._37_GetForceDeadSvtIdArray.methodPtr,
                *(_QWORD *)&param,
                *(_QWORD *)&turn,
                *(_QWORD *)&actCnt,
                checkParams,
                aiBaseEntity,
                method);
      else
        v60 = 0LL;
      if ( BasicHelper__IsNullOrEmpty((System_Collections_ICollection_o *)v60, 0LL) )
        return v11->fields.wkZeroParam;
      v65 = (System_Collections_Generic_List_double__o *)sub_B170CC(
                                                           System_Collections_Generic_List_double__TypeInfo,
                                                           v61,
                                                           v62,
                                                           v63,
                                                           v64);
      System_Collections_Generic_List_double____ctor(
        v65,
        (const MethodInfo_2ED33F4 *)Method_System_Collections_Generic_List_double___ctor__);
      if ( !v60 )
        goto LABEL_98;
      LODWORD(v66) = *(_DWORD *)(v60 + 24);
      if ( (int)v66 < 1 )
        goto LABEL_96;
      v67 = 0LL;
      do
      {
        if ( v67 >= (unsigned int)v66 )
          System_ThrowHelper__ThrowArgumentOutOfRangeException_41329284(0LL);
        if ( !v65 )
          goto LABEL_98;
        System_Collections_Generic_List_double___Add(
          v65,
          (double)*(int *)(*(_QWORD *)(v60 + 16) + 4 * v67 + 32),
          (const MethodInfo_2ED414C *)Method_System_Collections_Generic_List_double__Add__);
        v66 = *(int *)(v60 + 24);
        ++v67;
      }
      while ( (__int64)v67 < v66 );
LABEL_96:
      if ( !v65 )
        goto LABEL_98;
      return System_Collections_Generic_List_double___ToArray(
               v65,
               (const MethodInfo_2ED6280 *)Method_System_Collections_Generic_List_double__ToArray__);
    default:
      return v11->fields.wkZeroParam;
  }
}


System_Int32_array *__fastcall BattleData__getAliveEnemys(BattleData_o *this, const MethodInfo *method)
{
  const MethodInfo *v2; // x3
  BattleInfoData_o *battle_info; // x19
  int32_t wavecount; // w20
  System_Int32_array *EnemyServantIDList; // x0

  battle_info = this->fields.battle_info;
  wavecount = this->fields.wavecount;
  EnemyServantIDList = BattleData__getEnemyServantIDList(this, 1, 0, v2);
  if ( !battle_info )
    sub_B170D4();
  return BattleInfoData__getAliveEnemys(battle_info, wavecount, EnemyServantIDList, 0LL);
}


// local variable allocation has failed, the output may be wrong!
System_Int32_array *__fastcall BattleData__getAliveFieldEnemyServantIDList(
        BattleData_o *this,
        bool isTargetOnly,
        const MethodInfo *method)
{
  __int64 v5; // x1
  __int64 v6; // x1
  __int64 v7; // x1
  System_Int32_array *FieldEnemyServantIDList; // x20
  __int64 v10; // x1
  __int64 v11; // x2
  __int64 v12; // x3
  __int64 v13; // x4
  System_Collections_Generic_List_int__o *v14; // x21
  BattleServantData_o *ServantData; // x0
  __int64 v16; // x1
  const MethodInfo *v17; // x2
  __int64 v18; // x8
  unsigned __int64 v19; // x23
  int32_t v20; // w22

  if ( (byte_40F6A52 & 1) == 0 )
  {
    sub_B16FFC(&Method_System_Collections_Generic_List_int__Add__, isTargetOnly);
    sub_B16FFC(&Method_System_Collections_Generic_List_int__ToArray__, v5);
    sub_B16FFC(&Method_System_Collections_Generic_List_int___ctor__, v6);
    sub_B16FFC(&System_Collections_Generic_List_int__TypeInfo, v7);
    byte_40F6A52 = 1;
  }
  if ( this->fields.isMultiTargetBattle && isTargetOnly )
    return BattleData__getTargetEnemyIdList(this, 1, method);
  FieldEnemyServantIDList = BattleData__getFieldEnemyServantIDList(this, isTargetOnly, method);
  v14 = (System_Collections_Generic_List_int__o *)sub_B170CC(
                                                    System_Collections_Generic_List_int__TypeInfo,
                                                    v10,
                                                    v11,
                                                    v12,
                                                    v13);
  System_Collections_Generic_List_int____ctor(
    v14,
    (const MethodInfo_2F0F794 *)Method_System_Collections_Generic_List_int___ctor__);
  if ( !FieldEnemyServantIDList )
    goto LABEL_18;
  v18 = *(_QWORD *)&FieldEnemyServantIDList->max_length;
  if ( (int)v18 >= 1 )
  {
    v19 = 0LL;
    do
    {
      if ( v19 >= (unsigned int)v18 )
      {
        sub_B17100(ServantData, v16, v17);
        sub_B170A0();
      }
      v20 = FieldEnemyServantIDList->m_Items[v19 + 1];
      ServantData = BattleData__getServantData(this, v20, v17);
      if ( ServantData )
      {
        ServantData = (BattleServantData_o *)BattleServantData__isDead(ServantData, 0LL);
        if ( ((unsigned __int8)ServantData & 1) == 0 )
        {
          if ( !v14 )
            goto LABEL_18;
          System_Collections_Generic_List_int___Add(
            v14,
            v20,
            (const MethodInfo_2F104F0 *)Method_System_Collections_Generic_List_int__Add__);
        }
      }
      LODWORD(v18) = FieldEnemyServantIDList->max_length;
      ++v19;
    }
    while ( (__int64)v19 < (int)v18 );
  }
  if ( !v14 )
LABEL_18:
    sub_B170D4();
  return System_Collections_Generic_List_int___ToArray(
           v14,
           (const MethodInfo_2F125FC *)Method_System_Collections_Generic_List_int__ToArray__);
}


System_Int32_array *__fastcall BattleData__getAliveFieldPlayerServantIDList(
        BattleData_o *this,
        System_Int32_array *addIds,
        const MethodInfo *method)
{
  __int64 v5; // x1
  __int64 v6; // x1
  __int64 v7; // x1
  System_Int32_array *FieldPlayerServantIDList; // x20
  __int64 v9; // x1
  __int64 v10; // x2
  __int64 v11; // x3
  __int64 v12; // x4
  System_Collections_Generic_List_int__o *v13; // x21
  BattleServantData_o *ServantData; // x0
  __int64 v15; // x1
  const MethodInfo *v16; // x2
  __int64 v17; // x8
  unsigned __int64 v18; // x23
  int32_t v19; // w22

  if ( (byte_40F6A5D & 1) == 0 )
  {
    sub_B16FFC(&Method_System_Collections_Generic_List_int__Add__, addIds);
    sub_B16FFC(&Method_System_Collections_Generic_List_int__ToArray__, v5);
    sub_B16FFC(&Method_System_Collections_Generic_List_int___ctor__, v6);
    sub_B16FFC(&System_Collections_Generic_List_int__TypeInfo, v7);
    byte_40F6A5D = 1;
  }
  FieldPlayerServantIDList = BattleData__getFieldPlayerServantIDList(this, addIds, method);
  v13 = (System_Collections_Generic_List_int__o *)sub_B170CC(
                                                    System_Collections_Generic_List_int__TypeInfo,
                                                    v9,
                                                    v10,
                                                    v11,
                                                    v12);
  System_Collections_Generic_List_int____ctor(
    v13,
    (const MethodInfo_2F0F794 *)Method_System_Collections_Generic_List_int___ctor__);
  if ( !FieldPlayerServantIDList )
    goto LABEL_15;
  v17 = *(_QWORD *)&FieldPlayerServantIDList->max_length;
  if ( (int)v17 >= 1 )
  {
    v18 = 0LL;
    do
    {
      if ( v18 >= (unsigned int)v17 )
      {
        sub_B17100(ServantData, v15, v16);
        sub_B170A0();
      }
      v19 = FieldPlayerServantIDList->m_Items[v18 + 1];
      ServantData = BattleData__getServantData(this, v19, v16);
      if ( ServantData )
      {
        ServantData = (BattleServantData_o *)BattleServantData__isDead(ServantData, 0LL);
        if ( ((unsigned __int8)ServantData & 1) == 0 )
        {
          if ( !v13 )
            goto LABEL_15;
          System_Collections_Generic_List_int___Add(
            v13,
            v19,
            (const MethodInfo_2F104F0 *)Method_System_Collections_Generic_List_int__Add__);
        }
      }
      LODWORD(v17) = FieldPlayerServantIDList->max_length;
      ++v18;
    }
    while ( (__int64)v18 < (int)v17 );
  }
  if ( !v13 )
LABEL_15:
    sub_B170D4();
  return System_Collections_Generic_List_int___ToArray(
           v13,
           (const MethodInfo_2F125FC *)Method_System_Collections_Generic_List_int__ToArray__);
}


// local variable allocation has failed, the output may be wrong!
System_Int32_array *__fastcall BattleData__getAliveFieldSvtIdArray(
        BattleData_o *this,
        int32_t actorUniqueId,
        bool isPartySide,
        System_Int32_array *tvals,
        bool isIncludeIgnoreIndiv,
        const MethodInfo *method)
{
  const MethodInfo *v10; // x2
  System_Int32_array *result; // x0
  const MethodInfo *v12; // x4

  if ( (((BattleData__getEnemyServantData(this, actorUniqueId, (const MethodInfo *)isPartySide) != 0LL) ^ !isPartySide) & 1) != 0 )
    result = BattleData__getAliveFieldEnemyServantIDList(this, !isPartySide, v10);
  else
    result = BattleData__getAliveFieldPlayerServantIDList(this, 0LL, v10);
  if ( tvals )
    return BattleData__CheckIndivSvtIdList(this, result, tvals, isIncludeIgnoreIndiv, v12);
  return result;
}


BattleServantData_o *__fastcall BattleData__getAliveServantDataFromIndex(
        BattleData_o *this,
        int32_t index,
        bool isEnemy,
        const MethodInfo *method)
{
  BattleServantData_o *result; // x0
  BattleServantData_o *v5; // x19

  result = BattleData__getServantDataFromIndex(this, index, isEnemy, method);
  if ( result )
  {
    v5 = result;
    if ( BattleServantData__isAlive(result, 0, 0LL) )
      return v5;
    else
      return 0LL;
  }
  return result;
}


BattleEntity_o *__fastcall BattleData__getBattleEntity(BattleData_o *this, const MethodInfo *method)
{
  return this->fields.battle_ent;
}


// local variable allocation has failed, the output may be wrong!
BattleFieldData_o *__fastcall BattleData__getBattleFieldData(
        BattleData_o *this,
        int32_t index,
        const MethodInfo *method)
{
  struct BattleFieldData_array *field_datalist; // x8

  field_datalist = this->fields.field_datalist;
  if ( !field_datalist )
    sub_B170D4();
  if ( field_datalist->max_length <= index )
  {
    sub_B17100(this, *(_QWORD *)&index, method);
    sub_B170A0();
  }
  return field_datalist->m_Items[index];
}


System_String_o *__fastcall BattleData__getBattleFinishMovie(BattleData_o *this, const MethodInfo *method)
{
  QuestPhaseEntity_o *questphase_ent; // x0

  questphase_ent = this->fields.questphase_ent;
  if ( !questphase_ent )
    sub_B170D4();
  return QuestPhaseEntity__GetBattleFinishMovie(questphase_ent, 0LL);
}


BattleInfoData_o *__fastcall BattleData__getBattleInfo(BattleData_o *this, const MethodInfo *method)
{
  return this->fields.battle_info;
}


// local variable allocation has failed, the output may be wrong!
BgmEntity_o *__fastcall BattleData__getBgmMasterFromCostume(
        BattleData_o *this,
        int32_t uniqueID,
        const MethodInfo *method)
{
  __int64 v5; // x1
  __int64 v6; // x1
  __int64 v7; // x1
  __int64 v8; // x1
  BgmEntity_o *result; // x0
  BgmEntity_o *v10; // x19
  WebViewManager_o *Instance; // x0
  WarQuestSelectionMaster_o *MasterData_WarQuestSelectionMaster; // x0
  struct System_Collections_Generic_Dictionary_string__object__o *script; // x21
  __int64 v14; // x22
  ServantCostumeMaster_o *v15; // x20
  int32_t v16; // w0
  struct System_String_o *name; // x8
  int32_t v18; // w19
  int32_t v19; // w0
  bool v20; // w8
  bool v21; // w8
  WebViewManager_o *v22; // x0
  DataMasterBase_WarMaster__WarEntity__int__o *v23; // x0
  BgmEntity_o *v24; // [xsp+0h] [xbp-40h] BYREF
  int32_t param; // [xsp+Ch] [xbp-34h] BYREF
  ServantCostumeEntity_o *entity; // [xsp+18h] [xbp-28h] BYREF
  CodeStage_AntiCheat_ObscuredTypes_ObscuredInt_o v27; // 0:x0.16
  CodeStage_AntiCheat_ObscuredTypes_ObscuredInt_o v28; // 0:x0.16

  if ( (byte_40F6AC3 & 1) == 0 )
  {
    sub_B16FFC(&Method_DataManager_GetMasterData_BgmMaster___, *(_QWORD *)&uniqueID);
    sub_B16FFC(&Method_DataManager_GetMasterData_ServantCostumeMaster___, v5);
    sub_B16FFC(&Method_DataMasterBase_BgmMaster__BgmEntity__int__TryGetEntity__, v6);
    sub_B16FFC(&CodeStage_AntiCheat_ObscuredTypes_ObscuredInt_TypeInfo, v7);
    sub_B16FFC(&Method_SingletonMonoBehaviour_DataManager__get_Instance__, v8);
    byte_40F6AC3 = 1;
  }
  entity = 0LL;
  param = 0;
  v24 = 0LL;
  result = (BgmEntity_o *)BattleData__getPlayerServantData(this, uniqueID, method);
  if ( result )
  {
    v10 = result;
    Instance = SingletonMonoBehaviour_WebViewManager___get_Instance((const MethodInfo_2A54F38 *)Method_SingletonMonoBehaviour_DataManager__get_Instance__);
    if ( !Instance )
      goto LABEL_18;
    MasterData_WarQuestSelectionMaster = DataManager__GetMasterData_WarQuestSelectionMaster_(
                                           (DataManager_o *)Instance,
                                           (const MethodInfo_18C3284 *)Method_DataManager_GetMasterData_ServantCostumeMaster___);
    v14 = *(_QWORD *)&v10->fields.shopId;
    script = v10->fields.script;
    v15 = (ServantCostumeMaster_o *)MasterData_WarQuestSelectionMaster;
    if ( (BYTE3(CodeStage_AntiCheat_ObscuredTypes_ObscuredInt_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0
      && !CodeStage_AntiCheat_ObscuredTypes_ObscuredInt_TypeInfo->_2.cctor_finished )
    {
      j_il2cpp_runtime_class_init_0(CodeStage_AntiCheat_ObscuredTypes_ObscuredInt_TypeInfo);
    }
    *(_QWORD *)&v27.fields.currentCryptoKey = v14;
    *(_QWORD *)&v27.fields.fakeValue = script;
    v16 = CodeStage_AntiCheat_ObscuredTypes_ObscuredInt__op_Implicit_44068536(v27, 0LL);
    name = v10[1].fields.name;
    *(_QWORD *)&v28.fields.fakeValue = *(_QWORD *)&v10[1].fields.priority;
    v18 = v16;
    *(_QWORD *)&v28.fields.currentCryptoKey = name;
    v19 = CodeStage_AntiCheat_ObscuredTypes_ObscuredInt__op_Implicit_44068536(v28, 0LL);
    if ( !v15 )
      goto LABEL_18;
    v20 = ServantCostumeMaster__TryGetEntity(v15, &entity, v18, v19, 0LL);
    result = 0LL;
    if ( !v20 )
      return result;
    if ( !entity )
      goto LABEL_18;
    v21 = ServantCostumeEntity__checkBgmId(entity, &param, 0LL);
    result = 0LL;
    if ( !v21 )
      return result;
    v22 = SingletonMonoBehaviour_WebViewManager___get_Instance((const MethodInfo_2A54F38 *)Method_SingletonMonoBehaviour_DataManager__get_Instance__);
    if ( !v22
      || (v23 = (DataMasterBase_WarMaster__WarEntity__int__o *)DataManager__GetMasterData_WarQuestSelectionMaster_(
                                                                 (DataManager_o *)v22,
                                                                 (const MethodInfo_18C3284 *)Method_DataManager_GetMasterData_BgmMaster___)) == 0LL )
    {
LABEL_18:
      sub_B170D4();
    }
    if ( DataMasterBase_WarMaster__WarEntity__int___TryGetEntity(
           v23,
           (WarEntity_o **)&v24,
           param,
           (const MethodInfo_266F3E4 *)Method_DataMasterBase_BgmMaster__BgmEntity__int__TryGetEntity__) )
    {
      return v24;
    }
    else
    {
      return 0LL;
    }
  }
  return result;
}


// local variable allocation has failed, the output may be wrong!
BattleSkillInfoData_o *__fastcall BattleData__getBoostSkillInfo(
        BattleData_o *this,
        int32_t index,
        const MethodInfo *method)
{
  __int64 v3; // x3
  __int64 v4; // x4
  __int64 v7; // x1
  __int64 v8; // x1
  __int64 v9; // x1
  __int64 v10; // x1
  BattleData___c__DisplayClass347_0_o *v11; // x21
  __int64 v12; // x1
  __int64 v13; // x2
  __int64 v14; // x3
  __int64 v15; // x4
  struct System_Collections_Generic_List_BattleBoostItemInfoData__o *boostSkillInfo; // x19
  System_Predicate_peRenderTexture_ChangeLayerObject__o *v17; // x20

  if ( (byte_40F6A2F & 1) == 0 )
  {
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleBoostItemInfoData__Find__, *(_QWORD *)&index);
    sub_B16FFC(&Method_System_Predicate_BattleBoostItemInfoData___ctor__, v7);
    sub_B16FFC(&System_Predicate_BattleBoostItemInfoData__TypeInfo, v8);
    sub_B16FFC(&Method_BattleData___c__DisplayClass347_0__getBoostSkillInfo_b__0__, v9);
    sub_B16FFC(&BattleData___c__DisplayClass347_0_TypeInfo, v10);
    byte_40F6A2F = 1;
  }
  v11 = (BattleData___c__DisplayClass347_0_o *)sub_B170CC(
                                                 BattleData___c__DisplayClass347_0_TypeInfo,
                                                 *(_QWORD *)&index,
                                                 method,
                                                 v3,
                                                 v4);
  BattleData___c__DisplayClass347_0___ctor(v11, 0LL);
  if ( !v11
    || (v11->fields.index = index,
        boostSkillInfo = this->fields.boostSkillInfo,
        v17 = (System_Predicate_peRenderTexture_ChangeLayerObject__o *)sub_B170CC(
                                                                         System_Predicate_BattleBoostItemInfoData__TypeInfo,
                                                                         v12,
                                                                         v13,
                                                                         v14,
                                                                         v15),
        System_Predicate_peRenderTexture_ChangeLayerObject____ctor(
          v17,
          (Il2CppObject *)v11,
          Method_BattleData___c__DisplayClass347_0__getBoostSkillInfo_b__0__,
          (const MethodInfo_2B0B204 *)Method_System_Predicate_BattleBoostItemInfoData___ctor__),
        !boostSkillInfo) )
  {
    sub_B170D4();
  }
  return (BattleSkillInfoData_o *)System_Collections_Generic_List_peRenderTexture_ChangeLayerObject___Find(
                                    (System_Collections_Generic_List_peRenderTexture_ChangeLayerObject__o *)boostSkillInfo,
                                    (System_Predicate_T__o *)v17,
                                    (const MethodInfo_2F26598 *)Method_System_Collections_Generic_List_BattleBoostItemInfoData__Find__);
}


int64_t __fastcall BattleData__getBsate(BattleData_o *this, const MethodInfo *method)
{
  struct BattleEntity_o *battle_ent; // x8

  if ( !this->fields.endbattleFlg )
    return 0LL;
  battle_ent = this->fields.battle_ent;
  if ( !battle_ent )
    sub_B170D4();
  return battle_ent->fields.id ^ 0xFFFFFFFFFFED5CD0LL;
}


System_Int32_array *__fastcall BattleData__getCommandCriticals(BattleData_o *this, const MethodInfo *method)
{
  return this->fields.commandCriticalArray;
}


System_String_o *__fastcall BattleData__getCommandHistory(
        BattleData_o *this,
        System_Collections_Generic_List_BattleData_CommandHistory__o *commandHistoryList,
        const MethodInfo *method)
{
  __int64 v3; // x3
  __int64 v4; // x4
  __int64 v6; // x1
  __int64 v7; // x1
  __int64 v8; // x1
  __int64 v9; // x1
  System_Text_StringBuilder_o *v10; // x19
  Il2CppObject *current; // x21
  unsigned int klass_high; // w8
  System_Collections_Generic_List_Enumerator_T__o v14; // [xsp+8h] [xbp-58h] BYREF
  System_Collections_Generic_List_Enumerator_T__o v15; // [xsp+20h] [xbp-40h] BYREF

  if ( (byte_40F6A88 & 1) == 0 )
  {
    sub_B16FFC(
      &Method_System_Collections_Generic_List_Enumerator_BattleData_CommandHistory__Dispose__,
      commandHistoryList);
    sub_B16FFC(&Method_System_Collections_Generic_List_Enumerator_BattleData_CommandHistory__MoveNext__, v6);
    sub_B16FFC(&Method_System_Collections_Generic_List_Enumerator_BattleData_CommandHistory__get_Current__, v7);
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleData_CommandHistory__GetEnumerator__, v8);
    sub_B16FFC(&System_Text_StringBuilder_TypeInfo, v9);
    byte_40F6A88 = 1;
  }
  memset(&v15, 0, sizeof(v15));
  v10 = (System_Text_StringBuilder_o *)sub_B170CC(
                                         System_Text_StringBuilder_TypeInfo,
                                         commandHistoryList,
                                         method,
                                         v3,
                                         v4);
  System_Text_StringBuilder___ctor(v10, 0LL);
  if ( !commandHistoryList )
    goto LABEL_15;
  System_Collections_Generic_List_BattleLogicBuff_ReduceHpProcess_BuffInfo___GetEnumerator(
    &v14,
    (System_Collections_Generic_List_BattleLogicBuff_ReduceHpProcess_BuffInfo__o *)commandHistoryList,
    (const MethodInfo_2F26B54 *)Method_System_Collections_Generic_List_BattleData_CommandHistory__GetEnumerator__);
  v15 = v14;
  while ( System_Collections_Generic_List_Enumerator_BattleLogicBuff_ReduceHpProcess_BuffInfo___MoveNext(
            &v15,
            (const MethodInfo_2074054 *)Method_System_Collections_Generic_List_Enumerator_BattleData_CommandHistory__MoveNext__) )
  {
    current = v15.fields.current;
    if ( !v15.fields.current )
      sub_B170D4();
    if ( !v10 )
      sub_B170D4();
    System_Text_StringBuilder__Append_41917580(v10, (int32_t)v15.fields.current[1].klass, 0LL);
    klass_high = HIDWORD(current[1].klass);
    if ( klass_high <= 0x19 )
    {
      System_Text_StringBuilder__Append_41917484(v10, klass_high + 65, 0LL);
    }
    else
    {
      System_Text_StringBuilder__Append_41917484(v10, 0x28u, 0LL);
      System_Text_StringBuilder__Append_41917580(v10, HIDWORD(current[1].klass), 0LL);
      System_Text_StringBuilder__Append_41917484(v10, 0x29u, 0LL);
    }
  }
  System_Collections_Generic_List_Enumerator_BattleLogicBuff_ReduceHpProcess_BuffInfo___Dispose(
    &v15,
    (const MethodInfo_2074050 *)Method_System_Collections_Generic_List_Enumerator_BattleData_CommandHistory__Dispose__);
  if ( !v10 )
LABEL_15:
    sub_B170D4();
  return (System_String_o *)((__int64 (__fastcall *)(System_Text_StringBuilder_o *, Il2CppMethodPointer))v10->klass->vtable._3_ToString.method)(
                              v10,
                              v10->klass->vtable._4_System_Runtime_Serialization_ISerializable_GetObjectData.methodPtr);
}


int32_t __fastcall BattleData__getCommandSpellIdBattle(const MethodInfo *method)
{
  __int64 v1; // x1
  __int64 v2; // x1

  if ( (byte_40F6A7C & 1) == 0 )
  {
    sub_B16FFC(&EncryptedPlayerPrefs_TypeInfo, v1);
    sub_B16FFC(&StringLiteral_3244/*"COMMAND_SPELL_BATTLE_SAVEKEY"*/, v2);
    byte_40F6A7C = 1;
  }
  if ( (BYTE3(EncryptedPlayerPrefs_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0
    && !EncryptedPlayerPrefs_TypeInfo->_2.cctor_finished )
  {
    j_il2cpp_runtime_class_init_0(EncryptedPlayerPrefs_TypeInfo);
  }
  return EncryptedPlayerPrefs__GetInt_33186652((System_String_o *)StringLiteral_3244/*"COMMAND_SPELL_BATTLE_SAVEKEY"*/, 0, 0LL);
}


int32_t __fastcall BattleData__getContinueBattleFlg(const MethodInfo *method)
{
  __int64 v1; // x1
  __int64 v2; // x1

  if ( (byte_40F6A76 & 1) == 0 )
  {
    sub_B16FFC(&EncryptedPlayerPrefs_TypeInfo, v1);
    sub_B16FFC(&StringLiteral_3354/*"CONTINUE_BATTLE_SAVEKEY"*/, v2);
    byte_40F6A76 = 1;
  }
  if ( (BYTE3(EncryptedPlayerPrefs_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0
    && !EncryptedPlayerPrefs_TypeInfo->_2.cctor_finished )
  {
    j_il2cpp_runtime_class_init_0(EncryptedPlayerPrefs_TypeInfo);
  }
  return EncryptedPlayerPrefs__GetInt_33186652((System_String_o *)StringLiteral_3354/*"CONTINUE_BATTLE_SAVEKEY"*/, 0, 0LL);
}


int32_t __fastcall BattleData__getCriticalPoint(BattleData_o *this, const MethodInfo *method)
{
  return this->fields.criticalstars;
}


int32_t __fastcall BattleData__getDispWaveCount(BattleData_o *this, const MethodInfo *method)
{
  return this->fields.wavecount + 1;
}


BattleDropItem_array *__fastcall BattleData__getDropItems(BattleData_o *this, const MethodInfo *method)
{
  struct System_Collections_Generic_List_BattleDropItem__o *droplist; // x0

  if ( (byte_40F6A31 & 1) == 0 )
  {
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleDropItem__ToArray__, method);
    byte_40F6A31 = 1;
  }
  droplist = this->fields.droplist;
  if ( !droplist )
    sub_B170D4();
  return (BattleDropItem_array *)System_Collections_Generic_List_WarBoardUiData_SaveData___ToArray(
                                   (System_Collections_Generic_List_WarBoardUiData_SaveData__o *)droplist,
                                   (const MethodInfo_2F27E24 *)Method_System_Collections_Generic_List_BattleDropItem__ToArray__);
}


EnemyFieldStatus_o *__fastcall BattleData__getEnemyFieldStatus(BattleData_o *this, const MethodInfo *method)
{
  return this->fields.enemyFieldStatus;
}


int32_t __fastcall BattleData__getEnemyMasterCommandSpellCnt(BattleData_o *this, const MethodInfo *method)
{
  struct EnemyMstBattleEntity_o *enemyMasterInfo; // x8

  enemyMasterInfo = this->fields.enemyMasterInfo;
  if ( enemyMasterInfo )
    return enemyMasterInfo->fields.maxCommandSpell - this->fields.enemyMasterCommandSpellUseCnt;
  else
    return 0;
}


// local variable allocation has failed, the output may be wrong!
BattleServantData_o *__fastcall BattleData__getEnemyServantData(
        BattleData_o *this,
        int32_t Id,
        const MethodInfo *method)
{
  __int64 v5; // x1
  struct System_Collections_Generic_List_BattleServantData__o *enemy_datalist; // x23
  int size; // w22
  unsigned int v8; // w21
  BattleServantData_o *v9; // x0
  struct System_Collections_Generic_List_BattleServantData__o *v11; // x19

  if ( (byte_40F6A46 & 1) == 0 )
  {
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleServantData__get_Count__, *(_QWORD *)&Id);
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleServantData__get_Item__, v5);
    byte_40F6A46 = 1;
  }
  enemy_datalist = this->fields.enemy_datalist;
  if ( !enemy_datalist )
    goto LABEL_18;
  size = enemy_datalist->fields._size;
  if ( size < 1 )
    return 0LL;
  v8 = 0;
  while ( 1 )
  {
    if ( enemy_datalist->fields._size <= v8 )
      System_ThrowHelper__ThrowArgumentOutOfRangeException_41329284(0LL);
    v9 = enemy_datalist->fields._items->m_Items[v8];
    if ( !v9 )
      goto LABEL_18;
    if ( BattleServantData__checkID(v9, Id, 0LL) )
      break;
    if ( (int)++v8 >= size )
      return 0LL;
    enemy_datalist = this->fields.enemy_datalist;
    if ( !enemy_datalist )
      goto LABEL_18;
  }
  v11 = this->fields.enemy_datalist;
  if ( !v11 )
LABEL_18:
    sub_B170D4();
  if ( v11->fields._size <= v8 )
    System_ThrowHelper__ThrowArgumentOutOfRangeException_41329284(0LL);
  return v11->fields._items->m_Items[v8];
}


// local variable allocation has failed, the output may be wrong!
BattleServantData_o *__fastcall BattleData__getEnemyServantDataFromNpcId(
        BattleData_o *this,
        int32_t npcId,
        const MethodInfo *method)
{
  __int64 v5; // x1
  struct System_Collections_Generic_List_BattleServantData__o *enemy_datalist; // x23
  int size; // w22
  unsigned int v8; // w21
  BattleServantData_o *v9; // x8
  struct BattleDeckServantData_o *deckSvt; // x8
  struct System_Collections_Generic_List_BattleServantData__o *v11; // x24
  BattleServantData_o *v12; // x0
  struct System_Collections_Generic_List_BattleServantData__o *v14; // x19

  if ( (byte_40F6A48 & 1) == 0 )
  {
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleServantData__get_Count__, *(_QWORD *)&npcId);
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleServantData__get_Item__, v5);
    byte_40F6A48 = 1;
  }
  enemy_datalist = this->fields.enemy_datalist;
  if ( !enemy_datalist )
    goto LABEL_24;
  size = enemy_datalist->fields._size;
  if ( size < 1 )
    return 0LL;
  v8 = 0;
  while ( 1 )
  {
    if ( enemy_datalist->fields._size <= v8 )
      System_ThrowHelper__ThrowArgumentOutOfRangeException_41329284(0LL);
    v9 = enemy_datalist->fields._items->m_Items[v8];
    if ( !v9 )
      goto LABEL_24;
    deckSvt = v9->fields.deckSvt;
    if ( !deckSvt )
      goto LABEL_24;
    if ( deckSvt->fields.npcId == npcId )
    {
      v11 = this->fields.enemy_datalist;
      if ( !v11 )
        goto LABEL_24;
      if ( v11->fields._size <= v8 )
        System_ThrowHelper__ThrowArgumentOutOfRangeException_41329284(0LL);
      v12 = v11->fields._items->m_Items[v8];
      if ( !v12 )
        goto LABEL_24;
      if ( BattleServantData__isAlive(v12, 0, 0LL) )
        break;
    }
    if ( (int)++v8 >= size )
      return 0LL;
    enemy_datalist = this->fields.enemy_datalist;
    if ( !enemy_datalist )
      goto LABEL_24;
  }
  v14 = this->fields.enemy_datalist;
  if ( !v14 )
LABEL_24:
    sub_B170D4();
  if ( v14->fields._size <= v8 )
    System_ThrowHelper__ThrowArgumentOutOfRangeException_41329284(0LL);
  return v14->fields._items->m_Items[v8];
}


// local variable allocation has failed, the output may be wrong!
BattleServantData_o *__fastcall BattleData__getEnemyServantDataIndex(
        BattleData_o *this,
        int32_t index,
        const MethodInfo *method)
{
  struct System_Int32_array *e_entryid; // x8
  int32_t v4; // w1

  e_entryid = this->fields.e_entryid;
  if ( !e_entryid )
    sub_B170D4();
  if ( e_entryid->max_length <= index )
  {
    sub_B17100(this, *(_QWORD *)&index, method);
    sub_B170A0();
  }
  v4 = e_entryid->m_Items[index + 1];
  if ( v4 == -1 )
    return 0LL;
  else
    return BattleData__getServantData(this, v4, method);
}


// local variable allocation has failed, the output may be wrong!
System_Int32_array *__fastcall BattleData__getEnemyServantIDList(
        BattleData_o *this,
        bool ckDead,
        bool isTargetOnly,
        const MethodInfo *method)
{
  __int64 v4; // x4
  __int64 v8; // x1
  __int64 v9; // x1
  __int64 v10; // x1
  __int64 v11; // x1
  __int64 v12; // x1
  System_Collections_Generic_List_int__o *v14; // x21
  struct System_Collections_Generic_List_BattleServantData__o *enemy_datalist; // x22
  signed __int64 size; // x23
  unsigned __int64 v17; // x24
  __int64 v18; // x8
  __int64 v19; // x22

  if ( (byte_40F6A54 & 1) == 0 )
  {
    sub_B16FFC(&Method_System_Collections_Generic_List_int__Add__, ckDead);
    sub_B16FFC(&Method_System_Collections_Generic_List_int__ToArray__, v8);
    sub_B16FFC(&Method_System_Collections_Generic_List_int___ctor__, v9);
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleServantData__get_Count__, v10);
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleServantData__get_Item__, v11);
    sub_B16FFC(&System_Collections_Generic_List_int__TypeInfo, v12);
    byte_40F6A54 = 1;
  }
  if ( this->fields.isMultiTargetBattle && isTargetOnly )
    return BattleData__getTargetEnemyIdList(this, 1, (const MethodInfo *)isTargetOnly);
  v14 = (System_Collections_Generic_List_int__o *)sub_B170CC(
                                                    System_Collections_Generic_List_int__TypeInfo,
                                                    ckDead,
                                                    isTargetOnly,
                                                    method,
                                                    v4);
  System_Collections_Generic_List_int____ctor(
    v14,
    (const MethodInfo_2F0F794 *)Method_System_Collections_Generic_List_int___ctor__);
  enemy_datalist = this->fields.enemy_datalist;
  if ( !enemy_datalist )
    goto LABEL_18;
  size = enemy_datalist->fields._size;
  if ( (int)size >= 1 )
  {
    v17 = 0LL;
    while ( 1 )
    {
      if ( v17 >= (unsigned int)enemy_datalist->fields._size )
        System_ThrowHelper__ThrowArgumentOutOfRangeException_41329284(0LL);
      v18 = (__int64)enemy_datalist->fields._items + 8 * v17;
      v19 = *(_QWORD *)(v18 + 32);
      if ( v19 && (!ckDead || !BattleServantData__isDead(*(BattleServantData_o **)(v18 + 32), 0LL)) )
      {
        if ( !v14 )
          goto LABEL_18;
        System_Collections_Generic_List_int___Add(
          v14,
          *(_DWORD *)(v19 + 24),
          (const MethodInfo_2F104F0 *)Method_System_Collections_Generic_List_int__Add__);
      }
      if ( (__int64)++v17 >= size )
        break;
      enemy_datalist = this->fields.enemy_datalist;
      if ( !enemy_datalist )
        goto LABEL_18;
    }
  }
  if ( !v14 )
LABEL_18:
    sub_B170D4();
  return System_Collections_Generic_List_int___ToArray(
           v14,
           (const MethodInfo_2F125FC *)Method_System_Collections_Generic_List_int__ToArray__);
}


BattleServantData_array *__fastcall BattleData__getEnemyServantList(BattleData_o *this, const MethodInfo *method)
{
  struct System_Collections_Generic_List_BattleServantData__o *enemy_datalist; // x0

  if ( (byte_40F6A53 & 1) == 0 )
  {
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleServantData__ToArray__, method);
    byte_40F6A53 = 1;
  }
  enemy_datalist = this->fields.enemy_datalist;
  if ( !enemy_datalist )
    sub_B170D4();
  return (BattleServantData_array *)System_Collections_Generic_List_WarBoardUiData_SaveData___ToArray(
                                      (System_Collections_Generic_List_WarBoardUiData_SaveData__o *)enemy_datalist,
                                      (const MethodInfo_2F27E24 *)Method_System_Collections_Generic_List_BattleServantData__ToArray__);
}


BattleServantData_o *__fastcall BattleData__getEnemySubBackServantData(BattleData_o *this, const MethodInfo *method)
{
  __int64 v2; // x2
  __int64 v3; // x3
  __int64 v4; // x4
  __int64 v6; // x1
  __int64 v7; // x1
  __int64 v8; // x1
  __int64 v9; // x1
  __int64 v10; // x1
  __int64 v11; // x1
  struct System_Collections_Generic_List_BattleServantData__o *enemy_datalist; // x20
  BattleData___c_c *v13; // x0
  struct BattleData___c_StaticFields *static_fields; // x8
  System_Comparison_TitleInfoControl_EventEndTimeInfo__o *_9__424_0; // x21
  Il2CppObject *v16; // x22
  struct BattleData___c_StaticFields *v17; // x0
  struct System_Collections_Generic_List_BattleServantData__o *v18; // x21
  int v19; // w20
  BattleServantData_o *v20; // x8
  struct System_Collections_Generic_List_BattleServantData__o *v21; // x22
  BattleServantData_o *v22; // x0
  struct System_Collections_Generic_List_BattleServantData__o *v24; // x19

  if ( (byte_40F6A49 & 1) == 0 )
  {
    sub_B16FFC(&Method_System_Comparison_BattleServantData___ctor__, method);
    sub_B16FFC(&System_Comparison_BattleServantData__TypeInfo, v6);
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleServantData__Sort__, v7);
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleServantData__get_Count__, v8);
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleServantData__get_Item__, v9);
    sub_B16FFC(&Method_BattleData___c__getEnemySubBackServantData_b__424_0__, v10);
    sub_B16FFC(&BattleData___c_TypeInfo, v11);
    byte_40F6A49 = 1;
  }
  enemy_datalist = this->fields.enemy_datalist;
  v13 = BattleData___c_TypeInfo;
  if ( (BYTE3(BattleData___c_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0
    && !BattleData___c_TypeInfo->_2.cctor_finished )
  {
    j_il2cpp_runtime_class_init_0(BattleData___c_TypeInfo);
    v13 = BattleData___c_TypeInfo;
  }
  static_fields = v13->static_fields;
  _9__424_0 = (System_Comparison_TitleInfoControl_EventEndTimeInfo__o *)static_fields->__9__424_0;
  if ( !_9__424_0 )
  {
    if ( (BYTE3(v13->vtable._0_Equals.methodPtr) & 4) != 0 && !v13->_2.cctor_finished )
    {
      j_il2cpp_runtime_class_init_0(v13);
      static_fields = BattleData___c_TypeInfo->static_fields;
    }
    v16 = (Il2CppObject *)static_fields->__9;
    _9__424_0 = (System_Comparison_TitleInfoControl_EventEndTimeInfo__o *)sub_B170CC(
                                                                            System_Comparison_BattleServantData__TypeInfo,
                                                                            method,
                                                                            v2,
                                                                            v3,
                                                                            v4);
    System_Comparison_TitleInfoControl_EventEndTimeInfo____ctor(
      _9__424_0,
      v16,
      Method_BattleData___c__getEnemySubBackServantData_b__424_0__,
      (const MethodInfo_25BFD48 *)Method_System_Comparison_BattleServantData___ctor__);
    v17 = BattleData___c_TypeInfo->static_fields;
    v17->__9__424_0 = (struct System_Comparison_BattleServantData__o *)_9__424_0;
    sub_B16F98(&v17->__9__424_0, _9__424_0);
  }
  if ( !enemy_datalist )
    goto LABEL_31;
  System_Collections_Generic_List_TitleInfoControl_EventEndTimeInfo___Sort(
    (System_Collections_Generic_List_TitleInfoControl_EventEndTimeInfo__o *)enemy_datalist,
    (System_Comparison_T__o *)_9__424_0,
    (const MethodInfo_2F27DB4 *)Method_System_Collections_Generic_List_BattleServantData__Sort__);
  v18 = this->fields.enemy_datalist;
  if ( !v18 )
    goto LABEL_31;
  v19 = v18->fields._size - 1;
  if ( v19 < 0 )
    return 0LL;
  while ( 1 )
  {
    if ( v18->fields._size <= (unsigned int)v19 )
      System_ThrowHelper__ThrowArgumentOutOfRangeException_41329284(0LL);
    v20 = v18->fields._items->m_Items[v19];
    if ( !v20 )
      goto LABEL_31;
    if ( !v20->fields.isEntry )
    {
      v21 = this->fields.enemy_datalist;
      if ( !v21 )
        goto LABEL_31;
      if ( v21->fields._size <= (unsigned int)v19 )
        System_ThrowHelper__ThrowArgumentOutOfRangeException_41329284(0LL);
      v22 = v21->fields._items->m_Items[v19];
      if ( !v22 )
        goto LABEL_31;
      if ( BattleServantData__isAlive(v22, 0, 0LL) )
        break;
    }
    if ( --v19 < 0 )
      return 0LL;
    v18 = this->fields.enemy_datalist;
    if ( !v18 )
      goto LABEL_31;
  }
  v24 = this->fields.enemy_datalist;
  if ( !v24 )
LABEL_31:
    sub_B170D4();
  if ( v24->fields._size <= (unsigned int)v19 )
    System_ThrowHelper__ThrowArgumentOutOfRangeException_41329284(0LL);
  return v24->fields._items->m_Items[v19];
}


// local variable allocation has failed, the output may be wrong!
BattleServantData_o *__fastcall BattleData__getEnemySubServantData(
        BattleData_o *this,
        int32_t entryIndex,
        const MethodInfo *method)
{
  __int64 v5; // x1
  struct System_Collections_Generic_List_BattleServantData__o *enemy_datalist; // x23
  int size; // w22
  unsigned int v8; // w21
  BattleServantData_o *v9; // x8
  struct System_Collections_Generic_List_BattleServantData__o *v10; // x24
  BattleServantData_o *v11; // x0
  struct System_Collections_Generic_List_BattleServantData__o *v13; // x19

  if ( (byte_40F6A4A & 1) == 0 )
  {
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleServantData__get_Count__, *(_QWORD *)&entryIndex);
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleServantData__get_Item__, v5);
    byte_40F6A4A = 1;
  }
  enemy_datalist = this->fields.enemy_datalist;
  if ( !enemy_datalist )
    goto LABEL_23;
  size = enemy_datalist->fields._size;
  if ( size < 1 )
    return 0LL;
  v8 = 0;
  while ( 1 )
  {
    if ( enemy_datalist->fields._size <= v8 )
      System_ThrowHelper__ThrowArgumentOutOfRangeException_41329284(0LL);
    v9 = enemy_datalist->fields._items->m_Items[v8];
    if ( !v9 )
      goto LABEL_23;
    if ( !v9->fields.isEntry )
    {
      v10 = this->fields.enemy_datalist;
      if ( !v10 )
        goto LABEL_23;
      if ( v10->fields._size <= v8 )
        System_ThrowHelper__ThrowArgumentOutOfRangeException_41329284(0LL);
      v11 = v10->fields._items->m_Items[v8];
      if ( !v11 )
        goto LABEL_23;
      if ( BattleServantData__checkEntryIndex(v11, entryIndex, 0LL) )
        break;
    }
    if ( (int)++v8 >= size )
      return 0LL;
    enemy_datalist = this->fields.enemy_datalist;
    if ( !enemy_datalist )
      goto LABEL_23;
  }
  v13 = this->fields.enemy_datalist;
  if ( !v13 )
LABEL_23:
    sub_B170D4();
  if ( v13->fields._size <= v8 )
    System_ThrowHelper__ThrowArgumentOutOfRangeException_41329284(0LL);
  return v13->fields._items->m_Items[v8];
}


System_Int32_array *__fastcall BattleData__getEntryIdArray(BattleData_o *this, bool isEnemy, const MethodInfo *method)
{
  __int64 v3; // x8

  v3 = 288LL;
  if ( isEnemy )
    v3 = 296LL;
  return *(System_Int32_array **)((char *)&this->klass + v3);
}


// local variable allocation has failed, the output may be wrong!
int32_t __fastcall BattleData__getEventActivityPoint(
        BattleData_o *this,
        int32_t masterSkillId,
        const MethodInfo *method)
{
  __int64 v3; // x3
  __int64 v4; // x4
  __int64 v7; // x1
  __int64 v8; // x1
  __int64 v9; // x1
  __int64 v10; // x1
  __int64 v11; // x1
  __int64 v12; // x1
  System_Collections_Generic_Dictionary_int__int__o *eventPointActivityDict; // x0
  System_Collections_Generic_Dictionary_int__int__o **p_eventPointActivityDict; // x20
  System_Collections_Generic_Dictionary_int__int__o *v15; // x22
  WebViewManager_o *Instance; // x0
  EventPointActivityMaster_o *MasterData_WarQuestSelectionMaster; // x0
  struct BattleEntity_o *battle_ent; // x8
  EventPointActivityEntity_array *EntityList; // x0
  __int64 v20; // x1
  __int64 v21; // x2
  int max_length; // w8
  EventPointActivityEntity_array *v23; // x21
  unsigned int v24; // w22
  EventPointActivityEntity_o *v25; // x25

  if ( (byte_40F6A01 & 1) == 0 )
  {
    sub_B16FFC(&Method_DataManager_GetMasterData_EventPointActivityMaster___, *(_QWORD *)&masterSkillId);
    sub_B16FFC(&Method_System_Collections_Generic_Dictionary_int__int__Add__, v7);
    sub_B16FFC(&Method_System_Collections_Generic_Dictionary_int__int__ContainsKey__, v8);
    sub_B16FFC(&Method_System_Collections_Generic_Dictionary_int__int___ctor__, v9);
    sub_B16FFC(&Method_System_Collections_Generic_Dictionary_int__int__get_Item__, v10);
    sub_B16FFC(&System_Collections_Generic_Dictionary_int__int__TypeInfo, v11);
    sub_B16FFC(&Method_SingletonMonoBehaviour_DataManager__get_Instance__, v12);
    byte_40F6A01 = 1;
  }
  eventPointActivityDict = this->fields.eventPointActivityDict;
  p_eventPointActivityDict = &this->fields.eventPointActivityDict;
  if ( !eventPointActivityDict )
  {
    v15 = (System_Collections_Generic_Dictionary_int__int__o *)sub_B170CC(
                                                                 System_Collections_Generic_Dictionary_int__int__TypeInfo,
                                                                 *(_QWORD *)&masterSkillId,
                                                                 method,
                                                                 v3,
                                                                 v4);
    System_Collections_Generic_Dictionary_int__int____ctor(
      v15,
      (const MethodInfo_2DDC410 *)Method_System_Collections_Generic_Dictionary_int__int___ctor__);
    *p_eventPointActivityDict = v15;
    sub_B16F98(&this->fields.eventPointActivityDict, v15);
    Instance = SingletonMonoBehaviour_WebViewManager___get_Instance((const MethodInfo_2A54F38 *)Method_SingletonMonoBehaviour_DataManager__get_Instance__);
    if ( !Instance )
      goto LABEL_23;
    MasterData_WarQuestSelectionMaster = (EventPointActivityMaster_o *)DataManager__GetMasterData_WarQuestSelectionMaster_(
                                                                         (DataManager_o *)Instance,
                                                                         (const MethodInfo_18C3284 *)Method_DataManager_GetMasterData_EventPointActivityMaster___);
    battle_ent = this->fields.battle_ent;
    if ( !battle_ent )
      goto LABEL_23;
    if ( !MasterData_WarQuestSelectionMaster )
      goto LABEL_23;
    EntityList = EventPointActivityMaster__getEntityList(
                   MasterData_WarQuestSelectionMaster,
                   battle_ent->fields.eventId,
                   0LL);
    if ( !EntityList )
      goto LABEL_23;
    max_length = EntityList->max_length;
    v23 = EntityList;
    if ( max_length >= 1 )
    {
      v24 = 0;
      while ( 1 )
      {
        if ( v24 >= max_length )
        {
          sub_B17100(EntityList, v20, v21);
          sub_B170A0();
        }
        v25 = v23->m_Items[v24];
        if ( !v25 )
          break;
        if ( v25->fields.objectType == 2 )
        {
          if ( !*p_eventPointActivityDict )
            break;
          EntityList = (EventPointActivityEntity_array *)System_Collections_Generic_Dictionary_int__int___ContainsKey(
                                                           *p_eventPointActivityDict,
                                                           v25->fields.objectId,
                                                           (const MethodInfo_2DDD218 *)Method_System_Collections_Generic_Dictionary_int__int__ContainsKey__);
          if ( ((unsigned __int8)EntityList & 1) == 0 )
          {
            if ( !*p_eventPointActivityDict )
              break;
            System_Collections_Generic_Dictionary_int__int___Add(
              *p_eventPointActivityDict,
              v25->fields.objectId,
              v25->fields.point,
              (const MethodInfo_2DDCFB4 *)Method_System_Collections_Generic_Dictionary_int__int__Add__);
          }
        }
        max_length = v23->max_length;
        if ( (int)++v24 >= max_length )
          goto LABEL_18;
      }
LABEL_23:
      sub_B170D4();
    }
LABEL_18:
    eventPointActivityDict = *p_eventPointActivityDict;
    if ( !*p_eventPointActivityDict )
      goto LABEL_23;
  }
  if ( !System_Collections_Generic_Dictionary_int__int___ContainsKey(
          eventPointActivityDict,
          masterSkillId,
          (const MethodInfo_2DDD218 *)Method_System_Collections_Generic_Dictionary_int__int__ContainsKey__) )
    return 0;
  if ( !*p_eventPointActivityDict )
    goto LABEL_23;
  return System_Collections_Generic_Dictionary_int__int___get_Item(
           *p_eventPointActivityDict,
           masterSkillId,
           (const MethodInfo_2DDCEF4 *)Method_System_Collections_Generic_Dictionary_int__int__get_Item__);
}


System_Int32_array *__fastcall BattleData__getEventGroupIds(BattleData_o *this, const MethodInfo *method)
{
  QuestPhaseEntity_o *questphase_ent; // x0

  questphase_ent = this->fields.questphase_ent;
  if ( !questphase_ent )
    sub_B170D4();
  return QuestPhaseEntity__getEventGrounpIds(questphase_ent, 0LL);
}


// local variable allocation has failed, the output may be wrong!
BattleServantData_array *__fastcall BattleData__getFieldEnemyCheckDeadServantList(
        BattleData_o *this,
        bool checkDead,
        bool isTargetOnly,
        const MethodInfo *method)
{
  __int64 v4; // x4
  __int64 v8; // x1
  __int64 v9; // x1
  __int64 v10; // x1
  __int64 v11; // x1
  __int64 v12; // x1
  System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData__o *v14; // x20
  struct System_Collections_Generic_List_BattleServantData__o *enemy_datalist; // x24
  signed __int64 size; // x21
  unsigned __int64 v17; // x22
  BattleServantData_o *v18; // x1

  if ( (byte_40F6A4F & 1) == 0 )
  {
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleServantData__Add__, checkDead);
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleServantData__ToArray__, v8);
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleServantData___ctor__, v9);
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleServantData__get_Count__, v10);
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleServantData__get_Item__, v11);
    sub_B16FFC(&System_Collections_Generic_List_BattleServantData__TypeInfo, v12);
    byte_40F6A4F = 1;
  }
  if ( this->fields.isMultiTargetBattle && isTargetOnly )
    return BattleData__getTargetEnemy(this, checkDead, (const MethodInfo *)isTargetOnly);
  if ( checkDead )
    return BattleData__getFieldEnemyServantList(this, isTargetOnly, (const MethodInfo *)isTargetOnly);
  v14 = (System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData__o *)sub_B170CC(
                                                                                                  System_Collections_Generic_List_BattleServantData__TypeInfo,
                                                                                                  checkDead,
                                                                                                  isTargetOnly,
                                                                                                  method,
                                                                                                  v4);
  System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData____ctor(
    v14,
    (const MethodInfo_2F25014 *)Method_System_Collections_Generic_List_BattleServantData___ctor__);
  enemy_datalist = this->fields.enemy_datalist;
  if ( !enemy_datalist )
    goto LABEL_19;
  size = enemy_datalist->fields._size;
  if ( (int)size >= 1 )
  {
    v17 = 0LL;
    while ( 1 )
    {
      if ( v17 >= (unsigned int)enemy_datalist->fields._size )
        System_ThrowHelper__ThrowArgumentOutOfRangeException_41329284(0LL);
      v18 = enemy_datalist->fields._items->m_Items[v17];
      if ( v18 && v18->fields.isEntry )
      {
        if ( !v14 )
          goto LABEL_19;
        System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData___Add(
          v14,
          (EventMissionProgressRequest_Argument_ProgressData_o *)v18,
          (const MethodInfo_2F25CD8 *)Method_System_Collections_Generic_List_BattleServantData__Add__);
      }
      if ( (__int64)++v17 >= size )
        break;
      enemy_datalist = this->fields.enemy_datalist;
      if ( !enemy_datalist )
        goto LABEL_19;
    }
  }
  if ( !v14 )
LABEL_19:
    sub_B170D4();
  return (BattleServantData_array *)System_Collections_Generic_List_WarBoardUiData_SaveData___ToArray(
                                      (System_Collections_Generic_List_WarBoardUiData_SaveData__o *)v14,
                                      (const MethodInfo_2F27E24 *)Method_System_Collections_Generic_List_BattleServantData__ToArray__);
}


// local variable allocation has failed, the output may be wrong!
System_Int32_array *__fastcall BattleData__getFieldEnemyServantIDList(
        BattleData_o *this,
        bool isTargetOnly,
        const MethodInfo *method)
{
  __int64 v3; // x3
  __int64 v4; // x4
  __int64 v7; // x1
  __int64 v8; // x1
  __int64 v9; // x1
  System_Collections_Generic_List_int__o *v11; // x19
  __int64 v12; // x0
  __int64 v13; // x1
  __int64 v14; // x2
  struct System_Int32_array *e_entryid; // x20
  __int64 v16; // x8
  unsigned __int64 v17; // x21

  if ( (byte_40F6A51 & 1) == 0 )
  {
    sub_B16FFC(&Method_System_Collections_Generic_List_int__Add__, isTargetOnly);
    sub_B16FFC(&Method_System_Collections_Generic_List_int__ToArray__, v7);
    sub_B16FFC(&Method_System_Collections_Generic_List_int___ctor__, v8);
    sub_B16FFC(&System_Collections_Generic_List_int__TypeInfo, v9);
    byte_40F6A51 = 1;
  }
  if ( this->fields.isMultiTargetBattle && isTargetOnly )
    return BattleData__getTargetEnemyIdList(this, 0, method);
  v11 = (System_Collections_Generic_List_int__o *)sub_B170CC(
                                                    System_Collections_Generic_List_int__TypeInfo,
                                                    isTargetOnly,
                                                    method,
                                                    v3,
                                                    v4);
  System_Collections_Generic_List_int____ctor(
    v11,
    (const MethodInfo_2F0F794 *)Method_System_Collections_Generic_List_int___ctor__);
  e_entryid = this->fields.e_entryid;
  if ( !e_entryid )
    goto LABEL_17;
  v16 = *(_QWORD *)&e_entryid->max_length;
  if ( (int)v16 >= 1 )
  {
    v17 = 0LL;
    do
    {
      if ( v17 >= (unsigned int)v16 )
      {
        sub_B17100(v12, v13, v14);
        sub_B170A0();
      }
      v13 = (unsigned int)e_entryid->m_Items[v17 + 1];
      if ( (int)v13 >= 1 )
      {
        if ( !v11 )
          goto LABEL_17;
        System_Collections_Generic_List_int___Add(
          v11,
          v13,
          (const MethodInfo_2F104F0 *)Method_System_Collections_Generic_List_int__Add__);
      }
      LODWORD(v16) = e_entryid->max_length;
      ++v17;
    }
    while ( (__int64)v17 < (int)v16 );
  }
  if ( !v11 )
LABEL_17:
    sub_B170D4();
  return System_Collections_Generic_List_int___ToArray(
           v11,
           (const MethodInfo_2F125FC *)Method_System_Collections_Generic_List_int__ToArray__);
}


// local variable allocation has failed, the output may be wrong!
BattleServantData_array *__fastcall BattleData__getFieldEnemyServantList(
        BattleData_o *this,
        bool isTargetOnly,
        const MethodInfo *method)
{
  __int64 v3; // x3
  __int64 v4; // x4
  __int64 v7; // x1
  __int64 v8; // x1
  __int64 v9; // x1
  __int64 v10; // x1
  __int64 v11; // x1
  System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData__o *v13; // x20
  _BOOL8 v14; // x0
  __int64 v15; // x1
  __int64 v16; // x2
  struct System_Int32_array *e_entryid; // x22
  __int64 v18; // x8
  unsigned __int64 v19; // x23
  int32_t v20; // w21
  struct System_Collections_Generic_List_BattleServantData__o *enemy_datalist; // x28
  int size; // w25
  int v23; // w26
  unsigned int v24; // w27
  BattleServantData_o *v25; // x0
  struct System_Collections_Generic_List_BattleServantData__o *v26; // x28

  if ( (byte_40F6A4E & 1) == 0 )
  {
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleServantData__Add__, isTargetOnly);
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleServantData__ToArray__, v7);
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleServantData___ctor__, v8);
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleServantData__get_Count__, v9);
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleServantData__get_Item__, v10);
    sub_B16FFC(&System_Collections_Generic_List_BattleServantData__TypeInfo, v11);
    byte_40F6A4E = 1;
  }
  if ( this->fields.isMultiTargetBattle && isTargetOnly )
    return BattleData__getTargetEnemy(this, 0, method);
  v13 = (System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData__o *)sub_B170CC(
                                                                                                  System_Collections_Generic_List_BattleServantData__TypeInfo,
                                                                                                  isTargetOnly,
                                                                                                  method,
                                                                                                  v3,
                                                                                                  v4);
  System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData____ctor(
    v13,
    (const MethodInfo_2F25014 *)Method_System_Collections_Generic_List_BattleServantData___ctor__);
  e_entryid = this->fields.e_entryid;
  if ( !e_entryid )
LABEL_29:
    sub_B170D4();
  v18 = *(_QWORD *)&e_entryid->max_length;
  if ( (int)v18 >= 1 )
  {
    v19 = 0LL;
    while ( 1 )
    {
      if ( v19 >= (unsigned int)v18 )
      {
        sub_B17100(v14, v15, v16);
        sub_B170A0();
      }
      v20 = e_entryid->m_Items[v19 + 1];
      if ( v20 >= 1 )
      {
        enemy_datalist = this->fields.enemy_datalist;
        if ( !enemy_datalist )
          goto LABEL_29;
        size = enemy_datalist->fields._size;
        if ( size >= 1 )
          break;
      }
LABEL_26:
      LODWORD(v18) = e_entryid->max_length;
      if ( (__int64)++v19 >= (int)v18 )
        goto LABEL_27;
    }
    v23 = 1;
    do
    {
      v24 = v23 - 1;
      if ( enemy_datalist->fields._size <= (unsigned int)(v23 - 1) )
        System_ThrowHelper__ThrowArgumentOutOfRangeException_41329284(0LL);
      v25 = enemy_datalist->fields._items->m_Items[v24];
      if ( !v25 )
        break;
      v14 = BattleServantData__checkID(v25, v20, 0LL);
      if ( v14 )
      {
        v26 = this->fields.enemy_datalist;
        if ( !v26 )
          goto LABEL_29;
        if ( v26->fields._size <= v24 )
          System_ThrowHelper__ThrowArgumentOutOfRangeException_41329284(0LL);
        if ( !v13 )
          goto LABEL_29;
        System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData___Add(
          v13,
          (EventMissionProgressRequest_Argument_ProgressData_o *)v26->fields._items->m_Items[v24],
          (const MethodInfo_2F25CD8 *)Method_System_Collections_Generic_List_BattleServantData__Add__);
      }
      if ( v23 >= size )
        goto LABEL_26;
      enemy_datalist = this->fields.enemy_datalist;
      ++v23;
    }
    while ( enemy_datalist );
    goto LABEL_29;
  }
LABEL_27:
  if ( !v13 )
    goto LABEL_29;
  return (BattleServantData_array *)System_Collections_Generic_List_WarBoardUiData_SaveData___ToArray(
                                      (System_Collections_Generic_List_WarBoardUiData_SaveData__o *)v13,
                                      (const MethodInfo_2F27E24 *)Method_System_Collections_Generic_List_BattleServantData__ToArray__);
}


// local variable allocation has failed, the output may be wrong!
BattleServantData_array *__fastcall BattleData__getFieldOpponentList(
        BattleData_o *this,
        int32_t uniqueId,
        bool isTargetOnly,
        const MethodInfo *method)
{
  const MethodInfo *v6; // x1
  const MethodInfo *v7; // x2

  if ( BattleData__getEnemyServantData(this, uniqueId, (const MethodInfo *)isTargetOnly) )
    return BattleData__getFieldPlayerServantList(this, v6);
  else
    return BattleData__getFieldEnemyServantList(this, isTargetOnly, v7);
}


// local variable allocation has failed, the output may be wrong!
BattleServantData_array *__fastcall BattleData__getFieldPTList(
        BattleData_o *this,
        int32_t uniqueId,
        bool isTargetOnly,
        const MethodInfo *method)
{
  const MethodInfo *v6; // x1
  const MethodInfo *v7; // x2

  if ( BattleData__getEnemyServantData(this, uniqueId, (const MethodInfo *)isTargetOnly) )
    return BattleData__getFieldEnemyServantList(this, isTargetOnly, v7);
  else
    return BattleData__getFieldPlayerServantList(this, v6);
}


System_Int32_array *__fastcall BattleData__getFieldPlayerServantIDList(
        BattleData_o *this,
        System_Int32_array *addIds,
        const MethodInfo *method)
{
  __int64 v3; // x3
  __int64 v4; // x4
  __int64 v7; // x1
  __int64 v8; // x1
  __int64 v9; // x1
  __int64 v10; // x1
  __int64 v11; // x1
  __int64 v12; // x1
  __int64 v13; // x1
  __int64 v14; // x1
  __int64 v15; // x1
  BattleData___c__DisplayClass446_0_o *v16; // x21
  __int64 v17; // x1
  __int64 v18; // x2
  __int64 v19; // x3
  __int64 v20; // x4
  System_Collections_Generic_List_int__o *v21; // x23
  System_Collections_Generic_List_int__o **p_result; // x20
  __int64 v23; // x0
  __int64 v24; // x1
  __int64 v25; // x2
  __int64 v26; // x3
  __int64 v27; // x4
  struct System_Int32_array *p_entryid; // x22
  __int64 v29; // x8
  unsigned __int64 v30; // x23
  System_Collections_Generic_List_int__o *v31; // x22
  System_Func_int__bool__o *v32; // x23
  System_Collections_Generic_IEnumerable_T__o *v33; // x0

  if ( (byte_40F6A5C & 1) == 0 )
  {
    sub_B16FFC(&Method_System_Linq_Enumerable_Where_int___, addIds);
    sub_B16FFC(&Method_System_Func_int__bool___ctor__, v7);
    sub_B16FFC(&System_Func_int__bool__TypeInfo, v8);
    sub_B16FFC(&Method_System_Collections_Generic_List_int__AddRange__, v9);
    sub_B16FFC(&Method_System_Collections_Generic_List_int__Add__, v10);
    sub_B16FFC(&Method_System_Collections_Generic_List_int__ToArray__, v11);
    sub_B16FFC(&Method_System_Collections_Generic_List_int___ctor__, v12);
    sub_B16FFC(&System_Collections_Generic_List_int__TypeInfo, v13);
    sub_B16FFC(&Method_BattleData___c__DisplayClass446_0__getFieldPlayerServantIDList_b__0__, v14);
    sub_B16FFC(&BattleData___c__DisplayClass446_0_TypeInfo, v15);
    byte_40F6A5C = 1;
  }
  v16 = (BattleData___c__DisplayClass446_0_o *)sub_B170CC(
                                                 BattleData___c__DisplayClass446_0_TypeInfo,
                                                 addIds,
                                                 method,
                                                 v3,
                                                 v4);
  BattleData___c__DisplayClass446_0___ctor(v16, 0LL);
  v21 = (System_Collections_Generic_List_int__o *)sub_B170CC(
                                                    System_Collections_Generic_List_int__TypeInfo,
                                                    v17,
                                                    v18,
                                                    v19,
                                                    v20);
  System_Collections_Generic_List_int____ctor(
    v21,
    (const MethodInfo_2F0F794 *)Method_System_Collections_Generic_List_int___ctor__);
  if ( !v16 )
    goto LABEL_18;
  v16->fields.result = v21;
  p_result = &v16->fields.result;
  v23 = sub_B16F98(&v16->fields, v21);
  p_entryid = this->fields.p_entryid;
  if ( !p_entryid )
    goto LABEL_18;
  v29 = *(_QWORD *)&p_entryid->max_length;
  if ( (int)v29 >= 1 )
  {
    v30 = 0LL;
    do
    {
      if ( v30 >= (unsigned int)v29 )
      {
        sub_B17100(v23, v24, v25);
        sub_B170A0();
      }
      v24 = (unsigned int)p_entryid->m_Items[v30 + 1];
      if ( (int)v24 >= 1 )
      {
        if ( !*p_result )
          goto LABEL_18;
        System_Collections_Generic_List_int___Add(
          *p_result,
          v24,
          (const MethodInfo_2F104F0 *)Method_System_Collections_Generic_List_int__Add__);
      }
      LODWORD(v29) = p_entryid->max_length;
      ++v30;
    }
    while ( (__int64)v30 < (int)v29 );
  }
  if ( addIds )
  {
    v31 = v16->fields.result;
    v32 = (System_Func_int__bool__o *)sub_B170CC(System_Func_int__bool__TypeInfo, v24, v25, v26, v27);
    System_Func_int__bool____ctor(
      v32,
      (Il2CppObject *)v16,
      Method_BattleData___c__DisplayClass446_0__getFieldPlayerServantIDList_b__0__,
      (const MethodInfo_2B6586C *)Method_System_Func_int__bool___ctor__);
    v33 = (System_Collections_Generic_IEnumerable_T__o *)System_Linq_Enumerable__Where_int_(
                                                           (System_Collections_Generic_IEnumerable_TSource__o *)addIds,
                                                           (System_Func_TSource__bool__o *)v32,
                                                           (const MethodInfo_19C8D54 *)Method_System_Linq_Enumerable_Where_int___);
    if ( !v31 )
      goto LABEL_18;
    System_Collections_Generic_List_int___AddRange(
      v31,
      v33,
      (const MethodInfo_2F10744 *)Method_System_Collections_Generic_List_int__AddRange__);
  }
  if ( !*p_result )
LABEL_18:
    sub_B170D4();
  return System_Collections_Generic_List_int___ToArray(
           *p_result,
           (const MethodInfo_2F125FC *)Method_System_Collections_Generic_List_int__ToArray__);
}


BattleServantData_array *__fastcall BattleData__getFieldPlayerServantList(BattleData_o *this, const MethodInfo *method)
{
  __int64 v2; // x2
  __int64 v3; // x3
  __int64 v4; // x4
  __int64 v6; // x1
  __int64 v7; // x1
  __int64 v8; // x1
  __int64 v9; // x1
  __int64 v10; // x1
  System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData__o *v11; // x20
  _BOOL8 v12; // x0
  __int64 v13; // x1
  __int64 v14; // x2
  struct System_Collections_Generic_List_BattleServantData__o *player_datalist; // x8
  struct System_Int32_array *p_entryid; // x22
  int size; // w24
  unsigned __int64 v18; // x23
  il2cpp_array_size_t max_length; // w8
  int32_t v20; // w21
  __int64 v21; // x26
  struct System_Collections_Generic_List_BattleServantData__o *v22; // x28
  BattleServantData_o *v23; // x0
  struct System_Collections_Generic_List_BattleServantData__o *v24; // x28

  if ( (byte_40F6A57 & 1) == 0 )
  {
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleServantData__Add__, method);
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleServantData__ToArray__, v6);
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleServantData___ctor__, v7);
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleServantData__get_Count__, v8);
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleServantData__get_Item__, v9);
    sub_B16FFC(&System_Collections_Generic_List_BattleServantData__TypeInfo, v10);
    byte_40F6A57 = 1;
  }
  v11 = (System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData__o *)sub_B170CC(
                                                                                                  System_Collections_Generic_List_BattleServantData__TypeInfo,
                                                                                                  method,
                                                                                                  v2,
                                                                                                  v3,
                                                                                                  v4);
  System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData____ctor(
    v11,
    (const MethodInfo_2F25014 *)Method_System_Collections_Generic_List_BattleServantData___ctor__);
  player_datalist = this->fields.player_datalist;
  if ( !player_datalist )
    goto LABEL_25;
  p_entryid = this->fields.p_entryid;
  if ( !p_entryid )
    goto LABEL_25;
  if ( (int)*(_QWORD *)&p_entryid->max_length >= 1 )
  {
    size = player_datalist->fields._size;
    v18 = 0LL;
    max_length = *(_QWORD *)&p_entryid->max_length;
    while ( 1 )
    {
      if ( v18 >= max_length )
      {
        sub_B17100(v12, v13, v14);
        sub_B170A0();
      }
      v20 = p_entryid->m_Items[v18 + 1];
      if ( v20 >= 1 && size >= 1 )
        break;
LABEL_22:
      max_length = p_entryid->max_length;
      if ( (__int64)++v18 >= (int)max_length )
        goto LABEL_23;
    }
    v21 = 4LL;
    while ( 1 )
    {
      v22 = this->fields.player_datalist;
      if ( !v22 )
        break;
      if ( v22->fields._size <= (unsigned int)(v21 - 4) )
        System_ThrowHelper__ThrowArgumentOutOfRangeException_41329284(0LL);
      v23 = (BattleServantData_o *)*((_QWORD *)&v22->fields._items->obj.klass + v21);
      if ( !v23 )
        break;
      v12 = BattleServantData__checkID(v23, v20, 0LL);
      if ( v12 )
      {
        v24 = this->fields.player_datalist;
        if ( !v24 )
          break;
        if ( v24->fields._size <= (unsigned int)(v21 - 4) )
          System_ThrowHelper__ThrowArgumentOutOfRangeException_41329284(0LL);
        if ( !v11 )
          break;
        System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData___Add(
          v11,
          *((EventMissionProgressRequest_Argument_ProgressData_o **)&v24->fields._items->obj.klass + v21),
          (const MethodInfo_2F25CD8 *)Method_System_Collections_Generic_List_BattleServantData__Add__);
      }
      if ( (int)++v21 - 4 >= size )
        goto LABEL_22;
    }
LABEL_25:
    sub_B170D4();
  }
LABEL_23:
  if ( !v11 )
    goto LABEL_25;
  return (BattleServantData_array *)System_Collections_Generic_List_WarBoardUiData_SaveData___ToArray(
                                      (System_Collections_Generic_List_WarBoardUiData_SaveData__o *)v11,
                                      (const MethodInfo_2F27E24 *)Method_System_Collections_Generic_List_BattleServantData__ToArray__);
}


// local variable allocation has failed, the output may be wrong!
BattleServantData_array *__fastcall BattleData__getFieldServantList(
        BattleData_o *this,
        bool isTargetOnly,
        const MethodInfo *method)
{
  __int64 v3; // x3
  __int64 v4; // x4
  __int64 v7; // x1
  __int64 v8; // x1
  __int64 v9; // x1
  System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData__o *v10; // x21
  const MethodInfo *v11; // x2
  System_Collections_Generic_IEnumerable_T__o *FieldEnemyServantList; // x0
  const MethodInfo *v13; // x1
  System_Collections_Generic_IEnumerable_T__o *FieldPlayerServantList; // x0

  if ( (byte_40F6A61 & 1) == 0 )
  {
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleServantData__AddRange__, isTargetOnly);
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleServantData__ToArray__, v7);
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleServantData___ctor__, v8);
    sub_B16FFC(&System_Collections_Generic_List_BattleServantData__TypeInfo, v9);
    byte_40F6A61 = 1;
  }
  v10 = (System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData__o *)sub_B170CC(
                                                                                                  System_Collections_Generic_List_BattleServantData__TypeInfo,
                                                                                                  isTargetOnly,
                                                                                                  method,
                                                                                                  v3,
                                                                                                  v4);
  System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData____ctor(
    v10,
    (const MethodInfo_2F25014 *)Method_System_Collections_Generic_List_BattleServantData___ctor__);
  FieldEnemyServantList = (System_Collections_Generic_IEnumerable_T__o *)BattleData__getFieldEnemyServantList(
                                                                           this,
                                                                           isTargetOnly,
                                                                           v11);
  if ( !v10 )
    sub_B170D4();
  System_Collections_Generic_List_TimeZoneInfo_AdjustmentRule___AddRange(
    (System_Collections_Generic_List_TimeZoneInfo_AdjustmentRule__o *)v10,
    FieldEnemyServantList,
    (const MethodInfo_2F25F28 *)Method_System_Collections_Generic_List_BattleServantData__AddRange__);
  FieldPlayerServantList = (System_Collections_Generic_IEnumerable_T__o *)BattleData__getFieldPlayerServantList(
                                                                            this,
                                                                            v13);
  System_Collections_Generic_List_TimeZoneInfo_AdjustmentRule___AddRange(
    (System_Collections_Generic_List_TimeZoneInfo_AdjustmentRule__o *)v10,
    FieldPlayerServantList,
    (const MethodInfo_2F25F28 *)Method_System_Collections_Generic_List_BattleServantData__AddRange__);
  return (BattleServantData_array *)System_Collections_Generic_List_WarBoardUiData_SaveData___ToArray(
                                      (System_Collections_Generic_List_WarBoardUiData_SaveData__o *)v10,
                                      (const MethodInfo_2F27E24 *)Method_System_Collections_Generic_List_BattleServantData__ToArray__);
}


// local variable allocation has failed, the output may be wrong!
int32_t __fastcall BattleData__getFieldSpace(
        BattleData_o *this,
        int32_t actId,
        int32_t *targetIndex,
        bool forciblySelectEnemy,
        const MethodInfo *method)
{
  __int64 v9; // x1
  __int64 v10; // x1
  struct System_Int32_array *p_entryid; // x26
  struct System_Boolean_array *enemyAppearValid; // x22
  System_Int32_array *RandomEntryOrderDecidedArray; // x0
  __int64 v14; // x1
  const MethodInfo *v15; // x2
  struct System_Int32_array *v16; // x8
  System_Collections_Generic_IEnumerable_TSource__o *v17; // x0
  System_Int32_array *v18; // x23
  int max_length; // w8
  unsigned int v20; // w27
  int32_t v21; // w24
  int32_t v22; // w28
  BattleData_o *data; // x0
  BattleServantData_o *ServantData; // x0
  BattleServantData_o *v25; // x25
  System_RuntimeFieldHandle_o v27; // 0:w1.4

  if ( (byte_40F6AAF & 1) == 0 )
  {
    sub_B16FFC(&bool___TypeInfo, *(_QWORD *)&actId);
    sub_B16FFC(&Method_System_Linq_Enumerable_ToArray_int___, v9);
    sub_B16FFC(
      &Field__PrivateImplementationDetails__75C8FD04AD916AEC3E3D5CB76A452B116B3D4D0912A0A485E9FB8E3D240E210C,
      v10);
    byte_40F6AAF = 1;
  }
  *targetIndex = -1;
  if ( !forciblySelectEnemy
    && (actId == -1 || BattleData__getPlayerServantData(this, actId, (const MethodInfo *)targetIndex)) )
  {
    p_entryid = this->fields.p_entryid;
    enemyAppearValid = (struct System_Boolean_array *)sub_B17014(bool___TypeInfo, 3LL, targetIndex);
    v27.fields.value = Field__PrivateImplementationDetails__75C8FD04AD916AEC3E3D5CB76A452B116B3D4D0912A0A485E9FB8E3D240E210C;
    System_Runtime_CompilerServices_RuntimeHelpers__InitializeArray_42629164(
      (System_Array_o *)enemyAppearValid,
      v27,
      0LL);
    v16 = this->fields.p_entryid;
    if ( !v16 )
      goto LABEL_33;
    v17 = (System_Collections_Generic_IEnumerable_TSource__o *)System_Linq_Enumerable__Range(0, v16->max_length, 0LL);
    RandomEntryOrderDecidedArray = System_Linq_Enumerable__ToArray_int_(
                                     v17,
                                     (const MethodInfo_19C4A28 *)Method_System_Linq_Enumerable_ToArray_int___);
  }
  else
  {
    p_entryid = this->fields.e_entryid;
    enemyAppearValid = this->fields.enemyAppearValid;
    RandomEntryOrderDecidedArray = RestockServantLogic__GetRandomEntryOrderDecidedArray(
                                     this->fields._EnemyAddOrderPosArray_k__BackingField,
                                     this,
                                     0LL);
  }
  v18 = RandomEntryOrderDecidedArray;
  if ( !RandomEntryOrderDecidedArray )
LABEL_33:
    sub_B170D4();
  max_length = RandomEntryOrderDecidedArray->max_length;
  if ( max_length >= 1 )
  {
    v20 = 0;
    v21 = 0;
    while ( 1 )
    {
      if ( v20 >= max_length )
        goto LABEL_32;
      if ( !p_entryid )
        goto LABEL_33;
      v22 = v18->m_Items[v20 + 1];
      if ( v22 >= p_entryid->max_length )
        goto LABEL_32;
      if ( !enemyAppearValid )
        goto LABEL_33;
      if ( v22 >= enemyAppearValid->max_length )
      {
LABEL_32:
        sub_B17100(RandomEntryOrderDecidedArray, v14, v15);
        sub_B170A0();
      }
      v14 = (unsigned int)p_entryid->m_Items[v22 + 1];
      if ( (_DWORD)v14 == -1 )
      {
        if ( enemyAppearValid->m_Items[v22 + 4] )
          goto LABEL_25;
      }
      else if ( (_DWORD)v14 != actId )
      {
        data = this->fields.data;
        if ( !data )
          goto LABEL_33;
        ServantData = BattleData__getServantData(data, v14, v15);
        if ( !ServantData )
          goto LABEL_33;
        v25 = ServantData;
        RandomEntryOrderDecidedArray = (System_Int32_array *)BattleServantData__isAlive(ServantData, 0, 0LL);
        if ( ((unsigned __int8)RandomEntryOrderDecidedArray & 1) == 0 && v25->fields.isDeadAnime )
        {
LABEL_25:
          if ( *targetIndex == -1 )
            *targetIndex = v22;
          ++v21;
        }
      }
      max_length = v18->max_length;
      if ( (int)++v20 >= max_length )
        return v21;
    }
  }
  return 0;
}


int32_t __fastcall BattleData__getGroundNo(BattleData_o *this, const MethodInfo *method)
{
  __int64 v3; // x1
  WebViewManager_o *Instance; // x0
  QuestBehaviorMaster_o *MasterData_WarQuestSelectionMaster; // x0
  struct QuestPhaseEntity_o *questphase_ent; // x8
  int32_t battleBgId; // w3

  if ( (byte_40F6A17 & 1) == 0 )
  {
    sub_B16FFC(&Method_DataManager_GetMasterData_QuestBehaviorMaster___, method);
    sub_B16FFC(&Method_SingletonMonoBehaviour_DataManager__get_Instance__, v3);
    byte_40F6A17 = 1;
  }
  if ( !this->fields.questphase_ent )
    return 80200;
  Instance = SingletonMonoBehaviour_WebViewManager___get_Instance((const MethodInfo_2A54F38 *)Method_SingletonMonoBehaviour_DataManager__get_Instance__);
  if ( !Instance
    || (MasterData_WarQuestSelectionMaster = (QuestBehaviorMaster_o *)DataManager__GetMasterData_WarQuestSelectionMaster_(
                                                                        (DataManager_o *)Instance,
                                                                        (const MethodInfo_18C3284 *)Method_DataManager_GetMasterData_QuestBehaviorMaster___),
        (questphase_ent = this->fields.questphase_ent) == 0LL) )
  {
    sub_B170D4();
  }
  battleBgId = questphase_ent->fields.battleBgId;
  if ( MasterData_WarQuestSelectionMaster )
    return QuestBehaviorMaster__getBattleBg(
             MasterData_WarQuestSelectionMaster,
             questphase_ent->fields.questId,
             questphase_ent->fields.phase,
             battleBgId,
             0LL);
  return battleBgId;
}


UnityEngine_Color_o __fastcall BattleData__getGroundShadowColor(BattleData_o *this, const MethodInfo *method)
{
  float v2; // s0
  float v3; // s1
  float v4; // s2
  float v5; // s3
  UnityEngine_Color_o result; // 0:s0.4,4:s1.4,8:s2.4,12:s3.4

  UnityEngine_Color__get_black(0LL);
  v2 = 1.0;
  v3 = 1.0;
  v4 = 1.0;
  v5 = 1.0;
  result.fields.a = v5;
  result.fields.b = v4;
  result.fields.g = v3;
  result.fields.r = v2;
  return result;
}


int32_t __fastcall BattleData__getGroundType(BattleData_o *this, const MethodInfo *method)
{
  struct QuestPhaseEntity_o *questphase_ent; // x8

  questphase_ent = this->fields.questphase_ent;
  if ( !questphase_ent )
    sub_B170D4();
  return questphase_ent->fields.battleBgType;
}


int32_t __fastcall BattleData__getLastActionActor(BattleData_o *this, const MethodInfo *method)
{
  return this->fields.lastactorId;
}


int32_t __fastcall BattleData__getLastWave(BattleData_o *this, const MethodInfo *method)
{
  BattleInfoData_o *battle_info; // x0

  battle_info = this->fields.battle_info;
  if ( !battle_info )
    sub_B170D4();
  return BattleInfoData__getLastWave(battle_info, 0LL);
}


int32_t __fastcall BattleData__getLeave(BattleData_o *this, int32_t defVal, const MethodInfo *method)
{
  QuestPhaseEntity_o *questphase_ent; // x0

  questphase_ent = this->fields.questphase_ent;
  if ( !questphase_ent )
    sub_B170D4();
  return QuestPhaseEntity__getLeave(questphase_ent, defVal, 0LL);
}


// local variable allocation has failed, the output may be wrong!
System_String_array *__fastcall BattleData__getLoadedCommonEffectPath(
        BattleData_o *this,
        bool isClear,
        const MethodInfo *method)
{
  __int64 v5; // x1
  struct System_Collections_Generic_List_string__o *commonEffectPathList; // x0
  System_String_array *v7; // x21
  struct System_Collections_Generic_List_string__o *v8; // x0

  if ( (byte_40F69FC & 1) == 0 )
  {
    sub_B16FFC(&Method_System_Collections_Generic_List_string__Clear__, isClear);
    sub_B16FFC(&Method_System_Collections_Generic_List_string__ToArray__, v5);
    byte_40F69FC = 1;
  }
  commonEffectPathList = this->fields.commonEffectPathList;
  if ( !commonEffectPathList )
    goto LABEL_8;
  v7 = (System_String_array *)System_Collections_Generic_List_WarBoardUiData_SaveData___ToArray(
                                (System_Collections_Generic_List_WarBoardUiData_SaveData__o *)commonEffectPathList,
                                (const MethodInfo_2F27E24 *)Method_System_Collections_Generic_List_string__ToArray__);
  if ( isClear )
  {
    v8 = this->fields.commonEffectPathList;
    if ( v8 )
    {
      System_Collections_Generic_List_XWeaponTrail_Element___Clear(
        (System_Collections_Generic_List_XWeaponTrail_Element__o *)v8,
        (const MethodInfo_2F260E0 *)Method_System_Collections_Generic_List_string__Clear__);
      return v7;
    }
LABEL_8:
    sub_B170D4();
  }
  return v7;
}


int32_t __fastcall BattleData__getMasterEquipId(BattleData_o *this, const MethodInfo *method)
{
  __int64 v3; // x1
  __int64 v4; // x1
  __int64 v5; // x1
  WebViewManager_o *Instance; // x0
  DataMasterBase_UserServantStorageMaster__UserServantEntity__long__o *MasterData_WarQuestSelectionMaster; // x0
  struct BattleInfoData_o *battle_info; // x8
  __int64 v9; // x19
  int64_t fakeValue; // x20
  UserServantEntity_o *entity; // [xsp+8h] [xbp-18h] BYREF
  CodeStage_AntiCheat_ObscuredTypes_ObscuredInt_o v13; // 0:x0.16

  if ( (byte_40F6A24 & 1) == 0 )
  {
    sub_B16FFC(&Method_DataManager_GetMasterData_UserEquipMaster___, method);
    sub_B16FFC(&Method_DataMasterBase_UserEquipMaster__UserEquipEntity__long__TryGetEntity__, v3);
    sub_B16FFC(&CodeStage_AntiCheat_ObscuredTypes_ObscuredInt_TypeInfo, v4);
    sub_B16FFC(&Method_SingletonMonoBehaviour_DataManager__get_Instance__, v5);
    byte_40F6A24 = 1;
  }
  entity = 0LL;
  Instance = SingletonMonoBehaviour_WebViewManager___get_Instance((const MethodInfo_2A54F38 *)Method_SingletonMonoBehaviour_DataManager__get_Instance__);
  if ( !Instance )
    goto LABEL_14;
  MasterData_WarQuestSelectionMaster = (DataMasterBase_UserServantStorageMaster__UserServantEntity__long__o *)DataManager__GetMasterData_WarQuestSelectionMaster_((DataManager_o *)Instance, (const MethodInfo_18C3284 *)Method_DataManager_GetMasterData_UserEquipMaster___);
  battle_info = this->fields.battle_info;
  if ( !battle_info || !MasterData_WarQuestSelectionMaster )
    goto LABEL_14;
  if ( !DataMasterBase_UserServantStorageMaster__UserServantEntity__long___TryGetEntity(
          MasterData_WarQuestSelectionMaster,
          &entity,
          battle_info->fields.userEquipId,
          (const MethodInfo_266F60C *)Method_DataMasterBase_UserEquipMaster__UserEquipEntity__long__TryGetEntity__) )
    return 0;
  if ( !entity )
LABEL_14:
    sub_B170D4();
  fakeValue = entity->fields.id.fields.fakeValue;
  v9 = *(_QWORD *)&entity->fields.id.fields.inited;
  if ( (BYTE3(CodeStage_AntiCheat_ObscuredTypes_ObscuredInt_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0
    && !CodeStage_AntiCheat_ObscuredTypes_ObscuredInt_TypeInfo->_2.cctor_finished )
  {
    j_il2cpp_runtime_class_init_0(CodeStage_AntiCheat_ObscuredTypes_ObscuredInt_TypeInfo);
  }
  *(_QWORD *)&v13.fields.currentCryptoKey = fakeValue;
  *(_QWORD *)&v13.fields.fakeValue = v9;
  return CodeStage_AntiCheat_ObscuredTypes_ObscuredInt__op_Implicit_44068536(v13, 0LL);
}


// local variable allocation has failed, the output may be wrong!
BattleSkillInfoData_o *__fastcall BattleData__getMasterSkillInfo(
        BattleData_o *this,
        int32_t index,
        const MethodInfo *method)
{
  __int64 v3; // x3
  __int64 v4; // x4
  __int64 v7; // x1
  __int64 v8; // x1
  __int64 v9; // x1
  __int64 v10; // x1
  BattleData___c__DisplayClass337_0_o *v11; // x21
  __int64 v12; // x1
  __int64 v13; // x2
  __int64 v14; // x3
  __int64 v15; // x4
  struct System_Collections_Generic_List_BattleSkillInfoData__o *masterSkillInfo; // x19
  System_Predicate_peRenderTexture_ChangeLayerObject__o *v17; // x20

  if ( (byte_40F6A27 & 1) == 0 )
  {
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleSkillInfoData__Find__, *(_QWORD *)&index);
    sub_B16FFC(&Method_System_Predicate_BattleSkillInfoData___ctor__, v7);
    sub_B16FFC(&System_Predicate_BattleSkillInfoData__TypeInfo, v8);
    sub_B16FFC(&Method_BattleData___c__DisplayClass337_0__getMasterSkillInfo_b__0__, v9);
    sub_B16FFC(&BattleData___c__DisplayClass337_0_TypeInfo, v10);
    byte_40F6A27 = 1;
  }
  v11 = (BattleData___c__DisplayClass337_0_o *)sub_B170CC(
                                                 BattleData___c__DisplayClass337_0_TypeInfo,
                                                 *(_QWORD *)&index,
                                                 method,
                                                 v3,
                                                 v4);
  BattleData___c__DisplayClass337_0___ctor(v11, 0LL);
  if ( !v11
    || (v11->fields.index = index,
        masterSkillInfo = this->fields.masterSkillInfo,
        v17 = (System_Predicate_peRenderTexture_ChangeLayerObject__o *)sub_B170CC(
                                                                         System_Predicate_BattleSkillInfoData__TypeInfo,
                                                                         v12,
                                                                         v13,
                                                                         v14,
                                                                         v15),
        System_Predicate_peRenderTexture_ChangeLayerObject____ctor(
          v17,
          (Il2CppObject *)v11,
          Method_BattleData___c__DisplayClass337_0__getMasterSkillInfo_b__0__,
          (const MethodInfo_2B0B204 *)Method_System_Predicate_BattleSkillInfoData___ctor__),
        !masterSkillInfo) )
  {
    sub_B170D4();
  }
  return (BattleSkillInfoData_o *)System_Collections_Generic_List_peRenderTexture_ChangeLayerObject___Find(
                                    (System_Collections_Generic_List_peRenderTexture_ChangeLayerObject__o *)masterSkillInfo,
                                    (System_Predicate_T__o *)v17,
                                    (const MethodInfo_2F26598 *)Method_System_Collections_Generic_List_BattleSkillInfoData__Find__);
}


BattleSkillInfoData_array *__fastcall BattleData__getMasterSkillInfos(BattleData_o *this, const MethodInfo *method)
{
  struct System_Collections_Generic_List_BattleSkillInfoData__o *masterSkillInfo; // x0

  if ( (byte_40F6A26 & 1) == 0 )
  {
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleSkillInfoData__ToArray__, method);
    byte_40F6A26 = 1;
  }
  masterSkillInfo = this->fields.masterSkillInfo;
  if ( !masterSkillInfo )
    sub_B170D4();
  return (BattleSkillInfoData_array *)System_Collections_Generic_List_WarBoardUiData_SaveData___ToArray(
                                        (System_Collections_Generic_List_WarBoardUiData_SaveData__o *)masterSkillInfo,
                                        (const MethodInfo_2F27E24 *)Method_System_Collections_Generic_List_BattleSkillInfoData__ToArray__);
}


int32_t __fastcall BattleData__getMasterUserEquipId(BattleData_o *this, const MethodInfo *method)
{
  struct BattleInfoData_o *battle_info; // x8

  battle_info = this->fields.battle_info;
  if ( !battle_info )
    sub_B170D4();
  return battle_info->fields.userEquipId;
}


int32_t __fastcall BattleData__getNextNextIndex(BattleData_o *this, const MethodInfo *method)
{
  int32_t maxEnemyIndex; // w8
  BattleInfoData_o *battle_info; // x0
  DeckData_o *EnemyDeck; // x0
  __int64 v6; // x1
  __int64 v7; // x2
  struct BattleDeckServantData_array *svts; // x8
  __int64 v9; // x9
  __int64 v10; // x8
  int32_t result; // w0

  maxEnemyIndex = this->fields.maxEnemyIndex;
  if ( !maxEnemyIndex )
  {
    battle_info = this->fields.battle_info;
    if ( !battle_info )
      goto LABEL_9;
    EnemyDeck = BattleInfoData__getEnemyDeck(battle_info, this->fields.wavecount, 0LL);
    if ( !EnemyDeck )
      goto LABEL_9;
    svts = EnemyDeck->fields.svts;
    if ( !svts )
      goto LABEL_9;
    v9 = *(_QWORD *)&svts->max_length;
    if ( !(_DWORD)v9 )
    {
      sub_B17100(EnemyDeck, v6, v7);
      sub_B170A0();
    }
    v10 = *(__int64 *)((char *)svts->m_Items + (((v9 << 32) - 0x100000000LL) >> 29));
    if ( !v10 )
LABEL_9:
      sub_B170D4();
    maxEnemyIndex = *(_DWORD *)(v10 + 16);
    this->fields.maxEnemyIndex = maxEnemyIndex;
  }
  result = maxEnemyIndex + 1;
  this->fields.maxEnemyIndex = maxEnemyIndex + 1;
  return result;
}


int32_t __fastcall BattleData__getNextUniqueID(BattleData_o *this, const MethodInfo *method)
{
  int32_t maxEnemyUniqueID; // w0
  BattleInfoData_o *battle_info; // x0
  int32_t result; // w0

  maxEnemyUniqueID = this->fields.maxEnemyUniqueID;
  if ( !maxEnemyUniqueID )
  {
    battle_info = this->fields.battle_info;
    if ( !battle_info )
      sub_B170D4();
    maxEnemyUniqueID = BattleInfoData__getLastUniqueID(battle_info, 0LL);
    this->fields.maxEnemyUniqueID = maxEnemyUniqueID;
  }
  result = maxEnemyUniqueID + 1;
  this->fields.maxEnemyUniqueID = result;
  return result;
}


BattleServantData_array *__fastcall BattleData__getOpponentList(
        BattleData_o *this,
        int32_t uniqueId,
        const MethodInfo *method)
{
  const MethodInfo *v4; // x1

  if ( BattleData__getEnemyServantData(this, uniqueId, method) )
    return BattleData__getPlayerServantList(this, v4);
  else
    return BattleData__getEnemyServantList(this, v4);
}


int32_t __fastcall BattleData__getOverCriticalStars(BattleData_o *this, const MethodInfo *method)
{
  int v2; // w8

  v2 = this->fields.totalCriticalStars + this->fields.addCriticalstars - 50;
  return v2 & ~(v2 >> 31);
}


int32_t __fastcall BattleData__getOverCriticalStarsIgnoreAddCriticalStars(BattleData_o *this, const MethodInfo *method)
{
  return UnityEngine_Mathf__Max_40727628(0, this->fields.totalCriticalStars - 50, 0LL);
}


BattleServantData_array *__fastcall BattleData__getPTList(
        BattleData_o *this,
        int32_t uniqueId,
        const MethodInfo *method)
{
  const MethodInfo *v4; // x1

  if ( BattleData__getEnemyServantData(this, uniqueId, method) )
    return BattleData__getEnemyServantList(this, v4);
  else
    return BattleData__getPlayerServantList(this, v4);
}


int32_t __fastcall BattleData__getPhase(BattleData_o *this, const MethodInfo *method)
{
  struct QuestPhaseEntity_o *questphase_ent; // x8

  questphase_ent = this->fields.questphase_ent;
  if ( !questphase_ent )
    sub_B170D4();
  return questphase_ent->fields.phase;
}


PlayerFieldStatus_o *__fastcall BattleData__getPlayerFieldStatus(BattleData_o *this, const MethodInfo *method)
{
  return this->fields.playerFieldStatus;
}


// local variable allocation has failed, the output may be wrong!
BattleServantData_o *__fastcall BattleData__getPlayerServantData(
        BattleData_o *this,
        int32_t Id,
        const MethodInfo *method)
{
  __int64 v5; // x1
  struct System_Collections_Generic_List_BattleServantData__o *player_datalist; // x23
  int size; // w22
  unsigned int v8; // w21
  BattleServantData_o *v9; // x0
  struct System_Collections_Generic_List_BattleServantData__o *v11; // x19

  if ( (byte_40F6A44 & 1) == 0 )
  {
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleServantData__get_Count__, *(_QWORD *)&Id);
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleServantData__get_Item__, v5);
    byte_40F6A44 = 1;
  }
  player_datalist = this->fields.player_datalist;
  if ( !player_datalist )
    goto LABEL_18;
  size = player_datalist->fields._size;
  if ( size < 1 )
    return BattleData__GetAiNpcServantData(this, Id, method);
  v8 = 0;
  while ( 1 )
  {
    if ( player_datalist->fields._size <= v8 )
      System_ThrowHelper__ThrowArgumentOutOfRangeException_41329284(0LL);
    v9 = player_datalist->fields._items->m_Items[v8];
    if ( !v9 )
      goto LABEL_18;
    if ( BattleServantData__checkID(v9, Id, 0LL) )
      break;
    if ( (int)++v8 >= size )
      return BattleData__GetAiNpcServantData(this, Id, method);
    player_datalist = this->fields.player_datalist;
    if ( !player_datalist )
      goto LABEL_18;
  }
  v11 = this->fields.player_datalist;
  if ( !v11 )
LABEL_18:
    sub_B170D4();
  if ( v11->fields._size <= v8 )
    System_ThrowHelper__ThrowArgumentOutOfRangeException_41329284(0LL);
  return v11->fields._items->m_Items[v8];
}


// local variable allocation has failed, the output may be wrong!
System_Int32_array *__fastcall BattleData__getPlayerServantIDList(
        BattleData_o *this,
        bool ckDead,
        System_Int32_array *addIds,
        const MethodInfo *method)
{
  __int64 v4; // x4
  __int64 v8; // x1
  __int64 v9; // x1
  __int64 v10; // x1
  __int64 v11; // x1
  __int64 v12; // x1
  __int64 v13; // x1
  __int64 v14; // x1
  __int64 v15; // x1
  __int64 v16; // x1
  __int64 v17; // x1
  __int64 v18; // x1
  BattleData___c__DisplayClass429_0_o *v19; // x23
  __int64 v20; // x1
  __int64 v21; // x2
  __int64 v22; // x3
  __int64 v23; // x4
  System_Collections_Generic_List_int__o *v24; // x24
  System_Collections_Generic_List_int__o **p_result; // x22
  __int64 v26; // x1
  __int64 v27; // x2
  __int64 v28; // x3
  __int64 v29; // x4
  struct System_Collections_Generic_List_BattleServantData__o *player_datalist; // x24
  __int64 size; // x25
  __int64 v32; // x26
  unsigned __int64 v33; // x28
  struct System_Collections_Generic_List_BattleServantData__o *v34; // x19
  BattleServantData_o *v35; // x0
  struct System_Collections_Generic_List_BattleServantData__o *v36; // x19
  __int64 v37; // x8
  System_Collections_Generic_List_int__o *v38; // x20
  System_Func_int__bool__o *v39; // x21
  System_Collections_Generic_IEnumerable_T__o *v40; // x0
  System_Collections_Generic_IEnumerable_TSource__o *v42; // [xsp+8h] [xbp-58h]

  if ( (byte_40F6A4D & 1) == 0 )
  {
    sub_B16FFC(&Method_System_Linq_Enumerable_Where_int___, ckDead);
    sub_B16FFC(&Method_System_Func_int__bool___ctor__, v8);
    sub_B16FFC(&System_Func_int__bool__TypeInfo, v9);
    sub_B16FFC(&Method_System_Collections_Generic_List_int__AddRange__, v10);
    sub_B16FFC(&Method_System_Collections_Generic_List_int__Add__, v11);
    sub_B16FFC(&Method_System_Collections_Generic_List_int__ToArray__, v12);
    sub_B16FFC(&Method_System_Collections_Generic_List_int___ctor__, v13);
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleServantData__get_Count__, v14);
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleServantData__get_Item__, v15);
    sub_B16FFC(&System_Collections_Generic_List_int__TypeInfo, v16);
    sub_B16FFC(&Method_BattleData___c__DisplayClass429_0__getPlayerServantIDList_b__0__, v17);
    sub_B16FFC(&BattleData___c__DisplayClass429_0_TypeInfo, v18);
    byte_40F6A4D = 1;
  }
  v19 = (BattleData___c__DisplayClass429_0_o *)sub_B170CC(
                                                 BattleData___c__DisplayClass429_0_TypeInfo,
                                                 ckDead,
                                                 addIds,
                                                 method,
                                                 v4);
  BattleData___c__DisplayClass429_0___ctor(v19, 0LL);
  v24 = (System_Collections_Generic_List_int__o *)sub_B170CC(
                                                    System_Collections_Generic_List_int__TypeInfo,
                                                    v20,
                                                    v21,
                                                    v22,
                                                    v23);
  System_Collections_Generic_List_int____ctor(
    v24,
    (const MethodInfo_2F0F794 *)Method_System_Collections_Generic_List_int___ctor__);
  if ( !v19 )
    goto LABEL_30;
  v19->fields.result = v24;
  p_result = &v19->fields.result;
  v42 = (System_Collections_Generic_IEnumerable_TSource__o *)addIds;
  sub_B16F98(&v19->fields, v24);
  player_datalist = this->fields.player_datalist;
  if ( !player_datalist )
    goto LABEL_30;
  size = player_datalist->fields._size;
  if ( (int)size >= 1 )
  {
    v32 = 4LL;
    do
    {
      v33 = v32 - 4;
      if ( v32 - 4 >= (unsigned __int64)(unsigned int)player_datalist->fields._size )
        System_ThrowHelper__ThrowArgumentOutOfRangeException_41329284(0LL);
      if ( *((_QWORD *)&player_datalist->fields._items->obj.klass + v32) )
      {
        if ( !ckDead )
          goto LABEL_16;
        v34 = this->fields.player_datalist;
        if ( !v34 )
          goto LABEL_30;
        if ( v33 >= (unsigned int)v34->fields._size )
          System_ThrowHelper__ThrowArgumentOutOfRangeException_41329284(0LL);
        v35 = (BattleServantData_o *)*((_QWORD *)&v34->fields._items->obj.klass + v32);
        if ( !v35 )
          goto LABEL_30;
        if ( !BattleServantData__isDead(v35, 0LL) )
        {
LABEL_16:
          v36 = this->fields.player_datalist;
          if ( !v36 )
            goto LABEL_30;
          if ( v33 >= (unsigned int)v36->fields._size )
            System_ThrowHelper__ThrowArgumentOutOfRangeException_41329284(0LL);
          v37 = *((_QWORD *)&v36->fields._items->obj.klass + v32);
          if ( !v37 || !*p_result )
            goto LABEL_30;
          System_Collections_Generic_List_int___Add(
            *p_result,
            *(_DWORD *)(v37 + 24),
            (const MethodInfo_2F104F0 *)Method_System_Collections_Generic_List_int__Add__);
        }
      }
      if ( v32 - 3 >= size )
        goto LABEL_25;
      player_datalist = this->fields.player_datalist;
      ++v32;
    }
    while ( player_datalist );
    goto LABEL_30;
  }
LABEL_25:
  if ( v42 )
  {
    v38 = v19->fields.result;
    v39 = (System_Func_int__bool__o *)sub_B170CC(System_Func_int__bool__TypeInfo, v26, v27, v28, v29);
    System_Func_int__bool____ctor(
      v39,
      (Il2CppObject *)v19,
      Method_BattleData___c__DisplayClass429_0__getPlayerServantIDList_b__0__,
      (const MethodInfo_2B6586C *)Method_System_Func_int__bool___ctor__);
    v40 = (System_Collections_Generic_IEnumerable_T__o *)System_Linq_Enumerable__Where_int_(
                                                           v42,
                                                           (System_Func_TSource__bool__o *)v39,
                                                           (const MethodInfo_19C8D54 *)Method_System_Linq_Enumerable_Where_int___);
    if ( !v38 )
      goto LABEL_30;
    System_Collections_Generic_List_int___AddRange(
      v38,
      v40,
      (const MethodInfo_2F10744 *)Method_System_Collections_Generic_List_int__AddRange__);
  }
  if ( !*p_result )
LABEL_30:
    sub_B170D4();
  return System_Collections_Generic_List_int___ToArray(
           *p_result,
           (const MethodInfo_2F125FC *)Method_System_Collections_Generic_List_int__ToArray__);
}


BattleServantData_array *__fastcall BattleData__getPlayerServantList(BattleData_o *this, const MethodInfo *method)
{
  struct System_Collections_Generic_List_BattleServantData__o *player_datalist; // x0

  if ( (byte_40F6A4C & 1) == 0 )
  {
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleServantData__ToArray__, method);
    byte_40F6A4C = 1;
  }
  player_datalist = this->fields.player_datalist;
  if ( !player_datalist )
    sub_B170D4();
  return (BattleServantData_array *)System_Collections_Generic_List_WarBoardUiData_SaveData___ToArray(
                                      (System_Collections_Generic_List_WarBoardUiData_SaveData__o *)player_datalist,
                                      (const MethodInfo_2F27E24 *)Method_System_Collections_Generic_List_BattleServantData__ToArray__);
}


BattleServantData_o *__fastcall BattleData__getPlayerSubServantData(BattleData_o *this, const MethodInfo *method)
{
  __int64 v2; // x2
  __int64 v3; // x3
  __int64 v4; // x4
  __int64 v6; // x1
  __int64 v7; // x1
  __int64 v8; // x1
  __int64 v9; // x1
  __int64 v10; // x1
  __int64 v11; // x1
  struct System_Collections_Generic_List_BattleServantData__o *player_datalist; // x20
  BattleData___c_c *v13; // x0
  struct BattleData___c_StaticFields *static_fields; // x8
  System_Comparison_TitleInfoControl_EventEndTimeInfo__o *_9__420_0; // x21
  Il2CppObject *v16; // x22
  struct BattleData___c_StaticFields *v17; // x0
  struct System_Collections_Generic_List_BattleServantData__o *v18; // x22
  int size; // w21
  unsigned int v20; // w20
  BattleServantData_o *v21; // x8
  struct System_Collections_Generic_List_BattleServantData__o *v23; // x19

  if ( (byte_40F6A45 & 1) == 0 )
  {
    sub_B16FFC(&Method_System_Comparison_BattleServantData___ctor__, method);
    sub_B16FFC(&System_Comparison_BattleServantData__TypeInfo, v6);
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleServantData__Sort__, v7);
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleServantData__get_Count__, v8);
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleServantData__get_Item__, v9);
    sub_B16FFC(&Method_BattleData___c__getPlayerSubServantData_b__420_0__, v10);
    sub_B16FFC(&BattleData___c_TypeInfo, v11);
    byte_40F6A45 = 1;
  }
  player_datalist = this->fields.player_datalist;
  v13 = BattleData___c_TypeInfo;
  if ( (BYTE3(BattleData___c_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0
    && !BattleData___c_TypeInfo->_2.cctor_finished )
  {
    j_il2cpp_runtime_class_init_0(BattleData___c_TypeInfo);
    v13 = BattleData___c_TypeInfo;
  }
  static_fields = v13->static_fields;
  _9__420_0 = (System_Comparison_TitleInfoControl_EventEndTimeInfo__o *)static_fields->__9__420_0;
  if ( !_9__420_0 )
  {
    if ( (BYTE3(v13->vtable._0_Equals.methodPtr) & 4) != 0 && !v13->_2.cctor_finished )
    {
      j_il2cpp_runtime_class_init_0(v13);
      static_fields = BattleData___c_TypeInfo->static_fields;
    }
    v16 = (Il2CppObject *)static_fields->__9;
    _9__420_0 = (System_Comparison_TitleInfoControl_EventEndTimeInfo__o *)sub_B170CC(
                                                                            System_Comparison_BattleServantData__TypeInfo,
                                                                            method,
                                                                            v2,
                                                                            v3,
                                                                            v4);
    System_Comparison_TitleInfoControl_EventEndTimeInfo____ctor(
      _9__420_0,
      v16,
      Method_BattleData___c__getPlayerSubServantData_b__420_0__,
      (const MethodInfo_25BFD48 *)Method_System_Comparison_BattleServantData___ctor__);
    v17 = BattleData___c_TypeInfo->static_fields;
    v17->__9__420_0 = (struct System_Comparison_BattleServantData__o *)_9__420_0;
    sub_B16F98(&v17->__9__420_0, _9__420_0);
  }
  if ( !player_datalist )
    goto LABEL_27;
  System_Collections_Generic_List_TitleInfoControl_EventEndTimeInfo___Sort(
    (System_Collections_Generic_List_TitleInfoControl_EventEndTimeInfo__o *)player_datalist,
    (System_Comparison_T__o *)_9__420_0,
    (const MethodInfo_2F27DB4 *)Method_System_Collections_Generic_List_BattleServantData__Sort__);
  v18 = this->fields.player_datalist;
  if ( !v18 )
    goto LABEL_27;
  size = v18->fields._size;
  if ( size < 1 )
    return 0LL;
  v20 = 0;
  while ( 1 )
  {
    if ( v18->fields._size <= v20 )
      System_ThrowHelper__ThrowArgumentOutOfRangeException_41329284(0LL);
    v21 = v18->fields._items->m_Items[v20];
    if ( !v21 )
      goto LABEL_27;
    if ( !v21->fields.isEntry )
      break;
    if ( (int)++v20 >= size )
      return 0LL;
    v18 = this->fields.player_datalist;
    if ( !v18 )
      goto LABEL_27;
  }
  v23 = this->fields.player_datalist;
  if ( !v23 )
LABEL_27:
    sub_B170D4();
  if ( v23->fields._size <= v20 )
    System_ThrowHelper__ThrowArgumentOutOfRangeException_41329284(0LL);
  return v23->fields._items->m_Items[v20];
}


int32_t __fastcall BattleData__getPrevCriticalStars(BattleData_o *this, const MethodInfo *method)
{
  return this->fields.prevCriticalstars;
}


QuestEntity_o *__fastcall BattleData__getQuestEntity(BattleData_o *this, const MethodInfo *method)
{
  return this->fields.quest_ent;
}


int32_t __fastcall BattleData__getQuestId(BattleData_o *this, const MethodInfo *method)
{
  struct QuestPhaseEntity_o *questphase_ent; // x8

  questphase_ent = this->fields.questphase_ent;
  if ( !questphase_ent )
    sub_B170D4();
  return questphase_ent->fields.questId;
}


System_Int32_array *__fastcall BattleData__getQuestIndividualities(BattleData_o *this, const MethodInfo *method)
{
  __int64 v2; // x2
  __int64 v3; // x3
  __int64 v4; // x4
  __int64 v6; // x1
  __int64 v7; // x1
  __int64 v8; // x1
  __int64 v9; // x1
  __int64 v10; // x1
  System_Collections_Generic_List_int__o *questIndividuality; // x0
  System_Collections_Generic_List_int__o **p_questIndividuality; // x20
  System_Collections_Generic_List_int__o *v13; // x21
  struct BattleFieldEnvironmentData_o *FieldEnvData_k__BackingField; // x0
  System_Collections_Generic_List_int__o *v15; // x21
  System_Collections_Generic_IEnumerable_T__o *v16; // x0
  const MethodInfo *v17; // x1
  System_Collections_Generic_List_int__o *FieldIndividuality4Servant; // x0
  BattleFieldEnvironmentData_o *v19; // x0

  if ( (byte_40F6A1A & 1) == 0 )
  {
    sub_B16FFC(&int___TypeInfo, method);
    sub_B16FFC(&Method_System_Collections_Generic_List_int__AddRange__, v6);
    sub_B16FFC(&Method_System_Collections_Generic_List_int__Clear__, v7);
    sub_B16FFC(&Method_System_Collections_Generic_List_int___ctor__, v8);
    sub_B16FFC(&Method_System_Collections_Generic_List_int__get_Count__, v9);
    sub_B16FFC(&System_Collections_Generic_List_int__TypeInfo, v10);
    byte_40F6A1A = 1;
  }
  p_questIndividuality = &this->fields.questIndividuality;
  questIndividuality = this->fields.questIndividuality;
  if ( questIndividuality )
    goto LABEL_6;
  if ( this->fields.questphase_ent )
  {
    v13 = (System_Collections_Generic_List_int__o *)sub_B170CC(
                                                      System_Collections_Generic_List_int__TypeInfo,
                                                      method,
                                                      v2,
                                                      v3,
                                                      v4);
    System_Collections_Generic_List_int____ctor(
      v13,
      (const MethodInfo_2F0F794 *)Method_System_Collections_Generic_List_int___ctor__);
    *p_questIndividuality = v13;
    sub_B16F98(&this->fields.questIndividuality, v13);
    questIndividuality = *p_questIndividuality;
    if ( !*p_questIndividuality )
      goto LABEL_15;
LABEL_6:
    System_Collections_Generic_List_int___Clear(
      questIndividuality,
      (const MethodInfo_2F108FC *)Method_System_Collections_Generic_List_int__Clear__);
    FieldEnvData_k__BackingField = this->fields._FieldEnvData_k__BackingField;
    if ( FieldEnvData_k__BackingField )
    {
      v15 = this->fields.questIndividuality;
      v16 = (System_Collections_Generic_IEnumerable_T__o *)((__int64 (__fastcall *)(struct BattleFieldEnvironmentData_o *, _QWORD, Il2CppMethodPointer))FieldEnvData_k__BackingField->klass->vtable._4_GetFieldIndividuality.method)(
                                                             FieldEnvData_k__BackingField,
                                                             0LL,
                                                             FieldEnvData_k__BackingField->klass->vtable._5_AddBackground.methodPtr);
      if ( v15 )
      {
        System_Collections_Generic_List_int___AddRange(
          v15,
          v16,
          (const MethodInfo_2F10744 *)Method_System_Collections_Generic_List_int__AddRange__);
        FieldIndividuality4Servant = BattleData__GetFieldIndividuality4Servant(this, v17);
        if ( FieldIndividuality4Servant )
        {
          if ( FieldIndividuality4Servant->fields._size >= 1 )
          {
            if ( !*p_questIndividuality )
              goto LABEL_15;
            System_Collections_Generic_List_int___AddRange(
              *p_questIndividuality,
              (System_Collections_Generic_IEnumerable_T__o *)FieldIndividuality4Servant,
              (const MethodInfo_2F10744 *)Method_System_Collections_Generic_List_int__AddRange__);
          }
          v19 = this->fields._FieldEnvData_k__BackingField;
          if ( v19 )
            return BattleFieldEnvironmentData__GetIndividualityExceptDelTarget(v19, *p_questIndividuality, 0LL);
        }
      }
    }
LABEL_15:
    sub_B170D4();
  }
  return (System_Int32_array *)sub_B17014(int___TypeInfo, 0LL, v2);
}


System_Int32_array *__fastcall BattleData__getQuestIndividualitiesIgnoreServant(
        BattleData_o *this,
        const MethodInfo *method)
{
  __int64 v2; // x2
  __int64 v3; // x3
  __int64 v4; // x4
  __int64 v6; // x1
  __int64 v7; // x1
  __int64 v8; // x1
  __int64 v9; // x1
  __int64 v10; // x1
  System_Collections_Generic_List_int__o *questIndividuality; // x0
  System_Collections_Generic_List_int__o **p_questIndividuality; // x20
  System_Collections_Generic_List_int__o *v13; // x21
  struct BattleFieldEnvironmentData_o *FieldEnvData_k__BackingField; // x0
  System_Collections_Generic_List_int__o *v15; // x19
  System_Collections_Generic_IEnumerable_T__o *v16; // x0

  if ( (byte_40F6A1B & 1) == 0 )
  {
    sub_B16FFC(&int___TypeInfo, method);
    sub_B16FFC(&Method_System_Collections_Generic_List_int__AddRange__, v6);
    sub_B16FFC(&Method_System_Collections_Generic_List_int__Clear__, v7);
    sub_B16FFC(&Method_System_Collections_Generic_List_int__ToArray__, v8);
    sub_B16FFC(&Method_System_Collections_Generic_List_int___ctor__, v9);
    sub_B16FFC(&System_Collections_Generic_List_int__TypeInfo, v10);
    byte_40F6A1B = 1;
  }
  p_questIndividuality = &this->fields.questIndividuality;
  questIndividuality = this->fields.questIndividuality;
  if ( questIndividuality )
  {
LABEL_6:
    System_Collections_Generic_List_int___Clear(
      questIndividuality,
      (const MethodInfo_2F108FC *)Method_System_Collections_Generic_List_int__Clear__);
    FieldEnvData_k__BackingField = this->fields._FieldEnvData_k__BackingField;
    if ( FieldEnvData_k__BackingField )
    {
      v15 = this->fields.questIndividuality;
      v16 = (System_Collections_Generic_IEnumerable_T__o *)((__int64 (__fastcall *)(struct BattleFieldEnvironmentData_o *, _QWORD, Il2CppMethodPointer))FieldEnvData_k__BackingField->klass->vtable._4_GetFieldIndividuality.method)(
                                                             FieldEnvData_k__BackingField,
                                                             0LL,
                                                             FieldEnvData_k__BackingField->klass->vtable._5_AddBackground.methodPtr);
      if ( v15 )
      {
        System_Collections_Generic_List_int___AddRange(
          v15,
          v16,
          (const MethodInfo_2F10744 *)Method_System_Collections_Generic_List_int__AddRange__);
        if ( *p_questIndividuality )
          return System_Collections_Generic_List_int___ToArray(
                   *p_questIndividuality,
                   (const MethodInfo_2F125FC *)Method_System_Collections_Generic_List_int__ToArray__);
      }
    }
LABEL_11:
    sub_B170D4();
  }
  if ( this->fields.questphase_ent )
  {
    v13 = (System_Collections_Generic_List_int__o *)sub_B170CC(
                                                      System_Collections_Generic_List_int__TypeInfo,
                                                      method,
                                                      v2,
                                                      v3,
                                                      v4);
    System_Collections_Generic_List_int____ctor(
      v13,
      (const MethodInfo_2F0F794 *)Method_System_Collections_Generic_List_int___ctor__);
    *p_questIndividuality = v13;
    sub_B16F98(&this->fields.questIndividuality, v13);
    questIndividuality = *p_questIndividuality;
    if ( !*p_questIndividuality )
      goto LABEL_11;
    goto LABEL_6;
  }
  return (System_Int32_array *)sub_B17014(int___TypeInfo, 0LL, v2);
}


QuestKnockdownInfo_o *__fastcall BattleData__getQuestKnockdownRecord(BattleData_o *this, const MethodInfo *method)
{
  __int64 v2; // x2
  __int64 v3; // x3
  __int64 v4; // x4
  __int64 v6; // x1
  __int64 v7; // x1
  __int64 v8; // x1
  QuestKnockdownInfo_o *v9; // x20
  WebViewManager_o *Instance; // x0
  UserQuestRecordMaster_o *MasterData_WarQuestSelectionMaster; // x21
  int64_t UserId; // x0
  struct QuestEntity_o *quest_ent; // x8

  if ( (byte_40F6AB6 & 1) == 0 )
  {
    sub_B16FFC(&Method_DataManager_GetMasterData_UserQuestRecordMaster___, method);
    sub_B16FFC(&NetworkManager_TypeInfo, v6);
    sub_B16FFC(&QuestKnockdownInfo_TypeInfo, v7);
    sub_B16FFC(&Method_SingletonMonoBehaviour_DataManager__get_Instance__, v8);
    byte_40F6AB6 = 1;
  }
  v9 = (QuestKnockdownInfo_o *)sub_B170CC(QuestKnockdownInfo_TypeInfo, method, v2, v3, v4);
  QuestKnockdownInfo___ctor(v9, 0LL);
  Instance = SingletonMonoBehaviour_WebViewManager___get_Instance((const MethodInfo_2A54F38 *)Method_SingletonMonoBehaviour_DataManager__get_Instance__);
  if ( !Instance )
    goto LABEL_10;
  MasterData_WarQuestSelectionMaster = (UserQuestRecordMaster_o *)DataManager__GetMasterData_WarQuestSelectionMaster_(
                                                                    (DataManager_o *)Instance,
                                                                    (const MethodInfo_18C3284 *)Method_DataManager_GetMasterData_UserQuestRecordMaster___);
  if ( (BYTE3(NetworkManager_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0
    && !NetworkManager_TypeInfo->_2.cctor_finished )
  {
    j_il2cpp_runtime_class_init_0(NetworkManager_TypeInfo);
  }
  UserId = NetworkManager__get_UserId(0LL);
  quest_ent = this->fields.quest_ent;
  if ( !quest_ent || !MasterData_WarQuestSelectionMaster )
LABEL_10:
    sub_B170D4();
  UserQuestRecordMaster__GetKnockdownRecordinfo(
    MasterData_WarQuestSelectionMaster,
    UserId,
    quest_ent->fields.id,
    v9,
    0LL);
  return v9;
}


int32_t __fastcall BattleData__getQuestPhaseScript(
        BattleData_o *this,
        System_String_o *key,
        int32_t defaultValue,
        const MethodInfo *method)
{
  QuestPhaseEntity_o *questphase_ent; // x0

  questphase_ent = this->fields.questphase_ent;
  if ( !questphase_ent )
    sub_B170D4();
  return QuestPhaseEntity__getScriptIntParam(questphase_ent, key, defaultValue, 0LL);
}


System_Collections_Generic_Dictionary_string__object__o *__fastcall BattleData__getQuestRecordJson(
        BattleData_o *this,
        const MethodInfo *method)
{
  __int64 v3; // x1
  __int64 v4; // x1
  __int64 v5; // x1
  __int64 v6; // x1
  __int64 v7; // x1
  __int64 v8; // x2
  __int64 v9; // x3
  __int64 v10; // x4
  System_Collections_Generic_Dictionary_XmlQualifiedName__XmlSchemaObject__o *v11; // x20
  UserQuestRecordEntity_c *v12; // x0
  System_Xml_XmlQualifiedName_o *KEY_RECORD_TURN_MAX_DAMAGE; // x21
  System_Xml_Schema_XmlSchemaObject_o *v14; // x0
  struct QuestKnockdownInfo_o *currenctKnockdown; // x8
  struct System_String_o *KEY_RECORD_KNOCKDOWN_NUM; // x21
  System_Xml_Schema_XmlSchemaObject_o *v17; // x0
  struct QuestKnockdownInfo_o *v18; // x8
  struct System_String_o *KEY_RECORD_TOTAL_DAMAGE_TO_ALIVE_ENEMY; // x19
  System_Xml_Schema_XmlSchemaObject_o *v20; // x0
  int64_t totalDamage; // [xsp+8h] [xbp-48h] BYREF
  int64_t knockdownNum; // [xsp+10h] [xbp-40h] BYREF
  int64_t maxTurnDamageInBattle; // [xsp+18h] [xbp-38h] BYREF

  if ( (byte_40F6AB7 & 1) == 0 )
  {
    sub_B16FFC(&Method_System_Collections_Generic_Dictionary_string__object__Add__, method);
    sub_B16FFC(&Method_System_Collections_Generic_Dictionary_string__object___ctor__, v3);
    sub_B16FFC(&System_Collections_Generic_Dictionary_string__object__TypeInfo, v4);
    sub_B16FFC(&long_TypeInfo, v5);
    sub_B16FFC(&UserQuestRecordEntity_TypeInfo, v6);
    byte_40F6AB7 = 1;
  }
  BattleData__setQuestKnockdownResult(this, method);
  v11 = (System_Collections_Generic_Dictionary_XmlQualifiedName__XmlSchemaObject__o *)sub_B170CC(
                                                                                        System_Collections_Generic_Dictionary_string__object__TypeInfo,
                                                                                        v7,
                                                                                        v8,
                                                                                        v9,
                                                                                        v10);
  System_Collections_Generic_Dictionary_XmlQualifiedName__XmlSchemaObject____ctor(
    v11,
    (const MethodInfo_2DA3068 *)Method_System_Collections_Generic_Dictionary_string__object___ctor__);
  v12 = UserQuestRecordEntity_TypeInfo;
  if ( (BYTE3(UserQuestRecordEntity_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0
    && !UserQuestRecordEntity_TypeInfo->_2.cctor_finished )
  {
    j_il2cpp_runtime_class_init_0(UserQuestRecordEntity_TypeInfo);
    v12 = UserQuestRecordEntity_TypeInfo;
  }
  KEY_RECORD_TURN_MAX_DAMAGE = (System_Xml_XmlQualifiedName_o *)v12->static_fields->KEY_RECORD_TURN_MAX_DAMAGE;
  maxTurnDamageInBattle = this->fields.maxTurnDamageInBattle;
  v14 = (System_Xml_Schema_XmlSchemaObject_o *)j_il2cpp_value_box_0(long_TypeInfo, &maxTurnDamageInBattle);
  if ( !v11
    || (System_Collections_Generic_Dictionary_XmlQualifiedName__XmlSchemaObject___Add(
          v11,
          KEY_RECORD_TURN_MAX_DAMAGE,
          v14,
          (const MethodInfo_2DA3C18 *)Method_System_Collections_Generic_Dictionary_string__object__Add__),
        (currenctKnockdown = this->fields.currenctKnockdown) == 0LL)
    || (KEY_RECORD_KNOCKDOWN_NUM = UserQuestRecordEntity_TypeInfo->static_fields->KEY_RECORD_KNOCKDOWN_NUM,
        knockdownNum = currenctKnockdown->fields.knockdownNum,
        v17 = (System_Xml_Schema_XmlSchemaObject_o *)j_il2cpp_value_box_0(long_TypeInfo, &knockdownNum),
        System_Collections_Generic_Dictionary_XmlQualifiedName__XmlSchemaObject___Add(
          v11,
          (System_Xml_XmlQualifiedName_o *)KEY_RECORD_KNOCKDOWN_NUM,
          v17,
          (const MethodInfo_2DA3C18 *)Method_System_Collections_Generic_Dictionary_string__object__Add__),
        (v18 = this->fields.currenctKnockdown) == 0LL) )
  {
    sub_B170D4();
  }
  KEY_RECORD_TOTAL_DAMAGE_TO_ALIVE_ENEMY = UserQuestRecordEntity_TypeInfo->static_fields->KEY_RECORD_TOTAL_DAMAGE_TO_ALIVE_ENEMY;
  totalDamage = v18->fields.totalDamage;
  v20 = (System_Xml_Schema_XmlSchemaObject_o *)j_il2cpp_value_box_0(long_TypeInfo, &totalDamage);
  System_Collections_Generic_Dictionary_XmlQualifiedName__XmlSchemaObject___Add(
    v11,
    (System_Xml_XmlQualifiedName_o *)KEY_RECORD_TOTAL_DAMAGE_TO_ALIVE_ENEMY,
    v20,
    (const MethodInfo_2DA3C18 *)Method_System_Collections_Generic_Dictionary_string__object__Add__);
  return (System_Collections_Generic_Dictionary_string__object__o *)v11;
}


int32_t __fastcall BattleData__getQuestRecordType(BattleData_o *this, const MethodInfo *method)
{
  if ( BattleData__isKnockdownTrialQuest(this, method) )
    return 2;
  else
    return 1;
}


int64_t __fastcall BattleData__getRaidBossMaxHp(BattleData_o *this, int32_t raidId, const MethodInfo *method)
{
  BattleInfoData_o *battle_info; // x0

  battle_info = this->fields.battle_info;
  if ( !battle_info )
    sub_B170D4();
  return BattleInfoData__getRaidBossMaxHp(battle_info, raidId, 0LL);
}


int32_t __fastcall BattleData__getRaidDay(BattleData_o *this, int32_t uniqueId, const MethodInfo *method)
{
  BattleInfoData_o *battle_info; // x0

  battle_info = this->fields.battle_info;
  if ( !battle_info )
    sub_B170D4();
  return BattleInfoData__getRaidDay(battle_info, uniqueId, 0LL);
}


// local variable allocation has failed, the output may be wrong!
BattleRaidInfo_o *__fastcall BattleData__getRaidInfo(BattleData_o *this, int32_t day, const MethodInfo *method)
{
  struct BattleInfoData_o *battle_info; // x8
  struct BattleRaidInfo_array *startRaidInfo; // x10
  int max_length; // w8
  __int64 v6; // x9
  BattleRaidInfo_o **m_Items; // x10

  battle_info = this->fields.battle_info;
  if ( !battle_info )
    goto LABEL_11;
  startRaidInfo = battle_info->fields.startRaidInfo;
  if ( startRaidInfo )
  {
    max_length = startRaidInfo->max_length;
    if ( max_length >= 1 )
    {
      v6 = 0LL;
      m_Items = startRaidInfo->m_Items;
      while ( 1 )
      {
        if ( (unsigned int)v6 >= max_length )
        {
          sub_B17100(this, *(_QWORD *)&day, method);
          sub_B170A0();
        }
        this = (BattleData_o *)m_Items[v6];
        if ( !this )
          break;
        if ( this->fields.m_CachedPtr == day )
          return (BattleRaidInfo_o *)this;
        if ( (int)++v6 >= max_length )
          return 0LL;
      }
LABEL_11:
      sub_B170D4();
    }
  }
  return 0LL;
}


int32_t __fastcall BattleData__getResultBgmId(BattleData_o *this, int32_t defVal, const MethodInfo *method)
{
  QuestPhaseEntity_o *questphase_ent; // x0

  questphase_ent = this->fields.questphase_ent;
  if ( !questphase_ent )
    sub_B170D4();
  return QuestPhaseEntity__getResultBgmId(questphase_ent, defVal, 0LL);
}


System_Int32_array *__fastcall BattleData__getResultEnemyVoiceIds(BattleData_o *this, const MethodInfo *method)
{
  QuestPhaseEntity_o *questphase_ent; // x0

  questphase_ent = this->fields.questphase_ent;
  if ( !questphase_ent )
    sub_B170D4();
  return QuestPhaseEntity__getResultEnemyVoiceIds(questphase_ent, 0LL);
}


int64_t __fastcall BattleData__getResumeBattleId(const MethodInfo *method)
{
  __int64 v1; // x1
  __int64 v2; // x1

  if ( (byte_40F6A73 & 1) == 0 )
  {
    sub_B16FFC(&EncryptedPlayerPrefs_TypeInfo, v1);
    sub_B16FFC(&StringLiteral_11516/*"SAVEKEY_"*/, v2);
    byte_40F6A73 = 1;
  }
  if ( (BYTE3(EncryptedPlayerPrefs_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0
    && !EncryptedPlayerPrefs_TypeInfo->_2.cctor_finished )
  {
    j_il2cpp_runtime_class_init_0(EncryptedPlayerPrefs_TypeInfo);
  }
  if ( !EncryptedPlayerPrefs__HasKey((System_String_o *)StringLiteral_11516/*"SAVEKEY_"*/, 0LL) )
    return -1LL;
  if ( (BYTE3(EncryptedPlayerPrefs_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0
    && !EncryptedPlayerPrefs_TypeInfo->_2.cctor_finished )
  {
    j_il2cpp_runtime_class_init_0(EncryptedPlayerPrefs_TypeInfo);
  }
  return EncryptedPlayerPrefs__GetLong((System_String_o *)StringLiteral_11516/*"SAVEKEY_"*/, 0LL);
}


int32_t __fastcall BattleData__getSavedQuestId(const MethodInfo *method)
{
  __int64 v1; // x1
  __int64 v2; // x1

  if ( (byte_40F6A74 & 1) == 0 )
  {
    sub_B16FFC(&EncryptedPlayerPrefs_TypeInfo, v1);
    sub_B16FFC(&StringLiteral_10848/*"QUESTID"*/, v2);
    byte_40F6A74 = 1;
  }
  if ( (BYTE3(EncryptedPlayerPrefs_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0
    && !EncryptedPlayerPrefs_TypeInfo->_2.cctor_finished )
  {
    j_il2cpp_runtime_class_init_0(EncryptedPlayerPrefs_TypeInfo);
  }
  if ( !EncryptedPlayerPrefs__HasKey((System_String_o *)StringLiteral_10848/*"QUESTID"*/, 0LL) )
    return 0;
  if ( (BYTE3(EncryptedPlayerPrefs_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0
    && !EncryptedPlayerPrefs_TypeInfo->_2.cctor_finished )
  {
    j_il2cpp_runtime_class_init_0(EncryptedPlayerPrefs_TypeInfo);
  }
  return EncryptedPlayerPrefs__GetInt((System_String_o *)StringLiteral_10848/*"QUESTID"*/, 0LL);
}


int32_t __fastcall BattleData__getSavedQuestPhase(const MethodInfo *method)
{
  __int64 v1; // x1
  __int64 v2; // x1

  if ( (byte_40F6A75 & 1) == 0 )
  {
    sub_B16FFC(&EncryptedPlayerPrefs_TypeInfo, v1);
    sub_B16FFC(&StringLiteral_10849/*"QUESTPHASEID"*/, v2);
    byte_40F6A75 = 1;
  }
  if ( (BYTE3(EncryptedPlayerPrefs_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0
    && !EncryptedPlayerPrefs_TypeInfo->_2.cctor_finished )
  {
    j_il2cpp_runtime_class_init_0(EncryptedPlayerPrefs_TypeInfo);
  }
  if ( !EncryptedPlayerPrefs__HasKey((System_String_o *)StringLiteral_10849/*"QUESTPHASEID"*/, 0LL) )
    return 0;
  if ( (BYTE3(EncryptedPlayerPrefs_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0
    && !EncryptedPlayerPrefs_TypeInfo->_2.cctor_finished )
  {
    j_il2cpp_runtime_class_init_0(EncryptedPlayerPrefs_TypeInfo);
  }
  return EncryptedPlayerPrefs__GetInt((System_String_o *)StringLiteral_10849/*"QUESTPHASEID"*/, 0LL);
}


BattleComboData_o *__fastcall BattleData__getSelectCombo(BattleData_o *this, const MethodInfo *method)
{
  return this->fields.combodata;
}


// local variable allocation has failed, the output may be wrong!
BattleCommandData_o *__fastcall BattleData__getSelectCommand(
        BattleData_o *this,
        int32_t index,
        const MethodInfo *method)
{
  if ( (byte_40F6A34 & 1) == 0 )
  {
    sub_B16FFC(&Method_BasicHelper_IndexValue_BattleCommandData___, *(_QWORD *)&index);
    byte_40F6A34 = 1;
  }
  return (BattleCommandData_o *)BasicHelper__IndexValue_USFGOPlayStandardCutInLimitCount_OverwriteStandFigure_(
                                  (WellFired_USFGOPlayStandardCutInLimitCount_OverwriteStandFigure_array *)this->fields.selectcommandlist,
                                  index,
                                  0LL,
                                  (const MethodInfo_18B82A4 *)Method_BasicHelper_IndexValue_BattleCommandData___);
}


BattleCommandData_array *__fastcall BattleData__getSelectCommands(BattleData_o *this, const MethodInfo *method)
{
  return this->fields.selectcommandlist;
}


BattleServantData_o *__fastcall BattleData__getServantData(
        BattleData_o *this,
        int32_t uniqueId,
        const MethodInfo *method)
{
  BattleServantData_o *result; // x0
  const MethodInfo *v6; // x2

  result = BattleData__getPlayerServantData(this, uniqueId, method);
  if ( !result )
    return BattleData__getEnemyServantData(this, uniqueId, v6);
  return result;
}


// local variable allocation has failed, the output may be wrong!
BattleServantData_o *__fastcall BattleData__getServantDataFromIndex(
        BattleData_o *this,
        int32_t index,
        bool isEnemy,
        const MethodInfo *method)
{
  struct System_Int32_array *e_entryid; // x8
  struct System_Int32_array *p_entryid; // x8

  if ( isEnemy )
  {
    e_entryid = this->fields.e_entryid;
    if ( e_entryid )
    {
      if ( e_entryid->max_length > index )
        return BattleData__getEnemyServantData(this, e_entryid->m_Items[index + 1], (const MethodInfo *)isEnemy);
LABEL_9:
      sub_B17100(this, *(_QWORD *)&index, isEnemy);
      sub_B170A0();
    }
LABEL_8:
    sub_B170D4();
  }
  p_entryid = this->fields.p_entryid;
  if ( !p_entryid )
    goto LABEL_8;
  if ( p_entryid->max_length <= index )
    goto LABEL_9;
  return BattleData__getPlayerServantData(this, p_entryid->m_Items[index + 1], (const MethodInfo *)isEnemy);
}


// local variable allocation has failed, the output may be wrong!
int32_t __fastcall BattleData__getServantId(BattleData_o *this, int32_t uniqueId, const MethodInfo *method)
{
  BattleServantData_o *ServantData; // x0
  __int64 v6; // x19
  __int64 v7; // x20
  CodeStage_AntiCheat_ObscuredTypes_ObscuredInt_o v9; // 0:x0.16

  if ( (byte_40F6A4B & 1) == 0 )
  {
    sub_B16FFC(&CodeStage_AntiCheat_ObscuredTypes_ObscuredInt_TypeInfo, *(_QWORD *)&uniqueId);
    byte_40F6A4B = 1;
  }
  ServantData = BattleData__getServantData(this, uniqueId, method);
  if ( !ServantData )
    return -1;
  v7 = *(_QWORD *)&ServantData->fields.svtId.fields.currentCryptoKey;
  v6 = *(_QWORD *)&ServantData->fields.svtId.fields.fakeValue;
  if ( (BYTE3(CodeStage_AntiCheat_ObscuredTypes_ObscuredInt_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0
    && !CodeStage_AntiCheat_ObscuredTypes_ObscuredInt_TypeInfo->_2.cctor_finished )
  {
    j_il2cpp_runtime_class_init_0(CodeStage_AntiCheat_ObscuredTypes_ObscuredInt_TypeInfo);
  }
  *(_QWORD *)&v9.fields.currentCryptoKey = v7;
  *(_QWORD *)&v9.fields.fakeValue = v6;
  return CodeStage_AntiCheat_ObscuredTypes_ObscuredInt__op_Implicit_44068536(v9, 0LL);
}


// local variable allocation has failed, the output may be wrong!
int32_t __fastcall BattleData__getServantIndex(
        BattleData_o *this,
        bool isEnemy,
        int32_t uniqueId,
        const MethodInfo *method)
{
  __int64 v7; // x8
  System_Int32_array *v8; // x0

  if ( (byte_40F6A23 & 1) == 0 )
  {
    sub_B16FFC(&Method_System_Array_IndexOf_int___, isEnemy);
    byte_40F6A23 = 1;
  }
  v7 = 288LL;
  if ( isEnemy )
    v7 = 296LL;
  v8 = *(System_Int32_array **)((char *)&this->klass + v7);
  if ( v8 )
    return System_Array__IndexOf_int_(v8, uniqueId, (const MethodInfo_2045560 *)Method_System_Array_IndexOf_int___);
  else
    return -1;
}


System_Collections_Generic_List_BattleServantData__o *__fastcall BattleData__getServantList(
        BattleData_o *this,
        const MethodInfo *method)
{
  __int64 v2; // x2
  __int64 v3; // x3
  __int64 v4; // x4
  __int64 v6; // x1
  __int64 v7; // x1
  System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData__o *v8; // x20
  const MethodInfo *v9; // x1
  System_Collections_Generic_IEnumerable_T__o *PlayerServantList; // x0
  const MethodInfo *v11; // x1
  System_Collections_Generic_IEnumerable_T__o *EnemyServantList; // x0

  if ( (byte_40F6A5E & 1) == 0 )
  {
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleServantData__AddRange__, method);
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleServantData___ctor__, v6);
    sub_B16FFC(&System_Collections_Generic_List_BattleServantData__TypeInfo, v7);
    byte_40F6A5E = 1;
  }
  v8 = (System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData__o *)sub_B170CC(
                                                                                                 System_Collections_Generic_List_BattleServantData__TypeInfo,
                                                                                                 method,
                                                                                                 v2,
                                                                                                 v3,
                                                                                                 v4);
  System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData____ctor(
    v8,
    (const MethodInfo_2F25014 *)Method_System_Collections_Generic_List_BattleServantData___ctor__);
  PlayerServantList = (System_Collections_Generic_IEnumerable_T__o *)BattleData__getPlayerServantList(this, v9);
  if ( !v8 )
    sub_B170D4();
  System_Collections_Generic_List_TimeZoneInfo_AdjustmentRule___AddRange(
    (System_Collections_Generic_List_TimeZoneInfo_AdjustmentRule__o *)v8,
    PlayerServantList,
    (const MethodInfo_2F25F28 *)Method_System_Collections_Generic_List_BattleServantData__AddRange__);
  EnemyServantList = (System_Collections_Generic_IEnumerable_T__o *)BattleData__getEnemyServantList(this, v11);
  System_Collections_Generic_List_TimeZoneInfo_AdjustmentRule___AddRange(
    (System_Collections_Generic_List_TimeZoneInfo_AdjustmentRule__o *)v8,
    EnemyServantList,
    (const MethodInfo_2F25F28 *)Method_System_Collections_Generic_List_BattleServantData__AddRange__);
  return (System_Collections_Generic_List_BattleServantData__o *)v8;
}


BattleCommandData_o *__fastcall BattleData__getShuffleCommand(BattleData_o *this, const MethodInfo *method)
{
  __int64 v2; // x2
  struct BattleCommandData_array *p_shcmlist; // x9
  __int64 shuffleindex; // x8
  Il2CppClass **v5; // x10
  struct BattleCommandData_array *p_cmlist; // x9
  BattleCommandData_o *v7; // x19
  int32_t v8; // w8

  p_shcmlist = this->fields.p_shcmlist;
  if ( !p_shcmlist )
    goto LABEL_7;
  shuffleindex = this->fields.shuffleindex;
  if ( (unsigned int)shuffleindex >= p_shcmlist->max_length )
  {
    sub_B17100(this, method, v2);
    sub_B170A0();
  }
  v5 = &p_shcmlist->obj.klass + shuffleindex;
  p_cmlist = this->fields.p_cmlist;
  v7 = (BattleCommandData_o *)v5[4];
  v8 = shuffleindex + 1;
  this->fields.shuffleindex = v8;
  if ( !p_cmlist )
LABEL_7:
    sub_B170D4();
  if ( v8 >= (signed int)p_cmlist->max_length )
    BattleData__shuffleCommand(this, method);
  return v7;
}


BattleCommandData_o *__fastcall BattleData__getShuffleSelectedCommand(BattleData_o *this, const MethodInfo *method)
{
  __int64 v2; // x2
  struct BattleCommandData_array *canSelectCommands; // x8
  __int64 canSelectCommandIndex; // x9
  Il2CppClass **v5; // x10
  int32_t v6; // w9
  BattleCommandData_o *v7; // x19

  canSelectCommands = this->fields.canSelectCommands;
  if ( !canSelectCommands )
    sub_B170D4();
  canSelectCommandIndex = this->fields.canSelectCommandIndex;
  if ( (unsigned int)canSelectCommandIndex >= canSelectCommands->max_length )
  {
    sub_B17100(this, method, v2);
    sub_B170A0();
  }
  v5 = &canSelectCommands->obj.klass + canSelectCommandIndex;
  v6 = canSelectCommandIndex + 1;
  v7 = (BattleCommandData_o *)v5[4];
  this->fields.canSelectCommandIndex = v6;
  if ( v6 >= (signed int)canSelectCommands->max_length )
    BattleData__shuffleCanSelectCommand(this, method);
  return v7;
}


int32_t __fastcall BattleData__getSpecialShadowEffectId(BattleData_o *this, const MethodInfo *method)
{
  QuestPhaseEntity_o *questphase_ent; // x0

  questphase_ent = this->fields.questphase_ent;
  if ( !questphase_ent )
    sub_B170D4();
  return QuestPhaseEntity__getSpecialShadowEffectId(questphase_ent, 0LL);
}


StageEntity_o *__fastcall BattleData__getStageEntity(BattleData_o *this, const MethodInfo *method)
{
  struct BattleData_o *data; // x8
  BattleEntity_o *battle_ent; // x0

  data = this->fields.data;
  if ( !data || (battle_ent = this->fields.battle_ent) == 0LL )
    sub_B170D4();
  return BattleEntity__GetStageEntityAtWave(battle_ent, data->fields.wavecount, 0LL);
}


int32_t __fastcall BattleData__getStartBattleAssetId(BattleData_o *this, const MethodInfo *method)
{
  struct BattleData_o *data; // x8
  BattleEntity_o *battle_ent; // x0
  StageEntity_o *StageEntityAtWave; // x0

  data = this->fields.data;
  if ( !data
    || (battle_ent = this->fields.battle_ent) == 0LL
    || (StageEntityAtWave = BattleEntity__GetStageEntityAtWave(battle_ent, data->fields.wavecount, 0LL)) == 0LL )
  {
    sub_B170D4();
  }
  return StageEntity__getStartBattleAssetId(StageEntityAtWave, 0LL);
}


System_Int32_array *__fastcall BattleData__getStartMovieWave(BattleData_o *this, const MethodInfo *method)
{
  QuestPhaseEntity_o *questphase_ent; // x0

  questphase_ent = this->fields.questphase_ent;
  if ( !questphase_ent )
    sub_B170D4();
  return QuestPhaseEntity__GetStartMovieWave(questphase_ent, 0LL);
}


int32_t __fastcall BattleData__getSubCriticalCount(BattleData_o *this, const MethodInfo *method)
{
  return this->fields.subCriticalCount;
}


BattleServantData_array *__fastcall BattleData__getSubPlayerServantList(BattleData_o *this, const MethodInfo *method)
{
  __int64 v2; // x2
  __int64 v3; // x3
  __int64 v4; // x4
  __int64 v6; // x1
  __int64 v7; // x1
  __int64 v8; // x1
  __int64 v9; // x1
  __int64 v10; // x1
  __int64 v11; // x1
  __int64 v12; // x1
  __int64 v13; // x1
  __int64 v14; // x1
  __int64 v15; // x1
  struct System_Collections_Generic_List_BattleServantData__o *player_datalist; // x20
  BattleData___c_c *v17; // x0
  struct BattleData___c_StaticFields *static_fields; // x8
  System_Comparison_TitleInfoControl_EventEndTimeInfo__o *_9__443_0; // x21
  Il2CppObject *v20; // x22
  struct BattleData___c_StaticFields *v21; // x0
  __int64 v22; // x1
  __int64 v23; // x2
  __int64 v24; // x3
  __int64 v25; // x4
  System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData__o *v26; // x20
  struct System_Collections_Generic_List_BattleServantData__o *v27; // x25
  int size; // w21
  int v29; // w22
  unsigned int v30; // w24
  BattleServantData_o *v31; // x8
  struct System_Collections_Generic_List_BattleServantData__o *v32; // x25

  if ( (byte_40F6A59 & 1) == 0 )
  {
    sub_B16FFC(&Method_System_Comparison_BattleServantData___ctor__, method);
    sub_B16FFC(&System_Comparison_BattleServantData__TypeInfo, v6);
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleServantData__Add__, v7);
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleServantData__Sort__, v8);
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleServantData__ToArray__, v9);
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleServantData___ctor__, v10);
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleServantData__get_Count__, v11);
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleServantData__get_Item__, v12);
    sub_B16FFC(&System_Collections_Generic_List_BattleServantData__TypeInfo, v13);
    sub_B16FFC(&Method_BattleData___c__getSubPlayerServantList_b__443_0__, v14);
    sub_B16FFC(&BattleData___c_TypeInfo, v15);
    byte_40F6A59 = 1;
  }
  player_datalist = this->fields.player_datalist;
  v17 = BattleData___c_TypeInfo;
  if ( (BYTE3(BattleData___c_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0
    && !BattleData___c_TypeInfo->_2.cctor_finished )
  {
    j_il2cpp_runtime_class_init_0(BattleData___c_TypeInfo);
    v17 = BattleData___c_TypeInfo;
  }
  static_fields = v17->static_fields;
  _9__443_0 = (System_Comparison_TitleInfoControl_EventEndTimeInfo__o *)static_fields->__9__443_0;
  if ( !_9__443_0 )
  {
    if ( (BYTE3(v17->vtable._0_Equals.methodPtr) & 4) != 0 && !v17->_2.cctor_finished )
    {
      j_il2cpp_runtime_class_init_0(v17);
      static_fields = BattleData___c_TypeInfo->static_fields;
    }
    v20 = (Il2CppObject *)static_fields->__9;
    _9__443_0 = (System_Comparison_TitleInfoControl_EventEndTimeInfo__o *)sub_B170CC(
                                                                            System_Comparison_BattleServantData__TypeInfo,
                                                                            method,
                                                                            v2,
                                                                            v3,
                                                                            v4);
    System_Comparison_TitleInfoControl_EventEndTimeInfo____ctor(
      _9__443_0,
      v20,
      Method_BattleData___c__getSubPlayerServantList_b__443_0__,
      (const MethodInfo_25BFD48 *)Method_System_Comparison_BattleServantData___ctor__);
    v21 = BattleData___c_TypeInfo->static_fields;
    v21->__9__443_0 = (struct System_Comparison_BattleServantData__o *)_9__443_0;
    sub_B16F98(&v21->__9__443_0, _9__443_0);
  }
  if ( !player_datalist )
    goto LABEL_29;
  System_Collections_Generic_List_TitleInfoControl_EventEndTimeInfo___Sort(
    (System_Collections_Generic_List_TitleInfoControl_EventEndTimeInfo__o *)player_datalist,
    (System_Comparison_T__o *)_9__443_0,
    (const MethodInfo_2F27DB4 *)Method_System_Collections_Generic_List_BattleServantData__Sort__);
  v26 = (System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData__o *)sub_B170CC(
                                                                                                  System_Collections_Generic_List_BattleServantData__TypeInfo,
                                                                                                  v22,
                                                                                                  v23,
                                                                                                  v24,
                                                                                                  v25);
  System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData____ctor(
    v26,
    (const MethodInfo_2F25014 *)Method_System_Collections_Generic_List_BattleServantData___ctor__);
  v27 = this->fields.player_datalist;
  if ( !v27 )
    goto LABEL_29;
  size = v27->fields._size;
  if ( size >= 1 )
  {
    v29 = 1;
    do
    {
      v30 = v29 - 1;
      if ( v27->fields._size <= (unsigned int)(v29 - 1) )
        System_ThrowHelper__ThrowArgumentOutOfRangeException_41329284(0LL);
      v31 = v27->fields._items->m_Items[v30];
      if ( !v31 )
        break;
      if ( !v31->fields.isEntry )
      {
        v32 = this->fields.player_datalist;
        if ( !v32 )
          break;
        if ( v32->fields._size <= v30 )
          System_ThrowHelper__ThrowArgumentOutOfRangeException_41329284(0LL);
        if ( !v26 )
          break;
        System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData___Add(
          v26,
          (EventMissionProgressRequest_Argument_ProgressData_o *)v32->fields._items->m_Items[v30],
          (const MethodInfo_2F25CD8 *)Method_System_Collections_Generic_List_BattleServantData__Add__);
      }
      if ( v29 >= size )
        goto LABEL_27;
      v27 = this->fields.player_datalist;
      ++v29;
    }
    while ( v27 );
LABEL_29:
    sub_B170D4();
  }
LABEL_27:
  if ( !v26 )
    goto LABEL_29;
  return (BattleServantData_array *)System_Collections_Generic_List_WarBoardUiData_SaveData___ToArray(
                                      (System_Collections_Generic_List_WarBoardUiData_SaveData__o *)v26,
                                      (const MethodInfo_2F27E24 *)Method_System_Collections_Generic_List_BattleServantData__ToArray__);
}


int64_t __fastcall BattleData__getSuperBossMaxHp(BattleData_o *this, int32_t id, const MethodInfo *method)
{
  BattleInfoData_o *battle_info; // x0

  battle_info = this->fields.battle_info;
  if ( !battle_info )
    sub_B170D4();
  return BattleInfoData__getSuperBossMaxHp(battle_info, id, 0LL);
}


// local variable allocation has failed, the output may be wrong!
System_Int64_array *__fastcall BattleData__getSuperBossSplitHp(
        BattleData_o *this,
        int32_t id,
        const MethodInfo *method)
{
  __int64 v5; // x1
  __int64 v6; // x1
  WebViewManager_o *Instance; // x0
  EventSuperBossMaster_o *MasterData_WarQuestSelectionMaster; // x0
  struct BattleEntity_o *battle_ent; // x8
  EventSuperBossEntity_o *Entity; // x0
  __int64 v11; // x2

  if ( (byte_40F6AA8 & 1) == 0 )
  {
    sub_B16FFC(&Method_DataManager_GetMasterData_EventSuperBossMaster___, *(_QWORD *)&id);
    sub_B16FFC(&long___TypeInfo, v5);
    sub_B16FFC(&Method_SingletonMonoBehaviour_DataManager__get_Instance__, v6);
    byte_40F6AA8 = 1;
  }
  Instance = SingletonMonoBehaviour_WebViewManager___get_Instance((const MethodInfo_2A54F38 *)Method_SingletonMonoBehaviour_DataManager__get_Instance__);
  if ( !Instance
    || (MasterData_WarQuestSelectionMaster = (EventSuperBossMaster_o *)DataManager__GetMasterData_WarQuestSelectionMaster_(
                                                                         (DataManager_o *)Instance,
                                                                         (const MethodInfo_18C3284 *)Method_DataManager_GetMasterData_EventSuperBossMaster___),
        (battle_ent = this->fields.battle_ent) == 0LL)
    || !MasterData_WarQuestSelectionMaster )
  {
    sub_B170D4();
  }
  Entity = EventSuperBossMaster__GetEntity(MasterData_WarQuestSelectionMaster, battle_ent->fields.eventId, id, 0LL);
  if ( Entity )
    return Entity->fields.splitHp;
  else
    return (System_Int64_array *)sub_B17014(long___TypeInfo, 0LL, v11);
}


// local variable allocation has failed, the output may be wrong!
BattleServantData_array *__fastcall BattleData__getTargetEnemy(
        BattleData_o *this,
        bool checkDead,
        const MethodInfo *method)
{
  __int64 v3; // x3
  __int64 v4; // x4
  __int64 v7; // x1
  __int64 v8; // x1
  __int64 v9; // x1
  System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData__o *v10; // x19
  const MethodInfo *v11; // x2
  BattleServantData_o *ServantData; // x0
  EventMissionProgressRequest_Argument_ProgressData_o *v13; // x21

  if ( (byte_40F6A55 & 1) == 0 )
  {
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleServantData__Add__, checkDead);
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleServantData__ToArray__, v7);
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleServantData___ctor__, v8);
    sub_B16FFC(&System_Collections_Generic_List_BattleServantData__TypeInfo, v9);
    byte_40F6A55 = 1;
  }
  v10 = (System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData__o *)sub_B170CC(
                                                                                                  System_Collections_Generic_List_BattleServantData__TypeInfo,
                                                                                                  checkDead,
                                                                                                  method,
                                                                                                  v3,
                                                                                                  v4);
  System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData____ctor(
    v10,
    (const MethodInfo_2F25014 *)Method_System_Collections_Generic_List_BattleServantData___ctor__);
  ServantData = BattleData__getServantData(this, this->fields.globaltargetId, v11);
  if ( !ServantData
    || (v13 = (EventMissionProgressRequest_Argument_ProgressData_o *)ServantData, checkDead)
    && BattleServantData__isDead(ServantData, 0LL) )
  {
    if ( !v10 )
LABEL_11:
      sub_B170D4();
  }
  else
  {
    if ( !v10 )
      goto LABEL_11;
    System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData___Add(
      v10,
      v13,
      (const MethodInfo_2F25CD8 *)Method_System_Collections_Generic_List_BattleServantData__Add__);
  }
  return (BattleServantData_array *)System_Collections_Generic_List_WarBoardUiData_SaveData___ToArray(
                                      (System_Collections_Generic_List_WarBoardUiData_SaveData__o *)v10,
                                      (const MethodInfo_2F27E24 *)Method_System_Collections_Generic_List_BattleServantData__ToArray__);
}


int32_t __fastcall BattleData__getTargetEnemyId(BattleData_o *this, bool checkDead, const MethodInfo *method)
{
  BattleServantData_o *ServantData; // x0
  BattleServantData_o *v5; // x19

  ServantData = BattleData__getServantData(this, this->fields.globaltargetId, method);
  if ( !ServantData )
    return -1;
  v5 = ServantData;
  if ( checkDead && BattleServantData__isDead(ServantData, 0LL) )
    return -1;
  else
    return v5->fields.uniqueId;
}


// local variable allocation has failed, the output may be wrong!
System_Int32_array *__fastcall BattleData__getTargetEnemyIdList(
        BattleData_o *this,
        bool checkDead,
        const MethodInfo *method)
{
  __int64 v3; // x3
  __int64 v4; // x4
  __int64 v7; // x1
  __int64 v8; // x1
  __int64 v9; // x1
  System_Collections_Generic_List_int__o *v10; // x21
  const MethodInfo *v11; // x2
  int32_t TargetEnemyId; // w0

  if ( (byte_40F6A56 & 1) == 0 )
  {
    sub_B16FFC(&Method_System_Collections_Generic_List_int__Add__, checkDead);
    sub_B16FFC(&Method_System_Collections_Generic_List_int__ToArray__, v7);
    sub_B16FFC(&Method_System_Collections_Generic_List_int___ctor__, v8);
    sub_B16FFC(&System_Collections_Generic_List_int__TypeInfo, v9);
    byte_40F6A56 = 1;
  }
  v10 = (System_Collections_Generic_List_int__o *)sub_B170CC(
                                                    System_Collections_Generic_List_int__TypeInfo,
                                                    checkDead,
                                                    method,
                                                    v3,
                                                    v4);
  System_Collections_Generic_List_int____ctor(
    v10,
    (const MethodInfo_2F0F794 *)Method_System_Collections_Generic_List_int___ctor__);
  TargetEnemyId = BattleData__getTargetEnemyId(this, checkDead, v11);
  if ( TargetEnemyId == -1 )
  {
    if ( v10 )
      return System_Collections_Generic_List_int___ToArray(
               v10,
               (const MethodInfo_2F125FC *)Method_System_Collections_Generic_List_int__ToArray__);
LABEL_8:
    sub_B170D4();
  }
  if ( !v10 )
    goto LABEL_8;
  System_Collections_Generic_List_int___Add(
    v10,
    TargetEnemyId,
    (const MethodInfo_2F104F0 *)Method_System_Collections_Generic_List_int__Add__);
  return System_Collections_Generic_List_int___ToArray(
           v10,
           (const MethodInfo_2F125FC *)Method_System_Collections_Generic_List_int__ToArray__);
}


// local variable allocation has failed, the output may be wrong!
int32_t __fastcall BattleData__getTargetLock(
        BattleData_o *this,
        int32_t uniqueId,
        bool isMaster,
        System_Int32_array *addIndiv,
        const MethodInfo *method)
{
  __int64 v9; // x1
  __int64 v10; // x1
  __int64 v11; // x1
  __int64 v12; // x1
  __int64 v13; // x1
  __int64 v14; // x1
  __int64 v15; // x1
  BattleServantData_o *ServantData; // x0
  __int64 v17; // x1
  __int64 v18; // x2
  __int64 v19; // x3
  __int64 v20; // x4
  BattleServantData_o *v21; // x23
  BattleBuffData_CheckIndividualitiesData_o *v22; // x21
  System_Int32_array *selfConcatSvtIndividualities_k__BackingField; // x21
  WebViewManager_o *Instance; // x0
  struct UIPanel_o *basePanel; // x8
  __int64 v26; // x11
  __int64 v27; // x8
  bool v28; // zf
  __int64 v29; // x8
  System_Collections_Generic_List_int__o *v30; // x20
  const MethodInfo *v31; // x2
  struct System_Collections_Generic_List_int__o *lockTargetIdList; // x22
  unsigned __int64 v33; // x23
  BattleServantData_o *v34; // x0
  int32_t *v35; // x22
  int32_t size; // w0
  int32_t Next; // w19
  int32_t *p_globaltargetId; // x8

  if ( (byte_40F6AB1 & 1) == 0 )
  {
    sub_B16FFC(&BattleRootComponent_TypeInfo, *(_QWORD *)&uniqueId);
    sub_B16FFC(&BattleBuffData_CheckIndividualitiesData_TypeInfo, v9);
    sub_B16FFC(&Method_System_Collections_Generic_List_int__Add__, v10);
    sub_B16FFC(&Method_System_Collections_Generic_List_int___ctor__, v11);
    sub_B16FFC(&Method_System_Collections_Generic_List_int__get_Count__, v12);
    sub_B16FFC(&Method_System_Collections_Generic_List_int__get_Item__, v13);
    sub_B16FFC(&System_Collections_Generic_List_int__TypeInfo, v14);
    sub_B16FFC(&Method_SingletonMonoBehaviour_AvalonSceneManager__get_Instance__, v15);
    byte_40F6AB1 = 1;
  }
  ServantData = BattleData__getServantData(this, uniqueId, (const MethodInfo *)isMaster);
  if ( ServantData )
  {
    v21 = ServantData;
    v22 = (BattleBuffData_CheckIndividualitiesData_o *)sub_B170CC(
                                                         BattleBuffData_CheckIndividualitiesData_TypeInfo,
                                                         v17,
                                                         v18,
                                                         v19,
                                                         v20);
    BattleBuffData_CheckIndividualitiesData___ctor(v22, v21, 0LL, 0LL, 0LL, 0LL, 0LL);
    if ( !v22 )
      goto LABEL_37;
    selfConcatSvtIndividualities_k__BackingField = v22->fields._selfConcatSvtIndividualities_k__BackingField;
    if ( !isMaster )
      goto LABEL_16;
  }
  else
  {
    selfConcatSvtIndividualities_k__BackingField = 0LL;
    if ( !isMaster )
      goto LABEL_16;
  }
  Instance = SingletonMonoBehaviour_WebViewManager___get_Instance((const MethodInfo_2A54F38 *)Method_SingletonMonoBehaviour_AvalonSceneManager__get_Instance__);
  if ( !Instance )
    goto LABEL_37;
  basePanel = Instance->fields.basePanel;
  if ( !basePanel )
    goto LABEL_37;
  v26 = *(&BattleRootComponent_TypeInfo->_2.bitflags2 + 1);
  if ( *(&basePanel->klass->_2.bitflags2 + 1) < (unsigned int)v26 )
    goto LABEL_37;
  if ( (BattleRootComponent_c *)basePanel->klass->_2.typeHierarchy[v26 - 1] != BattleRootComponent_TypeInfo )
    goto LABEL_37;
  v27 = *(_QWORD *)&basePanel->fields.updateAnchors;
  if ( !v27 )
    goto LABEL_37;
  v28 = *(_DWORD *)(v27 + 392) == 1;
  v29 = 736LL;
  if ( !v28 )
    v29 = 744LL;
  selfConcatSvtIndividualities_k__BackingField = *(System_Int32_array **)((char *)&this->klass + v29);
LABEL_16:
  if ( addIndiv )
    selfConcatSvtIndividualities_k__BackingField = CommonFunction__JoinIndiv(
                                                     selfConcatSvtIndividualities_k__BackingField,
                                                     addIndiv,
                                                     0LL);
  v30 = (System_Collections_Generic_List_int__o *)sub_B170CC(
                                                    System_Collections_Generic_List_int__TypeInfo,
                                                    v17,
                                                    v18,
                                                    v19,
                                                    v20);
  System_Collections_Generic_List_int____ctor(
    v30,
    (const MethodInfo_2F0F794 *)Method_System_Collections_Generic_List_int___ctor__);
  lockTargetIdList = this->fields.lockTargetIdList;
  if ( !lockTargetIdList )
    goto LABEL_37;
  v33 = 0LL;
  while ( (__int64)v33 < lockTargetIdList->fields._size )
  {
    if ( v33 >= (unsigned int)lockTargetIdList->fields._size )
      System_ThrowHelper__ThrowArgumentOutOfRangeException_41329284(0LL);
    v34 = BattleData__getServantData(this, lockTargetIdList->fields._items->m_Items[v33 + 1], v31);
    if ( v34 )
    {
      v35 = (int32_t *)v34;
      if ( BattleServantData__isUpHate(v34, selfConcatSvtIndividualities_k__BackingField, 0LL)
        && (*(int (__fastcall **)(int32_t *, _QWORD))(*(_QWORD *)v35 + 456LL))(v35, *(_QWORD *)(*(_QWORD *)v35 + 464LL)) >= 1 )
      {
        if ( !v30 )
          goto LABEL_37;
        System_Collections_Generic_List_int___Add(
          v30,
          v35[6],
          (const MethodInfo_2F104F0 *)Method_System_Collections_Generic_List_int__Add__);
      }
      lockTargetIdList = this->fields.lockTargetIdList;
      ++v33;
      if ( lockTargetIdList )
        continue;
    }
    goto LABEL_37;
  }
  if ( !v30 )
LABEL_37:
    sub_B170D4();
  size = v30->fields._size;
  if ( size )
  {
    Next = BattleRandom__getNext(size, 0LL);
    if ( v30->fields._size <= (unsigned int)Next )
      System_ThrowHelper__ThrowArgumentOutOfRangeException_41329284(0LL);
    p_globaltargetId = &v30->fields._items->m_Items[Next + 1];
  }
  else
  {
    p_globaltargetId = &this->fields.globaltargetId;
  }
  return *p_globaltargetId;
}


BattleServantData_o *__fastcall BattleData__getTopFieldPlayerServant(BattleData_o *this, const MethodInfo *method)
{
  __int64 v2; // x2
  BattleData_o *v3; // x19
  __int64 v4; // x1
  struct System_Collections_Generic_List_BattleServantData__o *player_datalist; // x8
  struct System_Int32_array *p_entryid; // x21
  int size; // w23
  unsigned __int64 v8; // x22
  il2cpp_array_size_t max_length; // w8
  int32_t v10; // w20
  unsigned int v11; // w25
  __int64 v12; // x24
  struct System_Collections_Generic_List_BattleServantData__o *v13; // x26
  BattleServantData_o *v14; // x0
  struct System_Collections_Generic_List_BattleServantData__o *v15; // x19
  BattleServantData_o **m_Items; // x8
  struct System_Collections_Generic_List_BattleServantData__o *v17; // x19

  v3 = this;
  if ( (byte_40F6A58 & 1) == 0 )
  {
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleServantData__get_Count__, method);
    this = (BattleData_o *)sub_B16FFC(&Method_System_Collections_Generic_List_BattleServantData__get_Item__, v4);
    byte_40F6A58 = 1;
  }
  player_datalist = v3->fields.player_datalist;
  if ( !player_datalist )
    goto LABEL_27;
  p_entryid = v3->fields.p_entryid;
  if ( !p_entryid )
    goto LABEL_27;
  if ( (int)*(_QWORD *)&p_entryid->max_length < 1 )
  {
LABEL_18:
    v15 = v3->fields.player_datalist;
    if ( v15 )
    {
      if ( !v15->fields._size )
        System_ThrowHelper__ThrowArgumentOutOfRangeException_41329284(0LL);
      m_Items = v15->fields._items->m_Items;
      return *m_Items;
    }
LABEL_27:
    sub_B170D4();
  }
  size = player_datalist->fields._size;
  v8 = 0LL;
  max_length = *(_QWORD *)&p_entryid->max_length;
  while ( 1 )
  {
    if ( v8 >= max_length )
    {
      sub_B17100(this, method, v2);
      sub_B170A0();
    }
    v10 = p_entryid->m_Items[v8 + 1];
    if ( v10 >= 1 && size >= 1 )
      break;
LABEL_17:
    max_length = p_entryid->max_length;
    if ( (__int64)++v8 >= (int)max_length )
      goto LABEL_18;
  }
  v11 = 0;
  v12 = 32LL;
  while ( 1 )
  {
    v13 = v3->fields.player_datalist;
    if ( !v13 )
      goto LABEL_27;
    if ( v13->fields._size <= v11 )
      System_ThrowHelper__ThrowArgumentOutOfRangeException_41329284(0LL);
    v14 = *(BattleServantData_o **)((char *)&v13->fields._items->obj.klass + v12);
    if ( !v14 )
      goto LABEL_27;
    this = (BattleData_o *)BattleServantData__checkID(v14, v10, 0LL);
    if ( ((unsigned __int8)this & 1) != 0 )
      break;
    ++v11;
    v12 += 8LL;
    if ( (int)v11 >= size )
      goto LABEL_17;
  }
  v17 = v3->fields.player_datalist;
  if ( !v17 )
    goto LABEL_27;
  if ( v17->fields._size <= v11 )
    System_ThrowHelper__ThrowArgumentOutOfRangeException_41329284(0LL);
  m_Items = (BattleServantData_o **)((char *)v17->fields._items + v12);
  return *m_Items;
}


int32_t __fastcall BattleData__getTotalCriticalPoint(BattleData_o *this, const MethodInfo *method)
{
  return this->fields.totalCriticalStars;
}


int32_t __fastcall BattleData__getTurnSituationType(BattleData_o *this, const MethodInfo *method)
{
  QuestPhaseEntity_o *questphase_ent; // x0

  questphase_ent = this->fields.questphase_ent;
  if ( !questphase_ent )
    sub_B170D4();
  return QuestPhaseEntity__getTurnSituationType(questphase_ent, 0LL);
}


System_Collections_Generic_Dictionary_int__int__o *__fastcall BattleData__getUsedEventMasterSkillDict(
        BattleData_o *this,
        const MethodInfo *method)
{
  return this->fields.usedEventMasterSkillDict;
}


int32_t __fastcall BattleData__getUsedEventMasterSkillEventActivityPoint(BattleData_o *this, const MethodInfo *method)
{
  __int64 v3; // x1
  __int64 v4; // x1
  __int64 v5; // x1
  __int64 v6; // x1
  __int64 v7; // x1
  System_Collections_Generic_Dictionary_int__int__o *usedEventMasterSkillDict; // x0
  int32_t v9; // w19
  const MethodInfo *v10; // x2
  __int128 v12[2]; // [xsp+0h] [xbp-60h] BYREF
  System_Collections_Generic_Dictionary_Enumerator_TKey__TValue__o v13; // [xsp+20h] [xbp-40h] BYREF

  if ( (byte_40F6A02 & 1) == 0 )
  {
    sub_B16FFC(&Method_System_Collections_Generic_Dictionary_int__int__GetEnumerator__, method);
    sub_B16FFC(&Method_System_Collections_Generic_Dictionary_Enumerator_int__int__Dispose__, v3);
    sub_B16FFC(&Method_System_Collections_Generic_Dictionary_Enumerator_int__int__MoveNext__, v4);
    sub_B16FFC(&Method_System_Collections_Generic_Dictionary_Enumerator_int__int__get_Current__, v5);
    sub_B16FFC(&Method_System_Collections_Generic_KeyValuePair_int__int__get_Key__, v6);
    sub_B16FFC(&Method_System_Collections_Generic_KeyValuePair_int__int__get_Value__, v7);
    byte_40F6A02 = 1;
  }
  memset(&v13, 0, 32);
  usedEventMasterSkillDict = this->fields.usedEventMasterSkillDict;
  if ( !usedEventMasterSkillDict )
    sub_B170D4();
  System_Collections_Generic_Dictionary_int__int___GetEnumerator(
    (System_Collections_Generic_Dictionary_Enumerator_TKey__TValue__o *)v12,
    usedEventMasterSkillDict,
    (const MethodInfo_2DDD528 *)Method_System_Collections_Generic_Dictionary_int__int__GetEnumerator__);
  v9 = 0;
  *(_OWORD *)&v13.fields.dictionary = v12[0];
  v13.fields.current = (struct System_Collections_Generic_KeyValuePair_TKey__TValue__o)v12[1];
  while ( System_Collections_Generic_Dictionary_Enumerator_int__int___MoveNext(
            &v13,
            (const MethodInfo_272605C *)Method_System_Collections_Generic_Dictionary_Enumerator_int__int__MoveNext__) )
  {
    if ( HIDWORD(v13.fields.current.fields.key) )
      v9 += BattleData__getEventActivityPoint(this, (int32_t)v13.fields.current.fields.key, v10);
  }
  System_Collections_Generic_Dictionary_Enumerator_int__int___Dispose(
    &v13,
    (const MethodInfo_27261A4 *)Method_System_Collections_Generic_Dictionary_Enumerator_int__int__Dispose__);
  return v9;
}


CommandCodeInfo_o *__fastcall BattleData__getUserCommandCode(
        BattleData_o *this,
        int64_t userCommandCodeId,
        const MethodInfo *method)
{
  BattleEntity_o *battle_ent; // x0

  battle_ent = this->fields.battle_ent;
  if ( !battle_ent )
    sub_B170D4();
  return BattleEntity__getUserCommandCode(battle_ent, userCommandCodeId, 0LL);
}


int32_t __fastcall BattleData__getValidStarMax(BattleData_o *this, const MethodInfo *method)
{
  return 50;
}


System_Int32_array *__fastcall BattleData__getWaveClearTurn(const MethodInfo *method)
{
  __int64 v1; // x1
  __int64 v2; // x1
  __int64 v3; // x1
  __int64 v4; // x1
  __int64 v5; // x1
  __int64 v6; // x1
  __int64 v7; // x1
  __int64 v8; // x1
  __int64 v9; // x1
  __int64 v10; // x2
  System_String_o *String; // x19
  System_Char_array *v12; // x0
  __int64 v13; // x2
  System_String_array *v14; // x0
  System_String_array *v15; // x19
  __int64 v16; // x1
  __int64 v17; // x1
  __int64 v18; // x2
  __int64 v19; // x3
  __int64 v20; // x4
  BattleData___c_c *v21; // x0
  struct BattleData___c_StaticFields *static_fields; // x8
  System_Converter_BattleActionData_HealData__int__o *_9__515_0; // x20
  Il2CppObject *v24; // x21
  struct BattleData___c_StaticFields *v25; // x0

  if ( (byte_40F6A82 & 1) == 0 )
  {
    sub_B16FFC(&Method_System_Array_ConvertAll_string__int___, v1);
    sub_B16FFC(&char___TypeInfo, v2);
    sub_B16FFC(&Method_System_Converter_string__int___ctor__, v3);
    sub_B16FFC(&System_Converter_string__int__TypeInfo, v4);
    sub_B16FFC(&EncryptedPlayerPrefs_TypeInfo, v5);
    sub_B16FFC(&int___TypeInfo, v6);
    sub_B16FFC(&Method_BattleData___c__getWaveClearTurn_b__515_0__, v7);
    sub_B16FFC(&BattleData___c_TypeInfo, v8);
    sub_B16FFC(&StringLiteral_10850/*"QUESTUSEDTURNSAVEKEY"*/, v9);
    byte_40F6A82 = 1;
  }
  if ( (BYTE3(EncryptedPlayerPrefs_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0
    && !EncryptedPlayerPrefs_TypeInfo->_2.cctor_finished )
  {
    j_il2cpp_runtime_class_init_0(EncryptedPlayerPrefs_TypeInfo);
  }
  if ( !EncryptedPlayerPrefs__HasKey((System_String_o *)StringLiteral_10850/*"QUESTUSEDTURNSAVEKEY"*/, 0LL) )
    return (System_Int32_array *)sub_B17014(int___TypeInfo, 0LL, v10);
  if ( (BYTE3(EncryptedPlayerPrefs_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0
    && !EncryptedPlayerPrefs_TypeInfo->_2.cctor_finished )
  {
    j_il2cpp_runtime_class_init_0(EncryptedPlayerPrefs_TypeInfo);
  }
  String = EncryptedPlayerPrefs__GetString((System_String_o *)StringLiteral_10850/*"QUESTUSEDTURNSAVEKEY"*/, 0LL);
  if ( !String )
    return (System_Int32_array *)sub_B17014(int___TypeInfo, 0LL, v10);
  v12 = (System_Char_array *)sub_B17014(char___TypeInfo, 1LL, v10);
  if ( !v12 )
    sub_B170D4();
  if ( !v12->max_length )
  {
    sub_B17100(v12, v12, v13);
    sub_B170A0();
  }
  v12->m_Items[2] = 44;
  v14 = System_String__Split(String, v12, 0LL);
  v15 = v14;
  if ( !v14 )
    sub_B170D4();
  v16 = *(_QWORD *)&v14->max_length;
  if ( !v16 )
    return (System_Int32_array *)sub_B17014(int___TypeInfo, 0LL, v10);
  sub_B17014(int___TypeInfo, v16, v10);
  v21 = BattleData___c_TypeInfo;
  if ( (BYTE3(BattleData___c_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0
    && !BattleData___c_TypeInfo->_2.cctor_finished )
  {
    j_il2cpp_runtime_class_init_0(BattleData___c_TypeInfo);
    v21 = BattleData___c_TypeInfo;
  }
  static_fields = v21->static_fields;
  _9__515_0 = (System_Converter_BattleActionData_HealData__int__o *)static_fields->__9__515_0;
  if ( !_9__515_0 )
  {
    if ( (BYTE3(v21->vtable._0_Equals.methodPtr) & 4) != 0 && !v21->_2.cctor_finished )
    {
      j_il2cpp_runtime_class_init_0(v21);
      static_fields = BattleData___c_TypeInfo->static_fields;
    }
    v24 = (Il2CppObject *)static_fields->__9;
    _9__515_0 = (System_Converter_BattleActionData_HealData__int__o *)sub_B170CC(
                                                                        System_Converter_string__int__TypeInfo,
                                                                        v17,
                                                                        v18,
                                                                        v19,
                                                                        v20);
    System_Converter_BattleActionData_HealData__int____ctor(
      _9__515_0,
      v24,
      Method_BattleData___c__getWaveClearTurn_b__515_0__,
      (const MethodInfo_266B524 *)Method_System_Converter_string__int___ctor__);
    v25 = BattleData___c_TypeInfo->static_fields;
    v25->__9__515_0 = (struct System_Converter_string__int__o *)_9__515_0;
    sub_B16F98(&v25->__9__515_0, _9__515_0);
  }
  return System_Array__ConvertAll_string__int_(
           v15,
           (System_Converter_TInput__TOutput__o *)_9__515_0,
           (const MethodInfo_2043230 *)Method_System_Array_ConvertAll_string__int___);
}


System_String_array *__fastcall BattleData__getWaveStartMovie(BattleData_o *this, const MethodInfo *method)
{
  QuestPhaseEntity_o *questphase_ent; // x0

  questphase_ent = this->fields.questphase_ent;
  if ( !questphase_ent )
    sub_B170D4();
  return QuestPhaseEntity__GetWaveStartMovie(questphase_ent, 0LL);
}


int32_t __fastcall BattleData__getWinResult(BattleData_o *this, const MethodInfo *method)
{
  if ( this->fields.win_lose == 1 )
    return this->fields.winResult;
  else
    return 0;
}


float __fastcall BattleData__get_AccelSystemTimeScale(BattleData_o *this, const MethodInfo *method)
{
  return (float)this->fields.systemflg_acceleration;
}


bool __fastcall BattleData__get_AddAttack(BattleData_o *this, const MethodInfo *method)
{
  struct BattleComboData_o *combodata; // x8

  combodata = this->fields.combodata;
  return combodata && combodata->fields.samecount > 2;
}


System_Collections_Generic_List_AiNpcBattleServantData__o *__fastcall BattleData__get_AiNpcDataList(
        BattleData_o *this,
        const MethodInfo *method)
{
  return this->fields.aiNpcDataList;
}


DrawLotsDisplayMessage_o *__fastcall BattleData__get_DrawLotsDispMsg(BattleData_o *this, const MethodInfo *method)
{
  return this->fields._DrawLotsDispMsg_k__BackingField;
}


System_Int32_array *__fastcall BattleData__get_EnemyAddOrderPosArray(BattleData_o *this, const MethodInfo *method)
{
  return this->fields._EnemyAddOrderPosArray_k__BackingField;
}


int32_t __fastcall BattleData__get_EnemyCountStartValue(BattleData_o *this, const MethodInfo *method)
{
  return this->fields._EnemyCountStartValue_k__BackingField;
}


int32_t __fastcall BattleData__get_EnemyEntryCountOnThisTurn(BattleData_o *this, const MethodInfo *method)
{
  return this->fields._EnemyEntryCountOnThisTurn_k__BackingField;
}


int32_t __fastcall BattleData__get_EnemyEntryMaxCountEachTurn(BattleData_o *this, const MethodInfo *method)
{
  return this->fields._EnemyEntryMaxCountEachTurn_k__BackingField;
}


int32_t __fastcall BattleData__get_EnemyFieldPosCount(BattleData_o *this, const MethodInfo *method)
{
  return this->fields._EnemyFieldPosCount_k__BackingField;
}


bool __fastcall BattleData__get_ExistOverwriteBgIndividuality(BattleData_o *this, const MethodInfo *method)
{
  return this->fields.overwriteBgIndividuality != 0LL;
}


BattleFieldEnvironmentData_o *__fastcall BattleData__get_FieldEnvData(BattleData_o *this, const MethodInfo *method)
{
  return this->fields._FieldEnvData_k__BackingField;
}


BattleData_o *__fastcall BattleData__get_Instance(const MethodInfo *method)
{
  __int64 v1; // x1
  __int64 v2; // x1
  __int64 v3; // x1
  __int64 v4; // x1
  BattleData_c *v5; // x0
  UnityEngine_Object_o *instance; // x19
  intptr_t v7; // w19
  System_Type_o *TypeFromHandle; // x19
  UnityEngine_Object_o *ObjectOfType; // x0
  BattleData_c *v10; // x1
  UnityEngine_Object_o *v11; // x19
  struct BattleData_StaticFields *static_fields; // x0
  __int64 v13; // x9
  BattleData_c *v14; // x0
  BattleData_o *v16; // x0
  const MethodInfo *v17; // x1
  System_RuntimeTypeHandle_o v18; // 0:w0.4

  if ( (byte_40F69F9 & 1) == 0 )
  {
    sub_B16FFC(&BattleData_var, v1);
    sub_B16FFC(&BattleData_TypeInfo, v2);
    sub_B16FFC(&UnityEngine_Object_TypeInfo, v3);
    sub_B16FFC(&System_Type_TypeInfo, v4);
    byte_40F69F9 = 1;
  }
  v5 = BattleData_TypeInfo;
  if ( (BYTE3(BattleData_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0 && !BattleData_TypeInfo->_2.cctor_finished )
  {
    j_il2cpp_runtime_class_init_0(BattleData_TypeInfo);
    v5 = BattleData_TypeInfo;
  }
  instance = (UnityEngine_Object_o *)v5->static_fields->instance;
  if ( (BYTE3(UnityEngine_Object_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0
    && !UnityEngine_Object_TypeInfo->_2.cctor_finished )
  {
    j_il2cpp_runtime_class_init_0(UnityEngine_Object_TypeInfo);
  }
  if ( UnityEngine_Object__op_Equality(instance, 0LL, 0LL) )
  {
    v7 = (int)BattleData_var;
    if ( (BYTE3(System_Type_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0 && !System_Type_TypeInfo->_2.cctor_finished )
      j_il2cpp_runtime_class_init_0(System_Type_TypeInfo);
    v18.fields.value = v7;
    TypeFromHandle = System_Type__GetTypeFromHandle(v18, 0LL);
    if ( (BYTE3(UnityEngine_Object_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0
      && !UnityEngine_Object_TypeInfo->_2.cctor_finished )
    {
      j_il2cpp_runtime_class_init_0(UnityEngine_Object_TypeInfo);
    }
    ObjectOfType = UnityEngine_Object__FindObjectOfType(TypeFromHandle, 0LL);
    v10 = BattleData_TypeInfo;
    v11 = ObjectOfType;
    if ( (BYTE3(BattleData_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0 && !BattleData_TypeInfo->_2.cctor_finished )
    {
      j_il2cpp_runtime_class_init_0(BattleData_TypeInfo);
      v10 = BattleData_TypeInfo;
    }
    static_fields = v10->static_fields;
    if ( v11 )
    {
      v13 = *(&v10->_2.bitflags2 + 1);
      if ( *(&v11->klass->_2.bitflags2 + 1) < (unsigned int)v13
        || (BattleData_c *)v11->klass->_2.typeHierarchy[v13 - 1] != v10 )
      {
        v16 = (BattleData_o *)sub_B173C8(v11);
        return (BattleData_o *)BattleData__get_eventId(v16, v17);
      }
    }
    static_fields->instance = (struct BattleData_o *)v11;
    sub_B16F98(static_fields, v11);
    UnityEngine_Object__op_Equality((UnityEngine_Object_o *)BattleData_TypeInfo->static_fields->instance, 0LL, 0LL);
  }
  v14 = BattleData_TypeInfo;
  if ( (BYTE3(BattleData_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0 && !BattleData_TypeInfo->_2.cctor_finished )
  {
    j_il2cpp_runtime_class_init_0(BattleData_TypeInfo);
    v14 = BattleData_TypeInfo;
  }
  return v14->static_fields->instance;
}


bool __fastcall BattleData__get_IsEnemyPosCountNormal(BattleData_o *this, const MethodInfo *method)
{
  return this->fields._EnemyFieldPosCount_k__BackingField < 4;
}


bool __fastcall BattleData__get_IsHighspeedTd(BattleData_o *this, const MethodInfo *method)
{
  __int64 v3; // x1
  __int64 v4; // x1
  __int64 v5; // x1
  WebViewManager_o *Instance; // x0
  UnityEngine_Object_o *webView; // x20
  WebViewManager_o *v8; // x0
  UnityEngine_GameObject_o *v9; // x0
  srcLineSprite_o *Component_srcLineSprite; // x0
  srcLineSprite_o *v11; // x20
  BattleServantData_o *monitor; // x0
  BattleServantData_o *v13; // x0
  BattleServantData_o *v14; // x0
  BattleServantData_o *v15; // x0

  if ( (byte_40F6A6F & 1) == 0 )
  {
    sub_B16FFC(&Method_UnityEngine_GameObject_GetComponent_BattleActorControl___, method);
    sub_B16FFC(&UnityEngine_Object_TypeInfo, v3);
    sub_B16FFC(&OptionManager_TypeInfo, v4);
    sub_B16FFC(&Method_SingletonMonoBehaviour_BattleSequenceManager__get_Instance__, v5);
    byte_40F6A6F = 1;
  }
  Instance = SingletonMonoBehaviour_WebViewManager___get_Instance((const MethodInfo_2A54F38 *)Method_SingletonMonoBehaviour_BattleSequenceManager__get_Instance__);
  if ( !Instance )
    goto LABEL_26;
  webView = (UnityEngine_Object_o *)Instance->fields.webView;
  if ( (BYTE3(UnityEngine_Object_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0
    && !UnityEngine_Object_TypeInfo->_2.cctor_finished )
  {
    j_il2cpp_runtime_class_init_0(UnityEngine_Object_TypeInfo);
  }
  if ( UnityEngine_Object__op_Inequality(webView, 0LL, 0LL) )
  {
    v8 = SingletonMonoBehaviour_WebViewManager___get_Instance((const MethodInfo_2A54F38 *)Method_SingletonMonoBehaviour_BattleSequenceManager__get_Instance__);
    if ( !v8 )
      goto LABEL_26;
    v9 = (UnityEngine_GameObject_o *)v8->fields.webView;
    if ( !v9 )
      goto LABEL_26;
    Component_srcLineSprite = UnityEngine_GameObject__GetComponent_srcLineSprite_(
                                v9,
                                (const MethodInfo_19D14E0 *)Method_UnityEngine_GameObject_GetComponent_BattleActorControl___);
    if ( !Component_srcLineSprite )
      goto LABEL_26;
    v11 = Component_srcLineSprite;
    monitor = (BattleServantData_o *)Component_srcLineSprite[3].monitor;
    if ( !monitor )
      goto LABEL_26;
    if ( BattleServantData__IsOnlyFirstForcedOneSpeed(monitor, 0LL) )
      return 0;
    if ( (BYTE3(OptionManager_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0
      && !OptionManager_TypeInfo->_2.cctor_finished )
    {
      j_il2cpp_runtime_class_init_0(OptionManager_TypeInfo);
    }
    if ( !OptionManager__GetTDPlaySpeed(0LL) )
    {
      v13 = (BattleServantData_o *)v11[3].monitor;
      if ( !v13 )
        goto LABEL_26;
      if ( BattleServantData__CheckFirstNpPlay(v13, this, 0LL) )
        return 0;
    }
    v14 = (BattleServantData_o *)v11[3].monitor;
    if ( !v14 )
      goto LABEL_26;
    if ( BattleServantData__IsNpEffectSpeedFix(v14, 0LL) )
    {
      v15 = (BattleServantData_o *)v11[3].monitor;
      if ( v15 )
        return BattleServantData__IsNpDoubleSpeed(v15, 0LL);
LABEL_26:
      sub_B170D4();
    }
  }
  if ( this->fields.systemflg_TdConstantvelocity )
    return 0;
  return this->fields.systemflg_acceleration > 1;
}


bool __fastcall BattleData__get_IsInTactical(BattleData_o *this, const MethodInfo *method)
{
  ChangeBattlePhaseNotify_o *changePhaseNotify; // x0
  int32_t v4; // w0
  ChangeBattlePhaseNotify_o *v5; // x0

  changePhaseNotify = this->fields.changePhaseNotify;
  if ( !changePhaseNotify )
    goto LABEL_6;
  v4 = ChangeBattlePhaseNotify__get_Phase(changePhaseNotify, 0LL);
  if ( v4 != 1 )
  {
    v5 = this->fields.changePhaseNotify;
    if ( v5 )
    {
      LOBYTE(v4) = ChangeBattlePhaseNotify__get_Phase(v5, 0LL) == 2;
      return v4;
    }
LABEL_6:
    sub_B170D4();
  }
  return v4;
}


bool __fastcall BattleData__get_IsReleaseUnusedAssetsWhenEntryMember(BattleData_o *this, const MethodInfo *method)
{
  return this->fields._IsReleaseUnusedAssetsWhenEntryMember_k__BackingField;
}


System_Int32_array_array *__fastcall BattleData__get_VoicePlayedList(BattleData_o *this, const MethodInfo *method)
{
  __int64 v2; // x2
  __int64 v3; // x3
  __int64 v4; // x4
  __int64 v6; // x1
  __int64 v7; // x1
  __int64 v8; // x1
  __int64 v9; // x1
  __int64 v10; // x1
  __int64 v11; // x1
  __int64 v12; // x1
  __int64 v13; // x1
  __int64 v14; // x1
  __int64 v15; // x1
  __int64 v16; // x1
  __int64 v17; // x1
  __int64 v18; // x1
  __int64 v19; // x1
  __int64 v20; // x1
  __int64 v21; // x1
  __int64 v22; // x1
  System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData__o *v23; // x19
  struct System_Collections_Generic_Dictionary_string__object__o *voicePlayedInfo; // x0
  Il2CppObject *key; // x21
  Il2CppObject *value; // x22
  unsigned __int64 v27; // x20
  __int64 v28; // x2
  __int64 v29; // x23
  __int64 v30; // x0
  __int64 v31; // x1
  __int64 v32; // x2
  int v33; // w8
  __int64 v35; // x2
  System_Collections_Generic_HashSet_WarBoardAIRoute_ActionTrendInfo__o *voicePlayedOver64Info; // x0
  __int64 v37; // x2
  Il2CppObject *current; // x20
  System_Char_array *v39; // x0
  __int64 v40; // x2
  System_String_array *v41; // x21
  __int64 v42; // x2
  __int64 v43; // x0
  __int64 v44; // x1
  __int64 v45; // x2
  __int64 v46; // x20
  __int64 v47; // x0
  __int64 v48; // x1
  __int64 v49; // x2
  __int64 v50; // x0
  __int64 v51; // x1
  __int64 v52; // x2
  int v53; // w20
  BattleData_o *v55; // [xsp+0h] [xbp-E0h]
  System_Collections_Generic_Dictionary_Enumerator_XmlQualifiedName__SchemaElementDecl__o v56; // [xsp+8h] [xbp-D8h] BYREF
  int v57[2]; // [xsp+30h] [xbp-B0h]
  int v58; // [xsp+38h] [xbp-A8h]
  System_Collections_Generic_HashSet_Enumerator_T__o v59; // [xsp+40h] [xbp-A0h] BYREF
  System_Collections_Generic_Dictionary_Enumerator_XmlQualifiedName__SchemaElementDecl__o v60; // [xsp+60h] [xbp-80h] BYREF

  if ( (byte_40F6A06 & 1) == 0 )
  {
    sub_B16FFC(&char___TypeInfo, method);
    sub_B16FFC(&Method_System_Collections_Generic_Dictionary_string__object__GetEnumerator__, v6);
    sub_B16FFC(&Method_System_Collections_Generic_HashSet_Enumerator_string__Dispose__, v7);
    sub_B16FFC(&Method_System_Collections_Generic_Dictionary_Enumerator_string__object__Dispose__, v8);
    sub_B16FFC(&Method_System_Collections_Generic_HashSet_Enumerator_string__MoveNext__, v9);
    sub_B16FFC(&Method_System_Collections_Generic_Dictionary_Enumerator_string__object__MoveNext__, v10);
    sub_B16FFC(&Method_System_Collections_Generic_Dictionary_Enumerator_string__object__get_Current__, v11);
    sub_B16FFC(&Method_System_Collections_Generic_HashSet_Enumerator_string__get_Current__, v12);
    sub_B16FFC(&Method_System_Collections_Generic_HashSet_string__GetEnumerator__, v13);
    sub_B16FFC(&int___TypeInfo, v14);
    sub_B16FFC(&long_TypeInfo, v15);
    sub_B16FFC(&Method_System_Collections_Generic_KeyValuePair_string__object__get_Key__, v16);
    sub_B16FFC(&Method_System_Collections_Generic_KeyValuePair_string__object__get_Value__, v17);
    sub_B16FFC(&Method_System_Collections_Generic_List_int____Add__, v18);
    sub_B16FFC(&Method_System_Collections_Generic_List_int____ToArray__, v19);
    sub_B16FFC(&Method_System_Collections_Generic_List_int_____ctor__, v20);
    sub_B16FFC(&System_Collections_Generic_List_int____TypeInfo, v21);
    sub_B16FFC(&string___TypeInfo, v22);
    byte_40F6A06 = 1;
  }
  memset(&v60, 0, sizeof(v60));
  memset(&v59, 0, sizeof(v59));
  v58 = 0;
  v23 = (System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData__o *)sub_B170CC(
                                                                                                  System_Collections_Generic_List_int____TypeInfo,
                                                                                                  method,
                                                                                                  v2,
                                                                                                  v3,
                                                                                                  v4);
  System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData____ctor(
    v23,
    (const MethodInfo_2F25014 *)Method_System_Collections_Generic_List_int_____ctor__);
  voicePlayedInfo = this->fields.voicePlayedInfo;
  v55 = this;
  if ( !voicePlayedInfo )
    goto LABEL_52;
  System_Collections_Generic_Dictionary_XmlQualifiedName__SchemaElementDecl___GetEnumerator(
    (System_Collections_Generic_Dictionary_Enumerator_TKey__TValue__o *)&v56,
    (System_Collections_Generic_Dictionary_XmlQualifiedName__SchemaElementDecl__o *)voicePlayedInfo,
    (const MethodInfo_2DA41F4 *)Method_System_Collections_Generic_Dictionary_string__object__GetEnumerator__);
  v60 = v56;
LABEL_16:
  if ( System_Collections_Generic_Dictionary_Enumerator_XmlQualifiedName__SchemaElementDecl___MoveNext(
         &v60,
         (const MethodInfo_26BCF58 *)Method_System_Collections_Generic_Dictionary_Enumerator_string__object__MoveNext__) )
  {
    key = v60.fields.current.fields.key;
    value = v60.fields.current.fields.value;
    v27 = 0LL;
    while ( 1 )
    {
      if ( !value )
        goto LABEL_37;
      if ( value->klass->_1.element_class != long_TypeInfo->_1.element_class )
        break;
      if ( (*(_QWORD *)j_il2cpp_object_unbox_0(value) & (1LL << v27)) != 0 )
      {
        v29 = sub_B17014(int___TypeInfo, 2LL, v28);
        v30 = System_Int32__Parse((System_String_o *)key, 0LL);
        if ( !v29 )
          sub_B170D4();
        v33 = *(_DWORD *)(v29 + 24);
        if ( !v33 )
        {
          sub_B17100(v30, v31, v32);
          sub_B170A0();
        }
        *(_DWORD *)(v29 + 32) = v30;
        if ( v33 == 1 )
        {
          sub_B17100(v30, v31, v32);
          sub_B170A0();
        }
        *(_DWORD *)(v29 + 36) = v27;
        if ( !v23 )
          sub_B170D4();
        System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData___Add(
          v23,
          (EventMissionProgressRequest_Argument_ProgressData_o *)v29,
          (const MethodInfo_2F25CD8 *)Method_System_Collections_Generic_List_int____Add__);
      }
      if ( v27++ > 0x3E )
        goto LABEL_16;
    }
    sub_B173C8(value);
LABEL_37:
    sub_B170D4();
  }
  v57[0] = 125;
  v58 = 1;
  System_Collections_Generic_Dictionary_Enumerator_XmlQualifiedName__SchemaElementDecl___Dispose(
    &v60,
    (const MethodInfo_26BD0C0 *)Method_System_Collections_Generic_Dictionary_Enumerator_string__object__Dispose__);
  v58 = 0;
  sub_B17014(string___TypeInfo, 2LL, v35);
  voicePlayedOver64Info = (System_Collections_Generic_HashSet_WarBoardAIRoute_ActionTrendInfo__o *)v55->fields.voicePlayedOver64Info;
  if ( !voicePlayedOver64Info )
    goto LABEL_52;
  System_Collections_Generic_HashSet_WarBoardAIRoute_ActionTrendInfo___GetEnumerator(
    (System_Collections_Generic_HashSet_Enumerator_T__o *)&v56,
    voicePlayedOver64Info,
    (const MethodInfo_21DF444 *)Method_System_Collections_Generic_HashSet_string__GetEnumerator__);
  v59.fields._current = v56.fields.current.fields.key;
  *(_OWORD *)&v59.fields._set = *(_OWORD *)&v56.fields.dictionary;
  while ( System_Collections_Generic_HashSet_Enumerator_WarBoardAIRoute_ActionTrendInfo___MoveNext(
            &v59,
            (const MethodInfo_20739E4 *)Method_System_Collections_Generic_HashSet_Enumerator_string__MoveNext__) )
  {
    current = v59.fields._current;
    v39 = (System_Char_array *)sub_B17014(char___TypeInfo, 1LL, v37);
    if ( !v39 )
      sub_B170D4();
    if ( !v39->max_length )
    {
      sub_B17100(v39, v39, v40);
      sub_B170A0();
    }
    v39->m_Items[2] = 44;
    if ( !current )
      sub_B170D4();
    v41 = System_String__Split((System_String_o *)current, v39, 0LL);
    v43 = sub_B17014(int___TypeInfo, 2LL, v42);
    if ( !v41 )
      sub_B170D4();
    if ( !v41->max_length )
    {
      sub_B17100(v43, v44, v45);
      sub_B170A0();
    }
    v46 = v43;
    v47 = System_Int32__Parse(v41->m_Items[0], 0LL);
    if ( !v46 )
      sub_B170D4();
    if ( !*(_DWORD *)(v46 + 24) )
    {
      sub_B17100(v47, v48, v49);
      sub_B170A0();
    }
    *(_DWORD *)(v46 + 32) = v47;
    if ( v41->max_length <= 1 )
    {
      sub_B17100(v47, v48, v49);
      sub_B170A0();
    }
    v50 = System_Int32__Parse(v41->m_Items[1], 0LL);
    if ( *(_DWORD *)(v46 + 24) <= 1u )
    {
      sub_B17100(v50, v51, v52);
      sub_B170A0();
    }
    *(_DWORD *)(v46 + 36) = v50;
    if ( !v23 )
      sub_B170D4();
    System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData___Add(
      v23,
      (EventMissionProgressRequest_Argument_ProgressData_o *)v46,
      (const MethodInfo_2F25CD8 *)Method_System_Collections_Generic_List_int____Add__);
  }
  v57[0] = 230;
  v53 = ++v58;
  System_Collections_Generic_HashSet_Enumerator_WarBoardAIRoute_ActionTrendInfo___Dispose(
    &v59,
    (const MethodInfo_20739E0 *)Method_System_Collections_Generic_HashSet_Enumerator_string__Dispose__);
  if ( v53 && v57[v53 - 1] == 230 )
    v58 = v53 - 1;
  if ( !v23 )
LABEL_52:
    sub_B170D4();
  return (System_Int32_array_array *)System_Collections_Generic_List_WarBoardUiData_SaveData___ToArray(
                                       (System_Collections_Generic_List_WarBoardUiData_SaveData__o *)v23,
                                       (const MethodInfo_2F27E24 *)Method_System_Collections_Generic_List_int____ToArray__);
}


int32_t __fastcall BattleData__get_eventId(BattleData_o *this, const MethodInfo *method)
{
  struct BattleEntity_o *battle_ent; // x8

  battle_ent = this->fields.battle_ent;
  if ( !battle_ent )
    sub_B170D4();
  return battle_ent->fields.eventId;
}


BattleSkillInfoData_o *__fastcall BattleData__get_lastUsedPlayerSkillInfo(BattleData_o *this, const MethodInfo *method)
{
  return this->fields._lastUsedPlayerSkillInfo_k__BackingField;
}


OverwriteBattleBgmData_o *__fastcall BattleData__get_overwriteBgmData(BattleData_o *this, const MethodInfo *method)
{
  return this->fields._overwriteBgmData_k__BackingField;
}


void __fastcall BattleData__initQuest(BattleData_o *this, const MethodInfo *method)
{
  __int64 v3; // x1
  __int64 v4; // x1
  __int64 v5; // x1
  __int64 v6; // x1
  __int64 v7; // x1
  __int64 v8; // x1
  __int64 v9; // x1
  __int64 v10; // x1
  __int64 v11; // x1
  __int64 v12; // x1
  __int64 v13; // x1
  BattleData_o *v14; // x0
  const MethodInfo *v15; // x1
  WebViewManager_o *Instance; // x0
  DataMasterBase_TMaster__TEntity__PKType__o *Master_WarQuestSelectionMaster; // x0
  Il2CppObject *SingleEntity; // x0
  __int64 v19; // x1
  __int64 v20; // x2
  Il2CppObject *v21; // x20
  BattleInfoData_o *klass; // x0
  struct DeckData_o *myDeck; // x8
  struct BattleDeckServantData_array *svts; // x8
  BattleDeckServantData_o *v25; // x8
  BattleUserServantData_o *UserServantFromID; // x21
  WebViewManager_o *v27; // x0
  int32_t baseWindow; // w22
  CodeStage_AntiCheat_ObscuredTypes_ObscuredInt_o v29; // kr00_16
  WebViewManager_o *v30; // x0
  WebViewManager_o *v31; // x0
  ServantTreasureDvcMaster_o *MasterData_WarQuestSelectionMaster; // x22
  int32_t v33; // w0
  ServantTreasureDvcEntity_o *Entity; // x0
  int32_t treasureDeviceId; // w8
  ServantTreasureDvcEntity_o *v36; // x22
  struct DeckData_array *enemyDeck; // x8
  DeckData_o *v38; // x8
  struct BattleDeckServantData_array *v39; // x8
  BattleDeckServantData_o *v40; // x8
  BattleUserServantData_o *v41; // x20
  WebViewManager_o *v42; // x0
  CodeStage_AntiCheat_ObscuredTypes_ObscuredInt_o v43; // kr20_16
  WebViewManager_o *v44; // x0
  int32_t v45; // w8
  BattleInfoData_o *battle_info; // x0
  bool IsWaveMyDecks; // w0
  const MethodInfo *v48; // x2
  struct BattleInfoData_o *v49; // x8
  DeckData_o *WaveMyDeck; // x1
  const MethodInfo *v51; // x2
  __int64 v52; // x1
  __int64 v53; // x2
  __int64 v54; // x3
  __int64 v55; // x4
  PlayerFieldStatus_o *v56; // x20
  __int64 v57; // x1
  __int64 v58; // x2
  __int64 v59; // x3
  __int64 v60; // x4
  EnemyFieldStatus_o *v61; // x20
  const MethodInfo *v62; // x1
  const MethodInfo *v63; // x1
  const MethodInfo *v64; // x1
  const MethodInfo *v65; // x1
  const MethodInfo *v66; // x1
  __int64 v67; // x1
  __int64 v68; // x2
  __int64 v69; // x3
  __int64 v70; // x4
  System_Collections_Generic_HashSet_int__o *v71; // x20
  struct BattleAttackManager_o *battleAtkManager; // x0

  if ( (byte_40F6A90 & 1) == 0 )
  {
    sub_B16FFC(&Method_DataManager_GetMasterData_ServantTreasureDvcMaster___, method);
    sub_B16FFC(&Method_DataManager_GetMaster_BattleMaster___, v3);
    sub_B16FFC(&DataManager_TypeInfo, v4);
    sub_B16FFC(&Method_DataMasterBase_BattleMaster__BattleEntity__long__GetSingleEntity__, v5);
    sub_B16FFC(&EnemyFieldStatus_TypeInfo, v6);
    sub_B16FFC(&Method_System_Collections_Generic_HashSet_int___ctor___66713944, v7);
    sub_B16FFC(&System_Collections_Generic_HashSet_int__TypeInfo, v8);
    sub_B16FFC(&CodeStage_AntiCheat_ObscuredTypes_ObscuredInt_TypeInfo, v9);
    sub_B16FFC(&PlayerFieldStatus_TypeInfo, v10);
    sub_B16FFC(&ServantAssetLoadManager_TypeInfo, v11);
    sub_B16FFC(&Method_SingletonMonoBehaviour_BattleSequenceManager__get_Instance__, v12);
    sub_B16FFC(&Method_SingletonMonoBehaviour_DataManager__get_Instance__, v13);
    byte_40F6A90 = 1;
  }
  BattleData__commonQuestLoad(this, method);
  BattleData__DeleteResumeCheckPlayedMovieSaveKey(v14, v15);
  Instance = SingletonMonoBehaviour_WebViewManager___get_Instance((const MethodInfo_2A54F38 *)Method_SingletonMonoBehaviour_BattleSequenceManager__get_Instance__);
  if ( !Instance )
    goto LABEL_46;
  if ( BYTE4(Instance->fields.webViewBase) )
  {
    if ( (BYTE3(DataManager_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0 && !DataManager_TypeInfo->_2.cctor_finished )
      j_il2cpp_runtime_class_init_0(DataManager_TypeInfo);
    Master_WarQuestSelectionMaster = (DataMasterBase_TMaster__TEntity__PKType__o *)DataManager__GetMaster_WarQuestSelectionMaster_((const MethodInfo_18C3224 *)Method_DataManager_GetMaster_BattleMaster___);
    if ( !Master_WarQuestSelectionMaster )
      goto LABEL_46;
    SingleEntity = DataMasterBase_object__object__long___GetSingleEntity(
                     Master_WarQuestSelectionMaster,
                     (const MethodInfo_266F674 *)Method_DataMasterBase_BattleMaster__BattleEntity__long__GetSingleEntity__);
    if ( !SingleEntity )
      goto LABEL_46;
    v21 = SingleEntity;
    klass = (BattleInfoData_o *)SingleEntity[1].klass;
    if ( !klass )
      goto LABEL_46;
    myDeck = klass->fields.myDeck;
    if ( !myDeck )
      goto LABEL_46;
    svts = myDeck->fields.svts;
    if ( !svts )
      goto LABEL_46;
    if ( !svts->max_length )
      goto LABEL_47;
    v25 = svts->m_Items[0];
    if ( !v25 )
      goto LABEL_46;
    UserServantFromID = BattleInfoData__getUserServantFromID(klass, v25->fields.userSvtId, 0LL);
    v27 = SingletonMonoBehaviour_WebViewManager___get_Instance((const MethodInfo_2A54F38 *)Method_SingletonMonoBehaviour_BattleSequenceManager__get_Instance__);
    if ( !v27 )
      goto LABEL_46;
    baseWindow = (int32_t)v27->fields.baseWindow;
    if ( (BYTE3(CodeStage_AntiCheat_ObscuredTypes_ObscuredInt_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0
      && !CodeStage_AntiCheat_ObscuredTypes_ObscuredInt_TypeInfo->_2.cctor_finished )
    {
      j_il2cpp_runtime_class_init_0(CodeStage_AntiCheat_ObscuredTypes_ObscuredInt_TypeInfo);
    }
    v29 = CodeStage_AntiCheat_ObscuredTypes_ObscuredInt__op_Implicit(baseWindow, 0LL);
    if ( !UserServantFromID )
      goto LABEL_46;
    UserServantFromID->fields.svtId = v29;
    v30 = SingletonMonoBehaviour_WebViewManager___get_Instance((const MethodInfo_2A54F38 *)Method_SingletonMonoBehaviour_BattleSequenceManager__get_Instance__);
    if ( !v30 )
      goto LABEL_46;
    UserServantFromID->fields.limitCount = CodeStage_AntiCheat_ObscuredTypes_ObscuredInt__op_Implicit(
                                             HIDWORD(v30->fields.baseWindow),
                                             0LL);
    v31 = SingletonMonoBehaviour_WebViewManager___get_Instance((const MethodInfo_2A54F38 *)Method_SingletonMonoBehaviour_DataManager__get_Instance__);
    if ( !v31 )
      goto LABEL_46;
    MasterData_WarQuestSelectionMaster = (ServantTreasureDvcMaster_o *)DataManager__GetMasterData_WarQuestSelectionMaster_(
                                                                         (DataManager_o *)v31,
                                                                         (const MethodInfo_18C3284 *)Method_DataManager_GetMasterData_ServantTreasureDvcMaster___);
    v33 = CodeStage_AntiCheat_ObscuredTypes_ObscuredInt__op_Implicit_44068536(UserServantFromID->fields.svtId, 0LL);
    if ( !MasterData_WarQuestSelectionMaster )
      goto LABEL_46;
    Entity = ServantTreasureDvcMaster__GetEntity(MasterData_WarQuestSelectionMaster, v33, 1, 101, 0LL);
    if ( !Entity )
      goto LABEL_46;
    treasureDeviceId = Entity->fields.treasureDeviceId;
    UserServantFromID->fields.treasureDeviceLv = 1;
    UserServantFromID->fields.treasureDeviceId = treasureDeviceId;
    UserServantFromID->fields.hp = 1000000;
    v36 = Entity;
    klass = (BattleInfoData_o *)v21[1].klass;
    if ( !klass )
      goto LABEL_46;
    enemyDeck = klass->fields.enemyDeck;
    if ( !enemyDeck )
      goto LABEL_46;
    if ( !enemyDeck->max_length )
      goto LABEL_47;
    v38 = enemyDeck->m_Items[0];
    if ( !v38 )
      goto LABEL_46;
    v39 = v38->fields.svts;
    if ( !v39 )
      goto LABEL_46;
    if ( !v39->max_length )
    {
LABEL_47:
      sub_B17100(klass, v19, v20);
      sub_B170A0();
    }
    v40 = v39->m_Items[0];
    if ( !v40 )
      goto LABEL_46;
    v41 = BattleInfoData__getUserServantFromID(klass, v40->fields.userSvtId, 0LL);
    v42 = SingletonMonoBehaviour_WebViewManager___get_Instance((const MethodInfo_2A54F38 *)Method_SingletonMonoBehaviour_BattleSequenceManager__get_Instance__);
    if ( !v42 )
      goto LABEL_46;
    v43 = CodeStage_AntiCheat_ObscuredTypes_ObscuredInt__op_Implicit((int32_t)v42->fields.baseWindow, 0LL);
    if ( !v41 )
      goto LABEL_46;
    v41->fields.svtId = v43;
    v44 = SingletonMonoBehaviour_WebViewManager___get_Instance((const MethodInfo_2A54F38 *)Method_SingletonMonoBehaviour_BattleSequenceManager__get_Instance__);
    if ( !v44 )
      goto LABEL_46;
    v41->fields.limitCount = CodeStage_AntiCheat_ObscuredTypes_ObscuredInt__op_Implicit(
                               HIDWORD(v44->fields.baseWindow),
                               0LL);
    v45 = v36->fields.treasureDeviceId;
    v41->fields.treasureDeviceLv = 1;
    v41->fields.hp = 1000000;
    v41->fields.treasureDeviceId = v45;
  }
  battle_info = this->fields.battle_info;
  if ( !battle_info )
    goto LABEL_46;
  IsWaveMyDecks = BattleInfoData__IsWaveMyDecks(battle_info, 0LL);
  v49 = this->fields.battle_info;
  if ( IsWaveMyDecks )
  {
    if ( !v49 )
      goto LABEL_46;
    WaveMyDeck = BattleInfoData__GetWaveMyDeck(this->fields.battle_info, this->fields.wavecount, 0LL);
  }
  else
  {
    if ( !v49 )
      goto LABEL_46;
    WaveMyDeck = v49->fields.myDeck;
  }
  BattleData__InitPlayerDataList(this, WaveMyDeck, v48);
  BattleData__LoadAiNpcServant(this, 0LL, v51);
  v56 = (PlayerFieldStatus_o *)sub_B170CC(PlayerFieldStatus_TypeInfo, v52, v53, v54, v55);
  PlayerFieldStatus___ctor(v56, 0LL);
  this->fields.playerFieldStatus = v56;
  sub_B16F98(&this->fields.playerFieldStatus, v56);
  v61 = (EnemyFieldStatus_o *)sub_B170CC(EnemyFieldStatus_TypeInfo, v57, v58, v59, v60);
  EnemyFieldStatus___ctor(v61, 0LL);
  this->fields.enemyFieldStatus = v61;
  sub_B16F98(&this->fields.enemyFieldStatus, v61);
  BattleData__createCommandCard(this, v62);
  BattleData__shuffleCommand(this, v63);
  BattleData__loadMasterSkill(this, v64);
  if ( (BYTE3(ServantAssetLoadManager_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0
    && !ServantAssetLoadManager_TypeInfo->_2.cctor_finished )
  {
    j_il2cpp_runtime_class_init_0(ServantAssetLoadManager_TypeInfo);
  }
  ServantAssetLoadManager__preloadCommandSpellAnyVoice(0LL);
  BattleData__loadBoostSkill(this, v65);
  BattleData__SetUsedTurn(this, v66);
  v71 = (System_Collections_Generic_HashSet_int__o *)sub_B170CC(
                                                       System_Collections_Generic_HashSet_int__TypeInfo,
                                                       v67,
                                                       v68,
                                                       v69,
                                                       v70);
  System_Collections_Generic_HashSet_int____ctor(
    v71,
    (const MethodInfo_21D7F80 *)Method_System_Collections_Generic_HashSet_int___ctor___66713944);
  this->fields.calledEnemyUniqueIdHash = v71;
  sub_B16F98(&this->fields.calledEnemyUniqueIdHash, v71);
  battleAtkManager = this->fields.battleAtkManager;
  if ( !battleAtkManager )
LABEL_46:
    sub_B170D4();
  ((void (__fastcall *)(struct BattleAttackManager_o *, BattleData_o *, void *))battleAtkManager->klass->vtable._11_AfterLoadQuest.method)(
    battleAtkManager,
    this,
    battleAtkManager->klass[1]._1.image);
}


bool __fastcall BattleData__isAiTarget(
        BattleData_o *this,
        ConditionsInformation_CheckInfo_o *info,
        System_Int64_array *indiv,
        AiBaseEntity_o *aiBaseEnt,
        const MethodInfo *method)
{
  return 1;
}


bool __fastcall BattleData__isAliveEntriesByForcedFlag(
        BattleData_o *this,
        System_Int32_array *entryIdArray,
        const MethodInfo *method)
{
  __int64 v3; // x3
  __int64 v4; // x4
  __int64 v7; // x1
  __int64 v8; // x1
  __int64 v9; // x1
  __int64 v10; // x1
  BattleData___c_c *v11; // x0
  struct BattleData___c_StaticFields *static_fields; // x8
  System_Func_int__bool__o *_9__626_0; // x21
  Il2CppObject *v14; // x22
  struct BattleData___c_StaticFields *v15; // x0
  BattleServantData_o *ServantData; // x0
  __int64 v17; // x1
  const MethodInfo *v18; // x2
  __int64 v19; // x8
  char v20; // w21
  unsigned __int64 v21; // x23
  BattleServantData_o *v22; // x22

  if ( (byte_40F6AAB & 1) == 0 )
  {
    sub_B16FFC(&Method_BasicHelper_Any_int____66805656, entryIdArray);
    sub_B16FFC(&Method_System_Func_int__bool___ctor__, v7);
    sub_B16FFC(&System_Func_int__bool__TypeInfo, v8);
    sub_B16FFC(&Method_BattleData___c__isAliveEntriesByForcedFlag_b__626_0__, v9);
    sub_B16FFC(&BattleData___c_TypeInfo, v10);
    byte_40F6AAB = 1;
  }
  v11 = BattleData___c_TypeInfo;
  if ( (BYTE3(BattleData___c_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0
    && !BattleData___c_TypeInfo->_2.cctor_finished )
  {
    j_il2cpp_runtime_class_init_0(BattleData___c_TypeInfo);
    v11 = BattleData___c_TypeInfo;
  }
  static_fields = v11->static_fields;
  _9__626_0 = static_fields->__9__626_0;
  if ( !_9__626_0 )
  {
    if ( (BYTE3(v11->vtable._0_Equals.methodPtr) & 4) != 0 && !v11->_2.cctor_finished )
    {
      j_il2cpp_runtime_class_init_0(v11);
      static_fields = BattleData___c_TypeInfo->static_fields;
    }
    v14 = (Il2CppObject *)static_fields->__9;
    _9__626_0 = (System_Func_int__bool__o *)sub_B170CC(System_Func_int__bool__TypeInfo, entryIdArray, method, v3, v4);
    System_Func_int__bool____ctor(
      _9__626_0,
      v14,
      Method_BattleData___c__isAliveEntriesByForcedFlag_b__626_0__,
      (const MethodInfo_2B6586C *)Method_System_Func_int__bool___ctor__);
    v15 = BattleData___c_TypeInfo->static_fields;
    v15->__9__626_0 = _9__626_0;
    sub_B16F98(&v15->__9__626_0, _9__626_0);
  }
  ServantData = (BattleServantData_o *)BasicHelper__Any_int__25910576(
                                         entryIdArray,
                                         (System_Func_T__bool__o *)_9__626_0,
                                         (const MethodInfo_18B5D30 *)Method_BasicHelper_Any_int____66805656);
  if ( !entryIdArray )
    sub_B170D4();
  v19 = *(_QWORD *)&entryIdArray->max_length;
  v20 = (char)ServantData;
  if ( (int)v19 >= 1 )
  {
    v21 = 0LL;
    while ( 1 )
    {
      if ( v21 >= (unsigned int)v19 )
      {
        sub_B17100(ServantData, v17, v18);
        sub_B170A0();
      }
      ServantData = BattleData__getServantData(this, entryIdArray->m_Items[v21 + 1], v18);
      if ( ServantData )
      {
        v22 = ServantData;
        ServantData = (BattleServantData_o *)((__int64 (__fastcall *)(BattleServantData_o *, Il2CppMethodPointer))ServantData->klass->vtable._9_get_hp.method)(
                                               ServantData,
                                               ServantData->klass->vtable._10_set_hp.methodPtr);
        if ( (int)ServantData > 0 || !v22->fields.isSystemAlive )
          break;
      }
      LODWORD(v19) = entryIdArray->max_length;
      if ( (__int64)++v21 >= (int)v19 )
        return v20 & 1;
    }
    v20 = 0;
  }
  return v20 & 1;
}


bool __fastcall BattleData__isBattleFinishCameraTargetAll(BattleData_o *this, const MethodInfo *method)
{
  QuestPhaseEntity_o *questphase_ent; // x0

  questphase_ent = this->fields.questphase_ent;
  if ( !questphase_ent )
    sub_B170D4();
  return QuestPhaseEntity__isBattleFinishCameraTargetAll(questphase_ent, 0LL);
}


bool __fastcall BattleData__isBattleFinishMovie(BattleData_o *this, const MethodInfo *method)
{
  QuestPhaseEntity_o *questphase_ent; // x0

  questphase_ent = this->fields.questphase_ent;
  if ( !questphase_ent )
    sub_B170D4();
  return QuestPhaseEntity__GetBattleFinishMovie(questphase_ent, 0LL) != 0LL;
}


bool __fastcall BattleData__isBattleResultLoseQuestClear(BattleData_o *this, const MethodInfo *method)
{
  QuestEntity_o *quest_ent; // x0

  quest_ent = this->fields.quest_ent;
  if ( !quest_ent )
    sub_B170D4();
  return QuestEntity__HasFlag(quest_ent, 0x80000000000LL, 0LL);
}


bool __fastcall BattleData__isBattleRetreatQuestClear(BattleData_o *this, const MethodInfo *method)
{
  QuestEntity_o *quest_ent; // x0

  quest_ent = this->fields.quest_ent;
  if ( !quest_ent )
    sub_B170D4();
  return QuestEntity__HasFlag(quest_ent, 0x40000000000LL, 0LL);
}


bool __fastcall BattleData__isBattleTurnRequest(BattleData_o *this, const MethodInfo *method)
{
  QuestEntity_o *quest_ent; // x0
  const MethodInfo *v4; // x1

  quest_ent = this->fields.quest_ent;
  if ( !quest_ent )
    sub_B170D4();
  return QuestEntity__HasFlag(quest_ent, 8LL, 0LL) && BattleData__isRaidBattle(this, v4);
}


bool __fastcall BattleData__isBreakOnBattleWin(BattleData_o *this, const MethodInfo *method)
{
  QuestPhaseEntity_o *questphase_ent; // x0

  questphase_ent = this->fields.questphase_ent;
  if ( !questphase_ent )
    sub_B170D4();
  return QuestPhaseEntity__isBreakOnBattleWin(questphase_ent, 0LL);
}


bool __fastcall BattleData__isBreakOnBattleWinAndWait(BattleData_o *this, float *waitTime, const MethodInfo *method)
{
  QuestPhaseEntity_o *questphase_ent; // x0
  int32_t BreakOnBattleWinWaitMSec; // w0
  float v6; // s1
  bool result; // w0

  questphase_ent = this->fields.questphase_ent;
  if ( !questphase_ent )
    sub_B170D4();
  BreakOnBattleWinWaitMSec = QuestPhaseEntity__getBreakOnBattleWinWaitMSec(questphase_ent, 0LL);
  v6 = (float)BreakOnBattleWinWaitMSec;
  result = BreakOnBattleWinWaitMSec > 0;
  *waitTime = v6 / 1000.0;
  return result;
}


bool __fastcall BattleData__isBreakOnBattleWinFadeColorBalck(BattleData_o *this, const MethodInfo *method)
{
  QuestPhaseEntity_o *questphase_ent; // x0

  questphase_ent = this->fields.questphase_ent;
  if ( !questphase_ent )
    sub_B170D4();
  return QuestPhaseEntity__isBreakOnBattleWinFadeColorBlack(questphase_ent, 0LL);
}


bool __fastcall BattleData__isDeadLeader(BattleData_o *this, const MethodInfo *method)
{
  return this->fields.leaderDown;
}


bool __fastcall BattleData__isDisableChangeRaidDownMessage(BattleData_o *this, const MethodInfo *method)
{
  QuestPhaseEntity_o *questphase_ent; // x0

  questphase_ent = this->fields.questphase_ent;
  if ( !questphase_ent )
    sub_B170D4();
  return QuestPhaseEntity__isDisableChangeRaidDownMessage(questphase_ent, 0LL);
}


bool __fastcall BattleData__isDispLoseResult(BattleData_o *this, const MethodInfo *method)
{
  QuestPhaseEntity_o *questphase_ent; // x0

  questphase_ent = this->fields.questphase_ent;
  if ( !questphase_ent )
    sub_B170D4();
  return QuestPhaseEntity__isDispLoseResult(questphase_ent, 0LL);
}


bool __fastcall BattleData__isDoNotSelectCommandServantCommandInCommandList(
        BattleData_o *this,
        const MethodInfo *method)
{
  __int64 v2; // x2
  __int64 v3; // x3
  __int64 v4; // x4
  __int64 v6; // x1
  __int64 v7; // x1
  __int64 v8; // x1
  __int64 v9; // x1
  System_Collections_Generic_List_int__o *v10; // x20
  BattleServantData_o *ServantData; // x0
  __int64 v12; // x1
  __int64 v13; // x2
  struct BattleCommandData_array *draw_commandlist; // x24
  int max_length; // w8
  unsigned int v16; // w25
  BattleCommandData_o *v17; // x21
  const MethodInfo *v18; // x2
  __int64 v19; // x3
  __int64 v20; // x4
  BattleServantData_o *v21; // x23
  BattleBuffData_o *buffData; // x21
  BattleBuffData_CheckIndividualitiesData_o *v23; // x22

  if ( (byte_40F6ABB & 1) == 0 )
  {
    sub_B16FFC(&BattleBuffData_CheckIndividualitiesData_TypeInfo, method);
    sub_B16FFC(&Method_System_Collections_Generic_List_int__Add__, v6);
    sub_B16FFC(&Method_System_Collections_Generic_List_int__Contains__, v7);
    sub_B16FFC(&Method_System_Collections_Generic_List_int___ctor__, v8);
    sub_B16FFC(&System_Collections_Generic_List_int__TypeInfo, v9);
    byte_40F6ABB = 1;
  }
  v10 = (System_Collections_Generic_List_int__o *)sub_B170CC(
                                                    System_Collections_Generic_List_int__TypeInfo,
                                                    method,
                                                    v2,
                                                    v3,
                                                    v4);
  System_Collections_Generic_List_int____ctor(
    v10,
    (const MethodInfo_2F0F794 *)Method_System_Collections_Generic_List_int___ctor__);
  draw_commandlist = this->fields.draw_commandlist;
  if ( !draw_commandlist )
LABEL_17:
    sub_B170D4();
  max_length = draw_commandlist->max_length;
  if ( max_length < 1 )
    return 0;
  v16 = 0;
  while ( 1 )
  {
    if ( v16 >= max_length )
    {
      sub_B17100(ServantData, v12, v13);
      sub_B170A0();
    }
    v17 = draw_commandlist->m_Items[v16];
    if ( !v17 || !v10 )
      goto LABEL_17;
    ServantData = (BattleServantData_o *)System_Collections_Generic_List_int___Contains(
                                           v10,
                                           v17->fields.uniqueId,
                                           (const MethodInfo_2F10944 *)Method_System_Collections_Generic_List_int__Contains__);
    if ( ((unsigned __int8)ServantData & 1) == 0 )
    {
      System_Collections_Generic_List_int___Add(
        v10,
        v17->fields.uniqueId,
        (const MethodInfo_2F104F0 *)Method_System_Collections_Generic_List_int__Add__);
      ServantData = BattleData__getServantData(this, v17->fields.uniqueId, v18);
      if ( ServantData )
      {
        v21 = ServantData;
        buffData = ServantData->fields.buffData;
        v23 = (BattleBuffData_CheckIndividualitiesData_o *)sub_B170CC(
                                                             BattleBuffData_CheckIndividualitiesData_TypeInfo,
                                                             v12,
                                                             v13,
                                                             v19,
                                                             v20);
        BattleBuffData_CheckIndividualitiesData___ctor(v23, v21, 0LL, 0LL, 0LL, 0LL, 0LL);
        if ( !buffData )
          goto LABEL_17;
        ServantData = (BattleServantData_o *)BattleBuffData__getBuffList_31040328(buffData, 83, v23, 1, 0, 0LL);
        if ( !ServantData )
          goto LABEL_17;
        if ( *(_QWORD *)&ServantData->fields.uniqueId )
          return 1;
      }
    }
    max_length = draw_commandlist->max_length;
    if ( (int)++v16 >= max_length )
      return 0;
  }
}


bool __fastcall BattleData__isEndBattle(BattleData_o *this, const MethodInfo *method)
{
  return this->fields.endbattleFlg;
}


bool __fastcall BattleData__isEnemyID(BattleData_o *this, int32_t Id, const MethodInfo *method)
{
  return BattleData__getEnemyServantData(this, Id, method) != 0LL;
}


bool __fastcall BattleData__isEventActivityPoint(BattleData_o *this, const MethodInfo *method)
{
  __int64 v3; // x1
  __int64 v4; // x1
  struct BattleEntity_o *battle_ent; // x8
  int32_t eventId; // w19
  WebViewManager_o *Instance; // x0
  DataMasterBase_WarMaster__WarEntity__int__o *MasterData_WarQuestSelectionMaster; // x0
  WarEntity_o *entity; // [xsp+8h] [xbp-18h] BYREF

  if ( (byte_40F6A00 & 1) == 0 )
  {
    sub_B16FFC(&Method_DataManager_GetMasterData_EventDetailMaster___, method);
    sub_B16FFC(&Method_DataMasterBase_EventDetailMaster__EventDetailEntity__int__TryGetEntity__, v3);
    sub_B16FFC(&Method_SingletonMonoBehaviour_DataManager__get_Instance__, v4);
    byte_40F6A00 = 1;
  }
  entity = 0LL;
  battle_ent = this->fields.battle_ent;
  if ( !battle_ent )
    goto LABEL_12;
  eventId = battle_ent->fields.eventId;
  Instance = SingletonMonoBehaviour_WebViewManager___get_Instance((const MethodInfo_2A54F38 *)Method_SingletonMonoBehaviour_DataManager__get_Instance__);
  if ( !Instance )
    goto LABEL_12;
  MasterData_WarQuestSelectionMaster = (DataMasterBase_WarMaster__WarEntity__int__o *)DataManager__GetMasterData_WarQuestSelectionMaster_(
                                                                                        (DataManager_o *)Instance,
                                                                                        (const MethodInfo_18C3284 *)Method_DataManager_GetMasterData_EventDetailMaster___);
  entity = 0LL;
  if ( !MasterData_WarQuestSelectionMaster )
    goto LABEL_12;
  if ( !DataMasterBase_WarMaster__WarEntity__int___TryGetEntity(
          MasterData_WarQuestSelectionMaster,
          &entity,
          eventId,
          (const MethodInfo_266F3E4 *)Method_DataMasterBase_EventDetailMaster__EventDetailEntity__int__TryGetEntity__) )
    return 0;
  if ( !entity )
LABEL_12:
    sub_B170D4();
  return EventDetailEntity__IsEventActivityPoint((EventDetailEntity_o *)entity, 0LL);
}


bool __fastcall BattleData__isFadeOutBgmBeforeMovie(BattleData_o *this, const MethodInfo *method)
{
  QuestPhaseEntity_o *questphase_ent; // x0

  questphase_ent = this->fields.questphase_ent;
  if ( !questphase_ent )
    sub_B170D4();
  return QuestPhaseEntity__isFadeOutBgmBeforeMovie(questphase_ent, 0LL);
}


bool __fastcall BattleData__isFirstStage(BattleData_o *this, const MethodInfo *method)
{
  return this->fields.wavecount == 0;
}


bool __fastcall BattleData__isKnockdownTrialQuest(BattleData_o *this, const MethodInfo *method)
{
  QuestEntity_o *quest_ent; // x0

  quest_ent = this->fields.quest_ent;
  if ( !quest_ent )
    sub_B170D4();
  return QuestEntity__HasFlag(quest_ent, 0x2000000000LL, 0LL);
}


bool __fastcall BattleData__isLastStage(BattleData_o *this, const MethodInfo *method)
{
  BattleInfoData_o *battle_info; // x0

  battle_info = this->fields.battle_info;
  if ( !battle_info )
    sub_B170D4();
  return BattleInfoData__isLastStage(battle_info, this->fields.wavecount, 0LL);
}


bool __fastcall BattleData__isLimitTurn(BattleData_o *this, const MethodInfo *method)
{
  return this->fields.limitTurnCount > 0;
}


bool __fastcall BattleData__isLoseBattle(BattleData_o *this, const MethodInfo *method)
{
  return this->fields.loseBattleFlg;
}


bool __fastcall BattleData__isMoviePlay(BattleData_o *this, const MethodInfo *method)
{
  const MethodInfo *v3; // x1

  return BattleData__isBattleFinishMovie(this, method) || BattleData__isWaveStartMovie(this, v3);
}


bool __fastcall BattleData__isNgContinue(BattleData_o *this, const MethodInfo *method)
{
  __int64 v3; // x1
  QuestEntity_o *quest_ent; // x0
  WebViewManager_o *Instance; // x0
  QuestBehaviorMaster_o *MasterData_WarQuestSelectionMaster; // x0
  struct QuestPhaseEntity_o *questphase_ent; // x8

  if ( (byte_40F6AA9 & 1) == 0 )
  {
    sub_B16FFC(&Method_DataManager_GetMasterData_QuestBehaviorMaster___, method);
    sub_B16FFC(&Method_SingletonMonoBehaviour_DataManager__get_Instance__, v3);
    byte_40F6AA9 = 1;
  }
  quest_ent = this->fields.quest_ent;
  if ( !quest_ent )
    goto LABEL_12;
  if ( !QuestEntity__HasFlag(quest_ent, 16LL, 0LL) )
    return 0;
  Instance = SingletonMonoBehaviour_WebViewManager___get_Instance((const MethodInfo_2A54F38 *)Method_SingletonMonoBehaviour_DataManager__get_Instance__);
  if ( !Instance )
    goto LABEL_12;
  MasterData_WarQuestSelectionMaster = (QuestBehaviorMaster_o *)DataManager__GetMasterData_WarQuestSelectionMaster_(
                                                                  (DataManager_o *)Instance,
                                                                  (const MethodInfo_18C3284 *)Method_DataManager_GetMasterData_QuestBehaviorMaster___);
  if ( !MasterData_WarQuestSelectionMaster )
    return 1;
  questphase_ent = this->fields.questphase_ent;
  if ( !questphase_ent )
LABEL_12:
    sub_B170D4();
  return !QuestBehaviorMaster__getEnableContinue(
            MasterData_WarQuestSelectionMaster,
            questphase_ent->fields.questId,
            questphase_ent->fields.phase,
            0LL);
}


bool __fastcall BattleData__isNoResult(BattleData_o *this, const MethodInfo *method)
{
  QuestPhaseEntity_o *questphase_ent; // x0

  questphase_ent = this->fields.questphase_ent;
  if ( !questphase_ent )
    sub_B170D4();
  return QuestPhaseEntity__isNoResult(questphase_ent, 0LL);
}


bool __fastcall BattleData__isPlayerID(BattleData_o *this, int32_t Id, const MethodInfo *method)
{
  return Id == -1 || BattleData__getPlayerServantData(this, Id, method) != 0LL;
}


bool __fastcall BattleData__isPrevAttackMe(
        BattleData_o *this,
        int32_t actId,
        int32_t targetId,
        const MethodInfo *method)
{
  return this->fields.prevactId == actId && this->fields.prevtargetId == targetId;
}


bool __fastcall BattleData__isProgressAfterMovie(BattleData_o *this, const MethodInfo *method)
{
  QuestPhaseEntity_o *questphase_ent; // x0

  questphase_ent = this->fields.questphase_ent;
  if ( !questphase_ent )
    sub_B170D4();
  return QuestPhaseEntity__GetProgressAfterMovie(questphase_ent, 0LL) != 0;
}


bool __fastcall BattleData__isRaidBattle(BattleData_o *this, const MethodInfo *method)
{
  BattleServantData_array *EnemyServantList; // x0
  __int64 v3; // x1
  __int64 v4; // x2
  int max_length; // w8
  unsigned int v6; // w9
  BattleServantData_o *v7; // x10

  EnemyServantList = BattleData__getEnemyServantList(this, method);
  if ( !EnemyServantList )
LABEL_12:
    sub_B170D4();
  max_length = EnemyServantList->max_length;
  if ( max_length < 1 )
    return 0;
  v6 = 0;
  while ( 1 )
  {
    if ( v6 >= max_length )
    {
      sub_B17100(EnemyServantList, v3, v4);
      sub_B170A0();
    }
    v7 = EnemyServantList->m_Items[v6];
    if ( !v7 )
      goto LABEL_12;
    if ( v7->fields.isRaid )
      return 1;
    if ( (int)++v6 >= max_length )
      return 0;
  }
}


bool __fastcall BattleData__isRaidConnection(BattleData_o *this, const MethodInfo *method)
{
  QuestEntity_o *quest_ent; // x0

  quest_ent = this->fields.quest_ent;
  if ( !quest_ent )
    sub_B170D4();
  return QuestEntity__HasFlag(quest_ent, 8LL, 0LL);
}


bool __fastcall BattleData__isRaidLastDay(BattleData_o *this, const MethodInfo *method)
{
  QuestEntity_o *quest_ent; // x0

  quest_ent = this->fields.quest_ent;
  if ( !quest_ent )
    sub_B170D4();
  return QuestEntity__HasFlag(quest_ent, 64LL, 0LL);
}


bool __fastcall BattleData__isReserveResumeBattle(const MethodInfo *method)
{
  __int64 v1; // x1
  __int64 v2; // x1

  if ( (byte_40F6A83 & 1) == 0 )
  {
    sub_B16FFC(&EncryptedPlayerPrefs_TypeInfo, v1);
    sub_B16FFC(&StringLiteral_11046/*"RESERVE_BATTKE_SAVEKEY"*/, v2);
    byte_40F6A83 = 1;
  }
  if ( (BYTE3(EncryptedPlayerPrefs_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0
    && !EncryptedPlayerPrefs_TypeInfo->_2.cctor_finished )
  {
    j_il2cpp_runtime_class_init_0(EncryptedPlayerPrefs_TypeInfo);
  }
  if ( !EncryptedPlayerPrefs__HasKey((System_String_o *)StringLiteral_11046/*"RESERVE_BATTKE_SAVEKEY"*/, 0LL) )
    return 0;
  if ( (BYTE3(EncryptedPlayerPrefs_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0
    && !EncryptedPlayerPrefs_TypeInfo->_2.cctor_finished )
  {
    j_il2cpp_runtime_class_init_0(EncryptedPlayerPrefs_TypeInfo);
  }
  return EncryptedPlayerPrefs__GetInt((System_String_o *)StringLiteral_11046/*"RESERVE_BATTKE_SAVEKEY"*/, 0LL) != 0;
}


bool __fastcall BattleData__isResultWin(BattleData_o *this, const MethodInfo *method)
{
  return this->fields.win_lose == 1;
}


bool __fastcall BattleData__isResumeBattle(BattleData_o *this, const MethodInfo *method)
{
  return this->fields.flg_resumebattle;
}


bool __fastcall BattleData__isShowTurn(BattleData_o *this, const MethodInfo *method)
{
  return this->fields.stateshowturn > 0;
}


bool __fastcall BattleData__isSkipDead(BattleData_o *this, BattleServantData_o *svtData, const MethodInfo *method)
{
  const MethodInfo *v5; // x2

  if ( !svtData )
    sub_B170D4();
  if ( !svtData->fields.isEnemy
    || BattleServantData__IsNoSkipDead(svtData, 0LL)
    || BattleServantData__IsNoAutoSkipDead(svtData, 0LL)
    || BattleData__IsNoSkipDeadFirst(this, svtData, v5) )
  {
    return 0;
  }
  if ( this->fields.systemflg_skipDeadtemp )
    return 1;
  return this->fields.systemflg_skipDead;
}


bool __fastcall BattleData__isSuperBossBattle(BattleData_o *this, const MethodInfo *method)
{
  BattleServantData_array *EnemyServantList; // x0
  __int64 v3; // x1
  __int64 v4; // x2
  int max_length; // w8
  unsigned int v6; // w9
  BattleServantData_o *v7; // x10

  EnemyServantList = BattleData__getEnemyServantList(this, method);
  if ( !EnemyServantList )
LABEL_12:
    sub_B170D4();
  max_length = EnemyServantList->max_length;
  if ( max_length < 1 )
    return 0;
  v6 = 0;
  while ( 1 )
  {
    if ( v6 >= max_length )
    {
      sub_B17100(EnemyServantList, v3, v4);
      sub_B170A0();
    }
    v7 = EnemyServantList->m_Items[v6];
    if ( !v7 )
      goto LABEL_12;
    if ( v7->fields.isSuperBoss )
      return 1;
    if ( (int)++v6 >= max_length )
      return 0;
  }
}


bool __fastcall BattleData__isSuperBossDown(BattleData_o *this, const MethodInfo *method)
{
  BattleServantData_array *EnemyServantList; // x0
  __int64 v4; // x1
  __int64 v5; // x2
  int max_length; // w8
  BattleServantData_array *v7; // x20
  unsigned int v8; // w23
  BattleServantData_o *v9; // x21
  struct BattleData_o *data; // x8
  BattleInfoData_o *battle_info; // x0
  int64_t SuperBossNokoriHp; // x22

  EnemyServantList = BattleData__getEnemyServantList(this, method);
  if ( !EnemyServantList )
LABEL_13:
    sub_B170D4();
  max_length = EnemyServantList->max_length;
  v7 = EnemyServantList;
  if ( max_length < 1 )
    return 0;
  v8 = 0;
  while ( 1 )
  {
    if ( v8 >= max_length )
    {
      sub_B17100(EnemyServantList, v4, v5);
      sub_B170A0();
    }
    v9 = v7->m_Items[v8];
    if ( !v9 )
      goto LABEL_13;
    if ( v9->fields.isSuperBoss )
    {
      data = this->fields.data;
      if ( !data )
        goto LABEL_13;
      battle_info = data->fields.battle_info;
      if ( !battle_info )
        goto LABEL_13;
      SuperBossNokoriHp = BattleInfoData__getSuperBossNokoriHp(battle_info, v9->fields.superBossId, 0LL);
      EnemyServantList = (BattleServantData_array *)BattleServantData__getMaxHp(v9, 0LL);
      if ( SuperBossNokoriHp <= (int)EnemyServantList )
        return BattleServantData__getNowHp(v9, 0LL) < 1;
    }
    max_length = v7->max_length;
    if ( (int)++v8 >= max_length )
      return 0;
  }
}


bool __fastcall BattleData__isTargetLock(BattleData_o *this, const MethodInfo *method)
{
  struct System_Collections_Generic_List_int__o *lockTargetIdList; // x8

  if ( (byte_40F6AB0 & 1) == 0 )
  {
    sub_B16FFC(&Method_System_Collections_Generic_List_int__get_Count__, method);
    byte_40F6AB0 = 1;
  }
  lockTargetIdList = this->fields.lockTargetIdList;
  if ( !lockTargetIdList )
    sub_B170D4();
  return lockTargetIdList->fields._size > 0;
}


bool __fastcall BattleData__isTurnSituationType(BattleData_o *this, const MethodInfo *method)
{
  QuestPhaseEntity_o *questphase_ent; // x0

  questphase_ent = this->fields.questphase_ent;
  if ( !questphase_ent )
    sub_B170D4();
  return QuestPhaseEntity__isTurnSituationType(questphase_ent, 0LL);
}


bool __fastcall BattleData__isTutorial(BattleData_o *this, const MethodInfo *method)
{
  return this->fields.tutorialId != -1;
}


bool __fastcall BattleData__isTutorialCard(BattleData_o *this, const MethodInfo *method)
{
  return this->fields.tutorialId != -1 && this->fields.tutorialId != 4;
}


bool __fastcall BattleData__isTutorialSelectsvtCancel(BattleData_o *this, const MethodInfo *method)
{
  return this->fields.tutorialId == 2;
}


bool __fastcall BattleData__isTutorialclickTarget(BattleData_o *this, const MethodInfo *method)
{
  int32_t tutorialId; // w8
  struct BattleData_o *data; // x8

  tutorialId = this->fields.tutorialId;
  if ( (unsigned int)(tutorialId - 1) < 2 )
    return 1;
  if ( tutorialId != 3 || this->fields.wavecount != 1 || this->fields.turnCount != 1 )
    return 0;
  data = this->fields.data;
  if ( !data )
    sub_B170D4();
  return data->fields.tutorialState == 1;
}


bool __fastcall BattleData__isValidViewStarMax(BattleData_o *this, const MethodInfo *method)
{
  return this->fields.totalCriticalStars + this->fields.addCriticalstars - 50 > 49;
}


bool __fastcall BattleData__isWaveStartMovie(BattleData_o *this, const MethodInfo *method)
{
  QuestPhaseEntity_o *questphase_ent; // x0

  questphase_ent = this->fields.questphase_ent;
  if ( !questphase_ent )
    sub_B170D4();
  return QuestPhaseEntity__GetWaveStartMovie(questphase_ent, 0LL) != 0LL;
}


bool __fastcall BattleData__isWinBattleNotRelatedSurvivalStatus(BattleData_o *this, const MethodInfo *method)
{
  return this->fields.winBattleNotRelatedSurvivalStatus;
}


void __fastcall BattleData__loadBoostSkill(BattleData_o *this, const MethodInfo *method)
{
  __int64 v3; // x1
  __int64 v4; // x1
  __int64 v5; // x1
  __int64 v6; // x1
  __int64 v7; // x20
  __int64 v8; // x20
  DataManager_o *v9; // x0
  WarQuestSelectionMaster_o *MasterData_WarQuestSelectionMaster; // x0
  DataMasterBase_WarMaster__WarEntity__int__o *v11; // x20
  BattleBoostItem_array *BattleBoostItemList; // x0
  __int64 v13; // x1
  const MethodInfo *v14; // x2
  __int64 v15; // x3
  __int64 v16; // x4
  int max_length; // w8
  BattleBoostItem_array *v18; // x21
  int32_t v19; // w25
  BattleBoostItem_o *v20; // x23
  BattleBoostItemInfoData_o *v21; // x22
  BattleBoostItemInfoData_c *klass; // x8
  unsigned int skillId; // w24
  BattleInfoData_o *battle_info; // x0
  struct ItemEntity_o *item; // x1
  WarEntity_o *Entity; // x0
  const MethodInfo *v27; // x1
  SkillEntity_o *v28; // x23
  bool isPassive; // w0
  struct System_Collections_Generic_List_BattleBoostItemInfoData__o *boostSkillInfo; // x0

  if ( (byte_40F6A2C & 1) == 0 )
  {
    sub_B16FFC(&BattleBoostItemInfoData_TypeInfo, method);
    sub_B16FFC(&Method_DataManager_GetMasterData_SkillMaster___, v3);
    sub_B16FFC(&Method_DataMasterBase_SkillMaster__SkillEntity__int__GetEntity__, v4);
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleBoostItemInfoData__Add__, v5);
    sub_B16FFC(&Method_SingletonMonoBehaviour_DataManager__getInstance__, v6);
    byte_40F6A2C = 1;
  }
  v7 = *((_QWORD *)Method_SingletonMonoBehaviour_DataManager__getInstance__ + 3);
  if ( (*(_BYTE *)(v7 + 306) & 1) == 0 )
    sub_AAFCFC(*((_QWORD *)Method_SingletonMonoBehaviour_DataManager__getInstance__ + 3));
  v8 = **(_QWORD **)(v7 + 192);
  if ( (*(_BYTE *)(v8 + 306) & 1) == 0 )
    sub_AAFCFC(v8);
  v9 = **(DataManager_o ***)(v8 + 184);
  if ( !v9
    || (MasterData_WarQuestSelectionMaster = DataManager__GetMasterData_WarQuestSelectionMaster_(
                                               v9,
                                               (const MethodInfo_18C3284 *)Method_DataManager_GetMasterData_SkillMaster___),
        !this->fields.battle_info)
    || (v11 = (DataMasterBase_WarMaster__WarEntity__int__o *)MasterData_WarQuestSelectionMaster,
        (BattleBoostItemList = BattleInfoData__getBattleBoostItemList(
                                 this->fields.battle_info,
                                 this->fields.flg_resumebattle,
                                 0LL)) == 0LL) )
  {
LABEL_27:
    sub_B170D4();
  }
  max_length = BattleBoostItemList->max_length;
  v18 = BattleBoostItemList;
  if ( max_length >= 1 )
  {
    v19 = 0;
    while ( 1 )
    {
      if ( v19 >= (unsigned int)max_length )
      {
        sub_B17100(BattleBoostItemList, v13, v14);
        sub_B170A0();
      }
      v20 = v18->m_Items[v19];
      v21 = (BattleBoostItemInfoData_o *)sub_B170CC(BattleBoostItemInfoData_TypeInfo, v13, v14, v15, v16);
      BattleBoostItemInfoData___ctor(v21, 0LL);
      if ( !v20 )
        goto LABEL_27;
      if ( !v21 )
        goto LABEL_27;
      klass = v21->klass;
      skillId = v20->fields.skillId;
      v21->fields.isPassive = 1;
      v21->fields.index = v19;
      v21->fields.svtUniqueId = -1;
      v21->fields.type = 21;
      ((void (__fastcall *)(BattleBoostItemInfoData_o *, _QWORD, Il2CppMethodPointer))klass->vtable._4_set_skillId.method)(
        v21,
        skillId,
        klass->vtable._5_get_skillId.methodPtr);
      v21->fields.skilllv = 1;
      battle_info = this->fields.battle_info;
      if ( !battle_info )
        goto LABEL_27;
      v21->fields.itemImageId = BattleInfoData__getBoostItemImageId(
                                  battle_info,
                                  v21->fields.index,
                                  this->fields.flg_resumebattle,
                                  0LL);
      if ( BattleBoostItem__checkEffectTiming(v20, 1, 0LL) )
        v21->fields.effectTiming = 1;
      item = v20->fields.item;
      v21->fields.boostItemEntity = item;
      sub_B16F98(&v21->fields.boostItemEntity, item);
      if ( !v11 )
        goto LABEL_27;
      Entity = DataMasterBase_WarMaster__WarEntity__int___GetEntity(
                 v11,
                 skillId,
                 (const MethodInfo_266F388 *)Method_DataMasterBase_SkillMaster__SkillEntity__int__GetEntity__);
      if ( !Entity )
        break;
      v28 = (SkillEntity_o *)Entity;
      BattleBoostItemList = (BattleBoostItem_array *)BattleData__IsFriendChocolateQuest(this, v27);
      if ( ((unsigned __int8)BattleBoostItemList & 1) == 0 )
      {
        v21->fields.isUseSkill = 1;
        isPassive = SkillEntity__isPassive(v28, 0LL);
        v21->fields.chargeTurn = 0;
        v21->fields.isPassive = isPassive;
        v21->fields.sealedTurn = 0;
LABEL_23:
        boostSkillInfo = this->fields.boostSkillInfo;
        if ( !boostSkillInfo )
          goto LABEL_27;
        System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData___Add(
          (System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData__o *)boostSkillInfo,
          (EventMissionProgressRequest_Argument_ProgressData_o *)v21,
          (const MethodInfo_2F25CD8 *)Method_System_Collections_Generic_List_BattleBoostItemInfoData__Add__);
      }
      max_length = v18->max_length;
      if ( ++v19 >= max_length )
        goto LABEL_26;
    }
    v21->fields.isUseSkill = 0;
    goto LABEL_23;
  }
LABEL_26:
  BattleData__SetBoostInfo(this, (SkillMaster_o *)v11, v14);
}


int32_t __fastcall BattleData__loadContinueCount(const MethodInfo *method)
{
  __int64 v1; // x1
  __int64 v2; // x1

  if ( (byte_40F6A80 & 1) == 0 )
  {
    sub_B16FFC(&EncryptedPlayerPrefs_TypeInfo, v1);
    sub_B16FFC(&StringLiteral_3353/*"CONTINUECOUNT"*/, v2);
    byte_40F6A80 = 1;
  }
  if ( (BYTE3(EncryptedPlayerPrefs_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0
    && !EncryptedPlayerPrefs_TypeInfo->_2.cctor_finished )
  {
    j_il2cpp_runtime_class_init_0(EncryptedPlayerPrefs_TypeInfo);
  }
  return EncryptedPlayerPrefs__GetInt((System_String_o *)StringLiteral_3353/*"CONTINUECOUNT"*/, 0LL);
}


void __fastcall BattleData__loadCriticalstarts(BattleData_o *this, const MethodInfo *method)
{
  int32_t totalCriticalStars; // w8

  totalCriticalStars = this->fields.totalCriticalStars;
  if ( (totalCriticalStars & 0x80000000) == 0 )
    this->fields.criticalstars = totalCriticalStars;
}


void __fastcall BattleData__loadFsmGameObject(BattleData_o *this, const MethodInfo *method)
{
  PlayMakerFSM_o *fsm; // x0
  HutongGames_PlayMaker_Fsm_o *v4; // x0
  HutongGames_PlayMaker_FsmGameObject_o *FsmGameObject; // x0
  struct BattlePerformance_o *perf; // x8
  HutongGames_PlayMaker_FsmGameObject_o *v7; // x19
  UnityEngine_Component_o *camerafsm; // x0
  UnityEngine_GameObject_o *gameObject; // x0

  if ( (byte_40F6A0D & 1) == 0 )
  {
    sub_B16FFC(&StringLiteral_3463/*"CameraFSM"*/, method);
    byte_40F6A0D = 1;
  }
  fsm = this->fields.fsm;
  if ( !fsm
    || (v4 = PlayMakerFSM__get_Fsm(fsm, 0LL)) == 0LL
    || (FsmGameObject = HutongGames_PlayMaker_Fsm__GetFsmGameObject(v4, (System_String_o *)StringLiteral_3463/*"CameraFSM"*/, 0LL),
        (perf = this->fields.perf) == 0LL)
    || (v7 = FsmGameObject, (camerafsm = (UnityEngine_Component_o *)perf->fields.camerafsm) == 0LL)
    || (gameObject = UnityEngine_Component__get_gameObject(camerafsm, 0LL), !v7) )
  {
    sub_B170D4();
  }
  HutongGames_PlayMaker_FsmGameObject__set_Value(v7, gameObject, 0LL);
}


void __fastcall BattleData__loadHighSpeedMode(BattleData_o *this, const MethodInfo *method)
{
  __int64 v3; // x1
  BattleData_c *v4; // x0
  System_String_o *speedKey; // x20
  BattleData_c *v6; // x0
  System_String_o *v7; // x20

  if ( (byte_40F6A6C & 1) == 0 )
  {
    sub_B16FFC(&BattleData_TypeInfo, method);
    sub_B16FFC(&EncryptedPlayerPrefs_TypeInfo, v3);
    byte_40F6A6C = 1;
  }
  this->fields.systemflg_acceleration = 1;
  v4 = BattleData_TypeInfo;
  if ( (BYTE3(BattleData_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0 && !BattleData_TypeInfo->_2.cctor_finished )
  {
    j_il2cpp_runtime_class_init_0(BattleData_TypeInfo);
    v4 = BattleData_TypeInfo;
  }
  speedKey = v4->static_fields->speedKey;
  if ( (BYTE3(EncryptedPlayerPrefs_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0
    && !EncryptedPlayerPrefs_TypeInfo->_2.cctor_finished )
  {
    j_il2cpp_runtime_class_init_0(EncryptedPlayerPrefs_TypeInfo);
  }
  if ( EncryptedPlayerPrefs__HasKey(speedKey, 0LL) )
  {
    v6 = BattleData_TypeInfo;
    if ( (BYTE3(BattleData_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0 && !BattleData_TypeInfo->_2.cctor_finished )
    {
      j_il2cpp_runtime_class_init_0(BattleData_TypeInfo);
      v6 = BattleData_TypeInfo;
    }
    v7 = v6->static_fields->speedKey;
    if ( (BYTE3(EncryptedPlayerPrefs_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0
      && !EncryptedPlayerPrefs_TypeInfo->_2.cctor_finished )
    {
      j_il2cpp_runtime_class_init_0(EncryptedPlayerPrefs_TypeInfo);
    }
    if ( EncryptedPlayerPrefs__GetInt(v7, 0LL) == 2 )
      this->fields.systemflg_acceleration = 2;
  }
}


void __fastcall BattleData__loadMasterSkill(BattleData_o *this, const MethodInfo *method)
{
  _DWORD *v2; // x28
  __int64 v4; // x1
  __int64 v5; // x1
  __int64 v6; // x1
  __int64 v7; // x1
  __int64 v8; // x1
  __int64 v9; // x1
  __int64 v10; // x1
  __int64 v11; // x1
  __int64 v12; // x1
  __int64 v13; // x1
  __int64 v14; // x1
  __int64 v15; // x1
  __int64 v16; // x1
  __int64 v17; // x1
  __int64 v18; // x1
  __int64 v19; // x1
  __int64 v20; // x1
  __int64 v21; // x1
  __int64 v22; // x1
  __int64 v23; // x1
  __int64 v24; // x1
  __int64 v25; // x1
  __int64 v26; // x1
  __int64 v27; // x1
  __int64 v28; // x1
  __int64 v29; // x1
  __int64 v30; // x1
  __int64 v31; // x1
  __int64 v32; // x1
  __int64 v33; // x1
  __int64 v34; // x1
  __int64 v35; // x1
  __int64 v36; // x1
  __int64 v37; // x1
  __int64 v38; // x1
  __int64 v39; // x1
  __int64 v40; // x1
  __int64 v41; // x1
  __int64 v42; // x1
  __int64 v43; // x1
  __int64 v44; // x1
  struct BattleInfoData_o *battle_info; // x8
  int64_t userEquipId; // x19
  WebViewManager_o *Instance; // x0
  DataMasterBase_UserServantStorageMaster__UserServantEntity__long__o *MasterData_WarQuestSelectionMaster; // x0
  System_Int32_array *SkillIdList; // x0
  __int64 v50; // x2
  System_Int32_array *v51; // x20
  System_Int32_array *v52; // x23
  __int64 v53; // x2
  System_Int32_array *v54; // x22
  __int64 v55; // x2
  __int64 v56; // x0
  System_Boolean_array *v57; // x21
  unsigned __int64 v58; // x19
  System_Collections_Generic_List_TSource__o *SkillLv; // x0
  __int64 v60; // x1
  __int64 v61; // x2
  QuestPhaseEntity_o *questphase_ent; // x0
  System_Collections_Generic_Dictionary_string__object__o *OverwriteEquipSkills; // x0
  const MethodInfo *v64; // x4
  System_Xml_Schema_XmlSchemaObject_o *v65; // x19
  System_Xml_Schema_XmlSchemaObject_o *v66; // x0
  __int64 v67; // x8
  __int64 v68; // x9
  int sourceUri; // w8
  il2cpp_array_size_t v70; // w26
  System_Collections_Generic_Dictionary_XmlQualifiedName__XmlSchemaObject__o *v71; // x24
  __int64 v72; // x9
  BattleData_o *v73; // x24
  int32_t v74; // w8
  QuestPhaseEntity_o *v75; // x0
  System_Collections_Generic_Dictionary_string__object__o *AddEquipSkills; // x0
  System_Collections_Generic_List_object__c *v77; // x1
  __int64 v78; // x8
  __int64 v79; // x2
  __int64 v80; // x3
  __int64 v81; // x4
  __int64 v82; // x9
  unsigned int v83; // w19
  __int64 v84; // x2
  __int64 v85; // x25
  __int64 v86; // x2
  __int64 v87; // x24
  __int64 v88; // x2
  __int64 v89; // x27
  __int64 v90; // x2
  __int64 v91; // x0
  __int64 v92; // x9
  __int64 v93; // x3
  __int64 v94; // x4
  struct System_Int32_array *addIdxs; // x8
  struct System_Int32_array *v96; // x9
  System_Collections_Generic_List_int__o *v97; // x28
  __int64 v98; // x1
  __int64 v99; // x2
  __int64 v100; // x3
  __int64 v101; // x4
  System_Collections_Generic_List_int__o *v102; // x24
  __int64 v103; // x1
  __int64 v104; // x2
  __int64 v105; // x3
  __int64 v106; // x4
  System_Collections_Generic_List_int__o *v107; // x19
  __int64 v108; // x1
  __int64 v109; // x2
  __int64 v110; // x3
  __int64 v111; // x4
  System_Collections_Generic_List_bool__o *v112; // x26
  System_Collections_Generic_IEnumerable_TSource__o *v113; // x0
  System_Int32_array *v114; // x23
  __int64 v115; // x1
  __int64 v116; // x2
  __int64 v117; // x3
  __int64 v118; // x4
  System_Comparison_int__o *v119; // x21
  __int64 v120; // x1
  __int64 v121; // x2
  __int64 v122; // x3
  __int64 v123; // x4
  System_Collections_Generic_IEnumerable_TSource__o *v124; // x21
  BattleData___c_c *v125; // x0
  struct BattleData___c_StaticFields *static_fields; // x8
  System_Func_int__int__o *_9__339_1; // x22
  System_Int32_array *v128; // x20
  Il2CppObject *v129; // x23
  struct BattleData___c_StaticFields *v130; // x0
  System_Collections_Generic_IEnumerable_TSource__o *v131; // x0
  __int64 v132; // x21
  __int64 v133; // x20
  __int64 v134; // x3
  __int64 v135; // x4
  const MethodInfo *v136; // x7
  System_Collections_Generic_Dictionary_int__int__o *v137; // x19
  int v138; // w24
  __int64 v139; // x8
  unsigned __int64 v140; // x19
  int32_t *v141; // x25
  System_Collections_Generic_Dictionary_int__int__o *usedEventMasterSkillDict; // x0
  System_Collections_Generic_Dictionary_int__int__o *v143; // x0
  BattleData_o *v144; // x0
  System_Int32_array **v145; // x1
  System_Int32_array **v146; // x2
  int32_t *v147; // x3
  const MethodInfo *v148; // x4
  BattleData___c__DisplayClass339_0_o *object; // [xsp+8h] [xbp-118h]
  __int64 v150; // [xsp+10h] [xbp-110h]
  __int64 v151; // [xsp+20h] [xbp-100h]
  BattleData___c__DisplayClass339_0_Fields *p_fields; // [xsp+28h] [xbp-F8h]
  __int64 v153; // [xsp+30h] [xbp-F0h]
  int count; // [xsp+44h] [xbp-DCh]
  BattleData_o *v155; // [xsp+48h] [xbp-D8h]
  System_Xml_Schema_XmlSchemaObject_o *v156; // [xsp+50h] [xbp-D0h] BYREF
  System_Xml_Schema_XmlSchemaObject_o *v157; // [xsp+58h] [xbp-C8h] BYREF
  System_Xml_Schema_XmlSchemaObject_o *v158; // [xsp+60h] [xbp-C0h] BYREF
  System_Xml_Schema_XmlSchemaObject_o *v159; // [xsp+68h] [xbp-B8h] BYREF
  System_Xml_Schema_XmlSchemaObject_o *v160; // [xsp+70h] [xbp-B0h] BYREF
  System_Xml_Schema_XmlSchemaObject_o *v161; // [xsp+78h] [xbp-A8h] BYREF
  System_Xml_Schema_XmlSchemaObject_o *v162; // [xsp+80h] [xbp-A0h] BYREF
  System_Xml_Schema_XmlSchemaObject_o *v163; // [xsp+88h] [xbp-98h] BYREF
  System_Xml_Schema_XmlSchemaObject_o *v164; // [xsp+90h] [xbp-90h] BYREF
  System_Xml_Schema_XmlSchemaObject_o *v165; // [xsp+98h] [xbp-88h] BYREF
  System_Xml_Schema_XmlSchemaObject_o *value; // [xsp+A0h] [xbp-80h] BYREF
  int32_t masterIconId; // [xsp+ACh] [xbp-74h] BYREF
  System_Int32_array *skillLvs; // [xsp+B0h] [xbp-70h] BYREF
  System_Int32_array *skillIds; // [xsp+B8h] [xbp-68h] BYREF
  UserServantEntity_o *entity; // [xsp+C0h] [xbp-60h] BYREF

  if ( (byte_40F6A29 & 1) == 0 )
  {
    sub_B16FFC(&Method_System_Array_Sort_int____66801208, method);
    sub_B16FFC(&bool___TypeInfo, v4);
    sub_B16FFC(&Method_System_Comparison_int___ctor__, v5);
    sub_B16FFC(&System_Comparison_int__TypeInfo, v6);
    sub_B16FFC(&Method_DataManager_GetMasterData_UserEquipMaster___, v7);
    sub_B16FFC(&Method_DataMasterBase_UserEquipMaster__UserEquipEntity__long__TryGetEntity__, v8);
    sub_B16FFC(&Method_System_Collections_Generic_Dictionary_int__int__Add__, v9);
    sub_B16FFC(&Method_System_Collections_Generic_Dictionary_int__int__ContainsKey__, v10);
    sub_B16FFC(&Method_System_Collections_Generic_Dictionary_string__object__TryGetValue__, v11);
    sub_B16FFC(&Method_System_Collections_Generic_Dictionary_int__int___ctor__, v12);
    sub_B16FFC(&System_Collections_Generic_Dictionary_int__int__TypeInfo, v13);
    sub_B16FFC(&System_Collections_Generic_Dictionary_string__object__TypeInfo, v14);
    sub_B16FFC(&Method_System_Linq_Enumerable_OrderBy_int__int___, v15);
    sub_B16FFC(&Method_System_Linq_Enumerable_ToArray_int___, v16);
    sub_B16FFC(&Method_System_Linq_Enumerable_ToList_int___, v17);
    sub_B16FFC(&Method_System_Func_int__int___ctor__, v18);
    sub_B16FFC(&System_Func_int__int__TypeInfo, v19);
    sub_B16FFC(&int___TypeInfo, v20);
    sub_B16FFC(&long_TypeInfo, v21);
    sub_B16FFC(&Method_System_Collections_Generic_List_bool__Insert__, v22);
    sub_B16FFC(&Method_System_Collections_Generic_List_int__Insert__, v23);
    sub_B16FFC(&Method_System_Collections_Generic_List_bool__ToArray__, v24);
    sub_B16FFC(&Method_System_Collections_Generic_List_int__ToArray__, v25);
    sub_B16FFC(&Method_System_Collections_Generic_List_bool___ctor___66727368, v26);
    sub_B16FFC(&Method_System_Collections_Generic_List_int___ctor___66737200, v27);
    sub_B16FFC(&Method_System_Collections_Generic_List_object__get_Count__, v28);
    sub_B16FFC(&Method_System_Collections_Generic_List_object__get_Item__, v29);
    sub_B16FFC(&System_Collections_Generic_List_int__TypeInfo, v30);
    sub_B16FFC(&System_Collections_Generic_List_object__TypeInfo, v31);
    sub_B16FFC(&System_Collections_Generic_List_bool__TypeInfo, v32);
    sub_B16FFC(&Method_SingletonMonoBehaviour_DataManager__get_Instance__, v33);
    sub_B16FFC(&Method_BattleData___c__loadMasterSkill_b__339_1__, v34);
    sub_B16FFC(&Method_BattleData___c__DisplayClass339_0__loadMasterSkill_b__0__, v35);
    sub_B16FFC(&BattleData___c__DisplayClass339_0_TypeInfo, v36);
    sub_B16FFC(&BattleData___c_TypeInfo, v37);
    sub_B16FFC(&StringLiteral_19199/*"iconId"*/, v38);
    sub_B16FFC(&StringLiteral_17577/*"condId"*/, v39);
    sub_B16FFC(&StringLiteral_19307/*"id"*/, v40);
    sub_B16FFC(&StringLiteral_19319/*"idx"*/, v41);
    sub_B16FFC(&StringLiteral_22060/*"skills"*/, v42);
    sub_B16FFC(&StringLiteral_17776/*"cutInView"*/, v43);
    sub_B16FFC(&StringLiteral_20250/*"lv"*/, v44);
    byte_40F6A29 = 1;
  }
  skillIds = 0LL;
  entity = 0LL;
  skillLvs = 0LL;
  masterIconId = 0;
  v165 = 0LL;
  value = 0LL;
  v163 = 0LL;
  v164 = 0LL;
  v161 = 0LL;
  v162 = 0LL;
  v159 = 0LL;
  v160 = 0LL;
  v157 = 0LL;
  v158 = 0LL;
  v156 = 0LL;
  battle_info = this->fields.battle_info;
  if ( !battle_info )
    goto LABEL_149;
  userEquipId = battle_info->fields.userEquipId;
  Instance = SingletonMonoBehaviour_WebViewManager___get_Instance((const MethodInfo_2A54F38 *)Method_SingletonMonoBehaviour_DataManager__get_Instance__);
  if ( !Instance )
    goto LABEL_149;
  v155 = this;
  MasterData_WarQuestSelectionMaster = (DataMasterBase_UserServantStorageMaster__UserServantEntity__long__o *)DataManager__GetMasterData_WarQuestSelectionMaster_((DataManager_o *)Instance, (const MethodInfo_18C3284 *)Method_DataManager_GetMasterData_UserEquipMaster___);
  if ( !MasterData_WarQuestSelectionMaster )
    goto LABEL_149;
  if ( DataMasterBase_UserServantStorageMaster__UserServantEntity__long___TryGetEntity(
         MasterData_WarQuestSelectionMaster,
         &entity,
         userEquipId,
         (const MethodInfo_266F60C *)Method_DataMasterBase_UserEquipMaster__UserEquipEntity__long__TryGetEntity__) )
  {
    if ( !entity )
      goto LABEL_149;
    SkillIdList = UserEquipEntity__getSkillIdList((UserEquipEntity_o *)entity, 0LL);
    if ( !SkillIdList )
      goto LABEL_149;
    v51 = SkillIdList;
    v52 = (System_Int32_array *)sub_B17014(int___TypeInfo, SkillIdList->max_length, v50);
    v54 = (System_Int32_array *)sub_B17014(int___TypeInfo, v51->max_length, v53);
    v56 = sub_B17014(bool___TypeInfo, v51->max_length, v55);
    if ( !v52 )
      goto LABEL_149;
    v57 = (System_Boolean_array *)v56;
    if ( (int)v52->max_length >= 1 )
    {
      v58 = 0LL;
      while ( entity )
      {
        SkillLv = (System_Collections_Generic_List_TSource__o *)UserEquipEntity__getSkillLv(
                                                                  (UserEquipEntity_o *)entity,
                                                                  v58,
                                                                  0LL);
        if ( v58 >= v52->max_length )
          goto LABEL_150;
        v52->m_Items[v58 + 1] = (int)SkillLv;
        if ( !v54 )
          break;
        if ( v58 >= v54->max_length )
          goto LABEL_150;
        v54->m_Items[v58 + 1] = -1;
        if ( !v57 )
          break;
        if ( v58 >= v57->max_length )
        {
LABEL_150:
          sub_B17100(SkillLv, v60, v61);
          sub_B170A0();
        }
        v57->m_Items[v58++ + 4] = 0;
        if ( (__int64)v58 >= (int)v52->max_length )
          goto LABEL_19;
      }
LABEL_149:
      sub_B170D4();
    }
LABEL_19:
    questphase_ent = v155->fields.questphase_ent;
    v155->fields.masterSkillIconId = 0;
    v155->fields.isShowMasterSkillCutIn = 1;
    if ( !questphase_ent )
      goto LABEL_149;
    OverwriteEquipSkills = QuestPhaseEntity__GetOverwriteEquipSkills(questphase_ent, 0LL);
    if ( OverwriteEquipSkills )
    {
      v65 = (System_Xml_Schema_XmlSchemaObject_o *)OverwriteEquipSkills;
      if ( System_Collections_Generic_Dictionary_XmlQualifiedName__XmlSchemaObject___TryGetValue(
             (System_Collections_Generic_Dictionary_XmlQualifiedName__XmlSchemaObject__o *)OverwriteEquipSkills,
             (System_Xml_XmlQualifiedName_o *)StringLiteral_19199/*"iconId"*/,
             &value,
             (const MethodInfo_2DA5A18 *)Method_System_Collections_Generic_Dictionary_string__object__TryGetValue__) )
      {
        v66 = value;
        if ( !value )
          goto LABEL_149;
        if ( value->klass->_1.element_class != long_TypeInfo->_1.element_class )
          goto LABEL_152;
        v67 = *(_QWORD *)j_il2cpp_object_unbox_0(value);
        v155->fields.isShowMasterSkillCutIn = 0;
        v155->fields.masterSkillIconId = v67;
      }
      if ( System_Collections_Generic_Dictionary_XmlQualifiedName__XmlSchemaObject___TryGetValue(
             (System_Collections_Generic_Dictionary_XmlQualifiedName__XmlSchemaObject__o *)v65,
             (System_Xml_XmlQualifiedName_o *)StringLiteral_17776/*"cutInView"*/,
             &v165,
             (const MethodInfo_2DA5A18 *)Method_System_Collections_Generic_Dictionary_string__object__TryGetValue__) )
      {
        v66 = v165;
        if ( !v165 )
          goto LABEL_149;
        if ( v165->klass->_1.element_class != long_TypeInfo->_1.element_class )
          goto LABEL_152;
        v155->fields.isShowMasterSkillCutIn = *(_DWORD *)j_il2cpp_object_unbox_0(v165) == 1;
      }
      if ( System_Collections_Generic_Dictionary_XmlQualifiedName__XmlSchemaObject___TryGetValue(
             (System_Collections_Generic_Dictionary_XmlQualifiedName__XmlSchemaObject__o *)v65,
             (System_Xml_XmlQualifiedName_o *)StringLiteral_22060/*"skills"*/,
             &v164,
             (const MethodInfo_2DA5A18 *)Method_System_Collections_Generic_Dictionary_string__object__TryGetValue__) )
      {
        v65 = v164;
        if ( !v164 )
          goto LABEL_149;
        v68 = *(&System_Collections_Generic_List_object__TypeInfo->_2.bitflags2 + 1);
        if ( *(&v164->klass->_2.bitflags2 + 1) < (unsigned int)v68
          || (System_Collections_Generic_List_object__c *)v164->klass->_2.typeHierarchy[v68 - 1] != System_Collections_Generic_List_object__TypeInfo )
        {
          goto LABEL_153;
        }
        sourceUri = (int)v164->fields.sourceUri;
        if ( sourceUri >= 1 )
        {
          v2 = &System_Collections_Generic_Dictionary_string__object__TypeInfo;
          v70 = 0;
          while ( 1 )
          {
            if ( sourceUri <= v70 )
              System_ThrowHelper__ThrowArgumentOutOfRangeException_41329284(0LL);
            v71 = *(System_Collections_Generic_Dictionary_XmlQualifiedName__XmlSchemaObject__o **)(*(_QWORD *)&v65->fields.lineNum
                                                                                                 + 8LL * (int)v70
                                                                                                 + 32);
            if ( !v71 )
              goto LABEL_149;
            v72 = *(&System_Collections_Generic_Dictionary_string__object__TypeInfo->_2.bitflags2 + 1);
            if ( *(&v71->klass->_2.bitflags2 + 1) < (unsigned int)v72
              || (System_Collections_Generic_Dictionary_string__object__c *)v71->klass->_2.typeHierarchy[v72 - 1] != System_Collections_Generic_Dictionary_string__object__TypeInfo )
            {
              break;
            }
            if ( System_Collections_Generic_Dictionary_XmlQualifiedName__XmlSchemaObject___TryGetValue(
                   v71,
                   (System_Xml_XmlQualifiedName_o *)StringLiteral_19307/*"id"*/,
                   &v163,
                   (const MethodInfo_2DA5A18 *)Method_System_Collections_Generic_Dictionary_string__object__TryGetValue__) )
            {
              v66 = v163;
              if ( !v163 )
                goto LABEL_149;
              if ( v163->klass->_1.element_class != long_TypeInfo->_1.element_class )
                goto LABEL_152;
              SkillLv = (System_Collections_Generic_List_TSource__o *)j_il2cpp_object_unbox_0(v163);
              if ( SLODWORD(SkillLv->klass) >= 1 )
              {
                if ( v70 >= v51->max_length )
                  goto LABEL_150;
                v51->m_Items[v70 + 1] = (int32_t)SkillLv->klass;
                if ( System_Collections_Generic_Dictionary_XmlQualifiedName__XmlSchemaObject___TryGetValue(
                       v71,
                       (System_Xml_XmlQualifiedName_o *)StringLiteral_20250/*"lv"*/,
                       &v162,
                       (const MethodInfo_2DA5A18 *)Method_System_Collections_Generic_Dictionary_string__object__TryGetValue__) )
                {
                  v66 = v162;
                  if ( !v162 )
                    goto LABEL_149;
                  if ( v162->klass->_1.element_class != long_TypeInfo->_1.element_class )
                    goto LABEL_152;
                  SkillLv = (System_Collections_Generic_List_TSource__o *)j_il2cpp_object_unbox_0(v162);
                  if ( ((__int64)SkillLv->klass & 0x80000000) == 0 )
                  {
                    if ( v70 >= v52->max_length )
                      goto LABEL_150;
                    v52->m_Items[v70 + 1] = (int32_t)SkillLv->klass;
                  }
                }
              }
            }
            sourceUri = (int)v65->fields.sourceUri;
            if ( (int)++v70 >= sourceUri )
              goto LABEL_52;
          }
LABEL_151:
          v66 = (System_Xml_Schema_XmlSchemaObject_o *)sub_B173C8(v71);
LABEL_152:
          sub_B173C8(v66);
LABEL_153:
          sub_B173C8(v65);
LABEL_154:
          v144 = (BattleData_o *)sub_B173C8(v2);
          BattleData__tryOverwriteEventEquipSkill(v144, v145, v146, v147, v148);
          return;
        }
      }
    }
LABEL_52:
    v73 = v155;
    if ( BattleData__tryOverwriteEventEquipSkill(v155, &skillIds, &skillLvs, &masterIconId, v64) )
    {
      v74 = masterIconId;
      v52 = skillLvs;
      v51 = skillIds;
      v155->fields.isShowMasterSkillCutIn = 1;
      v155->fields.masterSkillIconId = v74;
    }
    v75 = v155->fields.questphase_ent;
    if ( !v75 )
      goto LABEL_149;
    AddEquipSkills = QuestPhaseEntity__GetAddEquipSkills(v75, 0LL);
    if ( AddEquipSkills )
    {
      v65 = (System_Xml_Schema_XmlSchemaObject_o *)AddEquipSkills;
      if ( System_Collections_Generic_Dictionary_XmlQualifiedName__XmlSchemaObject___TryGetValue(
             (System_Collections_Generic_Dictionary_XmlQualifiedName__XmlSchemaObject__o *)AddEquipSkills,
             (System_Xml_XmlQualifiedName_o *)StringLiteral_19199/*"iconId"*/,
             &v161,
             (const MethodInfo_2DA5A18 *)Method_System_Collections_Generic_Dictionary_string__object__TryGetValue__) )
      {
        v66 = v161;
        if ( !v161 )
          goto LABEL_149;
        if ( v161->klass->_1.element_class != long_TypeInfo->_1.element_class )
          goto LABEL_152;
        v78 = *(_QWORD *)j_il2cpp_object_unbox_0(v161);
        v155->fields.isShowMasterSkillCutIn = 0;
        v155->fields.masterSkillIconId = v78;
      }
      if ( System_Collections_Generic_Dictionary_XmlQualifiedName__XmlSchemaObject___TryGetValue(
             (System_Collections_Generic_Dictionary_XmlQualifiedName__XmlSchemaObject__o *)v65,
             (System_Xml_XmlQualifiedName_o *)StringLiteral_22060/*"skills"*/,
             &v160,
             (const MethodInfo_2DA5A18 *)Method_System_Collections_Generic_Dictionary_string__object__TryGetValue__) )
      {
        v2 = v160;
        if ( !v160 )
          goto LABEL_149;
        v77 = System_Collections_Generic_List_object__TypeInfo;
        v82 = *(&System_Collections_Generic_List_object__TypeInfo->_2.bitflags2 + 1);
        if ( *(&v160->klass->_2.bitflags2 + 1) < (unsigned int)v82
          || (System_Collections_Generic_List_object__c *)v160->klass->_2.typeHierarchy[v82 - 1] != System_Collections_Generic_List_object__TypeInfo )
        {
          goto LABEL_154;
        }
        v83 = (unsigned int)v160->fields.sourceUri;
        if ( (int)v83 >= 1 )
        {
          object = (BattleData___c__DisplayClass339_0_o *)sub_B170CC(
                                                            BattleData___c__DisplayClass339_0_TypeInfo,
                                                            System_Collections_Generic_List_object__TypeInfo,
                                                            v79,
                                                            v80,
                                                            v81);
          BattleData___c__DisplayClass339_0___ctor(object, 0LL);
          v85 = sub_B17014(int___TypeInfo, v83, v84);
          v87 = sub_B17014(int___TypeInfo, v83, v86);
          v89 = sub_B17014(int___TypeInfo, v83, v88);
          count = v83;
          v91 = sub_B17014(int___TypeInfo, v83, v90);
          if ( !object )
            goto LABEL_149;
          object->fields.addIdxs = (struct System_Int32_array *)v91;
          p_fields = &object->fields;
          sub_B16F98(&object->fields, v91);
          v65 = 0LL;
          v150 = v87 + 32;
          v153 = v87;
          v151 = v89 + 32;
          do
          {
            if ( v2[6] <= (unsigned int)v65 )
              System_ThrowHelper__ThrowArgumentOutOfRangeException_41329284(0LL);
            v71 = *(System_Collections_Generic_Dictionary_XmlQualifiedName__XmlSchemaObject__o **)(*((_QWORD *)v2 + 2)
                                                                                                 + 8LL * (_QWORD)v65
                                                                                                 + 32);
            if ( !v71 )
              goto LABEL_149;
            v92 = *(&System_Collections_Generic_Dictionary_string__object__TypeInfo->_2.bitflags2 + 1);
            if ( *(&v71->klass->_2.bitflags2 + 1) < (unsigned int)v92
              || (System_Collections_Generic_Dictionary_string__object__c *)v71->klass->_2.typeHierarchy[v92 - 1] != System_Collections_Generic_Dictionary_string__object__TypeInfo )
            {
              goto LABEL_151;
            }
            if ( System_Collections_Generic_Dictionary_XmlQualifiedName__XmlSchemaObject___TryGetValue(
                   v71,
                   (System_Xml_XmlQualifiedName_o *)StringLiteral_19307/*"id"*/,
                   &v159,
                   (const MethodInfo_2DA5A18 *)Method_System_Collections_Generic_Dictionary_string__object__TryGetValue__) )
            {
              v66 = v159;
              if ( !v159 )
                goto LABEL_149;
              if ( v159->klass->_1.element_class != long_TypeInfo->_1.element_class )
                goto LABEL_152;
              SkillLv = (System_Collections_Generic_List_TSource__o *)j_il2cpp_object_unbox_0(v159);
              if ( SLODWORD(SkillLv->klass) >= 1 )
              {
                if ( !v85 )
                  goto LABEL_149;
                if ( (unsigned int)v65 >= *(_DWORD *)(v85 + 24) )
                  goto LABEL_150;
                *(_DWORD *)(v85 + 32 + 4LL * (_QWORD)v65) = SkillLv->klass;
                SkillLv = (System_Collections_Generic_List_TSource__o *)System_Collections_Generic_Dictionary_XmlQualifiedName__XmlSchemaObject___TryGetValue(
                                                                          v71,
                                                                          (System_Xml_XmlQualifiedName_o *)StringLiteral_20250/*"lv"*/,
                                                                          &v158,
                                                                          (const MethodInfo_2DA5A18 *)Method_System_Collections_Generic_Dictionary_string__object__TryGetValue__);
                if ( ((unsigned __int8)SkillLv & 1) != 0 )
                {
                  v66 = v158;
                  if ( !v158 )
                    goto LABEL_149;
                  if ( v158->klass->_1.element_class != long_TypeInfo->_1.element_class )
                    goto LABEL_152;
                  SkillLv = (System_Collections_Generic_List_TSource__o *)j_il2cpp_object_unbox_0(v158);
                  if ( ((__int64)SkillLv->klass & 0x80000000) == 0 )
                  {
                    if ( !v153 )
                      goto LABEL_149;
                    if ( (unsigned int)v65 >= *(_DWORD *)(v153 + 24) )
                      goto LABEL_150;
                    *(_DWORD *)(v150 + 4LL * (_QWORD)v65) = SkillLv->klass;
                  }
                }
                if ( !v89 )
                  goto LABEL_149;
                if ( (unsigned int)v65 >= *(_DWORD *)(v89 + 24) )
                  goto LABEL_150;
                *(_DWORD *)(v151 + 4LL * (_QWORD)v65) = -1;
                SkillLv = (System_Collections_Generic_List_TSource__o *)System_Collections_Generic_Dictionary_XmlQualifiedName__XmlSchemaObject___TryGetValue(
                                                                          v71,
                                                                          (System_Xml_XmlQualifiedName_o *)StringLiteral_17577/*"condId"*/,
                                                                          &v157,
                                                                          (const MethodInfo_2DA5A18 *)Method_System_Collections_Generic_Dictionary_string__object__TryGetValue__);
                if ( ((unsigned __int8)SkillLv & 1) != 0 )
                {
                  v66 = v157;
                  if ( !v157 )
                    goto LABEL_149;
                  if ( v157->klass->_1.element_class != long_TypeInfo->_1.element_class )
                    goto LABEL_152;
                  SkillLv = (System_Collections_Generic_List_TSource__o *)j_il2cpp_object_unbox_0(v157);
                  if ( ((__int64)SkillLv->klass & 0x80000000) == 0 )
                  {
                    if ( (unsigned int)v65 >= *(_DWORD *)(v89 + 24) )
                      goto LABEL_150;
                    *(_DWORD *)(v151 + 4LL * (_QWORD)v65) = SkillLv->klass;
                  }
                }
                addIdxs = p_fields->addIdxs;
                if ( !p_fields->addIdxs )
                  goto LABEL_149;
                if ( (unsigned int)v65 >= addIdxs->max_length )
                  goto LABEL_150;
                addIdxs->m_Items[(_QWORD)v65 + 1] = -1;
                if ( System_Collections_Generic_Dictionary_XmlQualifiedName__XmlSchemaObject___TryGetValue(
                       v71,
                       (System_Xml_XmlQualifiedName_o *)StringLiteral_19319/*"idx"*/,
                       &v156,
                       (const MethodInfo_2DA5A18 *)Method_System_Collections_Generic_Dictionary_string__object__TryGetValue__) )
                {
                  v66 = v156;
                  if ( !v156 )
                    goto LABEL_149;
                  if ( v156->klass->_1.element_class != long_TypeInfo->_1.element_class )
                    goto LABEL_152;
                  SkillLv = (System_Collections_Generic_List_TSource__o *)j_il2cpp_object_unbox_0(v156);
                  if ( ((__int64)SkillLv->klass & 0x80000000) == 0 )
                  {
                    v96 = p_fields->addIdxs;
                    if ( !p_fields->addIdxs )
                      goto LABEL_149;
                    if ( (unsigned int)v65 >= v96->max_length )
                      goto LABEL_150;
                    v96->m_Items[(_QWORD)v65 + 1] = (int32_t)SkillLv->klass;
                  }
                }
              }
            }
            v65 = (System_Xml_Schema_XmlSchemaObject_o *)((char *)v65 + 1);
          }
          while ( (int)v65 < count );
          v97 = (System_Collections_Generic_List_int__o *)sub_B170CC(
                                                            System_Collections_Generic_List_int__TypeInfo,
                                                            v60,
                                                            v61,
                                                            v93,
                                                            v94);
          System_Collections_Generic_List_int____ctor_49346956(
            v97,
            (System_Collections_Generic_IEnumerable_T__o *)v51,
            (const MethodInfo_2F0F98C *)Method_System_Collections_Generic_List_int___ctor___66737200);
          v102 = (System_Collections_Generic_List_int__o *)sub_B170CC(
                                                             System_Collections_Generic_List_int__TypeInfo,
                                                             v98,
                                                             v99,
                                                             v100,
                                                             v101);
          System_Collections_Generic_List_int____ctor_49346956(
            v102,
            (System_Collections_Generic_IEnumerable_T__o *)v52,
            (const MethodInfo_2F0F98C *)Method_System_Collections_Generic_List_int___ctor___66737200);
          v107 = (System_Collections_Generic_List_int__o *)sub_B170CC(
                                                             System_Collections_Generic_List_int__TypeInfo,
                                                             v103,
                                                             v104,
                                                             v105,
                                                             v106);
          System_Collections_Generic_List_int____ctor_49346956(
            v107,
            (System_Collections_Generic_IEnumerable_T__o *)v54,
            (const MethodInfo_2F0F98C *)Method_System_Collections_Generic_List_int___ctor___66737200);
          v112 = (System_Collections_Generic_List_bool__o *)sub_B170CC(
                                                              System_Collections_Generic_List_bool__TypeInfo,
                                                              v108,
                                                              v109,
                                                              v110,
                                                              v111);
          System_Collections_Generic_List_bool____ctor_48951152(
            v112,
            (System_Collections_Generic_IEnumerable_T__o *)v57,
            (const MethodInfo_2EAEF70 *)Method_System_Collections_Generic_List_bool___ctor___66727368);
          v113 = (System_Collections_Generic_IEnumerable_TSource__o *)System_Linq_Enumerable__Range(0, count, 0LL);
          v114 = System_Linq_Enumerable__ToArray_int_(
                   v113,
                   (const MethodInfo_19C4A28 *)Method_System_Linq_Enumerable_ToArray_int___);
          v119 = (System_Comparison_int__o *)sub_B170CC(System_Comparison_int__TypeInfo, v115, v116, v117, v118);
          System_Comparison_int____ctor(
            v119,
            (Il2CppObject *)object,
            Method_BattleData___c__DisplayClass339_0__loadMasterSkill_b__0__,
            (const MethodInfo_25BE414 *)Method_System_Comparison_int___ctor__);
          System_Array__Sort_int__38824640(
            v114,
            (System_Comparison_T__o *)v119,
            (const MethodInfo_2506AC0 *)Method_System_Array_Sort_int____66801208);
          v124 = (System_Collections_Generic_IEnumerable_TSource__o *)object->fields.addIdxs;
          v125 = BattleData___c_TypeInfo;
          if ( (BYTE3(BattleData___c_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0
            && !BattleData___c_TypeInfo->_2.cctor_finished )
          {
            j_il2cpp_runtime_class_init_0(BattleData___c_TypeInfo);
            v125 = BattleData___c_TypeInfo;
          }
          static_fields = v125->static_fields;
          _9__339_1 = static_fields->__9__339_1;
          if ( !_9__339_1 )
          {
            if ( (BYTE3(v125->vtable._0_Equals.methodPtr) & 4) != 0 )
            {
              v128 = v114;
              if ( !v125->_2.cctor_finished )
              {
                j_il2cpp_runtime_class_init_0(v125);
                static_fields = BattleData___c_TypeInfo->static_fields;
              }
            }
            else
            {
              v128 = v114;
            }
            v129 = (Il2CppObject *)static_fields->__9;
            _9__339_1 = (System_Func_int__int__o *)sub_B170CC(System_Func_int__int__TypeInfo, v120, v121, v122, v123);
            System_Func_int__int____ctor(
              _9__339_1,
              v129,
              Method_BattleData___c__loadMasterSkill_b__339_1__,
              (const MethodInfo_2B65E70 *)Method_System_Func_int__int___ctor__);
            v130 = BattleData___c_TypeInfo->static_fields;
            v130->__9__339_1 = _9__339_1;
            sub_B16F98(&v130->__9__339_1, _9__339_1);
            v114 = v128;
          }
          v131 = (System_Collections_Generic_IEnumerable_TSource__o *)System_Linq_Enumerable__OrderBy_int__int_(
                                                                        v124,
                                                                        (System_Func_TSource__TKey__o *)_9__339_1,
                                                                        (const MethodInfo_19BD5F8 *)Method_System_Linq_Enumerable_OrderBy_int__int___);
          SkillLv = System_Linq_Enumerable__ToList_int_(
                      v131,
                      (const MethodInfo_19C78D8 *)Method_System_Linq_Enumerable_ToList_int___);
          if ( !v114 )
            goto LABEL_149;
          v132 = 0LL;
          do
          {
            if ( (unsigned int)v132 >= v114->max_length )
              goto LABEL_150;
            if ( !v85 )
              goto LABEL_149;
            v133 = v114->m_Items[v132 + 1];
            if ( (unsigned int)v133 >= *(_DWORD *)(v85 + 24) )
              goto LABEL_150;
            if ( !v97 )
              goto LABEL_149;
            System_Collections_Generic_List_int___Insert(
              v97,
              0,
              *(_DWORD *)(v85 + 4 * v133 + 32),
              (const MethodInfo_2F116D0 *)Method_System_Collections_Generic_List_int__Insert__);
            if ( !v153 )
              goto LABEL_149;
            if ( (unsigned int)v133 >= *(_DWORD *)(v153 + 24) )
              goto LABEL_150;
            if ( !v102 )
              goto LABEL_149;
            System_Collections_Generic_List_int___Insert(
              v102,
              0,
              *(_DWORD *)(v153 + 4 * v133 + 32),
              (const MethodInfo_2F116D0 *)Method_System_Collections_Generic_List_int__Insert__);
            if ( !v89 )
              goto LABEL_149;
            if ( (unsigned int)v133 >= *(_DWORD *)(v89 + 24) )
              goto LABEL_150;
            if ( !v107 )
              goto LABEL_149;
            System_Collections_Generic_List_int___Insert(
              v107,
              0,
              *(_DWORD *)(v89 + 4 * v133 + 32),
              (const MethodInfo_2F116D0 *)Method_System_Collections_Generic_List_int__Insert__);
            if ( !v112 )
              goto LABEL_149;
            System_Collections_Generic_List_bool___Insert(
              v112,
              0,
              1,
              (const MethodInfo_2EB0CE8 *)Method_System_Collections_Generic_List_bool__Insert__);
            ++v132;
          }
          while ( (int)v132 < count );
          v51 = System_Collections_Generic_List_int___ToArray(
                  v97,
                  (const MethodInfo_2F125FC *)Method_System_Collections_Generic_List_int__ToArray__);
          v52 = System_Collections_Generic_List_int___ToArray(
                  v102,
                  (const MethodInfo_2F125FC *)Method_System_Collections_Generic_List_int__ToArray__);
          v54 = System_Collections_Generic_List_int___ToArray(
                  v107,
                  (const MethodInfo_2F125FC *)Method_System_Collections_Generic_List_int__ToArray__);
          v73 = v155;
          v57 = System_Collections_Generic_List_bool___ToArray(
                  v112,
                  (const MethodInfo_2EB1C24 *)Method_System_Collections_Generic_List_bool__ToArray__);
        }
      }
    }
    SkillLv = (System_Collections_Generic_List_TSource__o *)BattleData__isEventActivityPoint(
                                                              v73,
                                                              (const MethodInfo *)v77);
    if ( ((unsigned __int8)SkillLv & 1) != 0 )
    {
      v137 = (System_Collections_Generic_Dictionary_int__int__o *)sub_B170CC(
                                                                    System_Collections_Generic_Dictionary_int__int__TypeInfo,
                                                                    v60,
                                                                    v61,
                                                                    v134,
                                                                    v135);
      System_Collections_Generic_Dictionary_int__int____ctor(
        v137,
        (const MethodInfo_2DDC410 *)Method_System_Collections_Generic_Dictionary_int__int___ctor__);
      v73->fields.usedEventMasterSkillDict = v137;
      SkillLv = (System_Collections_Generic_List_TSource__o *)sub_B16F98(&v73->fields.usedEventMasterSkillDict, v137);
      v138 = 1;
      if ( !v51 )
        goto LABEL_149;
    }
    else
    {
      v138 = 0;
      if ( !v51 )
        goto LABEL_149;
    }
    v139 = *(_QWORD *)&v51->max_length;
    if ( (int)v139 >= 1 )
    {
      v140 = 0LL;
      v141 = &v51->m_Items[1];
      while ( 1 )
      {
        if ( v138 )
        {
          if ( v140 >= (unsigned int)v139 )
            goto LABEL_150;
          usedEventMasterSkillDict = v155->fields.usedEventMasterSkillDict;
          if ( !usedEventMasterSkillDict )
            goto LABEL_149;
          SkillLv = (System_Collections_Generic_List_TSource__o *)System_Collections_Generic_Dictionary_int__int___ContainsKey(
                                                                    usedEventMasterSkillDict,
                                                                    v141[v140],
                                                                    (const MethodInfo_2DDD218 *)Method_System_Collections_Generic_Dictionary_int__int__ContainsKey__);
          if ( ((unsigned __int8)SkillLv & 1) == 0 )
          {
            if ( v140 >= v51->max_length )
              goto LABEL_150;
            v143 = v155->fields.usedEventMasterSkillDict;
            if ( !v143 )
              goto LABEL_149;
            System_Collections_Generic_Dictionary_int__int___Add(
              v143,
              v141[v140],
              0,
              (const MethodInfo_2DDCFB4 *)Method_System_Collections_Generic_Dictionary_int__int__Add__);
          }
        }
        if ( v140 >= v51->max_length )
          goto LABEL_150;
        if ( !v52 )
          goto LABEL_149;
        if ( v140 >= v52->max_length )
          goto LABEL_150;
        if ( !v54 )
          goto LABEL_149;
        if ( v140 >= v54->max_length )
          goto LABEL_150;
        if ( !v57 )
          goto LABEL_149;
        if ( v140 >= v57->max_length )
          goto LABEL_150;
        BattleData__addMasterSkillInfo(
          v155,
          1,
          v140,
          v141[v140],
          v52->m_Items[v140 + 1],
          v54->m_Items[v140 + 1],
          v57->m_Items[v140 + 4],
          v136);
        LODWORD(v139) = v51->max_length;
        if ( (__int64)++v140 >= (int)v139 )
          return;
      }
    }
  }
}


// local variable allocation has failed, the output may be wrong!
void __fastcall BattleData__loadNstage(BattleData_o *this, int32_t inwavecount, const MethodInfo *method)
{
  BattleData_o *v4; // x19
  __int64 v5; // x1
  __int64 v6; // x1
  __int64 v7; // x1
  __int64 v8; // x1
  __int64 v9; // x1
  __int64 v10; // x1
  __int64 v11; // x1
  __int64 v12; // x1
  struct System_Int32_array *e_entryid; // x9
  unsigned __int64 v14; // x8
  struct System_Int32_array **p_e_entryid; // x21
  unsigned __int64 max_length; // x11
  DrawLotsDisplayMessage_o *DrawLotsDispMsg_k__BackingField; // x0
  struct System_Collections_Generic_List_BattleServantData__o *player_datalist; // x23
  int size; // w20
  unsigned int v20; // w22
  BattleServantData_o *v21; // x0
  BattleInfoData_o *battle_info; // x0
  DeckData_o *EnemyDeck; // x0
  DeckData_o *v24; // x22
  System_Collections_Generic_IEnumerable_TSource__o *v25; // x0
  System_Int32_array *v26; // x0
  __int64 v27; // x3
  __int64 v28; // x4
  struct BattleDeckServantData_array *svts; // x24
  int v30; // w8
  unsigned int v31; // w25
  BattleDeckServantData_o *v32; // x23
  int32_t id; // w20
  BattleServantData_o *v34; // x22
  struct BaseBattleEvent_o *battleEvent; // x0
  struct System_Int32_array *v36; // x8
  int v37; // w10
  int v38; // w9
  System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData__o *enemy_datalist; // x0
  struct BaseBattleEvent_o *v40; // x0
  BattleLogic_o *logic; // x0
  struct BaseBattleEvent_o *v42; // x0
  const MethodInfo *v43; // x2
  const MethodInfo *v44; // x1
  __int64 v45; // x2
  System_Collections_Generic_List_BattleServantData__o *v46; // x21
  System_Collections_Generic_List_BattleServantData__array *v47; // x20
  const MethodInfo *v48; // x2
  System_Collections_Generic_List_double__o *chainTypeList; // x0
  struct BaseBattleEvent_o *v50; // x0
  int32_t waveCount; // [xsp+Ch] [xbp-54h]

  v4 = this;
  if ( (byte_40F6A9A & 1) == 0 )
  {
    sub_B16FFC(&BattleServantData_TypeInfo, *(_QWORD *)&inwavecount);
    sub_B16FFC(&Method_System_Linq_Enumerable_Repeat_int___, v5);
    sub_B16FFC(&Method_System_Linq_Enumerable_ToArray_int___, v6);
    sub_B16FFC(&System_Collections_Generic_List_BattleServantData____TypeInfo, v7);
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleServantData__Add__, v8);
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleServantData__Clear__, v9);
    sub_B16FFC(&Method_System_Collections_Generic_List_double__Clear__, v10);
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleServantData__get_Count__, v11);
    this = (BattleData_o *)sub_B16FFC(&Method_System_Collections_Generic_List_BattleServantData__get_Item__, v12);
    byte_40F6A9A = 1;
  }
  e_entryid = v4->fields.e_entryid;
  if ( !e_entryid )
    goto LABEL_47;
  v14 = 0LL;
  p_e_entryid = &v4->fields.e_entryid;
  while ( 1 )
  {
    max_length = e_entryid->max_length;
    if ( (__int64)v14 >= (int)max_length )
      break;
    if ( v14 >= max_length )
      goto LABEL_48;
    e_entryid->m_Items[v14 + 1] = -1;
    e_entryid = *p_e_entryid;
    ++v14;
    if ( !*p_e_entryid )
      goto LABEL_47;
  }
  BattleData__loadStageData(v4, *(const MethodInfo **)&inwavecount);
  DrawLotsDispMsg_k__BackingField = v4->fields._DrawLotsDispMsg_k__BackingField;
  if ( !DrawLotsDispMsg_k__BackingField
    || (DrawLotsDisplayMessage__Init(DrawLotsDispMsg_k__BackingField, 0LL),
        *(_WORD *)&v4->fields.leaderDown = 0,
        v4->fields.loseBattleFlg = 0,
        *(_WORD *)&v4->fields.winBattleNotRelatedSurvivalStatus = 0,
        (player_datalist = v4->fields.player_datalist) == 0LL) )
  {
LABEL_47:
    sub_B170D4();
  }
  size = player_datalist->fields._size;
  if ( size >= 1 )
  {
    v20 = 0;
    do
    {
      if ( player_datalist->fields._size <= v20 )
        System_ThrowHelper__ThrowArgumentOutOfRangeException_41329284(0LL);
      v21 = player_datalist->fields._items->m_Items[v20];
      if ( !v21 )
        break;
      BattleServantData__setInitBattle(v21, 0LL);
      if ( (int)++v20 >= size )
        goto LABEL_19;
      player_datalist = v4->fields.player_datalist;
    }
    while ( player_datalist );
    goto LABEL_47;
  }
LABEL_19:
  battle_info = v4->fields.battle_info;
  if ( !battle_info )
    goto LABEL_47;
  EnemyDeck = BattleInfoData__getEnemyDeck(battle_info, inwavecount, 0LL);
  if ( !v4->fields.enemy_datalist )
    goto LABEL_47;
  v24 = EnemyDeck;
  System_Collections_Generic_List_XWeaponTrail_Element___Clear(
    (System_Collections_Generic_List_XWeaponTrail_Element__o *)v4->fields.enemy_datalist,
    (const MethodInfo_2F260E0 *)Method_System_Collections_Generic_List_BattleServantData__Clear__);
  v25 = (System_Collections_Generic_IEnumerable_TSource__o *)System_Linq_Enumerable__Repeat_int_(
                                                               -1,
                                                               v4->fields._EnemyFieldPosCount_k__BackingField,
                                                               (const MethodInfo_19BDCB0 *)Method_System_Linq_Enumerable_Repeat_int___);
  v26 = System_Linq_Enumerable__ToArray_int_(
          v25,
          (const MethodInfo_19C4A28 *)Method_System_Linq_Enumerable_ToArray_int___);
  v4->fields.e_entryid = v26;
  this = (BattleData_o *)sub_B16F98(&v4->fields.e_entryid, v26);
  if ( !v24 )
    goto LABEL_47;
  waveCount = inwavecount;
  svts = v24->fields.svts;
  if ( !svts )
    goto LABEL_47;
  v30 = svts->max_length;
  if ( v30 >= 1 )
  {
    v31 = 0;
    while ( v31 < v30 )
    {
      v32 = svts->m_Items[v31];
      if ( !v32 )
        goto LABEL_47;
      id = v32->fields.id;
      v34 = (BattleServantData_o *)sub_B170CC(BattleServantData_TypeInfo, *(_QWORD *)&inwavecount, method, v27, v28);
      BattleServantData___ctor(v34, 0LL);
      if ( !v34 )
        goto LABEL_47;
      BattleServantData__setEnemy(v34, 0LL);
      BattleServantData__setServantData(v34, v32, v4->fields.battle_ent, 0, 0LL, 0LL, 0LL);
      BattleServantData__setInitBattle(v34, 0LL);
      battleEvent = v4->fields.battleEvent;
      if ( !battleEvent )
        goto LABEL_47;
      this = (BattleData_o *)((__int64 (__fastcall *)(struct BaseBattleEvent_o *, BattleServantData_o *, Il2CppMethodPointer))battleEvent->klass->vtable._11_InitServantDataPrevAdd.method)(
                               battleEvent,
                               v34,
                               battleEvent->klass->vtable._12_InitPlayerMasterInfo.methodPtr);
      v36 = *p_e_entryid;
      if ( !*p_e_entryid )
        goto LABEL_47;
      v37 = v36->max_length;
      v38 = id - 1;
      if ( id - 1 < v37 )
      {
        if ( v4->fields.globaltargetId == -1 )
        {
          v4->fields.globaltargetId = v32->fields.uniqueId;
          v37 = v36->max_length;
        }
        if ( v38 >= (unsigned int)v37 )
          goto LABEL_48;
        v36->m_Items[v38 + 1] = v32->fields.uniqueId;
        v34->fields.isEntry = 1;
        v34->fields.flgEntryFunction = 1;
      }
      enemy_datalist = (System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData__o *)v4->fields.enemy_datalist;
      if ( !enemy_datalist )
        goto LABEL_47;
      System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData___Add(
        enemy_datalist,
        (EventMissionProgressRequest_Argument_ProgressData_o *)v34,
        (const MethodInfo_2F25CD8 *)Method_System_Collections_Generic_List_BattleServantData__Add__);
      v30 = svts->max_length;
      if ( (int)++v31 >= v30 )
        goto LABEL_37;
    }
    goto LABEL_48;
  }
LABEL_37:
  BattleData__SetEnemyCountStartValue(v4, waveCount, method);
  v40 = v4->fields.battleEvent;
  if ( !v40 )
    goto LABEL_47;
  ((void (__fastcall *)(struct BaseBattleEvent_o *, _QWORD, Il2CppMethodPointer))v40->klass->vtable._10_SetServantDataBeforePassiveAdded.method)(
    v40,
    0LL,
    v40->klass->vtable._11_InitServantDataPrevAdd.methodPtr);
  logic = v4->fields.logic;
  if ( !logic )
    goto LABEL_47;
  BattleLogic__actEnemyPtPassiveSkill(logic, 0, 0, 1, 0LL);
  v42 = v4->fields.battleEvent;
  if ( !v42 )
    goto LABEL_47;
  ((void (__fastcall *)(struct BaseBattleEvent_o *, _QWORD, Il2CppMethodPointer))v42->klass->vtable._23_SetServantDataAfterPassiveAdded.method)(
    v42,
    0LL,
    v42->klass->vtable._24_GetProgressBuffTurnCond.methodPtr);
  BattleData__CheckMultiTargetBattle(v4, 0, v43);
  BattleData__LoadBattleStartVoice(v4, v44);
  this = (BattleData_o *)sub_B17014(System_Collections_Generic_List_BattleServantData____TypeInfo, 1LL, v45);
  if ( !this )
    goto LABEL_47;
  v46 = v4->fields.player_datalist;
  v47 = (System_Collections_Generic_List_BattleServantData__array *)this;
  if ( v46 )
  {
    this = (BattleData_o *)sub_B170BC(v4->fields.player_datalist, this->klass->_1.element_class);
    if ( !this )
    {
      sub_B170F4();
      sub_B170A0();
    }
  }
  if ( !v47->max_length )
  {
LABEL_48:
    sub_B17100(this, *(_QWORD *)&inwavecount, method);
    sub_B170A0();
  }
  v47->m_Items[0] = v46;
  sub_B16F98(v47->m_Items, v46);
  BattleData__AllocateAiToServants(v4, v47, v48);
  chainTypeList = v4->fields.chainTypeList;
  if ( !chainTypeList )
    goto LABEL_47;
  System_Collections_Generic_List_double___Clear(
    chainTypeList,
    (const MethodInfo_2ED4568 *)Method_System_Collections_Generic_List_double__Clear__);
  v50 = v4->fields.battleEvent;
  if ( !v50 )
    goto LABEL_47;
  ((void (__fastcall *)(struct BaseBattleEvent_o *, Il2CppMethodPointer))v50->klass->vtable._27_PrevEndLoadNStage.method)(
    v50,
    v50->klass->vtable._28_InitBattleStartTurn.methodPtr);
}


void __fastcall BattleData__loadQuest(BattleData_o *this, const MethodInfo *method)
{
  __int64 v3; // x1
  __int64 v4; // x1
  __int64 v5; // x1
  __int64 v6; // x1
  __int64 v7; // x1
  __int64 v8; // x1
  __int64 v9; // x1
  __int64 v10; // x1
  __int64 v11; // x1
  __int64 v12; // x1
  __int64 v13; // x1
  __int64 v14; // x1
  __int64 v15; // x1
  __int64 v16; // x1
  __int64 v17; // x1
  __int64 v18; // x1
  __int64 v19; // x1
  __int64 v20; // x1
  __int64 v21; // x1
  __int64 v22; // x1
  __int64 v23; // x1
  __int64 v24; // x1
  __int64 v25; // x1
  __int64 v26; // x1
  __int64 v27; // x1
  __int64 v28; // x1
  __int64 v29; // x1
  __int64 v30; // x1
  __int64 v31; // x1
  __int64 v32; // x1
  __int64 v33; // x1
  __int64 v34; // x1
  __int64 v35; // x1
  __int64 v36; // x1
  __int64 v37; // x1
  __int64 v38; // x1
  __int64 v39; // x1
  __int64 v40; // x1
  __int64 v41; // x1
  __int64 v42; // x1
  __int64 v43; // x1
  __int64 v44; // x1
  __int64 v45; // x1
  __int64 v46; // x1
  __int64 v47; // x1
  __int64 v48; // x1
  __int64 v49; // x1
  __int64 v50; // x1
  __int64 v51; // x1
  __int64 v52; // x1
  __int64 v53; // x1
  __int64 v54; // x1
  __int64 v55; // x1
  __int64 v56; // x1
  __int64 v57; // x1
  __int64 v58; // x1
  __int64 v59; // x1
  __int64 v60; // x1
  __int64 v61; // x1
  __int64 v62; // x1
  __int64 v63; // x1
  __int64 v64; // x1
  __int64 v65; // x1
  __int64 v66; // x1
  __int64 v67; // x1
  __int64 v68; // x1
  __int64 v69; // x1
  __int64 v70; // x1
  __int64 v71; // x1
  __int64 v72; // x1
  __int64 v73; // x1
  __int64 v74; // x1
  __int64 v75; // x1
  __int64 v76; // x1
  __int64 v77; // x1
  __int64 v78; // x1
  __int64 v79; // x1
  __int64 v80; // x1
  __int64 v81; // x1
  __int64 v82; // x1
  __int64 v83; // x1
  __int64 v84; // x1
  __int64 v85; // x1
  int32_t Int_33186652; // w26
  System_String_o *String; // x20
  System_Byte_array *v88; // x20
  __int64 v89; // x1
  __int64 v90; // x2
  __int64 v91; // x3
  __int64 v92; // x4
  MiniMessagePack_MiniMessagePacker_o *v93; // x22
  WarBoardData_WarBoardLocalSaveData_o *v94; // x20
  System_String_o *v95; // x0
  System_String_o *v96; // x20
  Il2CppObject *v97; // x20
  UserPresentBoxWindow_resData_array *InfoId; // x0
  __int64 v99; // x1
  const MethodInfo *v100; // x2
  struct System_Int32_array *squareSaves; // x1
  struct System_Int32_array *cameraPos; // x1
  struct System_Int32_array *v103; // x1
  struct System_Int32_array *bgAnimationInfo; // x1
  struct System_Int32_array *v105; // x1
  struct BattleAttackManager_o *battleAtkManager; // x0
  struct BaseBattleEvent_o *battleEvent; // x0
  __int64 v108; // x1
  __int64 v109; // x2
  __int64 v110; // x3
  __int64 v111; // x4
  System_Collections_Generic_Dictionary_string__object__o *pieceSaves; // x23
  System_Func_BattleLogicBuff_ReduceHpProcess_BuffInfo__int__o *v113; // x24
  __int64 v114; // x1
  __int64 v115; // x2
  __int64 v116; // x3
  __int64 v117; // x4
  System_Func_BattleLogicBuff_ReduceHpProcess_BuffInfo__int__o *v118; // x25
  struct System_Collections_Generic_Dictionary_int__int__o *v119; // x0
  System_Collections_Generic_Dictionary_string__object__o *v120; // x23
  BattleData___c_c *v121; // x0
  struct BattleData___c_StaticFields *static_fields; // x8
  System_Func_string__BattleData_CHAIN_COUNT_TYPE__o *_9__554_0; // x24
  Il2CppObject *v124; // x25
  struct BattleData___c_StaticFields *v125; // x0
  struct BattleData___c_StaticFields *v126; // x8
  System_Func_BattleLogicBuff_ReduceHpProcess_BuffInfo__int__o *_9__554_1; // x25
  Il2CppObject *v128; // x26
  struct BattleData___c_StaticFields *v129; // x0
  System_Collections_Generic_Dictionary_TKey__TValue__o *v130; // x0
  __int64 v131; // x1
  __int64 v132; // x2
  __int64 v133; // x3
  __int64 v134; // x4
  BattleData___c_c *v135; // x8
  System_Collections_Generic_IEnumerable_TSource__o *v136; // x23
  struct BattleData___c_StaticFields *v137; // x9
  System_Func_KeyValuePair_BattleData_CHAIN_COUNT_TYPE__int___int__o *_9__554_2; // x24
  Il2CppObject *v139; // x25
  struct BattleData___c_StaticFields *v140; // x0
  struct BattleData___c_StaticFields *v141; // x9
  System_Func_KeyValuePair_BattleData_CHAIN_COUNT_TYPE__int___int__o *_9__554_3; // x25
  Il2CppObject *v143; // x26
  struct BattleData___c_StaticFields *v144; // x0
  __int64 v145; // x1
  __int64 v146; // x2
  __int64 v147; // x3
  __int64 v148; // x4
  OverwriteBattleBgmData_SaveData_o *v149; // x23
  struct OverwriteBattleBgmData_o *InstanceFromSaveData; // x0
  BattleDefenceTargetData_o *defenceTargetData; // x0
  UseSkillEachTurn_o *useSkillEachTurn; // x0
  BattleInfoData_o *battle_info; // x0
  int32_t LastWave; // w0
  __int64 v155; // x2
  struct System_Int32_array *v156; // x0
  const MethodInfo *v157; // x1
  DrawLotsDisplayMessage_o *DrawLotsDispMsg_k__BackingField; // x0
  ItemDroppedSkillShiftInfo_o *itemDroppedSkillShiftInfo; // x0
  struct System_Int32_array *v160; // x1
  BattleInfoData_o *v161; // x0
  int32_t v162; // w0
  __int64 v163; // x2
  struct System_Int32_array *v164; // x0
  struct BattleCommandData_array *v165; // x1
  __int64 v166; // x2
  struct BattleCommandData_array *v167; // x0
  BattleData_c *inited; // x0
  int32_t ContinueCount; // w0
  int totalCriticalStars; // w8
  struct BattleCommandData_array *latestBattlePieceUniqueIndexes; // x1
  struct BattleCommandData_array *prevCondSaves; // x1
  struct System_Collections_Generic_Dictionary_string__object__o *playedReinforcements; // x1
  struct BattleEntity_o *battle_ent; // x8
  __int64 v175; // x22
  __int64 v176; // x22
  UnityEngine_Object_o *v177; // x22
  __int64 v178; // x1
  __int64 v179; // x2
  __int64 v180; // x3
  __int64 v181; // x4
  __int64 v182; // x22
  __int64 v183; // x22
  __int64 v184; // x8
  __int64 v185; // x22
  __int64 v186; // x22
  __int64 v187; // x8
  System_Collections_Generic_IEnumerable_T__o *v188; // x23
  System_Collections_Generic_List_WarBoardAIRoute_RouteData__o *v189; // x0
  struct System_Collections_Generic_List_BattleData_CommandHistory__o *v190; // x22
  System_Collections_Generic_IEnumerable_T__o *eventSaves; // x23
  __int64 v192; // x1
  __int64 v193; // x2
  __int64 v194; // x3
  __int64 v195; // x4
  System_Collections_Generic_List_WarBoardAIRoute_RouteData__o *v196; // x0
  struct System_Collections_Generic_List_BattleDropItem__o *v197; // x22
  __int64 v198; // x1
  __int64 v199; // x2
  __int64 v200; // x3
  __int64 v201; // x4
  struct WarBoardSquareIndexData_SaveData_array *squareIndexInfo; // x22
  struct BattleActionLogManagerInterface_o *actionLogManager; // x23
  BattleActionLogManagerInterface_c *klass; // x8
  unsigned __int64 v205; // x10
  BattleActionLogManagerInterface_c **p_offset; // x11
  __int64 p_method; // x0
  System_String_o *v208; // x23
  struct BattleActionLogManagerInterface_o *v209; // x22
  System_Byte_array *v210; // x0
  BattleActionLogManagerInterface_c *v211; // x8
  System_Byte_array *v212; // x23
  unsigned __int64 v213; // x10
  BattleActionLogManagerInterface_c **v214; // x11
  __int64 v215; // x0
  struct WarBoardBossBattleData_SaveData_array *bossBattleInfo; // x22
  struct BattleActionLogManagerInterface_o *v217; // x23
  BattleActionLogManagerInterface_c *v218; // x8
  unsigned __int64 v219; // x10
  BattleActionLogManagerInterface_c **v220; // x11
  __int64 v221; // x0
  System_String_o *v222; // x23
  struct BattleActionLogManagerInterface_o *v223; // x22
  System_Byte_array *v224; // x0
  BattleActionLogManagerInterface_c *v225; // x8
  System_Byte_array *v226; // x23
  unsigned __int64 v227; // x10
  BattleActionLogManagerInterface_c **v228; // x11
  __int64 v229; // x0
  System_Collections_Generic_IEnumerable_T__o *wallSaves; // x23
  System_Collections_Generic_List_int__o *v231; // x0
  struct System_Collections_Generic_List_int__o *v232; // x22
  BattleInfoData_o *v233; // x0
  bool IsWaveMyDecks; // w0
  __int64 v235; // x1
  __int64 v236; // x2
  __int64 v237; // x3
  __int64 v238; // x4
  struct BattleInfoData_o *v239; // x8
  DeckData_o *WaveMyDeck; // x22
  System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData__o *v241; // x23
  __int64 v242; // x1
  __int64 v243; // x2
  __int64 v244; // x3
  __int64 v245; // x4
  System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData__o *v246; // x0
  __int64 v247; // x3
  __int64 v248; // x4
  struct BattleDeckServantData_array *svts; // x28
  int max_length; // w8
  int i; // w27
  BattleDeckServantData_o *v252; // x22
  BattleData___c__DisplayClass554_0_o *v253; // x25
  __int64 v254; // x1
  __int64 v255; // x2
  __int64 v256; // x3
  __int64 v257; // x4
  int32_t v258; // w24
  BattleServantData_o *v259; // x23
  __int64 v260; // x1
  __int64 v261; // x2
  __int64 v262; // x3
  __int64 v263; // x4
  WellFired_USFGOPlayStandardCutInLimitCount_OverwriteCutIn_array *latestPieceActionSquareIndexes; // x24
  System_Predicate_peRenderTexture_ChangeLayerObject__o *v265; // x26
  BattleServantData_SaveData_o *USFGOPlayStandardCutInLimitCount_OverwriteCutIn; // x0
  System_Collections_Generic_Dictionary_XmlQualifiedName__XmlSchemaObject__o *monitor; // x25
  System_String_o *v268; // x0
  System_Collections_Generic_Dictionary_Type__IStoreExtension__o *v269; // x25
  System_Type_o *v270; // x0
  UnityEngine_Purchasing_IStoreExtension_o *Item; // x0
  System_String_o *v272; // x8
  System_String_o *v273; // x0
  System_String_o *v274; // x24
  struct BattleEntity_o *v275; // x25
  BattleServantData_SaveData_o *v276; // x24
  int32_t FollowerType; // w0
  struct System_Collections_Generic_List_BattleServantData__o *player_datalist; // x0
  __int64 v279; // x1
  __int64 v280; // x2
  __int64 v281; // x3
  __int64 v282; // x4
  PlayerFieldStatus_o *v283; // x22
  __int64 v284; // x1
  __int64 v285; // x2
  __int64 v286; // x3
  __int64 v287; // x4
  EnemyFieldStatus_o *v288; // x22
  __int64 v289; // x1
  __int64 v290; // x2
  __int64 v291; // x3
  __int64 v292; // x4
  System_Collections_Generic_Dictionary_int__WarBoardEvalValueSquare_EvalValueSquare__o *v293; // x22
  System_Collections_Generic_Dictionary_int__WarBoardEvalValueSquare_EvalValueSquare__o **p_tmpEnemyData_MP; // x21
  __int64 v295; // x22
  int v296; // w8
  unsigned int v297; // w23
  __int64 v298; // x2
  struct System_Collections_Generic_Dictionary_string__object__o *v299; // x1
  struct BattleFieldData_SaveData_array *v300; // x1
  __int64 v301; // x1
  __int64 v302; // x2
  __int64 v303; // x3
  __int64 v304; // x4
  struct UnityEngine_Vector2_o v305; // x8
  unsigned __int64 v306; // x21
  System_Collections_Generic_Dictionary_XmlQualifiedName__XmlSchemaObject__o *v307; // x22
  struct UnityEngine_Vector2_o v308; // x8
  __int64 v309; // x8
  System_Xml_Schema_XmlSchemaObject_o *v310; // x0
  System_Xml_Schema_XmlSchemaObject_o *v311; // x0
  struct System_Collections_Generic_List_Dictionary_string__object___o *tmpFirstNpPlayList; // x0
  PlayerServantNoblePhantasmUsageData_SaveData_o *v313; // x21
  struct System_Boolean_array *v314; // x1
  System_Nullable_int__o EnemyEntryMaxCountEachTurn; // x0
  struct BattlePerformance_o *perf; // x8
  BattlePerformanceBg_o *bgPerf; // x0
  const MethodInfo *v318; // x1
  const MethodInfo *v319; // x1
  __int64 v320; // x3
  __int64 v321; // x4
  struct System_Collections_Generic_List_BattleSkillInfoData__o *masterSkillInfo; // x21
  int size; // w22
  unsigned int v324; // w23
  BattleSkillInfoData_o *v325; // x21
  __int64 v326; // x8
  __int64 v327; // x24
  unsigned __int64 v328; // x9
  unsigned __int64 v329; // x25
  int v330; // w26
  __int64 v331; // x8
  __int64 v332; // x8
  System_Collections_Generic_Dictionary_XmlQualifiedName__XmlSchemaObject__o *v333; // x0
  BattleData_o *Count; // x0
  struct System_Collections_Generic_Dictionary_int__int__o *v335; // x0
  System_Collections_Generic_IEnumerable_T__o *v336; // x21
  System_Collections_Generic_HashSet_BattleBuffData_BuffData__o *v337; // x22
  struct System_Collections_Generic_HashSet_string__o **p_voicePlayedOver64Info; // x0
  void *v339; // x1
  System_Collections_Generic_HashSet_WarBoardAIRoute_RouteData__o *v340; // x21
  __int64 v341; // x1
  __int64 v342; // x2
  __int64 v343; // x3
  __int64 v344; // x4
  System_Collections_Generic_IEnumerable_T__o *v345; // x21
  System_Collections_Generic_HashSet_int__o *v346; // x22
  struct System_Collections_Generic_HashSet_int__o **p_calledEnemyUniqueIdHash; // x0
  System_Collections_Generic_HashSet_int__o *v348; // x1
  System_Collections_Generic_HashSet_int__o *v349; // x21
  const MethodInfo *v350; // x1
  const MethodInfo *v351; // x1
  BattleFieldEnvironmentData_o *FieldEnvData_k__BackingField; // x0
  struct BattleAttackManager_o *v353; // x0
  BattleData_o *v354; // x0
  const MethodInfo *v355; // x1
  int32_t v356; // [xsp+4h] [xbp-5Ch]
  int32_t v357; // [xsp+8h] [xbp-58h] BYREF
  int v358; // [xsp+Ch] [xbp-54h] BYREF

  if ( (byte_40F6A97 & 1) == 0 )
  {
    sub_B16FFC(&Method_System_Array_Find_BattleServantData_SaveData___, method);
    sub_B16FFC(&Method_BasicHelper_IndexValue_int____66807072, v3);
    sub_B16FFC(&BattleActionLogManagerInterface_TypeInfo, v4);
    sub_B16FFC(&BattleCommandData___TypeInfo, v5);
    sub_B16FFC(&BattleData_TypeInfo, v6);
    sub_B16FFC(&BattleServantData_TypeInfo, v7);
    sub_B16FFC(&CatAndMouseGame_TypeInfo, v8);
    sub_B16FFC(&Method_System_Convert_ToInt32___66821856, v9);
    sub_B16FFC(&Method_System_Convert_ToInt32___66821848, v10);
    sub_B16FFC(&System_Convert_TypeInfo, v11);
    sub_B16FFC(&Method_System_Collections_Generic_Dictionary_string__object__Add__, v12);
    sub_B16FFC(&Method_System_Collections_Generic_Dictionary_int__BattleServantData_SaveData__Add__, v13);
    sub_B16FFC(&Method_System_Collections_Generic_Dictionary_string__object__ContainsKey__, v14);
    sub_B16FFC(&Method_System_Collections_Generic_Dictionary_int__BattleServantData_SaveData___ctor__, v15);
    sub_B16FFC(&Method_System_Collections_Generic_Dictionary_string__object___ctor__, v16);
    sub_B16FFC(&Method_System_Collections_Generic_Dictionary_string__object__get_Count__, v17);
    sub_B16FFC(&Method_System_Collections_Generic_Dictionary_string__object__get_Item__, v18);
    sub_B16FFC(&System_Collections_Generic_Dictionary_string__object__TypeInfo, v19);
    sub_B16FFC(&System_Collections_Generic_Dictionary_int__BattleServantData_SaveData__TypeInfo, v20);
    sub_B16FFC(&EncryptedPlayerPrefs_TypeInfo, v21);
    sub_B16FFC(&EnemyFieldStatus_TypeInfo, v22);
    sub_B16FFC(
      &Method_System_Linq_Enumerable_ToDictionary_KeyValuePair_BattleData_CHAIN_COUNT_TYPE__int___int__int___,
      v23);
    sub_B16FFC(&Method_System_Func_KeyValuePair_BattleData_CHAIN_COUNT_TYPE__int___int___ctor__, v24);
    sub_B16FFC(&Method_System_Func_object__int___ctor__, v25);
    sub_B16FFC(&Method_System_Func_string__BattleData_CHAIN_COUNT_TYPE___ctor__, v26);
    sub_B16FFC(&Method_System_Func_string__int___ctor__, v27);
    sub_B16FFC(&System_Func_object__int__TypeInfo, v28);
    sub_B16FFC(&System_Func_string__int__TypeInfo, v29);
    sub_B16FFC(&System_Func_string__BattleData_CHAIN_COUNT_TYPE__TypeInfo, v30);
    sub_B16FFC(&System_Func_KeyValuePair_BattleData_CHAIN_COUNT_TYPE__int___int__TypeInfo, v31);
    sub_B16FFC(&Method_System_Collections_Generic_HashSet_int___ctor___66713952, v32);
    sub_B16FFC(&Method_System_Collections_Generic_HashSet_int___ctor___66713944, v33);
    sub_B16FFC(&Method_System_Collections_Generic_HashSet_string___ctor__, v34);
    sub_B16FFC(&Method_System_Collections_Generic_HashSet_string___ctor___66714584, v35);
    sub_B16FFC(&System_Collections_Generic_HashSet_string__TypeInfo, v36);
    sub_B16FFC(&System_Collections_Generic_HashSet_int__TypeInfo, v37);
    sub_B16FFC(&int___TypeInfo, v38);
    sub_B16FFC(&int_TypeInfo, v39);
    sub_B16FFC(&Method_JsonManager_DeserializeArray_BattleData_SaveData___, v40);
    sub_B16FFC(&JsonManager_TypeInfo, v41);
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleServantData__Add__, v42);
    sub_B16FFC(&Method_System_Collections_Generic_List_Dictionary_string__object___Add__, v43);
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleDropItem___ctor___66726432, v44);
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleData_CommandHistory___ctor___66754064, v45);
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleDropItem___ctor__, v46);
    sub_B16FFC(&Method_System_Collections_Generic_List_int___ctor__, v47);
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleServantData___ctor__, v48);
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleData_CommandHistory___ctor__, v49);
    sub_B16FFC(&Method_System_Collections_Generic_List_int___ctor___66737200, v50);
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleSkillInfoData__get_Count__, v51);
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleSkillInfoData__get_Item__, v52);
    sub_B16FFC(&System_Collections_Generic_List_int__TypeInfo, v53);
    sub_B16FFC(&System_Collections_Generic_List_BattleServantData__TypeInfo, v54);
    sub_B16FFC(&System_Collections_Generic_List_BattleData_CommandHistory__TypeInfo, v55);
    sub_B16FFC(&System_Collections_Generic_List_BattleDropItem__TypeInfo, v56);
    sub_B16FFC(&Method_MiniMessagePackerUtility_DecodeDict_BattleData_CHAIN_COUNT_TYPE__int___, v57);
    sub_B16FFC(&Method_MiniMessagePackerUtility_DecodeDict_int__int___, v58);
    sub_B16FFC(&Method_MiniMessagePack_MiniMessagePacker_UnpackClass_BattleData_SaveData___, v59);
    sub_B16FFC(&MiniMessagePack_MiniMessagePacker_TypeInfo, v60);
    sub_B16FFC(&UnityEngine_Object_TypeInfo, v61);
    sub_B16FFC(&PlayerFieldStatus_TypeInfo, v62);
    sub_B16FFC(&Method_System_Predicate_BattleServantData_SaveData___ctor__, v63);
    sub_B16FFC(&System_Predicate_BattleServantData_SaveData__TypeInfo, v64);
    sub_B16FFC(&OverwriteBattleBgmData_SaveData_TypeInfo, v65);
    sub_B16FFC(&PlayerServantNoblePhantasmUsageData_SaveData_TypeInfo, v66);
    sub_B16FFC(&ServantAssetLoadManager_TypeInfo, v67);
    sub_B16FFC(&Method_SingletonMonoBehaviour_BattleRandom__getInstance__, v68);
    sub_B16FFC(&string_TypeInfo, v69);
    sub_B16FFC(&Method_BattleData___c__loadQuest_b__554_0__, v70);
    sub_B16FFC(&Method_BattleData___c__loadQuest_b__554_1__, v71);
    sub_B16FFC(&Method_BattleData___c__loadQuest_b__554_2__, v72);
    sub_B16FFC(&Method_BattleData___c__loadQuest_b__554_3__, v73);
    sub_B16FFC(&Method_BattleData___c__DisplayClass554_0__loadQuest_b__4__, v74);
    sub_B16FFC(&BattleData___c__DisplayClass554_0_TypeInfo, v75);
    sub_B16FFC(&BattleData___c_TypeInfo, v76);
    sub_B16FFC(&StringLiteral_22376/*"svtId"*/, v77);
    sub_B16FFC(&StringLiteral_5049/*"DUEL"*/, v78);
    sub_B16FFC(&StringLiteral_22973/*"userSvtId"*/, v79);
    sub_B16FFC(&StringLiteral_21301/*"p_svlist"*/, v80);
    sub_B16FFC(&StringLiteral_21876/*"seqId"*/, v81);
    sub_B16FFC(&StringLiteral_8097/*"IsDuelMessagePack"*/, v82);
    sub_B16FFC(&StringLiteral_15571/*"["*/, v83);
    sub_B16FFC(&StringLiteral_15807/*"]"*/, v84);
    sub_B16FFC(&StringLiteral_2740/*"Battle"*/, v85);
    byte_40F6A97 = 1;
  }
  BattleData__commonQuestLoad(this, method);
  if ( (BYTE3(EncryptedPlayerPrefs_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0
    && !EncryptedPlayerPrefs_TypeInfo->_2.cctor_finished )
  {
    j_il2cpp_runtime_class_init_0(EncryptedPlayerPrefs_TypeInfo);
  }
  Int_33186652 = EncryptedPlayerPrefs__GetInt_33186652((System_String_o *)StringLiteral_8097/*"IsDuelMessagePack"*/, 0, 0LL);
  if ( EncryptedPlayerPrefs__HasKey((System_String_o *)StringLiteral_5049/*"DUEL"*/, 0LL) )
  {
    if ( Int_33186652 )
    {
      if ( (WORD1(EncryptedPlayerPrefs_TypeInfo->vtable._0_Equals.methodPtr) & 0x400) != 0
        && !EncryptedPlayerPrefs_TypeInfo->_2.cctor_finished )
      {
        j_il2cpp_runtime_class_init_0(EncryptedPlayerPrefs_TypeInfo);
      }
      String = EncryptedPlayerPrefs__GetString((System_String_o *)StringLiteral_5049/*"DUEL"*/, 0LL);
      if ( (BYTE3(CatAndMouseGame_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0
        && !CatAndMouseGame_TypeInfo->_2.cctor_finished )
      {
        j_il2cpp_runtime_class_init_0(CatAndMouseGame_TypeInfo);
      }
      v88 = CatAndMouseGame__MouseGame6ForMsgPack(String, 0LL);
      v93 = (MiniMessagePack_MiniMessagePacker_o *)sub_B170CC(
                                                     MiniMessagePack_MiniMessagePacker_TypeInfo,
                                                     v89,
                                                     v90,
                                                     v91,
                                                     v92);
      MiniMessagePack_MiniMessagePacker___ctor(v93, 0LL);
      if ( !v93 )
        goto LABEL_247;
      v94 = MiniMessagePack_MiniMessagePacker__UnpackClass_WarBoardData_WarBoardLocalSaveData_(
              v93,
              v88,
              (const MethodInfo_19DB9FC *)Method_MiniMessagePack_MiniMessagePacker_UnpackClass_BattleData_SaveData___);
      if ( !v94 )
        goto LABEL_247;
      goto LABEL_38;
    }
    if ( (WORD1(EncryptedPlayerPrefs_TypeInfo->vtable._0_Equals.methodPtr) & 0x400) != 0
      && !EncryptedPlayerPrefs_TypeInfo->_2.cctor_finished )
    {
      j_il2cpp_runtime_class_init_0(EncryptedPlayerPrefs_TypeInfo);
    }
    v96 = EncryptedPlayerPrefs__GetString((System_String_o *)StringLiteral_5049/*"DUEL"*/, 0LL);
    if ( (BYTE3(CatAndMouseGame_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0
      && !CatAndMouseGame_TypeInfo->_2.cctor_finished )
    {
      j_il2cpp_runtime_class_init_0(CatAndMouseGame_TypeInfo);
    }
    v95 = CatAndMouseGame__MouseGame6(v96, 0LL);
  }
  else
  {
    if ( (WORD1(EncryptedPlayerPrefs_TypeInfo->vtable._0_Equals.methodPtr) & 0x400) != 0
      && !EncryptedPlayerPrefs_TypeInfo->_2.cctor_finished )
    {
      j_il2cpp_runtime_class_init_0(EncryptedPlayerPrefs_TypeInfo);
    }
    if ( !EncryptedPlayerPrefs__HasKey((System_String_o *)StringLiteral_2740/*"Battle"*/, 0LL) )
      goto LABEL_247;
    if ( (BYTE3(EncryptedPlayerPrefs_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0
      && !EncryptedPlayerPrefs_TypeInfo->_2.cctor_finished )
    {
      j_il2cpp_runtime_class_init_0(EncryptedPlayerPrefs_TypeInfo);
    }
    v95 = EncryptedPlayerPrefs__GetString((System_String_o *)StringLiteral_2740/*"Battle"*/, 0LL);
  }
  v97 = (Il2CppObject *)System_String__Concat_43746016(
                          (System_String_o *)StringLiteral_15571/*"["*/,
                          v95,
                          (System_String_o *)StringLiteral_15807/*"]"*/,
                          0LL);
  if ( (BYTE3(JsonManager_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0 && !JsonManager_TypeInfo->_2.cctor_finished )
    j_il2cpp_runtime_class_init_0(JsonManager_TypeInfo);
  InfoId = JsonManager__DeserializeArray_UserPresentBoxWindow_resData_(
             v97,
             (const MethodInfo_19D67B8 *)Method_JsonManager_DeserializeArray_BattleData_SaveData___);
  if ( !InfoId )
    goto LABEL_247;
  if ( !InfoId->max_length )
    goto LABEL_262;
  v94 = (WarBoardData_WarBoardLocalSaveData_o *)InfoId->m_Items[0];
  if ( !v94 )
    goto LABEL_247;
LABEL_38:
  this->fields.initturn = v94->fields.questId;
  this->fields.wavecount = v94->fields.questPhase;
  this->fields.turnCount = v94->fields.stageId;
  this->fields.totalTurnCount = *(&v94->fields.stageId + 1);
  this->fields.globaltargetId = (int32_t)v94->fields.pieceSaves;
  this->fields.criticalstars = HIDWORD(v94->fields.pieceSaves);
  this->fields.totalCriticalStars = (int32_t)v94->fields.itemSaves;
  this->fields.addCriticalstars = HIDWORD(v94->fields.itemSaves);
  this->fields.subCriticalCount = (int32_t)v94->fields.treasureSaves;
  this->fields.prevCriticalstars = HIDWORD(v94->fields.treasureSaves);
  squareSaves = (struct System_Int32_array *)v94->fields.squareSaves;
  this->fields.commandCriticalArray = squareSaves;
  sub_B16F98(&this->fields.commandCriticalArray, squareSaves);
  cameraPos = (struct System_Int32_array *)v94->fields.cameraPos;
  this->fields.p_entryid = cameraPos;
  sub_B16F98(&this->fields.p_entryid, cameraPos);
  v103 = *(struct System_Int32_array **)&v94->fields.cameraSize;
  this->fields.e_entryid = v103;
  sub_B16F98(&this->fields.e_entryid, v103);
  bgAnimationInfo = (struct System_Int32_array *)v94->fields.bgAnimationInfo;
  this->fields.waveClearNeedTurn = bgAnimationInfo;
  sub_B16F98(&this->fields.waveClearNeedTurn, bgAnimationInfo);
  this->fields.loseBattleFlg = (bool)v94[1].fields.eventSaves;
  v105 = *(struct System_Int32_array **)&v94[1].fields.winCondId;
  this->fields.overwriteBgIndividuality = v105;
  sub_B16F98(&this->fields.overwriteBgIndividuality, v105);
  battleAtkManager = this->fields.battleAtkManager;
  this->fields.winBattleNotRelatedSurvivalStatus = (bool)v94[1].fields.latestBattlePieceUniqueIndexes;
  if ( !battleAtkManager )
    goto LABEL_247;
  ((void (__fastcall *)(struct BattleAttackManager_o *, WarBoardData_WarBoardLocalSaveData_o *, Il2CppMethodPointer))battleAtkManager->klass->vtable._9_SetSaveData.method)(
    battleAtkManager,
    v94,
    battleAtkManager->klass->vtable._10_PrevProcTactical.methodPtr);
  battleEvent = this->fields.battleEvent;
  if ( !battleEvent )
    goto LABEL_247;
  ((void (__fastcall *)(struct BaseBattleEvent_o *, WarBoardData_WarBoardLocalSaveData_o *, Il2CppMethodPointer))battleEvent->klass->vtable._18_SetSaveData.method)(
    battleEvent,
    v94,
    battleEvent->klass->vtable._19_IsUseDefeatPointReady.methodPtr);
  pieceSaves = (System_Collections_Generic_Dictionary_string__object__o *)v94[2].fields.pieceSaves;
  v356 = Int_33186652;
  if ( pieceSaves )
  {
    v113 = (System_Func_BattleLogicBuff_ReduceHpProcess_BuffInfo__int__o *)sub_B170CC(
                                                                             System_Func_string__int__TypeInfo,
                                                                             v108,
                                                                             v109,
                                                                             v110,
                                                                             v111);
    System_Func_BattleLogicBuff_ReduceHpProcess_BuffInfo__int____ctor(
      v113,
      0LL,
      Method_System_Convert_ToInt32___66821856,
      (const MethodInfo_2B6B6EC *)Method_System_Func_string__int___ctor__);
    v118 = (System_Func_BattleLogicBuff_ReduceHpProcess_BuffInfo__int__o *)sub_B170CC(
                                                                             System_Func_object__int__TypeInfo,
                                                                             v114,
                                                                             v115,
                                                                             v116,
                                                                             v117);
    System_Func_BattleLogicBuff_ReduceHpProcess_BuffInfo__int____ctor(
      v118,
      0LL,
      Method_System_Convert_ToInt32___66821848,
      (const MethodInfo_2B6B6EC *)Method_System_Func_object__int___ctor__);
    v119 = (struct System_Collections_Generic_Dictionary_int__int__o *)MiniMessagePackerUtility__DecodeDict_int__int_(
                                                                         pieceSaves,
                                                                         (System_Func_string__TKey__o *)v113,
                                                                         (System_Func_object__TValue__o *)v118,
                                                                         (const MethodInfo_19DBBD4 *)Method_MiniMessagePackerUtility_DecodeDict_int__int___);
  }
  else
  {
    v120 = *(System_Collections_Generic_Dictionary_string__object__o **)&v94[1].fields.localSaveTiming;
    v121 = BattleData___c_TypeInfo;
    if ( (BYTE3(BattleData___c_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0
      && !BattleData___c_TypeInfo->_2.cctor_finished )
    {
      j_il2cpp_runtime_class_init_0(BattleData___c_TypeInfo);
      v121 = BattleData___c_TypeInfo;
    }
    static_fields = v121->static_fields;
    _9__554_0 = static_fields->__9__554_0;
    if ( !_9__554_0 )
    {
      if ( (BYTE3(v121->vtable._0_Equals.methodPtr) & 4) != 0 && !v121->_2.cctor_finished )
      {
        j_il2cpp_runtime_class_init_0(v121);
        static_fields = BattleData___c_TypeInfo->static_fields;
      }
      v124 = (Il2CppObject *)static_fields->__9;
      _9__554_0 = (System_Func_string__BattleData_CHAIN_COUNT_TYPE__o *)sub_B170CC(
                                                                          System_Func_string__BattleData_CHAIN_COUNT_TYPE__TypeInfo,
                                                                          v108,
                                                                          v109,
                                                                          v110,
                                                                          v111);
      System_Func_string__BattleData_CHAIN_COUNT_TYPE____ctor(
        _9__554_0,
        v124,
        Method_BattleData___c__loadQuest_b__554_0__,
        (const MethodInfo_2B6BACC *)Method_System_Func_string__BattleData_CHAIN_COUNT_TYPE___ctor__);
      v125 = BattleData___c_TypeInfo->static_fields;
      v125->__9__554_0 = _9__554_0;
      sub_B16F98(&v125->__9__554_0, _9__554_0);
      v121 = BattleData___c_TypeInfo;
    }
    if ( (BYTE3(v121->vtable._0_Equals.methodPtr) & 4) != 0 && !v121->_2.cctor_finished )
    {
      j_il2cpp_runtime_class_init_0(v121);
      v121 = BattleData___c_TypeInfo;
    }
    v126 = v121->static_fields;
    _9__554_1 = (System_Func_BattleLogicBuff_ReduceHpProcess_BuffInfo__int__o *)v126->__9__554_1;
    if ( !_9__554_1 )
    {
      if ( (BYTE3(v121->vtable._0_Equals.methodPtr) & 4) != 0 && !v121->_2.cctor_finished )
      {
        j_il2cpp_runtime_class_init_0(v121);
        v126 = BattleData___c_TypeInfo->static_fields;
      }
      v128 = (Il2CppObject *)v126->__9;
      _9__554_1 = (System_Func_BattleLogicBuff_ReduceHpProcess_BuffInfo__int__o *)sub_B170CC(
                                                                                    System_Func_object__int__TypeInfo,
                                                                                    v108,
                                                                                    v109,
                                                                                    v110,
                                                                                    v111);
      System_Func_BattleLogicBuff_ReduceHpProcess_BuffInfo__int____ctor(
        _9__554_1,
        v128,
        Method_BattleData___c__loadQuest_b__554_1__,
        (const MethodInfo_2B6B6EC *)Method_System_Func_object__int___ctor__);
      v129 = BattleData___c_TypeInfo->static_fields;
      v129->__9__554_1 = (struct System_Func_object__int__o *)_9__554_1;
      sub_B16F98(&v129->__9__554_1, _9__554_1);
      Int_33186652 = v356;
    }
    v130 = MiniMessagePackerUtility__DecodeDict_BattleData_CHAIN_COUNT_TYPE__int_(
             v120,
             (System_Func_string__TKey__o *)_9__554_0,
             (System_Func_object__TValue__o *)_9__554_1,
             (const MethodInfo_19DBFC8 *)Method_MiniMessagePackerUtility_DecodeDict_BattleData_CHAIN_COUNT_TYPE__int___);
    v135 = BattleData___c_TypeInfo;
    v136 = (System_Collections_Generic_IEnumerable_TSource__o *)v130;
    if ( (BYTE3(BattleData___c_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0
      && !BattleData___c_TypeInfo->_2.cctor_finished )
    {
      j_il2cpp_runtime_class_init_0(BattleData___c_TypeInfo);
      v135 = BattleData___c_TypeInfo;
    }
    v137 = v135->static_fields;
    _9__554_2 = v137->__9__554_2;
    if ( !_9__554_2 )
    {
      if ( (BYTE3(v135->vtable._0_Equals.methodPtr) & 4) != 0 && !v135->_2.cctor_finished )
      {
        j_il2cpp_runtime_class_init_0(v135);
        v137 = BattleData___c_TypeInfo->static_fields;
      }
      v139 = (Il2CppObject *)v137->__9;
      _9__554_2 = (System_Func_KeyValuePair_BattleData_CHAIN_COUNT_TYPE__int___int__o *)sub_B170CC(
                                                                                          System_Func_KeyValuePair_BattleData_CHAIN_COUNT_TYPE__int___int__TypeInfo,
                                                                                          v131,
                                                                                          v132,
                                                                                          v133,
                                                                                          v134);
      System_Func_KeyValuePair_BattleData_CHAIN_COUNT_TYPE__int___int____ctor(
        _9__554_2,
        v139,
        Method_BattleData___c__loadQuest_b__554_2__,
        (const MethodInfo_2B5EEA4 *)Method_System_Func_KeyValuePair_BattleData_CHAIN_COUNT_TYPE__int___int___ctor__);
      v140 = BattleData___c_TypeInfo->static_fields;
      v140->__9__554_2 = _9__554_2;
      sub_B16F98(&v140->__9__554_2, _9__554_2);
      v135 = BattleData___c_TypeInfo;
    }
    if ( (BYTE3(v135->vtable._0_Equals.methodPtr) & 4) != 0 && !v135->_2.cctor_finished )
    {
      j_il2cpp_runtime_class_init_0(v135);
      v135 = BattleData___c_TypeInfo;
    }
    v141 = v135->static_fields;
    _9__554_3 = v141->__9__554_3;
    if ( !_9__554_3 )
    {
      if ( (BYTE3(v135->vtable._0_Equals.methodPtr) & 4) != 0 && !v135->_2.cctor_finished )
      {
        j_il2cpp_runtime_class_init_0(v135);
        v141 = BattleData___c_TypeInfo->static_fields;
      }
      v143 = (Il2CppObject *)v141->__9;
      _9__554_3 = (System_Func_KeyValuePair_BattleData_CHAIN_COUNT_TYPE__int___int__o *)sub_B170CC(
                                                                                          System_Func_KeyValuePair_BattleData_CHAIN_COUNT_TYPE__int___int__TypeInfo,
                                                                                          v131,
                                                                                          v132,
                                                                                          v133,
                                                                                          v134);
      System_Func_KeyValuePair_BattleData_CHAIN_COUNT_TYPE__int___int____ctor(
        _9__554_3,
        v143,
        Method_BattleData___c__loadQuest_b__554_3__,
        (const MethodInfo_2B5EEA4 *)Method_System_Func_KeyValuePair_BattleData_CHAIN_COUNT_TYPE__int___int___ctor__);
      v144 = BattleData___c_TypeInfo->static_fields;
      v144->__9__554_3 = _9__554_3;
      sub_B16F98(&v144->__9__554_3, _9__554_3);
      Int_33186652 = v356;
    }
    v119 = (struct System_Collections_Generic_Dictionary_int__int__o *)System_Linq_Enumerable__ToDictionary_KeyValuePair_BattleData_CHAIN_COUNT_TYPE__int___int__int_(
                                                                         v136,
                                                                         (System_Func_TSource__TKey__o *)_9__554_2,
                                                                         (System_Func_TSource__TElement__o *)_9__554_3,
                                                                         (const MethodInfo_19C4F10 *)Method_System_Linq_Enumerable_ToDictionary_KeyValuePair_BattleData_CHAIN_COUNT_TYPE__int___int__int___);
  }
  this->fields.chainCountDict = v119;
  sub_B16F98(&this->fields.chainCountDict, v119);
  v149 = 0LL;
  if ( !BasicHelper__IsNullOrEmpty(*(System_Collections_ICollection_o **)&v94[1].fields.turnGroupId, 0LL) )
  {
    v149 = (OverwriteBattleBgmData_SaveData_o *)sub_B170CC(
                                                  OverwriteBattleBgmData_SaveData_TypeInfo,
                                                  v145,
                                                  v146,
                                                  v147,
                                                  v148);
    OverwriteBattleBgmData_SaveData___ctor_21867056(v149, (BattleData_SaveData_o *)v94, 0LL);
  }
  InstanceFromSaveData = OverwriteBattleBgmData__CreateInstanceFromSaveData(v149, 0LL);
  this->fields._overwriteBgmData_k__BackingField = InstanceFromSaveData;
  sub_B16F98(&this->fields._overwriteBgmData_k__BackingField, InstanceFromSaveData);
  defenceTargetData = this->fields.defenceTargetData;
  this->fields.temporarySpell = (int32_t)v94[1].fields.reinforcementsSaves;
  if ( defenceTargetData )
    BattleDefenceTargetData__SetSaveData(
      defenceTargetData,
      (BattleDefenceTargetData_SaveData_o *)v94[1].fields.uiDataSaves,
      0LL);
  useSkillEachTurn = this->fields.useSkillEachTurn;
  this->fields.masterSkillUseWaveTurn = (int64_t)v94[1].fields.bgAnimationInfo;
  if ( !useSkillEachTurn )
    goto LABEL_247;
  UseSkillEachTurn__SetSaveData(useSkillEachTurn, *(UseSkillEachTurn_SaveData_o **)&v94[1].fields.isContinue, 0LL);
  if ( !this->fields.waveClearNeedTurn )
  {
    battle_info = this->fields.battle_info;
    if ( !battle_info )
      goto LABEL_247;
    LastWave = BattleInfoData__getLastWave(battle_info, 0LL);
    v156 = (struct System_Int32_array *)sub_B17014(int___TypeInfo, (unsigned int)(LastWave + 1), v155);
    this->fields.waveClearNeedTurn = v156;
    sub_B16F98(&this->fields.waveClearNeedTurn, v156);
    BattleData__SetUsedTurn(this, v157);
  }
  DrawLotsDispMsg_k__BackingField = this->fields._DrawLotsDispMsg_k__BackingField;
  if ( !DrawLotsDispMsg_k__BackingField )
    goto LABEL_247;
  DrawLotsDisplayMessage__SetSaveData(
    DrawLotsDispMsg_k__BackingField,
    (DrawLotsDisplayMessage_DisplayedInGroup_SaveData_array *)v94[2].monitor,
    0LL);
  itemDroppedSkillShiftInfo = this->fields.itemDroppedSkillShiftInfo;
  if ( !itemDroppedSkillShiftInfo )
    goto LABEL_247;
  ItemDroppedSkillShiftInfo__SetSaveData(itemDroppedSkillShiftInfo, (BattleData_SaveData_o *)v94, 0LL);
  v160 = *(struct System_Int32_array **)&v94[1].fields.isPlayedHalfDeadMessage;
  this->fields.waveKnockdownNums = v160;
  sub_B16F98(&this->fields.waveKnockdownNums, v160);
  if ( !this->fields.waveKnockdownNums )
  {
    v161 = this->fields.battle_info;
    if ( !v161 )
      goto LABEL_247;
    v162 = BattleInfoData__getLastWave(v161, 0LL);
    v164 = (struct System_Int32_array *)sub_B17014(int___TypeInfo, (unsigned int)(v162 + 1), v163);
    this->fields.waveKnockdownNums = v164;
    sub_B16F98(&this->fields.waveKnockdownNums, v164);
  }
  v165 = *(struct BattleCommandData_array **)&v94[1].fields.turn;
  this->fields.fixedCommands = v165;
  sub_B16F98(&this->fields.fixedCommands, v165);
  if ( !this->fields.fixedCommands )
  {
    v167 = (struct BattleCommandData_array *)sub_B17014(BattleCommandData___TypeInfo, 0LL, v166);
    this->fields.fixedCommands = v167;
    sub_B16F98(&this->fields.fixedCommands, v167);
  }
  inited = BattleData_TypeInfo;
  if ( (BYTE3(BattleData_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0 && !BattleData_TypeInfo->_2.cctor_finished )
    inited = (BattleData_c *)j_il2cpp_runtime_class_init_0(BattleData_TypeInfo);
  ContinueCount = BattleData__loadContinueCount((const MethodInfo *)inited);
  totalCriticalStars = this->fields.totalCriticalStars;
  this->fields.continueCount = ContinueCount;
  if ( totalCriticalStars >= 1 )
    this->fields.criticalstars = totalCriticalStars;
  this->fields.shuffleindex = v94->fields.winCondId;
  latestBattlePieceUniqueIndexes = (struct BattleCommandData_array *)v94->fields.latestBattlePieceUniqueIndexes;
  this->fields.draw_commandlist = latestBattlePieceUniqueIndexes;
  sub_B16F98(&this->fields.draw_commandlist, latestBattlePieceUniqueIndexes);
  prevCondSaves = (struct BattleCommandData_array *)v94->fields.prevCondSaves;
  this->fields.p_shcmlist = prevCondSaves;
  sub_B16F98(&this->fields.p_shcmlist, prevCondSaves);
  playedReinforcements = (struct System_Collections_Generic_Dictionary_string__object__o *)v94->fields.playedReinforcements;
  this->fields.voicePlayedInfo = playedReinforcements;
  sub_B16F98(&this->fields.voicePlayedInfo, playedReinforcements);
  battle_ent = this->fields.battle_ent;
  if ( !battle_ent )
    goto LABEL_247;
  this->fields.endbattleFlg = (struct WarBoardUiData_SaveData_array *)(battle_ent->fields.id ^ 0xFFFFFFFFFFED5CD0LL) == v94->fields.uiDataSaves;
  this->fields.maxEnemyUniqueID = (int32_t)v94[1].fields.pieceSaves;
  this->fields.maxEnemyIndex = HIDWORD(v94[1].fields.pieceSaves);
  this->fields.progresslistflg = (int32_t)v94[1].fields.itemSaves;
  v175 = *((_QWORD *)Method_SingletonMonoBehaviour_BattleRandom__getInstance__ + 3);
  if ( (*(_BYTE *)(v175 + 306) & 1) == 0 )
    sub_AAFCFC(*((_QWORD *)Method_SingletonMonoBehaviour_BattleRandom__getInstance__ + 3));
  v176 = **(_QWORD **)(v175 + 192);
  if ( (*(_BYTE *)(v176 + 306) & 1) == 0 )
    sub_AAFCFC(v176);
  v177 = **(UnityEngine_Object_o ***)(v176 + 184);
  if ( (BYTE3(UnityEngine_Object_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0
    && !UnityEngine_Object_TypeInfo->_2.cctor_finished )
  {
    j_il2cpp_runtime_class_init_0(UnityEngine_Object_TypeInfo);
  }
  if ( UnityEngine_Object__op_Inequality(v177, 0LL, 0LL) )
  {
    v182 = *((_QWORD *)Method_SingletonMonoBehaviour_BattleRandom__getInstance__ + 3);
    if ( (*(_BYTE *)(v182 + 306) & 1) == 0 )
      sub_AAFCFC(*((_QWORD *)Method_SingletonMonoBehaviour_BattleRandom__getInstance__ + 3));
    v183 = **(_QWORD **)(v182 + 192);
    if ( (*(_BYTE *)(v183 + 306) & 1) == 0 )
      sub_AAFCFC(v183);
    v184 = **(_QWORD **)(v183 + 184);
    if ( !v184 )
      goto LABEL_247;
    *(_DWORD *)(v184 + 40) = v94->fields.reinforcementsSaves;
    v185 = *((_QWORD *)Method_SingletonMonoBehaviour_BattleRandom__getInstance__ + 3);
    if ( (*(_BYTE *)(v185 + 306) & 1) == 0 )
      sub_AAFCFC(*((_QWORD *)Method_SingletonMonoBehaviour_BattleRandom__getInstance__ + 3));
    v186 = **(_QWORD **)(v185 + 192);
    if ( (*(_BYTE *)(v186 + 306) & 1) == 0 )
      sub_AAFCFC(v186);
    v187 = **(_QWORD **)(v186 + 184);
    if ( !v187 )
      goto LABEL_247;
    *(_DWORD *)(v187 + 44) = HIDWORD(v94->fields.reinforcementsSaves);
  }
  v188 = *(System_Collections_Generic_IEnumerable_T__o **)&v94->fields.isPlayedHalfDeadMessage;
  v189 = (System_Collections_Generic_List_WarBoardAIRoute_RouteData__o *)sub_B170CC(
                                                                           System_Collections_Generic_List_BattleData_CommandHistory__TypeInfo,
                                                                           v178,
                                                                           v179,
                                                                           v180,
                                                                           v181);
  v190 = (struct System_Collections_Generic_List_BattleData_CommandHistory__o *)v189;
  if ( v188 )
    System_Collections_Generic_List_WarBoardAIRoute_RouteData____ctor(
      v189,
      v188,
      (const MethodInfo_2F2520C *)Method_System_Collections_Generic_List_BattleData_CommandHistory___ctor___66754064);
  else
    System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData____ctor(
      (System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData__o *)v189,
      (const MethodInfo_2F25014 *)Method_System_Collections_Generic_List_BattleData_CommandHistory___ctor__);
  this->fields.comhistory = v190;
  sub_B16F98(&this->fields.comhistory, v190);
  eventSaves = (System_Collections_Generic_IEnumerable_T__o *)v94->fields.eventSaves;
  v196 = (System_Collections_Generic_List_WarBoardAIRoute_RouteData__o *)sub_B170CC(
                                                                           System_Collections_Generic_List_BattleDropItem__TypeInfo,
                                                                           v192,
                                                                           v193,
                                                                           v194,
                                                                           v195);
  v197 = (struct System_Collections_Generic_List_BattleDropItem__o *)v196;
  if ( eventSaves )
    System_Collections_Generic_List_WarBoardAIRoute_RouteData____ctor(
      v196,
      eventSaves,
      (const MethodInfo_2F2520C *)Method_System_Collections_Generic_List_BattleDropItem___ctor___66726432);
  else
    System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData____ctor(
      (System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData__o *)v196,
      (const MethodInfo_2F25014 *)Method_System_Collections_Generic_List_BattleDropItem___ctor__);
  this->fields.droplist = v197;
  sub_B16F98(&this->fields.droplist, v197);
  if ( Int_33186652 )
  {
    squareIndexInfo = v94->fields.squareIndexInfo;
    if ( squareIndexInfo )
    {
      actionLogManager = this->fields.actionLogManager;
      if ( !actionLogManager )
        goto LABEL_247;
      klass = actionLogManager->klass;
      if ( *(_WORD *)&actionLogManager->klass->_2.bitflags1 )
      {
        v205 = 0LL;
        p_offset = (BattleActionLogManagerInterface_c **)&klass->_1.interfaceOffsets->offset;
        while ( *(p_offset - 1) != BattleActionLogManagerInterface_TypeInfo )
        {
          ++v205;
          p_offset += 2;
          if ( v205 >= *(unsigned __int16 *)&actionLogManager->klass->_2.bitflags1 )
            goto LABEL_128;
        }
        p_method = (__int64)&klass->vtable[*(_DWORD *)p_offset + 3].method;
      }
      else
      {
LABEL_128:
        p_method = sub_AAFEF8(this->fields.actionLogManager, BattleActionLogManagerInterface_TypeInfo, 3LL);
      }
      (*(void (__fastcall **)(struct BattleActionLogManagerInterface_o *, struct WarBoardSquareIndexData_SaveData_array *, _QWORD))p_method)(
        actionLogManager,
        squareIndexInfo,
        *(_QWORD *)(p_method + 8));
    }
    bossBattleInfo = v94->fields.bossBattleInfo;
    if ( bossBattleInfo )
    {
      v217 = this->fields.actionLogManager;
      if ( !v217 )
        goto LABEL_247;
      v218 = v217->klass;
      if ( *(_WORD *)&v217->klass->_2.bitflags1 )
      {
        v219 = 0LL;
        v220 = (BattleActionLogManagerInterface_c **)&v218->_1.interfaceOffsets->offset;
        while ( *(v220 - 1) != BattleActionLogManagerInterface_TypeInfo )
        {
          ++v219;
          v220 += 2;
          if ( v219 >= *(unsigned __int16 *)&v217->klass->_2.bitflags1 )
            goto LABEL_147;
        }
        v221 = (__int64)&v218->vtable[*(_DWORD *)v220 + 4].method;
      }
      else
      {
LABEL_147:
        v221 = sub_AAFEF8(this->fields.actionLogManager, BattleActionLogManagerInterface_TypeInfo, 4LL);
      }
      (*(void (__fastcall **)(struct BattleActionLogManagerInterface_o *, struct WarBoardBossBattleData_SaveData_array *, _QWORD))v221)(
        v217,
        bossBattleInfo,
        *(_QWORD *)(v221 + 8));
    }
  }
  else
  {
    v208 = *(System_String_o **)&v94->fields.isContinue;
    if ( v208 )
    {
      v209 = this->fields.actionLogManager;
      if ( (BYTE3(System_Convert_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0
        && !System_Convert_TypeInfo->_2.cctor_finished )
      {
        j_il2cpp_runtime_class_init_0(System_Convert_TypeInfo);
      }
      v210 = System_Convert__FromBase64String(v208, 0LL);
      if ( !v209 )
        goto LABEL_247;
      v211 = v209->klass;
      v212 = v210;
      if ( *(_WORD *)&v209->klass->_2.bitflags1 )
      {
        v213 = 0LL;
        v214 = (BattleActionLogManagerInterface_c **)&v211->_1.interfaceOffsets->offset;
        while ( *(v214 - 1) != BattleActionLogManagerInterface_TypeInfo )
        {
          ++v213;
          v214 += 2;
          if ( v213 >= *(unsigned __int16 *)&v209->klass->_2.bitflags1 )
            goto LABEL_138;
        }
        v215 = (__int64)&v211->vtable[*(_DWORD *)v214 + 3].method;
      }
      else
      {
LABEL_138:
        v215 = sub_AAFEF8(v209, BattleActionLogManagerInterface_TypeInfo, 3LL);
      }
      (*(void (__fastcall **)(struct BattleActionLogManagerInterface_o *, System_Byte_array *, _QWORD))v215)(
        v209,
        v212,
        *(_QWORD *)(v215 + 8));
    }
    v222 = (System_String_o *)v94[1].klass;
    if ( v222 )
    {
      v223 = this->fields.actionLogManager;
      if ( (BYTE3(System_Convert_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0
        && !System_Convert_TypeInfo->_2.cctor_finished )
      {
        j_il2cpp_runtime_class_init_0(System_Convert_TypeInfo);
      }
      v224 = System_Convert__FromBase64String(v222, 0LL);
      if ( !v223 )
        goto LABEL_247;
      v225 = v223->klass;
      v226 = v224;
      if ( *(_WORD *)&v223->klass->_2.bitflags1 )
      {
        v227 = 0LL;
        v228 = (BattleActionLogManagerInterface_c **)&v225->_1.interfaceOffsets->offset;
        while ( *(v228 - 1) != BattleActionLogManagerInterface_TypeInfo )
        {
          ++v227;
          v228 += 2;
          if ( v227 >= *(unsigned __int16 *)&v223->klass->_2.bitflags1 )
            goto LABEL_161;
        }
        v229 = (__int64)&v225->vtable[*(_DWORD *)v228 + 4].method;
      }
      else
      {
LABEL_161:
        v229 = sub_AAFEF8(v223, BattleActionLogManagerInterface_TypeInfo, 4LL);
      }
      (*(void (__fastcall **)(struct BattleActionLogManagerInterface_o *, System_Byte_array *, _QWORD))v229)(
        v223,
        v226,
        *(_QWORD *)(v229 + 8));
    }
  }
  wallSaves = (System_Collections_Generic_IEnumerable_T__o *)v94[2].fields.wallSaves;
  v231 = (System_Collections_Generic_List_int__o *)sub_B170CC(
                                                     System_Collections_Generic_List_int__TypeInfo,
                                                     v198,
                                                     v199,
                                                     v200,
                                                     v201);
  v232 = v231;
  if ( wallSaves )
    System_Collections_Generic_List_int____ctor_49346956(
      v231,
      wallSaves,
      (const MethodInfo_2F0F98C *)Method_System_Collections_Generic_List_int___ctor___66737200);
  else
    System_Collections_Generic_List_int____ctor(
      v231,
      (const MethodInfo_2F0F794 *)Method_System_Collections_Generic_List_int___ctor__);
  this->fields.listQuestRouteId = v232;
  sub_B16F98(&this->fields.listQuestRouteId, v232);
  v233 = this->fields.battle_info;
  this->fields.playerNpCount = (int32_t)v94[2].fields.squareSaves;
  this->fields.playerSkillCount = HIDWORD(v94[2].fields.squareSaves);
  this->fields.playerMasterSkillCount = LODWORD(v94[2].fields.cameraPos.fields.x);
  this->fields.enemyMasterChangedFaceId = LODWORD(v94[2].fields.cameraSize);
  if ( !v233 )
    goto LABEL_247;
  IsWaveMyDecks = BattleInfoData__IsWaveMyDecks(v233, 0LL);
  v239 = this->fields.battle_info;
  if ( IsWaveMyDecks )
  {
    if ( !v239 )
      goto LABEL_247;
    WaveMyDeck = BattleInfoData__GetWaveMyDeck(this->fields.battle_info, this->fields.wavecount, 0LL);
  }
  else
  {
    if ( !v239 )
      goto LABEL_247;
    WaveMyDeck = v239->fields.myDeck;
  }
  v241 = (System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData__o *)sub_B170CC(
                                                                                                   System_Collections_Generic_List_BattleServantData__TypeInfo,
                                                                                                   v235,
                                                                                                   v236,
                                                                                                   v237,
                                                                                                   v238);
  System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData____ctor(
    v241,
    (const MethodInfo_2F25014 *)Method_System_Collections_Generic_List_BattleServantData___ctor__);
  this->fields.player_datalist = (struct System_Collections_Generic_List_BattleServantData__o *)v241;
  sub_B16F98(&this->fields.player_datalist, v241);
  v246 = (System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData__o *)sub_B170CC(
                                                                                                   System_Collections_Generic_List_BattleServantData__TypeInfo,
                                                                                                   v242,
                                                                                                   v243,
                                                                                                   v244,
                                                                                                   v245);
  System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData____ctor(
    v246,
    (const MethodInfo_2F25014 *)Method_System_Collections_Generic_List_BattleServantData___ctor__);
  if ( !WaveMyDeck )
    goto LABEL_247;
  svts = WaveMyDeck->fields.svts;
  if ( !svts )
    goto LABEL_247;
  max_length = svts->max_length;
  if ( max_length >= 1 )
  {
    for ( i = 0; i < max_length; ++i )
    {
      if ( i >= (unsigned int)max_length )
        goto LABEL_262;
      v252 = svts->m_Items[i];
      v253 = (BattleData___c__DisplayClass554_0_o *)sub_B170CC(
                                                      BattleData___c__DisplayClass554_0_TypeInfo,
                                                      v99,
                                                      v100,
                                                      v247,
                                                      v248);
      BattleData___c__DisplayClass554_0___ctor(v253, 0LL);
      if ( !v252 || !v253 )
        goto LABEL_247;
      v253->fields.index = v252->fields.id - 1;
      v258 = (_DWORD)v253 + 16;
      v259 = (BattleServantData_o *)sub_B170CC(BattleServantData_TypeInfo, v254, v255, v256, v257);
      BattleServantData___ctor(v259, 0LL);
      if ( Int_33186652 )
      {
        latestPieceActionSquareIndexes = (WellFired_USFGOPlayStandardCutInLimitCount_OverwriteCutIn_array *)v94->fields.latestPieceActionSquareIndexes;
        v265 = (System_Predicate_peRenderTexture_ChangeLayerObject__o *)sub_B170CC(
                                                                          System_Predicate_BattleServantData_SaveData__TypeInfo,
                                                                          v260,
                                                                          v261,
                                                                          v262,
                                                                          v263);
        System_Predicate_peRenderTexture_ChangeLayerObject____ctor(
          v265,
          (Il2CppObject *)v253,
          Method_BattleData___c__DisplayClass554_0__loadQuest_b__4__,
          (const MethodInfo_2B0B204 *)Method_System_Predicate_BattleServantData_SaveData___ctor__);
        USFGOPlayStandardCutInLimitCount_OverwriteCutIn = (BattleServantData_SaveData_o *)System_Array__Find_USFGOPlayStandardCutInLimitCount_OverwriteCutIn_(
                                                                                            latestPieceActionSquareIndexes,
                                                                                            (System_Predicate_T__o *)v265,
                                                                                            (const MethodInfo_20441E8 *)Method_System_Array_Find_BattleServantData_SaveData___);
      }
      else
      {
        monitor = (System_Collections_Generic_Dictionary_XmlQualifiedName__XmlSchemaObject__o *)v94[1].monitor;
        v268 = System_Int32__ToString(v258, 0LL);
        if ( !monitor )
          goto LABEL_247;
        if ( System_Collections_Generic_Dictionary_XmlQualifiedName__XmlSchemaObject___ContainsKey(
               monitor,
               (System_Xml_XmlQualifiedName_o *)v268,
               (const MethodInfo_2DA3E8C *)Method_System_Collections_Generic_Dictionary_string__object__ContainsKey__) )
        {
          v269 = (System_Collections_Generic_Dictionary_Type__IStoreExtension__o *)v94[1].monitor;
          v270 = (System_Type_o *)System_Int32__ToString(v258, 0LL);
          if ( !v269 )
            goto LABEL_247;
          Item = System_Collections_Generic_Dictionary_Type__IStoreExtension___get_Item(
                   v269,
                   v270,
                   (const MethodInfo_2DA3B54 *)Method_System_Collections_Generic_Dictionary_string__object__get_Item__);
          v272 = (System_String_o *)Item;
          if ( Item && (System_String_c *)Item->klass != string_TypeInfo )
          {
            v354 = (BattleData_o *)sub_B173C8(Item);
            BattleData__SetSavedCommandCardBuffData(v354, v355);
            return;
          }
        }
        else
        {
          v273 = System_Int32__ToString(v258, 0LL);
          v274 = System_String__Concat_43743732((System_String_o *)StringLiteral_21301/*"p_svlist"*/, v273, 0LL);
          if ( (BYTE3(EncryptedPlayerPrefs_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0
            && !EncryptedPlayerPrefs_TypeInfo->_2.cctor_finished )
          {
            j_il2cpp_runtime_class_init_0(EncryptedPlayerPrefs_TypeInfo);
          }
          v272 = EncryptedPlayerPrefs__GetString(v274, 0LL);
        }
        if ( !v259 )
          goto LABEL_247;
        USFGOPlayStandardCutInLimitCount_OverwriteCutIn = BattleServantData__GetSaveDataFromJson(v259, v272, 0LL);
      }
      v275 = this->fields.battle_ent;
      v276 = USFGOPlayStandardCutInLimitCount_OverwriteCutIn;
      if ( !v275 )
        goto LABEL_247;
      FollowerType = BattleDeckServantData__GetFollowerType(v252, v275->fields.followerType, 0LL);
      Int_33186652 = v356;
      if ( !v259 )
        goto LABEL_247;
      BattleServantData__setServantData_22718064(v259, v252, v275, FollowerType, v276, this, 0LL, 0LL);
      player_datalist = this->fields.player_datalist;
      if ( !player_datalist )
        goto LABEL_247;
      System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData___Add(
        (System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData__o *)player_datalist,
        (EventMissionProgressRequest_Argument_ProgressData_o *)v259,
        (const MethodInfo_2F25CD8 *)Method_System_Collections_Generic_List_BattleServantData__Add__);
      max_length = svts->max_length;
    }
  }
  BattleData__LoadAiNpcServant(this, (BattleServantData_SaveData_array *)v94[2].klass, v100);
  v283 = (PlayerFieldStatus_o *)sub_B170CC(PlayerFieldStatus_TypeInfo, v279, v280, v281, v282);
  PlayerFieldStatus___ctor(v283, 0LL);
  this->fields.playerFieldStatus = v283;
  sub_B16F98(&this->fields.playerFieldStatus, v283);
  v288 = (EnemyFieldStatus_o *)sub_B170CC(EnemyFieldStatus_TypeInfo, v284, v285, v286, v287);
  EnemyFieldStatus___ctor(v288, 0LL);
  this->fields.enemyFieldStatus = v288;
  sub_B16F98(&this->fields.enemyFieldStatus, v288);
  if ( Int_33186652 )
  {
    v293 = (System_Collections_Generic_Dictionary_int__WarBoardEvalValueSquare_EvalValueSquare__o *)sub_B170CC(System_Collections_Generic_Dictionary_int__BattleServantData_SaveData__TypeInfo, v289, v290, v291, v292);
    System_Collections_Generic_Dictionary_int__WarBoardEvalValueSquare_EvalValueSquare____ctor(
      v293,
      (const MethodInfo_2DE8808 *)Method_System_Collections_Generic_Dictionary_int__BattleServantData_SaveData___ctor__);
    p_tmpEnemyData_MP = (System_Collections_Generic_Dictionary_int__WarBoardEvalValueSquare_EvalValueSquare__o **)&this->fields.tmpEnemyData_MP;
    this->fields.tmpEnemyData_MP = (struct System_Collections_Generic_Dictionary_int__BattleServantData_SaveData__o *)v293;
    InfoId = (UserPresentBoxWindow_resData_array *)sub_B16F98(&this->fields.tmpEnemyData_MP, v293);
    v295 = *(_QWORD *)&v94->fields.localSaveTiming;
    if ( !v295 )
      goto LABEL_247;
    v296 = *(_DWORD *)(v295 + 24);
    if ( v296 >= 1 )
    {
      v297 = 0;
      while ( v297 < v296 )
      {
        v298 = *(_QWORD *)(v295 + 8LL * (int)v297 + 32);
        if ( !v298 || !*p_tmpEnemyData_MP )
          goto LABEL_247;
        System_Collections_Generic_Dictionary_int__WarBoardEvalValueSquare_EvalValueSquare___Add(
          *p_tmpEnemyData_MP,
          *(_DWORD *)(v298 + 16),
          (WarBoardEvalValueSquare_EvalValueSquare_o *)v298,
          (const MethodInfo_2DE93BC *)Method_System_Collections_Generic_Dictionary_int__BattleServantData_SaveData__Add__);
        v296 = *(_DWORD *)(v295 + 24);
        if ( (int)++v297 >= v296 )
          goto LABEL_208;
      }
LABEL_262:
      sub_B17100(InfoId, v99, v100);
      sub_B170A0();
    }
  }
  else
  {
    v299 = *(struct System_Collections_Generic_Dictionary_string__object__o **)&v94[1].fields.questId;
    this->fields.tmpEnemyData = v299;
    sub_B16F98(&this->fields.tmpEnemyData, v299);
  }
LABEL_208:
  v300 = *(struct BattleFieldData_SaveData_array **)&v94[1].fields.stageId;
  this->fields.tmpFieldDataSave = v300;
  sub_B16F98(&this->fields.tmpFieldDataSave, v300);
  this->fields.tmpEnemySpellCntSave = (int32_t)v94[1].fields.wallSaves;
  this->fields.tmpMaxTurnDamage = (int64_t)v94[1].fields.squareSaves;
  v305 = v94[1].fields.cameraPos;
  if ( v305 )
  {
    v306 = 0LL;
    while ( (__int64)v306 < *(int *)(*(_QWORD *)&v305 + 24LL) )
    {
      v307 = (System_Collections_Generic_Dictionary_XmlQualifiedName__XmlSchemaObject__o *)sub_B170CC(
                                                                                             System_Collections_Generic_Dictionary_string__object__TypeInfo,
                                                                                             v301,
                                                                                             v302,
                                                                                             v303,
                                                                                             v304);
      System_Collections_Generic_Dictionary_XmlQualifiedName__XmlSchemaObject____ctor(
        v307,
        (const MethodInfo_2DA3068 *)Method_System_Collections_Generic_Dictionary_string__object___ctor__);
      v308 = v94[1].fields.cameraPos;
      if ( !*(_QWORD *)&v308 )
        goto LABEL_247;
      if ( v306 >= *(unsigned int *)(*(_QWORD *)&v308 + 24LL) )
        goto LABEL_262;
      if ( v307 )
      {
        System_Collections_Generic_Dictionary_XmlQualifiedName__XmlSchemaObject___Add(
          v307,
          (System_Xml_XmlQualifiedName_o *)StringLiteral_22973/*"userSvtId"*/,
          *(System_Xml_Schema_XmlSchemaObject_o **)(*(_QWORD *)&v308 + 8 * v306 + 32),
          (const MethodInfo_2DA3C18 *)Method_System_Collections_Generic_Dictionary_string__object__Add__);
        v309 = *(_QWORD *)&v94[1].fields.cameraSize;
        if ( v309 )
        {
          if ( v306 >= *(unsigned int *)(v309 + 24) )
            goto LABEL_262;
          v358 = *(_DWORD *)(v309 + 4 * v306 + 32);
          v310 = (System_Xml_Schema_XmlSchemaObject_o *)j_il2cpp_value_box_0(int_TypeInfo, &v358);
          System_Collections_Generic_Dictionary_XmlQualifiedName__XmlSchemaObject___Add(
            v307,
            (System_Xml_XmlQualifiedName_o *)StringLiteral_21876/*"seqId"*/,
            v310,
            (const MethodInfo_2DA3C18 *)Method_System_Collections_Generic_Dictionary_string__object__Add__);
          v357 = BasicHelper__IndexValue_int_(
                   *(System_Int32_array **)&v94[2].fields.questId,
                   v306,
                   0,
                   (const MethodInfo_18B81B4 *)Method_BasicHelper_IndexValue_int____66807072);
          v311 = (System_Xml_Schema_XmlSchemaObject_o *)j_il2cpp_value_box_0(int_TypeInfo, &v357);
          System_Collections_Generic_Dictionary_XmlQualifiedName__XmlSchemaObject___Add(
            v307,
            (System_Xml_XmlQualifiedName_o *)StringLiteral_22376/*"svtId"*/,
            v311,
            (const MethodInfo_2DA3C18 *)Method_System_Collections_Generic_Dictionary_string__object__Add__);
          tmpFirstNpPlayList = this->fields.tmpFirstNpPlayList;
          if ( tmpFirstNpPlayList )
          {
            System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData___Add(
              (System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData__o *)tmpFirstNpPlayList,
              (EventMissionProgressRequest_Argument_ProgressData_o *)v307,
              (const MethodInfo_2F25CD8 *)Method_System_Collections_Generic_List_Dictionary_string__object___Add__);
            v305 = v94[1].fields.cameraPos;
            ++v306;
            if ( v305 )
              continue;
          }
        }
      }
      goto LABEL_247;
    }
  }
  v313 = *(PlayerServantNoblePhantasmUsageData_SaveData_o **)&v94[2].fields.turn;
  if ( !v313 )
  {
    v313 = (PlayerServantNoblePhantasmUsageData_SaveData_o *)sub_B170CC(
                                                               PlayerServantNoblePhantasmUsageData_SaveData_TypeInfo,
                                                               v301,
                                                               v302,
                                                               v303,
                                                               v304);
    PlayerServantNoblePhantasmUsageData_SaveData___ctor(v313, 0LL);
  }
  this->fields.tempBattleServantNoblePhantasmUsageDataSaveData = v313;
  sub_B16F98(&this->fields.tempBattleServantNoblePhantasmUsageDataSaveData, v313);
  v314 = (struct System_Boolean_array *)v94[1].fields.playedReinforcements;
  this->fields.tmpEnemyAppearValids = v314;
  sub_B16F98(&this->fields.tmpEnemyAppearValids, v314);
  EnemyEntryMaxCountEachTurn = BattleData_SaveData__GetEnemyEntryMaxCountEachTurn((BattleData_SaveData_o *)v94, 0LL);
  perf = this->fields.perf;
  this->fields.tmpEnemyEntryMaxCountEachTurn = EnemyEntryMaxCountEachTurn;
  if ( !perf )
    goto LABEL_247;
  bgPerf = perf->fields.bgPerf;
  if ( !bgPerf )
    goto LABEL_247;
  BattlePerformanceBg__setSaveData(bgPerf, (BattlePerformanceBg_SaveData_o *)v94[1].fields.treasureSaves, 0LL);
  BattleData__loadMasterSkill(this, v318);
  if ( (BYTE3(ServantAssetLoadManager_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0
    && !ServantAssetLoadManager_TypeInfo->_2.cctor_finished )
  {
    j_il2cpp_runtime_class_init_0(ServantAssetLoadManager_TypeInfo);
  }
  ServantAssetLoadManager__preloadCommandSpellAnyVoice(0LL);
  BattleData__loadBoostSkill(this, v319);
  masterSkillInfo = this->fields.masterSkillInfo;
  if ( !masterSkillInfo )
LABEL_247:
    sub_B170D4();
  size = masterSkillInfo->fields._size;
  if ( size >= 1 )
  {
    v324 = 0;
    while ( 1 )
    {
      if ( masterSkillInfo->fields._size <= v324 )
        System_ThrowHelper__ThrowArgumentOutOfRangeException_41329284(0LL);
      v325 = masterSkillInfo->fields._items->m_Items[v324];
      if ( !v325 )
        goto LABEL_247;
      if ( !v325->fields.isPassive )
      {
        v326 = *(_QWORD *)&v94->fields.turn;
        if ( !v326 )
          goto LABEL_247;
        v327 = 8LL;
        while ( 1 )
        {
          v328 = *(unsigned int *)(v326 + 24);
          v329 = v327 - 8;
          if ( v327 - 8 >= (int)v328 )
            break;
          if ( v329 >= v328 )
            goto LABEL_262;
          v330 = *(_DWORD *)(v326 + 4 * v327);
          InfoId = (UserPresentBoxWindow_resData_array *)BattleSkillInfoData__getInfoId(v325, 0LL);
          if ( v330 == (_DWORD)InfoId )
          {
            v331 = *(_QWORD *)&v94->fields.turnGroupId;
            if ( !v331 )
              goto LABEL_247;
            if ( v329 >= *(unsigned int *)(v331 + 24) )
              goto LABEL_262;
            v325->fields.chargeTurn = *(_DWORD *)(v331 + 4 * v327);
            v332 = *(_QWORD *)&v94->fields.randLogicCount;
            if ( v332 )
            {
              if ( v329 >= *(unsigned int *)(v332 + 24) )
                goto LABEL_262;
              v325->fields.sealedTurn = *(_DWORD *)(v332 + 4 * v327);
            }
          }
          v326 = *(_QWORD *)&v94->fields.turn;
          ++v327;
          if ( !v326 )
            goto LABEL_247;
        }
      }
      if ( (int)++v324 >= size )
        break;
      masterSkillInfo = this->fields.masterSkillInfo;
      if ( !masterSkillInfo )
        goto LABEL_247;
    }
  }
  v333 = *(System_Collections_Generic_Dictionary_XmlQualifiedName__XmlSchemaObject__o **)&v94[1].fields.randLogicCount;
  if ( v333 )
  {
    Count = (BattleData_o *)System_Collections_Generic_Dictionary_XmlQualifiedName__XmlSchemaObject___get_Count(
                              v333,
                              (const MethodInfo_2DA3814 *)Method_System_Collections_Generic_Dictionary_string__object__get_Count__);
    if ( (_DWORD)Count )
    {
      v335 = BattleData__convertUsedEventMasterSkillDictFormatGamePlaying(
               Count,
               *(System_Collections_Generic_Dictionary_string__object__o **)&v94[1].fields.randLogicCount,
               v100);
      this->fields.usedEventMasterSkillDict = v335;
      sub_B16F98(&this->fields.usedEventMasterSkillDict, v335);
    }
  }
  v336 = (System_Collections_Generic_IEnumerable_T__o *)v94[1].fields.latestPieceActionSquareIndexes;
  if ( v336 && v336[1].monitor )
  {
    v337 = (System_Collections_Generic_HashSet_BattleBuffData_BuffData__o *)sub_B170CC(
                                                                              System_Collections_Generic_HashSet_string__TypeInfo,
                                                                              v99,
                                                                              v100,
                                                                              v320,
                                                                              v321);
    System_Collections_Generic_HashSet_BattleBuffData_BuffData____ctor(
      v337,
      v336,
      (const MethodInfo_21DEA2C *)Method_System_Collections_Generic_HashSet_string___ctor___66714584);
    p_voicePlayedOver64Info = &this->fields.voicePlayedOver64Info;
    this->fields.voicePlayedOver64Info = (struct System_Collections_Generic_HashSet_string__o *)v337;
    v339 = v337;
  }
  else
  {
    v340 = (System_Collections_Generic_HashSet_WarBoardAIRoute_RouteData__o *)sub_B170CC(
                                                                                System_Collections_Generic_HashSet_string__TypeInfo,
                                                                                v99,
                                                                                v100,
                                                                                v320,
                                                                                v321);
    System_Collections_Generic_HashSet_WarBoardAIRoute_RouteData____ctor(
      v340,
      (const MethodInfo_21DE95C *)Method_System_Collections_Generic_HashSet_string___ctor__);
    p_voicePlayedOver64Info = &this->fields.voicePlayedOver64Info;
    v339 = v340;
    this->fields.voicePlayedOver64Info = (struct System_Collections_Generic_HashSet_string__o *)v340;
  }
  sub_B16F98(p_voicePlayedOver64Info, v339);
  v345 = *(System_Collections_Generic_IEnumerable_T__o **)&v94[2].fields.stageId;
  if ( v345 && v345[1].monitor )
  {
    v346 = (System_Collections_Generic_HashSet_int__o *)sub_B170CC(
                                                          System_Collections_Generic_HashSet_int__TypeInfo,
                                                          v341,
                                                          v342,
                                                          v343,
                                                          v344);
    System_Collections_Generic_HashSet_int____ctor_35487824(
      v346,
      v345,
      (const MethodInfo_21D8050 *)Method_System_Collections_Generic_HashSet_int___ctor___66713952);
    p_calledEnemyUniqueIdHash = &this->fields.calledEnemyUniqueIdHash;
    this->fields.calledEnemyUniqueIdHash = v346;
    v348 = v346;
  }
  else
  {
    v349 = (System_Collections_Generic_HashSet_int__o *)sub_B170CC(
                                                          System_Collections_Generic_HashSet_int__TypeInfo,
                                                          v341,
                                                          v342,
                                                          v343,
                                                          v344);
    System_Collections_Generic_HashSet_int____ctor(
      v349,
      (const MethodInfo_21D7F80 *)Method_System_Collections_Generic_HashSet_int___ctor___66713944);
    p_calledEnemyUniqueIdHash = &this->fields.calledEnemyUniqueIdHash;
    v348 = v349;
    this->fields.calledEnemyUniqueIdHash = v349;
  }
  sub_B16F98(p_calledEnemyUniqueIdHash, v348);
  BattleData__SetSavedCommandCardBuffData(this, v350);
  BattleData__createCommandCard(this, v351);
  FieldEnvData_k__BackingField = this->fields._FieldEnvData_k__BackingField;
  if ( !FieldEnvData_k__BackingField )
    goto LABEL_247;
  BattleFieldEnvironmentData__SetSaveData(
    FieldEnvData_k__BackingField,
    (BattleFieldEnvironmentData_SaveData_o *)v94[2].fields.treasureSaves,
    0LL);
  v353 = this->fields.battleAtkManager;
  if ( !v353 )
    goto LABEL_247;
  ((void (__fastcall *)(struct BattleAttackManager_o *, BattleData_o *, void *))v353->klass->vtable._11_AfterLoadQuest.method)(
    v353,
    this,
    v353->klass[1]._1.image);
}


void __fastcall BattleData__loadSaveTurnNstage(BattleData_o *this, const MethodInfo *method)
{
  __int64 v3; // x1
  __int64 v4; // x1
  __int64 v5; // x1
  __int64 v6; // x1
  __int64 v7; // x1
  __int64 v8; // x1
  __int64 v9; // x1
  __int64 v10; // x1
  __int64 v11; // x1
  __int64 v12; // x1
  __int64 v13; // x1
  __int64 v14; // x1
  __int64 v15; // x1
  __int64 v16; // x1
  __int64 v17; // x1
  __int64 v18; // x1
  __int64 v19; // x1
  __int64 v20; // x1
  __int64 v21; // x1
  __int64 v22; // x1
  __int64 v23; // x1
  __int64 v24; // x1
  __int64 v25; // x1
  __int64 v26; // x1
  __int64 v27; // x1
  __int64 v28; // x1
  __int64 v29; // x1
  __int64 v30; // x1
  __int64 v31; // x1
  __int64 v32; // x1
  __int64 v33; // x1
  __int64 v34; // x1
  __int64 v35; // x1
  __int64 v36; // x1
  __int64 v37; // x1
  _BOOL8 isDeadWait; // x0
  __int64 v39; // x1
  __int64 v40; // x2
  struct System_Collections_Generic_List_BattleServantData__o *player_datalist; // x22
  int size; // w20
  unsigned int v43; // w21
  BattleServantData_o *v44; // x0
  struct BattleFieldData_array *field_datalist; // x8
  __int64 v46; // x20
  unsigned __int64 max_length; // x11
  unsigned __int64 v48; // x10
  struct BattleFieldData_SaveData_array *tmpFieldDataSave; // x9
  unsigned __int64 v50; // x12
  BattleFieldData_o *v51; // x0
  struct System_Boolean_array *tmpEnemyAppearValids; // x1
  int32_t Int_33186652; // w0
  int32_t v54; // w20
  DeckData_o *EnemyDeck; // x0
  DeckData_o *v56; // x21
  __int64 v57; // x3
  __int64 v58; // x4
  struct BattleDeckServantData_array *svts; // x25
  int v60; // w8
  unsigned int v61; // w26
  BattleDeckServantData_o *v62; // x22
  BattleServantData_o *v63; // x21
  struct System_Collections_Generic_Dictionary_int__BattleServantData_SaveData__o *v64; // x0
  BattleServantData_SaveData_o *SaveDataFromJson; // x4
  struct System_Collections_Generic_Dictionary_string__object__o *v66; // x23
  System_String_o *v67; // x0
  struct System_Collections_Generic_Dictionary_string__object__o *v68; // x23
  System_Type_o *v69; // x0
  UnityEngine_Purchasing_IStoreExtension_o *Item; // x0
  System_String_o *String; // x8
  System_String_o *v72; // x0
  System_String_o *v73; // x23
  struct System_Int32_array *v74; // x8
  unsigned __int64 v75; // x9
  unsigned __int64 v76; // x10
  struct System_Collections_Generic_Dictionary_int__BattleServantData_SaveData__o *v77; // x0
  struct System_Collections_Generic_Dictionary_int__BattleServantData_SaveData__o *v78; // x0
  struct System_Collections_Generic_Dictionary_string__object__o *tmpEnemyData; // x22
  System_String_o *v80; // x0
  struct System_Collections_Generic_Dictionary_string__object__o *v81; // x22
  System_String_o *v82; // x0
  struct System_Collections_Generic_List_BattleServantData__o *v83; // x0
  struct System_Collections_Generic_List_BattleServantData__o *enemy_datalist; // x21
  BattleData___c_c *v85; // x0
  struct BattleData___c_StaticFields *static_fields; // x8
  System_Comparison_TitleInfoControl_EventEndTimeInfo__o *_9__569_0; // x22
  Il2CppObject *v88; // x23
  struct BattleData___c_StaticFields *v89; // x0
  const MethodInfo *v90; // x2
  const MethodInfo *v91; // x2
  struct System_Collections_Generic_Dictionary_int__BattleServantData_SaveData__o *tmpEnemyData_MP; // x0
  struct System_Collections_Generic_Dictionary_int__BattleServantData_SaveData__o *v93; // x0
  __int64 v94; // x1
  __int64 v95; // x2
  __int64 v96; // x3
  __int64 v97; // x4
  int key; // w25
  Il2CppObject *v99; // x20
  BattleServantData_o *v100; // x21
  const MethodInfo *v101; // x6
  BattleServantData_o *SummonEnemyServantData; // x0
  __int64 v103; // x1
  __int64 v104; // x2
  struct System_Int32_array *e_entryid; // x9
  unsigned __int64 v106; // x10
  unsigned __int64 v107; // x11
  void *v108; // x0
  int v109; // w1
  __int64 v110; // x20
  struct System_Collections_Generic_Dictionary_string__object__o *v111; // x0
  struct System_Collections_Generic_Dictionary_string__object__o *v112; // x0
  __int64 v113; // x1
  __int64 v114; // x2
  __int64 v115; // x3
  __int64 v116; // x4
  Il2CppObject *v117; // x21
  System_String_o *v118; // x22
  BattleServantData_o *v119; // x20
  BattleServantData_SaveData_o *v120; // x22
  int32_t v121; // w0
  const MethodInfo *v122; // x6
  BattleServantData_o *v123; // x0
  __int64 v124; // x1
  __int64 v125; // x2
  struct System_Int32_array *v126; // x9
  unsigned __int64 v127; // x10
  unsigned __int64 v128; // x11
  __int64 v129; // x20
  int64_t tmpMaxTurnDamage; // x9
  struct System_Collections_Generic_List_Dictionary_string__object___o *tmpFirstNpPlayList; // x1
  PlayerServantNoblePhantasmUsageData_o *playerServantNoblePhantasmUsageData; // x0
  int v133; // w1
  System_Collections_Generic_Dictionary_Enumerator_TKey__TValue__o v134; // [xsp+8h] [xbp-F8h] BYREF
  int v135[2]; // [xsp+30h] [xbp-D0h]
  int v136; // [xsp+38h] [xbp-C8h]
  System_Collections_Generic_Dictionary_Enumerator_TKey__TValue__o v137; // [xsp+40h] [xbp-C0h] BYREF
  System_Collections_Generic_Dictionary_Enumerator_TKey__TValue__o v138; // [xsp+70h] [xbp-90h] BYREF
  WarBoardEvalValueSquare_CalcEval_o *value; // [xsp+98h] [xbp-68h] BYREF
  int32_t v140[3]; // [xsp+A4h] [xbp-5Ch] BYREF
  System_Nullable_int__o p_tmpEnemyEntryMaxCountEachTurn; // 0:x0.8

  if ( (byte_40F6AA3 & 1) == 0 )
  {
    sub_B16FFC(&BattleServantData_TypeInfo, method);
    sub_B16FFC(&Method_System_Comparison_BattleServantData___ctor__, v3);
    sub_B16FFC(&System_Comparison_BattleServantData__TypeInfo, v4);
    sub_B16FFC(&Method_System_Collections_Generic_Dictionary_string__object__ContainsKey__, v5);
    sub_B16FFC(&Method_System_Collections_Generic_Dictionary_int__BattleServantData_SaveData__ContainsKey__, v6);
    sub_B16FFC(&Method_System_Collections_Generic_Dictionary_string__object__GetEnumerator__, v7);
    sub_B16FFC(&Method_System_Collections_Generic_Dictionary_int__BattleServantData_SaveData__GetEnumerator__, v8);
    sub_B16FFC(&Method_System_Collections_Generic_Dictionary_int__BattleServantData_SaveData__Remove__, v9);
    sub_B16FFC(&Method_System_Collections_Generic_Dictionary_string__object__Remove__, v10);
    sub_B16FFC(&Method_System_Collections_Generic_Dictionary_int__BattleServantData_SaveData__TryGetValue__, v11);
    sub_B16FFC(&Method_System_Collections_Generic_Dictionary_int__BattleServantData_SaveData__get_Count__, v12);
    sub_B16FFC(&Method_System_Collections_Generic_Dictionary_string__object__get_Count__, v13);
    sub_B16FFC(&Method_System_Collections_Generic_Dictionary_string__object__get_Item__, v14);
    sub_B16FFC(&EncryptedPlayerPrefs_TypeInfo, v15);
    sub_B16FFC(&Method_System_Collections_Generic_Dictionary_Enumerator_int__BattleServantData_SaveData__Dispose__, v16);
    sub_B16FFC(&Method_System_Collections_Generic_Dictionary_Enumerator_string__object__Dispose__, v17);
    sub_B16FFC(&Method_System_Collections_Generic_Dictionary_Enumerator_string__object__MoveNext__, v18);
    sub_B16FFC(
      &Method_System_Collections_Generic_Dictionary_Enumerator_int__BattleServantData_SaveData__MoveNext__,
      v19);
    sub_B16FFC(
      &Method_System_Collections_Generic_Dictionary_Enumerator_int__BattleServantData_SaveData__get_Current__,
      v20);
    sub_B16FFC(&Method_System_Collections_Generic_Dictionary_Enumerator_string__object__get_Current__, v21);
    sub_B16FFC(&Method_System_Collections_Generic_KeyValuePair_int__BattleServantData_SaveData__get_Key__, v22);
    sub_B16FFC(&Method_System_Collections_Generic_KeyValuePair_string__object__get_Key__, v23);
    sub_B16FFC(&Method_System_Collections_Generic_KeyValuePair_string__object__get_Value__, v24);
    sub_B16FFC(&Method_System_Collections_Generic_KeyValuePair_int__BattleServantData_SaveData__get_Value__, v25);
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleServantData__Add__, v26);
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleServantData__Clear__, v27);
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleServantData__Sort__, v28);
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleServantData__get_Count__, v29);
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleServantData__get_Item__, v30);
    sub_B16FFC(&Method_System_Nullable_int__get_HasValue__, v31);
    sub_B16FFC(&Method_System_Nullable_int__get_Value__, v32);
    sub_B16FFC(&string_TypeInfo, v33);
    sub_B16FFC(&Method_BattleData___c__loadSaveTurnNstage_b__569_0__, v34);
    sub_B16FFC(&BattleData___c_TypeInfo, v35);
    sub_B16FFC(&StringLiteral_8097/*"IsDuelMessagePack"*/, v36);
    sub_B16FFC(&StringLiteral_18014/*"e_svlist"*/, v37);
    byte_40F6AA3 = 1;
  }
  v140[0] = 0;
  value = 0LL;
  memset(&v138, 0, sizeof(v138));
  memset(&v137, 0, sizeof(v137));
  v136 = 0;
  BattleData__loadStageData(this, method);
  player_datalist = this->fields.player_datalist;
  this->fields.leaderDown = 0;
  if ( !player_datalist )
    goto LABEL_137;
  size = player_datalist->fields._size;
  if ( size >= 1 )
  {
    v43 = 0;
    do
    {
      if ( player_datalist->fields._size <= v43 )
        System_ThrowHelper__ThrowArgumentOutOfRangeException_41329284(0LL);
      v44 = player_datalist->fields._items->m_Items[v43];
      if ( !v44 )
        break;
      BattleServantData__setInitBattle(v44, 0LL);
      if ( (int)++v43 >= size )
        goto LABEL_12;
      player_datalist = this->fields.player_datalist;
    }
    while ( player_datalist );
    goto LABEL_137;
  }
LABEL_12:
  field_datalist = this->fields.field_datalist;
  if ( !field_datalist )
    goto LABEL_137;
  v46 = 4LL;
  while ( 1 )
  {
    max_length = field_datalist->max_length;
    v48 = v46 - 4;
    if ( v46 - 4 >= (int)max_length )
      break;
    tmpFieldDataSave = this->fields.tmpFieldDataSave;
    if ( !tmpFieldDataSave )
      goto LABEL_137;
    v50 = tmpFieldDataSave->max_length;
    if ( (__int64)v48 < (int)v50 )
    {
      if ( v48 >= max_length || v48 >= v50 )
      {
LABEL_105:
        sub_B17100(isDeadWait, v39, v40);
        sub_B170A0();
      }
      v51 = (BattleFieldData_o *)*((_QWORD *)&field_datalist->obj.klass + v46);
      if ( !v51 )
        goto LABEL_137;
      BattleFieldData__setSaveData(v51, *((BattleFieldData_SaveData_o **)&tmpFieldDataSave->obj.klass + v46), 0LL);
      field_datalist = this->fields.field_datalist;
    }
    ++v46;
    if ( !field_datalist )
      goto LABEL_137;
  }
  tmpEnemyAppearValids = this->fields.tmpEnemyAppearValids;
  if ( tmpEnemyAppearValids )
  {
    this->fields.enemyAppearValid = tmpEnemyAppearValids;
    sub_B16F98(&this->fields.enemyAppearValid, tmpEnemyAppearValids);
    this->fields.tmpEnemyAppearValids = 0LL;
    sub_B16F98(&this->fields.tmpEnemyAppearValids, 0LL);
  }
  if ( this->fields.tmpEnemyEntryMaxCountEachTurn.fields.has_value )
  {
    p_tmpEnemyEntryMaxCountEachTurn = (System_Nullable_int__o)&this->fields.tmpEnemyEntryMaxCountEachTurn;
    this->fields._EnemyEntryMaxCountEachTurn_k__BackingField = System_Nullable_int___get_Value(
                                                                 p_tmpEnemyEntryMaxCountEachTurn,
                                                                 (const MethodInfo_2968794 *)Method_System_Nullable_int__get_Value__);
    this->fields.tmpEnemyEntryMaxCountEachTurn = 0LL;
  }
  if ( (BYTE3(EncryptedPlayerPrefs_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0
    && !EncryptedPlayerPrefs_TypeInfo->_2.cctor_finished )
  {
    j_il2cpp_runtime_class_init_0(EncryptedPlayerPrefs_TypeInfo);
  }
  Int_33186652 = EncryptedPlayerPrefs__GetInt_33186652((System_String_o *)StringLiteral_8097/*"IsDuelMessagePack"*/, 0, 0LL);
  if ( !this->fields.battle_info )
    goto LABEL_137;
  v54 = Int_33186652;
  EnemyDeck = BattleInfoData__getEnemyDeck(this->fields.battle_info, this->fields.wavecount, 0LL);
  if ( !this->fields.enemy_datalist )
    goto LABEL_137;
  v56 = EnemyDeck;
  System_Collections_Generic_List_XWeaponTrail_Element___Clear(
    (System_Collections_Generic_List_XWeaponTrail_Element__o *)this->fields.enemy_datalist,
    (const MethodInfo_2F260E0 *)Method_System_Collections_Generic_List_BattleServantData__Clear__);
  if ( !v56 )
    goto LABEL_137;
  svts = v56->fields.svts;
  if ( !svts )
    goto LABEL_137;
  v60 = svts->max_length;
  if ( v60 < 1 )
  {
LABEL_76:
    enemy_datalist = this->fields.enemy_datalist;
    v85 = BattleData___c_TypeInfo;
    if ( (BYTE3(BattleData___c_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0
      && !BattleData___c_TypeInfo->_2.cctor_finished )
    {
      j_il2cpp_runtime_class_init_0(BattleData___c_TypeInfo);
      v85 = BattleData___c_TypeInfo;
    }
    static_fields = v85->static_fields;
    _9__569_0 = (System_Comparison_TitleInfoControl_EventEndTimeInfo__o *)static_fields->__9__569_0;
    if ( !_9__569_0 )
    {
      if ( (BYTE3(v85->vtable._0_Equals.methodPtr) & 4) != 0 && !v85->_2.cctor_finished )
      {
        j_il2cpp_runtime_class_init_0(v85);
        static_fields = BattleData___c_TypeInfo->static_fields;
      }
      v88 = (Il2CppObject *)static_fields->__9;
      _9__569_0 = (System_Comparison_TitleInfoControl_EventEndTimeInfo__o *)sub_B170CC(
                                                                              System_Comparison_BattleServantData__TypeInfo,
                                                                              v39,
                                                                              v40,
                                                                              v57,
                                                                              v58);
      System_Comparison_TitleInfoControl_EventEndTimeInfo____ctor(
        _9__569_0,
        v88,
        Method_BattleData___c__loadSaveTurnNstage_b__569_0__,
        (const MethodInfo_25BFD48 *)Method_System_Comparison_BattleServantData___ctor__);
      v89 = BattleData___c_TypeInfo->static_fields;
      v89->__9__569_0 = (struct System_Comparison_BattleServantData__o *)_9__569_0;
      sub_B16F98(&v89->__9__569_0, _9__569_0);
    }
    if ( enemy_datalist )
    {
      System_Collections_Generic_List_TitleInfoControl_EventEndTimeInfo___Sort(
        (System_Collections_Generic_List_TitleInfoControl_EventEndTimeInfo__o *)enemy_datalist,
        (System_Comparison_T__o *)_9__569_0,
        (const MethodInfo_2F27DB4 *)Method_System_Collections_Generic_List_BattleServantData__Sort__);
      BattleData__SetEnemyCountStartValue(this, this->fields.wavecount, v90);
      BattleData__CheckMultiTargetBattle(this, 1, v91);
      if ( !v54 )
        goto LABEL_111;
      tmpEnemyData_MP = this->fields.tmpEnemyData_MP;
      if ( tmpEnemyData_MP )
      {
        if ( System_Collections_Generic_Dictionary_int__WarBoardEvalValueSquare_EvalValueSquare___get_Count(
               (System_Collections_Generic_Dictionary_int__WarBoardEvalValueSquare_EvalValueSquare__o *)tmpEnemyData_MP,
               (const MethodInfo_2DE8FB8 *)Method_System_Collections_Generic_Dictionary_int__BattleServantData_SaveData__get_Count__) < 1 )
          goto LABEL_135;
        v93 = this->fields.tmpEnemyData_MP;
        if ( v93 )
        {
          System_Collections_Generic_Dictionary_int__WarBoardEvalValueSquare_CalcEval___GetEnumerator(
            &v134,
            (System_Collections_Generic_Dictionary_int__WarBoardEvalValueSquare_CalcEval__o *)v93,
            (const MethodInfo_2DE99A0 *)Method_System_Collections_Generic_Dictionary_int__BattleServantData_SaveData__GetEnumerator__);
          v138 = v134;
          while ( System_Collections_Generic_Dictionary_Enumerator_int__WarBoardEvalValueSquare_CalcEval___MoveNext(
                    &v138,
                    (const MethodInfo_272863C *)Method_System_Collections_Generic_Dictionary_Enumerator_int__BattleServantData_SaveData__MoveNext__) )
          {
            key = (int)v138.fields.current.fields.key;
            v99 = v138.fields.current.fields.value;
            v100 = (BattleServantData_o *)sub_B170CC(BattleServantData_TypeInfo, v94, v95, v96, v97);
            BattleServantData___ctor(v100, 0LL);
            if ( !v100 )
              sub_B170D4();
            BattleServantData__setTestSaveData(v100, (BattleServantData_SaveData_o *)v99, 0LL);
            SummonEnemyServantData = BattleData__createSummonEnemyServantData(
                                       this,
                                       v100->fields.uniqueId,
                                       key + 1,
                                       v100->fields.summonNpcId,
                                       (BattleServantData_SaveData_o *)v99,
                                       this,
                                       v101);
            if ( !SummonEnemyServantData )
              sub_B170D4();
            if ( SummonEnemyServantData->fields.isDeadAnime )
            {
              if ( SummonEnemyServantData->fields.isLeader )
                this->fields.leaderDown = 1;
            }
            else
            {
              e_entryid = this->fields.e_entryid;
              if ( !e_entryid )
LABEL_103:
                sub_B170D4();
              v106 = 0LL;
              while ( 1 )
              {
                v107 = e_entryid->max_length;
                if ( (__int64)v106 >= (int)v107 )
                  break;
                if ( v106 >= v107 )
                {
                  sub_B17100(SummonEnemyServantData, v103, v104);
                  sub_B170A0();
                }
                if ( e_entryid->m_Items[v106 + 1] == SummonEnemyServantData->fields.uniqueId )
                {
                  SummonEnemyServantData->fields.isAddition = 0;
                  e_entryid = this->fields.e_entryid;
                }
                ++v106;
                if ( !e_entryid )
                  goto LABEL_103;
              }
            }
          }
          v135[0] = 1102;
          v136 = 1;
          System_Collections_Generic_Dictionary_Enumerator_int__WarBoardEvalValueSquare_CalcEval___Dispose(
            &v138,
            (const MethodInfo_27287A8 *)Method_System_Collections_Generic_Dictionary_Enumerator_int__BattleServantData_SaveData__Dispose__);
          v136 = 0;
          goto LABEL_135;
        }
      }
    }
    goto LABEL_137;
  }
  v61 = 0;
  while ( 1 )
  {
    if ( v61 >= v60 )
      goto LABEL_105;
    v62 = svts->m_Items[v61];
    if ( !v62 )
      goto LABEL_137;
    v140[0] = v62->fields.id - 1;
    v63 = (BattleServantData_o *)sub_B170CC(BattleServantData_TypeInfo, v39, v40, v57, v58);
    BattleServantData___ctor(v63, 0LL);
    if ( !v63 )
      goto LABEL_137;
    BattleServantData__setEnemy(v63, 0LL);
    value = 0LL;
    if ( !v54 )
      break;
    v64 = this->fields.tmpEnemyData_MP;
    if ( !v64 )
      goto LABEL_137;
    System_Collections_Generic_Dictionary_int__WarBoardEvalValueSquare_CalcEval___TryGetValue(
      (System_Collections_Generic_Dictionary_int__WarBoardEvalValueSquare_CalcEval__o *)v64,
      v140[0],
      &value,
      (const MethodInfo_2DEB0E0 *)Method_System_Collections_Generic_Dictionary_int__BattleServantData_SaveData__TryGetValue__);
    SaveDataFromJson = (BattleServantData_SaveData_o *)value;
LABEL_53:
    BattleServantData__setServantData_22718064(v63, v62, this->fields.battle_ent, 0, SaveDataFromJson, this, 0LL, 0LL);
    if ( v63->fields.isDeadAnime && !(isDeadWait = BattleServantData__isDeadWait(v63, 0LL)) )
    {
      if ( v63->fields.isLeader )
        this->fields.leaderDown = 1;
    }
    else
    {
      v74 = this->fields.e_entryid;
      if ( !v74 )
        goto LABEL_137;
      v75 = 0LL;
      while ( 1 )
      {
        v76 = v74->max_length;
        if ( (__int64)v75 >= (int)v76 )
          break;
        if ( v75 >= v76 )
          goto LABEL_105;
        if ( v74->m_Items[v75 + 1] == v63->fields.uniqueId )
        {
          v63->fields.isAddition = 0;
          v74 = this->fields.e_entryid;
        }
        ++v75;
        if ( !v74 )
          goto LABEL_137;
      }
    }
    if ( v54 )
    {
      v77 = this->fields.tmpEnemyData_MP;
      if ( !v77 )
        goto LABEL_137;
      if ( System_Collections_Generic_Dictionary_int__WarBoardAIRoute_RouteData___ContainsKey(
             (System_Collections_Generic_Dictionary_int__WarBoardAIRoute_RouteData__o *)v77,
             v140[0],
             (const MethodInfo_2DE9630 *)Method_System_Collections_Generic_Dictionary_int__BattleServantData_SaveData__ContainsKey__) )
      {
        v78 = this->fields.tmpEnemyData_MP;
        if ( !v78 )
          goto LABEL_137;
        System_Collections_Generic_Dictionary_int__WarBoardAIRoute_PiecePersonality___Remove(
          (System_Collections_Generic_Dictionary_int__WarBoardAIRoute_PiecePersonality__o *)v78,
          v140[0],
          (const MethodInfo_2DEAD98 *)Method_System_Collections_Generic_Dictionary_int__BattleServantData_SaveData__Remove__);
      }
    }
    else
    {
      tmpEnemyData = this->fields.tmpEnemyData;
      v80 = System_Int32__ToString((int32_t)v140, 0LL);
      if ( !tmpEnemyData )
        goto LABEL_137;
      if ( System_Collections_Generic_Dictionary_XmlQualifiedName__XmlSchemaObject___ContainsKey(
             (System_Collections_Generic_Dictionary_XmlQualifiedName__XmlSchemaObject__o *)tmpEnemyData,
             (System_Xml_XmlQualifiedName_o *)v80,
             (const MethodInfo_2DA3E8C *)Method_System_Collections_Generic_Dictionary_string__object__ContainsKey__) )
      {
        v81 = this->fields.tmpEnemyData;
        v82 = System_Int32__ToString((int32_t)v140, 0LL);
        if ( !v81 )
          goto LABEL_137;
        System_Collections_Generic_Dictionary_XmlQualifiedName__XmlSchemaObject___Remove(
          (System_Collections_Generic_Dictionary_XmlQualifiedName__XmlSchemaObject__o *)v81,
          (System_Xml_XmlQualifiedName_o *)v82,
          (const MethodInfo_2DA5684 *)Method_System_Collections_Generic_Dictionary_string__object__Remove__);
      }
    }
    v83 = this->fields.enemy_datalist;
    if ( !v83 )
      goto LABEL_137;
    System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData___Add(
      (System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData__o *)v83,
      (EventMissionProgressRequest_Argument_ProgressData_o *)v63,
      (const MethodInfo_2F25CD8 *)Method_System_Collections_Generic_List_BattleServantData__Add__);
    v60 = svts->max_length;
    if ( (int)++v61 >= v60 )
      goto LABEL_76;
  }
  v66 = this->fields.tmpEnemyData;
  v67 = System_Int32__ToString((int32_t)v140, 0LL);
  if ( !v66 )
    goto LABEL_137;
  if ( !System_Collections_Generic_Dictionary_XmlQualifiedName__XmlSchemaObject___ContainsKey(
          (System_Collections_Generic_Dictionary_XmlQualifiedName__XmlSchemaObject__o *)v66,
          (System_Xml_XmlQualifiedName_o *)v67,
          (const MethodInfo_2DA3E8C *)Method_System_Collections_Generic_Dictionary_string__object__ContainsKey__) )
  {
    v72 = System_Int32__ToString((int32_t)v140, 0LL);
    v73 = System_String__Concat_43743732((System_String_o *)StringLiteral_18014/*"e_svlist"*/, v72, 0LL);
    if ( (BYTE3(EncryptedPlayerPrefs_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0
      && !EncryptedPlayerPrefs_TypeInfo->_2.cctor_finished )
    {
      j_il2cpp_runtime_class_init_0(EncryptedPlayerPrefs_TypeInfo);
    }
    String = EncryptedPlayerPrefs__GetString(v73, 0LL);
LABEL_52:
    SaveDataFromJson = BattleServantData__GetSaveDataFromJson(v63, String, 0LL);
    value = (WarBoardEvalValueSquare_CalcEval_o *)SaveDataFromJson;
    goto LABEL_53;
  }
  v68 = this->fields.tmpEnemyData;
  v69 = (System_Type_o *)System_Int32__ToString((int32_t)v140, 0LL);
  if ( !v68 )
    goto LABEL_137;
  Item = System_Collections_Generic_Dictionary_Type__IStoreExtension___get_Item(
           (System_Collections_Generic_Dictionary_Type__IStoreExtension__o *)v68,
           v69,
           (const MethodInfo_2DA3B54 *)Method_System_Collections_Generic_Dictionary_string__object__get_Item__);
  String = (System_String_o *)Item;
  if ( !Item || (System_String_c *)Item->klass == string_TypeInfo )
    goto LABEL_52;
  v108 = (void *)sub_B173C8(Item);
  if ( v109 != 1 )
    goto LABEL_144;
  v110 = *(_QWORD *)__cxa_begin_catch(v108);
  __cxa_end_catch();
  System_Collections_Generic_Dictionary_Enumerator_int__WarBoardEvalValueSquare_CalcEval___Dispose(
    &v138,
    (const MethodInfo_27287A8 *)Method_System_Collections_Generic_Dictionary_Enumerator_int__BattleServantData_SaveData__Dispose__);
  if ( v110 )
    goto LABEL_143;
LABEL_111:
  v111 = this->fields.tmpEnemyData;
  if ( !v111 )
    goto LABEL_137;
  if ( System_Collections_Generic_Dictionary_XmlQualifiedName__XmlSchemaObject___get_Count(
         (System_Collections_Generic_Dictionary_XmlQualifiedName__XmlSchemaObject__o *)v111,
         (const MethodInfo_2DA3814 *)Method_System_Collections_Generic_Dictionary_string__object__get_Count__) < 1 )
    goto LABEL_135;
  v112 = this->fields.tmpEnemyData;
  if ( !v112 )
    goto LABEL_137;
  System_Collections_Generic_Dictionary_XmlQualifiedName__SchemaElementDecl___GetEnumerator(
    &v134,
    (System_Collections_Generic_Dictionary_XmlQualifiedName__SchemaElementDecl__o *)v112,
    (const MethodInfo_2DA41F4 *)Method_System_Collections_Generic_Dictionary_string__object__GetEnumerator__);
  v137 = v134;
  while ( 1 )
  {
    if ( !System_Collections_Generic_Dictionary_Enumerator_XmlQualifiedName__SchemaElementDecl___MoveNext(
            (System_Collections_Generic_Dictionary_Enumerator_XmlQualifiedName__SchemaElementDecl__o *)&v137,
            (const MethodInfo_26BCF58 *)Method_System_Collections_Generic_Dictionary_Enumerator_string__object__MoveNext__) )
    {
      v135[0] = 1102;
      LODWORD(v129) = ++v136;
      System_Collections_Generic_Dictionary_Enumerator_XmlQualifiedName__SchemaElementDecl___Dispose(
        (System_Collections_Generic_Dictionary_Enumerator_XmlQualifiedName__SchemaElementDecl__o *)&v137,
        (const MethodInfo_26BD0C0 *)Method_System_Collections_Generic_Dictionary_Enumerator_string__object__Dispose__);
      goto LABEL_132;
    }
    v117 = v137.fields.current.fields.key;
    v118 = (System_String_o *)v137.fields.current.fields.value;
    v119 = (BattleServantData_o *)sub_B170CC(BattleServantData_TypeInfo, v113, v114, v115, v116);
    BattleServantData___ctor(v119, 0LL);
    if ( !v119 )
      sub_B170D4();
    if ( v118 && v118->klass != string_TypeInfo )
      break;
    v120 = BattleServantData__GetSaveDataFromJson(v119, v118, 0LL);
    BattleServantData__setTestSaveData(v119, v120, 0LL);
    v121 = System_Int32__Parse((System_String_o *)v117, 0LL);
    v123 = BattleData__createSummonEnemyServantData(
             this,
             v119->fields.uniqueId,
             v121 + 1,
             v119->fields.summonNpcId,
             v120,
             this,
             v122);
    if ( !v123 )
      sub_B170D4();
    if ( v123->fields.isDeadAnime )
    {
      if ( v123->fields.isLeader )
        this->fields.leaderDown = 1;
    }
    else
    {
      v126 = this->fields.e_entryid;
      if ( !v126 )
LABEL_130:
        sub_B170D4();
      v127 = 0LL;
      while ( 1 )
      {
        v128 = v126->max_length;
        if ( (__int64)v127 >= (int)v128 )
          break;
        if ( v127 >= v128 )
        {
          sub_B17100(v123, v124, v125);
          sub_B170A0();
        }
        if ( v126->m_Items[v127 + 1] == v123->fields.uniqueId )
        {
          v123->fields.isAddition = 0;
          v126 = this->fields.e_entryid;
        }
        ++v127;
        if ( !v126 )
          goto LABEL_130;
      }
    }
  }
  v108 = (void *)sub_B173C8(v118);
  if ( v133 != 1 )
LABEL_144:
    _Unwind_Resume(v108);
  v129 = *(_QWORD *)__cxa_begin_catch(v108);
  __cxa_end_catch();
  System_Collections_Generic_Dictionary_Enumerator_XmlQualifiedName__SchemaElementDecl___Dispose(
    (System_Collections_Generic_Dictionary_Enumerator_XmlQualifiedName__SchemaElementDecl__o *)&v137,
    (const MethodInfo_26BD0C0 *)Method_System_Collections_Generic_Dictionary_Enumerator_string__object__Dispose__);
  if ( v129 )
LABEL_143:
    sub_B170A0();
LABEL_132:
  if ( (_DWORD)v129 && v135[(int)v129 - 1] == 1102 )
    v136 = v129 - 1;
LABEL_135:
  tmpMaxTurnDamage = this->fields.tmpMaxTurnDamage;
  tmpFirstNpPlayList = this->fields.tmpFirstNpPlayList;
  this->fields.enemyMasterCommandSpellUseCnt = this->fields.tmpEnemySpellCntSave;
  this->fields.maxTurnDamageInBattle = tmpMaxTurnDamage;
  this->fields.firstNpPlayList = tmpFirstNpPlayList;
  sub_B16F98(&this->fields.firstNpPlayList, tmpFirstNpPlayList);
  playerServantNoblePhantasmUsageData = this->fields.playerServantNoblePhantasmUsageData;
  if ( !playerServantNoblePhantasmUsageData )
LABEL_137:
    sub_B170D4();
  PlayerServantNoblePhantasmUsageData__SetSaveData(
    playerServantNoblePhantasmUsageData,
    this->fields.tempBattleServantNoblePhantasmUsageDataSaveData,
    0LL);
}


void __fastcall BattleData__loadSkipDead(BattleData_o *this, const MethodInfo *method)
{
  __int64 v3; // x1
  BattleData_c *v4; // x0
  System_String_o *SkipDeadKey; // x20
  BattleData_c *v6; // x0
  System_String_o *v7; // x20

  if ( (byte_40F6A71 & 1) == 0 )
  {
    sub_B16FFC(&BattleData_TypeInfo, method);
    sub_B16FFC(&EncryptedPlayerPrefs_TypeInfo, v3);
    byte_40F6A71 = 1;
  }
  this->fields.systemflg_skipDead = 0;
  v4 = BattleData_TypeInfo;
  if ( (BYTE3(BattleData_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0 && !BattleData_TypeInfo->_2.cctor_finished )
  {
    j_il2cpp_runtime_class_init_0(BattleData_TypeInfo);
    v4 = BattleData_TypeInfo;
  }
  SkipDeadKey = v4->static_fields->SkipDeadKey;
  if ( (BYTE3(EncryptedPlayerPrefs_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0
    && !EncryptedPlayerPrefs_TypeInfo->_2.cctor_finished )
  {
    j_il2cpp_runtime_class_init_0(EncryptedPlayerPrefs_TypeInfo);
  }
  if ( EncryptedPlayerPrefs__HasKey(SkipDeadKey, 0LL) )
  {
    v6 = BattleData_TypeInfo;
    if ( (BYTE3(BattleData_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0 && !BattleData_TypeInfo->_2.cctor_finished )
    {
      j_il2cpp_runtime_class_init_0(BattleData_TypeInfo);
      v6 = BattleData_TypeInfo;
    }
    v7 = v6->static_fields->SkipDeadKey;
    if ( (BYTE3(EncryptedPlayerPrefs_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0
      && !EncryptedPlayerPrefs_TypeInfo->_2.cctor_finished )
    {
      j_il2cpp_runtime_class_init_0(EncryptedPlayerPrefs_TypeInfo);
    }
    if ( EncryptedPlayerPrefs__GetInt(v7, 0LL) == 1 )
      this->fields.systemflg_skipDead = 1;
  }
}


void __fastcall BattleData__loadSkipSkillConf(BattleData_o *this, const MethodInfo *method)
{
  __int64 v3; // x1
  BattleData_c *v4; // x0
  System_String_o *skipKey; // x20
  BattleData_c *v6; // x0
  System_String_o *v7; // x20

  if ( (byte_40F6A6A & 1) == 0 )
  {
    sub_B16FFC(&BattleData_TypeInfo, method);
    sub_B16FFC(&EncryptedPlayerPrefs_TypeInfo, v3);
    byte_40F6A6A = 1;
  }
  this->fields.systemflg_skipskillconf = 0;
  v4 = BattleData_TypeInfo;
  if ( (BYTE3(BattleData_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0 && !BattleData_TypeInfo->_2.cctor_finished )
  {
    j_il2cpp_runtime_class_init_0(BattleData_TypeInfo);
    v4 = BattleData_TypeInfo;
  }
  skipKey = v4->static_fields->skipKey;
  if ( (BYTE3(EncryptedPlayerPrefs_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0
    && !EncryptedPlayerPrefs_TypeInfo->_2.cctor_finished )
  {
    j_il2cpp_runtime_class_init_0(EncryptedPlayerPrefs_TypeInfo);
  }
  if ( EncryptedPlayerPrefs__HasKey(skipKey, 0LL) )
  {
    v6 = BattleData_TypeInfo;
    if ( (BYTE3(BattleData_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0 && !BattleData_TypeInfo->_2.cctor_finished )
    {
      j_il2cpp_runtime_class_init_0(BattleData_TypeInfo);
      v6 = BattleData_TypeInfo;
    }
    v7 = v6->static_fields->skipKey;
    if ( (BYTE3(EncryptedPlayerPrefs_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0
      && !EncryptedPlayerPrefs_TypeInfo->_2.cctor_finished )
    {
      j_il2cpp_runtime_class_init_0(EncryptedPlayerPrefs_TypeInfo);
    }
    if ( EncryptedPlayerPrefs__GetInt(v7, 0LL) == 1 )
      this->fields.systemflg_skipskillconf = 1;
  }
}


void __fastcall BattleData__loadStageData(BattleData_o *this, const MethodInfo *method)
{
  __int64 v3; // x1
  __int64 v4; // x1
  __int64 v5; // x1
  __int64 v6; // x1
  __int64 v7; // x1
  __int64 v8; // x1
  __int64 v9; // x1
  __int64 v10; // x1
  struct BattleData_o *data; // x8
  BattleEntity_o *battle_ent; // x0
  StageEntity_o *StageEntityAtWave; // x0
  StageEntity_o *v14; // x20
  int32_t ShowTurnState; // w0
  int32_t limitTurnCount; // w1
  struct System_Int32_array *TurnEffect; // x0
  bool TurnElapsedEndBattleFlag; // w0
  System_Collections_Generic_IEnumerable_TSource__o *v19; // x0
  struct System_Boolean_array *v20; // x0
  struct System_Boolean_array **p_enemyAppearValid; // x21
  System_Int32_array *NoEntryIds; // x0
  __int64 v23; // x1
  __int64 v24; // x2
  int max_length; // w9
  unsigned int v26; // w8
  struct System_Boolean_array *v27; // x9
  int v28; // w10
  struct System_Int32_array *EnemyAddOrderPosArray; // x0
  System_Object_array *FieldAis; // x0
  __int64 v31; // x2
  System_Object_array *v32; // x21
  struct BattleFieldData_array *v33; // x0
  __int64 v34; // x3
  __int64 v35; // x4
  __int64 v36; // x8
  unsigned __int64 v37; // x23
  __int64 v38; // x27
  struct BattleFieldData_array *field_datalist; // x20
  Il2CppObject *v40; // x25
  BattleFieldData_o *v41; // x24
  struct BattleFieldData_array *v42; // x0
  int32_t EnemyMasterBattleId; // w0
  struct EnemyMstBattleEntity_o *enemyMasterInfo; // x8
  int32_t v45; // w22
  WebViewManager_o *Instance; // x0
  DataMasterBase_WarMaster__WarEntity__int__o *MasterData_WarQuestSelectionMaster; // x0
  WebViewManager_o *v48; // x0
  UserQuestRecordMaster_o *v49; // x21
  int64_t UserId; // x0
  struct QuestEntity_o *quest_ent; // x8
  int64_t MaxTurnDamage; // x0
  struct BaseBattleEvent_o *battleEvent; // x8
  StageEntity_o *v54; // [xsp+8h] [xbp-58h]

  if ( (byte_40F6AA4 & 1) == 0 )
  {
    sub_B16FFC(&BattleFieldData___TypeInfo, method);
    sub_B16FFC(&BattleFieldData_TypeInfo, v3);
    sub_B16FFC(&Method_DataManager_GetMasterData_EnemyMstBattleMaster___, v4);
    sub_B16FFC(&Method_DataManager_GetMasterData_UserQuestRecordMaster___, v5);
    sub_B16FFC(&Method_DataMasterBase_EnemyMstBattleMaster__EnemyMstBattleEntity__int__TryGetEntity__, v6);
    sub_B16FFC(&Method_System_Linq_Enumerable_Repeat_bool___, v7);
    sub_B16FFC(&Method_System_Linq_Enumerable_ToArray_bool___, v8);
    sub_B16FFC(&NetworkManager_TypeInfo, v9);
    sub_B16FFC(&Method_SingletonMonoBehaviour_DataManager__get_Instance__, v10);
    byte_40F6AA4 = 1;
  }
  data = this->fields.data;
  if ( !data )
    goto LABEL_38;
  battle_ent = this->fields.battle_ent;
  if ( !battle_ent )
    goto LABEL_38;
  StageEntityAtWave = BattleEntity__GetStageEntityAtWave(battle_ent, data->fields.wavecount, 0LL);
  if ( !StageEntityAtWave )
    goto LABEL_38;
  v14 = StageEntityAtWave;
  this->fields._EnemyFieldPosCount_k__BackingField = StageEntity__GetEnemyFieldPosCount(StageEntityAtWave, 0LL);
  this->fields.limitTurnCount = StageEntity__getLimitTurn(v14, 0LL);
  this->fields.limitAct = StageEntity__getLimitAct(v14, 0LL);
  ShowTurnState = StageEntity__getShowTurnState(v14, 0LL);
  limitTurnCount = this->fields.limitTurnCount;
  this->fields.stateshowturn = ShowTurnState;
  TurnEffect = StageEntity__getTurnEffect(v14, limitTurnCount, 0LL);
  this->fields.turnEffect = TurnEffect;
  sub_B16F98(&this->fields.turnEffect, TurnEffect);
  this->fields.turnEffectType = StageEntity__getTurnEffectType(v14, 0LL);
  TurnElapsedEndBattleFlag = StageEntity__getTurnElapsedEndBattleFlag(v14, 0LL);
  this->fields.isTurnElapsedEndBattle = 0;
  this->fields.turnElapsedEndBattleFlag = TurnElapsedEndBattleFlag;
  v19 = (System_Collections_Generic_IEnumerable_TSource__o *)System_Linq_Enumerable__Repeat_bool_(
                                                               1,
                                                               this->fields._EnemyFieldPosCount_k__BackingField,
                                                               (const MethodInfo_19BDC5C *)Method_System_Linq_Enumerable_Repeat_bool___);
  v20 = System_Linq_Enumerable__ToArray_bool_(
          v19,
          (const MethodInfo_19C4884 *)Method_System_Linq_Enumerable_ToArray_bool___);
  p_enemyAppearValid = &this->fields.enemyAppearValid;
  this->fields.enemyAppearValid = v20;
  sub_B16F98(&this->fields.enemyAppearValid, v20);
  NoEntryIds = StageEntity__getNoEntryIds(v14, 0LL);
  if ( !NoEntryIds )
    goto LABEL_38;
  max_length = NoEntryIds->max_length;
  if ( max_length >= 1 )
  {
    v26 = 0;
    while ( v26 < max_length )
    {
      v27 = *p_enemyAppearValid;
      if ( !*p_enemyAppearValid )
        goto LABEL_38;
      v28 = NoEntryIds->m_Items[v26 + 1] - 1;
      if ( v28 >= v27->max_length )
        break;
      v27->m_Items[v28 + 4] = 0;
      max_length = NoEntryIds->max_length;
      if ( (int)++v26 >= max_length )
        goto LABEL_13;
    }
LABEL_37:
    sub_B17100(NoEntryIds, v23, v24);
    sub_B170A0();
  }
LABEL_13:
  EnemyAddOrderPosArray = StageEntity__GetEnemyAddOrderPosArray(
                            v14,
                            this->fields._EnemyFieldPosCount_k__BackingField,
                            0LL);
  this->fields._EnemyAddOrderPosArray_k__BackingField = EnemyAddOrderPosArray;
  sub_B16F98(&this->fields._EnemyAddOrderPosArray_k__BackingField, EnemyAddOrderPosArray);
  this->fields._EnemyEntryMaxCountEachTurn_k__BackingField = StageEntity__GetEnemyEntryMaxCountEachTurn(v14, -1, 0LL);
  v54 = v14;
  FieldAis = StageEntity__getFieldAis(v14, 0LL);
  if ( FieldAis )
  {
    v32 = FieldAis;
    v33 = (struct BattleFieldData_array *)sub_B17014(BattleFieldData___TypeInfo, FieldAis->max_length, v31);
    this->fields.field_datalist = v33;
    NoEntryIds = (System_Int32_array *)sub_B16F98(&this->fields.field_datalist, v33);
    v36 = *(_QWORD *)&v32->max_length;
    if ( (int)v36 >= 1 )
    {
      v37 = 0LL;
      v38 = 32LL;
      while ( v37 < (unsigned int)v36 )
      {
        field_datalist = this->fields.field_datalist;
        v40 = v32->m_Items[v37];
        v41 = (BattleFieldData_o *)sub_B170CC(BattleFieldData_TypeInfo, v23, v24, v34, v35);
        BattleFieldData___ctor_23083972(v41, v37, v40, 0LL);
        if ( !field_datalist )
          goto LABEL_38;
        if ( v41 )
        {
          NoEntryIds = (System_Int32_array *)sub_B170BC(v41, field_datalist->obj.klass->_1.element_class);
          if ( !NoEntryIds )
          {
            sub_B170F4();
            sub_B170A0();
          }
        }
        if ( v37 >= field_datalist->max_length )
          break;
        field_datalist->m_Items[v37] = v41;
        NoEntryIds = (System_Int32_array *)sub_B16F98((char *)field_datalist + v38, v41);
        LODWORD(v36) = v32->max_length;
        ++v37;
        v38 += 8LL;
        if ( (__int64)v37 >= (int)v36 )
          goto LABEL_24;
      }
      goto LABEL_37;
    }
  }
  else
  {
    v42 = (struct BattleFieldData_array *)sub_B17014(BattleFieldData___TypeInfo, 0LL, v31);
    this->fields.field_datalist = v42;
    sub_B16F98(&this->fields.field_datalist, v42);
  }
LABEL_24:
  this->fields.enemyActCount = StageEntity__getEnemyActCount(v54, 0LL);
  EnemyMasterBattleId = StageEntity__getEnemyMasterBattleId(v54, 0LL);
  enemyMasterInfo = this->fields.enemyMasterInfo;
  v45 = EnemyMasterBattleId;
  if ( !enemyMasterInfo || EnemyMasterBattleId != enemyMasterInfo->fields.id )
    this->fields.enemyMasterCommandSpellUseCnt = 0;
  this->fields.enemyMasterInfo = 0LL;
  sub_B16F98(&this->fields.enemyMasterInfo, 0LL);
  Instance = SingletonMonoBehaviour_WebViewManager___get_Instance((const MethodInfo_2A54F38 *)Method_SingletonMonoBehaviour_DataManager__get_Instance__);
  if ( !Instance )
    goto LABEL_38;
  MasterData_WarQuestSelectionMaster = (DataMasterBase_WarMaster__WarEntity__int__o *)DataManager__GetMasterData_WarQuestSelectionMaster_(
                                                                                        (DataManager_o *)Instance,
                                                                                        (const MethodInfo_18C3284 *)Method_DataManager_GetMasterData_EnemyMstBattleMaster___);
  if ( !MasterData_WarQuestSelectionMaster )
    goto LABEL_38;
  DataMasterBase_WarMaster__WarEntity__int___TryGetEntity(
    MasterData_WarQuestSelectionMaster,
    (WarEntity_o **)&this->fields.enemyMasterInfo,
    v45,
    (const MethodInfo_266F3E4 *)Method_DataMasterBase_EnemyMstBattleMaster__EnemyMstBattleEntity__int__TryGetEntity__);
  this->fields._IsReleaseUnusedAssetsWhenEntryMember_k__BackingField = StageEntity__IsReleaseUnusedAssetsWhenEntryMember(
                                                                         v54,
                                                                         0LL);
  v48 = SingletonMonoBehaviour_WebViewManager___get_Instance((const MethodInfo_2A54F38 *)Method_SingletonMonoBehaviour_DataManager__get_Instance__);
  if ( !v48 )
    goto LABEL_38;
  v49 = (UserQuestRecordMaster_o *)DataManager__GetMasterData_WarQuestSelectionMaster_(
                                     (DataManager_o *)v48,
                                     (const MethodInfo_18C3284 *)Method_DataManager_GetMasterData_UserQuestRecordMaster___);
  if ( (BYTE3(NetworkManager_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0
    && !NetworkManager_TypeInfo->_2.cctor_finished )
  {
    j_il2cpp_runtime_class_init_0(NetworkManager_TypeInfo);
  }
  UserId = NetworkManager__get_UserId(0LL);
  quest_ent = this->fields.quest_ent;
  if ( !quest_ent
    || !v49
    || (MaxTurnDamage = UserQuestRecordMaster__GetMaxTurnDamage(v49, UserId, quest_ent->fields.id, 0LL),
        battleEvent = this->fields.battleEvent,
        this->fields.maxTurnDamageRecord = MaxTurnDamage,
        !battleEvent) )
  {
LABEL_38:
    sub_B170D4();
  }
  ((void (__fastcall *)(struct BaseBattleEvent_o *, StageEntity_o *, Il2CppMethodPointer))battleEvent->klass->vtable._9_InitStageData.method)(
    battleEvent,
    v54,
    battleEvent->klass->vtable._10_SetServantDataBeforePassiveAdded.methodPtr);
}


void __fastcall BattleData__loadTdConstantVelocity(BattleData_o *this, const MethodInfo *method)
{
  __int64 v3; // x1
  BattleData_c *v4; // x0
  System_String_o *TdCvKey; // x20
  BattleData_c *v6; // x0
  System_String_o *v7; // x20

  if ( (byte_40F6A6E & 1) == 0 )
  {
    sub_B16FFC(&BattleData_TypeInfo, method);
    sub_B16FFC(&EncryptedPlayerPrefs_TypeInfo, v3);
    byte_40F6A6E = 1;
  }
  this->fields.systemflg_TdConstantvelocity = 0;
  v4 = BattleData_TypeInfo;
  if ( (BYTE3(BattleData_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0 && !BattleData_TypeInfo->_2.cctor_finished )
  {
    j_il2cpp_runtime_class_init_0(BattleData_TypeInfo);
    v4 = BattleData_TypeInfo;
  }
  TdCvKey = v4->static_fields->TdCvKey;
  if ( (BYTE3(EncryptedPlayerPrefs_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0
    && !EncryptedPlayerPrefs_TypeInfo->_2.cctor_finished )
  {
    j_il2cpp_runtime_class_init_0(EncryptedPlayerPrefs_TypeInfo);
  }
  if ( EncryptedPlayerPrefs__HasKey(TdCvKey, 0LL) )
  {
    v6 = BattleData_TypeInfo;
    if ( (BYTE3(BattleData_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0 && !BattleData_TypeInfo->_2.cctor_finished )
    {
      j_il2cpp_runtime_class_init_0(BattleData_TypeInfo);
      v6 = BattleData_TypeInfo;
    }
    v7 = v6->static_fields->TdCvKey;
    if ( (BYTE3(EncryptedPlayerPrefs_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0
      && !EncryptedPlayerPrefs_TypeInfo->_2.cctor_finished )
    {
      j_il2cpp_runtime_class_init_0(EncryptedPlayerPrefs_TypeInfo);
    }
    if ( EncryptedPlayerPrefs__GetInt(v7, 0LL) == 1 )
      this->fields.systemflg_TdConstantvelocity = 1;
  }
}


void __fastcall BattleData__lossCriticalPoint(BattleData_o *this, int32_t count, const MethodInfo *method)
{
  int32_t criticalstars; // w8
  int32_t totalCriticalStars; // w9

  criticalstars = this->fields.criticalstars;
  totalCriticalStars = this->fields.totalCriticalStars;
  this->fields.prevCriticalstars = criticalstars;
  this->fields.criticalstars = criticalstars - count;
  this->fields.totalCriticalStars = (totalCriticalStars - count) & ~((totalCriticalStars - count) >> 31);
  if ( ((criticalstars - count) & 0x80000000) != 0 )
  {
    this->fields.subCriticalCount = UnityEngine_Mathf__Abs_40727336(criticalstars - count, 0LL);
    this->fields.criticalstars = 0;
  }
}


void __fastcall BattleData__offProgressflg(BattleData_o *this, int32_t instate, const MethodInfo *method)
{
  this->fields.progresslistflg &= ~instate;
}


void __fastcall BattleData__onProgressflg(BattleData_o *this, int32_t instate, const MethodInfo *method)
{
  this->fields.progresslistflg |= instate;
}


// local variable allocation has failed, the output may be wrong!
void __fastcall BattleData__procPlayerContinue(BattleData_o *this, bool isProgress, const MethodInfo *method)
{
  BattleData_o *v4; // x19
  __int64 v5; // x1
  struct System_Collections_Generic_List_BattleServantData__o *player_datalist; // x23
  int size; // w21
  int v8; // w22
  BattleServantData_o *v9; // x8
  struct BattleData_o *data; // x8
  unsigned __int64 v11; // x22
  struct System_Int32_array *p_entryid; // x8
  __int64 v13; // x24
  struct System_Collections_Generic_List_BattleServantData__o *v14; // x25
  BattleServantData_o *v15; // x8
  struct BattleData_o *v16; // x9
  struct System_Int32_array *v17; // x9
  __int64 v18; // x22
  struct System_Collections_Generic_List_BattleServantData__o *v19; // x23
  BattleServantData_o *v20; // x0
  BattleLogic_o *logic; // x0
  const MethodInfo *v22; // x1
  BattleData_o *v23; // x0
  const MethodInfo *v24; // x1
  BattleData_o *v25; // x0
  int32_t turnCount; // w8
  BattleLogic_o *v27; // x0
  const MethodInfo *v28; // x1
  const MethodInfo *v29; // x1
  BattleDefenceTargetData_o *defenceTargetData; // x0
  int maxHp; // w8

  v4 = this;
  if ( (byte_40F6A13 & 1) == 0 )
  {
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleServantData__get_Count__, isProgress);
    this = (BattleData_o *)sub_B16FFC(&Method_System_Collections_Generic_List_BattleServantData__get_Item__, v5);
    byte_40F6A13 = 1;
  }
  player_datalist = v4->fields.player_datalist;
  if ( !player_datalist )
    goto LABEL_47;
  size = player_datalist->fields._size;
  if ( size >= 1 )
  {
    v8 = 0;
    while ( 1 )
    {
      if ( player_datalist->fields._size <= (unsigned int)v8 )
        System_ThrowHelper__ThrowArgumentOutOfRangeException_41329284(0LL);
      v9 = player_datalist->fields._items->m_Items[v8];
      if ( !v9 )
        goto LABEL_47;
      ++v8;
      v9->fields.isEntry = 0;
      if ( v8 >= size )
        break;
      player_datalist = v4->fields.player_datalist;
      if ( !player_datalist )
        goto LABEL_47;
    }
  }
  data = v4->fields.data;
  if ( !data )
    goto LABEL_47;
  v11 = 0LL;
  while ( 1 )
  {
    p_entryid = data->fields.p_entryid;
    if ( !p_entryid )
      goto LABEL_47;
    if ( (__int64)v11 >= (int)p_entryid->max_length )
      break;
    if ( size >= 1 )
    {
      v13 = 0LL;
      do
      {
        v14 = v4->fields.player_datalist;
        if ( !v14 )
          goto LABEL_47;
        if ( v14->fields._size <= (unsigned int)v13 )
          System_ThrowHelper__ThrowArgumentOutOfRangeException_41329284(0LL);
        v15 = v14->fields._items->m_Items[v13];
        if ( !v15 )
          goto LABEL_47;
        if ( v11 == v15->fields.index )
        {
          v16 = v4->fields.data;
          if ( !v16 )
            goto LABEL_47;
          v17 = v16->fields.p_entryid;
          if ( !v17 )
            goto LABEL_47;
          if ( v11 >= v17->max_length )
          {
            sub_B17100(this, isProgress, method);
            sub_B170A0();
          }
          v17->m_Items[v11 + 1] = v15->fields.uniqueId;
          v15->fields.isEntry = 1;
        }
      }
      while ( (int)++v13 < size );
    }
    data = v4->fields.data;
    ++v11;
    if ( !data )
      goto LABEL_47;
  }
  if ( size >= 1 )
  {
    v18 = 0LL;
    while ( 1 )
    {
      v19 = v4->fields.player_datalist;
      if ( !v19 )
        break;
      if ( v19->fields._size <= (unsigned int)v18 )
        System_ThrowHelper__ThrowArgumentOutOfRangeException_41329284(0LL);
      v20 = v19->fields._items->m_Items[v18];
      if ( !v20 )
        break;
      BattleServantData__setContinue(v20, v4, 1, 1, 0LL);
      if ( (int)++v18 >= size )
        goto LABEL_37;
    }
LABEL_47:
    sub_B170D4();
  }
LABEL_37:
  logic = v4->fields.logic;
  if ( !logic )
    goto LABEL_47;
  BattleLogic__updateFieldBuff(logic, 0LL);
  v23 = v4->fields.data;
  if ( !v23 )
    goto LABEL_47;
  BattleData__createCommandCard(v23, v22);
  v25 = v4->fields.data;
  if ( !v25 )
    goto LABEL_47;
  BattleData__shuffleCommand(v25, v24);
  if ( !isProgress )
  {
    turnCount = v4->fields.turnCount;
    v4->fields.initturn = 1;
    v4->fields.turnCount = turnCount + 1;
  }
  v27 = v4->fields.logic;
  if ( !v27 )
    goto LABEL_47;
  BattleLogic__drawCommand(v27, 0LL);
  BattleData__SetUsedTurn(v4, v28);
  *(_WORD *)&v4->fields.endbattleFlg = 0;
  defenceTargetData = v4->fields.defenceTargetData;
  v4->fields.progresslistflg |= 0x400u;
  if ( defenceTargetData )
  {
    maxHp = defenceTargetData->fields.maxHp;
    if ( maxHp >= 1 )
      BattleDefenceTargetData__RecoverDefenceTarget(defenceTargetData, (unsigned int)maxHp >> 1, 0LL);
  }
  BattleData__SaveTurnData(v4, v29);
}


// local variable allocation has failed, the output may be wrong!
bool __fastcall BattleData__recordEventMasterSkillUsing(BattleData_o *this, int32_t skillId, const MethodInfo *method)
{
  __int64 v5; // x1
  __int64 v6; // x1
  __int64 v7; // x1
  System_Collections_Generic_Dictionary_int__int__o *usedEventMasterSkillDict; // x0
  System_Collections_Generic_Dictionary_int__int__o *v9; // x0
  System_Collections_Generic_Dictionary_int__int__o *v10; // x21
  int32_t Item; // w0
  System_Collections_Generic_Dictionary_int__int__o *v12; // x0

  if ( (byte_40F69FD & 1) == 0 )
  {
    sub_B16FFC(&Method_System_Collections_Generic_Dictionary_int__int__ContainsKey__, *(_QWORD *)&skillId);
    sub_B16FFC(&Method_System_Collections_Generic_Dictionary_int__int__get_Count__, v5);
    sub_B16FFC(&Method_System_Collections_Generic_Dictionary_int__int__get_Item__, v6);
    sub_B16FFC(&Method_System_Collections_Generic_Dictionary_int__int__set_Item__, v7);
    byte_40F69FD = 1;
  }
  usedEventMasterSkillDict = this->fields.usedEventMasterSkillDict;
  if ( usedEventMasterSkillDict )
  {
    LODWORD(usedEventMasterSkillDict) = System_Collections_Generic_Dictionary_int__int___get_Count(
                                          usedEventMasterSkillDict,
                                          (const MethodInfo_2DDCBB4 *)Method_System_Collections_Generic_Dictionary_int__int__get_Count__);
    if ( (_DWORD)usedEventMasterSkillDict )
    {
      v9 = this->fields.usedEventMasterSkillDict;
      if ( !v9 )
        goto LABEL_12;
      if ( !System_Collections_Generic_Dictionary_int__int___ContainsKey(
              v9,
              skillId,
              (const MethodInfo_2DDD218 *)Method_System_Collections_Generic_Dictionary_int__int__ContainsKey__) )
      {
        LOBYTE(usedEventMasterSkillDict) = 0;
        return (char)usedEventMasterSkillDict;
      }
      v10 = this->fields.usedEventMasterSkillDict;
      if ( !v10
        || (Item = System_Collections_Generic_Dictionary_int__int___get_Item(
                     this->fields.usedEventMasterSkillDict,
                     skillId,
                     (const MethodInfo_2DDCEF4 *)Method_System_Collections_Generic_Dictionary_int__int__get_Item__),
            System_Collections_Generic_Dictionary_int__int___set_Item(
              v10,
              skillId,
              Item + 1,
              (const MethodInfo_2DDCF8C *)Method_System_Collections_Generic_Dictionary_int__int__set_Item__),
            (v12 = this->fields.usedEventMasterSkillDict) == 0LL) )
      {
LABEL_12:
        sub_B170D4();
      }
      LOBYTE(usedEventMasterSkillDict) = System_Collections_Generic_Dictionary_int__int___get_Item(
                                           v12,
                                           skillId,
                                           (const MethodInfo_2DDCEF4 *)Method_System_Collections_Generic_Dictionary_int__int__get_Item__) == 1;
    }
  }
  return (char)usedEventMasterSkillDict;
}


void __fastcall BattleData__release(BattleData_o *this, const MethodInfo *method)
{
  struct BattleActionLogManagerInterface_o *actionLogManager; // x19
  BattleActionLogManagerInterface_c *klass; // x8
  unsigned __int64 v5; // x10
  int32_t *p_offset; // x11
  __int64 p_method; // x0

  if ( (byte_40F6AAC & 1) == 0 )
  {
    sub_B16FFC(&BattleActionLogManagerInterface_TypeInfo, method);
    byte_40F6AAC = 1;
  }
  actionLogManager = this->fields.actionLogManager;
  if ( actionLogManager )
  {
    klass = actionLogManager->klass;
    if ( *(_WORD *)&actionLogManager->klass->_2.bitflags1 )
    {
      v5 = 0LL;
      p_offset = &klass->_1.interfaceOffsets->offset;
      while ( *((BattleActionLogManagerInterface_c **)p_offset - 1) != BattleActionLogManagerInterface_TypeInfo )
      {
        ++v5;
        p_offset += 4;
        if ( v5 >= *(unsigned __int16 *)&actionLogManager->klass->_2.bitflags1 )
          goto LABEL_8;
      }
      p_method = (__int64)&klass->vtable[*p_offset].method;
    }
    else
    {
LABEL_8:
      p_method = sub_AAFEF8(actionLogManager, BattleActionLogManagerInterface_TypeInfo, 0LL);
    }
    (*(void (__fastcall **)(struct BattleActionLogManagerInterface_o *, _QWORD))p_method)(
      actionLogManager,
      *(_QWORD *)(p_method + 8));
  }
}


// local variable allocation has failed, the output may be wrong!
void __fastcall BattleData__removeServantVoicePlayed(
        BattleData_o *this,
        int32_t svtId,
        int32_t condValue,
        const MethodInfo *method)
{
  __int64 v7; // x1
  __int64 v8; // x1
  __int64 v9; // x1
  __int64 v10; // x1
  __int64 v11; // x1
  __int64 v12; // x1
  Il2CppObject *v13; // x21
  Il2CppObject *v14; // x0
  System_String_o *v15; // x0
  System_String_o *v16; // x0
  System_Type_o *v17; // x21
  struct System_Collections_Generic_Dictionary_string__object__o *voicePlayedInfo; // x20
  UnityEngine_Purchasing_IStoreExtension_o *Item; // x0
  System_Xml_Schema_XmlSchemaObject_o *v20; // x0
  BattleData_o *v21; // x0
  int32_t v22; // w1
  int32_t v23; // w2
  const MethodInfo *v24; // x3
  int32_t v25; // [xsp+Ch] [xbp-34h] BYREF
  __int64 v26; // [xsp+10h] [xbp-30h] BYREF
  int32_t v27; // [xsp+1Ch] [xbp-24h] BYREF

  v27 = svtId;
  if ( (byte_40F6A09 & 1) == 0 )
  {
    sub_B16FFC(&Method_System_Collections_Generic_Dictionary_string__object__ContainsKey__, *(_QWORD *)&svtId);
    sub_B16FFC(&Method_System_Collections_Generic_Dictionary_string__object__get_Item__, v7);
    sub_B16FFC(&Method_System_Collections_Generic_Dictionary_string__object__set_Item__, v8);
    sub_B16FFC(&Method_System_Collections_Generic_HashSet_string__Remove__, v9);
    sub_B16FFC(&int_TypeInfo, v10);
    sub_B16FFC(&long_TypeInfo, v11);
    sub_B16FFC(&StringLiteral_23493/*"{0},{1}"*/, v12);
    byte_40F6A09 = 1;
  }
  if ( condValue > 63 )
  {
    LODWORD(v26) = svtId;
    v13 = (Il2CppObject *)j_il2cpp_value_box_0(int_TypeInfo, &v26);
    v25 = condValue;
    v14 = (Il2CppObject *)j_il2cpp_value_box_0(int_TypeInfo, &v25);
    v15 = System_String__Format_43739268((System_String_o *)StringLiteral_23493/*"{0},{1}"*/, v13, v14, 0LL);
    if ( this->fields.voicePlayedOver64Info )
    {
      System_Collections_Generic_HashSet_BattleBuffData_BuffData___Remove(
        (System_Collections_Generic_HashSet_BattleBuffData_BuffData__o *)this->fields.voicePlayedOver64Info,
        (BattleBuffData_BuffData_o *)v15,
        (const MethodInfo_21DF190 *)Method_System_Collections_Generic_HashSet_string__Remove__);
      return;
    }
LABEL_13:
    sub_B170D4();
  }
  v16 = System_Int32__ToString((int32_t)&v27, 0LL);
  if ( !this->fields.voicePlayedInfo )
    goto LABEL_13;
  v17 = (System_Type_o *)v16;
  if ( System_Collections_Generic_Dictionary_XmlQualifiedName__XmlSchemaObject___ContainsKey(
         (System_Collections_Generic_Dictionary_XmlQualifiedName__XmlSchemaObject__o *)this->fields.voicePlayedInfo,
         (System_Xml_XmlQualifiedName_o *)v16,
         (const MethodInfo_2DA3E8C *)Method_System_Collections_Generic_Dictionary_string__object__ContainsKey__) )
  {
    voicePlayedInfo = this->fields.voicePlayedInfo;
    if ( !voicePlayedInfo )
      goto LABEL_13;
    Item = System_Collections_Generic_Dictionary_Type__IStoreExtension___get_Item(
             (System_Collections_Generic_Dictionary_Type__IStoreExtension__o *)voicePlayedInfo,
             v17,
             (const MethodInfo_2DA3B54 *)Method_System_Collections_Generic_Dictionary_string__object__get_Item__);
    if ( !Item )
      goto LABEL_13;
    if ( Item->klass->_1.element_class == long_TypeInfo->_1.element_class )
    {
      v26 = *(_QWORD *)j_il2cpp_object_unbox_0(Item) & ~(1LL << condValue);
      v20 = (System_Xml_Schema_XmlSchemaObject_o *)j_il2cpp_value_box_0(long_TypeInfo, &v26);
      System_Collections_Generic_Dictionary_XmlQualifiedName__XmlSchemaObject___set_Item(
        (System_Collections_Generic_Dictionary_XmlQualifiedName__XmlSchemaObject__o *)voicePlayedInfo,
        (System_Xml_XmlQualifiedName_o *)v17,
        v20,
        (const MethodInfo_2DA3BF0 *)Method_System_Collections_Generic_Dictionary_string__object__set_Item__);
    }
    else
    {
      v21 = (BattleData_o *)sub_B173C8(Item);
      BattleData__checkServantVoicePlayed(v21, v22, v23, v24);
    }
  }
}


// local variable allocation has failed, the output may be wrong!
void __fastcall BattleData__replaceCommandCard(
        BattleData_o *this,
        int32_t inUniqueID,
        int32_t outUniqueID,
        const MethodInfo *method)
{
  BattleServantData_o *ServantData; // x19
  const MethodInfo *v8; // x2
  BattleServantData_o *v9; // x0
  BattleServantData_o *v10; // x20
  System_Int32_array *CommandList; // x0
  __int64 v12; // x2
  __int64 v13; // x21
  System_Array_o *v14; // x0
  BattleData_o *v15; // x0
  BattleCommandData_o *v16; // x1
  __int64 v17; // x2
  const MethodInfo *v18; // x4
  struct BattleCommandData_array *p_cmlist; // x23
  int max_length; // w8
  unsigned int v21; // w24
  __int64 servantCardIdsIndex; // x8
  struct BattleCommandData_array *p_shcmlist; // x23
  int v24; // w8
  unsigned int v25; // w24
  __int64 v26; // x8
  struct BattleCommandData_array *draw_commandlist; // x22
  int v28; // w8
  unsigned int v29; // w23
  __int64 v30; // x8

  if ( (byte_40F6A0F & 1) == 0 )
  {
    sub_B16FFC(&int___TypeInfo, *(_QWORD *)&inUniqueID);
    byte_40F6A0F = 1;
  }
  ServantData = BattleData__getServantData(this, outUniqueID, *(const MethodInfo **)&outUniqueID);
  v9 = BattleData__getServantData(this, inUniqueID, v8);
  if ( !v9 )
    goto LABEL_40;
  v10 = v9;
  CommandList = BattleServantData__getCommandList(v9, 0LL);
  if ( !CommandList )
    goto LABEL_40;
  v13 = sub_B17014(int___TypeInfo, CommandList->max_length, v12);
  v14 = (System_Array_o *)BattleServantData__getCommandList(v10, 0LL);
  if ( !v14 )
    goto LABEL_40;
  System_Array__CopyTo(v14, (System_Array_o *)v13, 0, 0LL);
  p_cmlist = this->fields.p_cmlist;
  if ( !p_cmlist )
    goto LABEL_40;
  max_length = p_cmlist->max_length;
  if ( max_length >= 1 )
  {
    v21 = 0;
    while ( v21 < max_length )
    {
      v16 = p_cmlist->m_Items[v21];
      if ( !v16 || !ServantData )
        goto LABEL_40;
      if ( v16->fields.uniqueId == ServantData->fields.uniqueId )
      {
        if ( !v13 )
          goto LABEL_40;
        servantCardIdsIndex = v16->fields.servantCardIdsIndex;
        if ( (unsigned int)servantCardIdsIndex >= *(_DWORD *)(v13 + 24) )
          break;
        BattleData__exchangeCommandCard(v15, v16, v10, *(_DWORD *)(v13 + 4 * servantCardIdsIndex + 32), v18);
      }
      max_length = p_cmlist->max_length;
      if ( (int)++v21 >= max_length )
        goto LABEL_17;
    }
LABEL_41:
    sub_B17100(v15, v16, v17);
    sub_B170A0();
  }
LABEL_17:
  p_shcmlist = this->fields.p_shcmlist;
  if ( !p_shcmlist )
    goto LABEL_40;
  v24 = p_shcmlist->max_length;
  if ( v24 >= 1 )
  {
    v25 = 0;
    while ( v25 < v24 )
    {
      v16 = p_shcmlist->m_Items[v25];
      if ( !v16 || !ServantData )
        goto LABEL_40;
      if ( v16->fields.uniqueId == ServantData->fields.uniqueId )
      {
        if ( !v13 )
          goto LABEL_40;
        v26 = v16->fields.servantCardIdsIndex;
        if ( (unsigned int)v26 >= *(_DWORD *)(v13 + 24) )
          goto LABEL_41;
        BattleData__exchangeCommandCard(v15, v16, v10, *(_DWORD *)(v13 + 4 * v26 + 32), v18);
      }
      v24 = p_shcmlist->max_length;
      if ( (int)++v25 >= v24 )
        goto LABEL_28;
    }
    goto LABEL_41;
  }
LABEL_28:
  draw_commandlist = this->fields.draw_commandlist;
  if ( !draw_commandlist )
LABEL_40:
    sub_B170D4();
  v28 = draw_commandlist->max_length;
  if ( v28 >= 1 )
  {
    v29 = 0;
    while ( v29 < v28 )
    {
      v16 = draw_commandlist->m_Items[v29];
      if ( !v16 || !ServantData )
        goto LABEL_40;
      if ( v16->fields.uniqueId == ServantData->fields.uniqueId )
      {
        if ( !v13 )
          goto LABEL_40;
        v30 = v16->fields.servantCardIdsIndex;
        if ( (unsigned int)v30 >= *(_DWORD *)(v13 + 24) )
          goto LABEL_41;
        BattleData__exchangeCommandCard(v15, v16, v10, *(_DWORD *)(v13 + 4 * v30 + 32), v18);
      }
      v28 = draw_commandlist->max_length;
      if ( (int)++v29 >= v28 )
        return;
    }
    goto LABEL_41;
  }
}


void __fastcall BattleData__resetAddCriticalstars(BattleData_o *this, const MethodInfo *method)
{
  this->fields.addCriticalstars = 0;
}


void __fastcall BattleData__resetCriticalPoint(BattleData_o *this, const MethodInfo *method)
{
  int32_t criticalstars; // w8

  criticalstars = this->fields.criticalstars;
  *(_QWORD *)&this->fields.addCriticalstars = 0LL;
  this->fields.totalCriticalStars = criticalstars;
  this->fields.criticalstars = (criticalstars - 50) & ~((criticalstars - 50) >> 31);
}


void __fastcall BattleData__resetSubCriticalstars(BattleData_o *this, const MethodInfo *method)
{
  this->fields.subCriticalCount = 0;
}


void __fastcall BattleData__saveContinueCount(int32_t count, const MethodInfo *method)
{
  __int64 v3; // x1

  if ( (byte_40F6A7F & 1) == 0 )
  {
    sub_B16FFC(&EncryptedPlayerPrefs_TypeInfo, method);
    sub_B16FFC(&StringLiteral_3353/*"CONTINUECOUNT"*/, v3);
    byte_40F6A7F = 1;
  }
  if ( (BYTE3(EncryptedPlayerPrefs_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0
    && !EncryptedPlayerPrefs_TypeInfo->_2.cctor_finished )
  {
    j_il2cpp_runtime_class_init_0(EncryptedPlayerPrefs_TypeInfo);
  }
  EncryptedPlayerPrefs__SetInt((System_String_o *)StringLiteral_3353/*"CONTINUECOUNT"*/, count, 0LL);
}


void __fastcall BattleData__saveKnockdownEachWave(BattleData_o *this, const MethodInfo *method)
{
  __int64 v3; // x1
  __int64 v4; // x1
  __int64 v5; // x1
  __int64 v6; // x1
  __int64 v7; // x1
  __int64 v8; // x2
  __int64 v9; // x3
  __int64 v10; // x4
  struct System_Int32_array *waveKnockdownNums; // x22
  __int64 wavecount; // x23
  struct System_Collections_Generic_List_BattleServantData__o *enemy_datalist; // x19
  BattleData___c_c *v14; // x0
  struct BattleData___c_StaticFields *static_fields; // x8
  System_Func_WarBoardManager_WarBoardOnboardSkillTarget__bool__o *_9__661_0; // x20
  Il2CppObject *v17; // x21
  struct BattleData___c_StaticFields *v18; // x0
  __int64 v19; // x0
  __int64 v20; // x1
  __int64 v21; // x2

  if ( (byte_40F6AB5 & 1) == 0 )
  {
    sub_B16FFC(&Method_System_Linq_Enumerable_Count_BattleServantData____66838536, method);
    sub_B16FFC(&Method_System_Func_BattleServantData__bool___ctor__, v3);
    sub_B16FFC(&System_Func_BattleServantData__bool__TypeInfo, v4);
    sub_B16FFC(&Method_BattleData___c__saveKnockdownEachWave_b__661_0__, v5);
    sub_B16FFC(&BattleData___c_TypeInfo, v6);
    byte_40F6AB5 = 1;
  }
  if ( BattleData__isKnockdownTrialQuest(this, method) )
  {
    waveKnockdownNums = this->fields.waveKnockdownNums;
    wavecount = this->fields.wavecount;
    enemy_datalist = this->fields.enemy_datalist;
    v14 = BattleData___c_TypeInfo;
    if ( (BYTE3(BattleData___c_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0
      && !BattleData___c_TypeInfo->_2.cctor_finished )
    {
      j_il2cpp_runtime_class_init_0(BattleData___c_TypeInfo);
      v14 = BattleData___c_TypeInfo;
    }
    static_fields = v14->static_fields;
    _9__661_0 = (System_Func_WarBoardManager_WarBoardOnboardSkillTarget__bool__o *)static_fields->__9__661_0;
    if ( !_9__661_0 )
    {
      if ( (BYTE3(v14->vtable._0_Equals.methodPtr) & 4) != 0 && !v14->_2.cctor_finished )
      {
        j_il2cpp_runtime_class_init_0(v14);
        static_fields = BattleData___c_TypeInfo->static_fields;
      }
      v17 = (Il2CppObject *)static_fields->__9;
      _9__661_0 = (System_Func_WarBoardManager_WarBoardOnboardSkillTarget__bool__o *)sub_B170CC(
                                                                                       System_Func_BattleServantData__bool__TypeInfo,
                                                                                       v7,
                                                                                       v8,
                                                                                       v9,
                                                                                       v10);
      System_Func_WarBoardManager_WarBoardOnboardSkillTarget__bool____ctor(
        _9__661_0,
        v17,
        Method_BattleData___c__saveKnockdownEachWave_b__661_0__,
        (const MethodInfo_2B6AB40 *)Method_System_Func_BattleServantData__bool___ctor__);
      v18 = BattleData___c_TypeInfo->static_fields;
      v18->__9__661_0 = (struct System_Func_BattleServantData__bool__o *)_9__661_0;
      sub_B16F98(&v18->__9__661_0, _9__661_0);
    }
    v19 = System_Linq_Enumerable__Count_WarBoardAIRoute_RouteData_(
            (System_Collections_Generic_IEnumerable_TSource__o *)enemy_datalist,
            (System_Func_TSource__bool__o *)_9__661_0,
            (const MethodInfo_18D4A90 *)Method_System_Linq_Enumerable_Count_BattleServantData____66838536);
    if ( !waveKnockdownNums )
      sub_B170D4();
    if ( (unsigned int)wavecount >= waveKnockdownNums->max_length )
    {
      sub_B17100(v19, v20, v21);
      sub_B170A0();
    }
    waveKnockdownNums->m_Items[wavecount + 1] = v19;
  }
}


void __fastcall BattleData__saveWaveClearTurn(System_Int32_array *waveClearArray, const MethodInfo *method)
{
  __int64 v2; // x2
  __int64 v4; // x1
  __int64 v5; // x1
  __int64 v6; // x1
  System_String_o *v7; // x0
  __int64 v8; // x1
  __int64 v9; // x2
  __int64 v10; // x8
  System_String_array *v11; // x20
  unsigned __int64 v12; // x24
  int32_t v13; // w21
  void **p_monitor; // x22
  System_String_o *v15; // x23
  System_String_o *v16; // x19

  if ( (byte_40F6A81 & 1) == 0 )
  {
    sub_B16FFC(&EncryptedPlayerPrefs_TypeInfo, method);
    sub_B16FFC(&string___TypeInfo, v4);
    sub_B16FFC(&StringLiteral_10850/*"QUESTUSEDTURNSAVEKEY"*/, v5);
    sub_B16FFC(&StringLiteral_698/*","*/, v6);
    byte_40F6A81 = 1;
  }
  if ( waveClearArray )
  {
    v7 = (System_String_o *)sub_B17014(string___TypeInfo, waveClearArray->max_length, v2);
    v10 = *(_QWORD *)&waveClearArray->max_length;
    v11 = (System_String_array *)v7;
    if ( (int)v10 >= 1 )
    {
      v12 = 0LL;
      v13 = (_DWORD)waveClearArray + 32;
      p_monitor = &v7[1].monitor;
      do
      {
        if ( v12 >= (unsigned int)v10 )
          goto LABEL_17;
        v7 = System_Int32__ToString(v13, 0LL);
        if ( !v11 )
          sub_B170D4();
        v15 = v7;
        if ( v7 )
        {
          v7 = (System_String_o *)sub_B170BC(v7, v11->obj.klass->_1.element_class);
          if ( !v7 )
          {
            sub_B170F4();
            sub_B170A0();
          }
        }
        if ( v12 >= v11->max_length )
        {
LABEL_17:
          sub_B17100(v7, v8, v9);
          sub_B170A0();
        }
        *p_monitor = v15;
        v7 = (System_String_o *)sub_B16F98(p_monitor, v15);
        LODWORD(v10) = waveClearArray->max_length;
        ++v12;
        v13 += 4;
        ++p_monitor;
      }
      while ( (__int64)v12 < (int)v10 );
    }
    v16 = System_String__Join((System_String_o *)StringLiteral_698/*","*/, v11, 0LL);
    if ( (BYTE3(EncryptedPlayerPrefs_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0
      && !EncryptedPlayerPrefs_TypeInfo->_2.cctor_finished )
    {
      j_il2cpp_runtime_class_init_0(EncryptedPlayerPrefs_TypeInfo);
    }
    EncryptedPlayerPrefs__SetString((System_String_o *)StringLiteral_10850/*"QUESTUSEDTURNSAVEKEY"*/, v16, 0LL);
  }
}


void __fastcall BattleData__setBstate(BattleData_o *this, int64_t bstate, const MethodInfo *method)
{
  struct BattleEntity_o *battle_ent; // x8

  battle_ent = this->fields.battle_ent;
  if ( !battle_ent )
    sub_B170D4();
  this->fields.endbattleFlg = (battle_ent->fields.id ^ 0xFFFFFFFFFFED5CD0LL) == bstate;
}


void __fastcall BattleData__setCalcStarFlg(BattleData_o *this, bool flg, const MethodInfo *method)
{
  this->fields.isCalcCritical = flg;
}


void __fastcall BattleData__setComboData(BattleData_o *this, BattleComboData_o *incombo, const MethodInfo *method)
{
  this->fields.combodata = incombo;
  sub_B16F98(&this->fields.combodata, incombo);
}


void __fastcall BattleData__setCommandAttack(
        BattleData_o *this,
        int32_t actId,
        int32_t targetId,
        const MethodInfo *method)
{
  this->fields.prevactId = actId;
  this->fields.prevtargetId = targetId;
}


void __fastcall BattleData__setCommandCriticals(
        BattleData_o *this,
        System_Int32_array *criticalArray,
        const MethodInfo *method)
{
  this->fields.commandCriticalArray = criticalArray;
  sub_B16F98(&this->fields.commandCriticalArray, criticalArray);
}


void __fastcall BattleData__setCommandData(BattleData_o *this, BattleCommandData_array *list, const MethodInfo *method)
{
  this->fields.selectcommandlist = list;
  sub_B16F98(&this->fields.selectcommandlist, list);
  this->fields.isCommandSelected = 1;
}


// local variable allocation has failed, the output may be wrong!
void __fastcall BattleData__setCommandSpellIdBattle(int32_t commandSpellId, bool save, const MethodInfo *method)
{
  __int64 v5; // x1

  if ( (byte_40F6A7D & 1) == 0 )
  {
    sub_B16FFC(&EncryptedPlayerPrefs_TypeInfo, save);
    sub_B16FFC(&StringLiteral_3244/*"COMMAND_SPELL_BATTLE_SAVEKEY"*/, v5);
    byte_40F6A7D = 1;
  }
  if ( (BYTE3(EncryptedPlayerPrefs_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0
    && !EncryptedPlayerPrefs_TypeInfo->_2.cctor_finished )
  {
    j_il2cpp_runtime_class_init_0(EncryptedPlayerPrefs_TypeInfo);
  }
  EncryptedPlayerPrefs__SetInt((System_String_o *)StringLiteral_3244/*"COMMAND_SPELL_BATTLE_SAVEKEY"*/, commandSpellId, 0LL);
  if ( save )
    UnityEngine_PlayerPrefs__Save(0LL);
}


// local variable allocation has failed, the output may be wrong!
void __fastcall BattleData__setContinueBattleFlg(int32_t continueFlg, bool save, const MethodInfo *method)
{
  __int64 v5; // x1

  if ( (byte_40F6A77 & 1) == 0 )
  {
    sub_B16FFC(&EncryptedPlayerPrefs_TypeInfo, save);
    sub_B16FFC(&StringLiteral_3354/*"CONTINUE_BATTLE_SAVEKEY"*/, v5);
    byte_40F6A77 = 1;
  }
  if ( (BYTE3(EncryptedPlayerPrefs_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0
    && !EncryptedPlayerPrefs_TypeInfo->_2.cctor_finished )
  {
    j_il2cpp_runtime_class_init_0(EncryptedPlayerPrefs_TypeInfo);
  }
  EncryptedPlayerPrefs__SetInt((System_String_o *)StringLiteral_3354/*"CONTINUE_BATTLE_SAVEKEY"*/, continueFlg, 0LL);
  if ( save )
    UnityEngine_PlayerPrefs__Save(0LL);
}


void __fastcall BattleData__setCriticalStar(BattleData_o *this, int32_t count, const MethodInfo *method)
{
  int32_t v3; // w8

  if ( count >= 49 )
    v3 = 49;
  else
    v3 = count;
  this->fields.criticalstars = v3;
}


void __fastcall BattleData__setDeadLeader(BattleData_o *this, bool flg, const MethodInfo *method)
{
  this->fields.leaderDown = flg;
}


// local variable allocation has failed, the output may be wrong!
void __fastcall BattleData__setFirstBonus(BattleData_o *this, int32_t index, int32_t type, const MethodInfo *method)
{
  __int64 v7; // x1
  WebViewManager_o *Instance; // x0
  CardMaster_o *MasterData_WarQuestSelectionMaster; // x0
  _BOOL8 v10; // x0
  const MethodInfo *v11; // x2
  struct BattleComboData_o *combodata; // x9
  CardEntity_o *v13; // x8
  struct BattleComboData_o *v14; // x9
  struct BattleComboData_o *v15; // x9
  struct BattleComboData_o *v16; // x19
  int32_t addCriticalRate; // w20
  CardEntity_o *entity; // [xsp+8h] [xbp-28h] BYREF

  if ( (byte_40F6A43 & 1) == 0 )
  {
    sub_B16FFC(&Method_DataManager_GetMasterData_CardMaster___, *(_QWORD *)&index);
    sub_B16FFC(&Method_SingletonMonoBehaviour_DataManager__get_Instance__, v7);
    byte_40F6A43 = 1;
  }
  entity = 0LL;
  Instance = SingletonMonoBehaviour_WebViewManager___get_Instance((const MethodInfo_2A54F38 *)Method_SingletonMonoBehaviour_DataManager__get_Instance__);
  if ( !Instance )
    goto LABEL_13;
  MasterData_WarQuestSelectionMaster = (CardMaster_o *)DataManager__GetMasterData_WarQuestSelectionMaster_(
                                                         (DataManager_o *)Instance,
                                                         (const MethodInfo_18C3284 *)Method_DataManager_GetMasterData_CardMaster___);
  if ( !MasterData_WarQuestSelectionMaster )
    goto LABEL_13;
  v10 = CardMaster__TryGetEntity(MasterData_WarQuestSelectionMaster, &entity, type, index + 1, 0LL);
  if ( !v10 )
    return;
  combodata = this->fields.combodata;
  if ( !combodata
    || (v13 = entity) == 0LL
    || (combodata->fields.addAtk += entity->fields.addAtk, (v14 = this->fields.combodata) == 0LL)
    || (v14->fields.addCritical += v13->fields.addCritical, (v15 = this->fields.combodata) == 0LL)
    || (v15->fields.addTdGauge += v13->fields.addTdGauge, (v16 = this->fields.combodata) == 0LL) )
  {
LABEL_13:
    sub_B170D4();
  }
  addCriticalRate = v16->fields.addCriticalRate;
  v16->fields.addCriticalRate = BattleData__GetFirstBonusCriticalRate((BattleData_o *)v10, v13->fields.id, v11)
                              + addCriticalRate;
}


void __fastcall BattleData__setInitCommandBattle(BattleData_o *this, const MethodInfo *method)
{
  *(_OWORD *)&this->fields.prevactId = 0u;
}


void __fastcall BattleData__setLastActionActor(BattleData_o *this, BattleActionData_o *adata, const MethodInfo *method)
{
  if ( !adata )
    sub_B170D4();
  this->fields.lastactorId = adata->fields.actorId;
}


void __fastcall BattleData__setNextStage(BattleData_o *this, const MethodInfo *method)
{
  __int64 v3; // x1
  System_Collections_Generic_List_int__o *lockTargetIdList; // x0
  int32_t v5; // w8
  unsigned int v6; // w9
  System_Collections_Generic_Dictionary_int__int__o *chainCountDict; // x0
  BattlePerformance_o *perf; // x0
  struct BattlePerformance_o *v9; // x8
  struct BattlePerformance_o *v10; // x8

  if ( (byte_40F6A99 & 1) == 0 )
  {
    sub_B16FFC(&Method_System_Collections_Generic_Dictionary_int__int__Clear__, method);
    sub_B16FFC(&Method_System_Collections_Generic_List_int__Clear__, v3);
    byte_40F6A99 = 1;
  }
  lockTargetIdList = this->fields.lockTargetIdList;
  v5 = this->fields.turnCount + this->fields.totalTurnCount;
  v6 = this->fields.wavecount + 1;
  this->fields.initturn = 0;
  *(_QWORD *)&this->fields.wavecount = v6;
  this->fields.totalTurnCount = v5;
  this->fields.globaltargetId = -1;
  if ( !lockTargetIdList )
    goto LABEL_9;
  System_Collections_Generic_List_int___Clear(
    lockTargetIdList,
    (const MethodInfo_2F108FC *)Method_System_Collections_Generic_List_int__Clear__);
  chainCountDict = this->fields.chainCountDict;
  if ( !chainCountDict )
    goto LABEL_9;
  System_Collections_Generic_Dictionary_int__int___Clear(
    chainCountDict,
    (const MethodInfo_2DDD180 *)Method_System_Collections_Generic_Dictionary_int__int__Clear__);
  this->fields.maxEnemyIndex = 0;
  this->fields.maxEnemyUniqueID = 0;
  this->fields._overwriteBgmData_k__BackingField = 0LL;
  sub_B16F98(&this->fields._overwriteBgmData_k__BackingField, 0LL);
  perf = this->fields.perf;
  if ( !perf
    || (BattlePerformance__ChangeBattleSpeed(perf, 0LL), (v9 = this->fields.perf) == 0LL)
    || (v9->fields.waitMovieEnd = 0, (v10 = this->fields.perf) == 0LL) )
  {
LABEL_9:
    sub_B170D4();
  }
  v10->fields.isMovieRebootSkip = 0;
  this->fields.enemyMasterChangedFaceId = 0;
}


void __fastcall BattleData__setProgresslist(BattleData_o *this, bool isWave, const MethodInfo *method)
{
  int32_t progresslistflg; // w8

  progresslistflg = this->fields.progresslistflg;
  if ( isWave )
  {
    progresslistflg |= 0xC7DFu;
    this->fields.progresslistflg = progresslistflg;
  }
  this->fields.progresslistflg = progresslistflg | 0x13020;
}


void __fastcall BattleData__setQuestKnockdownResult(BattleData_o *this, const MethodInfo *method)
{
  bool isKnockdownTrialQuest; // w0
  const MethodInfo *v4; // x2
  struct QuestKnockdownInfo_o *currenctKnockdown; // x20
  System_Collections_Generic_IEnumerable_int__o *waveKnockdownNums; // x0
  int64_t v7; // x8
  BattleServantData_array *FieldEnemyServantList; // x0
  __int64 v9; // x1
  __int64 v10; // x2
  int max_length; // w8
  BattleServantData_array *v12; // x20
  int v13; // w24
  int64_t v14; // x23
  Il2CppClass **v15; // x8
  BattleServantData_o *v16; // x21
  int32_t MaxHp; // w22
  struct QuestKnockdownInfo_o *v18; // x8

  isKnockdownTrialQuest = BattleData__isKnockdownTrialQuest(this, method);
  currenctKnockdown = this->fields.currenctKnockdown;
  if ( isKnockdownTrialQuest )
  {
    waveKnockdownNums = (System_Collections_Generic_IEnumerable_int__o *)this->fields.waveKnockdownNums;
    if ( waveKnockdownNums )
    {
      v7 = System_Linq_Enumerable__Sum(waveKnockdownNums, 0LL);
      if ( !currenctKnockdown )
        goto LABEL_18;
    }
    else
    {
      v7 = 0LL;
      if ( !currenctKnockdown )
        goto LABEL_18;
    }
    currenctKnockdown->fields.knockdownNum = v7;
    FieldEnemyServantList = BattleData__getFieldEnemyServantList(this, 0, v4);
    if ( !FieldEnemyServantList )
      goto LABEL_18;
    max_length = FieldEnemyServantList->max_length;
    v12 = FieldEnemyServantList;
    if ( max_length >= 1 )
    {
      v13 = 0;
      v14 = 0LL;
      while ( 1 )
      {
        if ( v13 >= (unsigned int)max_length )
        {
          sub_B17100(FieldEnemyServantList, v9, v10);
          sub_B170A0();
        }
        v15 = &v12->obj.klass + v13;
        v16 = (BattleServantData_o *)v15[4];
        if ( !v16 )
          goto LABEL_18;
        MaxHp = BattleServantData__getMaxHp((BattleServantData_o *)v15[4], 0LL);
        FieldEnemyServantList = (BattleServantData_array *)BattleServantData__getNowHp(v16, 0LL);
        max_length = v12->max_length;
        ++v13;
        v14 += MaxHp - (int)FieldEnemyServantList;
        if ( v13 >= max_length )
          goto LABEL_16;
      }
    }
    v14 = 0LL;
LABEL_16:
    v18 = this->fields.currenctKnockdown;
    if ( !v18 )
LABEL_18:
      sub_B170D4();
    v18->fields.totalDamage = v14;
  }
  else
  {
    if ( !currenctKnockdown )
      goto LABEL_18;
    QuestKnockdownInfo__init(this->fields.currenctKnockdown, 0LL);
  }
}


// local variable allocation has failed, the output may be wrong!
void __fastcall BattleData__setReserveResumeBattle(
        bool isResume,
        int32_t questId,
        int32_t questPhase,
        const MethodInfo *method)
{
  __int64 v7; // x1
  __int64 v8; // x1
  __int64 v9; // x1
  _BOOL4 v10; // w21
  System_String_o *v11; // x22

  if ( (byte_40F6A84 & 1) == 0 )
  {
    sub_B16FFC(&EncryptedPlayerPrefs_TypeInfo, *(_QWORD *)&questId);
    sub_B16FFC(&StringLiteral_10849/*"QUESTPHASEID"*/, v7);
    sub_B16FFC(&StringLiteral_10848/*"QUESTID"*/, v8);
    sub_B16FFC(&StringLiteral_11046/*"RESERVE_BATTKE_SAVEKEY"*/, v9);
    byte_40F6A84 = 1;
  }
  v10 = isResume;
  v11 = (System_String_o *)StringLiteral_11046/*"RESERVE_BATTKE_SAVEKEY"*/;
  if ( (BYTE3(EncryptedPlayerPrefs_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0
    && !EncryptedPlayerPrefs_TypeInfo->_2.cctor_finished )
  {
    j_il2cpp_runtime_class_init_0(EncryptedPlayerPrefs_TypeInfo);
  }
  EncryptedPlayerPrefs__SetInt(v11, v10, 0LL);
  if ( questId )
  {
    if ( (BYTE3(EncryptedPlayerPrefs_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0
      && !EncryptedPlayerPrefs_TypeInfo->_2.cctor_finished )
    {
      j_il2cpp_runtime_class_init_0(EncryptedPlayerPrefs_TypeInfo);
    }
    EncryptedPlayerPrefs__SetInt((System_String_o *)StringLiteral_10848/*"QUESTID"*/, questId, 0LL);
  }
  if ( questPhase )
  {
    if ( (BYTE3(EncryptedPlayerPrefs_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0
      && !EncryptedPlayerPrefs_TypeInfo->_2.cctor_finished )
    {
      j_il2cpp_runtime_class_init_0(EncryptedPlayerPrefs_TypeInfo);
    }
    EncryptedPlayerPrefs__SetInt((System_String_o *)StringLiteral_10849/*"QUESTPHASEID"*/, questPhase, 0LL);
  }
  UnityEngine_PlayerPrefs__Save(0LL);
}


void __fastcall BattleData__setResultLose(BattleData_o *this, const MethodInfo *method)
{
  this->fields.win_lose = 2;
}


void __fastcall BattleData__setResultNone(BattleData_o *this, const MethodInfo *method)
{
  this->fields.win_lose = 0;
}


void __fastcall BattleData__setResultRetire(BattleData_o *this, const MethodInfo *method)
{
  this->fields.win_lose = 3;
}


void __fastcall BattleData__setResultWin(BattleData_o *this, const MethodInfo *method)
{
  this->fields.win_lose = 1;
}


// local variable allocation has failed, the output may be wrong!
void __fastcall BattleData__setResumeBattleId(
        int64_t battleId,
        int32_t questId,
        int32_t questPhase,
        const MethodInfo *method)
{
  __int64 v7; // x1
  __int64 v8; // x1
  __int64 v9; // x1
  __int64 v10; // x1
  __int64 v11; // x1

  if ( (byte_40F6A7E & 1) == 0 )
  {
    sub_B16FFC(&EncryptedPlayerPrefs_TypeInfo, *(_QWORD *)&questId);
    sub_B16FFC(&StringLiteral_10849/*"QUESTPHASEID"*/, v7);
    sub_B16FFC(&StringLiteral_10848/*"QUESTID"*/, v8);
    sub_B16FFC(&StringLiteral_11516/*"SAVEKEY_"*/, v9);
    sub_B16FFC(&StringLiteral_7590/*"Initial"*/, v10);
    sub_B16FFC(&StringLiteral_15123/*"Version"*/, v11);
    byte_40F6A7E = 1;
  }
  if ( (BYTE3(EncryptedPlayerPrefs_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0
    && !EncryptedPlayerPrefs_TypeInfo->_2.cctor_finished )
  {
    j_il2cpp_runtime_class_init_0(EncryptedPlayerPrefs_TypeInfo);
  }
  EncryptedPlayerPrefs__SetLong((System_String_o *)StringLiteral_11516/*"SAVEKEY_"*/, battleId, 0LL);
  EncryptedPlayerPrefs__SetString((System_String_o *)StringLiteral_15123/*"Version"*/, (System_String_o *)StringLiteral_7590/*"Initial"*/, 0LL);
  EncryptedPlayerPrefs__SetInt((System_String_o *)StringLiteral_10848/*"QUESTID"*/, questId, 0LL);
  EncryptedPlayerPrefs__SetInt((System_String_o *)StringLiteral_10849/*"QUESTPHASEID"*/, questPhase, 0LL);
  UnityEngine_PlayerPrefs__Save(0LL);
}


void __fastcall BattleData__setTDChain(BattleData_o *this, int32_t addIndex, const MethodInfo *method)
{
  struct BattleComboData_o *combodata; // x8

  combodata = this->fields.combodata;
  if ( !combodata )
    sub_B170D4();
  if ( addIndex >= 1 )
    addIndex += combodata->fields.tdChain;
  combodata->fields.tdChain = addIndex;
}


// local variable allocation has failed, the output may be wrong!
int32_t __fastcall BattleData__setTargetIndex(BattleData_o *this, int32_t index, const MethodInfo *method)
{
  struct System_Int32_array *e_entryid; // x8
  int32_t v4; // w20
  BattleData_o *data; // x0
  BattleServantData_o *EnemyServantData; // x0
  BattlePerformance_o *perf; // x0
  struct BattlePerformance_o *v10; // x8
  BattlePerformanceCommandCard_o *commandPerf; // x0

  e_entryid = this->fields.e_entryid;
  if ( !e_entryid )
    goto LABEL_13;
  if ( e_entryid->max_length <= index )
  {
    sub_B17100(this, *(_QWORD *)&index, method);
    sub_B170A0();
  }
  v4 = e_entryid->m_Items[index + 1];
  if ( v4 == -1 )
    return 1;
  data = this->fields.data;
  if ( !data )
    goto LABEL_13;
  EnemyServantData = BattleData__getEnemyServantData(data, v4, method);
  if ( !EnemyServantData )
    goto LABEL_13;
  if ( BattleServantData__isDeadWaitNotAlive(EnemyServantData, 0LL) || this->fields.isMultiTargetBattle )
    return 1;
  perf = this->fields.perf;
  this->fields.globaltargetId = v4;
  if ( !perf
    || (BattlePerformance__setEnemyTarget(perf, v4, 0LL), (v10 = this->fields.perf) == 0LL)
    || (commandPerf = v10->fields.commandPerf) == 0LL )
  {
LABEL_13:
    sub_B170D4();
  }
  BattlePerformanceCommandCard__updateCardMag(commandPerf, 0LL);
  return 0;
}


void __fastcall BattleData__setTargetLock(
        BattleData_o *this,
        System_Collections_Generic_List_int__o *lockTargetIdList,
        const MethodInfo *method)
{
  __int64 v5; // x1
  System_Collections_Generic_List_int__o *v6; // x0
  System_Collections_Generic_List_int__o *v7; // x0

  if ( (byte_40F6AB2 & 1) == 0 )
  {
    sub_B16FFC(&Method_System_Collections_Generic_List_int__AddRange__, lockTargetIdList);
    sub_B16FFC(&Method_System_Collections_Generic_List_int__Clear__, v5);
    byte_40F6AB2 = 1;
  }
  v6 = this->fields.lockTargetIdList;
  if ( !v6
    || (System_Collections_Generic_List_int___Clear(
          v6,
          (const MethodInfo_2F108FC *)Method_System_Collections_Generic_List_int__Clear__),
        (v7 = this->fields.lockTargetIdList) == 0LL) )
  {
    sub_B170D4();
  }
  System_Collections_Generic_List_int___AddRange(
    v7,
    (System_Collections_Generic_IEnumerable_T__o *)lockTargetIdList,
    (const MethodInfo_2F10744 *)Method_System_Collections_Generic_List_int__AddRange__);
}


void __fastcall BattleData__set_DrawLotsDispMsg(
        BattleData_o *this,
        DrawLotsDisplayMessage_o *value,
        const MethodInfo *method)
{
  this->fields._DrawLotsDispMsg_k__BackingField = value;
  sub_B16F98(&this->fields._DrawLotsDispMsg_k__BackingField, value);
}


void __fastcall BattleData__set_EnemyAddOrderPosArray(
        BattleData_o *this,
        System_Int32_array *value,
        const MethodInfo *method)
{
  this->fields._EnemyAddOrderPosArray_k__BackingField = value;
  sub_B16F98(&this->fields._EnemyAddOrderPosArray_k__BackingField, value);
}


void __fastcall BattleData__set_EnemyCountStartValue(BattleData_o *this, int32_t value, const MethodInfo *method)
{
  this->fields._EnemyCountStartValue_k__BackingField = value;
}


void __fastcall BattleData__set_EnemyEntryCountOnThisTurn(BattleData_o *this, int32_t value, const MethodInfo *method)
{
  this->fields._EnemyEntryCountOnThisTurn_k__BackingField = value;
}


void __fastcall BattleData__set_EnemyEntryMaxCountEachTurn(BattleData_o *this, int32_t value, const MethodInfo *method)
{
  this->fields._EnemyEntryMaxCountEachTurn_k__BackingField = value;
}


void __fastcall BattleData__set_EnemyFieldPosCount(BattleData_o *this, int32_t value, const MethodInfo *method)
{
  this->fields._EnemyFieldPosCount_k__BackingField = value;
}


void __fastcall BattleData__set_FieldEnvData(
        BattleData_o *this,
        BattleFieldEnvironmentData_o *value,
        const MethodInfo *method)
{
  this->fields._FieldEnvData_k__BackingField = value;
  sub_B16F98(&this->fields._FieldEnvData_k__BackingField, value);
}


void __fastcall BattleData__set_IsReleaseUnusedAssetsWhenEntryMember(
        BattleData_o *this,
        bool value,
        const MethodInfo *method)
{
  this->fields._IsReleaseUnusedAssetsWhenEntryMember_k__BackingField = value;
}


void __fastcall BattleData__set_lastUsedPlayerSkillInfo(
        BattleData_o *this,
        BattleSkillInfoData_o *value,
        const MethodInfo *method)
{
  this->fields._lastUsedPlayerSkillInfo_k__BackingField = value;
  sub_B16F98(&this->fields._lastUsedPlayerSkillInfo_k__BackingField, value);
}


void __fastcall BattleData__set_overwriteBgmData(
        BattleData_o *this,
        OverwriteBattleBgmData_o *value,
        const MethodInfo *method)
{
  this->fields._overwriteBgmData_k__BackingField = value;
  sub_B16F98(&this->fields._overwriteBgmData_k__BackingField, value);
}


void __fastcall BattleData__shuffleCanSelectCommand(BattleData_o *this, const MethodInfo *method)
{
  __int64 v2; // x2
  __int64 v3; // x3
  __int64 v4; // x4
  __int64 v6; // x1
  __int64 v7; // x1
  __int64 v8; // x1
  __int64 v9; // x1
  __int64 v10; // x1
  System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData__o *v11; // x20
  _BOOL8 v12; // x0
  __int64 v13; // x1
  __int64 v14; // x2
  struct BattleCommandData_array *p_cmlist; // x8
  __int64 v16; // x22
  int max_length; // w9
  BattleCommandData_o *v18; // x21
  System_Collections_Generic_List_int__o *doNotSelectCommandSvtIdList; // x0
  System_Object_array *v20; // x0
  System_Object_array *Shuffle_object; // x0

  if ( (byte_40F6A35 & 1) == 0 )
  {
    sub_B16FFC(&Method_BattleRandom_getShuffle_BattleCommandData___, method);
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleCommandData__Add__, v6);
    sub_B16FFC(&Method_System_Collections_Generic_List_int__Contains__, v7);
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleCommandData__ToArray__, v8);
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleCommandData___ctor__, v9);
    sub_B16FFC(&System_Collections_Generic_List_BattleCommandData__TypeInfo, v10);
    byte_40F6A35 = 1;
  }
  v11 = (System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData__o *)sub_B170CC(
                                                                                                  System_Collections_Generic_List_BattleCommandData__TypeInfo,
                                                                                                  method,
                                                                                                  v2,
                                                                                                  v3,
                                                                                                  v4);
  System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData____ctor(
    v11,
    (const MethodInfo_2F25014 *)Method_System_Collections_Generic_List_BattleCommandData___ctor__);
  p_cmlist = this->fields.p_cmlist;
  if ( !p_cmlist )
    goto LABEL_13;
  v16 = 0LL;
  while ( 1 )
  {
    max_length = p_cmlist->max_length;
    if ( (int)v16 >= max_length )
      break;
    if ( (unsigned int)v16 >= max_length )
    {
      sub_B17100(v12, v13, v14);
      sub_B170A0();
    }
    v18 = p_cmlist->m_Items[v16];
    if ( v18 )
    {
      doNotSelectCommandSvtIdList = this->fields.doNotSelectCommandSvtIdList;
      if ( doNotSelectCommandSvtIdList )
      {
        v12 = System_Collections_Generic_List_int___Contains(
                doNotSelectCommandSvtIdList,
                v18->fields.uniqueId,
                (const MethodInfo_2F10944 *)Method_System_Collections_Generic_List_int__Contains__);
        if ( !v12 )
        {
          if ( !v11 )
            goto LABEL_13;
          System_Collections_Generic_List_EventMissionProgressRequest_Argument_ProgressData___Add(
            v11,
            (EventMissionProgressRequest_Argument_ProgressData_o *)v18,
            (const MethodInfo_2F25CD8 *)Method_System_Collections_Generic_List_BattleCommandData__Add__);
        }
        p_cmlist = this->fields.p_cmlist;
        ++v16;
        if ( p_cmlist )
          continue;
      }
    }
    goto LABEL_13;
  }
  if ( !v11 )
LABEL_13:
    sub_B170D4();
  v20 = (System_Object_array *)System_Collections_Generic_List_WarBoardUiData_SaveData___ToArray(
                                 (System_Collections_Generic_List_WarBoardUiData_SaveData__o *)v11,
                                 (const MethodInfo_2F27E24 *)Method_System_Collections_Generic_List_BattleCommandData__ToArray__);
  Shuffle_object = BattleRandom__getShuffle_object_(
                     v20,
                     (const MethodInfo_18BA1C8 *)Method_BattleRandom_getShuffle_BattleCommandData___);
  this->fields.canSelectCommands = (struct BattleCommandData_array *)Shuffle_object;
  sub_B16F98(&this->fields.canSelectCommands, Shuffle_object);
  this->fields.canSelectCommandIndex = 0;
}


void __fastcall BattleData__shuffleCommand(BattleData_o *this, const MethodInfo *method)
{
  System_Object_array *Shuffle_object; // x0
  struct BattleData_o *data; // x8

  if ( (byte_40F6A32 & 1) == 0 )
  {
    sub_B16FFC(&Method_BattleRandom_getShuffle_BattleCommandData___, method);
    byte_40F6A32 = 1;
  }
  Shuffle_object = BattleRandom__getShuffle_object_(
                     (System_Object_array *)this->fields.p_cmlist,
                     (const MethodInfo_18BA1C8 *)Method_BattleRandom_getShuffle_BattleCommandData___);
  this->fields.p_shcmlist = (struct BattleCommandData_array *)Shuffle_object;
  sub_B16F98(&this->fields.p_shcmlist, Shuffle_object);
  data = this->fields.data;
  this->fields.shuffleindex = 0;
  if ( !data )
    sub_B170D4();
  data->fields.isWaitDrawCard = 1;
}


void __fastcall BattleData__toggleHighSpeedMode(BattleData_o *this, const MethodInfo *method)
{
  __int64 v3; // x1
  int32_t tutorialId; // w9
  int32_t systemflg_acceleration; // w19
  BattleData_c *v6; // x0
  System_String_o *speedKey; // x20

  if ( (byte_40F6A6B & 1) == 0 )
  {
    sub_B16FFC(&BattleData_TypeInfo, method);
    sub_B16FFC(&EncryptedPlayerPrefs_TypeInfo, v3);
    byte_40F6A6B = 1;
  }
  tutorialId = this->fields.tutorialId;
  if ( this->fields.systemflg_acceleration == 1 )
    systemflg_acceleration = 2;
  else
    systemflg_acceleration = 1;
  this->fields.systemflg_acceleration = systemflg_acceleration;
  if ( tutorialId == -1 )
  {
    v6 = BattleData_TypeInfo;
    if ( (BYTE3(BattleData_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0 && !BattleData_TypeInfo->_2.cctor_finished )
    {
      j_il2cpp_runtime_class_init_0(BattleData_TypeInfo);
      v6 = BattleData_TypeInfo;
      systemflg_acceleration = this->fields.systemflg_acceleration;
    }
    speedKey = v6->static_fields->speedKey;
    if ( (BYTE3(EncryptedPlayerPrefs_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0
      && !EncryptedPlayerPrefs_TypeInfo->_2.cctor_finished )
    {
      j_il2cpp_runtime_class_init_0(EncryptedPlayerPrefs_TypeInfo);
    }
    EncryptedPlayerPrefs__SetInt(speedKey, systemflg_acceleration, 0LL);
  }
}


void __fastcall BattleData__toggleSkipDead(BattleData_o *this, const MethodInfo *method)
{
  __int64 v3; // x1
  bool systemflg_skipDead; // w9
  BattleData_c *v5; // x0
  int32_t v6; // w19
  System_String_o *SkipDeadKey; // x20

  if ( (byte_40F6A70 & 1) == 0 )
  {
    sub_B16FFC(&BattleData_TypeInfo, method);
    sub_B16FFC(&EncryptedPlayerPrefs_TypeInfo, v3);
    byte_40F6A70 = 1;
  }
  if ( !this )
    sub_B170D4();
  systemflg_skipDead = !this->fields.systemflg_skipDead;
  this->fields.systemflg_skipDead = systemflg_skipDead;
  v5 = BattleData_TypeInfo;
  if ( (BYTE3(BattleData_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0 && !BattleData_TypeInfo->_2.cctor_finished )
  {
    j_il2cpp_runtime_class_init_0(BattleData_TypeInfo);
    v5 = BattleData_TypeInfo;
    systemflg_skipDead = this->fields.systemflg_skipDead;
  }
  v6 = systemflg_skipDead;
  SkipDeadKey = v5->static_fields->SkipDeadKey;
  if ( (BYTE3(EncryptedPlayerPrefs_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0
    && !EncryptedPlayerPrefs_TypeInfo->_2.cctor_finished )
  {
    j_il2cpp_runtime_class_init_0(EncryptedPlayerPrefs_TypeInfo);
  }
  EncryptedPlayerPrefs__SetInt(SkipDeadKey, v6, 0LL);
}


void __fastcall BattleData__toggleSkipSkillConf(BattleData_o *this, const MethodInfo *method)
{
  __int64 v3; // x1
  bool systemflg_skipskillconf; // w9
  BattleData_c *v5; // x0
  int32_t v6; // w19
  System_String_o *skipKey; // x20

  if ( (byte_40F6A69 & 1) == 0 )
  {
    sub_B16FFC(&BattleData_TypeInfo, method);
    sub_B16FFC(&EncryptedPlayerPrefs_TypeInfo, v3);
    byte_40F6A69 = 1;
  }
  if ( !this )
    sub_B170D4();
  systemflg_skipskillconf = !this->fields.systemflg_skipskillconf;
  this->fields.systemflg_skipskillconf = systemflg_skipskillconf;
  v5 = BattleData_TypeInfo;
  if ( (BYTE3(BattleData_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0 && !BattleData_TypeInfo->_2.cctor_finished )
  {
    j_il2cpp_runtime_class_init_0(BattleData_TypeInfo);
    v5 = BattleData_TypeInfo;
    systemflg_skipskillconf = this->fields.systemflg_skipskillconf;
  }
  v6 = systemflg_skipskillconf;
  skipKey = v5->static_fields->skipKey;
  if ( (BYTE3(EncryptedPlayerPrefs_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0
    && !EncryptedPlayerPrefs_TypeInfo->_2.cctor_finished )
  {
    j_il2cpp_runtime_class_init_0(EncryptedPlayerPrefs_TypeInfo);
  }
  EncryptedPlayerPrefs__SetInt(skipKey, v6, 0LL);
}


void __fastcall BattleData__toggleTdConstantVelocity(BattleData_o *this, const MethodInfo *method)
{
  __int64 v3; // x1
  bool systemflg_TdConstantvelocity; // w9
  BattleData_c *v5; // x0
  int32_t v6; // w19
  System_String_o *TdCvKey; // x20

  if ( (byte_40F6A6D & 1) == 0 )
  {
    sub_B16FFC(&BattleData_TypeInfo, method);
    sub_B16FFC(&EncryptedPlayerPrefs_TypeInfo, v3);
    byte_40F6A6D = 1;
  }
  if ( !this )
    sub_B170D4();
  systemflg_TdConstantvelocity = !this->fields.systemflg_TdConstantvelocity;
  this->fields.systemflg_TdConstantvelocity = systemflg_TdConstantvelocity;
  v5 = BattleData_TypeInfo;
  if ( (BYTE3(BattleData_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0 && !BattleData_TypeInfo->_2.cctor_finished )
  {
    j_il2cpp_runtime_class_init_0(BattleData_TypeInfo);
    v5 = BattleData_TypeInfo;
    systemflg_TdConstantvelocity = this->fields.systemflg_TdConstantvelocity;
  }
  v6 = systemflg_TdConstantvelocity;
  TdCvKey = v5->static_fields->TdCvKey;
  if ( (BYTE3(EncryptedPlayerPrefs_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0
    && !EncryptedPlayerPrefs_TypeInfo->_2.cctor_finished )
  {
    j_il2cpp_runtime_class_init_0(EncryptedPlayerPrefs_TypeInfo);
  }
  EncryptedPlayerPrefs__SetInt(TdCvKey, v6, 0LL);
}


void __fastcall BattleData__transformSvtCommand(
        BattleData_o *this,
        BattleServantData_o *svtData,
        const MethodInfo *method)
{
  const MethodInfo *v3; // x3
  BattleData_o *v6; // x0
  const MethodInfo *v7; // x3
  BattleData_o *v8; // x0
  const MethodInfo *v9; // x3

  BattleData__UpdateCommandData(this, this->fields.p_cmlist, svtData, v3);
  BattleData__UpdateCommandData(v6, this->fields.p_shcmlist, svtData, v7);
  BattleData__UpdateCommandData(v8, this->fields.fixedCommands, svtData, v9);
}


bool __fastcall BattleData__tryOverwriteEventEquipSkill(
        BattleData_o *this,
        System_Int32_array **skillIds,
        System_Int32_array **skillLvs,
        int32_t *masterIconId,
        const MethodInfo *method)
{
  __int64 v9; // x1
  __int64 v10; // x1
  __int64 v11; // x1
  __int64 v12; // x1
  struct BattleEntity_o *battle_ent; // x8
  int32_t eventId; // w23
  WebViewManager_o *Instance; // x0
  DataMasterBase_WarMaster__WarEntity__int__o *MasterData_WarQuestSelectionMaster; // x0
  EventDetailEntity_o *Entity; // x0
  WebViewManager_o *v18; // x0
  EventEquipSkillReleaseMaster_o *v19; // x0
  __int64 v20; // x2
  struct BattleInfoData_o *battle_info; // x8
  System_Int32_array *v22; // x0
  __int64 v23; // x2
  System_Int32_array *v24; // x0
  unsigned __int64 v25; // x22
  _BOOL8 Skill; // x0
  __int64 v27; // x1
  __int64 v28; // x2
  System_Int32_array *v29; // x8
  System_Int32_array *v30; // x8
  char *v31; // x8
  bool v32; // cf
  int32_t id[2]; // [xsp+0h] [xbp-40h] BYREF
  EventEquipSkillReleaseEntity_o *outEnt; // [xsp+8h] [xbp-38h] BYREF

  if ( (byte_40F6A2A & 1) == 0 )
  {
    sub_B16FFC(&Method_DataManager_GetMasterData_EventDetailMaster___, skillIds);
    sub_B16FFC(&Method_DataManager_GetMasterData_EventEquipSkillReleaseMaster___, v9);
    sub_B16FFC(&Method_DataMasterBase_EventDetailMaster__EventDetailEntity__int__GetEntity__, v10);
    sub_B16FFC(&int___TypeInfo, v11);
    sub_B16FFC(&Method_SingletonMonoBehaviour_DataManager__get_Instance__, v12);
    byte_40F6A2A = 1;
  }
  *(_QWORD *)id = 0LL;
  outEnt = 0LL;
  *skillLvs = 0LL;
  sub_B16F98(skillLvs, 0LL);
  *skillIds = 0LL;
  sub_B16F98(skillIds, 0LL);
  *masterIconId = 0;
  battle_ent = this->fields.battle_ent;
  if ( !battle_ent )
    goto LABEL_29;
  eventId = battle_ent->fields.eventId;
  if ( !eventId )
    goto LABEL_27;
  Instance = SingletonMonoBehaviour_WebViewManager___get_Instance((const MethodInfo_2A54F38 *)Method_SingletonMonoBehaviour_DataManager__get_Instance__);
  if ( !Instance )
    goto LABEL_29;
  MasterData_WarQuestSelectionMaster = (DataMasterBase_WarMaster__WarEntity__int__o *)DataManager__GetMasterData_WarQuestSelectionMaster_(
                                                                                        (DataManager_o *)Instance,
                                                                                        (const MethodInfo_18C3284 *)Method_DataManager_GetMasterData_EventDetailMaster___);
  if ( !MasterData_WarQuestSelectionMaster )
    goto LABEL_29;
  Entity = (EventDetailEntity_o *)DataMasterBase_WarMaster__WarEntity__int___GetEntity(
                                    MasterData_WarQuestSelectionMaster,
                                    eventId,
                                    (const MethodInfo_266F388 *)Method_DataMasterBase_EventDetailMaster__EventDetailEntity__int__GetEntity__);
  if ( !Entity )
    return (char)Entity;
  if ( !EventDetailEntity__IsEventOnlyEquip(Entity, 0LL) )
    goto LABEL_27;
  if ( !this->fields.battle_info )
    goto LABEL_29;
  v18 = SingletonMonoBehaviour_WebViewManager___get_Instance((const MethodInfo_2A54F38 *)Method_SingletonMonoBehaviour_DataManager__get_Instance__);
  if ( !v18 )
    goto LABEL_29;
  v19 = (EventEquipSkillReleaseMaster_o *)DataManager__GetMasterData_WarQuestSelectionMaster_(
                                            (DataManager_o *)v18,
                                            (const MethodInfo_18C3284 *)Method_DataManager_GetMasterData_EventEquipSkillReleaseMaster___);
  outEnt = 0LL;
  if ( !v19 )
    goto LABEL_29;
  if ( !EventEquipSkillReleaseMaster__tryGetOpenEventEquipSkillReleaseEntity(v19, eventId, &outEnt, 0LL) )
    goto LABEL_27;
  if ( !outEnt )
    goto LABEL_29;
  if ( !EventEquipSkillReleaseEntity__isForceOverwrite(outEnt, 0LL) )
  {
    battle_info = this->fields.battle_info;
    if ( !battle_info )
      goto LABEL_29;
    if ( !battle_info->fields.useEventEquip )
    {
LABEL_27:
      LOBYTE(Entity) = 0;
      return (char)Entity;
    }
  }
  v22 = (System_Int32_array *)sub_B17014(int___TypeInfo, 3LL, v20);
  *skillLvs = v22;
  sub_B16F98(skillLvs, v22);
  v24 = (System_Int32_array *)sub_B17014(int___TypeInfo, 3LL, v23);
  *skillIds = v24;
  sub_B16F98(skillIds, v24);
  v25 = 0LL;
  do
  {
    id[0] = -1;
    id[1] = -1;
    if ( !outEnt )
      goto LABEL_29;
    Skill = EventEquipSkillReleaseEntity__tryGetSkill(outEnt, v25, &id[1], id, 0LL);
    v29 = *skillLvs;
    if ( !*skillLvs )
      goto LABEL_29;
    if ( v25 >= v29->max_length )
      goto LABEL_30;
    v29->m_Items[v25 + 1] = id[0];
    v30 = *skillIds;
    if ( !*skillIds )
      goto LABEL_29;
    if ( v25 >= v30->max_length )
    {
LABEL_30:
      sub_B17100(Skill, v27, v28);
      sub_B170A0();
    }
    v31 = (char *)v30 + 4 * v25;
    v32 = v25++ >= 2;
    *((_DWORD *)v31 + 8) = id[1];
  }
  while ( !v32 );
  if ( !outEnt )
LABEL_29:
    sub_B170D4();
  LOBYTE(Entity) = 1;
  *masterIconId = outEnt->fields.overwriteIconId;
  return (char)Entity;
}


void __fastcall BattleData__turnProgressing(BattleData_o *this, const MethodInfo *method)
{
  __int64 v3; // x1
  __int64 v4; // x1
  __int64 v5; // x1
  __int64 v6; // x1
  __int64 v7; // x1
  __int64 v8; // x1
  struct System_Collections_Generic_List_BattleSkillInfoData__o *masterSkillInfo; // x8
  int size; // w21
  _DWORD *FieldPlayerServantList; // x0
  const MethodInfo *v12; // x1
  __int64 v13; // x2
  int v14; // w8
  _DWORD *v15; // x20
  unsigned int v16; // w23
  int32_t v17; // w22
  BattleServantData_o *v18; // x0
  __int64 v19; // x8
  __int64 v20; // x9
  __int64 v21; // x11
  int32_t v22; // w11
  int32_t endMasterSkillTurnBuffValue; // w8
  __int64 v24; // x23
  int32_t v25; // w20
  struct System_Collections_Generic_List_BattleSkillInfoData__o *v26; // x22
  BattleSkillInfoData_o *v27; // x0
  __int64 v28; // x1
  __int64 v29; // x2
  __int64 v30; // x3
  __int64 v31; // x4
  struct System_Collections_Generic_List_AiNpcBattleServantData__o *aiNpcDataList; // x19
  BattleData___c_c *v33; // x0
  struct BattleData___c_StaticFields *static_fields; // x8
  System_Action_DrawLotsDisplayMessage_DisplayedInGroup_SaveData__o *_9__335_0; // x20
  Il2CppObject *v36; // x21
  struct BattleData___c_StaticFields *v37; // x0

  if ( (byte_40F6A25 & 1) == 0 )
  {
    sub_B16FFC(&Method_System_Action_AiNpcBattleServantData___ctor__, method);
    sub_B16FFC(&System_Action_AiNpcBattleServantData__TypeInfo, v3);
    sub_B16FFC(&Method_System_Collections_Generic_List_AiNpcBattleServantData__ForEach__, v4);
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleSkillInfoData__get_Count__, v5);
    sub_B16FFC(&Method_System_Collections_Generic_List_BattleSkillInfoData__get_Item__, v6);
    sub_B16FFC(&Method_BattleData___c__turnProgressing_b__335_0__, v7);
    sub_B16FFC(&BattleData___c_TypeInfo, v8);
    byte_40F6A25 = 1;
  }
  masterSkillInfo = this->fields.masterSkillInfo;
  if ( !masterSkillInfo )
    goto LABEL_39;
  size = masterSkillInfo->fields._size;
  FieldPlayerServantList = BattleData__getFieldPlayerServantList(this, method);
  if ( !FieldPlayerServantList )
    goto LABEL_39;
  v14 = FieldPlayerServantList[6];
  v15 = FieldPlayerServantList;
  if ( v14 >= 1 )
  {
    v16 = 0;
    v17 = 0;
    while ( 1 )
    {
      if ( v16 >= v14 )
      {
        sub_B17100(FieldPlayerServantList, v12, v13);
        sub_B170A0();
      }
      v18 = *(BattleServantData_o **)&v15[2 * v16 + 8];
      if ( !v18 )
        goto LABEL_39;
      FieldPlayerServantList = BattleServantData__getShortenUserEquipSkill(v18, 0LL);
      if ( !FieldPlayerServantList )
        goto LABEL_39;
      v19 = *((_QWORD *)FieldPlayerServantList + 3);
      if ( v19 )
      {
        if ( (int)v19 >= 1 )
          break;
      }
LABEL_17:
      v14 = v15[6];
      if ( (int)++v16 >= v14 )
        goto LABEL_20;
    }
    v20 = 0LL;
    while ( 1 )
    {
      v21 = *(_QWORD *)&FieldPlayerServantList[2 * v20 + 8];
      if ( !v21 )
        break;
      v22 = *(_DWORD *)(v21 + 28);
      ++v20;
      if ( v17 <= v22 )
        v17 = v22;
      if ( (int)v20 >= (int)v19 )
        goto LABEL_17;
    }
LABEL_39:
    sub_B170D4();
  }
  v17 = 0;
LABEL_20:
  endMasterSkillTurnBuffValue = this->fields.endMasterSkillTurnBuffValue;
  this->fields.endMasterSkillTurnBuffValue = 0;
  if ( size >= 1 )
  {
    if ( v17 > endMasterSkillTurnBuffValue )
      endMasterSkillTurnBuffValue = v17;
    v24 = 0LL;
    v25 = endMasterSkillTurnBuffValue + 1;
    do
    {
      v26 = this->fields.masterSkillInfo;
      if ( !v26 )
        goto LABEL_39;
      if ( v26->fields._size <= (unsigned int)v24 )
        System_ThrowHelper__ThrowArgumentOutOfRangeException_41329284(0LL);
      v27 = v26->fields._items->m_Items[v24];
      if ( !v27 )
        goto LABEL_39;
      BattleSkillInfoData__TurnProgress(v27, v25, 0, -1, 0LL, 0LL);
    }
    while ( (int)++v24 < size );
  }
  BattleData__RenewTurnDamageRecord(this, v12);
  aiNpcDataList = this->fields.aiNpcDataList;
  v33 = BattleData___c_TypeInfo;
  if ( (BYTE3(BattleData___c_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0
    && !BattleData___c_TypeInfo->_2.cctor_finished )
  {
    j_il2cpp_runtime_class_init_0(BattleData___c_TypeInfo);
    v33 = BattleData___c_TypeInfo;
  }
  static_fields = v33->static_fields;
  _9__335_0 = (System_Action_DrawLotsDisplayMessage_DisplayedInGroup_SaveData__o *)static_fields->__9__335_0;
  if ( !_9__335_0 )
  {
    if ( (BYTE3(v33->vtable._0_Equals.methodPtr) & 4) != 0 && !v33->_2.cctor_finished )
    {
      j_il2cpp_runtime_class_init_0(v33);
      static_fields = BattleData___c_TypeInfo->static_fields;
    }
    v36 = (Il2CppObject *)static_fields->__9;
    _9__335_0 = (System_Action_DrawLotsDisplayMessage_DisplayedInGroup_SaveData__o *)sub_B170CC(
                                                                                       System_Action_AiNpcBattleServantData__TypeInfo,
                                                                                       v28,
                                                                                       v29,
                                                                                       v30,
                                                                                       v31);
    System_Action_DrawLotsDisplayMessage_DisplayedInGroup_SaveData____ctor(
      _9__335_0,
      v36,
      Method_BattleData___c__turnProgressing_b__335_0__,
      (const MethodInfo_24B7310 *)Method_System_Action_AiNpcBattleServantData___ctor__);
    v37 = BattleData___c_TypeInfo->static_fields;
    v37->__9__335_0 = (struct System_Action_AiNpcBattleServantData__o *)_9__335_0;
    sub_B16F98(&v37->__9__335_0, _9__335_0);
  }
  if ( !aiNpcDataList )
    goto LABEL_39;
  System_Collections_Generic_List_USFGOSetAudioGroupIndexConditional_WeightIndex___ForEach(
    (System_Collections_Generic_List_USFGOSetAudioGroupIndexConditional_WeightIndex__o *)aiNpcDataList,
    (System_Action_T__o *)_9__335_0,
    (const MethodInfo_2F269F0 *)Method_System_Collections_Generic_List_AiNpcBattleServantData__ForEach__);
}


void __fastcall BattleData__updateEventActivityGauge(BattleData_o *this, int32_t point, const MethodInfo *method)
{
  BattlePerformance_o *perf; // x0

  perf = this->fields.perf;
  if ( !perf )
    sub_B170D4();
  BattlePerformance__PlayEventInfoPointGaugeEffect(perf, point, 0LL);
}


// local variable allocation has failed, the output may be wrong!
void __fastcall BattleData__updateOverwriteBgIndividuality(
        BattleData_o *this,
        int32_t bgId,
        int32_t bgType,
        const MethodInfo *method)
{
  __int64 v7; // x1
  WebViewManager_o *Instance; // x0
  BattleBgMaster_o *MasterData_WarQuestSelectionMaster; // x0
  struct System_Int32_array *BgIndividuality; // x0

  if ( (byte_40F6A1C & 1) == 0 )
  {
    sub_B16FFC(&Method_DataManager_GetMasterData_BattleBgMaster___, *(_QWORD *)&bgId);
    sub_B16FFC(&Method_SingletonMonoBehaviour_DataManager__get_Instance__, v7);
    byte_40F6A1C = 1;
  }
  if ( bgId >= 1 )
  {
    Instance = SingletonMonoBehaviour_WebViewManager___get_Instance((const MethodInfo_2A54F38 *)Method_SingletonMonoBehaviour_DataManager__get_Instance__);
    if ( !Instance
      || (MasterData_WarQuestSelectionMaster = (BattleBgMaster_o *)DataManager__GetMasterData_WarQuestSelectionMaster_(
                                                                     (DataManager_o *)Instance,
                                                                     (const MethodInfo_18C3284 *)Method_DataManager_GetMasterData_BattleBgMaster___)) == 0LL )
    {
      sub_B170D4();
    }
    BgIndividuality = BattleBgMaster__GetBgIndividuality(MasterData_WarQuestSelectionMaster, bgId, bgType, 0LL);
    this->fields.overwriteBgIndividuality = BgIndividuality;
    sub_B16F98(&this->fields.overwriteBgIndividuality, BgIndividuality);
  }
}


void __fastcall BattleData__useMasterSkill(
        BattleData_o *this,
        BattleSkillInfoData_o *skillInfo,
        const MethodInfo *method)
{
  __int64 v5; // x1
  WebViewManager_o *Instance; // x0
  WarQuestSelectionMaster_o *MasterData_WarQuestSelectionMaster; // x0
  SkillLvMaster_o *v8; // x21
  int32_t v9; // w0
  SkillLvEntity_o *Entity; // x21
  int32_t v11; // w0
  const MethodInfo *v12; // x2
  int32_t v13; // w0
  const MethodInfo *v14; // x2
  int32_t EventActivityPoint; // w0

  if ( (byte_40F6A28 & 1) == 0 )
  {
    sub_B16FFC(&Method_DataManager_GetMasterData_SkillLvMaster___, skillInfo);
    sub_B16FFC(&Method_SingletonMonoBehaviour_DataManager__get_Instance__, v5);
    byte_40F6A28 = 1;
  }
  Instance = SingletonMonoBehaviour_WebViewManager___get_Instance((const MethodInfo_2A54F38 *)Method_SingletonMonoBehaviour_DataManager__get_Instance__);
  if ( !Instance )
    goto LABEL_11;
  MasterData_WarQuestSelectionMaster = DataManager__GetMasterData_WarQuestSelectionMaster_(
                                         (DataManager_o *)Instance,
                                         (const MethodInfo_18C3284 *)Method_DataManager_GetMasterData_SkillLvMaster___);
  if ( !skillInfo )
    goto LABEL_11;
  v8 = (SkillLvMaster_o *)MasterData_WarQuestSelectionMaster;
  v9 = ((__int64 (__fastcall *)(BattleSkillInfoData_o *, Il2CppMethodPointer))skillInfo->klass->vtable._5_get_skillId.method)(
         skillInfo,
         skillInfo->klass->vtable._6_get_IndividualityArray.methodPtr);
  if ( !v8 )
    goto LABEL_11;
  Entity = SkillLvMaster__GetEntity(v8, v9, skillInfo->fields.skilllv, 0LL);
  v11 = ((__int64 (__fastcall *)(BattleSkillInfoData_o *, Il2CppMethodPointer))skillInfo->klass->vtable._5_get_skillId.method)(
          skillInfo,
          skillInfo->klass->vtable._6_get_IndividualityArray.methodPtr);
  if ( BattleData__recordEventMasterSkillUsing(this, v11, v12) )
  {
    v13 = ((__int64 (__fastcall *)(BattleSkillInfoData_o *, Il2CppMethodPointer))skillInfo->klass->vtable._5_get_skillId.method)(
            skillInfo,
            skillInfo->klass->vtable._6_get_IndividualityArray.methodPtr);
    EventActivityPoint = BattleData__getEventActivityPoint(this, v13, v14);
    if ( !this->fields.perf )
      goto LABEL_11;
    BattlePerformance__PlayEventInfoPointGaugeEffect(this->fields.perf, EventActivityPoint, 0LL);
  }
  if ( !Entity )
LABEL_11:
    sub_B170D4();
  skillInfo->fields.chargeTurn = Entity->fields.chargeTurn;
  this->fields.masterSkillUseWaveTurn = ServantWaveTurnEventOwner__CalcWaveTurnVal(
                                          this->fields.wavecount,
                                          this->fields.turnCount,
                                          0LL);
}


void __fastcall BattleData_CommandHistory___ctor(BattleData_CommandHistory_o *this, const MethodInfo *method)
{
  System_Object___ctor((Il2CppObject *)this, 0LL);
}


void __fastcall BattleData_SaveData___ctor(BattleData_SaveData_o *this, const MethodInfo *method)
{
  __int64 v2; // x2
  __int64 v3; // x3
  __int64 v4; // x4
  __int64 v6; // x1
  __int64 v7; // x1
  System_Collections_Generic_Dictionary_XmlQualifiedName__XmlSchemaObject__o *v8; // x20
  __int64 v9; // x1
  __int64 v10; // x2
  __int64 v11; // x3
  __int64 v12; // x4
  System_Collections_Generic_Dictionary_XmlQualifiedName__XmlSchemaObject__o *v13; // x20
  __int64 v14; // x2
  struct BattleFieldData_SaveData_array *v15; // x0

  if ( (byte_40F84FD & 1) == 0 )
  {
    sub_B16FFC(&Method_System_Collections_Generic_Dictionary_string__object___ctor__, method);
    sub_B16FFC(&System_Collections_Generic_Dictionary_string__object__TypeInfo, v6);
    sub_B16FFC(&BattleFieldData_SaveData___TypeInfo, v7);
    byte_40F84FD = 1;
  }
  v8 = (System_Collections_Generic_Dictionary_XmlQualifiedName__XmlSchemaObject__o *)sub_B170CC(
                                                                                       System_Collections_Generic_Dictionary_string__object__TypeInfo,
                                                                                       method,
                                                                                       v2,
                                                                                       v3,
                                                                                       v4);
  System_Collections_Generic_Dictionary_XmlQualifiedName__XmlSchemaObject____ctor(
    v8,
    (const MethodInfo_2DA3068 *)Method_System_Collections_Generic_Dictionary_string__object___ctor__);
  this->fields.p_svlist = (struct System_Collections_Generic_Dictionary_string__object__o *)v8;
  sub_B16F98(&this->fields.p_svlist, v8);
  v13 = (System_Collections_Generic_Dictionary_XmlQualifiedName__XmlSchemaObject__o *)sub_B170CC(
                                                                                        System_Collections_Generic_Dictionary_string__object__TypeInfo,
                                                                                        v9,
                                                                                        v10,
                                                                                        v11,
                                                                                        v12);
  System_Collections_Generic_Dictionary_XmlQualifiedName__XmlSchemaObject____ctor(
    v13,
    (const MethodInfo_2DA3068 *)Method_System_Collections_Generic_Dictionary_string__object___ctor__);
  this->fields.e_svlist = (struct System_Collections_Generic_Dictionary_string__object__o *)v13;
  sub_B16F98(&this->fields.e_svlist, v13);
  v15 = (struct BattleFieldData_SaveData_array *)sub_B17014(BattleFieldData_SaveData___TypeInfo, 0LL, v14);
  this->fields.savefield_datalist = v15;
  sub_B16F98(&this->fields.savefield_datalist, v15);
  this->fields.temporarySpell = -1;
  this->fields.masterSkillUseWaveTurn = -1LL;
  this->fields.enemyEntryMaxCountEachTurn = 0x7FFFFFFF;
  System_Object___ctor((Il2CppObject *)this, 0LL);
}


System_Nullable_int__o __fastcall BattleData_SaveData__GetEnemyEntryMaxCountEachTurn(
        BattleData_SaveData_o *this,
        const MethodInfo *method)
{
  int32_t enemyEntryMaxCountEachTurn; // w1
  System_Nullable_int__o v4; // x0
  System_Nullable_int__o v5; // [xsp+8h] [xbp-18h] BYREF
  System_Nullable_int__o v6; // 0:x0.8

  if ( (byte_40F84FC & 1) == 0 )
  {
    sub_B16FFC(&Method_System_Nullable_int___ctor__, method);
    byte_40F84FC = 1;
  }
  enemyEntryMaxCountEachTurn = this->fields.enemyEntryMaxCountEachTurn;
  v4 = 0LL;
  v5 = 0LL;
  if ( enemyEntryMaxCountEachTurn != 0x7FFFFFFF )
  {
    v6 = (System_Nullable_int__o)&v5;
    System_Nullable_int____ctor(
      v6,
      enemyEntryMaxCountEachTurn,
      (const MethodInfo_296877C *)Method_System_Nullable_int___ctor__);
    return v5;
  }
  return v4;
}


void __fastcall BattleData__PartsIntoTheBodyDelay_d__562___ctor(
        BattleData__PartsIntoTheBodyDelay_d__562_o *this,
        int32_t 1__state,
        const MethodInfo *method)
{
  System_Object___ctor((Il2CppObject *)this, 0LL);
  this->fields.__1__state = 1__state;
}


bool __fastcall BattleData__PartsIntoTheBodyDelay_d__562__MoveNext(
        BattleData__PartsIntoTheBodyDelay_d__562_o *this,
        const MethodInfo *method)
{
  int32_t _1__state; // w8
  struct BattleData_o *_4__this; // x20
  Il2CppObject **p__2__current; // x19
  bool result; // w0
  struct BattlePerformance_o *perf; // x8
  Il2CppObject **v8; // x19
  int v9; // w8

  _1__state = this->fields.__1__state;
  _4__this = this->fields.__4__this;
  if ( (unsigned int)(_1__state - 1) >= 2 )
  {
    if ( _1__state != 3 )
    {
      if ( !_1__state )
      {
        this->fields.__2__current = 0LL;
        p__2__current = &this->fields.__2__current;
        this->fields.__1__state = -1;
        sub_B16F98(&this->fields.__2__current, 0LL);
        result = 1;
        *((_DWORD *)p__2__current - 2) = 1;
        return result;
      }
      return 0;
    }
    this->fields.__1__state = -1;
    if ( _4__this )
      goto LABEL_10;
LABEL_15:
    sub_B170D4();
  }
  this->fields.__1__state = -1;
  if ( !_4__this )
    goto LABEL_15;
  perf = _4__this->fields.perf;
  if ( !perf )
    goto LABEL_15;
  if ( perf->fields.isBusyLoadEnemyActor )
  {
    this->fields.__2__current = 0LL;
    v8 = &this->fields.__2__current;
    sub_B16F98(&this->fields.__2__current, 0LL);
    v9 = 2;
LABEL_12:
    *((_DWORD *)v8 - 2) = v9;
    return 1;
  }
LABEL_10:
  if ( BattleData__CheckActorAllParts(_4__this, 0LL) )
  {
    this->fields.__2__current = 0LL;
    v8 = &this->fields.__2__current;
    sub_B16F98(v8, 0LL);
    v9 = 3;
    goto LABEL_12;
  }
  BattleData__PartsIntoTheBody(_4__this, 0LL);
  return 0;
}


Il2CppObject *__fastcall BattleData__PartsIntoTheBodyDelay_d__562__System_Collections_Generic_IEnumerator_System_Object__get_Current(
        BattleData__PartsIntoTheBodyDelay_d__562_o *this,
        const MethodInfo *method)
{
  return this->fields.__2__current;
}


void __fastcall __noreturn BattleData__PartsIntoTheBodyDelay_d__562__System_Collections_IEnumerator_Reset(
        BattleData__PartsIntoTheBodyDelay_d__562_o *this,
        const MethodInfo *method)
{
  __int64 v2; // x0
  __int64 v3; // x1
  __int64 v4; // x2
  __int64 v5; // x3
  __int64 v6; // x4
  System_NotSupportedException_o *v7; // x0
  __int64 v8; // x1

  v2 = sub_B17000(&System_NotSupportedException_TypeInfo, method);
  v7 = (System_NotSupportedException_o *)sub_B170CC(v2, v3, v4, v5, v6);
  System_NotSupportedException___ctor(v7, 0LL);
  sub_B17000(&Method_BattleData__PartsIntoTheBodyDelay_d__562_System_Collections_IEnumerator_Reset__, v8);
  sub_B170A0();
}


Il2CppObject *__fastcall BattleData__PartsIntoTheBodyDelay_d__562__System_Collections_IEnumerator_get_Current(
        BattleData__PartsIntoTheBodyDelay_d__562_o *this,
        const MethodInfo *method)
{
  return this->fields.__2__current;
}


void __fastcall BattleData__PartsIntoTheBodyDelay_d__562__System_IDisposable_Dispose(
        BattleData__PartsIntoTheBodyDelay_d__562_o *this,
        const MethodInfo *method)
{
  ;
}


void __fastcall BattleData___c___cctor(const MethodInfo *method)
{
  __int64 v1; // x1
  __int64 v2; // x2
  __int64 v3; // x3
  __int64 v4; // x4
  Il2CppObject *v5; // x19
  struct BattleData___c_StaticFields *static_fields; // x0

  if ( (byte_40F84F2 & 1) == 0 )
  {
    sub_B16FFC(&BattleData___c_TypeInfo, v1);
    byte_40F84F2 = 1;
  }
  v5 = (Il2CppObject *)sub_B170CC(BattleData___c_TypeInfo, v1, v2, v3, v4);
  System_Object___ctor(v5, 0LL);
  static_fields = BattleData___c_TypeInfo->static_fields;
  static_fields->__9 = (struct BattleData___c_o *)v5;
  sub_B16F98(static_fields, v5);
}


void __fastcall BattleData___c___ctor(BattleData___c_o *this, const MethodInfo *method)
{
  System_Object___ctor((Il2CppObject *)this, 0LL);
}


void __fastcall BattleData___c___AllocateAiToServants_b__560_0(
        BattleData___c_o *this,
        BattleServantData_o *svt,
        const MethodInfo *method)
{
  AiStateManager_o *AiStateManager; // x0

  if ( !svt || (AiStateManager = BattleServantData__get_AiStateManager(svt, 0LL)) == 0LL )
    sub_B170D4();
  ((void (__fastcall *)(AiStateManager_o *, _QWORD, void *))AiStateManager->klass->vtable._4_InitAiStates.method)(
    AiStateManager,
    0LL,
    AiStateManager->klass[1]._1.image);
}


bool __fastcall BattleData___c___GetFieldAliveLogicServantArray_b__450_0(
        BattleData___c_o *this,
        BattleServantData_o *x,
        const MethodInfo *method)
{
  if ( !x )
    sub_B170D4();
  return BattleServantData__isAliveLogic(x, 0, 0LL);
}


bool __fastcall BattleData___c___GetRaidType_b__578_0(
        BattleData___c_o *this,
        BattleServantData_o *svt,
        const MethodInfo *method)
{
  if ( !svt )
    sub_B170D4();
  return BattleServantData__get_IsRaidTypeBoss(svt, 0LL);
}


bool __fastcall BattleData___c___GetRestockServantLogicList_b__326_0(
        BattleData___c_o *this,
        RestockServantLogic_o *x,
        const MethodInfo *method)
{
  if ( !x )
    sub_B170D4();
  return x->fields._IsActive_k__BackingField;
}


int32_t __fastcall BattleData___c___GetRestockableSubServantArray_b__445_1(
        BattleData___c_o *this,
        BattleServantData_o *x,
        const MethodInfo *method)
{
  if ( !x )
    sub_B170D4();
  return BattleServantData__getDeckIndex(x, 0LL);
}


bool __fastcall BattleData___c___GetSubFieldIndividualityServant_b__382_0(
        BattleData___c_o *this,
        BattleServantData_o *x,
        const MethodInfo *method)
{
  if ( !x )
    sub_B170D4();
  return !BattleServantData__isDead(x, 0LL);
}


bool __fastcall BattleData___c___GetSubServantArray_b__444_0(
        BattleData___c_o *this,
        BattleServantData_o *x,
        const MethodInfo *method)
{
  if ( !x )
    sub_B170D4();
  return !x->fields.isEntry;
}


int32_t __fastcall BattleData___c___GetSubServantArray_b__444_1(
        BattleData___c_o *this,
        BattleServantData_o *x,
        const MethodInfo *method)
{
  if ( !x )
    sub_B170D4();
  return BattleServantData__getDeckIndex(x, 0LL);
}


int32_t __fastcall BattleData___c___GetSubServantUsableDeckIndex_b__323_0(
        BattleData___c_o *this,
        BattleServantData_o *x,
        const MethodInfo *method)
{
  if ( !x )
    sub_B170D4();
  return BattleServantData__getDeckIndex(x, 0LL);
}


bool __fastcall BattleData___c___IsAliveOtherRaidTypeBoss_b__577_0(
        BattleData___c_o *this,
        BattleServantData_o *svt,
        const MethodInfo *method)
{
  if ( !svt )
    sub_B170D4();
  return !BattleServantData__isDead(svt, 0LL) && !BattleServantData__get_IsRaidTypeBoss(svt, 0LL);
}


bool __fastcall BattleData___c___IsDeckNoUserSvt_b__304_0(
        BattleData___c_o *this,
        RestrictionEntity_o *x,
        const MethodInfo *method)
{
  if ( !x )
    sub_B170D4();
  return x->fields.type == 5;
}


int32_t __fastcall BattleData___c___LoadNoSkipDeadFirstIdList_b__270_0(
        BattleData___c_o *this,
        System_String_o *a,
        const MethodInfo *method)
{
  return System_Int32__Parse(a, 0LL);
}


BattleServantData_SaveData_o *__fastcall BattleData___c___SaveTurnData_b__520_0(
        BattleData___c_o *this,
        AiNpcBattleServantData_o *svt,
        const MethodInfo *method)
{
  if ( !svt )
    sub_B170D4();
  return (BattleServantData_SaveData_o *)((__int64 (__fastcall *)(AiNpcBattleServantData_o *, Il2CppMethodPointer))svt->klass->vtable._16_getSaveData.method)(
                                           svt,
                                           svt->klass->vtable._17_setSaveData.methodPtr);
}


BattleServantData_ConnectData_o *__fastcall BattleData___c___getActionList_b__524_0(
        BattleData___c_o *this,
        BattleServantData_o *bsd,
        const MethodInfo *method)
{
  if ( !bsd )
    sub_B170D4();
  return BattleServantData__getConnenctData(bsd, 0LL);
}


System_String_o *__fastcall BattleData___c___getActionList_b__524_1(
        BattleData___c_o *this,
        BattleServantData_ConnectData_o *cd,
        const MethodInfo *method)
{
  System_String_o *v4; // x0

  if ( (byte_40F84F3 & 1) == 0 )
  {
    sub_B16FFC(&StringLiteral_22756/*"u"*/, cd);
    byte_40F84F3 = 1;
  }
  if ( !cd )
    sub_B170D4();
  v4 = System_Int32__ToString((int)cd + 16, 0LL);
  return System_String__Concat_43743732((System_String_o *)StringLiteral_22756/*"u"*/, v4, 0LL);
}


System_String_o *__fastcall BattleData___c___getActionList_b__524_2(
        BattleData___c_o *this,
        System_String_o *a,
        System_String_o *b,
        const MethodInfo *method)
{
  return System_String__Concat_43743732(a, b, 0LL);
}


int32_t __fastcall BattleData___c___getEnemySubBackServantData_b__424_0(
        BattleData___c_o *this,
        BattleServantData_o *a,
        BattleServantData_o *b,
        const MethodInfo *method)
{
  int32_t DeckIndex; // w0

  if ( !a || (DeckIndex = BattleServantData__getDeckIndex(a, 0LL), !b) )
    sub_B170D4();
  return DeckIndex - BattleServantData__getDeckIndex(b, 0LL);
}


int32_t __fastcall BattleData___c___getPlayerSubServantData_b__420_0(
        BattleData___c_o *this,
        BattleServantData_o *a,
        BattleServantData_o *b,
        const MethodInfo *method)
{
  int32_t DeckIndex; // w0

  if ( !a || (DeckIndex = BattleServantData__getDeckIndex(a, 0LL), !b) )
    sub_B170D4();
  return DeckIndex - BattleServantData__getDeckIndex(b, 0LL);
}


int32_t __fastcall BattleData___c___getSubPlayerServantList_b__443_0(
        BattleData___c_o *this,
        BattleServantData_o *a,
        BattleServantData_o *b,
        const MethodInfo *method)
{
  int32_t DeckIndex; // w0

  if ( !a || (DeckIndex = BattleServantData__getDeckIndex(a, 0LL), !b) )
    sub_B170D4();
  return DeckIndex - BattleServantData__getDeckIndex(b, 0LL);
}


int32_t __fastcall BattleData___c___getWaveClearTurn_b__515_0(
        BattleData___c_o *this,
        System_String_o *s,
        const MethodInfo *method)
{
  int32_t result; // [xsp+Ch] [xbp-4h] BYREF

  result = 0;
  System_Int32__TryParse(s, &result, 0LL);
  return result;
}


bool __fastcall BattleData___c___isAliveEntriesByForcedFlag_b__626_0(
        BattleData___c_o *this,
        int32_t x,
        const MethodInfo *method)
{
  return x != -1;
}


int32_t __fastcall BattleData___c___loadMasterSkill_b__339_1(
        BattleData___c_o *this,
        int32_t x,
        const MethodInfo *method)
{
  return x;
}


int32_t __fastcall BattleData___c___loadQuest_b__554_0(
        BattleData___c_o *this,
        System_String_o *key,
        const MethodInfo *method)
{
  __int64 v4; // x1
  __int64 v5; // x1
  __int64 v6; // x1
  intptr_t v7; // w20
  System_Type_o *TypeFromHandle; // x20
  Il2CppObject *v9; // x0
  BattleData___c_o *v11; // x0
  Il2CppObject *v12; // x1
  const MethodInfo *v13; // x2
  System_RuntimeTypeHandle_o v14; // 0:w0.4

  if ( (byte_40F84F4 & 1) == 0 )
  {
    sub_B16FFC(&BattleData_CHAIN_COUNT_TYPE_var, key);
    sub_B16FFC(&BattleData_CHAIN_COUNT_TYPE_TypeInfo, v4);
    sub_B16FFC(&System_Enum_TypeInfo, v5);
    sub_B16FFC(&System_Type_TypeInfo, v6);
    byte_40F84F4 = 1;
  }
  v7 = (int)BattleData_CHAIN_COUNT_TYPE_var;
  if ( (BYTE3(System_Type_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0 && !System_Type_TypeInfo->_2.cctor_finished )
    j_il2cpp_runtime_class_init_0(System_Type_TypeInfo);
  v14.fields.value = v7;
  TypeFromHandle = System_Type__GetTypeFromHandle(v14, 0LL);
  if ( (BYTE3(System_Enum_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0 && !System_Enum_TypeInfo->_2.cctor_finished )
    j_il2cpp_runtime_class_init_0(System_Enum_TypeInfo);
  v9 = System_Enum__Parse(TypeFromHandle, key, 0LL);
  if ( !v9 )
    sub_B170D4();
  if ( v9->klass->_1.element_class == BattleData_CHAIN_COUNT_TYPE_TypeInfo->_1.element_class )
    return *(_DWORD *)j_il2cpp_object_unbox_0(v9);
  v11 = (BattleData___c_o *)sub_B173C8(v9);
  return BattleData___c___loadQuest_b__554_1(v11, v12, v13);
}


int32_t __fastcall BattleData___c___loadQuest_b__554_1(
        BattleData___c_o *this,
        Il2CppObject *value,
        const MethodInfo *method)
{
  if ( (byte_40F84F5 & 1) == 0 )
  {
    sub_B16FFC(&System_Convert_TypeInfo, value);
    byte_40F84F5 = 1;
  }
  if ( (BYTE3(System_Convert_TypeInfo->vtable._0_Equals.methodPtr) & 4) != 0
    && !System_Convert_TypeInfo->_2.cctor_finished )
  {
    j_il2cpp_runtime_class_init_0(System_Convert_TypeInfo);
  }
  return System_Convert__ToInt32(value, 0LL);
}


int32_t __fastcall BattleData___c___loadQuest_b__554_2(
        BattleData___c_o *this,
        System_Collections_Generic_KeyValuePair_BattleData_CHAIN_COUNT_TYPE__int__o x,
        const MethodInfo *method)
{
  int32_t key; // w19

  key = x.fields.key;
  if ( (byte_40F84F6 & 1) == 0 )
  {
    sub_B16FFC(&Method_System_Collections_Generic_KeyValuePair_BattleData_CHAIN_COUNT_TYPE__int__get_Key__, x);
    byte_40F84F6 = 1;
  }
  return key;
}


int32_t __fastcall BattleData___c___loadQuest_b__554_3(
        BattleData___c_o *this,
        System_Collections_Generic_KeyValuePair_BattleData_CHAIN_COUNT_TYPE__int__o x,
        const MethodInfo *method)
{
  int32_t value; // w19

  value = x.fields.value;
  if ( (byte_40F84F7 & 1) == 0 )
  {
    sub_B16FFC(&Method_System_Collections_Generic_KeyValuePair_BattleData_CHAIN_COUNT_TYPE__int__get_Value__, x);
    byte_40F84F7 = 1;
  }
  return value;
}


int32_t __fastcall BattleData___c___loadSaveTurnNstage_b__569_0(
        BattleData___c_o *this,
        BattleServantData_o *a,
        BattleServantData_o *b,
        const MethodInfo *method)
{
  int32_t DeckIndex; // w0

  if ( !a || (DeckIndex = BattleServantData__getDeckIndex(a, 0LL), !b) )
    sub_B170D4();
  return DeckIndex - BattleServantData__getDeckIndex(b, 0LL);
}


bool __fastcall BattleData___c___saveKnockdownEachWave_b__661_0(
        BattleData___c_o *this,
        BattleServantData_o *x,
        const MethodInfo *method)
{
  if ( !x )
    sub_B170D4();
  return !BattleServantData__isAlive(x, 0, 0LL);
}


void __fastcall BattleData___c___turnProgressing_b__335_0(
        BattleData___c_o *this,
        AiNpcBattleServantData_o *npc,
        const MethodInfo *method)
{
  if ( !npc )
    sub_B170D4();
  AiNpcBattleServantData__ResetActCount(npc, 0LL);
}


void __fastcall BattleData___c__DisplayClass324_0___ctor(
        BattleData___c__DisplayClass324_0_o *this,
        const MethodInfo *method)
{
  System_Object___ctor((Il2CppObject *)this, 0LL);
}


void __fastcall BattleData___c__DisplayClass324_0___RefreshAllSubServantDeckIndex_b__1(
        BattleData___c__DisplayClass324_0_o *this,
        BattleServantData_o *x,
        const MethodInfo *method)
{
  int32_t deckIndex; // w8

  deckIndex = this->fields.deckIndex;
  this->fields.deckIndex = deckIndex + 1;
  if ( !x )
    sub_B170D4();
  x->fields.deckIndex = deckIndex;
}


void __fastcall BattleData___c__DisplayClass337_0___ctor(
        BattleData___c__DisplayClass337_0_o *this,
        const MethodInfo *method)
{
  System_Object___ctor((Il2CppObject *)this, 0LL);
}


bool __fastcall BattleData___c__DisplayClass337_0___getMasterSkillInfo_b__0(
        BattleData___c__DisplayClass337_0_o *this,
        BattleSkillInfoData_o *s,
        const MethodInfo *method)
{
  if ( !s )
    sub_B170D4();
  return s->fields.type == 1 && s->fields.index == this->fields.index;
}


void __fastcall BattleData___c__DisplayClass339_0___ctor(
        BattleData___c__DisplayClass339_0_o *this,
        const MethodInfo *method)
{
  System_Object___ctor((Il2CppObject *)this, 0LL);
}


// local variable allocation has failed, the output may be wrong!
int32_t __fastcall BattleData___c__DisplayClass339_0___loadMasterSkill_b__0(
        BattleData___c__DisplayClass339_0_o *this,
        int32_t a,
        int32_t b,
        const MethodInfo *method)
{
  struct System_Int32_array *addIdxs; // x8
  unsigned int max_length; // w9

  addIdxs = this->fields.addIdxs;
  if ( !addIdxs )
    sub_B170D4();
  max_length = addIdxs->max_length;
  if ( max_length <= b || max_length <= a )
  {
    sub_B17100(this, *(_QWORD *)&a, *(_QWORD *)&b);
    sub_B170A0();
  }
  return addIdxs->m_Items[b + 1] - addIdxs->m_Items[a + 1];
}


void __fastcall BattleData___c__DisplayClass347_0___ctor(
        BattleData___c__DisplayClass347_0_o *this,
        const MethodInfo *method)
{
  System_Object___ctor((Il2CppObject *)this, 0LL);
}


bool __fastcall BattleData___c__DisplayClass347_0___getBoostSkillInfo_b__0(
        BattleData___c__DisplayClass347_0_o *this,
        BattleBoostItemInfoData_o *s,
        const MethodInfo *method)
{
  if ( !s )
    sub_B170D4();
  return s->fields.type == 21 && s->fields.index == this->fields.index;
}


void __fastcall BattleData___c__DisplayClass382_0___ctor(
        BattleData___c__DisplayClass382_0_o *this,
        const MethodInfo *method)
{
  System_Object___ctor((Il2CppObject *)this, 0LL);
}


void __fastcall BattleData___c__DisplayClass382_0___GetSubFieldIndividualityServant_b__1(
        BattleData___c__DisplayClass382_0_o *this,
        BattleServantData_o *x,
        const MethodInfo *method)
{
  System_Collections_Generic_List_int__o *retList; // x20
  System_Collections_Generic_IEnumerable_T__o *SubFieldIndividuality; // x0

  if ( (byte_40F84F8 & 1) == 0 )
  {
    sub_B16FFC(&Method_System_Collections_Generic_List_int__AddRange__, x);
    byte_40F84F8 = 1;
  }
  if ( !x
    || (retList = this->fields.retList,
        SubFieldIndividuality = (System_Collections_Generic_IEnumerable_T__o *)BattleServantData__GetSubFieldIndividuality(
                                                                                 x,
                                                                                 0LL),
        !retList) )
  {
    sub_B170D4();
  }
  System_Collections_Generic_List_int___AddRange(
    retList,
    SubFieldIndividuality,
    (const MethodInfo_2F10744 *)Method_System_Collections_Generic_List_int__AddRange__);
}


void __fastcall BattleData___c__DisplayClass412_0___ctor(
        BattleData___c__DisplayClass412_0_o *this,
        const MethodInfo *method)
{
  System_Object___ctor((Il2CppObject *)this, 0LL);
}


bool __fastcall BattleData___c__DisplayClass412_0___CheckFreshBuffDataList_b__0(
        BattleData___c__DisplayClass412_0_o *this,
        int32_t type,
        const MethodInfo *method)
{
  struct BuffEntity_o *ent; // x8

  ent = this->fields.ent;
  if ( !ent )
    sub_B170D4();
  return ent->fields.type == type;
}


void __fastcall BattleData___c__DisplayClass422_0___ctor(
        BattleData___c__DisplayClass422_0_o *this,
        const MethodInfo *method)
{
  System_Object___ctor((Il2CppObject *)this, 0LL);
}


bool __fastcall BattleData___c__DisplayClass422_0___GetAiNpcServantData_b__0(
        BattleData___c__DisplayClass422_0_o *this,
        AiNpcBattleServantData_o *data,
        const MethodInfo *method)
{
  if ( !data )
    sub_B170D4();
  return BattleServantData__checkID((BattleServantData_o *)data, this->fields.id, 0LL);
}


void __fastcall BattleData___c__DisplayClass429_0___ctor(
        BattleData___c__DisplayClass429_0_o *this,
        const MethodInfo *method)
{
  System_Object___ctor((Il2CppObject *)this, 0LL);
}


// local variable allocation has failed, the output may be wrong!
bool __fastcall BattleData___c__DisplayClass429_0___getPlayerServantIDList_b__0(
        BattleData___c__DisplayClass429_0_o *this,
        int32_t id,
        const MethodInfo *method)
{
  System_Collections_Generic_List_int__o *v5; // x0

  if ( (byte_40F84F9 & 1) == 0 )
  {
    sub_B16FFC(&Method_System_Collections_Generic_List_int__Contains__, *(_QWORD *)&id);
    byte_40F84F9 = 1;
  }
  v5 = this->fields.result;
  if ( !v5 )
    sub_B170D4();
  return !System_Collections_Generic_List_int___Contains(
            v5,
            id,
            (const MethodInfo_2F10944 *)Method_System_Collections_Generic_List_int__Contains__);
}


void __fastcall BattleData___c__DisplayClass445_0___ctor(
        BattleData___c__DisplayClass445_0_o *this,
        const MethodInfo *method)
{
  System_Object___ctor((Il2CppObject *)this, 0LL);
}


bool __fastcall BattleData___c__DisplayClass445_0___GetRestockableSubServantArray_b__0(
        BattleData___c__DisplayClass445_0_o *this,
        BattleServantData_o *x,
        const MethodInfo *method)
{
  if ( !x )
    sub_B170D4();
  return !x->fields.isEntry
      && BattleServantData__isAlive(x, 0, 0LL)
      && BattleServantData__checkEntryIndex(x, this->fields.deckIndex, 0LL);
}


void __fastcall BattleData___c__DisplayClass446_0___ctor(
        BattleData___c__DisplayClass446_0_o *this,
        const MethodInfo *method)
{
  System_Object___ctor((Il2CppObject *)this, 0LL);
}


// local variable allocation has failed, the output may be wrong!
bool __fastcall BattleData___c__DisplayClass446_0___getFieldPlayerServantIDList_b__0(
        BattleData___c__DisplayClass446_0_o *this,
        int32_t id,
        const MethodInfo *method)
{
  System_Collections_Generic_List_int__o *v5; // x0

  if ( (byte_40F84FA & 1) == 0 )
  {
    sub_B16FFC(&Method_System_Collections_Generic_List_int__Contains__, *(_QWORD *)&id);
    byte_40F84FA = 1;
  }
  v5 = this->fields.result;
  if ( !v5 )
    sub_B170D4();
  return !System_Collections_Generic_List_int___Contains(
            v5,
            id,
            (const MethodInfo_2F10944 *)Method_System_Collections_Generic_List_int__Contains__);
}


void __fastcall BattleData___c__DisplayClass463_0___ctor(
        BattleData___c__DisplayClass463_0_o *this,
        const MethodInfo *method)
{
  System_Object___ctor((Il2CppObject *)this, 0LL);
}


bool __fastcall BattleData___c__DisplayClass463_0___CheckAlivePlayers_b__0(
        BattleData___c__DisplayClass463_0_o *this,
        BattleServantData_o *svt,
        const MethodInfo *method)
{
  struct System_Func_BattleServantData__bool__o *func; // x0

  if ( (byte_40F84FB & 1) == 0 )
  {
    sub_B16FFC(&Method_System_Func_BattleServantData__bool__Invoke__, svt);
    byte_40F84FB = 1;
  }
  if ( !svt )
    goto LABEL_8;
  if ( BattleServantData__isAlive(svt, 0, 0LL) )
  {
    func = this->fields.func;
    if ( func )
      return System_Func_BattleBuffData_BuffData__bool___Invoke(
               (System_Func_BattleBuffData_BuffData__bool__o *)func,
               (BattleBuffData_BuffData_o *)svt,
               (const MethodInfo_2B6AB54 *)Method_System_Func_BattleServantData__bool__Invoke__);
LABEL_8:
    sub_B170D4();
  }
  return 0;
}


void __fastcall BattleData___c__DisplayClass540_0___ctor(
        BattleData___c__DisplayClass540_0_o *this,
        const MethodInfo *method)
{
  System_Object___ctor((Il2CppObject *)this, 0LL);
}


bool __fastcall BattleData___c__DisplayClass540_0___CreateLotteryCommandAssistInfo_b__0(
        BattleData___c__DisplayClass540_0_o *this,
        commandAssistData_o *x,
        const MethodInfo *method)
{
  BattleData_o *_4__this; // x0
  EventCommandAssistMaster_o *eventCommandAssistMaster; // x19
  int32_t eventId; // w0

  _4__this = this->fields.__4__this;
  if ( !_4__this
    || (eventCommandAssistMaster = this->fields.eventCommandAssistMaster,
        eventId = BattleData__get_eventId(_4__this, 0LL),
        !x)
    || !eventCommandAssistMaster )
  {
    sub_B170D4();
  }
  return !EventCommandAssistMaster__IsEnableEntity(eventCommandAssistMaster, eventId, x->fields.id, -1, 0LL);
}


void __fastcall BattleData___c__DisplayClass540_1___ctor(
        BattleData___c__DisplayClass540_1_o *this,
        const MethodInfo *method)
{
  System_Object___ctor((Il2CppObject *)this, 0LL);
}


bool __fastcall BattleData___c__DisplayClass540_1___CreateLotteryCommandAssistInfo_b__1(
        BattleData___c__DisplayClass540_1_o *this,
        commandAssistData_o *x,
        const MethodInfo *method)
{
  struct BattleDeckServantData_o *deckData; // x8

  if ( !x || (deckData = this->fields.deckData) == 0LL )
    sub_B170D4();
  return x->fields.userSvtId == deckData->fields.userSvtId && x->fields.cardIndex == this->fields.i;
}


void __fastcall BattleData___c__DisplayClass543_0___ctor(
        BattleData___c__DisplayClass543_0_o *this,
        const MethodInfo *method)
{
  System_Object___ctor((Il2CppObject *)this, 0LL);
}


bool __fastcall BattleData___c__DisplayClass543_0___GetCommandAssistList_b__0(
        BattleData___c__DisplayClass543_0_o *this,
        EventCommandAssistEntity_o *x,
        const MethodInfo *method)
{
  if ( !x )
    sub_B170D4();
  return x->fields.assistCardId == this->fields.cardType;
}


void __fastcall BattleData___c__DisplayClass554_0___ctor(
        BattleData___c__DisplayClass554_0_o *this,
        const MethodInfo *method)
{
  System_Object___ctor((Il2CppObject *)this, 0LL);
}


bool __fastcall BattleData___c__DisplayClass554_0___loadQuest_b__4(
        BattleData___c__DisplayClass554_0_o *this,
        BattleServantData_SaveData_o *x,
        const MethodInfo *method)
{
  if ( !x )
    sub_B170D4();
  return x->fields.index == this->fields.index;
}


void __fastcall BattleData___c__DisplayClass555_0___ctor(
        BattleData___c__DisplayClass555_0_o *this,
        const MethodInfo *method)
{
  System_Object___ctor((Il2CppObject *)this, 0LL);
}


bool __fastcall BattleData___c__DisplayClass555_0___LoadAiNpcServant_b__0(
        BattleData___c__DisplayClass555_0_o *this,
        BattleServantData_SaveData_o *x,
        const MethodInfo *method)
{
  struct BattleDeckServantData_o *deckSvt; // x8

  if ( !x || (deckSvt = this->fields.deckSvt) == 0LL )
    sub_B170D4();
  return x->fields.uniqueId == deckSvt->fields.uniqueId;
}


void __fastcall BattleData___c__DisplayClass560_0___ctor(
        BattleData___c__DisplayClass560_0_o *this,
        const MethodInfo *method)
{
  System_Object___ctor((Il2CppObject *)this, 0LL);
}


bool __fastcall BattleData___c__DisplayClass560_0___AllocateAiToServants_b__1(
        BattleData___c__DisplayClass560_0_o *this,
        AiAllocationInfo_o *ai,
        const MethodInfo *method)
{
  if ( !ai )
    sub_B170D4();
  return AiAllocationInfo__IsMatch(ai, this->fields.svt, this->fields.svtIndividuality, 0LL);
}


void __fastcall BattleData___c__DisplayClass722_0___ctor(
        BattleData___c__DisplayClass722_0_o *this,
        const MethodInfo *method)
{
  System_Object___ctor((Il2CppObject *)this, 0LL);
}


void __fastcall BattleData___c__DisplayClass722_0___ResetFieldEnemyUseBuff_b__0(
        BattleData___c__DisplayClass722_0_o *this,
        BattleServantData_o *svt,
        const MethodInfo *method)
{
  BattleBuffData_o *BuffData; // x0

  if ( !svt || (BuffData = BattleServantData__get_BuffData(svt, 0LL)) == 0LL )
    sub_B170D4();
  BattleBuffData__ResetTargetUseBuff(BuffData, this->fields.targetType, this->fields.isIntervalOnly, 0LL);
}


void __fastcall BattleData___c__DisplayClass723_0___ctor(
        BattleData___c__DisplayClass723_0_o *this,
        const MethodInfo *method)
{
  System_Object___ctor((Il2CppObject *)this, 0LL);
}


bool __fastcall BattleData___c__DisplayClass723_0___ExistsFieldEnemyIntervalBuff_b__0(
        BattleData___c__DisplayClass723_0_o *this,
        BattleServantData_o *svt,
        const MethodInfo *method)
{
  BattleBuffData_o *BuffData; // x0

  if ( !svt || (BuffData = BattleServantData__get_BuffData(svt, 0LL)) == 0LL )
    sub_B170D4();
  return BattleBuffData__ExistsTargetIntervalBuff(BuffData, this->fields.targetType, 0LL);
}